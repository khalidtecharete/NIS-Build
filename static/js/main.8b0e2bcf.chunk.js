/*! For license information please see main.8b0e2bcf.chunk.js.LICENSE.txt */
(this["webpackJsonpnew-nis"]=this["webpackJsonpnew-nis"]||[]).push([[0],{1005:function(e,t){},1053:function(e,t,n){},1054:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"hydrateJobContract",(function(){return YH})),n.d(r,"getContracts",(function(){return QH})),n.d(r,"getContractTemplate",(function(){return ZH})),n.d(r,"getJobContracts",(function(){return $H})),n.d(r,"getJobLatestContract",(function(){return tG})),n.d(r,"addContractToJob",(function(){return rG})),n.d(r,"getJobContractDetail",(function(){return oG})),n.d(r,"getJobContractDetailByUid",(function(){return cG})),n.d(r,"updateJobContract",(function(){return lG})),n.d(r,"deleteJobContract",(function(){return dG})),n.d(r,"sendEmail",(function(){return hG})),n.d(r,"uploadSignature",(function(){return fG}));var a=n(0),o=n(39),i=n.n(o),c=n(7),s=n(8),l=n(9),u=n(11),d=n(10),p=n(1),h=n.n(p),b=n(15),f=n(6),m=(n(616),n(12)),j=n.n(m),v=n(18),O=n(22),g=n.n(O),x=n(5),y={black0:"#1d1d1d",black1:"#000000",gray0:"#fafafa",gray1:"#f1f1f1",semiGray:"#F6F6F6",gray2:"#d3dbde",gray3:"#9F9F9F",gray4:"#959595",gray5:"#5D5D5D",gray6:"#A59FA7",gray7:"#F9FAFA",menu:"#3a424b",white:"#ffffff",white1:"#f0f3f4",red1:"#C47272",blue0:"#EBF7FF",blue1:"#37B2E0",blue2:"#42A6E6",blue3:"#3296D6",blue4:"#289ecb",blue5:"#0056b3",blue6:"#4D5762",green0:"#71BA90",green1:"#F5FFFB",green2:"#23B376",green3:"#d4edda",green4:"#28a745",purple0:"#BD83E8",purple1:"#9B71BA",purple2:"#8C4FB9",orange0:"#FFF7E6",orange1:"#FFC646",orange2:"#F5AA00",transparent:"transparent",yellow:"#F5AA01",bootstrap:{success0:"#d4edda",success1:"#c3e6cb",success2:"#155724",warning0:"#fff3cd",warning1:"#ffeeba",warning2:"#856404",danger0:"#f8d7da",danger1:"#f5c6cb",danger2:"#721c24",info0:"#ffffff",info1:"#d3dbde",info2:"#5D5D5D",outline:"#80bdff",boxShadow:"rgba(0,123,255,.25)"}},w=n(52),_=h.a.createContext({isOpen:!0,toggleSidebar:function(){return null}});var k=n(16);function S(){return(S=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function C(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var N=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),E=p.createElement("line",{className:"a",x1:.75,y1:12,x2:23.25,y2:12}),A=p.createElement("line",{className:"a",x1:12,y1:.75,x2:12,y2:23.25});function T(e,t){var n=e.title,r=e.titleId,a=C(e,["title","titleId"]);return p.createElement("svg",S({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,N,E,A)}var I=p.forwardRef(T);n.p;function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function D(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var M=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),P=p.createElement("line",{className:"a",x1:12,y1:7.5,x2:12,y2:16.5}),L=p.createElement("line",{className:"a",x1:7.5,y1:12,x2:16.5,y2:12}),F=p.createElement("circle",{className:"a",cx:12,cy:12,r:11.25});function U(e,t){var n=e.title,r=e.titleId,a=D(e,["title","titleId"]);return p.createElement("svg",R({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,M,P,L,F)}var V=p.forwardRef(U);n.p;function B(){return(B=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function J(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var z=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21.4926,13.0074c2.34315,2.34315 2.34315,6.14214 0,8.48528c-2.34315,2.34315 -6.14214,2.34315 -8.48528,0c-2.34315,-2.34315 -2.34315,-6.14214 -1.77636e-15,-8.48528c2.34315,-2.34315 6.14214,-2.34315 8.48528,-1.77636e-15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,14.25v6"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,17.25h6"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,20.25h-6l-2.85346e-08,7.10738e-10c-0.808294,0.0201329 -1.47987,-0.618798 -1.5,-1.42709c-0.000605234,-0.0242988 -0.000605233,-0.048609 1.42148e-09,-0.0729079v-14.893l-3.02309e-08,-9.22202e-07c-0.0281074,-0.857435 0.642664,-1.57605 1.5,-1.607h15l4.38612e-08,1.58319e-09c0.857337,0.030946 1.52811,0.749565 1.5,1.607v4.393"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.25,0.75v4.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,0.75v4.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,0.75v4.5"}));function q(e,t){var n=e.title,r=e.titleId,a=J(e,["title","titleId"]);return p.createElement("svg",B({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,z)}var W=p.forwardRef(q);n.p;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function G(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Y=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12,18.75h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v1.63918e-08c0,-0.207107 -0.167893,-0.375 -0.375,-0.375v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeWidth:1.5,d:"M12,15.75v-7.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.621,1.76l3.9326e-08,8.00607e-08c-0.43975,-0.895254 -1.52198,-1.26451 -2.41724,-0.824762c-0.358575,0.176133 -0.648629,0.466187 -0.824762,0.824762l-9.473,19.298l-1.5871e-08,3.22857e-08c-0.370583,0.753864 -0.0598732,1.66541 0.69399,2.03599c0.209097,0.102788 0.439014,0.156164 0.67201,0.156009h19.456l4.34975e-08,2.88658e-11c0.840025,0.000557409 1.52145,-0.679965 1.52201,-1.51999c0.000154607,-0.232996 -0.0532212,-0.462912 -0.156009,-0.67201Z"}));function Q(e,t){var n=e.title,r=e.titleId,a=G(e,["title","titleId"]);return p.createElement("svg",H({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Y)}var K=p.forwardRef(Q);n.p;function Z(){return(Z=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function X(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ee=p.createElement("line",{className:"a",x1:.749,y1:23.25,x2:22.499,y2:23.25}),te=p.createElement("path",{className:"a",d:"M2.749,18.75H5.5a.5.5,0,0,1,.5.5v4a0,0,0,0,1,0,0H2.249a0,0,0,0,1,0,0v-4A.5.5,0,0,1,2.749,18.75Z"}),ne=p.createElement("path",{className:"a",d:"M10.249,9.75H13a.5.5,0,0,1,.5.5v13a0,0,0,0,1,0,0H9.749a0,0,0,0,1,0,0v-13A.5.5,0,0,1,10.249,9.75Z"}),re=p.createElement("path",{className:"a",d:"M17.749,14.25H20.5a.5.5,0,0,1,.5.5v8.5a0,0,0,0,1,0,0h-3.75a0,0,0,0,1,0,0v-8.5A.5.5,0,0,1,17.749,14.25Z"}),ae=p.createElement("line",{className:"a",x1:6.883,y1:5.121,x2:2.866,y2:9.134}),oe=p.createElement("line",{className:"a",x1:14.311,y1:6.325,x2:9.637,y2:5.075}),ie=p.createElement("line",{className:"a",x1:20.392,y1:2.889,x2:16.811,y2:5.689}),ce=p.createElement("circle",{className:"a",cx:8.249,cy:4.501,r:1.5}),se=p.createElement("circle",{className:"a",cx:21.75,cy:2.25,r:1.5}),le=p.createElement("circle",{className:"a",cx:15.75,cy:6.75,r:1.5}),ue=p.createElement("circle",{className:"a",cx:2.249,cy:10.501,r:1.5});function de(e,t){var n=e.title,r=e.titleId,a=X(e,["title","titleId"]);return p.createElement("svg",Z({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$,ee,te,ne,re,ae,oe,ie,ce,se,le,ue)}var pe=p.forwardRef(de);n.p;function he(){return(he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function be(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fe=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),me=p.createElement("path",{className:"a",d:"M21.75,9.75v9a3,3,0,0,1-3,3H5.25a3,3,0,0,1-3-3v-9"}),je=p.createElement("path",{className:"a",d:"M21.75,2.25H2.25a1.5,1.5,0,0,0-1.5,1.5v3h22.5v-3A1.5,1.5,0,0,0,21.75,2.25Z"}),ve=p.createElement("path",{className:"a",d:"M15,11.25a1.5,1.5,0,0,1-1.5,1.5h-3a1.5,1.5,0,0,1,0-3h3A1.5,1.5,0,0,1,15,11.25Z"});function Oe(e,t){var n=e.title,r=e.titleId,a=be(e,["title","titleId"]);return p.createElement("svg",he({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,fe,me,je,ve)}var ge=p.forwardRef(Oe);n.p;function xe(){return(xe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ye(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var we=p.createElement("g",null,p.createElement("path",{id:"Arrow_Back",d:"M374.212,182.3H39.432l100.152-99.767c4.704-4.704,4.704-12.319,0-17.011 c-4.704-4.704-12.319-4.704-17.011,0L3.474,184.61c-4.632,4.632-4.632,12.379,0,17.011l119.1,119.1 c4.704,4.704,12.319,4.704,17.011,0c4.704-4.704,4.704-12.319,0-17.011L39.432,206.36h334.779c6.641,0,12.03-5.39,12.03-12.03 S380.852,182.3,374.212,182.3z"}),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null)),_e=p.createElement("g",null),ke=p.createElement("g",null),Se=p.createElement("g",null),Ce=p.createElement("g",null),Ne=p.createElement("g",null),Ee=p.createElement("g",null),Ae=p.createElement("g",null),Te=p.createElement("g",null),Ie=p.createElement("g",null),Re=p.createElement("g",null),De=p.createElement("g",null),Me=p.createElement("g",null),Pe=p.createElement("g",null),Le=p.createElement("g",null),Fe=p.createElement("g",null);function Ue(e,t){var n=e.title,r=e.titleId,a=ye(e,["title","titleId"]);return p.createElement("svg",xe({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 386.242 386.242",style:{enableBackground:"new 0 0 386.242 386.242"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,we,_e,ke,Se,Ce,Ne,Ee,Ae,Te,Ie,Re,De,Me,Pe,Le,Fe)}var Ve=p.forwardRef(Ue);n.p;function Be(){return(Be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Je(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ze=p.createElement("g",null,p.createElement("path",{id:"Arrow_Forward",d:"M384.97,192.487c0-3.212-1.323-6.28-3.525-8.59L262.357,63.606c-4.704-4.752-12.319-4.74-17.011,0 c-4.704,4.74-4.704,12.439,0,17.179l98.564,99.551H12.03C5.39,180.337,0,185.774,0,192.487c0,6.713,5.39,12.151,12.03,12.151 h331.868l-98.552,99.551c-4.704,4.74-4.692,12.439,0,17.179c4.704,4.74,12.319,4.74,17.011,0l119.088-120.291 C383.694,198.803,384.934,195.675,384.97,192.487z"}),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null)),qe=p.createElement("g",null),We=p.createElement("g",null),He=p.createElement("g",null),Ge=p.createElement("g",null),Ye=p.createElement("g",null),Qe=p.createElement("g",null),Ke=p.createElement("g",null),Ze=p.createElement("g",null),Xe=p.createElement("g",null),$e=p.createElement("g",null),et=p.createElement("g",null),tt=p.createElement("g",null),nt=p.createElement("g",null),rt=p.createElement("g",null),at=p.createElement("g",null);function ot(e,t){var n=e.title,r=e.titleId,a=Je(e,["title","titleId"]);return p.createElement("svg",Be({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 384.97 384.97",style:{enableBackground:"new 0 0 384.97 384.97"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ze,qe,We,He,Ge,Ye,Qe,Ke,Ze,Xe,$e,et,tt,nt,rt,at)}var it=p.forwardRef(ot);n.p;function ct(){return(ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function st(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var lt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,7.311l-10.72,10.719l-2.40003e-08,2.40345e-08c-0.292294,0.292711 -0.766535,0.293049 -1.05925,0.000754262c-0.000251616,-0.000251258 -0.000503053,-0.000502695 -0.00075431,-0.00075431l-10.72,-10.719"}));function ut(e,t){var n=e.title,r=e.titleId,a=st(e,["title","titleId"]);return p.createElement("svg",ct({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,lt)}var dt=p.forwardRef(ut);n.p;function pt(){return(pt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ht(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var bt=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;fill-rule:evenodd;}")),ft=p.createElement("path",{className:"cls-1",d:"M16.25,23.25,5.53,12.53a.749.749,0,0,1,0-1.06L16.25.75"});function mt(e,t){var n=e.title,r=e.titleId,a=ht(e,["title","titleId"]);return p.createElement("svg",pt({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,bt,ft)}var jt=p.forwardRef(mt);n.p;function vt(){return(vt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ot(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var gt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,17.189l10.72,-10.719l-2.22679e-08,2.22996e-08c0.292294,-0.292711 0.766535,-0.293049 1.05925,-0.000754355c0.000251616,0.000251258 0.000503053,0.000502695 0.00075431,0.00075431l10.72,10.719"}));function xt(e,t){var n=e.title,r=e.titleId,a=Ot(e,["title","titleId"]);return p.createElement("svg",vt({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,gt)}var yt=p.forwardRef(xt);n.p;function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _t(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,9.9l-10.977,10.978l4.64669e-07,-4.64669e-07c-2.63605,2.63606 -6.90994,2.63606 -9.546,9.29337e-07c-2.63606,-2.63605 -2.63606,-6.90994 -9.29337e-07,-9.546l9.016,-9.015l1.36283e-07,-1.41104e-07c1.72655,-1.78763 4.57537,-1.83715 6.363,-0.110594c1.78763,1.72655 1.83715,4.57537 0.110594,6.363c-0.0362194,0.0375007 -0.0730877,0.0743691 -0.110588,0.110588l-9.01501,9.02001l6.12874e-08,-5.9212e-08c-0.89368,0.863418 -2.31809,0.838886 -3.18151,-0.0547945c-0.842274,-0.871795 -0.842491,-2.25415 -0.000491428,-3.12621l9.016,-9.019"}));function St(e,t){var n=e.title,r=e.titleId,a=_t(e,["title","titleId"]);return p.createElement("svg",wt({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kt)}var Ct=p.forwardRef(St);n.p;function Nt(){return(Nt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Et(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var At=p.createElement("defs",null,p.createElement("style",null,"\r\n      .cls-1{fill:#f0f2ff;}.cls-2{fill:none;}.cls-2,.cls-6,.cls-7{stroke:#4550e5;stroke-linecap:round;stroke-linejoin:round;}.cls-3,.cls-6{fill:#fff;}.cls-4,.cls-7{fill:#d6daff;}.cls-5{fill:#4550e5;}\r\n    ")),Tt=p.createElement("g",{id:"Icons"},p.createElement("g",{id:"Background"},p.createElement("g",{id:"New_Symbol_80-3","data-name":"New Symbol 80"},p.createElement("path",{className:"cls-1",d:"M90,56A40,40,0,1,0,13.57,72.51H86.44A39.74,39.74,0,0,0,90,56Z"}),p.createElement("line",{className:"cls-2",x1:10.51,y1:72.51,x2:88.51,y2:72.51}),p.createElement("line",{className:"cls-2",x1:6.01,y1:72.51,x2:8.51,y2:72.51}),p.createElement("line",{className:"cls-2",x1:90.51,y1:72.51,x2:93.01,y2:72.51}))),p.createElement("g",{id:"Scene"},p.createElement("path",{className:"cls-3",d:"M58.51,63.5h18a1,1,0,0,1,1,1v8a0,0,0,0,1,0,0h-20a0,0,0,0,1,0,0v-8A1,1,0,0,1,58.51,63.5Z"}),p.createElement("path",{className:"cls-2",d:"M58.51,63.5h18a1,1,0,0,1,1,1v8a0,0,0,0,1,0,0h-20a0,0,0,0,1,0,0v-8A1,1,0,0,1,58.51,63.5Z"}),p.createElement("path",{className:"cls-4",d:"M60.51,52.5h14a1,1,0,0,1,1,1v10a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-10A1,1,0,0,1,60.51,52.5Z"}),p.createElement("path",{className:"cls-3",d:"M60.51,52.5h14a1,1,0,0,1,1,1v3a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-3A1,1,0,0,1,60.51,52.5Z"}),p.createElement("rect",{className:"cls-3",x:59.51,y:61.5,width:16,height:2}),p.createElement("path",{className:"cls-4",d:"M61.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,61.51,56.5Z"}),p.createElement("path",{className:"cls-5",d:"M61.51,54a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5.51.51,0,0,0-.5-.5Z"}),p.createElement("path",{className:"cls-5",d:"M73.51,54a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5.51.51,0,0,0-.5-.5Z"}),p.createElement("line",{className:"cls-2",x1:64.51,y1:54.5,x2:70.51,y2:54.5}),p.createElement("line",{className:"cls-2",x1:63.51,y1:58.5,x2:63.51,y2:59.5}),p.createElement("path",{className:"cls-2",d:"M60.51,52.5h14a1,1,0,0,1,1,1v10a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-10A1,1,0,0,1,60.51,52.5Z"}),p.createElement("path",{className:"cls-2",d:"M60.51,52.5h14a1,1,0,0,1,1,1v3a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-3A1,1,0,0,1,60.51,52.5Z"}),p.createElement("rect",{className:"cls-2",x:59.51,y:61.5,width:16,height:2}),p.createElement("path",{className:"cls-2",d:"M61.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,61.51,56.5Z"}),p.createElement("path",{className:"cls-4",d:"M69.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,69.51,56.5Z"}),p.createElement("line",{className:"cls-2",x1:71.51,y1:58.5,x2:71.51,y2:59.5}),p.createElement("path",{className:"cls-2",d:"M69.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,69.51,56.5Z"}),p.createElement("ellipse",{className:"cls-1",cx:41.54,cy:87.68,rx:11.5,ry:1.72}),p.createElement("path",{className:"cls-6",d:"M49.6,34.55a1.41,1.41,0,0,0-1.15-1.38v-.92a6.9,6.9,0,0,0-13.8,0v.92a1.41,1.41,0,0,0-1.15,1.38A1.43,1.43,0,0,0,34.79,36,6.9,6.9,0,0,0,48.3,36,1.43,1.43,0,0,0,49.6,34.55Z"}),p.createElement("path",{className:"cls-5",d:"M39,32.25a.86.86,0,1,0,.86.86.85.85,0,0,0-.86-.86Z"}),p.createElement("path",{className:"cls-5",d:"M44.14,32.25a.86.86,0,1,0,.86.86.86.86,0,0,0-.86-.86Z"}),p.createElement("circle",{className:"cls-4",cx:37.81,cy:35.41,r:.86}),p.createElement("circle",{className:"cls-4",cx:45.29,cy:35.41,r:.86}),p.createElement("path",{className:"cls-6",d:"M34.65,31.1a5.73,5.73,0,0,1,2.87-4.6c2.21-1.33,3.45-1.73,2.88-2.88,0,0,1.72.58,1.15,1.73,0,0,1.72-1.15,0-3.45,0,0,3.45,1.15,2.3,3.45A2.14,2.14,0,0,0,45,23.62s3.45,1.73,3.45,7.48v2.07C47.07,33,46.72,32,46.55,31A1.36,1.36,0,0,0,45,29.84a17.22,17.22,0,0,1-6.81,0A1.36,1.36,0,0,0,36.54,31c-.16,1-.51,2-1.89,2.2Z"}),p.createElement("path",{className:"cls-6",d:"M41.55,43.17a15.37,15.37,0,0,0,2.77-.72,5.28,5.28,0,0,0,3.58-4L48.3,36a2.3,2.3,0,0,1-2.1,2,3.4,3.4,0,0,1-2.48-.46,4.13,4.13,0,0,0-4.35,0,3.39,3.39,0,0,1-2.48.46,2.3,2.3,0,0,1-2.1-2l.41,2.48a5.27,5.27,0,0,0,3.57,4A15.41,15.41,0,0,0,41.55,43.17Z"}),p.createElement("path",{className:"cls-4",d:"M53.27,55.48a11.73,11.73,0,0,0-23.46,0v.69H34v9.66H49.13V56.17h4.14Z"}),p.createElement("path",{className:"cls-6",d:"M29.81,57.55a2.07,2.07,0,0,1-4.14,0,2.07,2.07,0,0,0-4.14,0,6.21,6.21,0,0,0,12.42,0V56.17H29.81Z"}),p.createElement("path",{className:"cls-3",d:"M34,65.83v20h5.52l.63-14.5a1.44,1.44,0,0,1,2.88,0l.63,14.5h5.52v-20Z"}),p.createElement("path",{className:"cls-2",d:"M34,65.83v20h5.52l.63-14.5a1.44,1.44,0,0,1,2.88,0l.63,14.5h5.52v-20Z"}),p.createElement("path",{className:"cls-7",d:"M33.09,84.74a1.16,1.16,0,0,0,1,1.79h4.71a1.16,1.16,0,0,0,1-1.69C38.52,82.44,34.52,82.57,33.09,84.74Z"}),p.createElement("path",{className:"cls-7",d:"M50,84.74a1.16,1.16,0,0,1-1,1.79H44.33a1.15,1.15,0,0,1-1-1.69C44.56,82.44,48.56,82.57,50,84.74Z"}),p.createElement("path",{className:"cls-2",d:"M53.27,55.48a11.73,11.73,0,0,0-23.46,0v.69H34v9.66H49.13V56.17h4.14Z"}),p.createElement("line",{className:"cls-2",x1:33.95,y1:52.03,x2:33.95,y2:54.79}),p.createElement("line",{className:"cls-2",x1:49.13,y1:52.03,x2:49.13,y2:54.79}),p.createElement("path",{className:"cls-6",d:"M49.13,68.59a2.07,2.07,0,1,0,4.14,0V56.17H49.13Z"}),p.createElement("path",{className:"cls-6",d:"M47.75,54.79a1.38,1.38,0,0,1-1.38-1.38V44.78a11.64,11.64,0,0,0-2.76-.85v9.48a1.38,1.38,0,0,1-1.38,1.38H40.85a1.38,1.38,0,0,1-1.38-1.38V43.93a11.79,11.79,0,0,0-2.76.85v8.63a1.38,1.38,0,0,1-1.38,1.38H34V78.25H49.13V54.79Z"}),p.createElement("path",{className:"cls-6",d:"M37.85,44.34h0l3.69,4.92,3.7-4.92h0a11.87,11.87,0,0,0-7.39,0Z"}),p.createElement("path",{className:"cls-7",d:"M30.12,54.79H34a0,0,0,0,1,0,0v2.76a0,0,0,0,1,0,0H30.12a1,1,0,0,1-1-1v-.76A1,1,0,0,1,30.12,54.79Z"}),p.createElement("path",{className:"cls-7",d:"M49.13,54.79H53a1,1,0,0,1,1,1v.76a1,1,0,0,1-1,1H49.13a0,0,0,0,1,0,0V54.79A0,0,0,0,1,49.13,54.79Z"}),p.createElement("path",{className:"cls-7",d:"M45.25,44.34h0l-3.7,4.92,1.86.92a1.16,1.16,0,0,0,1.47-.39l2.86-4.29A12.24,12.24,0,0,0,45.25,44.34Z"}),p.createElement("path",{className:"cls-7",d:"M37.84,44.34h0l3.69,4.92-1.85.92a1.15,1.15,0,0,1-1.47-.39l-2.86-4.29A12,12,0,0,1,37.84,44.34Z"}),p.createElement("path",{className:"cls-6",d:"M17.05,52.72a.69.69,0,0,0-.59,1.06,3.5,3.5,0,0,0,3,1.7h8.28a3.5,3.5,0,0,0,3-1.7.69.69,0,0,0-.59-1.06Z"}),p.createElement("path",{className:"cls-6",d:"M26.36,50a2.76,2.76,0,1,1-5.52,0Z"}),p.createElement("path",{className:"cls-2",d:"M26.36,50a1.37,1.37,0,0,1,1.38,1.38"}),p.createElement("path",{className:"cls-6",d:"M22.28,43.58c-.47,1.89,2,1.56,1.17,3.85A26,26,0,0,0,25,44.25a1.38,1.38,0,0,0-1-1.68A1.4,1.4,0,0,0,22.28,43.58Z"}),p.createElement("rect",{className:"cls-2",x:37.85,y:65.12,width:7.4,height:4.83,rx:1,ry:1})));function It(e,t){var n=e.title,r=e.titleId,a=Et(e,["title","titleId"]);return p.createElement("svg",Nt({id:"Duotone",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 112",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,At,Tt)}var Rt=p.forwardRef(It);n.p;function Dt(){return(Dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pt=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Lt=p.createElement("circle",{className:"cls-1",cx:5.25,cy:3.75,r:3}),Ft=p.createElement("line",{className:"cls-1",x1:5.25,y1:8.25,x2:5.25,y2:14.25}),Ut=p.createElement("path",{className:"cls-1",d:"M7.5,23.25l.75-7.5h1.5v-3a4.5,4.5,0,0,0-9,0v3h1.5L3,23.25Z"}),Vt=p.createElement("path",{className:"cls-1",d:"M18.75,3.75H16.717a1.342,1.342,0,0,0-.5,2.587l2.064.825a1.342,1.342,0,0,1-.5,2.588H15.75"}),Bt=p.createElement("line",{className:"cls-1",x1:17.25,y1:3.754,x2:17.25,y2:3}),Jt=p.createElement("line",{className:"cls-1",x1:17.25,y1:10.5,x2:17.25,y2:9.754}),zt=p.createElement("circle",{className:"cls-1",cx:17.25,cy:6.75,r:6});function qt(e,t){var n=e.title,r=e.titleId,a=Mt(e,["title","titleId"]);return p.createElement("svg",Dt({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pt,Lt,Ft,Ut,Vt,Bt,Jt,zt)}var Wt=p.forwardRef(qt);n.p;function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.59099,1.40701c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 -4.44089e-16,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,-4.44089e-16"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.59099,10.407c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 -4.44089e-16,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.59099,19.407c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 -4.44089e-16,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,3.75h15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,12.75h15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,21.75h15"}));function Qt(e,t){var n=e.title,r=e.titleId,a=Gt(e,["title","titleId"]);return p.createElement("svg",Ht({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Yt)}var Kt=p.forwardRef(Qt);n.p;function Zt(){return(Zt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $t=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25,23.25c-0.82842,0 -1.5,-0.67158 -1.5,-1.5v-16.5c0,-0.82842 0.67158,-1.5 1.5,-1.5h19.5c0.82842,0 1.5,0.67158 1.5,1.5v16.5c0,0.82842 -0.67158,1.5 -1.5,1.5Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.75,6v-5.25"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,6v-5.25"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.25,14.25h4.5v4.5h-4.5Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,9.75v9"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,9.75h9v9h-9Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,14.25h9"}));function en(e,t){var n=e.title,r=e.titleId,a=Xt(e,["title","titleId"]);return p.createElement("svg",Zt({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$t)}var tn=p.forwardRef(en);n.p;function nn(){return(nn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var an=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6,13.223l2.45,3.477l6.71632e-09,1.00325e-08c0.322293,0.481425 0.973835,0.610427 1.45526,0.288134c0.0964552,-0.0645725 0.181525,-0.144706 0.25174,-0.237134l7.843,-9.923"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.955,4.04405c4.3934,4.3934 4.3934,11.5165 0,15.9099c-4.3934,4.3934 -11.5165,4.3934 -15.9099,0c-4.3934,-4.3934 -4.3934,-11.5165 -1.77636e-15,-15.9099c4.3934,-4.3934 11.5165,-4.3934 15.9099,-1.77636e-15"}));function on(e,t){var n=e.title,r=e.titleId,a=rn(e,["title","titleId"]);return p.createElement("svg",nn({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,an)}var cn=p.forwardRef(on);n.p;function sn(){return(sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ln(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var un=p.createElement("path",{d:"M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"});function dn(e,t){var n=e.title,r=e.titleId,a=ln(e,["title","titleId"]);return p.createElement("svg",sn({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,un)}var pn=p.forwardRef(dn);n.p;function hn(){return(hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),mn=p.createElement("path",{className:"a",d:"M6.75,9l3.294,4.611a1.526,1.526,0,0,0,2.414.09L23.25.749"}),jn=p.createElement("path",{className:"a",d:"M21.75,10.5v9.75a3,3,0,0,1-3,3h-15a3,3,0,0,1-3-3v-15a3,3,0,0,1,3-3H16.5"});function vn(e,t){var n=e.title,r=e.titleId,a=bn(e,["title","titleId"]);return p.createElement("svg",hn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,fn,mn,jn)}var On=p.forwardRef(vn);n.p;function gn(){return(gn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),wn=p.createElement("path",{className:"a",d:"M19.5,19.5H5.25a.75.75,0,0,1-.75-.75V4.5"});function _n(e,t){var n=e.title,r=e.titleId,a=xn(e,["title","titleId"]);return p.createElement("svg",gn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,yn,wn)}var kn=p.forwardRef(_n);n.p;function Sn(){return(Sn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Nn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),En=p.createElement("circle",{className:"a",cx:12,cy:12,r:10.5}),An=p.createElement("line",{className:"a",x1:12,y1:12,x2:12,y2:8.25}),Tn=p.createElement("line",{className:"a",x1:12,y1:12,x2:16.687,y2:16.688});function In(e,t){var n=e.title,r=e.titleId,a=Cn(e,["title","titleId"]);return p.createElement("svg",Sn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Nn,En,An,Tn)}var Rn=p.forwardRef(In);n.p;function Dn(){return(Dn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ln=p.createElement("path",{className:"a",d:"M10.546,2.438a1.957,1.957,0,0,0,2.908,0L14.4,1.4a1.959,1.959,0,0,1,3.41,1.413l-.071,1.4A1.958,1.958,0,0,0,19.79,6.267l1.4-.071A1.959,1.959,0,0,1,22.6,9.606l-1.042.94a1.96,1.96,0,0,0,0,2.909l1.042.94a1.959,1.959,0,0,1-1.413,3.41l-1.4-.071a1.958,1.958,0,0,0-2.056,2.056l.071,1.4A1.959,1.959,0,0,1,14.4,22.6l-.941-1.041a1.959,1.959,0,0,0-2.908,0L9.606,22.6A1.959,1.959,0,0,1,6.2,21.192l.072-1.4a1.958,1.958,0,0,0-2.056-2.056l-1.4.071A1.958,1.958,0,0,1,1.4,14.4l1.041-.94a1.96,1.96,0,0,0,0-2.909L1.4,9.606A1.958,1.958,0,0,1,2.809,6.2l1.4.071A1.958,1.958,0,0,0,6.267,4.211L6.2,2.81A1.959,1.959,0,0,1,9.606,1.4Z"}),Fn=p.createElement("circle",{className:"a",cx:12,cy:12.001,r:4.5});function Un(e,t){var n=e.title,r=e.titleId,a=Mn(e,["title","titleId"]);return p.createElement("svg",Dn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pn,Ln,Fn)}var Vn=p.forwardRef(Un);n.p;function Bn(){return(Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zn=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75,0.75l5.02175e-07,7.2408e-10c-5.7907,-0.00834968 -10.4918,4.67917 -10.5001,10.4699c-0.00283107,1.96341 0.545689,3.88817 1.58311,5.55513l-3.083,6.475l6.474,-3.084l4.96324e-07,3.08709e-07c4.92418,3.0628 11.3989,1.55385 14.4617,-3.37033c3.0628,-4.92418 1.55385,-11.3989 -3.37033,-14.4617c-1.67015,-1.03882 -3.59851,-1.58765 -5.56537,-1.58396Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,10.88v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,10.875h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v0c0,-0.207107 -0.167893,-0.375 -0.375,-0.375"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75,10.88v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75,10.875h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v0c0,-0.207107 -0.167893,-0.375 -0.375,-0.375"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,10.88v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,10.875h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v0c0,-0.207107 -0.167893,-0.375 -0.375,-0.375"}));function qn(e,t){var n=e.title,r=e.titleId,a=Jn(e,["title","titleId"]);return p.createElement("svg",Bn({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,zn)}var Wn=p.forwardRef(qn);n.p;function Hn(){return(Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Qn=p.createElement("path",{className:"a",d:"M20.25,8.249v-3a1.5,1.5,0,0,0-1.5-1.5h-4"}),Kn=p.createElement("path",{className:"a",d:"M6.25,3.749h-4a1.5,1.5,0,0,0-1.5,1.5v16.5a1.5,1.5,0,0,0,1.5,1.5h6"}),Zn=p.createElement("path",{className:"a",d:"M14.421,4.736a.751.751,0,0,1-.712.513H7.291a.751.751,0,0,1-.712-.513l-1-3A.749.749,0,0,1,6.291.749h8.418a.749.749,0,0,1,.712.987Z"}),Xn=p.createElement("rect",{className:"a",x:11.25,y:11.249,width:12,height:12,rx:1.5,ry:1.5}),$n=p.createElement("line",{className:"a",x1:14.25,y1:14.249,x2:20.25,y2:14.249}),er=p.createElement("line",{className:"a",x1:14.25,y1:17.249,x2:20.25,y2:17.249}),tr=p.createElement("line",{className:"a",x1:14.25,y1:20.249,x2:16.5,y2:20.249});function nr(e,t){var n=e.title,r=e.titleId,a=Gn(e,["title","titleId"]);return p.createElement("svg",Hn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Yn,Qn,Kn,Zn,Xn,$n,er,tr)}var rr=p.forwardRef(nr);n.p;function ar(){return(ar=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function or(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ir=p.createElement("path",{d:"M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z"});function cr(e,t){var n=e.title,r=e.titleId,a=or(e,["title","titleId"]);return p.createElement("svg",ar({fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ir)}var sr=p.forwardRef(cr);n.p;function lr(){return(lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ur(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),pr=p.createElement("path",{className:"a",d:"M17.168,8.25a5.951,5.951,0,0,1-10.336,0H2.25a1.5,1.5,0,0,0-1.5,1.5v4.5a1.5,1.5,0,0,0,1.5,1.5h19.5a1.5,1.5,0,0,0,1.5-1.5V9.75a1.5,1.5,0,0,0-1.5-1.5Z"});function hr(e,t){var n=e.title,r=e.titleId,a=ur(e,["title","titleId"]);return p.createElement("svg",lr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,dr,pr)}var br=p.forwardRef(hr);n.p;function fr(){return(fr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var jr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),vr=p.createElement("line",{className:"a",x1:12.001,y1:3.75,x2:12.001,y2:15.75}),Or=p.createElement("polyline",{className:"a",points:"7.501 11.25 12.001 15.75 16.501 11.25"}),gr=p.createElement("path",{className:"a",d:"M23.251,15.75v1.5a3,3,0,0,1-3,3H3.751a3,3,0,0,1-3-3v-1.5"});function xr(e,t){var n=e.title,r=e.titleId,a=mr(e,["title","titleId"]);return p.createElement("svg",fr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,jr,vr,Or,gr)}var yr=p.forwardRef(xr);n.p;function wr(){return(wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _r(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kr=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Sr=p.createElement("path",{className:"cls-1",d:"M22.63,14.869,15,22.5l-3.75.75L12,19.5l7.63-7.631a2.116,2.116,0,0,1,2.992,0l.008.009A2.113,2.113,0,0,1,22.63,14.869Z"}),Cr=p.createElement("circle",{className:"cls-1",cx:7.5,cy:4.875,r:4.125}),Nr=p.createElement("path",{className:"cls-1",d:"M13.338,13.919A6.729,6.729,0,0,0,.75,17.25"});function Er(e,t){var n=e.title,r=e.titleId,a=_r(e,["title","titleId"]);return p.createElement("svg",wr({id:"Regular",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kr,Sr,Cr,Nr)}var Ar=p.forwardRef(Er);n.p;function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ir(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Rr=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.709,6.837l1.04002e-08,8.67456e-06c-0.000990832,-0.828427 -0.673366,-1.4992 -1.50179,-1.4982c-0.416891,0.000498618 -0.814768,0.174471 -1.0982,0.48019l-5.46101,5.91401l-1.68502e-07,1.82684e-07c-0.529876,0.574472 -0.529876,1.45953 3.27198e-07,2.034l5.458,5.914l1.47243e-08,1.58822e-08c0.563222,0.607514 1.51229,0.64342 2.1198,0.0801983c0.30572,-0.283431 0.479695,-0.681308 0.480196,-1.0982v-2.913h6l-3.27835e-07,7.10543e-15c4.14214,-1.81059e-07 7.5,3.35786 7.5,7.5v-6v0c0,-4.14214 -3.35786,-7.5 -7.5,-7.5h-6Z"}));function Dr(e,t){var n=e.title,r=e.titleId,a=Ir(e,["title","titleId"]);return p.createElement("svg",Tr({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Rr)}var Mr=p.forwardRef(Dr);n.p;function Pr(){return(Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Fr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ur=p.createElement("line",{className:"a",x1:9.75,y1:14.248,x2:.75,y2:23.248}),Vr=p.createElement("polyline",{className:"a",points:"23.25 7.498 23.25 0.748 16.5 0.748"}),Br=p.createElement("polyline",{className:"a",points:"0.75 16.498 0.75 23.248 7.5 23.248"}),Jr=p.createElement("line",{className:"a",x1:23.25,y1:.748,x2:14.25,y2:9.748}),zr=p.createElement("line",{className:"a",x1:14.25,y1:14.248,x2:23.25,y2:23.248}),qr=p.createElement("polyline",{className:"a",points:"0.75 7.498 0.75 0.748 7.5 0.748"}),Wr=p.createElement("polyline",{className:"a",points:"23.25 16.498 23.25 23.248 16.5 23.248"}),Hr=p.createElement("line",{className:"a",x1:.75,y1:.748,x2:9.75,y2:9.748});function Gr(e,t){var n=e.title,r=e.titleId,a=Lr(e,["title","titleId"]);return p.createElement("svg",Pr({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Fr,Ur,Vr,Br,Jr,zr,qr,Wr,Hr)}var Yr=p.forwardRef(Gr);n.p;function Qr(){return(Qr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Kr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Zr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Xr=p.createElement("path",{className:"a",d:"M22.5,21.75a1.5,1.5,0,0,1-1.5,1.5H3a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,3,.75H18.045a1.5,1.5,0,0,1,1.048.426l2.954,2.883A1.5,1.5,0,0,1,22.5,5.133Z"}),$r=p.createElement("line",{className:"a",x1:6.045,y1:8.25,x2:18.045,y2:8.25}),ea=p.createElement("line",{className:"a",x1:6.045,y1:12.75,x2:18.045,y2:12.75}),ta=p.createElement("line",{className:"a",x1:6.045,y1:17.25,x2:12.045,y2:17.25});function na(e,t){var n=e.title,r=e.titleId,a=Kr(e,["title","titleId"]);return p.createElement("svg",Qr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Zr,Xr,$r,ea,ta)}var ra=p.forwardRef(na);n.p;function aa(){return(aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function oa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ia=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ca=p.createElement("path",{className:"a",d:"M18.75,14.25H16.717a1.342,1.342,0,0,0-.5,2.587l2.064.826a1.342,1.342,0,0,1-.5,2.587H15.75"}),sa=p.createElement("line",{className:"a",x1:17.25,y1:14.25,x2:17.25,y2:13.5}),la=p.createElement("line",{className:"a",x1:17.25,y1:21,x2:17.25,y2:20.25}),ua=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),da=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),pa=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:9.75,y2:11.25}),ha=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:7.5,y2:15.75}),ba=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V8.25"});function fa(e,t){var n=e.title,r=e.titleId,a=oa(e,["title","titleId"]);return p.createElement("svg",aa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ia,ca,sa,la,ua,da,pa,ha,ba)}var ma=p.forwardRef(fa);n.p;function ja(){return(ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function va(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Oa=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ga=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),xa=p.createElement("path",{className:"a",d:"M19.924,15.506l-2.905,3.873a.752.752,0,0,1-1.131.081l-1.5-1.5"}),ya=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),wa=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:9.75,y2:11.25}),_a=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:7.5,y2:15.75}),ka=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V7.5"});function Sa(e,t){var n=e.title,r=e.titleId,a=va(e,["title","titleId"]);return p.createElement("svg",ja({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Oa,ga,xa,ya,wa,_a,ka)}var Ca=p.forwardRef(Sa);n.p;function Na(){return(Na=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ea(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Aa=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ta=p.createElement("path",{className:"a",d:"M22.63,14.87,15,22.5l-3.75.75L12,19.5l7.63-7.63a2.114,2.114,0,0,1,2.992,0l.008.008A2.114,2.114,0,0,1,22.63,14.87Z"}),Ia=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),Ra=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:14.25,y2:11.25}),Da=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:9,y2:15.75}),Ma=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V8.25"});function Pa(e,t){var n=e.title,r=e.titleId,a=Ea(e,["title","titleId"]);return p.createElement("svg",Na({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Aa,Ta,Ia,Ra,Da,Ma)}var La=p.forwardRef(Pa);n.p;function Fa(){return(Fa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ua(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Va=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ba=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),Ja=p.createElement("path",{className:"a",d:"M15.375,16.125A1.875,1.875,0,1,1,17.25,18"}),za=p.createElement("path",{className:"a",d:"M17.25,20.25a.375.375,0,1,1-.375.375.375.375,0,0,1,.375-.375"}),qa=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),Wa=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:9.75,y2:11.25}),Ha=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:7.5,y2:15.75}),Ga=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V7.5"});function Ya(e,t){var n=e.title,r=e.titleId,a=Ua(e,["title","titleId"]);return p.createElement("svg",Fa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Va,Ba,Ja,za,qa,Wa,Ha,Ga)}var Qa=p.forwardRef(Ya);n.p;function Ka(){return(Ka=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Za(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xa=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),$a=p.createElement("path",{className:"a",d:"M23.2,2.054a.751.751,0,0,0-.748-.8H1.5a.75.75,0,0,0-.748.8,11.254,11.254,0,0,0,8.972,10.22v9.875a.75.75,0,0,0,1.23.576l3-2.5a.748.748,0,0,0,.27-.576V12.274A11.253,11.253,0,0,0,23.2,2.054Z"});function eo(e,t){var n=e.title,r=e.titleId,a=Za(e,["title","titleId"]);return p.createElement("svg",Ka({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Xa,$a)}var to=p.forwardRef(eo);n.p;function no(){return(no=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ro(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ao=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,23.25v-22.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,17.708l3.154,-0.97l-5.53793e-08,1.70496e-08c2.64311,-0.813734 5.50867,-0.449345 7.864,1l-9.24515e-07,-5.69827e-07c2.29723,1.4159 5.08372,1.80127 7.679,1.062l2.987,-0.854l3.43564e-08,-9.81402e-09c0.48309,-0.137996 0.81612,-0.579587 0.816,-1.082v-11.727l2.59764e-08,2.80539e-05c-0.000568075,-0.621872 -0.505156,-1.12554 -1.12703,-1.12497c-0.103805,9.48249e-05 -0.207098,0.0145434 -0.306945,0.0429352l-2.369,0.677l-2.22624e-07,6.35881e-08c-2.59445,0.741052 -5.38089,0.357867 -7.679,-1.056l9.21966e-08,5.67328e-08c-2.35533,-1.44934 -5.22089,-1.81373 -7.864,-1l-3.15403,0.969008"}));function oo(e,t){var n=e.title,r=e.titleId,a=ro(e,["title","titleId"]);return p.createElement("svg",no({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ao)}var io=p.forwardRef(oo);n.p;function co(){return(co=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function so(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var lo=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),uo=p.createElement("path",{className:"a",d:"M17.439,6a1.5,1.5,0,0,1,1.5-1.5h0a1.5,1.5,0,0,1,1.5,1.5V17.376A5.118,5.118,0,0,1,18.939,21h0a5.118,5.118,0,0,1-3.621,1.5H12.4a6,6,0,0,1-4.993-2.671l-3.65-5.475a1.541,1.541,0,0,1,0-1.707h0A1.539,1.539,0,0,1,6,12.3l2.439,1.951V4.5A1.5,1.5,0,0,1,9.939,3h0a1.5,1.5,0,0,1,1.5,1.5V3a1.5,1.5,0,0,1,1.5-1.5h0a1.5,1.5,0,0,1,1.5,1.5V4.5a1.5,1.5,0,0,1,1.5-1.5h0a1.5,1.5,0,0,1,1.5,1.5Z"}),po=p.createElement("line",{className:"a",x1:11.439,y1:4.497,x2:11.439,y2:10.497}),ho=p.createElement("line",{className:"a",x1:14.439,y1:4.497,x2:14.439,y2:10.497}),bo=p.createElement("line",{className:"a",x1:17.439,y1:10.497,x2:17.439,y2:5.997});function fo(e,t){var n=e.title,r=e.titleId,a=so(e,["title","titleId"]);return p.createElement("svg",co({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,lo,uo,po,ho,bo)}var mo=p.forwardRef(fo);n.p;function jo(){return(jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Oo=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),go=p.createElement("path",{className:"cls-1",d:"M17.25,9a.75.75,0,0,0-.75-.75H14.25V6a.75.75,0,0,0-.75-.75h-3A.75.75,0,0,0,9.75,6V8.25H7.5A.75.75,0,0,0,6.75,9v3a.75.75,0,0,0,.75.75H9.75V15a.75.75,0,0,0,.75.75h3a.75.75,0,0,0,.75-.75V12.75H16.5a.75.75,0,0,0,.75-.75Z"}),xo=p.createElement("path",{className:"cls-1",d:"M2.25,3.923v7.614A11.907,11.907,0,0,0,9.882,22.65l1.041.4a3,3,0,0,0,2.154,0l1.041-.4A11.907,11.907,0,0,0,21.75,11.537V3.923a1.486,1.486,0,0,0-.868-1.362A21.7,21.7,0,0,0,12,.75,21.7,21.7,0,0,0,3.118,2.561,1.486,1.486,0,0,0,2.25,3.923Z"});function yo(e,t){var n=e.title,r=e.titleId,a=vo(e,["title","titleId"]);return p.createElement("svg",jo({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Oo,go,xo)}var wo=p.forwardRef(yo);n.p;function _o(){return(_o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ko(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var So=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Co=p.createElement("rect",{className:"a",x:1.5,y:1.497,width:21,height:21,rx:1.5,ry:1.5});function No(e,t){var n=e.title,r=e.titleId,a=ko(e,["title","titleId"]);return p.createElement("svg",_o({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,So,Co)}var Eo=p.forwardRef(No);n.p;function Ao(){return(Ao=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function To(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Io=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ro=p.createElement("rect",{className:"a",x:8.25,y:.747,width:15,height:4.5,rx:1.5,ry:1.5}),Do=p.createElement("rect",{className:"a",x:8.25,y:9.747,width:15,height:4.5,rx:1.5,ry:1.5}),Mo=p.createElement("rect",{className:"a",x:8.25,y:18.747,width:15,height:4.5,rx:1.5,ry:1.5}),Po=p.createElement("rect",{className:"a",x:.75,y:.747,width:4.5,height:4.5,rx:1.5,ry:1.5}),Lo=p.createElement("rect",{className:"a",x:.75,y:9.747,width:4.5,height:4.5,rx:1.5,ry:1.5}),Fo=p.createElement("rect",{className:"a",x:.75,y:18.747,width:4.5,height:4.5,rx:1.5,ry:1.5});function Uo(e,t){var n=e.title,r=e.titleId,a=To(e,["title","titleId"]);return p.createElement("svg",Ao({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Io,Ro,Do,Mo,Po,Lo,Fo)}var Vo=p.forwardRef(Uo);n.p;function Bo(){return(Bo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zo=p.createElement("path",{opacity:.2,fill:"#000",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946     s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634     c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),qo=p.createElement("path",{fill:"#000",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0     C22.32,8.481,24.301,9.057,26.013,10.047z",transform:"rotate(53.4931 20 20)"},p.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.7s",repeatCount:"indefinite"}));function Wo(e,t){var n=e.title,r=e.titleId,a=Jo(e,["title","titleId"]);return p.createElement("svg",Bo({id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,zo,qo)}var Ho=p.forwardRef(Wo);n.p;function Go(){return(Go=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qo=p.createElement("circle",{fill:"#fff",stroke:"none",cx:6,cy:50,r:6},p.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:.1})),Ko=p.createElement("circle",{fill:"#fff",stroke:"none",cx:26,cy:50,r:6},p.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:.2})),Zo=p.createElement("circle",{fill:"#fff",stroke:"none",cx:46,cy:50,r:6},p.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:.3}));function Xo(e,t){var n=e.title,r=e.titleId,a=Yo(e,["title","titleId"]);return p.createElement("svg",Go({id:"L4",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Qo,Ko,Zo)}var $o=p.forwardRef(Xo);n.p;function ei(){return(ei=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ti(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ni=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ri=p.createElement("circle",{className:"a",cx:12,cy:7.5,r:3}),ai=p.createElement("path",{className:"a",d:"M12,.75A6.75,6.75,0,0,1,18.75,7.5c0,3.251-5.132,10.527-6.446,12.337a.377.377,0,0,1-.608,0C10.382,18.027,5.25,10.751,5.25,7.5A6.75,6.75,0,0,1,12,.75Z"}),oi=p.createElement("path",{className:"a",d:"M17.979,17.784c2.732.541,4.521,1.444,4.521,2.466,0,1.657-4.7,3-10.5,3s-10.5-1.343-10.5-3c0-1.02,1.781-1.921,4.5-2.463"});function ii(e,t){var n=e.title,r=e.titleId,a=ti(e,["title","titleId"]);return p.createElement("svg",ei({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ni,ri,ai,oi)}var ci=p.forwardRef(ii);n.p;function si(){return(si=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function li(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ui=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),di=p.createElement("path",{className:"a",d:"M18.736,13.8c2.74.957,4.514,2.484,4.514,4.205,0,2.9-5.037,5.25-11.25,5.25S.75,20.9.75,18c0-1.715,1.761-3.237,4.485-4.195"}),pi=p.createElement("circle",{className:"a",cx:12,cy:3.375,r:2.625}),hi=p.createElement("path",{className:"a",d:"M15.75,12.745V10.5a3.75,3.75,0,0,0-7.5,0v2.25h1.5l.75,6h3l.75-6Z"});function bi(e,t){var n=e.title,r=e.titleId,a=li(e,["title","titleId"]);return p.createElement("svg",si({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ui,">",di,pi,hi)}var fi=p.forwardRef(bi);n.p;function mi(){return(mi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ji(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var vi=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Oi=p.createElement("path",{className:"cls-1",d:"M7.476,7.084A8.711,8.711,0,0,0,13.75,9.75,8.725,8.725,0,0,0,17.2,9.04"}),gi=p.createElement("circle",{className:"cls-1",cx:12,cy:9.75,r:5.25}),xi=p.createElement("path",{className:"cls-1",d:"M18.913,20.876a9.746,9.746,0,0,0-13.826,0"}),yi=p.createElement("circle",{className:"cls-1",cx:12,cy:12,r:11.25});function wi(e,t){var n=e.title,r=e.titleId,a=ji(e,["title","titleId"]);return p.createElement("svg",mi({id:"Regular",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,vi,Oi,gi,xi,yi)}var _i=p.forwardRef(wi);n.p;function ki(){return(ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Si(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ci=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ni=p.createElement("path",{className:"cls-1",d:"M23.25,15.75a7.669,7.669,0,0,1-6,7.5,7.668,7.668,0,0,1-6-7.5v-3a1.5,1.5,0,0,1,1.5-1.5h9a1.5,1.5,0,0,1,1.5,1.5Z"}),Ei=p.createElement("line",{className:"cls-1",x1:17.25,y1:15,x2:17.25,y2:19.5}),Ai=p.createElement("line",{className:"cls-1",x1:15,y1:17.25,x2:19.5,y2:17.25}),Ti=p.createElement("circle",{className:"cls-1",cx:6,cy:3.75,r:3}),Ii=p.createElement("path",{className:"cls-1",d:"M9.173,9.317A5.25,5.25,0,0,0,.75,13.5v2.25H3l.75,7.5h4.5L8.7,18.713"}),Ri=p.createElement("line",{className:"cls-1",x1:6,y1:8.25,x2:6,y2:14.25});function Di(e,t){var n=e.title,r=e.titleId,a=Si(e,["title","titleId"]);return p.createElement("svg",ki({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ci,Ni,Ei,Ai,Ti,Ii,Ri)}var Mi=p.forwardRef(Di);n.p;function Pi(){return(Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Li(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Fi=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ui=p.createElement("line",{className:"a",x1:12.75,y1:18.75,x2:11.25,y2:18.75}),Vi=p.createElement("path",{className:"a",d:"M20.122,18.75h.128a3,3,0,0,0,3-3v-6H.75v6a3,3,0,0,0,3,3h.128"}),Bi=p.createElement("circle",{className:"a",cx:6,cy:19.5,r:2.25}),Ji=p.createElement("circle",{className:"a",cx:18,cy:19.5,r:2.25}),zi=p.createElement("path",{className:"a",d:"M21.334,9.75a2.968,2.968,0,0,0,.416-1.5,2.987,2.987,0,0,0-4.789-2.395,5.216,5.216,0,0,0-9.922,0A2.984,2.984,0,0,0,2.666,9.75"});function qi(e,t){var n=e.title,r=e.titleId,a=Li(e,["title","titleId"]);return p.createElement("svg",Pi({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Fi,Ui,Vi,Bi,Ji,zi)}var Wi=p.forwardRef(qi);n.p;function Hi(){return(Hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yi=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,12v0c0,2.89949 -2.35051,5.25 -5.25,5.25c-2.89949,0 -5.25,-2.35051 -5.25,-5.25c0,-2.89949 2.35051,-5.25 5.25,-5.25l-2.29485e-07,5.32907e-15c2.89949,-1.26741e-07 5.25,2.3505 5.25,5.25c0,0 0,1.77636e-15 0,1.77636e-15Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,12v2.25l3.55271e-14,4.52987e-07c2.50178e-07,1.65685 1.34315,3 3,3c1.65685,-2.50178e-07 3,-1.34315 3,-3v-2.25l1.11123e-08,0.000500006c-3.55271e-15,-6.21265 -5.03635,-11.249 -11.249,-11.249c-6.21265,1.77636e-15 -11.249,5.03635 -11.249,11.249c0,6.21265 5.03635,11.249 11.249,11.249c2.43361,0 4.80159,-0.789209 6.7486,-2.2492"}));function Qi(e,t){var n=e.title,r=e.titleId,a=Gi(e,["title","titleId"]);return p.createElement("svg",Hi({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Yi)}var Ki=p.forwardRef(Qi);n.p;function Zi(){return(Zi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $i=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.23116,10.1668c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 -4.44089e-16,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M22.4812,10.1668c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8562,10.1668c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}));function ec(e,t){var n=e.title,r=e.titleId,a=Xi(e,["title","titleId"]);return p.createElement("svg",Zi({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$i)}var tc=p.forwardRef(ec);n.p;function nc(){return(nc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ac=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8432,18.7718c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8432,1.52184c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,-4.44089e-16"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8432,10.1468c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}));function oc(e,t){var n=e.title,r=e.titleId,a=rc(e,["title","titleId"]);return p.createElement("svg",nc({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ac)}var ic=p.forwardRef(oc);n.p;function cc(){return(cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function sc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var lc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),uc=p.createElement("path",{className:"a",d:"M21.75,18.75H11.25l-6,4.5v-4.5h-3a1.5,1.5,0,0,1-1.5-1.5v-15A1.5,1.5,0,0,1,2.25.75h19.5a1.5,1.5,0,0,1,1.5,1.5v15A1.5,1.5,0,0,1,21.75,18.75Z"}),dc=p.createElement("line",{className:"a",x1:5.25,y1:7.5,x2:18.75,y2:7.5}),pc=p.createElement("line",{className:"a",x1:5.25,y1:12,x2:15.75,y2:12});function hc(e,t){var n=e.title,r=e.titleId,a=sc(e,["title","titleId"]);return p.createElement("svg",cc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,lc,uc,dc,pc)}var bc=p.forwardRef(hc);n.p;function fc(){return(fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var jc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),vc=p.createElement("path",{className:"a",d:"M10,21.75a2.087,2.087,0,0,0,4.005,0"}),Oc=p.createElement("line",{className:"a",x1:12,y1:3,x2:12,y2:.75}),gc=p.createElement("path",{className:"a",d:"M12,3a7.5,7.5,0,0,1,7.5,7.5c0,7.046,1.5,8.25,1.5,8.25H3s1.5-1.916,1.5-8.25A7.5,7.5,0,0,1,12,3Z"});function xc(e,t){var n=e.title,r=e.titleId,a=mc(e,["title","titleId"]);return p.createElement("svg",fc({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,jc,vc,Oc,gc)}var yc=p.forwardRef(xc);n.p;function wc(){return(wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Sc=p.createElement("path",{className:"a",d:"M22.19,1.81a3.638,3.638,0,0,0-5.169.035l-14.5,14.5L.75,23.25l6.905-1.771,14.5-14.5A3.638,3.638,0,0,0,22.19,1.81Z"}),Cc=p.createElement("line",{className:"a",x1:16.606,y1:2.26,x2:21.74,y2:7.394}),Nc=p.createElement("line",{className:"a",x1:14.512,y1:4.354,x2:19.646,y2:9.488}),Ec=p.createElement("line",{className:"a",x1:2.521,y1:16.345,x2:7.66,y2:21.474});function Ac(e,t){var n=e.title,r=e.titleId,a=_c(e,["title","titleId"]);return p.createElement("svg",wc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kc,Sc,Cc,Nc,Ec)}var Tc=p.forwardRef(Ac);n.p;function Ic(){return(Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Dc=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.4168,4.95818c1.61091,1.61091 1.61091,4.22272 0,5.83363c-1.61091,1.61091 -4.22272,1.61091 -5.83363,1.77636e-15c-1.61091,-1.61091 -1.61091,-4.22272 -8.88178e-16,-5.83363c1.61091,-1.61091 4.22272,-1.61091 5.83363,-8.88178e-16"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,20.25l7.72715e-14,1.01922e-06c-5.62901e-07,-3.72792 3.02208,-6.75 6.75,-6.75c3.72792,-5.62901e-07 6.75,3.02208 6.75,6.75c0,0 0,7.10543e-15 0,7.10543e-15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.251,4.416l4.62532e-08,-3.00537e-08c1.91033,-1.24126 4.46519,-0.698877 5.70646,1.21145c1.24126,1.91033 0.698877,4.46519 -1.21145,5.70646c-1.36892,0.889477 -3.13363,0.887946 -4.50101,-0.00390605"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15,13.667l-7.0355e-07,1.59394e-07c3.63955,-0.824564 7.25843,1.45744 8.083,5.09699c0.110476,0.487633 0.166488,0.986021 0.167005,1.48601"}));function Mc(e,t){var n=e.title,r=e.titleId,a=Rc(e,["title","titleId"]);return p.createElement("svg",Ic({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Dc)}var Pc=p.forwardRef(Mc);n.p;function Lc(){return(Lc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Uc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Vc=p.createElement("path",{className:"a",d:"M4.949,8.783a1.5,1.5,0,0,0-.3,2.356l8.213,8.213a1.5,1.5,0,0,0,2.356-.3,7.522,7.522,0,0,0,.81-5.54l6.529-4.155a1.5,1.5,0,0,0,.256-2.326L16.97,1.188a1.5,1.5,0,0,0-2.326.255l-4.155,6.53A7.522,7.522,0,0,0,4.949,8.783Z"}),Bc=p.createElement("line",{className:"a",x1:8.753,y1:15.246,x2:.75,y2:23.249});function Jc(e,t){var n=e.title,r=e.titleId,a=Fc(e,["title","titleId"]);return p.createElement("svg",Lc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Uc,Vc,Bc)}var zc=p.forwardRef(Jc);n.p;function qc(){return(qc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Gc=p.createElement("circle",{className:"a",cx:12,cy:8.25,r:3.75}),Yc=p.createElement("path",{className:"a",d:"M12,.75a7.5,7.5,0,0,1,7.5,7.5c0,3.407-5.074,11.95-6.875,14.665a.75.75,0,0,1-1.25,0C9.574,20.2,4.5,11.657,4.5,8.25A7.5,7.5,0,0,1,12,.75Z"});function Qc(e,t){var n=e.title,r=e.titleId,a=Wc(e,["title","titleId"]);return p.createElement("svg",qc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Hc,Gc,Yc)}var Kc=p.forwardRef(Qc);n.p;function Zc(){return(Zc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $c=p.createElement("g",null,p.createElement("path",{d:"M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9 C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8 c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"}));function es(e,t){var n=e.title,r=e.titleId,a=Xc(e,["title","titleId"]);return p.createElement("svg",Zc({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 365 560",enableBackground:"new 0 0 365 560",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$c)}var ts=p.forwardRef(es);n.p;function ns(){return(ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var as=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),os=p.createElement("polygon",{className:"a",points:"17.25 15.75 6.75 15.75 5.25 23.25 18.75 23.25 17.25 15.75"}),is=p.createElement("path",{className:"a",d:"M17.85,18.75h3.9a1.5,1.5,0,0,0,1.5-1.5v-6H.75v6a1.5,1.5,0,0,0,1.5,1.5h3.9"}),cs=p.createElement("path",{className:"a",d:"M6.75,5.25H4.677a1.5,1.5,0,0,0-1.342.829L.75,11.25h22.5L20.665,6.079a1.5,1.5,0,0,0-1.342-.829H17.25"}),ss=p.createElement("rect",{className:"a",x:6.75,y:.75,width:10.5,height:7.5}),ls=p.createElement("path",{className:"a",d:"M20.625,14.25a.375.375,0,1,0,.375.375.375.375,0,0,0-.375-.375h0"}),us=p.createElement("line",{className:"a",x1:9.75,y1:20.25,x2:14.25,y2:20.25});function ds(e,t){var n=e.title,r=e.titleId,a=rs(e,["title","titleId"]);return p.createElement("svg",ns({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,as,os,is,cs,ss,ls,us)}var ps=p.forwardRef(ds);n.p;function hs(){return(hs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fs=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ms=p.createElement("line",{className:"a",x1:4.5,y1:19.5,x2:19.5,y2:4.5}),js=p.createElement("line",{className:"a",x1:4.5,y1:4.5,x2:19.5,y2:19.5});function vs(e,t){var n=e.title,r=e.titleId,a=bs(e,["title","titleId"]);return p.createElement("svg",hs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,fs,ms,js)}var Os=p.forwardRef(vs);n.p;function gs(){return(gs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ys=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ws=p.createElement("path",{className:"a",d:"M13.5,22a9.75,9.75,0,1,0-9.75-9.75V13"}),_s=p.createElement("polyline",{className:"a",points:"0.75 9.997 3.75 12.997 6.75 9.997"});function ks(e,t){var n=e.title,r=e.titleId,a=xs(e,["title","titleId"]);return p.createElement("svg",gs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ys,ws,_s)}var Ss=p.forwardRef(ks);n.p;function Cs(){return(Cs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ns(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Es=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),As=p.createElement("circle",{className:"a",cx:9.813,cy:9.812,r:9.063,transform:"translate(-3.056 4.62) rotate(-23.025)"}),Ts=p.createElement("line",{className:"a",x1:16.221,y1:16.22,x2:23.25,y2:23.25});function Is(e,t){var n=e.title,r=e.titleId,a=Ns(e,["title","titleId"]);return p.createElement("svg",Cs({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Es,As,Ts)}var Rs=p.forwardRef(Is);n.p;function Ds(){return(Ds=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ms(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ps=p.createElement("defs",null,p.createElement("style",null,".a,.b{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}.b{fill-rule:evenodd;}")),Ls=p.createElement("path",{className:"a",d:"M12,19.5a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,19.5h0"}),Fs=p.createElement("path",{className:"a",d:"M17.625,13.875A.375.375,0,1,0,18,14.25a.375.375,0,0,0-.375-.375h0"}),Us=p.createElement("path",{className:"a",d:"M15.977,17.853a.372.372,0,0,0-.265.11.375.375,0,1,0,.265-.11h0"}),Vs=p.createElement("path",{className:"a",d:"M8.023,17.853a.375.375,0,0,0-.266.64.375.375,0,1,0,.531-.53.373.373,0,0,0-.265-.11h0"}),Bs=p.createElement("path",{className:"a",d:"M15.977,9.9a.372.372,0,0,0-.265.11.375.375,0,1,0,.265-.11h0"}),Js=p.createElement("line",{className:"a",x1:18,y1:7.5,x2:19.875,y2:5.625}),zs=p.createElement("line",{className:"a",x1:19.5,y1:5.25,x2:20.25,y2:6}),qs=p.createElement("line",{className:"a",x1:12,y1:5.25,x2:12,y2:.75}),Ws=p.createElement("line",{className:"a",x1:14.25,y1:.75,x2:9.75,y2:.75}),Hs=p.createElement("path",{className:"b",d:"M12,5.25v9H3a9,9,0,1,0,9-9Z"}),Gs=p.createElement("path",{className:"a",d:"M7.757,9.477a.374.374,0,0,0-.265-.11h0a.376.376,0,1,0,.265.11"});function Ys(e,t){var n=e.title,r=e.titleId,a=Ms(e,["title","titleId"]);return p.createElement("svg",Ds({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ps,Ls,Fs,Us,Vs,Bs,Js,zs,qs,Ws,Hs,Gs)}var Qs=p.forwardRef(Ys);n.p;function Ks(){return(Ks=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xs=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),$s=p.createElement("line",{className:"a",x1:7.5,y1:12,x2:16.5,y2:12}),el=p.createElement("circle",{className:"a",cx:12,cy:12,r:11.25});function tl(e,t){var n=e.title,r=e.titleId,a=Zs(e,["title","titleId"]);return p.createElement("svg",Ks({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Xs,$s,el)}var nl=p.forwardRef(tl);n.p;function rl(){return(rl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function al(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ol=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.061,2.56v6.257l-2.15411e-08,0.000359056c-1.20108e-07,0.795441 0.315905,1.55832 0.878254,2.12089l11.5607,11.5617l-9.22958e-08,-9.22679e-08c0.58575,0.585573 1.53525,0.585573 2.121,1.84536e-07l6.879,-6.88l-4.5912e-08,4.59259e-08c0.585573,-0.58575 0.585573,-1.53525 9.1824e-08,-2.121l-11.561,-11.561l-4.69333e-08,-4.69032e-08c-0.562642,-0.562281 -1.32556,-0.878095 -2.121,-0.878h-6.257l-6.55671e-08,1.55431e-15c-0.828427,3.62117e-08 -1.5,0.671573 -1.5,1.5Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.37166,5.24934c0.585786,0.585786 0.585786,1.53553 0,2.12132c-0.585786,0.585786 -1.53553,0.585786 -2.12132,0c-0.585786,-0.585786 -0.585786,-1.53553 0,-2.12132c0.585786,-0.585786 1.53553,-0.585786 2.12132,0"}));function il(e,t){var n=e.title,r=e.titleId,a=al(e,["title","titleId"]);return p.createElement("svg",rl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ol)}var cl=p.forwardRef(il);n.p;function sl(){return(sl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ll(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ul=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75,23.248h9.75l-2.95052e-07,-7.10543e-15c3.72792,1.62953e-07 6.75,-3.02208 6.75,-6.75c1.62953e-07,-3.72792 -3.02208,-6.75 -6.75,-6.75h0.75l-1.96701e-07,-3.55271e-15c2.48528,1.08635e-07 4.5,-2.01472 4.5,-4.5c1.08635e-07,-2.48528 -2.01472,-4.5 -4.5,-4.5h-10.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.75,0.75v22.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.5,9.75h-6.75"}));function dl(e,t){var n=e.title,r=e.titleId,a=ll(e,["title","titleId"]);return p.createElement("svg",sl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ul)}var pl=p.forwardRef(dl);n.p;function hl(){return(hl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,0.75h-10.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.25,23.25h-10.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6,23.25l12,-22.5"}));function ml(e,t){var n=e.title,r=e.titleId,a=bl(e,["title","titleId"]);return p.createElement("svg",hl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,fl)}var jl=p.forwardRef(ml);n.p;function vl(){return(vl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ol(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var gl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,23.25h22.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75,0.75h3"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,0.75h3"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18.75,0.748v11.252v0c0,3.72792 -3.02208,6.75 -6.75,6.75c-3.72792,0 -6.75,-3.02208 -6.75,-6.75v-11.252"}));function xl(e,t){var n=e.title,r=e.titleId,a=Ol(e,["title","titleId"]);return p.createElement("svg",vl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,gl)}var yl=p.forwardRef(xl);n.p;function wl(){return(wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kl=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Sl=p.createElement("path",{className:"a",d:"M4.591,22.542A2.25,2.25,0,0,1,1.409,19.36L7.773,13l3.182,3.182Z"}),Cl=p.createElement("line",{className:"a",x1:18.379,y1:5.572,x2:9.364,y2:14.587}),Nl=p.createElement("path",{className:"a",d:"M20.5,5.572A1.5,1.5,0,0,1,18.379,3.45L21.031.8,23.152,2.92Z"}),El=p.createElement("path",{className:"a",d:"M10.49,8.32,8.2,6.025a3.748,3.748,0,0,0-.837-4.019A3.708,3.708,0,0,0,5.123.948,2.993,2.993,0,0,1,1,5.074,3.721,3.721,0,0,0,6.073,8.146L7.649,9.722"}),Al=p.createElement("path",{className:"a",d:"M14.237,16.31l1.775,1.774a3.75,3.75,0,1,0,2.121-2.121l-2.511-2.511"}),Tl=p.createElement("path",{className:"a",d:"M19.235,19.186a.375.375,0,1,1,0,.53.375.375,0,0,1,0-.53"});function Il(e,t){var n=e.title,r=e.titleId,a=_l(e,["title","titleId"]);return p.createElement("svg",wl({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kl,Sl,Cl,Nl,El,Al,Tl)}var Rl=p.forwardRef(Il);n.p;function Dl(){return(Dl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ml(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.5,4.5h21"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,1.5h-4.5l-6.55671e-08,1.55431e-15c-0.828427,3.62117e-08 -1.5,0.671573 -1.5,1.5c0,0 0,4.44089e-16 0,4.44089e-16v1.5h7.5v-1.5h-1.77636e-15c0,-0.828427 -0.671573,-1.5 -1.5,-1.5c0,0 -1.77636e-15,0 -1.77636e-15,0Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,17.25v-7.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,17.25v-7.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18.865,21.124l1.37066e-08,-1.65238e-07c-0.0645133,0.777732 -0.714596,1.37607 -1.495,1.376h-10.739l-7.43476e-08,6.64713e-12c-0.780403,6.97394e-05 -1.43049,-0.598268 -1.495,-1.376l-1.386,-16.624h16.5Z"}));function Ll(e,t){var n=e.title,r=e.titleId,a=Ml(e,["title","titleId"]);return p.createElement("svg",Dl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pl)}var Fl=p.forwardRef(Ll);n.p;function Ul(){return(Ul=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,13.5v-7.5v0c0,-0.828427 -0.671573,-1.5 -1.5,-1.5h-12l-6.55671e-08,1.77636e-15c-0.828427,3.62117e-08 -1.5,0.671573 -1.5,1.5c0,0 0,8.88178e-16 0,8.88178e-16v6"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,12v-6h-3l-1.96701e-07,3.55271e-15c-2.48528,1.08635e-07 -4.5,2.01472 -4.5,4.5c0,0 0,1.77636e-15 0,1.77636e-15v6l4.21885e-15,2.97924e-08c1.25089e-07,0.828427 0.671573,1.5 1.5,1.5h0.75"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,12h3l-6.55671e-08,-1.77636e-15c0.828427,3.62117e-08 1.5,-0.671573 1.5,-1.5v-4.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.09099,15.659c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 0,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21.091,15.659c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 0,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12,18h3"}));function Jl(e,t){var n=e.title,r=e.titleId,a=Vl(e,["title","titleId"]);return p.createElement("svg",Ul({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Bl)}var zl=p.forwardRef(Jl);n.p;function ql(){return(ql=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hl=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Gl=p.createElement("path",{className:"a",d:"M12,5.251C7.969,5.183,3.8,8,1.179,10.885a1.663,1.663,0,0,0,0,2.226C3.743,15.935,7.9,18.817,12,18.748c4.1.069,8.258-2.813,10.824-5.637a1.663,1.663,0,0,0,0-2.226C20.2,8,16.031,5.183,12,5.251Z"}),Yl=p.createElement("path",{className:"a",d:"M15.75,12A3.75,3.75,0,1,1,12,8.249,3.749,3.749,0,0,1,15.75,12Z"});function Ql(e,t){var n=e.title,r=e.titleId,a=Wl(e,["title","titleId"]);return p.createElement("svg",ql({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Hl,Gl,Yl)}var Kl=p.forwardRef(Ql);n.p;function Zl(){return(Zl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $l=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),eu=p.createElement("path",{className:"a",d:"M9.529,13.14a1.5,1.5,0,0,1,0-2.286L20.779,1.1a1.5,1.5,0,0,1,2.472,1.143v19.5a1.5,1.5,0,0,1-2.472,1.143Z"}),tu=p.createElement("path",{className:"a",d:"M15,21v.75a1.5,1.5,0,0,1-2.472,1.143L1.279,13.14a1.5,1.5,0,0,1,0-2.286L12.529,1.1A1.5,1.5,0,0,1,15,2.247V3"});function nu(e,t){var n=e.title,r=e.titleId,a=Xl(e,["title","titleId"]);return p.createElement("svg",Zl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$l,eu,tu)}var ru=p.forwardRef(nu);n.p;function au(){return(au=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ou(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var iu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),cu=p.createElement("path",{className:"a",d:"M14.472,13.14a1.5,1.5,0,0,0,0-2.286L3.222,1.1A1.5,1.5,0,0,0,.751,2.247v19.5A1.5,1.5,0,0,0,3.222,22.89Z"}),su=p.createElement("path",{className:"a",d:"M9,21v.749a1.5,1.5,0,0,0,2.471,1.143l11.25-9.75a1.5,1.5,0,0,0,0-2.286L11.472,1.1A1.5,1.5,0,0,0,9,2.247V3"});function lu(e,t){var n=e.title,r=e.titleId,a=ou(e,["title","titleId"]);return p.createElement("svg",au({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,iu,cu,su)}var uu=p.forwardRef(lu);n.p;function du(){return(du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var hu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#1d1d1d;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),bu=p.createElement("g",{transform:"translate(-0.006 -0.083)"},p.createElement("path",{className:"a",d:"M11.386,17.15H6.678a.673.673,0,0,0-.673.673v4.036a.673.673,0,0,0,.673.673h4.036a.673.673,0,0,0,.673-.673Z",transform:"translate(-0.542 -1.681)"}),p.createElement("path",{className:"a",d:"M16.713,17.15H12v4.708a.673.673,0,0,0,.673.673h4.036a.673.673,0,0,0,.673-.673V17.823A.673.673,0,0,0,16.713,17.15Z",transform:"translate(-1.16 -1.681)"}),p.createElement("path",{className:"a",d:"M13.713,11.15H9.678a.673.673,0,0,0-.673.673v4.708h5.381V11.823a.673.673,0,0,0-.673-.673Z",transform:"translate(-0.851 -1.062)"}),p.createElement("path",{className:"a",d:"M20.934,20.85V6.859a1.345,1.345,0,0,0-.712-1.187L11.478,1.008a1.345,1.345,0,0,0-1.265,0L1.468,5.671A1.345,1.345,0,0,0,.755,6.859V20.85"}));function fu(e,t){var n=e.title,r=e.titleId,a=pu(e,["title","titleId"]);return p.createElement("svg",du({xmlns:"http://www.w3.org/2000/svg",width:21.678,height:21.517,viewBox:"0 0 21.678 21.517",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,hu,bu)}var mu=p.forwardRef(fu);n.p;function ju(){return(ju=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ou=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),gu=p.createElement("path",{className:"a",d:"M10.5,16.627l-7.544-.575A1.553,1.553,0,0,0,1.447,18.3h0a1.549,1.549,0,0,0,.844.76l10.434,3.913a3,3,0,0,0,2,.037l7.993-2.664"}),xu=p.createElement("path",{className:"a",d:"M17.47,17.341H11.681a1.332,1.332,0,0,1-1.265-.912h0a1.333,1.333,0,0,1,.914-1.709L17.268,13.1a4.5,4.5,0,0,1,1.924-.1l3.528.588"}),yu=p.createElement("path",{className:"a",d:"M3.22,12.978V2.341A1.541,1.541,0,0,1,4.8.841H18.141a1.541,1.541,0,0,1,1.579,1.5V9.978"}),wu=p.createElement("path",{className:"a",d:"M12.97,6.841h-3a.75.75,0,0,1-.75-.75V.841h4.5v5.25A.75.75,0,0,1,12.97,6.841Z"});function _u(e,t){var n=e.title,r=e.titleId,a=vu(e,["title","titleId"]);return p.createElement("svg",ju({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Ou,void 0===n?p.createElement("title",{id:r},"shipment-deliver"):n?p.createElement("title",{id:r},n):null,gu,xu,yu,wu)}var ku=p.forwardRef(_u);n.p;function Su(){return(Su=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Cu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Nu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Eu=p.createElement("line",{className:"a",x1:16.501,y1:11.997,x2:7.501,y2:11.997}),Au=p.createElement("polyline",{className:"a",points:"12.751 8.247 16.501 11.997 12.751 15.747"}),Tu=p.createElement("circle",{className:"a",cx:12.001,cy:11.997,r:10.5});function Iu(e,t){var n=e.title,r=e.titleId,a=Cu(e,["title","titleId"]);return p.createElement("svg",Su({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Nu,void 0===n?p.createElement("title",{id:r},"navigation-right-circle-1"):n?p.createElement("title",{id:r},n):null,Eu,Au,Tu)}var Ru=p.forwardRef(Iu);n.p;function Du(){return(Du=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Mu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Lu=p.createElement("polygon",{className:"a",points:"12 0.75 0.75 5.25 12 9.75 23.25 5.25 12 0.75"}),Fu=p.createElement("polygon",{className:"a",points:"0.75 5.25 0.75 18.75 12 23.25 12 9.75 0.75 5.25"}),Uu=p.createElement("polygon",{className:"a",points:"23.25 5.25 23.25 18.75 12 23.25 12 9.75 23.25 5.25"}),Vu=p.createElement("line",{className:"a",x1:18.187,y1:7.275,x2:6.937,y2:2.775}),Bu=p.createElement("line",{className:"a",x1:20.625,y1:16.5,x2:18.75,y2:17.25});function Ju(e,t){var n=e.title,r=e.titleId,a=Mu(e,["title","titleId"]);return p.createElement("svg",Du({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Pu,void 0===n?p.createElement("title",{id:r},"shipment-upload"):n?p.createElement("title",{id:r},n):null,Lu,Fu,Uu,Vu,Bu)}var zu=p.forwardRef(Ju);n.p;function qu(){return(qu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hu=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Gu=p.createElement("circle",{className:"cls-1",cx:12,cy:12,r:11.25}),Yu=p.createElement("path",{className:"cls-1",d:"M5.25,13.5a.75.75,0,0,0,.75.75h6.75l-1.72,1.72a.749.749,0,0,0,0,1.06l1.19,1.19a.749.749,0,0,0,1.06,0l5.69-5.69a.749.749,0,0,0,0-1.06L13.28,5.78a.749.749,0,0,0-1.06,0L11.03,6.97a.749.749,0,0,0,0,1.06l1.72,1.72H6a.75.75,0,0,0-.75.75Z"});function Qu(e,t){var n=e.title,r=e.titleId,a=Wu(e,["title","titleId"]);return p.createElement("svg",qu({id:"Regular",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Hu,void 0===n?p.createElement("title",{id:r},"arrow-thick-circle-right-1"):n?p.createElement("title",{id:r},n):null,Gu,Yu)}var Ku=p.forwardRef(Qu);n.p;function Zu(){return(Zu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $u=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#23b376;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}")),ed=p.createElement("g",{transform:"translate(-10.25 -10.25)"},p.createElement("circle",{className:"a",cx:10,cy:10,r:10,transform:"translate(11.25 11.25)"}),p.createElement("path",{className:"a",d:"M23.615,15.506l-4.842,6.455a1.253,1.253,0,0,1-1.885.135l-2.5-2.5",transform:"translate(2.092 2.837)"}));function td(e,t){var n=e.title,r=e.titleId,a=Xu(e,["title","titleId"]);return p.createElement("svg",Zu({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,viewBox:"0 0 22 22",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$u,ed)}var nd=p.forwardRef(td);n.p;function rd(){return(rd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ad(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var od=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),id=p.createElement("path",{className:"a",d:"M18.75,14.25H16.717a1.342,1.342,0,0,0-.5,2.587l2.064.826a1.342,1.342,0,0,1-.5,2.587H15.75"}),cd=p.createElement("line",{className:"a",x1:17.25,y1:14.25,x2:17.25,y2:13.5}),sd=p.createElement("line",{className:"a",x1:17.25,y1:21,x2:17.25,y2:20.25}),ld=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),ud=p.createElement("path",{className:"a",d:"M8.25,20.25h-6a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V8.25"});function dd(e,t){var n=e.title,r=e.titleId,a=ad(e,["title","titleId"]);return p.createElement("svg",rd({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),od,void 0===n?p.createElement("title",{id:r},"common-file-cash"):n?p.createElement("title",{id:r},n):null,id,cd,sd,ld,ud)}var pd=p.forwardRef(dd);n.p;function hd(){return(hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var fd=p.createElement("path",{d:"m242.5 8.902344v57.097656h55.363281zm0 0"}),md=p.createElement("path",{d:"m206.984375 389.84375c.054687-10.175781 1.851563-20.269531 5.308594-29.84375h-165.824219c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6h171.363281c6.167969-11 14.707031-20 24.929688-28h-196.292969c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6h207.21875c2.070312.050781 3.960938 1.183594 4.988281 2.984375 10.757813-4.65625 22.359375-7.035156 34.082031-6.984375 4.265626-.007812 8.527344.316406 12.742188.980469v-226.980469h-68.652344c-3.3125 0-6.347656-2.539062-6.347656-5.851562v-72.148438h-230v418h211.207031c-3.113281-9.0625-4.707031-18.574219-4.722656-28.15625zm-160.515625-281.84375h107.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-107.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 0"}),jd=p.createElement("path",{d:"m218.984375 390c0 40.867188 33.128906 74 74 74 40.867187 0 74-33.132812 74-74s-33.132813-74-74-74c-40.851563.046875-73.953125 33.148438-74 74zm79.515625-52v6c11.90625 2.609375 20.398438 13.148438 20.417969 25.335938 0 3.316406-2.6875 6-6 6-3.316407 0-6-2.683594-6-6 0-7.695313-6.238281-13.933594-13.933594-13.933594-7.699219 0-13.9375 6.238281-13.933594 13.933594 0 7.699218 6.238281 13.9375 13.933594 13.933593 13.25 0 24.371094 9.984375 25.789063 23.160157 1.417968 13.175781-7.324219 25.296874-20.273438 28.113281v8.457031c0 3.3125-2.6875 6-6 6s-6-2.6875-6-6v-8.679688c-11.441406-2.972656-19.433594-13.292968-19.449219-25.113281 0-3.316406 2.683594-6 6-6 3.3125 0 6 2.683594 6 6 0 7.695313 6.238281 13.933594 13.933594 13.933594s13.933594-6.238281 13.933594-13.933594c0-7.695312-6.238281-13.933593-13.933594-13.933593-13.0625 0-24.085937-9.710938-25.730469-22.667969-1.644531-12.957031 6.601563-25.117188 19.246094-28.378907v-6.226562c0-3.3125 2.6875-6 6-6s6 2.6875 6 6zm0 0"});function vd(e,t){var n=e.title,r=e.titleId,a=bd(e,["title","titleId"]);return p.createElement("svg",hd({height:"464pt",viewBox:"-48 0 463 464",width:"464pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,fd,md,jd)}var Od=p.forwardRef(vd);n.p;function gd(){return(gd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yd=p.createElement("g",null,p.createElement("path",{d:"M112,6H12C5.4,6,0,11.4,0,18s5.4,12,12,12h100c6.6,0,12-5.4,12-12S118.6,6,112,6z"}),p.createElement("path",{d:"M112,50H12C5.4,50,0,55.4,0,62c0,6.6,5.4,12,12,12h100c6.6,0,12-5.4,12-12C124,55.4,118.6,50,112,50z"}),p.createElement("path",{d:"M112,94H12c-6.6,0-12,5.4-12,12s5.4,12,12,12h100c6.6,0,12-5.4,12-12S118.6,94,112,94z"})),wd=p.createElement("g",null),_d=p.createElement("g",null),kd=p.createElement("g",null),Sd=p.createElement("g",null),Cd=p.createElement("g",null),Nd=p.createElement("g",null),Ed=p.createElement("g",null),Ad=p.createElement("g",null),Td=p.createElement("g",null),Id=p.createElement("g",null),Rd=p.createElement("g",null),Dd=p.createElement("g",null),Md=p.createElement("g",null),Pd=p.createElement("g",null),Ld=p.createElement("g",null);function Fd(e,t){var n=e.title,r=e.titleId,a=xd(e,["title","titleId"]);return p.createElement("svg",gd({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"124px",height:"124px",viewBox:"0 0 124 124",style:{enableBackground:"new 0 0 124 124"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,yd,wd,_d,kd,Sd,Cd,Nd,Ed,Ad,Td,Id,Rd,Dd,Md,Pd,Ld)}var Ud=p.forwardRef(Fd);n.p;function Vd(){return(Vd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Bd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Jd=p.createElement("desc",null,"Created with Sketch."),zd=p.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"Two-Tone",transform:"translate(-306.000000, -2106.000000)"},p.createElement("g",{id:"Editor",transform:"translate(100.000000, 1960.000000)"},p.createElement("g",{id:"Two-Tone-/-Editor-/-text_fields",transform:"translate(204.000000, 142.000000)"},p.createElement("g",null,p.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),p.createElement("path",{d:"M12.5,12 L15.5,12 L15.5,19 L18.5,19 L18.5,12 L21.5,12 L21.5,9 L12.5,9 L12.5,12 Z M15.5,4 L2.5,4 L2.5,7 L7.5,7 L7.5,19 L10.5,19 L10.5,7 L15.5,7 L15.5,4 Z",id:"\\uD83D\\uDD39-Primary-Color",fill:"#1D1D1D"}))))));function qd(e,t){var n=e.title,r=e.titleId,a=Bd(e,["title","titleId"]);return p.createElement("svg",Vd({width:"20px",height:"15px",viewBox:"0 0 20 15",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?p.createElement("title",{id:r},"text_fields"):n?p.createElement("title",{id:r},n):null,Jd,zd)}var Wd=p.forwardRef(qd);n.p;function Hd(){return(Hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Gd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Yd=p.createElement("style",{type:"text/css"},"\r\n\t.st0{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\r\n\t.st1{fill:none;stroke:#000000;stroke-width:2;stroke-linejoin:round;stroke-miterlimit:10;}\r\n\t.st2{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\r\n\t.st3{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;}\r\n\t.st4{fill:none;stroke:#000000;stroke-width:2;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:3;}\r\n"),Qd=p.createElement("circle",{className:"st0",cx:6,cy:6,r:3}),Kd=p.createElement("circle",{className:"st0",cx:26,cy:6,r:3}),Zd=p.createElement("circle",{className:"st0",cx:6,cy:26,r:3}),Xd=p.createElement("circle",{className:"st0",cx:26,cy:26,r:3}),$d=p.createElement("line",{className:"st0",x1:6,y1:9,x2:6,y2:23}),ep=p.createElement("line",{className:"st0",x1:26,y1:9,x2:26,y2:23}),tp=p.createElement("line",{className:"st0",x1:9,y1:26,x2:23,y2:26}),np=p.createElement("line",{className:"st0",x1:9,y1:6,x2:23,y2:6}),rp=p.createElement("polyline",{className:"st0",points:"11,13 11,11 21,11 21,13 "}),ap=p.createElement("line",{className:"st0",x1:14,y1:21,x2:18,y2:21}),op=p.createElement("line",{className:"st0",x1:16,y1:21,x2:16,y2:11});function ip(e,t){var n=e.title,r=e.titleId,a=Gd(e,["title","titleId"]);return p.createElement("svg",Hd({id:"Icons",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 32 32",style:{enableBackground:"new 0 0 32 32"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Yd,Qd,Kd,Zd,Xd,$d,ep,tp,np,rp,ap,op)}var cp=p.forwardRef(ip);n.p;function sp(){return(sp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var up=p.createElement("desc",null,"Created with Sketch."),dp=p.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"Rounded",transform:"translate(-578.000000, -2106.000000)"},p.createElement("g",{id:"Editor",transform:"translate(100.000000, 1960.000000)"},p.createElement("g",{id:"-Round-/-Editor-/-format_list_numbered",transform:"translate(476.000000, 142.000000)"},p.createElement("g",null,p.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),p.createElement("path",{d:"M8,7 L20,7 C20.55,7 21,6.55 21,6 C21,5.45 20.55,5 20,5 L8,5 C7.45,5 7,5.45 7,6 C7,6.55 7.45,7 8,7 Z M20,17 L8,17 C7.45,17 7,17.45 7,18 C7,18.55 7.45,19 8,19 L20,19 C20.55,19 21,18.55 21,18 C21,17.45 20.55,17 20,17 Z M20,11 L8,11 C7.45,11 7,11.45 7,12 C7,12.55 7.45,13 8,13 L20,13 C20.55,13 21,12.55 21,12 C21,11.45 20.55,11 20,11 Z M4.5,16 L2.5,16 C2.22,16 2,16.22 2,16.5 C2,16.78 2.22,17 2.5,17 L4,17 L4,17.5 L3.5,17.5 C3.22,17.5 3,17.72 3,18 C3,18.28 3.22,18.5 3.5,18.5 L4,18.5 L4,19 L2.5,19 C2.22,19 2,19.22 2,19.5 C2,19.78 2.22,20 2.5,20 L4.5,20 C4.78,20 5,19.78 5,19.5 L5,16.5 C5,16.22 4.78,16 4.5,16 Z M2.5,5 L3,5 L3,7.5 C3,7.78 3.22,8 3.5,8 C3.78,8 4,7.78 4,7.5 L4,4.5 C4,4.22 3.78,4 3.5,4 L2.5,4 C2.22,4 2,4.22 2,4.5 C2,4.78 2.22,5 2.5,5 Z M4.5,10 L2.5,10 C2.22,10 2,10.22 2,10.5 C2,10.78 2.22,11 2.5,11 L3.8,11 L2.12,12.96 C2.04,13.05 2,13.17 2,13.28 L2,13.5 C2,13.78 2.22,14 2.5,14 L4.5,14 C4.78,14 5,13.78 5,13.5 C5,13.22 4.78,13 4.5,13 L3.2,13 L4.88,11.04 C4.96,10.95 5,10.83 5,10.72 L5,10.5 C5,10.22 4.78,10 4.5,10 Z",id:"\\uD83D\\uDD39-Icon-Color",fill:"#1D1D1D"}))))));function pp(e,t){var n=e.title,r=e.titleId,a=lp(e,["title","titleId"]);return p.createElement("svg",sp({width:"19px",height:"16px",viewBox:"0 0 19 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?p.createElement("title",{id:r},"format_list_numbered"):n?p.createElement("title",{id:r},n):null,up,dp)}var hp=p.forwardRef(pp);n.p;function bp(){return(bp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var mp=p.createElement("desc",null,"Created with Sketch."),jp=p.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"Outlined",transform:"translate(-681.000000, -2815.000000)"},p.createElement("g",{id:"Image",transform:"translate(100.000000, 2626.000000)"},p.createElement("g",{id:"Outlined-/-Image-/-image",transform:"translate(578.000000, 186.000000)"},p.createElement("g",null,p.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),p.createElement("path",{d:"M19,5 L19,19 L5,19 L5,5 L19,5 Z M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 Z M14.14,11.86 L11.14,15.73 L9,13.14 L6,17 L18,17 L14.14,11.86 Z",id:"\\uD83D\\uDD39-Icon-Color",fill:"#1D1D1D"}))))));function vp(e,t){var n=e.title,r=e.titleId,a=fp(e,["title","titleId"]);return p.createElement("svg",bp({width:"18px",height:"18px",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?p.createElement("title",{id:r},"image"):n?p.createElement("title",{id:r},n):null,mp,jp)}var Op=p.forwardRef(vp);n.p;function gp(){return(gp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yp=p.createElement("g",null,p.createElement("rect",{x:1,y:16,fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,width:52,height:40})),wp=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,points:"10,14 10,8 63,8 63,48 55,48 "}),_p=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,points:"1,46 15,32 29,48 39,42 53,54 "}),kp=p.createElement("circle",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,cx:40,cy:29,r:5});function Sp(e,t){var n=e.title,r=e.titleId,a=xp(e,["title","titleId"]);return p.createElement("svg",gp({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,yp,wp,_p,kp)}var Cp=p.forwardRef(Sp);n.p;function Np(){return(Np=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ep(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ap=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeLinejoin:"bevel",strokeMiterlimit:10,points:"39,16 32,9 25,16  "}),Tp=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeLinejoin:"bevel",strokeMiterlimit:10,points:"25,48 32,55  39,48 "}),Ip=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,points:"32,55 32,43 32,9 "}),Rp=p.createElement("line",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,x1:0,y1:1,x2:64,y2:1}),Dp=p.createElement("line",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,x1:0,y1:63,x2:64,y2:63});function Mp(e,t){var n=e.title,r=e.titleId,a=Ep(e,["title","titleId"]);return p.createElement("svg",Np({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ap,Tp,Ip,Rp,Dp)}var Pp=p.forwardRef(Mp);n.p;function Lp(){return(Lp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Up=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M27.43,82.286h82.286v-6.857H27.43V82.286z M68.573,89.144h-6.857v6.857H48.001l17.357,20.572l16.929-20.572H68.573    V89.144z M61.715,48h6.857v-6.857h13.714L65.358,20.572L48.001,41.143h13.714V48z M27.43,61.715h82.286v-6.857H27.43V61.715z     M109.716,0H27.429C12.281,0,0,12.281,0,27.429v82.286c0,15.149,12.281,27.429,27.429,27.429h82.286    c15.149,0,27.429-12.28,27.429-27.429V27.429C137.144,12.281,124.864,0,109.716,0z M123.43,102.859    c0,11.361-9.21,20.571-20.572,20.571H34.286c-11.361,0-20.572-9.21-20.572-20.571V34.286c0-11.361,9.21-20.571,20.572-20.571    h68.572c11.362,0,20.572,9.21,20.572,20.571V102.859z"})));function Vp(e,t){var n=e.title,r=e.titleId,a=Fp(e,["title","titleId"]);return p.createElement("svg",Lp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 137.144 137.144",xmlnsXlink:"http://www.w3.org/1999/xlink",enableBackground:"new 0 0 137.144 137.144",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Up)}var Bp=p.forwardRef(Vp);n.p;function Jp(){return(Jp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var qp=p.createElement("rect",{x:29,y:13,width:2,height:39}),Wp=p.createElement("rect",{x:33,y:13,width:2,height:39}),Hp=p.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,d:"M40.988,23c0,0,0-6-9-6s-8,7-8,7s0,7,8,7 c9,0,10.012,6,10.012,7c0,2,0.988,8-10.012,8c-9,0-8.988-4-8.988-5"}),Gp=p.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,d:"M53.92,10.081c12.107,12.105,12.107,31.732,0,43.838 c-12.106,12.108-31.734,12.108-43.839,0c-12.107-12.105-12.107-31.732,0-43.838C22.186-2.027,41.813-2.027,53.92,10.081z"});function Yp(e,t){var n=e.title,r=e.titleId,a=zp(e,["title","titleId"]);return p.createElement("svg",Jp({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,qp,Wp,Hp,Gp)}var Qp=p.forwardRef(Yp);n.p;function Kp(){return(Kp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xp=p.createElement("path",{d:"M 22.205078 2 A 1.0001 1.0001 0 0 0 21.21875 2.8378906 L 20.246094 8.7929688 C 19.076509 9.1331971 17.961243 9.5922728 16.910156 10.164062 L 11.996094 6.6542969 A 1.0001 1.0001 0 0 0 10.708984 6.7597656 L 6.8183594 10.646484 A 1.0001 1.0001 0 0 0 6.7070312 11.927734 L 10.164062 16.873047 C 9.583454 17.930271 9.1142098 19.051824 8.765625 20.232422 L 2.8359375 21.21875 A 1.0001 1.0001 0 0 0 2.0019531 22.205078 L 2.0019531 27.705078 A 1.0001 1.0001 0 0 0 2.8261719 28.691406 L 8.7597656 29.742188 C 9.1064607 30.920739 9.5727226 32.043065 10.154297 33.101562 L 6.6542969 37.998047 A 1.0001 1.0001 0 0 0 6.7597656 39.285156 L 10.648438 43.175781 A 1.0001 1.0001 0 0 0 11.927734 43.289062 L 16.882812 39.820312 C 17.936999 40.39548 19.054994 40.857928 20.228516 41.201172 L 21.21875 47.164062 A 1.0001 1.0001 0 0 0 22.205078 48 L 27.705078 48 A 1.0001 1.0001 0 0 0 28.691406 47.173828 L 29.751953 41.1875 C 30.920633 40.838997 32.033372 40.369697 33.082031 39.791016 L 38.070312 43.291016 A 1.0001 1.0001 0 0 0 39.351562 43.179688 L 43.240234 39.287109 A 1.0001 1.0001 0 0 0 43.34375 37.996094 L 39.787109 33.058594 C 40.355783 32.014958 40.813915 30.908875 41.154297 29.748047 L 47.171875 28.693359 A 1.0001 1.0001 0 0 0 47.998047 27.707031 L 47.998047 22.207031 A 1.0001 1.0001 0 0 0 47.160156 21.220703 L 41.152344 20.238281 C 40.80968 19.078827 40.350281 17.974723 39.78125 16.931641 L 43.289062 11.933594 A 1.0001 1.0001 0 0 0 43.177734 10.652344 L 39.287109 6.7636719 A 1.0001 1.0001 0 0 0 37.996094 6.6601562 L 33.072266 10.201172 C 32.023186 9.6248101 30.909713 9.1579916 29.738281 8.8125 L 28.691406 2.828125 A 1.0001 1.0001 0 0 0 27.705078 2 L 22.205078 2 z M 23.056641 4 L 26.865234 4 L 27.861328 9.6855469 A 1.0001 1.0001 0 0 0 28.603516 10.484375 C 30.066026 10.848832 31.439607 11.426549 32.693359 12.185547 A 1.0001 1.0001 0 0 0 33.794922 12.142578 L 38.474609 8.7792969 L 41.167969 11.472656 L 37.835938 16.220703 A 1.0001 1.0001 0 0 0 37.796875 17.310547 C 38.548366 18.561471 39.118333 19.926379 39.482422 21.380859 A 1.0001 1.0001 0 0 0 40.291016 22.125 L 45.998047 23.058594 L 45.998047 26.867188 L 40.279297 27.871094 A 1.0001 1.0001 0 0 0 39.482422 28.617188 C 39.122545 30.069817 38.552234 31.434687 37.800781 32.685547 A 1.0001 1.0001 0 0 0 37.845703 33.785156 L 41.224609 38.474609 L 38.53125 41.169922 L 33.791016 37.84375 A 1.0001 1.0001 0 0 0 32.697266 37.808594 C 31.44975 38.567585 30.074755 39.148028 28.617188 39.517578 A 1.0001 1.0001 0 0 0 27.876953 40.3125 L 26.867188 46 L 23.052734 46 L 22.111328 40.337891 A 1.0001 1.0001 0 0 0 21.365234 39.53125 C 19.90185 39.170557 18.522094 38.59371 17.259766 37.835938 A 1.0001 1.0001 0 0 0 16.171875 37.875 L 11.46875 41.169922 L 8.7734375 38.470703 L 12.097656 33.824219 A 1.0001 1.0001 0 0 0 12.138672 32.724609 C 11.372652 31.458855 10.793319 30.079213 10.427734 28.609375 A 1.0001 1.0001 0 0 0 9.6328125 27.867188 L 4.0019531 26.867188 L 4.0019531 23.052734 L 9.6289062 22.117188 A 1.0001 1.0001 0 0 0 10.435547 21.373047 C 10.804273 19.898143 11.383325 18.518729 12.146484 17.255859 A 1.0001 1.0001 0 0 0 12.111328 16.164062 L 8.8261719 11.46875 L 11.523438 8.7734375 L 16.185547 12.105469 A 1.0001 1.0001 0 0 0 17.28125 12.148438 C 18.536908 11.394293 19.919867 10.822081 21.384766 10.462891 A 1.0001 1.0001 0 0 0 22.132812 9.6523438 L 23.056641 4 z M 25 17 C 20.593567 17 17 20.593567 17 25 C 17 29.406433 20.593567 33 25 33 C 29.406433 33 33 29.406433 33 25 C 33 20.593567 29.406433 17 25 17 z M 25 19 C 28.325553 19 31 21.674447 31 25 C 31 28.325553 28.325553 31 25 31 C 21.674447 31 19 28.325553 19 25 C 19 21.674447 21.674447 19 25 19 z"});function $p(e,t){var n=e.title,r=e.titleId,a=Zp(e,["title","titleId"]);return p.createElement("svg",Kp({fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Xp)}var eh=p.forwardRef($p);n.p;function th(){return(th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function nh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var rh=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M368.64,0H20.48C9.175,0,0,9.175,0,20.48v348.16c0,11.305,9.175,20.48,20.48,20.48h348.16 c11.305,0,20.48-9.175,20.48-20.48V20.48C389.12,9.175,379.945,0,368.64,0z M348.16,348.16H40.96V40.96h307.2V348.16z"}))),ah=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M471.04,419.84v51.2h-51.2V512h71.68c11.305,0,20.48-9.175,20.48-20.48v-71.68H471.04z"}))),oh=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:262.349,y:471.04,width:110.182,height:40.96}))),ih=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M163.84,471.04v-51.2h-40.96v71.68c0,11.305,9.175,20.48,20.48,20.48h71.68v-40.96H163.84z"}))),ch=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M491.52,122.88h-71.68v40.96h51.2v51.2H512v-71.68C512,132.055,502.825,122.88,491.52,122.88z"}))),sh=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:471.04,y:262.349,width:40.96,height:110.182}))),lh=p.createElement("g",null),uh=p.createElement("g",null),dh=p.createElement("g",null),ph=p.createElement("g",null),hh=p.createElement("g",null),bh=p.createElement("g",null),fh=p.createElement("g",null),mh=p.createElement("g",null),jh=p.createElement("g",null),vh=p.createElement("g",null),Oh=p.createElement("g",null),gh=p.createElement("g",null),xh=p.createElement("g",null),yh=p.createElement("g",null),wh=p.createElement("g",null);function _h(e,t){var n=e.title,r=e.titleId,a=nh(e,["title","titleId"]);return p.createElement("svg",th({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,rh,ah,oh,ih,ch,sh,lh,uh,dh,ph,hh,bh,fh,mh,jh,vh,Oh,gh,xh,yh,wh)}var kh=p.forwardRef(_h);n.p;function Sh(){return(Sh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ch(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Nh=p.createElement("path",{d:"m0 274.226 176.549 176.886 339.007-338.672-48.67-47.997-290.337 290-128.553-128.552z"});function Eh(e,t){var n=e.title,r=e.titleId,a=Ch(e,["title","titleId"]);return p.createElement("svg",Sh({id:"Capa_1",enableBackground:"new 0 0 515.556 515.556",height:512,viewBox:"0 0 515.556 515.556",width:512,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Nh)}var Ah=p.forwardRef(Eh);n.p;function Th(){return(Th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ih(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Rh=p.createElement("g",null,p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M437.019,74.98C388.667,26.629,324.38,0,256,0C187.619,0,123.331,26.629,74.98,74.98C26.628,123.332,0,187.62,0,256    s26.628,132.667,74.98,181.019C123.332,485.371,187.619,512,256,512c68.38,0,132.667-26.629,181.019-74.981    C485.371,388.667,512,324.38,512,256S485.371,123.333,437.019,74.98z M256,482C131.383,482,30,380.617,30,256S131.383,30,256,30    s226,101.383,226,226S380.617,482,256,482z","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#65CA9F"}))),p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M378.305,173.859c-5.857-5.856-15.355-5.856-21.212,0.001L224.634,306.319l-69.727-69.727    c-5.857-5.857-15.355-5.857-21.213,0c-5.858,5.857-5.858,15.355,0,21.213l80.333,80.333c2.929,2.929,6.768,4.393,10.606,4.393    c3.838,0,7.678-1.465,10.606-4.393l143.066-143.066C384.163,189.215,384.163,179.717,378.305,173.859z","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#65CA9F"}))));function Dh(e,t){var n=e.title,r=e.titleId,a=Ih(e,["title","titleId"]);return p.createElement("svg",Th({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",width:"512px",height:"512px",className:"",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Rh)}var Mh=p.forwardRef(Dh);n.p;function Ph(){return(Ph=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Fh=p.createElement("path",{d:"m426.667969 85.335938h-170.667969c-9.414062.027343-17.039062 7.652343-17.066406 17.066406v102.398437c.027344 9.414063 7.652344 17.039063 17.066406 17.066407h8.707031c-.058593.683593-.03125 1.371093.082031 2.050781 3.074219 14.347656 2.273438 29.253906-2.324218 43.191406-1.988282 5.222656-1.28125 11.089844 1.894531 15.691406 3.175781 4.597657 8.410156 7.34375 14 7.335938h40.070313l-19.761719 93.863281h-42.667969c-14.628906 0-27.632812 9.320312-32.335938 23.171875-.789062 2.589844-.296874 5.398437 1.328126 7.566406 1.621093 2.164063 4.179687 3.425781 6.882812 3.398438h201.851562c2.707032.027343 5.261719-1.234375 6.886719-3.398438 1.621094-2.167969 2.113281-4.976562 1.324219-7.566406-4.703125-13.851563-17.707031-23.171875-32.335938-23.171875h-17.066406l34.132813-162.132812c37.703125 0 68.265625-30.5625 68.265625-68.265626 0-37.703124-30.5625-68.265624-68.265625-68.265624zm-104.71875 188.074218c-.550781-.175781-1.117188-.289062-1.691407-.34375l-41.859374.140625c5.671874-16.507812 6.847656-34.226562 3.398437-51.339843h51.003906zm79.117187-162.476562h34.136719c4.710937 0 8.53125 3.820312 8.53125 8.535156 0 4.710938-3.820313 8.53125-8.53125 8.53125h-34.136719c-4.710937 0-8.53125-3.820312-8.53125-8.53125 0-4.714844 3.820313-8.535156 8.53125-8.535156zm34.136719 85.335937h-34.136719c-4.710937 0-8.53125-3.820312-8.53125-8.535156 0-4.710937 3.820313-8.53125 8.53125-8.53125h34.136719c4.710937 0 8.53125 3.820313 8.53125 8.53125 0 4.714844-3.820313 8.535156-8.53125 8.535156zm17.066406-34.132812h-51.203125c-4.710937 0-8.53125-3.824219-8.53125-8.535157 0-4.714843 3.820313-8.535156 8.53125-8.535156h51.203125c4.710938 0 8.53125 3.820313 8.53125 8.535156 0 4.710938-3.820312 8.535157-8.53125 8.535157zm0 0"}),Uh=p.createElement("path",{d:"m170.667969 128v51.203125c-.007813 6.789063 2.683593 13.308594 7.488281 18.109375 4.800781 4.804688 11.320312 7.5 18.113281 7.488281h25.597657v-102.398437h-25.597657c-6.792969-.011719-13.3125 2.683594-18.113281 7.488281-4.804688 4.800781-7.496094 11.320313-7.488281 18.109375zm34.132812 0c4.714844 0 8.535157 3.820312 8.535157 8.535156 0 4.710938-3.820313 8.53125-8.535157 8.53125-4.710937 0-8.53125-3.820312-8.53125-8.53125.011719-4.707031 3.824219-8.519531 8.53125-8.535156zm0 0"}),Vh=p.createElement("path",{d:"m25.601562 366.933594c0-4.710938 3.820313-8.53125 8.53125-8.53125 4.714844 0 8.535157 3.820312 8.535157 8.53125v136.535156h34.132812c4.707031-.015625 8.519531-3.828125 8.535157-8.535156v-332.796875h42.664062c0 9.421875 7.640625 17.066406 17.066406 17.066406h8.535156v-51.203125h-8.535156c-9.425781 0-17.066406 7.640625-17.066406 17.066406h-42.664062v-128c-.015626-4.707031-3.828126-8.519531-8.535157-8.53125h-68.265625c-4.707031.011719-8.519531 3.824219-8.535156 8.53125v477.867188c.015625 4.707031 3.828125 8.519531 8.535156 8.535156h17.066406zm17.066407-298.664063c0-4.714843 3.820312-8.535156 8.535156-8.535156 4.710937 0 8.53125 3.820313 8.53125 8.535156v102.398438c0 4.714843-3.820313 8.535156-8.53125 8.535156-4.714844 0-8.535156-3.820313-8.535156-8.535156zm0 136.53125c0-4.710937 3.820312-8.53125 8.535156-8.53125 4.710937 0 8.53125 3.820313 8.53125 8.53125v17.066407c0 4.714843-3.820313 8.535156-8.53125 8.535156-4.714844 0-8.535156-3.820313-8.535156-8.535156zm0 0"}),Bh=p.createElement("path",{d:"m315.734375 435.203125h34.132813v25.597656h-34.132813zm0 0"}),Jh=p.createElement("path",{d:"m238.933594 435.203125v53.757813c.121094 12.84375 10.625 23.15625 23.46875 23.039062h140.800781c12.839844.117188 23.34375-10.195312 23.464844-23.039062v-53.757813h-59.734375v25.597656c-.011719 9.421875-7.644532 17.054688-17.066406 17.066407h-34.132813c-9.421875-.011719-17.054687-7.644532-17.066406-17.066407v-25.597656zm0 0"}),zh=p.createElement("path",{d:"m162.050781 52.371094c.320313-2.320313-.324219-4.667969-1.785156-6.5l-34.132813-42.664063c-2.945312-3.683593-8.3125-4.28125-11.996093-1.339843-3.679688 2.945312-4.28125 8.316406-1.335938 11.996093l28.511719 35.632813-18.269531 13.054687c-2.070313 1.480469-3.371094 3.804688-3.550781 6.34375-.179688 2.535157.785156 5.023438 2.625 6.777344l25.601562 24.378906c2.195312 2.160157 5.386719 2.96875 8.347656 2.117188 2.960938-.855469 5.234375-3.238281 5.941406-6.238281.707032-3-.257812-6.148438-2.523437-8.238282l-18.125-17.261718 17.199219-12.289063c1.910156-1.359375 3.171875-3.445313 3.492187-5.769531zm0 0"}),qh=p.createElement("path",{d:"m114.132812 305.332031c1.769532 1.414063 4.027344 2.070313 6.277344 1.820313s4.308594-1.386719 5.722656-3.15625l34.132813-42.664063c1.464844-1.832031 2.109375-4.183593 1.785156-6.503906s-1.585937-4.40625-3.488281-5.769531l-17.203125-12.285156 18.128906-17.257813c2.265625-2.089844 3.230469-5.238281 2.523438-8.238281s-2.980469-5.382813-5.941407-6.238282c-2.960937-.855468-6.152343-.042968-8.347656 2.117188l-25.601562 24.378906c-1.839844 1.753906-2.804688 4.238282-2.625 6.777344.179687 2.539062 1.480468 4.863281 3.550781 6.34375l18.265625 13.050781-28.507812 35.632813c-2.941407 3.679687-2.347657 9.046875 1.328124 11.992187zm0 0"});function Wh(e,t){var n=e.title,r=e.titleId,a=Lh(e,["title","titleId"]);return p.createElement("svg",Ph({height:"512pt",viewBox:"-9 0 512 512.00246",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Fh,Uh,Vh,Bh,Jh,zh,qh)}var Hh=p.forwardRef(Wh);n.p;function Gh(){return(Gh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qh=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M238.933,0C106.974,0,0,106.974,0,238.933s106.974,238.933,238.933,238.933s238.933-106.974,238.933-238.933 C477.726,107.033,370.834,0.141,238.933,0z M238.933,443.733c-113.108,0-204.8-91.692-204.8-204.8s91.692-204.8,204.8-204.8 s204.8,91.692,204.8,204.8C443.611,351.991,351.991,443.611,238.933,443.733z"}))),Kh=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M370.046,141.534c-6.614-6.388-17.099-6.388-23.712,0v0L187.733,300.134l-56.201-56.201 c-6.548-6.78-17.353-6.967-24.132-0.419c-6.78,6.548-6.967,17.353-0.419,24.132c0.137,0.142,0.277,0.282,0.419,0.419 l68.267,68.267c6.664,6.663,17.468,6.663,24.132,0l170.667-170.667C377.014,158.886,376.826,148.082,370.046,141.534z"}))),Zh=p.createElement("g",null),Xh=p.createElement("g",null),$h=p.createElement("g",null),eb=p.createElement("g",null),tb=p.createElement("g",null),nb=p.createElement("g",null),rb=p.createElement("g",null),ab=p.createElement("g",null),ob=p.createElement("g",null),ib=p.createElement("g",null),cb=p.createElement("g",null),sb=p.createElement("g",null),lb=p.createElement("g",null),ub=p.createElement("g",null),db=p.createElement("g",null);function pb(e,t){var n=e.title,r=e.titleId,a=Yh(e,["title","titleId"]);return p.createElement("svg",Gh({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 477.867 477.867",style:{enableBackground:"new 0 0 477.867 477.867"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Qh,Kh,Zh,Xh,$h,eb,tb,nb,rb,ab,ob,ib,cb,sb,lb,ub,db)}var hb=p.forwardRef(pb);n.p;function bb(){return(bb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var mb=p.createElement("path",{d:"m256 512c-141.160156 0-256-114.839844-256-256s114.839844-256 256-256 256 114.839844 256 256-114.839844 256-256 256zm0-475.429688c-120.992188 0-219.429688 98.4375-219.429688 219.429688s98.4375 219.429688 219.429688 219.429688 219.429688-98.4375 219.429688-219.429688-98.4375-219.429688-219.429688-219.429688zm0 0"}),jb=p.createElement("path",{d:"m347.429688 365.714844c-4.679688 0-9.359376-1.785156-12.929688-5.359375l-182.855469-182.855469c-7.144531-7.144531-7.144531-18.714844 0-25.855469 7.140625-7.140625 18.714844-7.144531 25.855469 0l182.855469 182.855469c7.144531 7.144531 7.144531 18.714844 0 25.855469-3.570313 3.574219-8.246094 5.359375-12.925781 5.359375zm0 0"}),vb=p.createElement("path",{d:"m164.570312 365.714844c-4.679687 0-9.355468-1.785156-12.925781-5.359375-7.144531-7.140625-7.144531-18.714844 0-25.855469l182.855469-182.855469c7.144531-7.144531 18.714844-7.144531 25.855469 0 7.140625 7.140625 7.144531 18.714844 0 25.855469l-182.855469 182.855469c-3.570312 3.574219-8.25 5.359375-12.929688 5.359375zm0 0"});function Ob(e,t){var n=e.title,r=e.titleId,a=fb(e,["title","titleId"]);return p.createElement("svg",bb({height:"512pt",viewBox:"0 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,mb,jb,vb)}var gb=p.forwardRef(Ob);n.p;function xb(){return(xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var wb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M0,0v233.739h233.739V0H0z M200.348,200.348H33.391V33.391h166.957V200.348z"}))),_b=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:66.783,y:66.783,width:100.174,height:100.174}))),kb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M278.261,0v233.739H512V0H278.261z M478.609,200.348H311.652V33.391h166.957V200.348z"}))),Sb=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:345.043,y:66.783,width:100.174,height:100.174}))),Cb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M0,278.261V512h233.739V278.261H0z M200.348,478.609H33.391V311.652h166.957V478.609z"}))),Nb=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:66.783,y:345.043,width:100.174,height:100.174}))),Eb=p.createElement("g",null,p.createElement("g",null,p.createElement("polygon",{points:"345.043,311.652 345.043,278.261 278.261,278.261 278.261,512 345.043,512 345.043,478.609 311.652,478.609  311.652,411.826 345.043,411.826 345.043,378.435 311.652,378.435 311.652,311.652  "}))),Ab=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:478.609,y:278.261,width:33.391,height:33.391}))),Tb=p.createElement("g",null,p.createElement("g",null,p.createElement("polygon",{points:"478.609,356.174 478.609,478.609 445.217,478.609 445.217,512 512,512 512,356.174  "}))),Ib=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:378.435,y:278.261,width:66.783,height:33.391}))),Rb=p.createElement("g",null,p.createElement("g",null,p.createElement("polygon",{points:"445.217,378.435 445.217,345.043 378.435,345.043 378.435,445.217 445.217,445.217 445.217,411.826  411.826,411.826 411.826,378.435  "}))),Db=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:378.435,y:478.609,width:33.391,height:33.391}))),Mb=p.createElement("g",null),Pb=p.createElement("g",null),Lb=p.createElement("g",null),Fb=p.createElement("g",null),Ub=p.createElement("g",null),Vb=p.createElement("g",null),Bb=p.createElement("g",null),Jb=p.createElement("g",null),zb=p.createElement("g",null),qb=p.createElement("g",null),Wb=p.createElement("g",null),Hb=p.createElement("g",null),Gb=p.createElement("g",null),Yb=p.createElement("g",null),Qb=p.createElement("g",null);function Kb(e,t){var n=e.title,r=e.titleId,a=yb(e,["title","titleId"]);return p.createElement("svg",xb({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,wb,_b,kb,Sb,Cb,Nb,Eb,Ab,Tb,Ib,Rb,Db,Mb,Pb,Lb,Fb,Ub,Vb,Bb,Jb,zb,qb,Wb,Hb,Gb,Yb,Qb)}var Zb=p.forwardRef(Kb);n.p;function Xb(){return(Xb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $b(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ef=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill-rule:evenodd;}")),tf=p.createElement("path",{className:"cls-1",d:"M53.85,94.05a14.42,14.42,0,1,1-14.41,14.42A14.43,14.43,0,0,1,53.85,94.05ZM3.92,9.83A5,5,0,1,1,6,.11L28.56,5,51.9,87.53a20.87,20.87,0,0,0-9.4,3.24L20.63,13.45,3.92,9.83Zm48.75,47L92,46.87a2.22,2.22,0,0,1,2.62,1.54l8.59,30A2,2,0,0,1,101.78,81L62.46,90.9a2.22,2.22,0,0,1-2.62-1.54l-8.6-30a2,2,0,0,1,1.43-2.55ZM41,16,80.23,6a2.24,2.24,0,0,1,2.63,1.54l8.88,30a2,2,0,0,1-1.4,2.55L51.11,50.06a2.24,2.24,0,0,1-2.63-1.54l-8.89-30A2,2,0,0,1,41,16ZM71.16,96.53l35-9.23a5,5,0,1,1,2.53,9.6l-33.92,9a20.93,20.93,0,0,0-3.56-9.33Zm-17.31,8.4a3.54,3.54,0,1,1-3.54,3.54,3.53,3.53,0,0,1,3.54-3.54Z"});function nf(e,t){var n=e.title,r=e.titleId,a=$b(e,["title","titleId"]);return p.createElement("svg",Xb({id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 112.34 122.88",ref:t,"aria-labelledby":r},a),ef,void 0===n?p.createElement("title",{id:r},"only-use-the-trolley"):n?p.createElement("title",{id:r},n):null,tf)}var rf=p.forwardRef(nf);n.p;function af(){return(af=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function of(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var cf=p.createElement("path",{d:"  M0,500  h40  v--3.1309371418507226  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),sf=p.createElement("path",{d:"  M50,500  h40  v-9.224081492010896  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),lf=p.createElement("path",{d:"  M100,500  h40  v-22.64325553369838  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),uf=p.createElement("path",{d:"  M150,500  h40  v-35.690904939179234  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),df=p.createElement("path",{d:"  M200,500  h40  v-63.26406287173995  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),pf=p.createElement("path",{d:"  M250,500  h40  v-102.88375618610559  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),hf=p.createElement("path",{d:"  M300,500  h40  v-103.28585186702855  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),bf=p.createElement("path",{d:"  M350,500  h40  v-136.59560115079614  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),ff=p.createElement("path",{d:"  M400,500  h40  v-179.14204640160358  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),mf=p.createElement("path",{d:"  M450,500  h40  v-220.62473863494222  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),jf=p.createElement("path",{d:"  M500,500  h40  v-166.04661576029866  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),vf=p.createElement("path",{d:"  M550,500  h40  v-247.63347068067395  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Of=p.createElement("path",{d:"  M600,500  h40  v-241.38659128671907  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),gf=p.createElement("path",{d:"  M650,500  h40  v-262.2700501423874  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),xf=p.createElement("path",{d:"  M700,500  h40  v-354.2665743136629  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),yf=p.createElement("path",{d:"  M750,500  h40  v-360.33292878890234  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),wf=p.createElement("path",{d:"  M800,500  h40  v-289.00128899811193  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),_f=p.createElement("path",{d:"  M850,500  h40  v-314.94331161474327  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),kf=p.createElement("path",{d:"  M900,500  h40  v-288.8644506018891  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Sf=p.createElement("path",{d:"  M950,500  h40  v-298.848432818789  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"});function Cf(e,t){var n=e.title,r=e.titleId,a=of(e,["title","titleId"]);return p.createElement("svg",af({id:"chart",width:1e3,height:500,viewBox:"0 0 1000 500",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,cf,sf,lf,uf,df,pf,hf,bf,ff,mf,jf,vf,Of,gf,xf,yf,wf,_f,kf,Sf)}var Nf,Ef,Af=p.forwardRef(Cf);n.p;!function(e){e[e.Add=0]="Add",e[e.AddCircle=1]="AddCircle",e[e.AddNote=2]="AddNote",e[e.Alert=3]="Alert",e[e.AnalyticsBar=4]="AnalyticsBar",e[e.Archive=5]="Archive",e[e.ArrowBack=6]="ArrowBack",e[e.ArrowNext=7]="ArrowNext",e[e.ArrowDown=8]="ArrowDown",e[e.ArrowLeft=9]="ArrowLeft",e[e.ArrowThickCircleRight=10]="ArrowThickCircleRight",e[e.ArrowUp=11]="ArrowUp",e[e.Attachment=12]="Attachment",e[e.Barista=13]="Barista",e[e.Broker=14]="Broker",e[e.BulletList=15]="BulletList",e[e.Calendar=16]="Calendar",e[e.Check=17]="Check",e[e.CheckSimple=18]="CheckSimple",e[e.CheckSquare=19]="CheckSquare",e[e.Chevron=20]="Chevron",e[e.Clock=21]="Clock",e[e.CogWheel=22]="CogWheel",e[e.Comment=23]="Comment",e[e.CopyPaste=24]="CopyPaste",e[e.Delete=25]="Delete",e[e.DrawerOpen=26]="DrawerOpen",e[e.Download=27]="Download",e[e.EditPerson=28]="EditPerson",e[e.EmailReply=29]="EmailReply",e[e.Expand=30]="Expand",e[e.File=31]="File",e[e.FileCash=32]="FileCash",e[e.FileCheck=33]="FileCheck",e[e.FileEdit=34]="FileEdit",e[e.FileQuestion=35]="FileQuestion",e[e.Filter=36]="Filter",e[e.Flag=37]="Flag",e[e.Hand=38]="Hand",e[e.Insurance=39]="Insurance",e[e.LayoutNone=40]="LayoutNone",e[e.LayoutBullets=41]="LayoutBullets",e[e.Loading=42]="Loading",e[e.LoadingInline=43]="LoadingInline",e[e.LocationPin=44]="LocationPin",e[e.LocationUser=45]="LocationUser",e[e.ManCircle=46]="ManCircle",e[e.ManShield=47]="ManShield",e[e.Materials=48]="Materials",e[e.Mention=49]="Mention",e[e.MenuHorizontal=50]="MenuHorizontal",e[e.MenuVertical=51]="MenuVertical",e[e.MessageChat=52]="MessageChat",e[e.Notification=53]="Notification",e[e.Pencil=54]="Pencil",e[e.People=55]="People",e[e.Pin=56]="Pin",e[e.PinMap=57]="PinMap",e[e.PinMapFilled=58]="PinMapFilled",e[e.Printer=59]="Printer",e[e.Remove=60]="Remove",e[e.Rotate=61]="Rotate",e[e.Search=62]="Search",e[e.Setting=63]="Setting",e[e.ShipmentDeliver=64]="ShipmentDeliver",e[e.ShipmentUpload=65]="ShipmentUpload",e[e.Stopwatch=66]="Stopwatch",e[e.SubtractCircle=67]="SubtractCircle",e[e.Tags=68]="Tags",e[e.TextBold=69]="TextBold",e[e.TextItalic=70]="TextItalic",e[e.TextUnderlined=71]="TextUnderlined",e[e.Tools=72]="Tools",e[e.Trash=73]="Trash",e[e.Truck=74]="Truck",e[e.Trolley=75]="Trolley",e[e.View=76]="View",e[e.LeftArrowNavigation=77]="LeftArrowNavigation",e[e.RightArrowNavigation=78]="RightArrowNavigation",e[e.WarehouseStorage=79]="WarehouseStorage",e[e.NavigationRightCircle=80]="NavigationRightCircle",e[e.DeliveryTruck=81]="DeliveryTruck",e[e.ToastClose=82]="ToastClose",e[e.CheckIcon=83]="CheckIcon",e[e.CashFileIcon=84]="CashFileIcon",e[e.Invoice=85]="Invoice",e[e.MenuDrag=86]="MenuDrag",e[e.Heading=87]="Heading",e[e.Text=88]="Text",e[e.NumberList=89]="NumberList",e[e.Images=90]="Images",e[e.Photos=91]="Photos",e[e.Spacer=92]="Spacer",e[e.PageBreak=93]="PageBreak",e[e.Costing=94]="Costing",e[e.Duplicate=95]="Duplicate",e[e.Checked=96]="Checked",e[e.markAsRead=97]="markAsRead",e[e.drillingMachine=98]="drillingMachine",e[e.TickCircle=99]="TickCircle",e[e.CrossCircle=100]="CrossCircle",e[e.QRCode=101]="QRCode",e[e.Chart=102]="Chart"}(Ef||(Ef={}));var Tf=(Nf={},Object(k.a)(Nf,Ef.Add,I),Object(k.a)(Nf,Ef.AddCircle,V),Object(k.a)(Nf,Ef.AddNote,W),Object(k.a)(Nf,Ef.Alert,K),Object(k.a)(Nf,Ef.AnalyticsBar,pe),Object(k.a)(Nf,Ef.Archive,ge),Object(k.a)(Nf,Ef.ArrowBack,Ve),Object(k.a)(Nf,Ef.ArrowNext,it),Object(k.a)(Nf,Ef.ArrowDown,dt),Object(k.a)(Nf,Ef.ArrowLeft,jt),Object(k.a)(Nf,Ef.ArrowUp,yt),Object(k.a)(Nf,Ef.Attachment,Ct),Object(k.a)(Nf,Ef.Barista,Rt),Object(k.a)(Nf,Ef.Broker,Wt),Object(k.a)(Nf,Ef.BulletList,Kt),Object(k.a)(Nf,Ef.Calendar,tn),Object(k.a)(Nf,Ef.Check,cn),Object(k.a)(Nf,Ef.CheckSimple,pn),Object(k.a)(Nf,Ef.CheckSquare,On),Object(k.a)(Nf,Ef.Chevron,kn),Object(k.a)(Nf,Ef.Clock,Rn),Object(k.a)(Nf,Ef.CogWheel,Vn),Object(k.a)(Nf,Ef.Comment,Wn),Object(k.a)(Nf,Ef.CopyPaste,rr),Object(k.a)(Nf,Ef.Delete,sr),Object(k.a)(Nf,Ef.DrawerOpen,br),Object(k.a)(Nf,Ef.Download,yr),Object(k.a)(Nf,Ef.EditPerson,Ar),Object(k.a)(Nf,Ef.EmailReply,Mr),Object(k.a)(Nf,Ef.Expand,Yr),Object(k.a)(Nf,Ef.File,ra),Object(k.a)(Nf,Ef.FileCash,ma),Object(k.a)(Nf,Ef.FileCheck,Ca),Object(k.a)(Nf,Ef.FileEdit,La),Object(k.a)(Nf,Ef.FileQuestion,Qa),Object(k.a)(Nf,Ef.Filter,to),Object(k.a)(Nf,Ef.Flag,io),Object(k.a)(Nf,Ef.Hand,mo),Object(k.a)(Nf,Ef.Insurance,wo),Object(k.a)(Nf,Ef.LayoutNone,Eo),Object(k.a)(Nf,Ef.LayoutBullets,Vo),Object(k.a)(Nf,Ef.Loading,Ho),Object(k.a)(Nf,Ef.LoadingInline,$o),Object(k.a)(Nf,Ef.LocationPin,ci),Object(k.a)(Nf,Ef.LocationUser,fi),Object(k.a)(Nf,Ef.ManCircle,_i),Object(k.a)(Nf,Ef.ManShield,Mi),Object(k.a)(Nf,Ef.Materials,Wi),Object(k.a)(Nf,Ef.Mention,Ki),Object(k.a)(Nf,Ef.MenuHorizontal,tc),Object(k.a)(Nf,Ef.MenuVertical,ic),Object(k.a)(Nf,Ef.MessageChat,bc),Object(k.a)(Nf,Ef.Notification,yc),Object(k.a)(Nf,Ef.Pencil,Tc),Object(k.a)(Nf,Ef.People,Pc),Object(k.a)(Nf,Ef.Pin,zc),Object(k.a)(Nf,Ef.PinMap,Kc),Object(k.a)(Nf,Ef.PinMapFilled,ts),Object(k.a)(Nf,Ef.Printer,ps),Object(k.a)(Nf,Ef.Remove,Os),Object(k.a)(Nf,Ef.Rotate,Ss),Object(k.a)(Nf,Ef.Search,Rs),Object(k.a)(Nf,Ef.Stopwatch,Qs),Object(k.a)(Nf,Ef.SubtractCircle,nl),Object(k.a)(Nf,Ef.Tags,cl),Object(k.a)(Nf,Ef.TextBold,pl),Object(k.a)(Nf,Ef.TextItalic,jl),Object(k.a)(Nf,Ef.TextUnderlined,yl),Object(k.a)(Nf,Ef.Tools,Rl),Object(k.a)(Nf,Ef.Trash,Fl),Object(k.a)(Nf,Ef.Truck,zl),Object(k.a)(Nf,Ef.LeftArrowNavigation,ru),Object(k.a)(Nf,Ef.RightArrowNavigation,uu),Object(k.a)(Nf,Ef.View,Kl),Object(k.a)(Nf,Ef.WarehouseStorage,mu),Object(k.a)(Nf,Ef.ShipmentDeliver,ku),Object(k.a)(Nf,Ef.NavigationRightCircle,Ru),Object(k.a)(Nf,Ef.ShipmentUpload,zu),Object(k.a)(Nf,Ef.DeliveryTruck,zl),Object(k.a)(Nf,Ef.ToastClose,Os),Object(k.a)(Nf,Ef.ArrowThickCircleRight,Ku),Object(k.a)(Nf,Ef.CheckIcon,nd),Object(k.a)(Nf,Ef.CashFileIcon,pd),Object(k.a)(Nf,Ef.Invoice,Od),Object(k.a)(Nf,Ef.MenuDrag,Ud),Object(k.a)(Nf,Ef.Heading,Wd),Object(k.a)(Nf,Ef.Text,cp),Object(k.a)(Nf,Ef.NumberList,hp),Object(k.a)(Nf,Ef.Images,Op),Object(k.a)(Nf,Ef.Photos,Cp),Object(k.a)(Nf,Ef.Spacer,Pp),Object(k.a)(Nf,Ef.PageBreak,Bp),Object(k.a)(Nf,Ef.Costing,Qp),Object(k.a)(Nf,Ef.Setting,eh),Object(k.a)(Nf,Ef.Duplicate,kh),Object(k.a)(Nf,Ef.Checked,Ah),Object(k.a)(Nf,Ef.markAsRead,Mh),Object(k.a)(Nf,Ef.drillingMachine,Hh),Object(k.a)(Nf,Ef.TickCircle,hb),Object(k.a)(Nf,Ef.CrossCircle,gb),Object(k.a)(Nf,Ef.QRCode,Zb),Object(k.a)(Nf,Ef.Trolley,rf),Object(k.a)(Nf,Ef.Chart,Af),Nf),If=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=Tf[this.props.name];return this.props.name===Ef.ToastClose?Object(a.jsx)(e,{width:this.props.size,height:this.props.size}):Object(a.jsx)(e,Object(c.a)({width:this.props.size,height:this.props.size},this.props))}}]),n}(p.PureComponent);If.defaultProps={size:20};var Rf,Df,Mf,Pf,Lf,Ff=If,Uf=n(21),Vf={small:"0.5rem",smaller:"0.85rem",smallSize1:"0.7rem",normal:"1rem",medium:"1.15rem",big:"2rem"},Bf={light:"300",normal:"400",medium:"500",bold:"700"},Jf=n(31),zf=n(14),qf=n.n(zf);!function(e){e.draft="draft",e.pending_approval="pending_approval",e.overdue="overdue",e.paid="paid",e.unpaid="unpaid",e.all="all"}(Mf||(Mf={})),function(e){e.draft="draft",e.paid="paid",e.unpaid="unpaid"}(Pf||(Pf={})),function(e){e.draft="draft",e.approved="approved"}(Lf||(Lf={}));var Wf=(Rf={},Object(k.a)(Rf,Lf.draft,"draft"),Object(k.a)(Rf,Mf.pending_approval,"pending approval"),Object(k.a)(Rf,Lf.approved,"approved"),Object(k.a)(Rf,Mf.paid,"paid"),Object(k.a)(Rf,Mf.unpaid,"unpaid"),Object(k.a)(Rf,Mf.overdue,"overdue"),Rf),Hf=(Df={},Object(k.a)(Df,Lf.draft,y.gray6),Object(k.a)(Df,Mf.pending_approval,y.orange1),Object(k.a)(Df,Lf.approved,y.gray4),Object(k.a)(Df,Mf.unpaid,y.red1),Object(k.a)(Df,Mf.overdue,y.red1),Object(k.a)(Df,Mf.paid,y.purple1),Object(k.a)(Df,"DEFAULT",y.gray0),Df),Gf=n(549);function Yf(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null===e&&(e={});var t={first_name:e.first_name||"---",last_name:e.last_name||"---",initials:"",full_name:"",name:"",invalid:!1};return e.first_name&&e.last_name?t.initials="".concat(e.first_name[0]).concat(e.last_name[0]):t.initials="--",e.full_name?t.full_name=e.full_name:t.full_name="".concat(t.first_name," ").concat(t.last_name),t.invalid=t.full_name.includes("---"),t.name=(t.invalid?e.email:t.full_name)||t.full_name,t}function Qf(e,t){if(e){var n={};return e.forEach((function(e){var r=qf()(j.a.get(e,t)),a="".concat(r.year(),"-").concat(r.month()+1,"-").concat(r.date());n[qf()(a).unix()]?(n[qf()(a).unix()].items.push(e),n[qf()(a).unix()].items=n[qf()(a).unix()].items.sort((function(e,n){return qf()(j.a.get(e,t))>qf()(j.a.get(n,t))?-1:1}))):n[qf()(a).unix()]={unix:qf()(a).unix(),items:[e]}})),Object.values(n).sort((function(e,t){return e.unix>t.unix?-1:1}))}return[]}function Kf(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Object(m.isNil)(e))return"$ 0.00";var n=Math.abs("string"===typeof e?parseFloat(e):e),r=Zf(t?n.toFixed(2).toString():n.toFixed(0).toString());return"".concat(e<0?"-":"","$ ").concat(r)}function Zf(e){return e.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1,")}function Xf(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function $f(e,t,n){return Gf.sanitize(e.replace(/\n/g,"<br />"),{ALLOWED_TAGS:t?[]:["b","strong","i","em","u","ul","li","p","span","br","table","thead","tbody","tr","th","td"].concat(n)})}function em(e){return e.replace(/@(\w+)_(\w+)\b/g,(function(e,t,n){return"<strong>@".concat(t," ").concat(n,"</strong>")}))}function tm(e){return"#".concat("00000".concat(e.toString(16)).slice(-6))}function nm(e){var t=e.latest_status,n=e.virtual_status,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return t&&t.status&&a.push(t.status),n&&n!==a[0]&&a.push(n),a.filter((function(e){return!r.includes(e)}))}function rm(e){return Hf[e]||Hf.DEFAULT}function am(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?Kf(e):t}function om(e){var t=Math.floor(+e/60);return e=+e%60,"".concat(Object(m.pad)(t.toString()),":").concat(Object(m.padStart)(e.toString(),2,"0"))}function im(e){var t=Math.floor(+e/60);return e=+e%60,qf()().hour(t).minutes(e)}function cm(e){return 60*qf()(e).hours()+qf()(e).minutes()}function sm(e){return["1","true","on",!0,1].includes(e)}var lm=function(e){return parseFloat(e+""||"0").toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},um={__timerId:null,__title:void 0,status:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){var r=this;if(!t||!document.hasFocus()){this.__title||(this.__title=document.title);var a=e+" | "+this.__title;document.title=a,clearTimeout(this.__timerId),n&&(this.__timerId=setTimeout((function(){r.reset(),r.__timerId=setTimeout((function(){r.status(e,t)}),500)}),500))}})),reset:function(){clearTimeout(this.__timerId),this.__timerId=null,this.__title&&(document.title=this.__title,this.__title=void 0)}},dm=function(){return new Promise((function(e,t){try{navigator.geolocation.getCurrentPosition(e,t)}catch(n){t(n)}}))};function pm(){var e=Object(f.a)(["\n  ","\n  color: ",";\n  :hover {\n    color: ",";\n  }\n  font-weight: ",";\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n"]);return pm=function(){return e},e}function hm(){var e=Object(f.a)(["\n  ","\n  color: ",";\n  font-weight: ",";\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n"]);return hm=function(){return e},e}function bm(){var e=Object(f.a)(["\n  line-height: 0;\n  padding: 13px 26px;\n  background: transparent;\n  color: ",";\n  font-weight: normal;\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n  :hover path,\n  :hover circle {\n    stroke: ",";\n  }\n  :hover {\n    color: ",";\n  }\n"]);return bm=function(){return e},e}function fm(){var e=Object(f.a)(["\n  fill: transparent;\n  min-width: 20px;\n"]);return fm=function(){return e},e}function mm(){var e=Object(f.a)(["\n  max-width: 100%;\n  padding-left: ","px;\n  line-height: 1rem;\n  .refresh{\n    transform: rotateY(180deg)\n  }\n"]);return mm=function(){return e},e}var jm=x.default.div(mm(),(function(e){return e.havePadding?26:0})),vm=Object(x.default)(Ff)(fm()),Om=Object(x.css)(bm(),y.black0,y.black0,y.blue4,y.blue4),gm=Object(x.default)(Uf.b)(hm(),Om,(function(e){return e.isActive?y.blue4:y.black0}),(function(e){return e.isActive?Bf.medium:Bf.normal}),(function(e){return e.isActive?y.blue4:y.black0})),xm=x.default.div(pm(),Om,y.gray3,y.gray3,(function(e){return e.isActive?Bf.medium:Bf.normal}),(function(e){return e.isActive?y.blue4:y.black0}));var ym=function(e){var t=e.item,n=t.path,r=t.icon,o=t.label,i=t.isActive,c=t.value,s=t.hideInClosed,l=void 0!==s&&s,u=t.disabled,d=e.refresh,h=e.title;Object(p.useEffect)((function(){return i&&j.a.isString(h)&&um.status(h),function(){}}));var b="string"===typeof r||"number"===typeof r?Object(a.jsx)(vm,{name:r}):r,f=Object(p.useContext)(_);if((!b||l)&&!f.isOpen)return null;var m=c?Object(a.jsxs)(jm,{havePadding:!0,isActive:!0,className:"ml-auto text-right",children:[d&&i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ff,{name:Ef.Rotate,className:"mx-2 refresh",size:20,"data-tip":"Reload","data-for":"jobs-left-meun-tooltip",onClick:function(){j.a.isFunction(d)&&d()}}),Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"left",id:"jobs-left-meun-tooltip"})]}),c]}):null;return u?Object(a.jsx)(xm,{children:Object(a.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[b,f.isOpen?Object(a.jsxs)(p.Fragment,{children:[Object(a.jsx)(jm,{havePadding:!!r||0===r,children:o}),m]}):null]})}):Object(a.jsx)(gm,{to:{pathname:n,state:{applied:Date.now()+n}},className:"nav-link",isActive:i,children:Object(a.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[b,f.isOpen?Object(a.jsxs)(p.Fragment,{children:[Object(a.jsx)(jm,{className:"flex-grow-1",havePadding:!!r||0===r,children:o}),m]}):null]})},n)};function wm(){var e=Object(f.a)(["\n  margin-left: 26px;\n"]);return wm=function(){return e},e}function _m(){var e=Object(f.a)(["\n  ","\n  cursor: pointer;\n"]);return _m=function(){return e},e}function km(){var e=Object(f.a)(["\n  background: ",";\n  border-right: 1px solid ",";\n  width: ","px;\n  position: relative;\n  border-bottom: 1px solid ",";\n  min-height: 100;\n  overflow: hidden auto;\n"]);return km=function(){return e},e}var Sm=320,Cm=68,Nm=x.default.nav(km(),y.gray1,y.gray2,(function(e){var t=e.isOpen,n=e.width;return t?n||Sm:Cm}),y.gray2),Em=x.default.div(_m(),Om),Am=x.default.div(wm());function Tm(e){var t=e.width,n=e.children,r=e.className,o=e.noExpand,i=Object(p.useContext)(_),c=i.isOpen,s=i.toggleSidebar;return Object(a.jsxs)(Nm,{width:t,className:g()("nav d-flex flex-nowrap h-100 flex-column text-left flex-shrink-0 justify-content-between",r),isOpen:c||o,children:[Object(a.jsx)("div",{className:"w-100 h-100 d-flex flex-column",style:{overflow:"hidden auto"},children:n}),!o&&Object(a.jsx)(Em,{onClick:s,className:"d-flex flex-row align-items-center",children:c?Object(a.jsxs)(h.a.Fragment,{children:[Object(a.jsx)(Ff,{name:Ef.LeftArrowNavigation}),Object(a.jsx)(Am,{children:"Collapse sidebar"})]}):Object(a.jsx)("div",{className:"d-flex flex-row align-items-center",children:Object(a.jsx)(Ff,{name:Ef.RightArrowNavigation})})})]})}var Im=h.a.memo(Tm),Rm=n(35),Dm=n(20);function Mm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return function(n){Object(u.a)(o,n);var r=Object(d.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=r.call(this,t)).state={},Object.keys(e).forEach((function(t){if(!(t in n.props)){var r=e[t];n.state[t]={data:r.initialData,initialData:r.initialData,loading:!1,ready:!1,error:null,fetch:n.wrappedFetch(t,r),init:function(e){return n.setData(t,e,!0)},reset:function(){return n.setData(t,r.initialData,!1)}}}})),n}return Object(l.a)(o,[{key:"setData",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.setState((function(r){return Object(k.a)({},e,Object(c.a)(Object(c.a)({},r[e]),{},{data:t,ready:n,loading:!1,error:null}))})),t}},{key:"setLoading",value:function(e,t){this.setState((function(n){return Object(k.a)({},e,Object(c.a)(Object(c.a)({},n[e]),{},{loading:t}))}))}},{key:"setError",value:function(e){var t=this;return function(n){t.setLoading(e,!1),t.setState((function(t){return Object(k.a)({},e,Object(c.a)(Object(c.a)({},t[e]),{},{error:n,ready:!0}))}))}}},{key:"wrappedFetch",value:function(e,t){var n=this;return function(){return n.setLoading(e,!0),t.fetch.apply(t,arguments).then((function(t){return n.setData(e,t)}),n.setError(e))}}},{key:"render",value:function(){return Object(a.jsx)(t,Object(c.a)(Object(c.a)({},this.props),this.state))}}]),o}(p.Component)}}var Pm,Lm=n(2),Fm=n.n(Lm),Um=n(4);!function(e){e.access_token="access_token",e.refresh_token="refresh_token"}(Pm||(Pm={}));var Vm,Bm=function(e){window.sessionStorage.removeItem(e)},Jm=function(e){var t=window.sessionStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){return null}return null},zm=function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))},qm=n(51),Wm=n.n(qm),Hm=["",null,void 0],Gm=n(132),Ym=n(185);!function(e){e.Success="success",e.Warning="warning",e.Danger="danger",e.Info="info"}(Vm||(Vm={}));var Qm=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(Gm.c)(t,Object.assign({position:"top-right",autoClose:5e3,hideProgressBar:!0,draggable:!1,className:Object(Ym.css)({background:"".concat(y.bootstrap["".concat(e,"0")]," !important"),color:"".concat(y.bootstrap["".concat(e,"2")]," !important"),borderRadius:"0px !important",minHeight:"40px !important"})},n))},Km="message",Zm=[];window.addEventListener("storage",(function(e){if(e.key===Km){var t=JSON.parse(e.newValue);if(t){var n=t.type,r=Object(Rm.a)(t,["type"]);Zm.forEach((function(e){e.type===n&&e.handler(r)}))}}}));var Xm,$m={messageBroadcast:function(e){localStorage.setItem(Km,JSON.stringify(e)),localStorage.removeItem(Km)},addMessageHandler:function(e){Zm.push(e)},removeMessageHandler:function(e){var t=Zm.findIndex((function(t){return t.type===e}));t>=0&&Zm.splice(t,1)}},ej=(n(651),n(553)),tj=function(){return"Bearer ".concat(Jm(Pm.access_token))},nj=function(){Xm=new ej.a({broadcaster:"pusher",key:"fb067bbe30a915d30682",cluster:"ap4",encrypted:!0,authEndpoint:"".concat(wj,"/v1/broadcasting/auth"),auth:{headers:{Authorization:tj()}}})},rj=function(){Xm&&(Xm.connector.pusher.config.auth.headers.Authorization=tj())},aj=function(){return Xm},oj=function(){uj(),window.location.replace("/login")};function ij(e,t){var n;zm(Pm.access_token,e),zm(Pm.refresh_token,t),fj(),$m.messageBroadcast({type:"token",data:(n={},Object(k.a)(n,Pm.access_token,e),Object(k.a)(n,Pm.refresh_token,t),n)})}$m.addMessageHandler({type:"token",handler:function(e){var t=e.data,n=t[Pm.refresh_token],r=t[Pm.access_token];zm(Pm.access_token,r),zm(Pm.refresh_token,n),xj.includes(window.location.pathname)?window.location.reload():fj()}});var cj=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("".concat(wj,"/oauth/token"),{method:mj.POST,mode:"cors",cache:"no-cache",body:t});case 3:if((n=e.sent).ok){e.next=6;break}throw Error(n.statusText);case 6:return e.next=8,n.json();case 8:return ij((r=e.sent).access_token,r.refresh_token),e.abrupt("return",r);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),sj=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("grant_type","password"),r.append("username",t),r.append("password",n),r.append("client_id","1"),r.append("client_secret","fu0vbRuqPXaywXqMEvdcb61SDN1Bqy5QAMOsRzwb"),e.next=8,cj(r);case 8:return a=e.sent,nj(),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lj=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("grant_type","social"),n.append("network","office365"),n.append("access_token",t),e.next=6,cj(n);case 6:return r=e.sent,nj(),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uj=function(){Bm(Pm.access_token),Bm(Pm.refresh_token)},dj=function(e){var t=new FormData;return t.append("grant_type","refresh_token"),t.append("refresh_token",e),cj(t).then(rj).catch((function(e){throw uj(),e}))},pj=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/me");case 2:return t=e.sent,n=t&&t.data&&t.data.id,e.next=6,Aj.get("/v1/users/".concat(n,"/roles"));case 6:return r=e.sent,e.abrupt("return",{data:Object(c.a)(Object(c.a)({},t.data),{},{permissions:new Set(t.data.permissions),role:r&&r.data&&r.data[0].name})});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var hj,bj={21600:.9,3600:.7,600:.5},fj=function e(){var t=Jm(Pm.access_token),n=Jm(Pm.refresh_token);if(t&&n){var r;try{r=JSON.parse(atob(t.split(".")[1]))}catch(i){return}var a=r.exp-Date.now()/1e3;if(a<=0)return oj();var o=function(e,t){var n=Object.keys(t).map((function(e){return+e})).reverse(),r=n[0];return n.forEach((function(t){e<=t&&(r=t)})),e*t[r]}(a,bj);o<=240?dj(n):(clearTimeout(hj),hj=setTimeout(e,1e3*(o-240)))}};fj(),window.onblur=function(){return clearTimeout(hj)},window.onfocus=fj;var mj,jj,vj={reAuthChecking:function(){return dj(Jm(Pm.refresh_token))},redirectToLoginPage:oj,login:sj,loginWithOffice365:lj,getCurrentUser:pj};!function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.PUT="PUT",e.DELETE="DELETE"}(mj||(mj={})),function(e){e.JSON="application/json",e.FORM="multipart/form-data",e.STREAM="application/octet-stream"}(jj||(jj={}));var Oj,gj,xj=["/login","/unauthorized"],yj=function(e,t){return function(){var n;"AbortController"in window&&(n=new AbortController);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=a.slice(0,3);return i[t-1]=Object(c.a)(Object(c.a)({},i[t-1]),{},{signal:n&&n.signal}),{promise:e.apply(null,i),controller:n}}},wj="https://apistg.steamatic.com.au",_j=function(e,t,n,r){return kj(e,jj.JSON,t,n,r)},kj=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r,a,o){var i,s,l,u;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=Jm(Pm.access_token),s={Accept:jj.JSON,Authorization:"Bearer ".concat(i)},n===jj.JSON&&(s["Content-Type"]=jj.JSON),l=n===jj.JSON?a&&JSON.stringify(a):a,e.next=6,window.fetch("".concat(wj).concat(r),Object(c.a)(Object(c.a)({},o),{},{method:t,mode:"cors",cache:"no-cache",headers:s,body:l}));case 6:if((u=e.sent).ok){e.next=10;break}return e.next=10,Cj(u);case 10:return e.abrupt("return",u.json());case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Sj=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=401===e.t0?3:7;break;case 3:if(!xj.includes(window.location.pathname)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("break",8);case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cj=function(e){return Sj(e).then(Nj)},Nj=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t;case 4:throw n=e.sent,(r=n.error_message||n.message)&&Qm(Vm.Danger,r),n;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ej=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=Jm(Pm.access_token),e.next=3,window.fetch("".concat(wj).concat(t,"?XDEBUG_SESSION_START=phpstorm-xdebug&debug_mode=true"),{method:mj.GET,mode:"cors",cache:"no-cache",headers:{Accept:jj.STREAM,Authorization:"Bearer ".concat(n)}});case 3:if((r=e.sent).ok){e.next=7;break}return e.next=7,Cj(r);case 7:return e.abrupt("return",r.blob());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Aj={get:function(e,t,n){return _j(mj.GET,"".concat(e).concat(function(e){var t=Object(m.pickBy)(e,(function(e){return!Hm.includes(e)}));return qm.stringify(t,{addQueryPrefix:!0})}(t)),null,n)},post:function(e,t,n){return _j(mj.POST,e,t,n)},patch:function(e,t){return _j(mj.PATCH,e,t)},remove:function(e,t,n){return _j(mj.DELETE,e,t,n)},put:function(e,t){return _j(mj.PUT,e,t)},postFormData:function(e,t){return function(e,t){return kj(mj.POST,jj.FORM,e,t)}(e,t)},downloadFile:function(e){return Ej(e)},errorHandler:Cj};!function(e){e.New="New",e.OnHold="On-Hold",e.InProgress="In-Progress",e.Closed="Closed",e.Cancelled="Cancelled",e.Created="Created"}(gj||(gj={}));var Tj,Ij=(Oj={},Object(k.a)(Oj,gj.New,1),Object(k.a)(Oj,gj.InProgress,2),Object(k.a)(Oj,gj.OnHold,3),Object(k.a)(Oj,gj.Closed,4),Object(k.a)(Oj,gj.Cancelled,5),Oj);!function(e){e.SITE_CONTACT="Site Contact",e.CUSTOMER="Customer",e.BROKER="Broker",e.LOS_ADJUSTOR="Loss Adjustor",e.REFERRER="Referrer"}(Tj||(Tj={}));var Rj,Dj="YYYY-MM-DD",Mj="YYYY-MM-DDTHH:mm:ss[Z]",Pj="DD MMM YYYY",Lj="ddd D MMM YYYY",Fj="hh:mm A",Uj="".concat(Pj,", ").concat(Fj),Vj=function(e,t){return e?qf()(e):null},Bj=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?function(e){return e.format(t)}(n?qf()(e).utc():qf()(e)):null},Jj=function(e){return Vj(e)},zj=function(e){return Vj(e)},qj=function(e,t){return Bj(e,t||Dj)},Wj=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return Bj(e,Mj,t)};!function(e){e.user="user",e.team="team"}(Rj||(Rj={}));var Hj=n(541),Gj=n(540);function Yj(){var e=Object(f.a)(["\n  margin: 15px 0px;\n  border-color: ",";\n"]);return Yj=function(){return e},e}var Qj=x.default.hr(Yj(),y.gray2),Kj=function(e){return function(t){return function(n){var r=n.children,a=Object(Rm.a)(n,["children"]);return p.createElement(t,Object(m.omit)(a,e),r)}}};function Zj(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  opacity: 0.7;\n"]);return Zj=function(){return e},e}function Xj(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: ",";\n\n  svg {\n    position: absolute;\n    z-index: 1;\n  }\n\n  path {\n    fill: "," !important\n    stroke: transparent !important;\n  }\n"]);return Xj=function(){return e},e}var $j,ev,tv,nv=Object(x.default)(Kj(["zIndex"])("div"))(Xj(),(function(e){return e.zIndex||100}),y.blue2),rv=x.default.div(Zj(),(function(e){return e.color})),av=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.color,r=e.onClick,o=e.zIndex;return Object(a.jsxs)(nv,{className:"cover-loading",onClick:r,zIndex:o,children:[Object(a.jsx)(rv,{color:n||y.transparent}),Object(a.jsx)(Ff,{name:Ef.Loading,size:t})]})}}]),n}(p.PureComponent),ov=n(41),iv=n(171),cv=n(554),sv=function(e,t){return function(n,r){var a=lv(n,e,r);return t?t(n,a,r):a}},lv=function e(t,n,r){var a={};return Object.keys(n).forEach((function(o){Object(m.isArray)(n[o])?n[o].some((function(e){return a[o]=e(null===t||void 0===t?void 0:t[o],t,o,r),!!a[o]})):a[o]=e(null===t||void 0===t?void 0:t[o],n[o],r)})),a},uv=function(e){if(["",null,void 0,!1].includes(e)||j.a.isArray(e)&&!e.length)return"This field is required"},dv=function(e){if(e&&!qf.a.isMoment(e))return"Date format is not correct"},pv=function(e){return isNaN(+e)?"Field must contain only numerical value":e<0?"Field shouldn't contain negative value":void 0},hv=function(e){if(uv(e)||["",null,void 0].includes(e.id))return"This field is required"},bv=function(e){if(e&&!/^[0-9]+$/.test(e))return"Must be a number"},fv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=ov.EditorState.createWithContent(Object(iv.a)(e)).getCurrentContent().getPlainText();return uv(t)},mv=function(e){if(e&&+e<0)return"Must be greater than zero"},jv=function(e){return!e||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?void 0:"Invalid e-mail address"},vv=function(e){return e.length>11&&Object(cv.luhn)(e.replace(/\D/g,""))?void 0:"Credit card number is not valid"},Ov=function(e){var t=e.split(" ");return t.length>1&&t[1].length>0?void 0:"Name should include first name and last name"},gv=sv({},(function(e,t){var n;return t.contacts=[],null===e||void 0===e||null===(n=e.contacts)||void 0===n||n.forEach((function(e,n){if(e.contact){var r=uv(e.assignment_type);r&&(t.contacts[n]={assignment_type:r})}})),t})),xv=n(25),yv=n(539),wv=n(26),_v=n.n(wv);!function(e){e.Customer="customer",e.Supplier="supplier",e.Insurer="insurer",e.Broker="broker",e.LossAdjustor="loss_adjustor",e.CompanyLocations="company_location"}($j||($j={})),function(e){e.person="person",e.company="company"}(ev||(ev={})),function(e){e.street="street",e.mailing="mailing",e.home="home",e.business="business",e.billing="billing",e.shipping="shipping"}(tv||(tv={}));var kv=function(e){var t={type:e.type,id:e.id,address_line_1:e.address_line_1,address_line_2:e.address_line_2,full_address:e.full_address};return e.suburb&&(t.suburb={id:e.suburb.id,name:e.suburb.name,state_id:e.suburb.state.id,postcode:e.suburb.postcode},t.postcode=e.suburb.postcode,t.state={id:e.suburb.state.id,name:e.suburb.state.name,code:e.suburb.state.code,country_id:e.suburb.state.country.id},t.country=e.suburb.state.country),t},Sv=function(e){return{address_line_1:e.address_line_1,suburb_id:e.suburb&&e.suburb.id}},Cv=function(e){var t=e.data.addresses.reduce((function(e,t){return e[t.type]=t,e}),{}),n=Object(c.a)(Object(c.a)({},e.data),{},{address:t[tv.street]?kv(t[tv.street]):null,mailing_address:t[tv.mailing]?kv(t[tv.mailing]):null});return delete n.addresses,{data:n}},Nv=function(e){var t=Object(c.a)({},e);return t.fields&&(t.fields={first_name:e.fields.first_name,last_name:e.fields.last_name,job_title:e.fields.job_title,email:e.fields.email,business_phone:e.fields.business_phone,mobile_phone:e.fields.mobile_phone,direct_phone:e.fields.direct_phone,legal_name:e.fields.legal_name,trading_name:e.fields.trading_name,abn:e.fields.abn,website:e.fields.website,default_payment_terms_days:e.fields.default_payment_terms_days}),t},Ev=function(e){var t;return e?Object(c.a)(Object(c.a)({},e),{},{payment_term_id:null===e||void 0===e||null===(t=e.payment_term)||void 0===t?void 0:t.id}):null},Av=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/".concat(t));case 2:return n=e.sent,e.abrupt("return",Cv(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Iv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/locations/".concat(t,"/company-locations"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/search",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/".concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/contacts/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Lv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/contacts/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/categories",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/categories/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Vv=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/contacts/person",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Bv=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/statuses",null);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Jv={findById:Av,update:function(e,t){return Aj.patch("/v1/contacts/".concat(e),t).catch((function(e){return Promise.reject(Nv(e))}))},getContacts:Tv,searchContacts:Dv,searchContactWC:yj(Dv,2),createCompany:function(e){return Aj.post("/v1/contacts/company",e).catch((function(e){return Promise.reject(Nv(e))}))},createPerson:Vv,getCategories:Fv,findCategoryById:Uv,getCategoryIcon:function(e){return{customer:Ef.People,supplier:Ef.Truck,insurer:Ef.Insurance,broker:Ef.Broker,loss_adjustor:Ef.ManShield,company_location:Ef.LocationUser}[e]||Ef.People},addContactAddress:function(e,t,n){return Aj.post("/v1/contacts/".concat(e,"/addresses/").concat(t.id),{type:n})},linkPersonToCompany:function(e,t){return Aj.post("/v1/contacts/".concat(t.id,"/").concat(e),null)},unlinkPersonFromCompany:function(e,t){return Aj.remove("/v1/contacts/".concat(t.id,"/").concat(e),null)},getTags:Mv,assignTag:Pv,removeTag:Lv,getContactStatuses:Bv,deleteContact:function(e){return Aj.remove("/v1/contacts/".concat(e),null)},getContactName:function(e){if(!e)return"";var t=e,n=e;return e.contact_type===ev.person?"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name):null===n||void 0===n?void 0:n.legal_name},getContactPhone:function(e){var t=e,n=e;return e.contact_type===ev.person?t.mobile_phone||t.direct_phone||t.business_phone:n.business_phone},createManagedAccount:function(e,t){return Aj.post("/v1/contacts/".concat(e,"/users/").concat(t),null)},deleteManagedAccount:function(e,t){return Aj.remove("/v1/contacts/".concat(e,"/users/").concat(t),null)},changeContactStatus:function(e,t){return Aj.patch("/v1/contacts/".concat(e,"/status"),{status:t})},getContactById:Rv,getCompanyLocationsByLocationId:Iv},zv=n(555);function qv(e){return e.isFocused?y.white:e.isDisabled?y.gray0:y.gray1}var Wv={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",padding:0})},menuList:function(e){return Object(c.a)(Object(c.a)({},e),{},{zIndex:3})},menuPortal:function(e){return Object(c.a)(Object(c.a)({},e),{},{zIndex:9999})},control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{border:"none",minHeight:"auto",maxHeight:33.5,background:qv(t),boxShadow:t.isFocused?"0 0 0 0.2rem ".concat(y.bootstrap.boxShadow):"none"})},indicatorSeparator:function(e){return Object(c.a)(Object(c.a)({},e),{},{visibility:"hidden"})},valueContainer:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none"})},input:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none"})},indicatorsContainer:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none"})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:6})},clearIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:6})},loadingIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:6})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:y.gray5})},placeholder:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:y.gray4,fontWeight:Bf.light})}};function Hv(){var e=Object(f.a)(["\n  color: ",";\n"]);return Hv=function(){return e},e}function Gv(){var e=Object(f.a)(["\n  .fcc__value-container .trim{display: none;};\n"]);return Gv=function(){return e},e}var Yv=x.default.div(Gv()),Qv=x.default.label(Hv(),y.gray4),Kv=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleBlur=function(){e.props.input.onBlur(e.props.input.value)},e.getStyles=function(){return Object(c.a)(Object(c.a)({},Wv),e.props.selectStyles)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.returnValue&&this.props.returnValue(this.props.input.value||{})}},{key:"render",value:function(){var e=this.props,t=e.meta,n=e.input,r=e.className,o=e.labelClassName,i=e.valueClassName,s=Object(Rm.a)(e,["meta","input","className","labelClassName","valueClassName"]),l=t.touched&&t.error;return Object(a.jsxs)("div",{className:g()("form-group",r),children:[this.props.label&&Object(a.jsx)(Qv,{className:o,children:this.props.label}),Object(a.jsxs)(Yv,{className:i,children:[Object(a.jsx)(zv.a,Object(c.a)(Object(c.a)({},n),{},{onBlur:this.handleBlur,styles:this.getStyles(),className:g()("form-control",{"is-invalid":l}),classNamePrefix:"fcc",placeholder:this.props.placeholder,options:this.props.options,isDisabled:this.props.disabled,isSearchable:this.props.isSearchable,menuPortalTarget:document.body},s)),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})]})}}]),n}(p.PureComponent),Zv=n(123);function Xv(){var e=Object(f.a)(["\n  color: ",";\n"]);return Xv=function(){return e},e}function $v(){var e=Object(f.a)(["\n  .fcc__value-container .trim{display: none;};\n"]);return $v=function(){return e},e}var eO=x.default.div($v()),tO=x.default.label(Xv(),y.gray4),nO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleBlur=function(){e.props.input.onBlur(e.props.input.value)},e.getStyles=function(){return Object(c.a)(Object(c.a)({},Wv),e.props.selectStyles)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(c.a)(Object(c.a)({},n.defaultOptions),this.props),t=e.meta,r=e.className,o=e.labelClassName,i=e.valueClassName,s=Object(Rm.a)(e,["meta","className","labelClassName","valueClassName"]),l=t.touched&&t.error;return Object(a.jsxs)("div",{className:g()("form-group",r),children:[this.props.label&&Object(a.jsx)(tO,{className:o,children:this.props.label}),Object(a.jsxs)(eO,{className:i,children:[Object(a.jsx)(Zv.a,Object(c.a)(Object(c.a)({},this.props.input),{},{onBlur:this.handleBlur,styles:this.getStyles(),className:g()("form-control",{"is-invalid":l}),classNamePrefix:"fcc",placeholder:this.props.placeholder,loadOptions:this.props.loadOptions,isDisabled:this.props.disabled},s)),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})]})}}]),n}(p.PureComponent);nO.defaultOptions={getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},noOptionsMessage:function(e){return e.inputValue?"No options...":"Start typing..."}};var rO=nO;function aO(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return aO=function(){return e},e}function oO(){var e=Object(f.a)(["\n  color: ",";\n  margin-left: 40px;\n"]);return oO=function(){return e},e}function iO(){var e=Object(f.a)(["\n  font-weight: ",";\n  color: ",";\n"]);return iO=function(){return e},e}var cO=x.default.div(iO(),(function(e){return e.disabled?"inherit":Bf.bold}),(function(e){return e.disabled?y.gray4:"inherit"})),sO=x.default.div(oO(),y.gray5),lO=x.default.div(aO()),uO=function(e){var t,n,r,o,i,c=e.contact,s=e.disabled;c.addresses?n=(t=c.addresses.filter((function(e){return e.type===tv.street}))[0])&&(null===(o=t.suburb)||void 0===o?void 0:o.state.code):n=(t=c.address)&&(null===(i=t.state)||void 0===i?void 0:i.code);return c.legal_name?r=c.legal_name:(c.first_name||c.first_name)&&(r="".concat(c.first_name," ").concat(c.last_name)),Object(a.jsxs)(lO,{children:[Object(a.jsx)(cO,{disabled:s,children:r}),t&&Object(a.jsxs)(sO,{children:[t.address_line_1,t.suburb&&", ".concat(t.suburb.name," ").concat(n||"")]})]})};function dO(){var e=Object(f.a)(["\n  border: 0 !important;\n  border-radius: 100%;\n  height: ","px;\n  width: ","px;\n  display: block;\n  box-shadow: 0 0 0 1.5px "," inset;\n  position: relative;\n  margin: 0;\n\n  ","\n\n  & > input {\n    opacity: 0;\n  }\n\n  ","\n"]);return dO=function(){return e},e}var pO=x.default.label(dO(),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.checked&&!e.disabled?y.blue2:e.checked?y.gray2:y.gray1}),(function(e){return e.checked&&"\n    &:before {\n      content: '';\n      display: block;\n      position: absolute;\n      width: 50%;\n      height: 50%;\n      top: 25%;\n      left: 25%;\n      border-radius: 100%;\n      background: ".concat(e.disabled?e.checked?y.gray4:y.gray1:y.blue2,";\n    }")}),(function(e){return e.disabled&&"\n    & > input {\n      display: none;\n    }"})),hO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.value,r=e.onChange,o=e.name,i=e.disabled,c=e.checked;return Object(a.jsx)(pO,{size:t,checked:c,disabled:i,children:Object(a.jsx)("input",{type:"radio",name:o,value:n,checked:c,className:"form-control",disabled:i,onChange:r})})}}]),n}(p.PureComponent),bO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.meta,n=e.size,r=void 0===n?16:n,o=e.className,i=t.touched&&t.error,s=this.props.checked||this.props.input.value===this.props.optionValue;return Object(a.jsxs)("div",{className:"form-group ".concat(o),children:[Object(a.jsx)(hO,Object(c.a)(Object(c.a)({size:r},this.props.input),{},{checked:s,value:this.props.optionValue,disabled:this.props.disabled})),i&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})}}]),n}(p.PureComponent),fO=n(556),mO=n.n(fO),jO={overlay:{backgroundColor:"rgba(0,0,0,0.85)",zIndex:1999},content:{width:"100%",height:"100%",background:"transparent",borderRadius:"3px",border:0,overflow:"auto",top:0,bottom:"inherit",left:0,right:"inherit",padding:0}},vO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.shouldCloseOnOverlayClick,r=void 0!==n&&n;return Object(a.jsx)(mO.a,{isOpen:t,appElement:document.getElementById("root"),ariaHideApp:!1,style:jO,shouldCloseOnOverlayClick:r,children:this.props.children})}}]),n}(p.PureComponent),OO=20,gO=200,xO=70;function yO(){var e=Object(f.a)(["\n  border: 1px solid ",";\n"]);return yO=function(){return e},e}function wO(){var e=Object(f.a)(["\n  padding: 20px ","px;\n  border-top: 1px solid ",";\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n\n  & > * {\n    margin-left: 10px;\n  }\n"]);return wO=function(){return e},e}function _O(){var e=Object(f.a)(["\n  padding: 30px ","px;\n  // min-height: ","px;\n  border-top: 1px solid ",";\n  position: relative;\n  ","\n"]);return _O=function(){return e},e}function kO(){var e=Object(f.a)(["\n  padding: 20px ","px;\n  font-size: ",";\n  font-weight: ",";\n"]);return kO=function(){return e},e}function SO(){var e=Object(f.a)(["\n  max-width: 98%;\n  min-width: 500px;\n  width: ",";\n  background: white;\n  margin: auto auto;\n  position: relative;\n  z-index: 1;\n  border-radius: 3px;\n\n  > .cover-loading {\n    border-radius: 3px;\n  }\n"]);return SO=function(){return e},e}function CO(){var e=Object(f.a)(["\n  position: absolute;\n  top: -","px;\n  height: calc(100% + ","px);\n  width: 100%;\n"]);return CO=function(){return e},e}function NO(){var e=Object(f.a)(["\n  position: relative;\n  width: 100%;\n  min-height: calc(100% - ","px);\n  display: flex;\n  margin: ","px 0px;\n"]);return NO=function(){return e},e}var EO=x.default.div(NO(),2*xO,xO),AO=x.default.div(CO(),xO,2*xO),TO=x.default.div(SO(),(function(e){return e.width||"700px"})),IO=x.default.div(kO(),OO,Vf.medium,Bf.bold),RO=x.default.div(_O(),OO,gO,y.gray2,(function(e){return e.scrollY?"max-height: calc(100vh - 250px);overflow-y: auto;":""})),DO=x.default.div(wO(),OO,y.gray2),MO=x.default.button(yO(),y.gray2),PO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.body,r=e.footer,o=e.onClose,i=e.loading,c=e.customModal,s=e.closeCaption,l=e.scrollY,u=e.style,d=e.bodyClass,p=e.shouldCloseOnOverlayClick,h=void 0!==p&&p,b=e.width;return Object(a.jsxs)(EO,{children:[Object(a.jsx)(AO,{onClick:h?o:void 0}),!c&&Object(a.jsxs)(TO,{width:b,children:[i&&Object(a.jsx)(av,{size:40,color:y.white,zIndex:10}),Object(a.jsx)(IO,{children:t}),n&&Object(a.jsx)(RO,{className:d,scrollY:l,style:u,children:n}),Object(a.jsxs)(DO,{children:[r,Object(a.jsx)(MO,{className:"btn btn-outline-secondary",onClick:o,children:s||"Cancel"})]})]}),this.props.children]})}}]),n}(p.PureComponent),LO=n(13),FO=n(466),UO=n(543),VO=n(557),BO=n.n(VO);function JO(){var e=Object(f.a)(["\n  color: ",";\n"]);return JO=function(){return e},e}function zO(){var e=Object(f.a)(["\n  position: relative;\n  &::after {\n    content: ",";\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 8px;\n  }\n"]);return zO=function(){return e},e}function qO(){var e=Object(f.a)(["\n  ","\n  padding-left: ","\n"]);return qO=function(){return e},e}function WO(){var e=Object(f.a)(["\n  background: ",";\n  position: relative;\n  border-radius: .25rem;\n  border: none;\n\n  &:disabled {\n    background: ",";\n  }\n\n  &::placeholder {\n    font-weight: lighter;\n    color: ",";\n  }\n"]);return WO=function(){return e},e}var HO,GO=Object(x.css)(WO(),y.gray1,y.gray0,y.gray4),YO=x.default.input(qO(),GO,(function(e){return e.isCurrencyOffset?"1.3em":null})),QO=x.default.div(zO(),(function(e){return e.currency&&"'$'"})),KO=x.default.label(JO(),y.gray4),ZO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){var n,r=!0;if(t.target.value&&e.props.currency){var a=t.target.value.match(/(\d+)(\.?)(\d*)/);a&&(a[1].length>7||a[3].length>2)&&(r=!1)}r&&(null===(n=e.props.input)||void 0===n||n.onChange(t))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.meta,n=e.min,r=e.currency,o=e.input,i=e.itemProp,s=e.type,l=e.placeholder,u=e.disabled,d=e.mask,p=e.labelClassName,h=e.label,b=e.valueClassName,f=e.step,m=e.className,j=t.touched&&t.error,v=r&&o.value,O=g()("form-control",{"is-invalid":j}),x=Object(c.a)(Object(c.a)(Object(c.a)({},o),i),{},{min:n,className:O,type:s,placeholder:l,disabled:u,step:f});return Object(a.jsxs)("div",{className:g()("form-group",m),children:[h&&Object(a.jsx)(KO,{className:p,children:h}),Object(a.jsxs)("div",{className:b,children:[d?Object(a.jsx)(BO.a,Object(c.a)(Object(c.a)({mask:d},x),{},{onChange:this.onChange,children:function(e){return Object(a.jsx)(YO,Object(c.a)(Object(c.a)({},e),{},{disabled:u}))}})):Object(a.jsx)(QO,{currency:v,children:Object(a.jsx)(YO,Object(c.a)(Object(c.a)({},x),{},{isCurrencyOffset:v,onChange:this.onChange}))}),j&&Object(a.jsx)("div",{className:"invalid-feedback",style:{display:j?"block":"none"},children:t.error})]})]})}}]),n}(p.PureComponent);!function(e){e[e.Standard=20]="Standard",e[e.Middle=25]="Middle",e[e.Big=50]="Big",e[e.Huge=999]="Huge"}(HO||(HO={}));var XO=HO,$O=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,Aj.get("/v1/countries",Object(c.a)(Object(c.a)({},t),{},{per_page:XO.Huge}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),eg=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,Aj.get("/v1/states",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tg=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,Aj.get("/v1/suburbs",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ng=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n,r,a,o=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"a",n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]?o[2]:"",a=o.length>3&&void 0!==o[3]?o[3]:10,e.next=6,Aj.get("/v1/suburbs/search?term=".concat(t,"&").concat(n?"country_id=".concat(n,"&"):"").concat(r?"state_id=".concat(r,"&"):"","count=").concat(a));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),rg=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"a",e.next=3,Aj.get("/v1/countries/search?term=".concat(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ag=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"a",n=r.length>1&&void 0!==r[1]?r[1]:"",e.next=4,Aj.get("/v1/states/search?term=".concat(t)+(""!==n?"&country_id="+n:""));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),og=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/locations",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ig=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/addresses",Sv(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cg=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/addresses/".concat(t),Sv(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sg={getLocationsWithController:yj(og,2),searchCountries:$O,searchStates:eg,searchByCountry:rg,searchByStates:ag,getSuburbs:tg,searchSuburbs:ng,searchLocations:og,create:ig,update:cg,expandAddress:function(e){return kv(e.data)}};function lg(){var e=Object(f.a)(["\n  max-width: 100%;\n  white-space: normal;\n  word-break: break-word;\n  display: block;\n"]);return lg=function(){return e},e}function ug(){var e=Object(f.a)([""]);return ug=function(){return e},e}var dg=x.default.span(ug()),pg=x.default.div(lg()),hg=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onChangeField=function(){e.props.onChange&&e.props.onChange()},e.updateSuburbDependencies=function(t){var n=e.props,r=n.name,a=n.change;if(a("".concat(r,".suburb"),t),t&&t.hasOwnProperty("id")){var o=t,i=e.props.states.data.data.find((function(e){return e.id===o.state_id}));if(i){a("".concat(r,".state"),i);var c=e.props.countries.data.data.find((function(e){return e.id===i.country_id}));a("".concat(r,".country"),c)}a("".concat(r,".postcode"),o.postcode),e.onChangeField()}},e.loadSuburbs=function(t){return sg.searchSuburbs(t||"","","",20).then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name||e.name===t.name&&+e.postcode>+t.postcode?1:-1})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.debouncedLoadSuburbs=_v()(e.loadSuburbs,1e3),e.addShowPostcodeFlag=function(e){return e.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{showPostcode:!1,label:e.name,value:e.id})}))},e.getSuburbOptionLabel=function(t){if(!t.id)return"";var n=t,r=e.props.states.data&&e.props.states.data.data.find((function(e){return e.id===n.state_id}));return Object(a.jsx)(lO,{children:Object(a.jsxs)(pg,{children:[t.name," ",Object(a.jsxs)(dg,{className:"trim",children:[r&&r.code," ",t.postcode]})]})})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(yv.a,{name:"address_line_1",label:"Address",placeholder:"Address",onChange:this.onChangeField,component:ZO})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"suburb",label:"Suburb",placeholder:"Suburb",loadOptions:this.debouncedLoadSuburbs,getOptionValue:function(e){return e.id&&e.id.toString()},getOptionLabel:this.getSuburbOptionLabel,component:rO,onChange:this.updateSuburbDependencies})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"state",label:"State",placeholder:"State",options:this.statesOptions,getOptionValue:function(e){return null!==e.id?e.id.toString():null},getOptionLabel:function(e){return e.name},component:Kv,disabled:!0})}),Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)(yv.a,{name:"postcode",label:"Postcode",placeholder:"Postcode",component:ZO,disabled:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"country",label:"Country",placeholder:"Country",options:this.countriesOptions,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},component:Kv,disabled:!0})})]})]})}},{key:"statesOptions",get:function(){return[{id:null,name:"All States"}].concat(Object(Dm.a)(this.props.states.data&&this.props.states.data.data||[]))}},{key:"countriesOptions",get:function(){return this.props.countries.data&&this.props.countries.data.data||[]}}]),n}(p.PureComponent),bg=Object(b.b)((function(e){return{states:e.allStates,countries:e.allCountries}}))(hg);function fg(){var e=Object(f.a)(["\n  position: relative;\n  margin-bottom: ",";\n"]);return fg=function(){return e},e}var mg=Object(x.default)(Kj(["isNew"])("div"))(fg(),(function(e){return e.isNew?0:"45px"}));function jg(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  margin-bottom: 30px;\n"]);return jg=function(){return e},e}var vg=x.default.legend(jg(),Vf.normal,Bf.bold),Og={address_line_1:[uv],suburb:[hv]},gg=sv({first_name:[uv],last_name:[uv],address:Og},(function(e,t){e.mailing_address&&(e.mailing_address.suburb||e.mailing_address.address_line_1)&&(t.mailing_address=sv(Og)(e.mailing_address));var n=e.business_phone||e.direct_phone||e.mobile_phone;return t.direct_phone=function(e,t){return function(n){return e(n)?t:void 0}}(uv,"One phone number is required")(n),t})),xg=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a,o,i;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={term:"".concat(t.first_name," ").concat(t.last_name),contact_type:ev.person},e.next=3,Jv.searchContacts(a);case 3:if(o=e.sent,i={},!o.data.find((function(e){var n=e;return n.first_name===t.first_name&&n.last_name===t.last_name&&n.id!==r.person.id}))){e.next=9;break}return i.first_name="Contact with same name already exists",e.abrupt("return",Promise.reject(i));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function yg(){var e=Object(f.a)(["\n  margin-left: 30px;\n  display: inline-block;\n  cursor: pointer;\n  color: ","!important;\n  font-weight: ",";\n"]);return yg=function(){return e},e}var wg=x.default.a(yg(),y.blue4,Bf.normal);function _g(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  font-weight: lighter;\n  border-color: ",";\n  box-shadow: 0 0 0 !important;\n\n  &:hover,\n  &:active {\n    background: "," !important;\n    border-color: "," !important;\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    background: ",";\n    color: ",";\n    border-color: ",";\n  }\n"]);return _g=function(){return e},e}var kg,Sg,Cg=x.default.button(_g(),y.blue2,y.white,y.blue2,y.blue3,y.blue3,y.blue2,y.white,y.blue2),Ng="99 9999 9999",Eg="9999",Ag="CustomerForm",Tg=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadCompanies=function(t){var n={term:t,contact_type:ev.company};return Jv.getContacts(n).then((function(t){return t.data.sort((function(t){return t.contact_category_id===e.props.contactCategory?-1:1}))}))},e.debouncedLoadCompanies=_v()(e.loadCompanies,1e3),e.copyAddress=function(){var t,n=Object(m.pick)(e.props.address,["address_line_1","address_line_2","postcode","suburb","state","country"]);e.props.change("mailing_address",Object(c.a)(Object(c.a)({},n),{},{type:tv.mailing,id:null===(t=e.props.person.mailing_address)||void 0===t?void 0:t.id})),e.scheduleUpdate()},e.copyAddressFromCompany=function(){var t,n=e.props,r=n.person,a=n.parentCompany,o=n.change,i=(a||r.parent_company).addresses.find((function(e){return e.type===tv.street})),s=i&&i.suburb;o("address",Object(c.a)(Object(c.a)({},i),{},{type:tv.street,id:null===(t=r.address)||void 0===t?void 0:t.id,state:s&&s.state,postcode:s&&s.postcode,country:s&&s.state&&s.state.country})),e.scheduleUpdate()},e.handleSubmitForm=function(){var t=e.props,n=t.handleSubmit,r=t.onSubmit;return e.props.submitting?(e.scheduleUpdate(),Promise.resolve()):n(r)()},e.scheduleUpdate=Object(m.debounce)((function(){e.isNewPerson||e.handleSubmitForm()}),1e3),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.parentCompany;return Object(a.jsx)(mg,{isNew:this.isNewPerson,children:Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:t,children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"first_name",label:"Firstname",placeholder:"Firstname",component:ZO,onChange:this.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"last_name",label:"Surname",placeholder:"Surname",component:ZO,onChange:this.scheduleUpdate})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"parent_company",label:"Company",placeholder:"Start typing to search...",component:rO,loadOptions:this.debouncedLoadCompanies,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.legal_name},onChange:this.scheduleUpdate,isClearable:!0})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"job_title",label:"Job Title",placeholder:"Job Title",component:ZO,onChange:this.scheduleUpdate})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"payment_term",label:"Default Payment Terms",placeholder:"Select Payment Terms",component:Kv,options:this.props.paymentTerms,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.description},onChange:this.scheduleUpdate})})}),Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"email",label:"Email",placeholder:"Email",component:ZO,onChange:this.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"mobile_phone",label:"Mobile",placeholder:"Mobile",component:ZO,mask:"9999 999 999",onChange:this.scheduleUpdate})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"direct_phone",label:"Direct Phone",placeholder:"Direct Phone",component:ZO,mask:Ng,onChange:this.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"business_phone",label:"Business Phone",placeholder:"Business Phone",component:ZO,mask:Ng,onChange:this.scheduleUpdate})})]}),Object(a.jsx)(Qj,{}),Object(a.jsxs)(FO.a,{name:"address",children:[Object(a.jsxs)(vg,{children:["Street Address ",Object(a.jsx)("sup",{children:"*"}),!t&&n&&Object(a.jsx)(wg,{onClick:this.copyAddressFromCompany,children:"Copy from company"})]}),Object(a.jsx)(bg,{name:"address",change:this.props.change,onChange:this.scheduleUpdate})]}),Object(a.jsx)(Qj,{}),Object(a.jsxs)(FO.a,{name:"mailing_address",children:[Object(a.jsxs)(vg,{children:["Mailing Address",!t&&Object(a.jsx)(wg,{onClick:this.copyAddress,children:"Copy from above"})]}),Object(a.jsx)(bg,{name:"mailing_address",change:this.props.change,onChange:this.scheduleUpdate})]})]}),this.isNewPerson&&!1!==this.props.footer&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qj,{}),Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",disabled:this.props.submitting,children:"Save"}),Object(a.jsx)(Qj,{})]})]})})}},{key:"isNewPerson",get:function(){var e=this.props.person;return null===e.id||void 0===e.id}}]),n}(p.PureComponent),Ig=Object(LO.compose)(Object(Gj.a)({form:Ag,validate:gg,asyncValidate:xg,asyncBlurFields:["first_name","last_name"],shouldAsyncValidate:function(e){return!e.initialized},enableReinitialize:!1}),Object(UO.a)({address:"address",parentCompany:"parent_company"}))(Tg),Rg=n(234),Dg=422,Mg=function(e){return e.status_code===Dg?Promise.reject(new Rg.a(e.fields)):Promise.reject(e)},Pg=function(e){return e.status_code===Dg?Promise.resolve(e):Promise.reject(e)},Lg=function(e){return Mg({status_code:Dg,error_message:"Invalid request",error_code:"invalid_request",fields:e})};!function(e){e.LEAD="lead",e.ACTIVE="active",e.QUAlIFIED="qualified",e.INACTIVE="inactive"}(Sg||(Sg={}));var Fg=(kg={},Object(k.a)(kg,Sg.LEAD,"Lead"),Object(k.a)(kg,Sg.ACTIVE,"Active"),Object(k.a)(kg,Sg.QUAlIFIED,"Qualified"),Object(k.a)(kg,Sg.INACTIVE,"In-Active"),kg);function Ug(){var e=Object(f.a)(["\n  padding-top: 8px;\n  text-align: center;\n  font-size: ",";\n  color: ",";\n  padding-left: 10px;\n"]);return Ug=function(){return e},e}function Vg(){var e=Object(f.a)(["\n  width: 30px;\n  padding-left: 10px;\n  padding-top: .7rem;\n  text-align: center;\n  display: flex;\n  align-items: start;\n"]);return Vg=function(){return e},e}function Bg(){var e=Object(f.a)(["\n  width: 20px;\n  padding: auto;\n  text-align: center;\n\n  & path,\n  circle {\n    stroke: ",";\n  }\n\n  & svg {\n    margin-top: 7px;\n  }\n"]);return Bg=function(){return e},e}var Jg=x.default.div(Bg(),y.orange1),zg=x.default.div(Vg()),qg=x.default.div(Ug(),Vf.smaller,y.gray4),Wg=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.loadContacts=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={term:t,contact_status:[Sg.ACTIVE]},e.next=3,Jv.searchContacts(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadContacts=_v()(e.loadContacts,1e3),e.getContactLabel=function(e){return Object(a.jsx)(uO,{contact:e})},e.onInvoiceToChange=function(t){return function(n){var r,a;t.contact&&(null===(r=(a=e.props).onChange)||void 0===r||r.call(a,t))}},e.onAssignmentTypeChange=function(t){return function(n){var r,a;t.contact&&(null===(r=(a=e.props).onChange)||void 0===r||r.call(a,t))}},e.createContactFromTemplate=function(t){return function(n){e.setState({modal:"createContact",contactIndex:t}),setTimeout(function(e){var t,n,r,a,o;null===e||void 0===e||null===(t=e.closest)||void 0===t||null===(n=t.call(e,".fcc__menu"))||void 0===n||null===(r=n.previousElementSibling)||void 0===r||null===(a=r.querySelector)||void 0===a||null===(o=a.call(r,"input"))||void 0===o||o.blur()}(n.target))}},e.renderContactModal=function(){var t=e.state,n=t.creatingContact,r=t.template;return Object(a.jsx)(vO,{isOpen:!0,children:Object(a.jsx)(PO,{onClose:function(){e.setState({modal:null})},loading:n,title:"Create Contact",body:Object(a.jsx)(Ig,{footer:!1,person:r,initialValues:r,contactCategory:r.contact_category.id,onSubmit:e._createContactFromTemplate}),footer:Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){e.props.dispatch(Object(xv.c)(Ag))},children:"Create"})})})},e._createContactFromTemplate=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l,u,d,p,h,b,f;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({creatingContact:!0}),t.prev=1,o=n.address,i=n.mailing_address,s=n.parent_company,l=Object(Rm.a)(n,["address","mailing_address","parent_company"]),t.next=5,Promise.all([Jv.createPerson(Object(c.a)(Object(c.a)({},l),{},{contact_category_id:null===(a=l.contact_category)||void 0===a?void 0:a.id})),o?sg.create(o):Promise.resolve(null),i?sg.create(i):Promise.resolve(null)]);case 5:if(u=t.sent,d=Object(w.a)(u,3),p=d[0],h=d[1],b=d[2],f=p.data,h&&Jv.addContactAddress(f.id,h.data,tv.street),b&&Jv.addContactAddress(f.id,b.data,tv.mailing),!s){t.next=16;break}return t.next=16,Jv.linkPersonToCompany(f.id,s);case 16:e.props.dispatch(Object(xv.a)(e.props.meta.form,"contacts.".concat(e.state.contactIndex,".contact"),f)),setTimeout(Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(n=(r=e.props).onChange)||void 0===n||n.call(r,{});case 1:case"end":return t.stop()}}),t)})))),e.setState({modal:null,template:null,contactIndex:null}),r=f,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),(null===t.t0||void 0===t.t0?void 0:t.t0.status_code)===Dg&&(r=Lg(t.t0.fields));case 25:return t.prev=25,e.setState({creatingContact:!1}),t.finish(25);case 28:return t.abrupt("return",r);case 29:case"end":return t.stop()}}),t,null,[[1,22,25,28]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"getAvailableAssignments",value:function(e){var t=e.getAll();return this.props.assignmentTypes.filter((function(e){return!e.is_unique||!t.find((function(t){return!!t.assignment_type&&t.assignment_type.name===e.name}))}))}},{key:"componentDidMount",value:function(){this.setState({template:this.props.template})}},{key:"componentDidUpdate",value:function(e){!e.template&&this.props.template&&this.setState({template:this.props.template})}},{key:"render",value:function(){var e=this,t=this.props,r=t.fields,o=t.onChange;return Object(a.jsxs)(a.Fragment,{children:["createContact"===this.state.modal&&this.renderContactModal(),r.map((function(t,i,c){var s=c.get(i);return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col col-lg-2 col-xl-3",children:Object(a.jsx)(yv.a,{name:"".concat(t,".assignment_type"),placeholder:"Assignment Type",component:Kv,onChange:e.onAssignmentTypeChange(s),options:e.getAvailableAssignments(r),getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name.toString()},selectStyles:n.customTypeSelectStyles})}),Object(a.jsx)("div",{className:"col col-lg-7 col-xl-6",children:Object(a.jsx)(yv.a,{name:"".concat(t,".contact"),placeholder:"Start typing to search...",component:rO,onChange:o,isClearable:!0,loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:e.getContactLabel,selectStyles:n.customContactSelectStyles,noOptionsMessage:function(t){var n=t.inputValue;return!n&&e.state.template?Object(a.jsxs)("div",{className:"text-left",children:[Object(a.jsx)("div",{children:Object(a.jsx)(uO,{contact:e.state.template})}),Object(a.jsx)("div",{children:Object(a.jsx)(tx,{onClick:e.createContactFromTemplate(i),children:"Create contact"})})]}):n?Object(a.jsx)("div",{className:"text-left",children:Object(a.jsx)(Uf.c,{to:"/contacts/1",children:"Create new contact"})}):"Start typing..."}})}),Object(a.jsx)(Jg,{children:s.contact&&(s.contact.has_alerts||s.contact.tags&&s.contact.tags.find((function(e){return e.is_alert})))&&Object(a.jsx)(Ff,{className:"align-self-center",name:Ef.Alert})}),Object(a.jsx)(zg,{children:Object(a.jsx)(yv.a,{name:"invoiceToKey",component:bO,onChange:e.onInvoiceToChange(s),optionValue:s.assignment_type&&s.contact?ex(s):i,disabled:!s.contact})}),Object(a.jsx)(qg,{children:"Invoice To"})]},i)}))]})}}]),n}(p.PureComponent);Wg.customTypeSelectStyles={control:function(e){return Object(c.a)(Object(c.a)({},e),{},{maxHeight:33.5,minHeight:"auto",borderColor:y.gray2,backgroundColor:"transparent",paddingTop:0,paddingBottom:0})}},Wg.customContactSelectStyles={menu:function(e){return Object(c.a)(Object(c.a)({},e),{},{minWidth:"330px"})}};var Hg=Object(LO.compose)(Object(b.b)())(Wg);function Gg(){var e=Object(f.a)(["\n  position: relative;\n"]);return Gg=function(){return e},e}function Yg(){var e=Object(f.a)(["\n  margin-top: 5px;\n"]);return Yg=function(){return e},e}function Qg(){var e=Object(f.a)(["\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return Qg=function(){return e},e}var Kg,Zg,Xg,$g,ex=function(e){return"".concat(e.contact.id,"-").concat(e.assignment_type.id)},tx=x.default.span(Qg(),y.blue4),nx=(x.default.div(Yg()),x.default.div(Gg())),rx=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.fetchTemplatedContact=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.job,t.prev=1,t.next=4,ly.getTemplatedContact(n.id);case 4:(null===(a=t.sent)||void 0===a||null===(r=a.contact_category)||void 0===r?void 0:r.id)&&(e.setState({template:a}),console.log(a)),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.addContact=function(t){var n=e.props.assignmentTypes.find((function(e){return!e.is_unique}));return function(){return t.push({assignment_type:n})}},e.renderContactsList=function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Hg,Object(c.a)(Object(c.a)({},t),{},{template:e.state.template,assignmentTypes:e.props.assignmentTypes,onChange:function(){e.props.onFieldChange&&setTimeout((function(){e.props.handleSubmit(e.props.onFieldChange)()}),100)}})),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6 offset-2 offset-xl-3",children:Object(a.jsx)(tx,{onClick:e.addContact(t.fields),children:"Add another contact"})})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.job,n=e.initialValues.contacts;ly.isEmailTemplate(t)&&(j.a.some(n,(function(e){return!!e.contact}))||this.fetchTemplatedContact())}},{key:"render",value:function(){var e=this.props,t=e.assignmentTypes,n=e.submitting;return Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(a.jsxs)(nx,{children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),t.length>0&&Object(a.jsx)(Hj.a,{name:"contacts",component:this.renderContactsList})]}),Object(a.jsx)(Qj,{})]})}}]),n}(p.PureComponent),ax=Object(Gj.a)({form:"JobContactsForm",validate:gv,enableReinitialize:!0})(rx),ox=function(e){var t;return{recipients:["to","cc","bcc"].reduce((function(t,n){return e[n]?t.concat(e[n].map((function(e){return{type:n,address:e.email||e.value}}))):t}),[]),subject:e.subject,body:e.body,job_risk_assessment_id:null===(t=e.assessments)||void 0===t?void 0:t.map((function(e){return e.id}))}},ix=function(e){var t,n,r=e.latest_status.status,a=(null===(t=e.job_users)||void 0===t?void 0:t.map((function(e){var t=Yf(e);return{id:e.id,name:t.name,type:Rj.user,primary_location:e.locations.find((function(e){return e.primary}))}})))||[],o=(null===(n=e.job_teams)||void 0===n?void 0:n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{type:"team"})})))||[];return Object(c.a)(Object(c.a)({},e),{},{created_at:zj(e.created_at),initial_contact_at:zj(e.initial_contact_at),date_of_loss:Jj(e.date_of_loss),anticipated_invoice_date:Jj(e.anticipated_invoice_date),authority_received_at:zj(e.authority_received_at),criticality:e.criticality&&{value:e.criticality,label:e.criticality},claim_type:e.claim_type&&{value:e.claim_type,label:e.claim_type},edit_forbidden:r===gj.Closed||r===gj.Cancelled,assigned_to:[].concat(Object(Dm.a)(a),Object(Dm.a)(o))})},cx=function(e){var t=Object(c.a)({},e);return t.fields&&(t.fields={claim_number:e.fields.claim_number,reference_number:e.fields.reference_number,job_service:e.fields.job_service_id,insurer:e.fields.insurer_id,assigned_location:e.fields.assigned_location_id,owner_location:e.fields.owner_location_id,claim_type:e.fields.claim_type,criticality:e.fields.criticality,initial_contact_at:e.fields.initial_contact_at,date_of_loss:e.fields.date_of_loss,anticipated_invoice_date:e.fields.anticipated_invoice_date,authority_received_at:e.fields.authority_received_at,cause_of_loss:e.fields.cause_of_loss,description:e.fields.description,anticipated_revenue:e.fields.anticipated_revenue,expected_excess_payment:e.fields.expected_excess_payment,site_address_id:e.fields.site_address_id,site_address_lng:e.fields.site_address_lng,site_address_lat:e.fields.site_address_lat,service:e.fields.service,supervisor_id:e.fields.supervisor_id}),t},sx=function(e){var t,n,r,a,o;return{term:null===e||void 0===e?void 0:e.term,assigned_location_id:null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.id,from_date:Wj(null===e||void 0===e||null===(n=e.from_date)||void 0===n||null===(r=n.startOf)||void 0===r?void 0:r.call(n,"day"),!0),to_date:Wj(null===e||void 0===e||null===(a=e.to_date)||void 0===a||null===(o=a.endOf)||void 0===o?void 0:o.call(a,"day"),!0)}},lx=function(e){var t,n,r;return Object.assign((r={claim_number:e.claim_number,reference_number:e.reference_number,job_service_id:e.service&&e.service.id,insurer_id:e.insurer&&e.insurer.id,assigned_location_id:e.assigned_location&&e.assigned_location.id,owner_location_id:e.owner_location&&e.owner_location.id,company_location_id:(null===(t=e.company_location)||void 0===t?void 0:t.id)||null,claim_type:e.claim_type&&e.claim_type.value,criticality:e.criticality&&e.criticality.value,initial_contact_at:Wj(e.initial_contact_at,!0),date_of_loss:qj(e.date_of_loss),anticipated_invoice_date:qj(e.anticipated_invoice_date),authority_received_at:Wj(e.authority_received_at,!0),cause_of_loss:e.cause_of_loss,description:e.description,anticipated_revenue:e.anticipated_revenue,expected_excess_payment:e.expected_excess_payment},Object(k.a)(r,e.site_address_id?"site_address_id":"",e.site_address_id),Object(k.a)(r,e.site_address_lng?"site_address_lng":"",e.site_address_lng),Object(k.a)(r,e.site_address_lat?"site_address_lat":"",e.site_address_lat),Object(k.a)(r,"service",e.service),Object(k.a)(r,"supervisor_id",e.supervisor&&e.supervisor.id),Object(k.a)(r,"contacts",e.id||null===(n=e.contacts)||void 0===n?void 0:n.filter((function(e){var t,n;return!!(null===(t=e.assignment_type)||void 0===t?void 0:t.id)&&!!(null===(n=e.contact)||void 0===n?void 0:n.id)})).map((function(t){return{assignment_type:{id:t.assignment_type.id,name:t.assignment_type.name},contact:{id:t.contact.id,invoice_to:e.invoiceToKey===ex(t)}}}))),r),{})},ux=function(e){var t;return{id:e.id,uid:"RA-"+e.id,created_at:qf()(e.created_at),hazards:(e.assigned_hazards||[]).map((function(e){return{id:e.id,name:e.name,risks:j.a.map(e.assigned_risks,"name"),controls:j.a.map(e.assigned_controls,"name"),responsibilities:j.a.map(e.assigned_responsibilities,"name")}})).concat((e.assigned_custom_hazards||[]).map((function(e){var t=e.data.risks[0];return{id:e.id,name:e.name,risks:t.name,controls:t.controls,responsibilities:t.responsibilities}}))),signature:{dataURL:e.signature,signedBy:{name:null===(t=e.user)||void 0===t?void 0:t.full_name},signedAt:qf()(e.created_at)},teamSignature:(e.assign_signature||[]).map((function(e){return{type:e.type,dataURL:e.signature,signedBy:{name:e.user_name},signedAt:qf()(e.created_at)}}))}},dx=function(e){return Object(c.a)(Object(c.a)({},e),{},{contact:{id:e.contact_id,first_name:e.first_name,last_name:e.last_name,trading_name:e.trading_name,legal_name:e.legal_name,contact_type:e.contact_type,tags:e.tags}})},px=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t));case 2:return n=e.sent,e.abrupt("return",ix(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/inbox",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),bx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/mine",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),fx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/mine/active",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/mine/teams/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/mine/closed",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/mine/no-contact",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ox=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/mine/upcoming-kpi",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gx=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/services",{per_page:XO.Huge});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),xx=function(e,t){var n=t.insurer_id;return t.insurer_id="",Aj.patch("/v1/jobs/".concat(e),t).then((function(){return t.insurer_id=n,Aj.patch("/v1/jobs/".concat(e),t).then((function(e){return ix(e.data)}))})).catch((function(e){return Promise.reject(cx(e))}))},yx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_x=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),kx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/users"));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){var t=Yf(e);return{id:e.id,name:t.name,type:"user"}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/teams"));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{type:"team"})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/users/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Nx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/").concat(r,"s/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ex=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/").concat(r,"s/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ax=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/contacts/assignments/types",{per_page:XO.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Tx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/contacts/assignments"));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return dx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ix=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts/external/contacts/assignments/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return dx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Rx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/contacts/assignments/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data.map((function(e){return dx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Dx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/contacts/assignments/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data.map((function(e){return dx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Mx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/contacts/assignments/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data.map((function(e){return dx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Px=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/next-statuses"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/status"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/linked-jobs"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ux=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/jobs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/jobs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/jobs/").concat(n,"/merge"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Jx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/pin"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/pin"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Wx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/follow"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Hx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/follow"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Gx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/photos"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/photos/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Qx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/photos/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Kx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/photos/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Zx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/documents/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Xx=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/documents/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$x=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/documents/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ey=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/documents"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ty=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/snooze"),{snoozed_until:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ny=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/unsnooze"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ry=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/messages/read"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ay=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/messages/unread"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oy=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/messages"),{type:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iy=function(e){var t,n,r,a,o;return!(!e||(null===(t=e.latest_status)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id)||(null===(r=e.latest_status)||void 0===r?void 0:r.user_id)||!(null===(a=e.messages)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.subject)&&!e.last_message)},cy=function(e,t){return null===t||void 0===t?void 0:t.find((function(t){return t.assignment_type.name===e}))},sy=function(e,t){var n=cy(Tj.SITE_CONTACT,e)||t&&cy(Tj.CUSTOMER,e);return n?Jv.getContactName(n.contact):""},ly={getJobName:function(e){return e?"#".concat((null===e||void 0===e?void 0:e.id)||"").concat((null===e||void 0===e?void 0:e.assigned_location)?"-".concat(null===e||void 0===e?void 0:e.assigned_location.code):""):""},getJobNameOfCreditType:function(e){return"#CN".concat((null===e||void 0===e?void 0:e.id)||"").concat((null===e||void 0===e?void 0:e.assigned_location)?"-".concat(null===e||void 0===e?void 0:e.assigned_location.code):"")},getJobAddress:function(e){return e&&e.site_address&&e.site_address.full_address||"No Site Address Specified"},findById:px,deprecatedUpdate:function(e,t){var n=lx(t);return xx(e,n)},update:xx,getInboxJobs:hx,getMineJobs:bx,getAllJobs:fx,getTeamJobs:mx,getNoContactJobs:vx,getClosedJobs:jx,getUpcomingKPIJobs:Ox,getServices:gx,getTags:yx,assignTag:wx,removeTag:_x,getUsers:kx,assignUser:Cx,removeUserOrTeam:Ex,getContacts:Tx,getContactsByContractUid:Ix,updateAssignment:Rx,createAssignment:Dx,removeAssignment:Mx,getAssignmentTypes:Ax,getJobNextStatuses:Px,applyNewJobStatus:Lx,getLinkedJobs:Fx,linkJobs:Vx,removeLink:Ux,pinJob:Jx,unpinJob:zx,mergeJobs:Bx,createJob:function(e){var t=lx(e);return Aj.post("/v1/jobs",t).catch((function(e){return Promise.reject(cx(e))}))},duplicateJob:function(e){return Aj.post("/v1/jobs/".concat(e,"/duplicate"))},removeJob:qx,followJob:Wx,unfollowJob:Hx,getJobPhotos:Gx,getJobDocuments:ey,attachPhoto:Yx,updateAttachedPhoto:Qx,detachPhoto:Kx,snoozeJob:ty,unSnoozeJob:ny,assignUserOrTeam:Nx,getTeams:Sx,markJobAsRead:ry,markJobAsUnread:ay,getPreviousJobs:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/previous"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createRecurringJob:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/recurring",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchJobs:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/jobs/search",Object(c.a)({term:t},n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),filterJobs:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/search",Object(c.a)({},t)).then((function(e){return Object(c.a)(Object(c.a)({},e),{},{options:t})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getJobMaterials:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/materials"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addMaterialToJob:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/materials"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateJobMaterial:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/materials/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteJobMaterial:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/materials/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getJobMaterial:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/materials/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getJobUsageSummary:function(e){return Aj.get("/v1/jobs/".concat(e,"/summary"))},getJobEquipments:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/equipment"),n);case 2:return r=e.sent,e.abrupt("return",Object(m.orderBy)(r.data,["started_at","equipment.model"],["desc","asc"]));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteJobEquipment:function(e,t){return Aj.remove("/v1/jobs/".concat(e,"/equipment/").concat(t))},updateJobEquipmentFinishUsing:function(e,t,n){return Aj.patch("/v1/jobs/".concat(e,"/equipment/").concat(t,"/finish-using"),{ended_at:n})},addEquipmentToJob:function(e,t){return Aj.post("/v1/jobs/".concat(e,"/equipment"),t)},updateJobEquipmentOverride:function(e,t,n){return Aj.patch("/v1/jobs/".concat(e,"/equipment/").concat(t,"/override"),{intervals_count_override:n})},getJobCostingCounters:function(e){return Aj.get("/v1/jobs/".concat(e,"/costing-counters"))},getJobsNewInventory:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/new-inventory",{location_id:t,search_string:n,page:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),isEmailTemplate:iy,getMessages:oy,attachDocument:Zx,updateAttachedDocument:Xx,detachDocument:$x,shouldHighlight:function(e){return!!e&&(e.has_new_replies||iy(e)&&qf.a.duration(qf()().diff(qf()(e.created_at||e.touched_at))).asHours()<=24||qf.a.duration(qf()().diff(qf()(e.updated_at||e.touched_at))).asHours()<=24)},getTemplatedContact:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/email-contact"));case 2:return n=e.sent,e.abrupt("return",Cv(n).data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),extractContact:cy,siteContactName:sy,invoiceToName:function(e,t,n){var r=null===e||void 0===e?void 0:e.find((function(e){return e.invoice_to}));return r?Jv.getContactName(r.contact):t?sy(e,n):""},getRiskAssessments:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/risk-assessments"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRiskAssessmentDetail:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/risk-assessments/").concat(n));case 2:if(!(r=e.sent.data)){e.next=5;break}return e.abrupt("return",ux(r));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sendRiskAssessmentEmail:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/jobs/".concat(t,"/risk-assessments/send-email"),Object(c.a)({job_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createWorkCategory:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/jobs/work_categories",Object(c.a)({job_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateWorkCategory:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.patch("/v1/jobs/work_categories/".concat(n),Object(c.a)({job_id:t},r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),addCustomExpense:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/custom-expense"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateCustomExpense:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/custom-expense/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteCustomExpense:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/jobs/".concat(t,"/custom-expense/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getCustomExpenses:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/jobs/".concat(t,"/custom-expense"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},uy={emit:function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},listen:function(e,t){var n=function(e){return t(e.detail)};return window.addEventListener(e,n),{stopListening:function(){return dy(e,n)}}},removeListener:dy};function dy(e,t){window.removeEventListener(e,t)}!function(e){e.TaskWasAddedToRun="TaskWasAddedToRun",e.TaskWasRemovedFromRun="TaskWasRemovedFromRun",e.TaskWasSnoozed="TaskWasSnoozed",e.TaskWasUnsnoozed="TaskWasUnsnoozed",e.TaskWasUpdated="TaskWasUpdated",e.ContactChangedStatus="ContactChangedStatus",e.StaffAssignedToTask="StaffAssignedToTask",e.VehicleAssignedToTask="VehicleAssignedToTask",e.CreateRunsFromTemplate="CreateRunsFromTemplate",e.RunsCreatedFromTemplate="RunsCreatedFromTemplate",e.EmptyRunRemoved="EmptyRunRemoved",e.JobReadingsAdded="JobReadingsAdded",e.JobRoomAdded="JobRoomAdded",e.JobRoomCloned="JobRoomCloned",e.JobRoomUpdated="JobRoomUpdated",e.JobRoomDeleted="JobRoomDeleted",e.JobRoomAreaAdded="JobRoomAreaAdded",e.JobRoomAreaUpdated="JobRoomAreaUpdated",e.JobRoomAreaDeleted="JobRoomAreaDeleted",e.JobWorkLoaded="JobWorkLoaded",e.JobWorkAdded="JobWorkAdded",e.JobWorkUpdated="JobWorkUpdated",e.JobWorkDeleted="JobWorkDeleted",e.WarehousingInventoryAdded="WarehousingInventoryAdded",e.WarehousingInventoryDeleted="WarehousingInventoryDeleted",e.WarehousingStorageSpaceTypeAdded="WarehousingStorageSpaceTypeAdded",e.WarehousingStorageSpaceTypeUpdated="WarehousingStorageSpaceTypeUpdated",e.WarehousingStorageSpaceTypeRemoved="WarehousingStorageSpaceTypeRemoved",e.WarehousingStorageSpaceAdded="WarehousingStorageSpaceAdded",e.WarehousingStorageSpaceUpdated="WarehousingStorageSpaceUpdated",e.WarehousingStorageSpaceRemoved="WarehousingStorageSpaceRemoved",e.WarehousingStorageContainerTypeAdded="WarehousingStorageContainerTypeAdded",e.WarehousingStorageContainerTypeUpdated="WarehousingStorageContainerTypeUpdated",e.WarehousingStorageContainerTypeRemoved="WarehousingStorageContainerTypeRemoved",e.WarehousingStorageContainerAdded="WarehousingStorageContainerAdded",e.WarehousingStorageContainerUpdated="WarehousingStorageContainerUpdated",e.WarehousingStorageContainerRemoved="WarehousingStorageContainerRemoved",e.WarehousingStandardItemAdded="WarehousingStandardItemAdded",e.WarehousingStandardItemUpdated="WarehousingStandardItemUpdated",e.WarehousingStandardItemRemoved="WarehousingStandardItemRemoved",e.WarehousingChargingIntervalAdded="WarehousingChargingIntervalAdded",e.WarehousingChargingIntervalUpdated="WarehousingChargingIntervalUpdated",e.WarehousingChargingIntervalDeleted="WarehousingChargingIntervalDeleted",e.WarehousingInventoryItemAdded="WarehousingInventoryItemAdded",e.WarehousingInventoryItemUpdated="WarehousingInventoryItemUpdated",e.WarehousingInventoryItemRemoved="WarehousingInventoryItemRemoved",e.WarehousingInventoryItemNoteAdded="WarehousingInventoryItemNoteAdded",e.WarehousingInventoryItemNoteUpdated="WarehousingInventoryItemNoteUpdated",e.WarehousingInventoryItemNoteRemoved="WarehousingInventoryItemNoteRemoved",e.LME_LabourTypeAdded="LME_LabourTypeAdded",e.LME_LabourTypeUpdated="LME_LabourTypeUpdated",e.LME_LabourTypeDeleted="LME_LabourTypeDeleted",e.LME_EquipmentTypeAdded="LME_EquipmentTypeAdded",e.LME_EquipmentTypeUpdated="LME_EquipmentTypeUpdated",e.LME_EquipmentTypeDeleted="LME_EquipmentTypeDeleted",e.LME_EquipmentAdded="LME_EquipmentAdded",e.LME_EquipmentUpdated="LME_EquipmentUpdated",e.LME_EquipmentDeleted="LME_EquipmentDeleted",e.LME_ChargingIntervalAdded="LME_ChargingIntervalAdded",e.LME_ChargingIntervalUpdated="LME_ChargingIntervalUpdated",e.LME_ChargingIntervalDeleted="LME_ChargingIntervalDeleted",e.LME_MaterialAdded="LME_MaterialAdded",e.LME_MaterialUpdated="LME_MaterialUpdated",e.LME_MaterialDeleted="LME_MaterialDeleted",e.LocationAdded="LocationAdded",e.LocationUpdated="LocationUpdated",e.LocationRemoved="LocationRemoved",e.GSCodeAdded="GSCodeAdded",e.GSCodeUpdated="GSCodeUpdated",e.GSCodeRemoved="GSCodeRemoved",e.SuburbAdded="SuburbAdded",e.SuburbUpdated="SuburbUpdated",e.SuburbRemoved="SuburbRemoved",e.CustomExpenseCreated="CustomExpenseCreated",e.CustomExpenseUpdated="CustomExpenseUpdated",e.CustomExpenseDeleted="CustomExpenseDeleted"}(Kg||(Kg={})),function(e){e.Note="note",e.Message="message"}(Zg||(Zg={})),function(e){e.Job="job",e.Contact="contact",e.Invoice="invoice",e.PurchaseOrder="purchase_order",e.CreditNote="credit_note"}(Xg||(Xg={})),function(e){e.JOB_CREATED="job.created",e.JOB_USER_ASSIGNED="job.user_assigned",e.JOB_TEAM_ASSIGNED="job.team_assigned",e.JOB_UPDATED="job.updated",e.JOB_MESSAGE_ATTACHED="job.message_attached",e.JOB_NOTE_ATTACHED="job.note_attached",e.USER_MENTIONED="user_mentioned",e.CONTACT_NOTE_ATTACHED="contact.note_attached",e.INVOICE_NOTE_ATTACHED="invoice.note_attached",e.PURCHASE_ORDER_NOTE_ATTACHED="purchase_order.note_attached",e.CREDIT_NOTE_NOTE_ATTACHED="credit_note.note_attached",e.INVOICE_APPROVE_REQUEST="invoice.approve_requests_send",e.PURCHASE_ORDER_APPROVE_REQUEST="purchase_order.approve_requests_send",e.CREDIT_NOTE_APPROVE_REQUEST="credit_note.approve_requests_send"}($g||($g={}));var py=n(482),hy=n(73),by=n.n(hy);n(351);function fy(){var e=Object(f.a)(["\n  display: block;\n"]);return fy=function(){return e},e}function my(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return my=function(){return e},e}function jy(){var e=Object(f.a)(["\n  position: absolute;\n  right: 12px;\n  top: 8px;\n  cursor: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return jy=function(){return e},e}function vy(){var e=Object(f.a)(["\n  position: relative;\n\n  input {\n    ",";\n    padding-right: 40px;\n  }\n"]);return vy=function(){return e},e}function Oy(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return Oy=function(){return e},e}function gy(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return gy=function(){return e},e}function xy(){var e=Object(f.a)(["\n  color: ",";\n"]);return xy=function(){return e},e}var yy=x.default.label(xy(),y.gray4),wy=x.default.input(gy(),y.gray1),_y=x.default.span(Oy(),y.gray1),ky=(x.default.div(vy(),GO),Object(x.default)(Kj(["disabled"])(Ff))(jy(),(function(e){return e.disabled?"unset":"pointer"}),y.gray4,(function(e){return e.disabled?y.gray4:y.gray5})),Object(x.default)(Kj(["disabled"])(Ff))(my(),y.gray4,(function(e){return e.disabled?y.gray4:y.gray5}))),Sy=x.default.div(fy()),Cy=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:e.props.input.value},e.picker=p.createRef(),e.isValidDate=function(t){if(!e.props.futureEnabled){var n=qf()();return qf()(t).isBefore(n)}return!0},e.renderInput=function(t,n){var r=e.props,o=r.iconName,i=r.dateFormat,s=r.timeFormat,l=r.showTime,u=r.disabled,d=!1===i&&(l||s),p="";!1!==i?(p=Pj,(l||s)&&(p+=" "+(s||Fj))):p=s||Fj;var h=e.state.value||"";return qf.a.isMoment(h)&&(h=h.format(p)),Object(a.jsxs)("div",{className:"input-group",onClick:function(){u||n()},children:[Object(a.jsx)(wy,Object(c.a)(Object(c.a)({},t),{},{value:h,onChange:function(n){e.setState({value:n.target.value}),t.onChange(n)}})),Object(a.jsx)("span",{className:"input-group-append",children:Object(a.jsx)(_y,{className:"input-group-text px-2",children:Object(a.jsx)(ky,{name:o||(d?Ef.Clock:Ef.Calendar),size:18,disabled:u})})})]})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){this.state.value&&this.props.input.value||this.props.input.value===this.state.value||this.setState({value:this.props.input.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.meta,r=t.isValidDate,o=t.dateFormat,i=t.showTime,s=t.timeFormat,l=t.label,u=t.labelClassName,d=t.className,p=t.viewDate,h=t.defaultDate,b=t.closeOnSelect,f=t.disabled,m=n.touched&&n.error,j={placeholder:this.props.placeholder,className:g()("form-control",{"is-invalid":m}),disabled:f},v=this.props.input.onChange;return Object(a.jsxs)("div",{className:g()("form-group",d),children:[l&&Object(a.jsx)(yy,{className:u,children:l}),Object(a.jsxs)("div",{className:this.props.valueClassName,children:[Object(a.jsx)(by.a,Object(c.a)(Object(c.a)({},this.props.input),{},{ref:this.picker,inputProps:j,dateFormat:!1!==o&&Pj,timeFormat:!!i&&(s||Fj),isValidDate:r||this.isValidDate,initialViewDate:p,initialValue:h,closeOnSelect:!1!==b&&!(i||s),value:this.state.value,renderInput:this.renderInput,onChange:function(t){t&&!qf.a.isMoment(t)||v(t),e.setState({value:t})}})),m&&Object(a.jsx)(Sy,{className:"invalid-feedback",children:n.error})]})]})}}]),n}(p.PureComponent);function Ny(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -100%;\n  width: 100%;\n"]);return Ny=function(){return e},e}function Ey(){var e=Object(f.a)(["\n  position: relative;\n"]);return Ey=function(){return e},e}function Ay(){var e=Object(f.a)(["\n  padding: 0px;\n  &:not(:last-child){\n  margin-right: .5rem;\n}"]);return Ay=function(){return e},e}function Ty(){var e=Object(f.a)([""]);return Ty=function(){return e},e}function Iy(){var e=Object(f.a)([""]);return Iy=function(){return e},e}function Ry(){var e=Object(f.a)([""]);return Ry=function(){return e},e}var Dy,My=x.default.div(Ry()),Py=x.default.div(Iy()),Ly=x.default.div(Ty()),Fy=x.default.div(Ay()),Uy=x.default.div(Ey()),Vy=x.default.div(Ny()),By="JobsFilterForm";!function(e){e[e.THIS_MONTH=0]="THIS_MONTH",e[e.LAST_MONTH=1]="LAST_MONTH",e[e.THIS_WEEK=2]="THIS_WEEK",e[e.TODAY=3]="TODAY"}(Dy||(Dy={}));var Jy=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={shortcut:null},e.renderShortcut=function(t,n){return Object(a.jsx)("button",{className:"btn ".concat(t===e.state.shortcut?"btn-primary":"btn-outline-primary"),onClick:e.applyShorcut(t),children:n})},e.applyShorcut=function(t){return function(){var n=e.props,r=n.change,a=n.submit;switch(e.setState({shortcut:t}),t){case Dy.THIS_MONTH:r("from_date",qf()().startOf("month")),r("to_date",qf()());break;case Dy.LAST_MONTH:r("from_date",qf()().subtract(1,"month")),r("to_date",qf()());break;case Dy.THIS_WEEK:r("from_date",qf()().startOf("week")),r("to_date",qf()());break;case Dy.TODAY:r("from_date",qf()().startOf("day")),r("to_date",qf()())}a()}},e.navigate=function(t){return function(){if(e.props.values){var n,r=e.props.values.from_date,a=e.props,o=a.change,i=a.submit;switch(e.state.shortcut){case Dy.THIS_MONTH:case Dy.LAST_MONTH:n=qf()(r)[t](1,"month"),o("from_date",qf.a.min(qf()(),n).startOf("month")),o("to_date",qf.a.min(qf()(),qf()(n).endOf("month")));break;case Dy.THIS_WEEK:n=qf()(r)[t](1,"week"),o("from_date",qf.a.min(qf()(),n)),o("to_date",qf.a.min(qf()(),qf()(n).add(1,"week").subtract(1,"day")));break;case Dy.TODAY:o("from_date",(n=qf.a.min(qf()(),qf()(r)[t](1,"day"))).startOf("day")),o("to_date",qf()(n).endOf("day"))}i()}else setTimeout((function(){e.navigate(t)()}),10)}},e.apply=function(t){setTimeout((function(){var t,n;null===(t=(n=e.props).onSubmit)||void 0===t||t.call(n,e.values())}),1)},e.reset=function(){e.props.reset(),e.setState({shortcut:null}),setTimeout((function(){var t,n;null===(t=(n=e.props).onReset)||void 0===t||t.call(n,e.values())}),1)},e.values=function(){return sx(e.props.values)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.children;j.a.isFunction(e)&&e(this.shareable())}},{key:"shareable",value:function(){return{reset:this.reset,values:this.values}}},{key:"render",value:function(){var e,t,n=this,r=this.props.userLocations;return Object(a.jsx)(My,{id:"job_filters_outer_wrapper",children:Object(a.jsxs)(Py,{className:"row m-0",children:[Object(a.jsx)(Ly,{className:"col pl-0",children:Object(a.jsx)(py.a,{onReset:this.reset,onSubmit:this.props.handleSubmit(this.apply),children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)(Fy,{className:"col",children:Object(a.jsx)(yv.a,{name:"term",component:ZO,placeholder:"Search...",className:"m-0"})}),Object(a.jsx)(Fy,{className:"col",children:Object(a.jsx)(yv.a,{name:"location",component:Kv,options:r,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},placeholder:"Select Location",className:"m-0"})}),Object(a.jsx)(Fy,{className:"col",children:Object(a.jsx)(yv.a,{name:"from_date",component:Cy,closeOnSelect:!0,placeholder:"From",onChange:function(){n.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)(Fy,{className:"col",children:Object(a.jsx)(yv.a,{name:"to_date",component:Cy,closeOnSelect:!0,placeholder:"To",onChange:function(){n.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)(Fy,{children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Find"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",children:"Reset"})]})})]})})}),Object(a.jsxs)(Uy,{children:[null!==this.state.shortcut?Object(a.jsxs)(Vy,{children:[Object(a.jsx)("div",{className:"py-2 px-3 cursor-pointer",onClick:this.navigate("subtract"),"data-tip":"Previous","data-for":"job_filters_prev",children:Object(a.jsx)(Ff,{name:Ef.ArrowBack})}),Object(a.jsx)(Jf.a,{id:"job_filters_prev",effect:"solid",place:"bottom"}),(null===(e=this.props)||void 0===e||null===(t=e.values)||void 0===t?void 0:t.to_date)&&qf()(this.props.values.to_date).startOf("day")<qf()().startOf("day")?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"py-2 px-3 cursor-pointer",onClick:this.navigate("add"),"data-tip":"Next","data-for":"job_filters_next",children:Object(a.jsx)(Ff,{name:Ef.ArrowNext})}),Object(a.jsx)(Jf.a,{id:"job_filters_next",effect:"solid",place:"bottom"})]}):null]}):null,Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[this.renderShortcut(Dy.THIS_MONTH,"This Month"),this.renderShortcut(Dy.THIS_WEEK,"This Week"),this.renderShortcut(Dy.TODAY,"Today")]})]})]})})}}]),n}(h.a.PureComponent),zy=Object(LO.compose)(Object(Gj.a)({form:By,enableReinitialize:!0}),Object(b.b)((function(e){var t;return{userLocations:e.user.locations,values:null===(t=e.form[By])||void 0===t?void 0:t.values}})))(Jy);function qy(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -100%;\n  width: 100%;\n"]);return qy=function(){return e},e}function Wy(){var e=Object(f.a)(["\n  position: relative;\n"]);return Wy=function(){return e},e}function Hy(){var e=Object(f.a)(["\n  padding: 0px;\n  &:not(:last-child){\n  margin-right: .5rem;\n}"]);return Hy=function(){return e},e}function Gy(){var e=Object(f.a)([""]);return Gy=function(){return e},e}function Yy(){var e=Object(f.a)([""]);return Yy=function(){return e},e}function Qy(){var e=Object(f.a)([""]);return Qy=function(){return e},e}var Ky=x.default.div(Qy()),Zy=x.default.div(Yy()),Xy=x.default.div(Gy()),$y=x.default.div(Hy()),ew=(x.default.div(Wy()),x.default.div(qy()),"JobsFilterType2Form"),tw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).apply=function(t){setTimeout((function(){var t,n;null===(t=(n=e.props).onSubmit)||void 0===t||t.call(n,e.values())}),1)},e.reset=function(){e.props.reset(),e.setState({shortcut:null}),setTimeout((function(){var t,n;null===(t=(n=e.props).onReset)||void 0===t||t.call(n,e.values())}),1)},e.values=function(){return sx(e.props.values)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.children;j.a.isFunction(e)&&e(this.shareable())}},{key:"shareable",value:function(){return{reset:this.reset,values:this.values}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(Ky,{id:"job_filters_outer_wrapper",children:Object(a.jsx)(Zy,{className:"row m-0",children:Object(a.jsx)(Xy,{className:"col pl-0",children:Object(a.jsx)(py.a,{onReset:this.reset,onSubmit:this.props.handleSubmit(this.apply),children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)($y,{className:"col",children:Object(a.jsx)(yv.a,{name:"term",component:ZO,placeholder:"Search Email...",className:"m-0"})}),Object(a.jsx)($y,{children:Object(a.jsx)(yv.a,{name:"from_date",component:Cy,closeOnSelect:!0,placeholder:"From",onChange:function(){e.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)($y,{children:Object(a.jsx)(yv.a,{name:"to_date",component:Cy,closeOnSelect:!0,placeholder:"To",onChange:function(){e.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)($y,{children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Find"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",children:"Reset"})]})})]})})})})})}}]),n}(h.a.PureComponent),nw=Object(LO.compose)(Object(Gj.a)({form:ew,enableReinitialize:!0}),Object(b.b)((function(e){var t;return{userLocations:e.user.locations,values:null===(t=e.form.JobsFilterType2Form)||void 0===t?void 0:t.values}})))(tw),rw=n(27);function aw(){var e=Object(f.a)(["\n  display: inline-block;\n  cursor: pointer;\n  margin-right: 20px;\n  opacity: ",";\n\n  :hover path,\n  :hover line,\n  :hover rect,\n  :hover circle {\n    stroke: ",";\n  }\n\n  path,\n  line,\n  rect,\n  circle {\n    stroke: ",";\n  }\n"]);return aw=function(){return e},e}function ow(){var e=Object(f.a)(["\n  padding: 20px 30px;\n  position: relative;\n  border-bottom: 1px solid ",";\n"]);return ow=function(){return e},e}var iw=x.default.div(ow(),y.gray2),cw=x.default.div(aw(),(function(e){return e.disabled?.5:1}),(function(e){return e.disabled?y.gray5:y.blue4}),(function(e){return e.color&&e.color})),sw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(iw,{className:this.props.className,children:this.props.children})}}]),n}(p.PureComponent),lw=n(560);function uw(){var e=Object(f.a)(["\n  ","\n  padding: 0.5rem 0;\n"]);return uw=function(){return e},e}function dw(){var e=Object(f.a)(["\n  position: absolute;\n  min-width: 100%;\n  padding: 0;\n  overflow: ",";\n  ",";\n  ","\n"]);return dw=function(){return e},e}var pw=x.default.div(dw(),(function(e){return e.applyOverflow?"hidden":"visible"}),(function(e){return"right"===e.direction?"right: 0px; left: inherit;":""}),(function(e){return e.transparent&&"\n    background: transparent !important;\n    border: 0 !important;\n  "})),hw=x.default.div(uw(),(function(e){return e.applyOverflow?"\n  max-height: 60vh;\n  overflow: auto;\n  ":""})),bw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isExpanded:!1,isTooLong:!1},e.innerHeight=0,e.measureHeight=function(){e.refInner.current&&e.state.isExpanded&&e.refInner.current.clientHeight!==e.innerHeight&&(e.innerHeight=e.refInner.current.clientHeight,e.setState({isTooLong:e.refInner.current.clientHeight>.6*window.innerHeight}))},e.open=function(){e.setState({isExpanded:!0})},e.close=function(){e.setState({isExpanded:!1})},e.toggle=function(){e.state.isExpanded?e.close():e.open()},e.handleClick=function(e){e.stopPropagation()},e.handleClickOutside=function(){e.state.isExpanded&&(e.props.onOutside&&e.props.onOutside(),e.close())},e.refInner=p.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.measureHeight()}},{key:"componentDidUpdate",value:function(){this.measureHeight()}},{key:"render",value:function(){var e=this.state,t=e.isExpanded,n=e.isTooLong,r=this.props,o=r.direction,i=r.transparentDropdown;return Object(a.jsxs)("div",{className:g()("dropdown d-inline-block",this.props.className,{show:t}),onClick:this.handleClick,children:[this.props.trigger({isExpanded:t,open:this.open,close:this.close,toggle:this.toggle}),Object(a.jsx)(pw,{applyOverflow:n,transparent:i,direction:o||"left",className:g()("dropdown-menu",{show:t}),children:Object(a.jsx)(hw,{applyOverflow:n,children:Object(a.jsx)("div",{ref:this.refInner,children:this.props.menu({close:this.close})})})})]})}}]),n}(p.Component),fw=Object(lw.a)(bw);function mw(){var e=Object(f.a)(["\n  &.disabled {\n    color: ",";\n  }\n"]);return mw=function(){return e},e}function jw(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: relative;\n"]);return jw=function(){return e},e}var vw,Ow=x.default.div(jw()),gw=x.default.div(mw(),y.gray2),xw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state.loading,n=this.props,r=n.onClick,o=n.children,i=n.classNames;return Object(a.jsxs)(Ow,{children:[Object(a.jsx)(gw,{className:g()(i,"dropdown-item"),onClick:function(t){r&&(e.setState({loading:!0}),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),r().then((function(){e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})})))},children:o}),t&&Object(a.jsx)(av,{size:20,color:y.white,onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.nativeEvent.preventDefault()}})]})}}]),n}(p.PureComponent),yw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderMenu=function(t){var n=e.props.items;return Object(a.jsx)(a.Fragment,{children:n&&n.map((function(e,n){return"header"===e.type?Object(a.jsx)("div",{className:"dropdown-header",children:e.name},n):"divider"===e.type?Object(a.jsx)("div",{className:"dropdown-divider"},n):Object(a.jsx)(xw,{classNames:g()(e.classNames,{disabled:e.disabled}),onClick:e.disabled?function(){return Promise.resolve()}:function(){var n=e.onClick&&e.onClick()||Promise.resolve(!0);return n.then((function(){e.noClose||t.close()})).catch((function(){t.close()})),n},children:e.name||e.customElements&&e.customElements(t)||""},n)}))})},e.renderTrigger=function(t){var n=e.props,r=n.noMargin,o=n.trigger,i=n.disabled,c=n.tooltipId,s=n.tooltipHint,l={marginRight:r?"0px":"---",opacity:i?.5:1,cursor:i?"unset":"pointer"};return function(e){return Object(a.jsx)(a.Fragment,{children:o?Object(a.jsx)("div",{style:l,"data-tip":s,"data-for":c,onClick:i?void 0:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),e.toggle()},children:o()}):Object(a.jsx)(cw,{style:l,onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),i||e.toggle()},"data-tip":s,"data-for":c,disabled:i,children:Object(a.jsx)(Ff,{name:t})})})}},e.onOutsideClick=function(){var t=e.props.items;t&&t.forEach((function(e){e.onOutsideClick&&e.onOutsideClick()}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.iconName,n=e.direction,r=e.renderInternal,o=e.className,i=e.transparentDropdown;return Object(a.jsx)(fw,{onOutside:this.onOutsideClick,direction:n,className:o,transparentDropdown:i,trigger:this.renderTrigger(void 0!==t?t:Ef.MenuHorizontal),menu:r||this.renderMenu})}}]),n}(p.PureComponent),ww="Steamatic/Modal/Confirm/OPEN",_w="Steamatic/Modal/Confirm/CLOSE",kw=Object(LO.combineReducers)({confirm:Object(LO.combineReducers)({active:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ww:return!0;case _w:return!1;default:return e}},hash:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ww:return t.payload.hash;case _w:return"";default:return e}},title:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ww:return t.payload.title;case _w:return"";default:return e}},body:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ww:return t.payload.body||"";case _w:return"";default:return e}}})}),Sw=function(e,t,n,r){return function(r,a){if(!a().modal.confirm.active){var o=(1e8*Math.random()).toFixed(0);if(r({type:"Steamatic/Modal/".concat(e,"/OPEN"),payload:{hash:o,title:t,body:n}}),"Confirm"===e)return new Promise((function(e){window.addEventListener("modal-confirm-".concat(o),(function(t){window.removeEventListener("modal-confirm-".concat(o),(function(){return!1})),e(t.detail)}))}))}return!1}},Cw=p.createContext({has:function(){return!1}});!function(e){e.TAGS_VIEW="tags.view",e.TAGS_CREATE="tags.create",e.TAGS_UPDATE="tags.update",e.TAGS_DELETE="tags.delete",e.NOTES_VIEW="notes.view",e.NOTES_CREATE="notes.create",e.NOTES_UPDATE="notes.update",e.NOTES_DELETE="notes.delete",e.MANAGEMENT_MATERIALS="management.materials",e.MESSAGES_VIEW="messages.view",e.MESSAGES_MANAGE="messages.manage",e.DOCUMENTS_CREATE="documents.create",e.DOCUMENTS_VIEW="documents.view",e.DOCUMENTS_DOWNLOAD="documents.download",e.DOCUMENTS_DELETE="documents.delete",e.COUNTRIES_VIEW="countries.view",e.STATES_VIEW="states.view",e.SUBURBS_VIEW="suburbs.view",e.SUBURBS_CREATE="suburbs.create",e.SUBURBS_UPDATE="suburbs.update",e.SUBURBS_DELETE="suburbs.delete",e.ADDRESSES_VIEW="addresses.view",e.ADDRESSES_UPDATE="addresses.update",e.CONTACTS_VIEW="contacts.view",e.CONTACTS_UPDATE="contacts.update",e.CONTACTS_CREATE="contacts.create",e.CONTACTS_DELETE="contacts.delete",e.CONTACTS_GROUP_VIEW="contact_groups.view",e.CONTACTS_GROUP_CREATE="contact_groups.create",e.CONTACTS_GROUP_UPDATE="contact_groups.update",e.CONTACTS_GROUP_DELETE="contact_groups.delete",e.CREDIT_NOTES_MANAGE="finance.credit_notes.manage",e.CREDIT_NOTES_MANAGE_LOCKED="finance.credit_notes.manage_locked",e.CREDIT_NOTES_VIEW="finance.credit_notes.view",e.MEETINGS_CREATE="meetings.create",e.MEETINGS_VIEW="meetings.view",e.MEETINGS_DELETE="meetings.delete",e.LOCATIONS_VIEW="locations.view",e.LOCATIONS_CREATE="locations.create",e.LOCATIONS_UPDATE="locations.update",e.LOCATIONS_MODIFY_MEMBERS="locations.modify_members",e.LOCATIONS_MODIFY_SUBURB="locations.modify_suburbs",e.JOBS_TASK_MANAGE="jobs.tasks.manage",e.JOBS_VIEW="jobs.view",e.JOBS_ASSIGN_STAFF="jobs.assign_staff",e.JOBS_MANAGE_INBOX="jobs.manage_inbox",e.JOBS_MANAGE_TAGS="jobs.manage_tags",e.JOBS_UPDATE="jobs.update",e.JOBS_DELETE="jobs.delete",e.JOBS_CREATE="jobs.create",e.JOBS_MANAGE_CONTACTS="jobs.manage_contacts",e.JOBS_MANAGE_NOTES="jobs.manage_notes",e.JOBS_MANAGE_MESSAGES="jobs.manage_messages",e.JOBS_MANAGE_JOBS="jobs.manage_jobs",e.JOBS_MANAGE_RECURRING="jobs.manage_recurring",e.JOBS_USAGE_VIEW="jobs.usage.view",e.JOBS_USAGE_MATERIALS_MANAGE="jobs.usage.materials.manage",e.JOBS_USAGE_MATERIALS_UPDATE="jobs.usage.materials.update",e.JOBS_USAGE_MATERIALS_CREATE="jobs.usage.materials.create",e.JOBS_USAGE_MATERIALS_DELETE="jobs.usage.materials.delete",e.JOBS_AREAS_MANAGE="jobs.areas.manage",e.INVOICES_VIEW="finance.invoices.view",e.INVOICES_MANAGE="finance.invoices.manage",e.INVOICES_MANAGE_LOCKED="finance.invoices.manage_locked",e.OPERATIONS_RUNS_VIEW="operations.runs.view",e.OPERATIONS_RUNS_MANAGE="operations.runs.manage",e.OPERATIONS_RUNS_TEMPLATES_MANAGE="operations.runs_templates.manage",e.OPERATIONS_TASKS_VIEW="operations.tasks.view",e.OPERATIONS_STAFF_VIEW="operations.staff.view",e.OPERATIONS_VEHICLES_VIEW="operations.vehicles.view",e.PURCHASE_ORDERS_VIEW="finance.purchase_orders.view",e.PURCHASE_ORDERS_MANAGE="finance.purchase_orders.manage",e.PURCHASE_ORDERS_MANAGE_LOCKED="finance.purchase_orders.manage_locked",e.PAYMENTS_CREATE="finance.payments.create",e.PAYMENTS_FORWARD="finance.payments.forward",e.PAYMENTS_VIEW="finance.payments.view",e.PAYMENTS_RECEIVE="finance.payments.receive",e.JOBS_USAGE_EQUIPMENT_MANAGE="jobs.usage.equipment.manage",e.JOBS_USAGE_EQUIPMENT_UPDATE="jobs.usage.equipment.update",e.JOBS_USAGE_EQUIPMENT_CREATE="jobs.usage.equipment.create",e.JOBS_USAGE_EQUIPMENT_DELETE="jobs.usage.equipment.delete",e.ASSESSMENT_REPORTS_VIEW="assessment_reports.view",e.ASSESSMENT_REPORTS_MANAGE="assessment_reports.manage",e.ASSESSMENT_REPORTS_APPROVE="assessment_reports.approve",e.ASSESSMENT_REPORTS_MANAGE_CANCELLED="assessment_reports.manage_cancelled",e.JOBS_USAGE_LABOUR_CREATE="jobs.usage.labour.create",e.JOBS_USAGE_LABOUR_UPDATE="jobs.usage.labour.update",e.JOBS_USAGE_LABOUR_DELETE="jobs.usage.labour.delete",e.JOBS_USAGE_LABOUR_MANAGE="jobs.usage.labour.manage",e.ALLOWANCES_TYPES_VIEW="allowances.view",e.ALLOWANCES_TYPES_MANAGE="management.jobs.allowances",e.JOBS_USAGE_ALLOWANCES_MANAGE="jobs.usage.allowances.manage",e.JOBS_USAGE_ALLOWANCES_APPROVE="jobs.usage.allowances.approve",e.FINANCIALS_REPORTS_VIEW="finance.financial.reports.view",e.USERS_VIEW="users.view",e.USERS_CREATE="users.create",e.USERS_UPDATE="users.update",e.USERS_DELETE="users.delete",e.ROLES_VIEW="roles.view",e.ROLES_UPDATE="roles.update",e.ROLES_DELETE="roles.delete",e.ROLES_CREATE="roles.create",e.TEAMS_VIEW="teams.view",e.TEAMS_UPDATE="teams.update",e.TEAMS_DELETE="teams.delete",e.TEAMS_CREATE="teams.create",e.TEAMS_MODIFY_MEMBERS="teams.modify_members",e.JOBS_USAGE_REIMBURSEMENTS_MANAGE="jobs.usage.reimbursements.manage",e.JOBS_USAGE_REIMBURSEMENTS_APPROVE="jobs.usage.reimbursements.approve",e.LAHA_COMPENSATIONS_VIEW="laha.view",e.LAHA_COMPENSATIONS_MANAGE="management.jobs.laha",e.JOBS_USAGE_LAHA_MANAGE="jobs.usage.laha.manage",e.JOBS_USAGE_LAHA_APPROVE="jobs.usage.laha.approve",e.OPERATIONS_STORAGE_VIEW="operations.storage.view",e.OPERATIONS_STORAGE_MANAGE="operations.storage.manage",e.OPERATIONS_INVENTORY_MANAGE="operations.inventory.manage",e.OPERATIONS_INVENTORY_VIEW="operations.inventory.view",e.FORM_OPTIONS_VIEW="form_options.view",e.FORM_OPTIONS_CREATE="form_options.create",e.FORM_OPTIONS_DELETE="form_options.delete",e.FORM_OPTIONS_UPDATE="form_options.update",e.GSCODE_MANAGE="finance.gs_codes.manage",e.GSCODE_VIEW="finance.gs_codes.view"}(vw||(vw={}));var Nw=[vw.USERS_CREATE,vw.USERS_DELETE,vw.USERS_UPDATE,vw.USERS_VIEW],Ew=[vw.LOCATIONS_VIEW,vw.LOCATIONS_CREATE,vw.LOCATIONS_UPDATE,vw.LOCATIONS_MODIFY_MEMBERS,vw.LOCATIONS_MODIFY_SUBURB],Aw=[vw.TAGS_CREATE,vw.TAGS_DELETE,vw.TAGS_VIEW,vw.TAGS_UPDATE],Tw=[vw.CONTACTS_CREATE,vw.CONTACTS_DELETE,vw.CONTACTS_UPDATE,vw.CONTACTS_VIEW],Iw=[vw.FORM_OPTIONS_CREATE,vw.FORM_OPTIONS_DELETE,vw.FORM_OPTIONS_UPDATE,vw.FORM_OPTIONS_VIEW],Rw=[].concat(Nw,Ew,Aw,Iw),Dw=vw,Mw={getJobsInfo:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/info");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},Pw="Steamatic/Jobs/SET_JOBS_INFO",Lw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Pw:return t.payload;default:return e}},Fw=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Mw.getJobsInfo();case 2:return n=e.sent,t({type:Pw,payload:n.data}),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},Uw=n(166);function Vw(){var e=Object(f.a)(["\n"]);return Vw=function(){return e},e}function Bw(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: transparent;\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return Bw=function(){return e},e}function Jw(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return Jw=function(){return e},e}function zw(){var e=Object(f.a)(["\n  cursor: pointer;\n  >*{\n    padding-left: 5px;\n    padding-right: 5px;\n  }\n"]);return zw=function(){return e},e}function qw(){var e=Object(f.a)(["\n"]);return qw=function(){return e},e}var Ww,Hw,Gw,Yw,Qw=x.default.div(qw()),Kw=x.default.div(zw()),Zw=Object(x.default)(Kj(["pinned_at"])(Ff))(Jw(),(function(e){return e.pinned_at?y.blue4:y.black0}),(function(e){return e.pinned_at?y.blue4:"transparent"}),y.blue4),Xw=Object(x.default)(Kj(["snoozed_until"])(Ff))(Bw(),(function(e){return e.snoozed_until?y.orange1:y.black0}),y.orange1),$w=x.default.div(Vw()),e_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showPicker:!1},e.pinJob=function(t){var n=e.props,r=n.job,a=n.pinned_at,o=n.onAction,i=n.stopAction,c=n.fetchJobs;return t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),o(),(a?ly.unpinJob:ly.pinJob)(r.id).then((function(){return i(),c()})).catch(i)},e.snoozeJob=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=e.props,r=n.job,a=n.onAction,o=n.stopAction,i=n.fetchJobs;return a(),ly.snoozeJob(r.id,t).then(Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Uw.delay)(100);case 2:return o(),e.abrupt("return",i());case 4:case"end":return e.stop()}}),e)})))).catch((function(e){o(),Qm(Vm.Danger,e.error_message)}))},e.unSnoozeJob=function(t){var n=e.props,r=n.job,a=n.fetchJobs,o=n.onAction,i=n.stopAction;return t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),o(),ly.unSnoozeJob(r.id).then(Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(Uw.delay)(10);case 2:return i(),e.abrupt("return",a());case 4:case"end":return e.stop()}}),e)})))).catch(i)},e.removeJob=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,o=n.fetchJobs,i=n.onAction,c=n.stopAction,s=n.dispatch,t.next=3,s(Sw("Confirm","Delete Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to permanently delete Job ",Object(a.jsx)("strong",{children:ly.getJobName(r)}),"? This action cannot be undone!"]})));case 3:if(!t.sent){t.next=9;break}return i(),t.abrupt("return",ly.removeJob(r.id).then((function(){return c(),s(Fw()),o()})).catch(c));case 9:return t.abrupt("return",Promise.reject(!0));case 10:case"end":return t.stop()}}),t)}))),e.editJob=function(){var t=e.props,n=t.job,r=t.onAction,a=t.stopAction,o=t.history;null===r||void 0===r||r(),o.push("/job/".concat(n.id,"/details")),null===a||void 0===a||a()},e.markAsUnread=function(){var t=e.props,n=t.job,r=t.fetchJobs,a=t.onAction,o=t.stopAction;return a(),ly.markJobAsUnread(n.id).then((function(){return o(),r()})).catch(o)},e.getRestMenuItems=function(t){var n=[],r=e.props.job;return t.has(Dw.JOBS_MANAGE_MESSAGES)&&!r.has_new_replies&&n.push({name:"Mark as unread",onClick:e.markAsUnread}),t.has(Dw.JOBS_DELETE)&&n.push({name:"Delete",onClick:e.removeJob}),2===n.length&&n.splice(1,0,{type:"divider"}),n},e.handlePickerChange=function(t){return e.setState({showPicker:!1}),e.snoozeJob(t.format(Mj))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.show;t?t!==e.show&&Jf.a.rebuild():this.setState({showPicker:!1})}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.show,i=r.type,c=r.pinned_at,s=r.snoozed_until,l=r.job,u=(null===(e=l.latest_status)||void 0===e?void 0:e.status)===gj.Closed||(null===(t=l.latest_status)||void 0===t?void 0:t.status)===gj.Cancelled,d=ly.isEmailTemplate(l),p="inbox"===i;return Object(a.jsx)(Cw.Consumer,{children:function(e){var t=e.has(Dw.JOBS_MANAGE_INBOX),r="job-list-tooltip-".concat(l.id),i=n.getRestMenuItems(e);return Object(a.jsx)(Qw,{children:Object(a.jsxs)(Kw,{className:"d-flex flex-row justify-content-end",children:[Object(a.jsx)(Jf.a,{multiline:!0,className:"overlapping text-left",id:r,effect:"solid"}),(o&&t&&!u||c)&&Object(a.jsx)("div",{children:Object(a.jsx)(Zw,{name:Ef.Pin,pinned_at:!!c,"data-tip":c?"Unpin job":"Pin job","data-for":r,onClick:t?n.pinJob:void 0})}),!p&&!u&&(o||s)&&(s?Object(a.jsx)("div",{children:Object(a.jsx)(Xw,{name:Ef.Clock,"data-tip":t?"Unsnooze job<br/>Snoozed until:<br/>".concat(qf.a.utc(s).format(Lj)):"Snoozed","data-for":r,onClick:t?n.unSnoozeJob:void 0,snoozed_until:!0})}):t&&!d?Object(a.jsx)($w,{children:Object(a.jsx)(yw,{items:n.snoozeMenuItems,direction:"right",trigger:function(){return Object(a.jsx)(Xw,{name:Ef.Clock,"data-tip":"Snooze job","data-for":r,snoozed_until:!1})}})}):null),o&&d&&t&&Object(a.jsx)("div",{children:Object(a.jsx)(Ff,{name:Ef.Add,size:20,"data-tip":"Create Job","data-for":r,onClick:n.editJob})}),o&&i.length>0&&Object(a.jsx)($w,{children:Object(a.jsx)(yw,{items:i,noMargin:!0,direction:"right",iconName:Ef.MenuVertical})})]})})}})}},{key:"snoozeMenuItems",get:function(){var e=this,t=this.props.job,n=[];n.push({type:"header",name:"Snooze until"}),n.push({name:"Tomorrow",onClick:function(){return e.snoozeJob(qf()(qf()().format("YYYY-M-D")).add(1,"d").format(Mj))}}),n.push({name:"Next week: ".concat(qf()().add(7,"d").format(Lj)),onClick:function(){return e.snoozeJob(qf()(qf()().format("YYYY-M-D")).add(7,"d").format(Mj))}});var r=null===t||void 0===t?void 0:t.next_task;return r&&n.push({name:"Next scheduled task is due: ".concat(qf()(r.due_at).format(Lj)),onClick:function(){return e.snoozeJob(qf.a.utc(r.due_at).startOf("day").format(Mj))}}),n.push({customElements:function(t){return Object(a.jsx)(a.Fragment,{children:e.state.showPicker?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"dropdown-divider"}),Object(a.jsx)(by.a,{input:!1,timeFormat:!1,isValidDate:function(e){var t=qf()();return qf()(e).isAfter(t)},onChange:function(n){e.handlePickerChange(n),t.close()}})]}):Object(a.jsx)("div",{onClick:function(){e.setState({showPicker:!0})},children:"Pick a date"})})},noClose:!0,classNames:"custom"}),n}}]),n}(p.PureComponent),t_=Object(LO.compose)(Object(b.b)(),v.g)(e_);!function(e){e.JOB="job_note",e.FIELD="field_note"}(Ww||(Ww={})),function(e){e.EMAIL="email",e.RA_EMAIL="risk_email",e.SMS="sms"}(Hw||(Hw={})),function(e){e.TO="to",e.CC="cc",e.BCC="bcc"}(Gw||(Gw={})),function(e){e.DRAFT="draft",e.READY="ready_for_delivery",e.FORWARDED="forwarded_for_delivery",e.DELIVERED="delivered",e.FAILED="delivery_failed"}(Yw||(Yw={}));var n_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/documents/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,Aj.postFormData("/v1/documents",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.postFormData("/v1/documents/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/documents/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/notes/".concat(t,"/documents/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),c_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/notes/".concat(t,"/documents/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),s_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/messages/".concat(t,"/documents/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/messages/".concat(t,"/documents/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u_=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.downloadFile("/v1/documents/".concat(t,"/download"));case 2:r=e.sent,d_(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),d_=function(e,t){var n=window.URL.createObjectURL(e),r=document.createElement("a");return document.body.appendChild(r),r.href=n,r.download=t,r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r),n},p_={getDocumentInfo:n_,postDocument:r_,updateDocument:a_,remove:o_,attachDocumentToNote:i_,detachDocumentFromNote:c_,attachDocumentToMessage:s_,detachDocumentFromMessage:l_,downloadDocument:u_};function h_(){var e=Object(f.a)(["\n  margin-right: 2px;\n  path {\n    stroke: ",";\n  }\n"]);return h_=function(){return e},e}function b_(){var e=Object(f.a)(["\n  display: block;\n  position: relative;\n  cursor: pointer;\n  color: ",";\n  &:hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return b_=function(){return e},e}function f_(){var e=Object(f.a)(["\n  font-size: ",";\n  color: ",";\n  margin-left: 5px;\n  cursor: pointer;\n"]);return f_=function(){return e},e}function m_(){var e=Object(f.a)(["\n  display: flex;\n"]);return m_=function(){return e},e}var j_=x.default.div(m_()),v_=x.default.div(f_(),Vf.medium,y.gray4),O_=x.default.span(b_(),y.blue4,y.blue5),g_=Object(x.default)(Kj(["removing"])(Ff))(h_(),(function(e){return e.removing?y.gray4:y.blue4})),x_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={downloading:{}},e.downloadFile=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState((function(e){return e.downloading[n]=!0,e})),t.next=3,p_.downloadDocument(n,r);case 3:e.setState((function(e){return e.downloading[n]=!1,e}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.removeDocument=function(t){e.props.onRemove&&e.props.onRemove(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.documents,r=t.onRemove;return n&&0!==n.length?Object(a.jsx)(a.Fragment,{children:n.map((function(t){return Object(a.jsxs)(j_,{children:[Object(a.jsxs)(O_,{onClick:function(n){n.stopPropagation(),e.downloadFile(t.id,t.file_name)},children:[e.state.downloading[t.id]&&Object(a.jsx)(av,{size:20,color:y.white}),Object(a.jsx)(g_,{name:Ef.Attachment,size:11}),t.file_name]}),r&&Object(a.jsx)(v_,{onClick:function(){return e.removeDocument(t.id)},children:"\xd7"})]},"link-".concat(t.id))}))}):null}}]),n}(p.Component);function y_(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 10px 10px 0 0;\n  border-color: "," transparent transparent transparent;\n  left: 0px;\n  top: 0px;\n"]);return y_=function(){return e},e}function w_(){var e=Object(f.a)(["\n  position: absolute;\n"]);return w_=function(){return e},e}function __(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"]);return __=function(){return e},e}function k_(){var e=Object(f.a)([""]);return k_=function(){return e},e}function S_(){var e=Object(f.a)([""]);return S_=function(){return e},e}function C_(){var e=Object(f.a)([""]);return C_=function(){return e},e}function N_(){var e=Object(f.a)([""]);return N_=function(){return e},e}function E_(){var e=Object(f.a)([""]);return E_=function(){return e},e}function A_(){var e=Object(f.a)(["\n  font-size: ",";\n  color: ","\n"]);return A_=function(){return e},e}function T_(){var e=Object(f.a)([""]);return T_=function(){return e},e}function I_(){var e=Object(f.a)([""]);return I_=function(){return e},e}function R_(){var e=Object(f.a)([""]);return R_=function(){return e},e}function D_(){var e=Object(f.a)(["\n.k-grid .k-hierarchy-cell, .k-grid colgroup>col:first-child{display: none;}\n.k-master-row{cursor: pointer;}\n.k-grid .k-hierarchy-cell + td, .k-grid .k-hierarchy-cell + th {\n  border-left-width: 0;\n}\n"]);return D_=function(){return e},e}var M_=x.default.div(D_()),P_=x.default.div(R_()),L_=x.default.div(I_()),F_=x.default.div(T_()),U_=x.default.div(A_(),Vf.smaller,y.gray4),V_=x.default.div(E_()),B_=x.default.div(N_()),J_=x.default.div(C_()),z_=x.default.div(S_()),q_=x.default.div(k_()),W_=x.default.div(__()),H_=x.default.div(w_()),G_=x.default.div(y_(),y.orange2),Y_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={working:!1,grid:{data:[],sort:[],skip:0,take:0,total:0}},e.onSort=function(t){var n,r;null===(n=(r=e.props.gridState).onSortChange)||void 0===n||n.call(r,t.sort)},e.onPageChange=function(t){var n,r;null===(n=(r=e.props.gridState).onPageChange)||void 0===n||n.call(r,t.page)},e.onCellClick=function(t){return function(){e.onItemClick(t)}},e.onItemClick=function(t){(e.setState({working:!0}),ly.isEmailTemplate(t))?(t.expanded=!t.expanded,e.setState({working:!1})):(e.props.history.push("/job/".concat(t.id,"/details")),e.setState({working:!1}))},e.JobNo=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{className:"position-relative",onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsxs)(a.Fragment,{children:[ly.shouldHighlight(t)&&Object(a.jsx)(G_,{}),Object(a.jsx)(P_,{children:t.job_number||ly.getJobName(t)})]})}}))},e.Customer=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n,r=e.data,o=null===(t=r.customer_contact)||void 0===t?void 0:t.contact_name,i=null===(n=r.site_address)||void 0===n?void 0:n.full_address;return Object(a.jsxs)(L_,{children:[Object(a.jsx)(F_,{children:o||""}),o&&i?Object(a.jsx)(U_,{children:i}):null]})}}))},e.Insurer=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n,r,o,i=e.data,c=null===(t=i.insurer)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.legal_name;return Object(a.jsxs)(V_,{children:[Object(a.jsx)(B_,{children:c||""}),c&&(null===(r=i.insurer)||void 0===r?void 0:r.address)?Object(a.jsx)(U_,{children:null===(o=i.insurer)||void 0===o?void 0:o.address}):null]})}}))},e.InvoiceTo=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n,r,o=e.data,i=null===(t=o.invoice_to_contact)||void 0===t?void 0:t.contact_name,c=null===(n=o.invoice_to_contact)||void 0===n||null===(r=n.contact_address)||void 0===r?void 0:r.full_address;return Object(a.jsxs)(V_,{children:[Object(a.jsx)(B_,{children:i||""}),i&&c?Object(a.jsx)(U_,{children:c}):null]})}}))},e.Service=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n=e.data;return Object(a.jsx)(J_,{children:null===(t=n.service)||void 0===t?void 0:t.name})}}))},e.Status=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n=e.data;return Object(a.jsx)(z_,{children:null===(t=n.latest_status)||void 0===t?void 0:t.status})}}))},e.DateAdded=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsx)(q_,{children:qf()(t.created_at).format(Pj)})}}))},e.Actions=function(t){return Object(a.jsx)(K_,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data,r=e.props,o=r.type,i=r.fetchJobs;return Object(a.jsx)(W_,{children:Object(a.jsx)(H_,{children:Object(a.jsx)(t_,{pinned_at:n.pinned_at,snoozed_until:n.snoozed_until,job:n,type:o||"",fetchJobs:i,onAction:function(){e.setState({working:!0})},stopAction:function(){e.setState({working:!1})},show:!0})})})}}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(M_,{children:[this.state.working&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.props.gridState),{},{scrollable:"none",onPageChange:this.onPageChange,onSortChange:this.onSort,detail:Q_,expandField:"expanded",onExpandChange:function(){},children:[Object(a.jsx)(rw.b,{field:"id",title:"Job No.",width:"120px",cell:this.JobNo}),Object(a.jsx)(rw.b,{field:"customer_name",title:"Customer, Site Address",width:"250px",cell:this.Customer}),Object(a.jsx)(rw.b,{field:"invoice_to_contact_name",title:"Invoice To",cell:this.InvoiceTo}),Object(a.jsx)(rw.b,{field:"service",title:"Service",width:"100px",cell:this.Service}),Object(a.jsx)(rw.b,{field:"job_status",title:"Status",width:"100px",cell:this.Status}),Object(a.jsx)(rw.b,{field:"created_at",title:"Date Added",width:"130px",cell:this.DateAdded}),Object(a.jsx)(rw.b,{width:"110px",cell:this.Actions,sortable:!1})]}))]})}}]),n}(h.a.Component),Q_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,data:e.props.dataItem},e.componentDidMount=function(){e.state.data.messages||e.loadDetails()},e.loadDetails=function(){e.setState({loading:!0}),ly.getMessages(e.state.data.id,Hw.EMAIL).then((function(t){e.state.data.messages=t.data,e.setState(Object(c.a)({},e.state)),e.firstEmail(t.data)&&ly.markJobAsRead(e.state.data.id)}))},e.firstEmail=function(e){var t,n;return null===(n=e=null===(t=e)||void 0===t?void 0:t.filter((function(e){return e.message_type===Hw.EMAIL})))||void 0===n?void 0:n[0]},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.data.messages;if(null===e||void 0===e?void 0:e.length){var t,n=this.firstEmail(e);return Object(a.jsxs)("div",{className:"p-3",children:[Object(a.jsxs)("div",{className:"mb-3 d-flex justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"From:"})," ",n.from_name&&Object(a.jsx)("span",{className:"mr-1",children:n.from_name})," ",n.from_name&&Object(a.jsx)(a.Fragment,{children:"<"}),n.from_address,n.from_name&&Object(a.jsx)(a.Fragment,{children:">"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Date:"})," ",qf()(n.created_at).format(Uj)]})]}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("strong",{children:["Subject: ",n.subject]})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:$f(n.message_body||"")}}),!!(null===(t=n.documents)||void 0===t?void 0:t.length)&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(x_,{documents:n.documents})})]})]})}return this.state.loading?Object(a.jsxs)("div",{className:"position-relative",children:[Object(a.jsx)(av,{size:40,color:y.white}),"Loading..."]}):Object(a.jsx)(a.Fragment,{children:"No messages found"})}}]),n}(rw.c);function K_(e){var t=e.Component,n=e.dataItem,r=e.field,o=e.cellProps;return Object(a.jsx)("td",Object(c.a)(Object(c.a)({},o),{},{children:Object(a.jsx)(t,{data:n,value:r?j.a.get(n,r):void 0})}))}var Z_=Object(v.g)(Y_),X_=n(50),$_=n.n(X_);function ek(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n"]);return ek=function(){return e},e}function tk(){var e=Object(f.a)(["\n  margin-top: 5px;\n  color: ",";\n"]);return tk=function(){return e},e}function nk(){var e=Object(f.a)(["\n  width: 100%;\n  height: 50px;\n  position: absolute;\n  top: 10px;\n  background: linear-gradient(to top, ",", transparent);\n"]);return nk=function(){return e},e}function rk(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 10px 10px 0 0;\n  border-color: "," transparent transparent transparent;\n  left: 0px;\n  top: 0px;\n"]);return rk=function(){return e},e}function ak(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  // flex: 1;\n  visibility: ",";\n"]);return ak=function(){return e},e}function ok(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  // flex: 1;\n"]);return ok=function(){return e},e}function ik(){var e=Object(f.a)(["\n  padding-left: 20px;\n  // flex: 1;\n"]);return ik=function(){return e},e}function ck(){var e=Object(f.a)(["\n  color: ",";\n  hyphens: auto;\n  position: relative;\n  max-height: 60px;\n  overflow: hidden;\n"]);return ck=function(){return e},e}function sk(){var e=Object(f.a)(["\n  width: 40%;\n  padding-left: 20px;\n"]);return sk=function(){return e},e}function lk(){var e=Object(f.a)(["\n  color: ",";\n"]);return lk=function(){return e},e}function uk(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n"]);return uk=function(){return e},e}function dk(){var e=Object(f.a)(["\n  width: 25%;\n  hyphens: auto;\n"]);return dk=function(){return e},e}function pk(){var e=Object(f.a)(["\n  color: #4d4f52;\n  font-size: 1.5rem;\n  margin-right: 10px; \n"]);return pk=function(){return e},e}function hk(){var e=Object(f.a)(["\n  max-height: 250px;\n  padding: 15px 10px 15px 26px;\n"]);return hk=function(){return e},e}function bk(){var e=Object(f.a)(["\n  position: relative;\n  border: 1px solid ",";\n  margin-top: -1px;\n  text-decorate: none;\n  background: ",";\n\n  :hover {\n    background: ",";\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  & *:hover {\n    text-decoration: none;\n  }\n"]);return bk=function(){return e},e}var fk=x.default.div(bk(),y.gray2,y.white,(function(e){return!e.loading&&y.gray0})),mk=x.default.div(hk()),jk=x.default.div(pk()),vk=x.default.div(dk()),Ok=x.default.div(uk(),y.black1,Bf.medium),gk=x.default.div(lk(),y.gray5),xk=x.default.div(sk()),yk=x.default.div(ck(),y.gray3),wk=x.default.div(ik()),_k=x.default.div(ok(),y.black1),kk=Object(x.default)(Kj(["visibility"])("div"))(ak(),y.black1,(function(e){return e.visibility?"visible":"hidden"})),Sk=x.default.div(rk(),y.orange2),Ck=Object(x.default)(Kj(["hover"])("div"))(nk(),(function(e){return e.hover?y.gray0:"white"})),Nk=x.default.div(tk(),y.orange2),Ek=x.default.div(ek(),y.gray2),Ak=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,loading:!1,expanded:!1},e.onMouseEnter=function(){e.state.loading||e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e.onClick=function(){var t=e.props,n=t.job,r=t.history;ly.isEmailTemplate(n)?(e.setState({expanded:!e.state.expanded}),e.inquiryEmails||e.loadInquiryEmails(!0)):r.push("/job/".concat(n.id,"/details"))},e.inquiryEmails=void 0,e.loadInquiryEmails=function(t){var n=e.props.job;t&&n.messages&&(n.messages.forEach((function(e){e.pivot&&(e.pivot.read_at=new Date)})),n.has_new_replies=!1),e.setState({loading:!0}),ly.getMessages(n.id,Hw.EMAIL).then((function(r){e.inquiryEmails=r.data,t&&ly.markJobAsRead(n.id),e.setState({loading:!1})}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r,o=this,i=this.props,c=i.job,s=i.type,l=i.fetchJobs,u=this.state,d=u.hover,p=u.loading,h=ly.isEmailTemplate(c),b=null===(e=c.messages)||void 0===e?void 0:e[0],f=this.state.expanded;return Object(a.jsxs)(fk,{children:[Object(a.jsxs)(mk,{className:"d-flex flex-row h-print",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,loading:p,children:[ly.shouldHighlight(c)&&Object(a.jsx)(Sk,{}),Object(a.jsx)(jk,{children:h?(null===b||void 0===b||null===(t=b.pivot)||void 0===t?void 0:t.read_at)?Object(a.jsx)("span",{className:"fa fa-envelope-open"}):Object(a.jsx)("span",{className:"fa fa-envelope"}):Object(a.jsx)("span",{className:"fa fa-tasks"})}),Object(a.jsx)(vk,{className:"d-flex flex-column flex-grow-1",children:h?b?(r=b,r.from_name&&r.from_address?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ok,{children:r.from_name}),Object(a.jsx)(gk,{children:r.from_address})]}):Object(a.jsx)(gk,{children:r.from_address})):Object(a.jsx)(gk,{children:"Message Sender Not Set"}):Object(a.jsxs)(a.Fragment,{children:[c.site_contact_name?Object(a.jsx)(Ok,{children:c.site_contact_name}):Object(a.jsx)(gk,{children:"Site Contact Not Set"}),Object(a.jsx)(gk,{children:(null===c||void 0===c||null===(n=c.site_address)||void 0===n?void 0:n.full_address)||"--"})]})}),Object(a.jsxs)(xk,{className:"flex-grow-1",children:[Object(a.jsxs)(yk,{className:"h-print",children:[this.latestMessage?!f&&Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:this.latestMessage}}):Object(a.jsx)("div",{children:c.description}),Object(a.jsx)(Ck,{hover:d||f,className:"print-hide"})]}),c.snoozed_until&&"inbox"!==s&&Object(a.jsxs)(Nk,{children:["Snoozed until ",qf()(c.snoozed_until).format("D MMMM YYYY")]})]}),Object(a.jsx)(wk,{children:ly.getJobName(c)}),Object(a.jsx)(_k,{className:"d-flex flex-column",children:Object(a.jsx)("div",{children:c.latest_status.status})}),Object(a.jsx)(kk,{visibility:!d||f,children:Object(a.jsx)($_.a,{fromNow:!0,children:c.touched_at})}),Object(a.jsx)(t_,{pinned_at:c.pinned_at,snoozed_until:c.snoozed_until,job:c,type:s,fetchJobs:l,onAction:function(){o.itemLoading=!0},stopAction:function(){o.itemLoading=!1},show:d||f}),p&&Object(a.jsx)(av,{size:30,color:y.gray0})]}),f&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ek,{}),Object(a.jsx)("div",{className:"px-5 py-3",children:this.inquiryEmails?this.inquiryEmails.length?function(){var e,t=o.inquiryEmails[0];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"mb-3 d-flex justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"From:"})," ",t.from_name&&Object(a.jsx)("span",{className:"mr-1",children:t.from_name})," ",t.from_name&&Object(a.jsx)(a.Fragment,{children:"<"}),t.from_address,t.from_name&&Object(a.jsx)(a.Fragment,{children:">"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Date:"})," ",qf()(t.created_at).format(Uj)]})]}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("strong",{children:["Subject: ",t.subject]})}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:$f(t.message_body||"")}}),!!(null===(e=t.documents)||void 0===e?void 0:e.length)&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(x_,{documents:t.documents})})]})}():"No email found":p&&Object(a.jsx)(av,{size:30,color:y.gray0})})]})]})}},{key:"itemLoading",set:function(e){this.setState({loading:e})}},{key:"latestMessage",get:function(){var e=this.props.job.last_message;return e?em($f(e,!0)):null}}]),n}(p.PureComponent),Tk=Object(v.g)(Ak);function Ik(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n  margin-bottom: 10px;\n  :not(:first-child){\n    margin-top: 50px;\n  }\n"]);return Ik=function(){return e},e}function Rk(){var e=Object(f.a)(["\n  overflow-y: auto;\n  height: 100%;\n\n  > div {\n    padding: 0 35px;\n  }\n\n  .grid-wrapper{overflow: auto;}\n\n  > div > div:first-child {\n    margin-top: 0px;\n  }\n"]);return Rk=function(){return e},e}function Dk(){var e=Object(f.a)(["\n  overflow: hidden;\n  position: relative;\n"]);return Dk=function(){return e},e}var Mk=x.default.div(Dk()),Pk=x.default.div(Rk()),Lk=x.default.div(Ik(),y.gray4,Bf.medium),Fk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).defaultSort={jobs:{sorting_option:"created_at",sortby:"desc"},snoozedJobs:{sorting_option:"created_at",sortby:"desc"}},e.currentSort=j.a.cloneDeep(e.defaultSort),e.defaultFilter={jobs:{},snoozedJobs:{}},e.currentFilter=j.a.cloneDeep(e.defaultFilter),e.defaultPager={jobs:{},snoozedJobs:{}},e.currentPager=j.a.cloneDeep(e.defaultPager),e.data={jobs:[],snoozedJobs:[]},e.jobCreatedEventHandler=function(){e.fetchJobs()},e.fetchJobs=function(t,n){var r=e.props,a=r.jobs,o=r.snoozedJobs;if((a.loading||o.loading)&&!n)return Promise.reject();var i=e.props.match.params.type,c=[];return e.data={jobs:[],snoozedJobs:[]},e.currentPager=j.a.cloneDeep(e.defaultPager),e.currentSort=j.a.cloneDeep(e.defaultSort),c.push(e.fetchUnsnoozedJobs(t)),e.filterable.includes(i)&&c.push(e.fetchSnoozedJobs(t)),Promise.all(c)},e.fetchUnsnoozedJobs=function(t){return e.fetchJobsByType("jobs",t)},e.fetchSnoozedJobs=function(t){return e.fetchJobsByType("snoozedJobs",t)},e.fetchJobsByType=function(t,n){var r=e.props.match.params,a=r.type,o=r.teamId,i="team"===a?{teamId:o}:null,s="closed"===a?{include_closed:1}:null,l=e.filterable.concat(e.filterableType2).includes(a)?Object(c.a)(Object(c.a)({},e.currentSort[t]),e.currentFilter[t]):null,u=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},e.currentPager[t]),l),s),i),n);return e.props[t].fetch(a,u).then((function(n){return e.filterable.includes(a)?e.data[t]=n.data:e.data[t]=[].concat(Object(Dm.a)(e.data[t]),Object(Dm.a)(n.data)),e.forceUpdate(),n}))},e.loadMore=function(t){return function(){e.fetchJobsByType(t,{current_page:++e.currentPager[t].current_page,per_page:e.currentPager[t].per_page})}},e.applyFilters=function(t){e.currentFilter.jobs=Object(c.a)({},t),e.currentFilter.snoozedJobs=Object(c.a)({},t),e.fetchJobs()},e.pageWrapper=p.createRef(),e.filterWrapper=p.createRef(),e.gridWrapper=p.createRef(),e.setUIPositions=function(){if(e.pageWrapper.current&&e.gridWrapper.current){var t,n=e.pageWrapper.current.clientHeight,r=(null===(t=e.filterWrapper.current)||void 0===t?void 0:t.clientHeight)||0;e.gridWrapper.current.style.height=n-r-2+"px"}},e.filterable=["mine","closed","all"],e.filterableType2=["inbox"],e.jobsCondition=function(e,t){var n=qf()().startOf("day"),r=qf()().startOf("month"),a=qf()(t.touched_at).unix();switch(e){case"today":return a>n.unix()||!!t.pinned_at;case"yesterday":return a>n.subtract(1,"day").unix()&&a<n.unix()&&!t.pinned_at;case"thisWeek":return a>qf()().startOf("week").unix()&&!t.pinned_at;case"thisMonth":return a>r.unix()&&!t.pinned_at;case"earlier":return a<r.unix()&&a<=qf()().startOf("week").unix()&&!t.pinned_at;default:return!0}},e.getTodayJobs=function(t){return t.filter((function(t){return e.jobsCondition("today",t)}))},e.getThisWeekJobs=function(t){return t.filter((function(t){return e.jobsCondition("thisWeek",t)&&!e.jobsCondition("today",t)}))},e.getThisMonthJobs=function(t){return t.filter((function(t){return e.jobsCondition("thisMonth",t)&&!e.jobsCondition("thisWeek",t)&&!e.jobsCondition("today",t)}))},e.getEarlierJobs=function(t){return t.filter((function(t){return e.jobsCondition("earlier",t)}))},e.getJobsWithoutSnoozed=function(e){return e.filter((function(e){return!e.snoozed_until}))},e.getSnoozedJobs=function(e){return e.filter((function(e){return e.snoozed_until}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n;this.defaultPager={jobs:(null===(e=this.props.jobs.initialData)||void 0===e?void 0:e.pagination)||{per_page:10,current_page:1},snoozedJobs:(null===(t=this.props.snoozedJobs.initialData)||void 0===t?void 0:t.pagination)||(null===(n=this.props.jobs.initialData)||void 0===n?void 0:n.pagination)||{per_page:10,current_page:1}},this.currentPager=j.a.cloneDeep(this.defaultPager),this.fetchJobs(),this.setUIPositions(),uy.listen($g.JOB_CREATED,this.jobCreatedEventHandler),window.addEventListener("resize",this.setUIPositions)}},{key:"componentDidUpdate",value:function(e){var t,n,r,a,o=this.props.match.params,i=o.type,c=o.teamId;i!==e.match.params.type&&(this.currentPager=j.a.cloneDeep(this.defaultPager),this.currentSort=j.a.cloneDeep(this.defaultSort),(this.filterable.includes(i)&&!this.filterable.includes(e.match.params.type)||this.filterableType2.includes(i)&&!this.filterableType2.includes(e.match.params.type))&&(this.currentFilter=j.a.cloneDeep(this.defaultFilter))),i===e.match.params.type&&c===e.match.params.teamId&&(null===(t=this.props.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.applied)===(null===(r=e.location)||void 0===r||null===(a=r.state)||void 0===a?void 0:a.applied)||this.fetchJobs(void 0,!0).then((function(e){return e})),i!==e.match.params.type&&this.setUIPositions()}},{key:"componentWillUnmount",value:function(){uy.removeListener($g.JOB_CREATED,this.jobCreatedEventHandler),window.removeEventListener("resize",this.setUIPositions)}},{key:"getGridState",value:function(e){var t=this,n=this.props[e].data;return(null===n||void 0===n?void 0:n.data)&&(null===n||void 0===n?void 0:n.pagination)?{data:this.data[e],sortable:{allowUnsort:!1},sort:[{field:this.currentSort[e].sorting_option,dir:this.currentSort[e].sortby}],pageable:{pageSizes:[5,10,20,25,50]},take:+(null===n||void 0===n?void 0:n.pagination.per_page),skip:(((null===n||void 0===n?void 0:n.pagination.current_page)||1)-1)*((null===n||void 0===n?void 0:n.pagination.per_page)||0),total:null===n||void 0===n?void 0:n.pagination.total_items,onPageChange:function(n){t.currentPager[e]={per_page:n.take,current_page:n.skip/n.take+1},t.fetchJobsByType(e)},onSortChange:function(n){t.currentSort[e]=n.length?{sorting_option:n[0].field,sortby:n[0].dir}:null,t.fetchJobsByType(e)}}:{data:this.data[e]}}},{key:"renderJobsGroup",value:function(e,t){var n=this,r=this.props.match.params.type;return 0===e.length?null:Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsx)(Lk,{children:t}),e.map((function(e){return Object(a.jsx)(Tk,{job:e,type:r,fetchJobs:n.fetchJobs},[e.claim_number,e.id].join("--"))}))]})}},{key:"render",value:function(){var e,t=this,n=this.props.match.params.type,r=this.props.jobs.loading||this.props.snoozedJobs.loading;return Object(a.jsx)(Mk,{className:"flex-grow-1 h-100 py-3",children:Object(a.jsxs)(Pk,{className:"h-100",ref:this.pageWrapper,children:[(this.filterable.includes(n)||this.filterableType2.includes(n))&&Object(a.jsx)("div",{className:"filters-wrapper",ref:this.filterWrapper,children:Object(a.jsx)("div",{className:"py-4 print-hide",children:this.filterableType2.includes(n)?Object(a.jsx)(nw,{initialValues:this.defaultFilter,onSubmit:this.applyFilters,onReset:this.applyFilters}):Object(a.jsx)(zy,{initialValues:this.defaultFilter,onSubmit:this.applyFilters,onReset:this.applyFilters})})}),r&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"grid-wrapper h-print",ref:this.gridWrapper,children:this.filterable.includes(n)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Z_,{gridState:this.getGridState("jobs"),type:n,fetchJobs:this.fetchJobs}),!!this.data.snoozedJobs.length&&Object(a.jsxs)("div",{className:"mb-3 mt-5",children:[Object(a.jsx)(Lk,{children:"Snoozed"}),Object(a.jsx)(Z_,{gridState:this.getGridState("snoozedJobs"),type:n,fetchJobs:this.fetchJobs})]})]}):(e=this.getGridState("jobs")||{},Object(a.jsxs)(a.Fragment,{children:["inbox"===n?Object(a.jsxs)("div",{className:"py-3",children:[t.renderJobsGroup(t.getTodayJobs(t.data.jobs),"Today"),t.renderJobsGroup(t.getThisWeekJobs(t.data.jobs),"This week"),t.renderJobsGroup(t.getThisMonthJobs(t.data.jobs),"This month"),t.renderJobsGroup(t.getEarlierJobs(t.data.jobs),"Earlier")]}):Object(a.jsxs)("div",{className:"py-3",children:[t.renderJobsGroup(t.getJobsWithoutSnoozed(t.data.jobs)),t.renderJobsGroup(t.getSnoozedJobs(t.data.jobs),"Snoozed")]}),!!t.data.jobs.length&&t.data.jobs.length<e.total&&Object(a.jsx)("div",{className:"text-center py-3 print-hide",children:Object(a.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:t.loadMore("jobs"),children:"Load More"})})]}))})]})})}}]),n}(p.PureComponent),Uk=Object(LO.compose)(Mm({jobs:{fetch:function(e,t){switch(e){case"noContact":return ly.getNoContactJobs(t);case"upcomingKPI":return ly.getUpcomingKPIJobs(t);case"inbox":return ly.getInboxJobs(t);case"team":var n=t.teamId,r=Object(Rm.a)(t,["teamId"]);return ly.getTeamJobs(n,r)}return ly.filterJobs(Object(c.a)({include_snoozed:0,type:"all"===e?"active":e},t))},initialData:{data:[],pagination:{current_page:1,per_page:10,total_items:0}}},snoozedJobs:{fetch:function(e,t){return ly.filterJobs(Object(c.a)({include_snoozed:1,snoozed_only:1,type:"all"===e?"active":e},t))}}}),v.g)(Fk);function Vk(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  padding: 7px 26px;\n  color: ",";\n  margin-top: 20px;\n"]);return Vk=function(){return e},e}var Bk=x.default.div(Vk(),y.gray4);var Jk=function(e){var t=e.children;return Object(p.useContext)(_).isOpen&&Object(a.jsx)(Bk,{children:t})||null};function zk(){var e=Object(f.a)(["\n  margin-right: 26px;\n  cursor: pointer;\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return zk=function(){return e},e}var qk=x.default.div(zk(),y.blue4),Wk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.onClick,r=e.size,o=e["data-tip"],i=e["data-for"];return Object(a.jsx)(qk,{onClick:n,"data-for":i,"data-tip":o,children:Object(a.jsx)(Ff,{name:t,size:r})})}}]),n}(p.PureComponent);function Hk(){var e=Object(f.a)(["\n  background: ",";\n  padding: 0px 26px;\n  margin-top: 2rem;\n  //overflow: hidden;\n  min-height: 50px;\n  path,\n  circle {\n    stroke: ",";\n  }\n"]);return Hk=function(){return e},e}var Gk=x.default.div(Hk(),y.gray2,y.black0),Yk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).refreshJobsInfo=function(){e.props.dispatch(Fw())},e.createNewJob=function(){e.props.history.push("/job/new/details")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(Fw()),um.status("Jobs")}},{key:"componentWillUnmount",value:function(){um.reset()}},{key:"getJobsMenuMainItems",value:function(){var e=this;return[{path:"/jobs/inbox",label:"Inbox",value:0,icon:Ef.DrawerOpen,isActive:this.isActive("/jobs/inbox"),type:"inbox"},{path:"/jobs/mine",label:"Mine",value:0,icon:Ef.Hand,isActive:this.isActive("/jobs/mine"),type:"mine"},{path:"/jobs/all",label:"All active jobs",value:0,icon:Ef.ManCircle,isActive:this.isActive("/jobs/all"),type:"active"},{path:"/jobs/closed",label:"Closed",value:0,icon:Ef.Archive,isActive:this.isActive("/jobs/closed"),type:"closed"}].map((function(t){return t.value=e.props.jobsInfo[t.type],Object.assign({},t)}))}},{key:"getJobsMenuTeamsItems",value:function(){var e=this;return this.props.jobsInfo.teams.map((function(t){return{path:"/jobs/team/".concat(t.id),label:t.name,value:t.jobs_count,icon:Ef.People,isActive:e.isActive("/jobs/team/".concat(t.id)),type:"team"}}))}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getJobsSecondMenuItems",value:function(){return[{path:"/jobs/noContact",label:"No contact 24 hours",value:this.props.jobsInfo.no_contact_24_hours,isActive:this.isActive("/jobs/noContact"),type:"no_contact_24_hours"},{path:"/jobs/upcomingKPI",label:"Upcoming KPI",value:this.props.jobsInfo.upcoming_kpi,isActive:this.isActive("/jobs/upcomingKPI"),type:"upcoming_kpi"}]}},{key:"getMenuTemplate",value:function(e){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right",id:"jobs-sidebar-tooltip"}),this.getJobsMenuMainItems().map((function(e){return Object(a.jsx)(ym,{item:e,title:"Jobs - ".concat(e.label),refresh:t.refreshJobsInfo},e.path)})),this.props.jobsInfo.teams.length?Object(a.jsx)(Jk,{children:"Teams"}):"",this.getJobsMenuTeamsItems().map((function(e){return Object(a.jsx)(ym,{item:e,title:"Jobs - ".concat(e.label),refresh:t.refreshJobsInfo},e.path)})),Object(a.jsx)(Jk,{children:"Folders"}),this.getJobsSecondMenuItems().map((function(e){return Object(a.jsx)(ym,{item:e,title:"Jobs - ".concat(e.label),refresh:t.refreshJobsInfo},e.path)})),Object(a.jsx)(Gk,{className:"d-flex flex-row align-items-center",children:e.has(Dw.JOBS_CREATE)&&Object(a.jsx)(Wk,{name:Ef.Add,"data-tip":"Create new job","data-for":"jobs-sidebar-tooltip",onClick:this.createNewJob})})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.jobsInfo;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(Im,{children:r?e.getMenuTemplate(t):Object(a.jsx)(av,{size:40})}),Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.url,"/:type/:teamId?"),component:Uk}),Object(a.jsx)(v.a,{to:"".concat(n.url,"/inbox")})]})]})}})}}]),n}(p.PureComponent),Qk=Object(LO.compose)(Object(b.b)((function(e){return{jobsInfo:e.jobsInfo}})),v.g)(Yk);function Kk(){var e=Object(f.a)(["\n  line-height: 0;\n  padding: 13px 26px;\n  background: ",";\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: transparent;\n  }\n  :hover path,\n  :hover circle,\n  :hover line {\n    stroke: ",";\n  }\n"]);return Kk=function(){return e},e}function Zk(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n  width: 72px;\n  position: relative;\n"]);return Zk=function(){return e},e}var Xk=x.default.nav(Zk(),y.gray1),$k=Object(x.default)(Uf.b)(Kk(),(function(e){return e.isActive?y.gray2:"transparent"}),(function(e){return e.isActive?y.blue4:y.black0}),y.blue4),eS=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setTitle()}},{key:"componentDidUpdate",value:function(){this.setTitle()}},{key:"setTitle",value:function(){var e=this.props.items.find((function(e){return e.isActive}));e&&void 0!==e.title&&um.status(e.title)}},{key:"render",value:function(){return Object(a.jsxs)(Xk,{className:"flex-shrink-0",children:[this.props.items.length>0&&Object(a.jsx)(Jf.a,{className:"overlapping",id:"sidebar-menu-tooltip",place:"right",effect:"solid"}),this.props.items.map((function(e){return Object(a.jsx)($k,{to:e.path,className:"nav-link",isActive:e.isActive,"data-for":"sidebar-menu-tooltip","data-tip":e.hint||"",children:Object(a.jsx)(Ff,{name:e.icon})},e.path)})),this.props.children]})}}]),n}(p.PureComponent);function tS(e){var t=e.customReducers||{},n=t.data||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.loadComplete:return n.payload;case e.reset:return null;default:return t}},r=t.loading||function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.load:return!0;case e.loadComplete:case e.error:case e.reset:return!1;default:return t}},a=t.ready||function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.loadComplete:return!0;case e.reset:return!1;default:return t}},o=t.error||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.error:return n.payload;case e.loadComplete:case e.reset:return null;default:return t}};return Object(LO.combineReducers)({data:n,loading:r,ready:a,error:o})}function nS(e){return{reset:function(){return{type:e.reset}},load:function(){return{type:e.load}},loadComplete:function(t){return{type:e.loadComplete,payload:t}},error:function(t){return{type:e.error,payload:t}}}}function rS(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null},r=function(e){return[].concat(Object(Dm.a)(t),[e])},a=function(e){return[].concat(Object(Dm.a)(t),[e])},o=function(e){return t.filter((function(t){return e!==t}))},i=function(e){return t.filter((function(t){return!aS(e,t)}))},c=function(e){return!!t.includes(e)},s=function(e){return t.filter((function(t){return aS(e,t)}))};switch(n.type){case e.toggle:return c(n.payload)?o(n.payload):r(n.payload);case e.toggleEntity:return s(n.payload).length?i(n.payload):a(n.payload);case e.massSelect:return Object(Dm.a)(n.payload);case e.resetSelected:return[];default:return t}}}function aS(e,t){var n,r=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(t);if(r.length!==a.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(e[o]!==t[o])return!1}return!0}function oS(e){return{toggleEntity:function(t){return{type:e.toggleEntity,payload:t}},toggle:function(t){return{type:e.toggle,payload:t}},massSelect:function(t){return{type:e.massSelect,payload:t}},resetSelected:function(){return{type:e.resetSelected}}}}function iS(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(){var o=Object(Um.a)(Fm.a.mark((function o(i){var c;return Fm.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i({type:e,payload:a}),o.prev=1,o.next=4,r();case 4:return c=o.sent,i({type:t,payload:c}),o.abrupt("return",c);case 9:throw o.prev=9,o.t0=o.catch(1),i({type:n,payload:o.t0}),o.t0;case 13:case"end":return o.stop()}}),o,null,[[1,9]])})));return function(e){return o.apply(this,arguments)}}()}var cS="Steamatic/Contact/LOAD_LIST",sS="Steamatic/Contact/LOAD_LIST_COMPLETE",lS="Steamatic/Contact/RESET",uS="Steamatic/Contact/ERROR",dS="Steamatic/Contact/UPDATE_CONTACT",pS="Steamatic/Contact/ADD_CONTACT",hS="Steamatic/Contact/REMOVE_CONTACT",bS=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case sS:return t.payload;case lS:return null;case dS:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.contactId?Object(c.a)(Object(c.a)({},e),t.payload.data):e}))}):null;case hS:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.contactId}))}):null;case pS:return e?Object(c.a)(Object(c.a)({},e),{},{data:[t.payload.contact].concat(Object(Dm.a)(e.data))}):null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case uS:return t.payload;case sS:case lS:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case cS:return!0;case sS:case lS:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case sS:return!0;case lS:return!1;default:return e}}}),fS=function(e){return iS(cS,sS,uS,(function(){return Jv.getContacts(e)}))},mS=function(e,t){return{type:dS,payload:{contactId:e,data:t}}},jS=function(e){return{type:pS,payload:{contact:e}}},vS=function(e){return{type:hS,payload:{contactId:e}}};function OS(){var e=Object(f.a)(["\n  animation: spin 0.8s infinite linear;\n  height: ","px;\n  width: ","px;\n  vertical-align: top;\n  box-sizing: border-box;\n  border-radius: 50%;\n  border: 2px solid ",";\n  border-right-color: ",";\n  display: inline-block;\n\n  @keyframes spin {\n    to {\n      transform: rotate(1turn);\n    }\n  }\n"]);return OS=function(){return e},e}var gS=Object(x.default)(Kj(["size"])("div"))(OS(),(function(e){return e.size}),(function(e){return e.size}),y.gray2,y.gray5);function xS(){var e=Object(f.a)(["\n  input {\n    background: ",";\n    border: ",";\n    padding-left: ",";\n  }\n"]);return xS=function(){return e},e}function yS(){var e=Object(f.a)(["\n  position: absolute;\n  left: 12px;\n  top: 8px;\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n"]);return yS=function(){return e},e}function wS(){var e=Object(f.a)(["\n  position: absolute;\n  right: 7px;\n  top: 8px;\n"]);return wS=function(){return e},e}function _S(){var e=Object(f.a)(["\n  position: relative;\n\n  input {\n    padding-right: 30px;\n  }\n"]);return _S=function(){return e},e}var kS=x.default.div(_S()),SS=Object(x.default)(gS)(wS()),CS=Object(x.default)(Ff)(yS(),y.gray4),NS=Object(x.default)(Kj(["mode","searchIcon"])("div"))(xS(),(function(e){return"typeGray"===e.mode?y.gray1:void 0}),(function(e){return"typeGray"===e.mode?"0":void 0}),(function(e){return e.searchIcon?"42px":void 0})),ES=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:""},e.input=p.createRef(),e.handleSearch=function(t){var n=t.target.value;e.setState({search:n}),e.props.onSearchValueChange(n)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusOnMount,n=e.value;t&&this.input.current&&this.input.current.focus(),n&&this.setState({search:n})}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.placeholder,r=e.mode,o=e.searchIcon,i=e.disabled,c=e.value,s=void 0===c?this.state.search:c;return Object(a.jsxs)(kS,{children:[o&&Object(a.jsx)(CS,{name:Ef.Search,size:18}),Object(a.jsx)(NS,{mode:r,searchIcon:o,children:Object(a.jsx)("input",{type:"text",value:s,onChange:this.handleSearch,className:"form-control",placeholder:n,ref:this.input,disabled:i})}),t&&Object(a.jsx)(SS,{size:18})]})}}]),n}(p.PureComponent),AS=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderControl=function(t,n,r,o){return Object(a.jsx)("li",{className:g()("page-item",{active:r,disabled:o}),children:r||o?Object(a.jsx)("span",{className:"page-link",children:t}):Object(a.jsx)("a",{className:"page-link",onClick:function(){return e.props.onChange(n)},children:t})},n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.pagination,n=t.current_page,r=t.last_page,o=0,i=r;if(r>=10){var c=Math.floor(5),s=Math.ceil(5)-1;n<=c?(o=0,i=10):n+s>=r?(o=r-10+1,i=r):(o=n-c,i=n+s)}return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"pagination mb-1",children:[this.renderControl("Previous",n-1,!1,1===n),Object(m.range)(o,i).map((function(t){var r=t+1;return e.renderControl(r,r,r===n,!1)})),this.renderControl("Next",n+1,!1,n===r)]})})}}]),n}(p.PureComponent);function TS(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 45px 30px;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n"]);return TS=function(){return e},e}function IS(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n  padding: ",";\n"]);return IS=function(){return e},e}function RS(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  text-overflow: ",";\n  text-transform: ",";\n  line-height: ",";\n  overflow: ",";\n  margin: ",";\n  padding: ",";\n  position: relative;\n"]);return RS=function(){return e},e}function DS(){var e=Object(f.a)(["\n  border-radius: 4px;\n  width: ","px;\n  height: ","px;\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: ",";\n  font-size: ",";\n  background-position: center;\n  flex-shrink: 0;\n  background: ",";\n  background-size: cover;\n  margin: ",";\n"]);return DS=function(){return e},e}function MS(){var e=Object(f.a)(["\n  font-size: ",";\n  color: ",";\n  cursor: pointer;\n  opacity: ",";\n  margin: ",";\n\n  &:hover {\n    color: ",";\n    ","\n  }\n"]);return MS=function(){return e},e}var PS=x.default.div(MS(),(function(e){return e.fontSize||Vf.smaller}),(function(e){return e.color?e.color:y.blue4}),(function(e){return e.disabled?.5:1}),(function(e){return e.margin}),(function(e){return e.colorOnHover?e.colorOnHover:y.blue5}),(function(e){return!e.noDecoration&&"text-decoration: underline;"})),LS=x.default.div(DS(),(function(e){return e.wh}),(function(e){return e.wh}),(function(e){return e.backgroundUrl?y.transparent:y.gray5}),Bf.bold,(function(e){return e.fontSize||"1em"}),(function(e){return e.backgroundUrl?"url(".concat(e.backgroundUrl,")"):e.backgroundColor||y.gray1}),(function(e){return e.margin})),FS=x.default.div(RS(),(function(e){return e.color||"unset"}),(function(e){return e.weight||Bf.normal}),(function(e){return e.fontSize||"1.1em"}),(function(e){return e.textOverflow||"unset"}),(function(e){return e.textTransform||"none"}),(function(e){return e.lineHeight||"normal"}),(function(e){return e.overflow||"hidden"}),(function(e){return e.margin}),(function(e){return e.padding})),US=x.default.div(IS(),y.gray4,Bf.medium,(function(e){return e.padding||"0 0 0 0"})),VS=x.default.div(TS(),(function(e){return e.borderColor||y.gray2}),(function(e){return e.background||y.gray1})),BS={Link:PS,AvatarSquare:LS,ColoredDiv:FS,ColoredRow:VS,SortedGroupTitle:US};function JS(){var e=Object(f.a)(["\n  border-radius: 5px;\n  border: 1px solid ",";\n  height: 24px;\n  width: 24px;\n  text-align: center;\n  margin-right: 5px;\n"]);return JS=function(){return e},e}function zS(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n  :hover {\n    color: ",";\n  }\n"]);return zS=function(){return e},e}function qS(){var e=Object(f.a)(["\n  padding: 0 65px 0 5px;\n  list-style: none;\n  text-align: center;\n  position: sticky;\n  top: 0;\n  width: 20px;\n  bottom: 0;\n  overflow: hidden auto;\n  margin-bottom: 0;\n  margin-right: -50px;\n"]);return qS=function(){return e},e}function WS(){var e=Object(f.a)(["\n  word-wrap: break-word;\n  font-weight: ",";\n  border-bottom: 1px solid ",";\n\n  :last-child {\n    border-bottom: 0;\n  }\n\n  a {\n    padding: 15px 0 15px 5px;\n    display: block;\n    color: ",";\n\n    :hover {\n      background: ",";\n      text-decoration: none;\n    }\n  }\n"]);return WS=function(){return e},e}function HS(){var e=Object(f.a)(["\n  margin-bottom: 0;\n  padding: 0 0 15px 15px;\n  list-style: none;\n  flex-grow: 1;\n  max-width: 100%;\n"]);return HS=function(){return e},e}function GS(){var e=Object(f.a)(["\n  padding: 15px 15px;\n"]);return GS=function(){return e},e}function YS(){var e=Object(f.a)(["\n  padding: 15px;\n"]);return YS=function(){return e},e}function QS(){var e=Object(f.a)(["\n  overflow-y: auto;\n  overflow-x: hidden;\n  flex-grow: 1;\n  position: relative;\n"]);return QS=function(){return e},e}function KS(){var e=Object(f.a)(["\n  width: 320px;\n  background: ",";\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n"]);return KS=function(){return e},e}var ZS=x.default.div(KS(),y.gray0,y.gray2),XS=x.default.div(QS()),$S=x.default.div(YS()),eC=x.default.div(GS()),tC=x.default.ul(HS()),nC=x.default.li(WS(),(function(e){return e.isActive?Bf.bold:Bf.normal}),y.gray2,(function(e){return e.isArchived?y.gray3:y.black0}),y.gray1),rC=x.default.ul(qS()),aC=x.default.li(zS(),y.gray4,y.black0),oC=x.default.div(JS(),y.gray2),iC=BS.ColoredDiv,cC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:"",showAll:!1},e.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),e.fetchContacts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}),r=e.props,a=r.category,o=r.filters;+a&&e.props.dispatch(fS(Object(c.a)(Object(c.a)(Object(c.a)({contact_status:e.state.showAll?[Sg.ACTIVE,Sg.LEAD,Sg.QUAlIFIED]:[Sg.ACTIVE],contact_category_id:e.props.category,term:e.state.search},t),n),o)))},e.debouncedFetch=Object(m.debounce)(e.fetchContacts,300),e.handleSearch=function(t){e.setState({search:t}),e.debouncedFetch({term:t})},e.isActive=function(t){var n=Object(v.f)(e.props.location.pathname,{path:"/contacts/:category/edit/:id"});return n&&parseInt(n.params.id,0)===t},e.scrollTo=function(e){return function(){var t=document.querySelector('[data-letter="'.concat(e,'"]'));t&&t.scrollIntoView&&t.scrollIntoView(!0)}},e.onPaginateClick=function(t){e.fetchContacts({page:t})},e.toggleShowAll=function(){e.setState({showAll:!e.state.showAll}),setTimeout(e.fetchContacts,1)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchContacts(),uy.listen(Kg.ContactChangedStatus,this.fetchContacts)}},{key:"componentWillUnmount",value:function(){uy.removeListener(Kg.ContactChangedStatus,this.fetchContacts)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.category,r=t.location,a=t.dispatch,o=t.filters;(n!==e.category||r.search!==e.location.search&&-1===r.search.search(/note|meeting/)||!Object(m.isEqual)(o,e.filters))&&(this.setState({search:""}),a({type:lS}),this.debouncedFetch())}},{key:"render",value:function(){var e=this,t=this.props.contacts,n=t.ready,r=t.loading,o=t.error,i=t.data,c=qm.parse(this.props.location.search,{ignoreQueryPrefix:!0});return Object(a.jsxs)(ZS,{className:"d-flex flex-column h-100 flex-shrink-0",children:[(!n||r)&&Object(a.jsx)(av,{size:40,color:y.gray0}),Object(a.jsxs)($S,{className:"d-flex",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(ES,{value:this.state.search,loading:n&&r,onSearchValueChange:this.handleSearch,placeholder:"Search list..."})}),!(null===c||void 0===c?void 0:c.contact_status)&&!(null===c||void 0===c?void 0:c.active_in_days)&&Object(a.jsxs)("div",{className:"ml-1 align-self-center",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"contact_search_all",effect:"solid",place:"top"}),Object(a.jsxs)("div",{className:"form-check","data-tip":"Show contacts with Lead, Qualified and Active status","data-for":"contact_search_all",children:[Object(a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:this.state.showAll,onChange:this.toggleShowAll,id:"show_all_checkbox"}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"show_all_checkbox",children:"All"})]})]})]}),Object(a.jsx)(XS,{className:"d-flex flex-row",children:o?Object(a.jsxs)(eC,{children:["Error! ",o.error_message]}):i&&0===i.data.length?Object(a.jsx)(eC,{children:"No results found"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(tC,{children:i&&i.data.map((function(t){var n=t.contact_status.status===Sg.INACTIVE,r=Jv.getContactName(t);return Object(a.jsx)(nC,{isActive:e.isActive(t.id),isArchived:n,children:Object(a.jsxs)(Uf.b,{className:"d-flex align-items-center justify-content-between",to:"/contacts/".concat(e.props.category,"/edit/").concat(t.id),"data-letter":r?r[0].toLowerCase():null,children:[Object(a.jsx)("span",{children:r}),n&&Object(a.jsx)(oC,{className:"d-flex align-items-center justify-content-center",children:"A"})]})},t.id)}))}),Object(a.jsx)(rC,{children:e.alphabet.map((function(t){return Object(a.jsx)(aC,{onClick:e.scrollTo(t.toLowerCase()),children:t},t)}))})]})}),i&&i.pagination&&i.pagination.last_page>1&&Object(a.jsx)(iC,{margin:"15px auto 0px auto",overflow:"visible",children:Object(a.jsx)(AS,{pagination:i.pagination,onChange:this.onPaginateClick})})]})}}]),n}(p.PureComponent),sC=Object(LO.compose)(v.g,Object(b.b)((function(e){var t,n;return{contacts:e.contacts,filters:function(e){var t,n,r,a;return{contact_country_id:null===e||void 0===e||null===(t=e.country)||void 0===t?void 0:t.id,contact_state_id:null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.id,contact_suburb_id:null===e||void 0===e||null===(r=e.suburb)||void 0===r?void 0:r.id,contact_type:null===e||void 0===e||null===(a=e.contactType)||void 0===a?void 0:a.value}}(null===(t=e.form)||void 0===t||null===(n=t.ContactFilterForm)||void 0===n?void 0:n.values)}})))(cC);function lC(){var e=Object(f.a)(["\n  overflow-y: auto;\n  @media print {\n    width: auto;\n    height: auto !important;\n    overflow-y: visible;\n  }\n"]);return lC=function(){return e},e}var uC=x.default.div(lC());function dC(){var e=Object(f.a)(["\n  padding: 30px;\n  position: relative;  \n"]);return dC=function(){return e},e}var pC=x.default.div(dC()),hC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.children;return Object(a.jsx)(pC,{style:t,className:n,children:r})}}]),n}(p.PureComponent);function bC(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return bC=function(){return e},e}function fC(){var e=Object(f.a)(["\n  list-style: none;\n  padding: 0;\n"]);return fC=function(){return e},e}function mC(){var e=Object(f.a)(["\n  margin: 5px 0 30px 0;\n"]);return mC=function(){return e},e}var jC=x.default.h2(mC()),vC=x.default.ul(fC()),OC=Object(x.default)(Kj(["isActive"])("li"))(bC(),(function(e){return e.isActive?Bf.bold:Bf.normal})),gC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchCategory()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.category!==e.match.params.category&&this.fetchCategory()}},{key:"fetchCategory",value:function(){this.props.category.fetch(this.props.match.params.category)}},{key:"isActive",value:function(e){return this.props.location.search===e.query}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.category;return!r.ready||r.loading?Object(a.jsx)("div",{className:"d-flex h-100",style:{position:"relative"},children:Object(a.jsx)(av,{size:40,color:y.white})}):Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(hC,{className:"d-flex flex-row",children:[Object(a.jsx)("div",{className:"pr-3",children:Object(a.jsx)(Ff,{name:Jv.getCategoryIcon(r.data.data.type),size:40})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(jC,{children:r.data.data.name}),Object(a.jsxs)(vC,{children:[t.has(Dw.CONTACTS_CREATE)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)(Uf.b,{to:"".concat(n.url,"/create/person"),children:"Add New Person"})}),Object(a.jsx)("li",{children:Object(a.jsx)(Uf.b,{to:"".concat(n.url,"/create/company"),children:"Add New Company"})})]}),Object(a.jsx)("li",{children:"\xa0"}),e.filters.map((function(t){return Object(a.jsx)(OC,{isActive:e.isActive(t),children:Object(a.jsx)(Uf.b,{to:e.isActive(t)?n.url:"".concat(n.url).concat(t.query),children:t.name})},t.query)}))]})]})]})}})}},{key:"filters",get:function(){return[{query:"?active_in_days=30",name:"Active in last 30 days"},{query:"?active_in_days=60",name:"Active in last 60 days"},{query:"?active_in_days=90",name:"Active in last 90 days"},{query:"?contact_status[]=".concat(Sg.INACTIVE),name:"Archived"}]}}]),n}(p.PureComponent),xC=Object(LO.compose)(v.g,Mm({category:{fetch:Jv.findCategoryById}}),Object(b.b)())(gC),yC={searchTags:function(e){return Aj.get("/v1/tags/search",e)},getAllTags:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/tags");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNewTag:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/tags",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatedTag:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/tags/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteTag:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/tags/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},wC=function(){var e=!1;return{isCancelled:function(){return e},doCancel:function(){e=!0},asyncHandler:function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(r=t.sent,e){t.next=7;break}return t.abrupt("return",r);case 7:throw"PromiseIsCancelled";case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}};function _C(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  margin-left: ",";\n  font-size: 0.8em;\n  vertical-align: top;\n  height: 100%;\n  display: inline-block;\n"]);return _C=function(){return e},e}function kC(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  position: relative;\n  padding: 0 5px;\n  line-height: 20px;\n  height: 20px;\n  text-transform: uppercase;\n  background: ",";\n  color: ",";\n  box-shadow: ",";\n  ","\n"]);return kC=function(){return e},e}var SC=Object(x.default)(Kj(["color","mode","notStatic"])("span"))(kC(),Vf.smaller,Bf.normal,(function(e){return e.color?"outlined"===e.mode?y.white:e.color:y.gray0}),(function(e){return e.color?"outlined"===e.mode?e.color:y.white:y.black0}),(function(e){return"outlined"===e.mode?"0 0 0 1px ".concat(e.color," inset"):"unset"}),(function(e){return e.notStatic&&"cursor: pointer;"})),CC=x.default.span(_C(),y.white,Vf.small),NC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.asyncPromiseHandler=wC(),e.convertColorValue=function(){var t=e.props.tag;switch(typeof t.color){case"number":return tm(t.color);case"string":return t.color;default:return""}},e.asyncHandler=function(t){return Object(Um.a)(Fm.a.mark((function n(){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),n.prev=1,n.next=4,e.asyncPromiseHandler.asyncHandler(t);case 4:return n.prev=4,e.asyncPromiseHandler.isCancelled()||e.setState({loading:!1}),n.finish(4);case 7:case"end":return n.stop()}}),n,null,[[1,,4,7]])})))},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.asyncPromiseHandler.doCancel()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.tag,r=e.className,o=e.color,i=e.onRemove,s=e.mode,l=e.notStatic,u=e.onTagClick,d=Object(Rm.a)(e,["children","tag","className","color","onRemove","mode","notStatic","onTagClick"]),p=this.state.loading;return Object(a.jsxs)(SC,Object(c.a)(Object(c.a)({className:g()("badge",r),mode:s,color:o||this.convertColorValue()||y.black0,notStatic:l},d),{},{onClick:u&&this.asyncHandler((function(){return u(n)})),children:[p&&Object(a.jsx)(av,{size:20,color:y.white}),n.name,t,i&&Object(a.jsx)(CC,{onClick:this.asyncHandler((function(){return i(n)})),children:"\u2715"})]}))}}]),n}(p.PureComponent);function EC(){var e=Object(f.a)(["\n  position: relative;\n  min-height: 23px;\n  min-width: 50px;\n"]);return EC=function(){return e},e}function AC(){var e=Object(f.a)(["\n  flex-wrap: wrap;\n  line-height: 23px;\n"]);return AC=function(){return e},e}function TC(){var e=Object(f.a)(["\n  vertical-align: sub;\n  margin-right: 12px;\n\n  & path,\n  circle {\n    stroke: ",";\n  }\n"]);return TC=function(){return e},e}function IC(){var e=Object(f.a)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  opacity: ",";\n"]);return IC=function(){return e},e}function RC(){var e=Object(f.a)(["\n  margin-",": 5px;\n"]);return RC=function(){return e},e}var DC=Object(x.default)(Kj(["direction"])(NC))(RC(),(function(e){return e.direction?e.direction:"right"})),MC=x.default.div(IC(),y.orange0,(function(e){return e.loading?".2":"1"})),PC=Object(x.default)(Ff)(TC(),y.orange2),LC=x.default.div(AC()),FC=x.default.div(EC()),UC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderAlert=function(){var t=e.props,n=t.tags,r=t.disableAlert,o=t.loading;return Object(a.jsx)(a.Fragment,{children:n&&!r&&n.find((function(e){return e.is_alert}))&&Object(a.jsx)(MC,{loading:o,children:Object(a.jsx)(PC,{name:Ef.Alert,size:18})})})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tags,n=e.loading,r=e.direction,o=e.onRemove,i=e.loadingAreaColor,c=e.onClick;return Object(a.jsxs)(FC,{className:"d-flex flex-row",children:[this.renderAlert(),t&&Object(a.jsx)(LC,{children:t.map((function(e){return Object(a.jsx)(DC,{tag:e,notStatic:!o,direction:r,onTagClick:c,onRemove:o},e.id)}))}),n&&Object(a.jsx)(av,{size:20,color:i||y.white})]})}}]),n}(p.PureComponent);function VC(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return VC=function(){return e},e}function BC(){var e=Object(f.a)(["\n  min-width: 265px;\n"]);return BC=function(){return e},e}var JC=x.default.div(BC()),zC=x.default.div(VC()),qC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.handleSearch=function(t){e.setState({search:t},(function(){return e.props.tags.fetch({type:e.props.type,name:e.state.search})}))},e.debouncedSearch=Object(m.debounce)(e.handleSearch,1e3),e.toggleMenu=function(t){return function(){return e.props.disabled?null:(t.isExpanded||e.props.tags.ready||e.props.tags.loading||e.props.tags.fetch({type:e.props.type}),t.toggle())}},e.renderIconTrigger=function(t){var n=e.props.disabled;return function(r){return Object(a.jsx)(cw,{"data-tip":"Tags","data-for":"".concat(e.props.type,"-menu-tooltip"),onClick:e.toggleMenu(r),disabled:n,children:Object(a.jsx)(Ff,{name:t})})}},e.renderTagsMenu=function(t){var n=e.props,r=n.tags.data,o=n.onTagClick,i=n.filter,c=r?r.data.filter((function(e){return!i||!i.find((function(t){return t.id===e.id}))})):[];return Object(a.jsxs)(JC,{className:"px-2",children:[Object(a.jsx)(ES,{loading:e.props.tags.loading,placeholder:"Search...",onSearchValueChange:e.debouncedSearch}),!!c.length&&Object(a.jsx)(zC,{children:Object(a.jsx)(UC,{tags:c,onClick:o,disableAlert:!0})})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(fw,{trigger:this.renderIconTrigger(Ef.Tags),menu:this.renderTagsMenu,onOutside:function(){return e.handleSearch("")}})}}]),n}(p.PureComponent),WC=Mm({tags:{fetch:yC.searchTags}})(qC),HC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleStatusClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.disabled){t.next=3;break}return t.next=3,e.props.onStatusClick(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderMenuItems=function(){var t=e.props,n=t.statuses,r=t.selectedStatus;return n.map((function(t){return{onClick:t.onClick?t.onClick:function(){return e.handleStatusClick(t)},name:t.name,classNames:t.name===r?"active":""}}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.statuses;return Object(a.jsx)(yw,{disabled:t||0===n.length,iconName:Ef.Flag,tooltipId:"".concat(this.props.type,"-menu-tooltip"),tooltipHint:"Status",items:this.renderMenuItems()})}}]),n}(p.PureComponent);function GC(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  opacity: ",";\n  z-index: ",";\n"]);return GC=function(){return e},e}var YC=x.default.div(GC(),(function(e){return e.color||y.white}),(function(e){return e.opacity||.5}),(function(e){return e.zIndex||100})),QC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.opacity,r=e.zIndex;return Object(a.jsx)(YC,{color:t||y.white,opacity:n||.7,zIndex:r})}}]),n}(p.PureComponent);function KC(){var e=Object(f.a)(["\n  width: 40px;\n  height: 40px;\n  border-radius: 4px;\n  background-color: ",";\n  background-image: url(",");\n  background-position: center;\n  background-size: cover;\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  margin-left: 10px;\n"]);return KC=function(){return e},e}function ZC(){var e=Object(f.a)(["\n  height: 0;\n"]);return ZC=function(){return e},e}var XC=x.default.div(ZC()),$C=x.default.div(KC(),y.gray1,(function(e){return e.avatar||"***"}),(function(e){return e.avatar?"transparent":y.gray5}),Vf.medium,Bf.bold),eN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={onlineUsers:[]},e.joinChannel=function(){aj().join(e.props.channel).here((function(t){e.setState({onlineUsers:t})})).joining((function(t){e.setState({onlineUsers:[].concat(Object(Dm.a)(e.state.onlineUsers),[t])}),Jf.a.rebuild()})).leaving((function(t){var n=e.state.onlineUsers.filter((function(e){return e.id!==t.id}));e.setState({onlineUsers:n})}))},e.leaveChannel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.channel;aj().leave(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.joinChannel()}},{key:"componentDidUpdate",value:function(e){this.props.channel!==e.channel&&(this.leaveChannel(e.channel),this.joinChannel())}},{key:"componentWillUnmount",value:function(){this.leaveChannel()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.user,r=this.state.onlineUsers,o="tooltip-".concat(t);return Object(a.jsxs)(a.Fragment,{children:[r.length>0&&Object(a.jsx)(Jf.a,{className:"overlapping",id:o,place:"left",effect:"solid"}),Object(a.jsx)(XC,{className:"d-flex align-items-center",children:r.filter((function(e){return e.id!==n.id})).map((function(e){return Object(a.jsxs)($C,{"data-for":o,"data-tip":e.full_name,avatar:e.avatar,className:"d-flex align-items-center justify-content-center",children:[e.full_name&&e.full_name.split(" ")[0][0],e.full_name&&e.full_name.split(" ")[1][0]]},e.id)}))})]})}}]),n}(p.PureComponent),tN=Object(LO.compose)(Object(b.b)((function(e){return{user:e.user.me}})))(eN);function nN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return nN=function(){return e},e}function rN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return rN=function(){return e},e}function aN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return aN=function(){return e},e}function oN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return oN=function(){return e},e}function iN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return iN=function(){return e},e}function cN(){var e=Object(f.a)([""]);return cN=function(){return e},e}function sN(){var e=Object(f.a)(["\n  margin: 20;\n"]);return sN=function(){return e},e}function lN(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  flex: 1;\n"]);return lN=function(){return e},e}function uN(){var e=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  border-top: 1px solid ",";\n"]);return uN=function(){return e},e}function dN(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 30px;\n  width: fit-content;\n"]);return dN=function(){return e},e}function pN(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 30px;\n  width: fit-content;\n"]);return pN=function(){return e},e}function hN(){var e=Object(f.a)(["\n  margin-top: 0%;\n  margin-left: 0%;\n"]);return hN=function(){return e},e}function bN(){var e=Object(f.a)(["\n  background-color: ",";\n  margin-left: 5%;\n  margin-right: 5%;\n  border-left: 1px solid lightgray;\n  border-right: 1px solid lightgray;\n  display: flex;\n  flex-direction: column;\n  height: 100%;\n  min-height: 100vh;\n"]);return bN=function(){return e},e}function fN(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return fN=function(){return e},e}function mN(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return mN=function(){return e},e}function jN(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n"]);return jN=function(){return e},e}function vN(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  margin-right: 10px;\n  align-self: center;\n"]);return vN=function(){return e},e}var ON=Object(x.default)(NC)(vN(),Vf.normal),gN=(x.default.div(jN(),Bf.medium,Vf.medium,y.yellow),x.default.div(mN())),xN=x.default.div(fN()),yN=x.default.div(bN(),y.white),wN=x.default.div(hN()),_N=x.default.h2(pN()),kN=x.default.h3(dN()),SN=x.default.div(uN(),y.gray2),CN=(x.default.h4(lN()),x.default.div(sN())),NN=x.default.div(cN()),EN=Object(x.default)(Ff)(iN()),AN=Object(x.default)(Ff)(oN()),TN=Object(x.default)(Ff)(aN()),IN=(Object(x.default)(Ff)(rN()),Object(x.default)(Ff)(nN()));function RN(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  font-weight: 400;\n  position: relative;\n  padding: 0 5px;\n  text-transform: uppercase;\n  background: white;\n  color: ",";\n  box-shadow: unset;\n  position: absolute;\n  right: 30px;\n  border-radius: 0.25rem;\n"]);return RN=function(){return e},e}var DN=x.default.span(RN(),Vf.normal,y.gray4),MN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={lastStatus:void 0},e.onTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.contact.id){t.next=5;break}return t.next=3,Jv.assignTag(e.props.contact.id,n.id);case 3:return t.next=5,e.props.onTagsUpdate();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStatusClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.contact,o=r.onUpdate,!a.id){t.next=15;break}return t.prev=2,t.next=5,Jv.changeContactStatus(a.id,n.type);case 5:return t.next=7,Object(Uw.delay)(100);case 7:e.setState({lastStatus:n.type}),o(),uy.emit(Kg.ContactChangedStatus),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),Qm(Vm.Danger,"This status can't be applied");case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.typeCheckers={instanceOfPerson:function(e){return e.hasOwnProperty("first_name")&&e.hasOwnProperty("last_name")},instanceOfCompany:function(e){return e.hasOwnProperty("abn")&&e.hasOwnProperty("legal_name")}},e.duplicateContact=function(){var t=e.props.contact;return t?e.props.history.push({pathname:"/contacts/".concat(t.contact_category_id,"/create/").concat(t.contact_type===ev.person?"person":"company"),state:{contact:Object(c.a)(Object(c.a)({},t),{},{id:void 0})}}):Promise.reject(!0)},e.deleteContact=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.contact,a=n.dispatch,!r.id){t.next=10;break}return t.next=4,a(Sw("Confirm","Delete contact?"));case 4:if(!t.sent){t.next=9;break}return t.abrupt("return",Jv.deleteContact(+r.id).then((function(){e.props.dispatch(vS(r.id)),e.props.match.params.id&&e.props.history.replace("/contacts/".concat(e.props.match.params.category))})));case 9:case 10:return t.abrupt("return",Promise.resolve());case 11:case"end":return t.stop()}}),t)}))),e.getDropdownMenuItems=function(t){return[{name:"Duplicate",visible:t.has(Dw.CONTACTS_CREATE),onClick:e.duplicateContact},{type:"divider",visible:t.has(Dw.CONTACTS_CREATE)&&t.has(Dw.CONTACTS_DELETE)},{name:"Delete",visible:t.has(Dw.CONTACTS_DELETE),onClick:e.deleteContact}].filter((function(e){return e.visible}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){Jf.a.rebuild()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.contact;t.id&&Jv.getContactById(t.id).then((function(t){"contact_status"in t.data&&e.setState({lastStatus:t.data.contact_status.status})}))}},{key:"render",value:function(){var e=this,t=(this.props.statuses.data||[]).map((function(e,t){return{id:t,name:Fg[e],type:e}})),n=this.props,r=n.newContact,o=n.contact,i=n.contactTags;return Object(a.jsx)(Cw.Consumer,{children:function(n){var c,s,l=e.getDropdownMenuItems(n);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"contact-menu-tooltip",effect:"solid"}),Object(a.jsxs)(sw,{className:"d-flex align-items-center justify-content-between",children:[(!o||r)&&Object(a.jsx)(QC,{opacity:.9}),Object(a.jsxs)("div",{children:[Object(a.jsx)(HC,{loading:e.props.statuses.loading,statuses:t,type:"contact",onStatusClick:e.onStatusClick,selectedStatus:Fg[e.state.lastStatus||(null===(c=o.contact_status)||void 0===c?void 0:c.status)||""],disabled:!n.has(Dw.CONTACTS_UPDATE)}),n.has(Dw.CONTACTS_UPDATE)&&n.has(Dw.NOTES_CREATE)&&Object(a.jsx)(cw,{"data-tip":"Add note","data-for":"contact-menu-tooltip",children:Object(a.jsx)(Ff,{name:Ef.AddNote,onClick:e.props.onNoteAdd})}),n.has(Dw.MEETINGS_CREATE)&&Object(a.jsx)(cw,{"data-tip":"Add meeting","data-for":"contact-menu-tooltip",children:Object(a.jsx)(Ff,{name:Ef.Calendar,onClick:e.props.onMeetingAdd})}),n.has(Dw.TAGS_VIEW)&&n.has(Dw.CONTACTS_UPDATE)&&Object(a.jsx)(WC,{type:"contact",filter:i,onTagClick:e.onTagClick}),l.length>0&&Object(a.jsx)(yw,{items:l})]}),Object(a.jsx)(DN,{children:Object(a.jsx)(ON,{tag:{name:Fg[e.state.lastStatus||(null===(s=o.contact_status)||void 0===s?void 0:s.status)||""],color:y.gray4}})}),Object(a.jsx)(tN,{channel:"online-contact-".concat(o.id)})]})]})}})}}]),n}(p.PureComponent),PN=Object(LO.compose)(v.g,Object(b.b)((function(e){return{statuses:e.contactStatuses.statuses}})))(MN),LN=(n(847),n(561)),FN=n.n(LN),UN=n(397),VN=n.n(UN),BN=n(588);function JN(){var e=Object(f.a)(["\n  margin: 8px;\n  cursor: pointer;\n\n  path {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return JN=function(){return e},e}var zN=Object(x.default)(Kj(["isActive"])(Ff))(JN(),(function(e){return e.isActive?y.black0:y.gray5}),y.black0),qN=function(e){return Object(a.jsx)(zN,Object(c.a)(Object(c.a)({},e),{},{size:18}))};function WN(){var e=Object(f.a)(["\n  padding: 0 1.5rem;\n  text-align: right;\n\n  a {\n    color: ","!important;\n    font-size: ",";\n    cursor: pointer;\n  }\n"]);return WN=function(){return e},e}x.default.div(WN(),y.blue4,Vf.smaller);var HN,GN=[{name:"Job Scheduled",content:"<strong>Job Scheduled</strong><br/><br/>Some content"},{name:"Unable to contact you",content:"<strong>Unable to contact you!!!</strong>"},{name:"Welcome",content:"<strong>Welcome</strong><ul><li>Important Note</li><li><u>Something else</u></li></ul><div><i>Sincerely yours,<br/>John Smith</i></div>"}],YN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).selectTemplate=function(t,n){e.props.onSelect(t),n.close()},e.renderTemplatesTrigger=function(t){return Object(a.jsx)(qN,{isActive:!1,name:Ef.Comment,onClick:t.toggle,"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.renderTemplatesMenu=function(t){return Object(a.jsx)(a.Fragment,{children:GN.map((function(n,r){return Object(a.jsx)("a",{className:"dropdown-item",onClick:function(){return e.selectTemplate(n,t)},children:n.name},r)}))})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(fw,{trigger:this.renderTemplatesTrigger,menu:this.renderTemplatesMenu})}}]),n}(p.PureComponent),QN=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/users/".concat(t),n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),KN=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{per_page:35},n=r.length>1?r[1]:void 0,e.next=4,Aj.get("/v1/users",t,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ZN=function(e,t){return Aj.get("/v1/users/".concat(e,"/roles"),null,t)},XN=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/users/search/mentions",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$N=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,Aj.postFormData("/v1/me/avatar",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),eE=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/me/notifications?per_page=10");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),tE=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/me/notifications");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),nE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/me/notifications/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/roles",null,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.abrupt("return",Aj.post("/v1/locations/".concat(n,"/users/").concat(t),{primary:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/locations/".concat(n,"/users/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iE=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/me/locations",{per_page:XO.Huge});case 2:return t=e.sent,e.abrupt("return",Object(m.orderBy)(t.data,["name"],["asc"]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),cE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/users/".concat(t,"/roles"),{roles:n},r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/users/".concat(t,"/roles"),{roles:n},r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),lE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/locations/".concat(t,"/users"),null,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),uE={getUsersWithControl:yj(KN,2),getSearchedUsers:yj(XN,2),getUserWithControl:yj(QN,3),getRolesWithControl:yj(rE,1),getUserRoleWithControl:yj(ZN,2),removeRoleFromUserWC:yj(sE,3),addRoleToUserWC:yj(cE,3),searchUsers:XN,getUser:QN,getUserList:KN,getUserRoles:ZN,getRoles:rE,addRoleToUser:cE,updateUserData:function(e,t){return Aj.patch("/v1/users/".concat(e),t)},chainLocationToUser:aE,unchainLocationToUser:oE,setAvatar:$N,deleteUser:function(e){return Aj.remove("/v1/users/".concat(e))},getMyUnreadNotifications:eE,removeNotification:nE,removeAllNotifications:tE,getLocations:iE,getUsersByLocation:lE,AddNewUser:function(e){return Aj.post("/v1/users",e)}};!function(e){e[e.uploadFromComputer=0]="uploadFromComputer"}(HN||(HN={}));var dE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderTemplatesTrigger=function(){return Object(a.jsx)(qN,{isActive:!1,name:Ef.Attachment,"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.renderOnlyIcon=function(){var t=e.props.onSelect;return Object(a.jsx)(qN,{isActive:!1,name:Ef.Attachment,onClick:t,"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.uploadingMenuItems=[{name:"Invoice",disabled:!0},{name:"Purchase Order",disabled:!0},{type:"divider"},{name:"Assessment Reports",disabled:!0},{name:"Photos",disabled:!0},{type:"divider"},{name:"From computer",onClick:e.props.onSelect}],e}return Object(l.a)(n,[{key:"render",value:function(){return"icon"===this.props.mode?this.renderOnlyIcon():Object(a.jsx)(yw,{trigger:this.renderTemplatesTrigger,items:this.uploadingMenuItems})}}]),n}(p.PureComponent);function pE(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: relative;\n"]);return pE=function(){return e},e}function hE(){var e=Object(f.a)(["\n  display: inline-block;\n  margin-left: -15px;\n  min-width: 120px;\n"]);return hE=function(){return e},e}function bE(){var e=Object(f.a)(["\n  display: inline-block;\n  padding-left: 5px;\n  font-weight: ",";\n  color: ",";\n"]);return bE=function(){return e},e}var fE=x.default.div(bE(),Bf.normal,y.gray4),mE=x.default.div(hE()),jE=x.default.div(pE()),vE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.handleClick=function(){e.props.onClick&&(e.setState({loading:!0}),e.props.onClick().finally((function(){return e.setState({loading:!1})})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.firstName,n=e.lastName,r=e.className,o=e.locations,i=Object(Rm.a)(e,["firstName","lastName","className","locations"]),s=this.state.loading;return Object(a.jsxs)(jE,{children:[Object(a.jsxs)("div",Object(c.a)(Object(c.a)({className:g()("dropdown-item",r),onClick:this.handleClick},i),{},{children:[Object(a.jsxs)(mE,{children:[Object(a.jsx)("strong",{children:t})," ",n]}),o&&Object(a.jsx)(fE,{children:o})]})),s&&Object(a.jsx)(av,{size:20,color:y.white})]})}}]),n}(p.PureComponent);function OE(){var e=Object(f.a)(["\n  color: ",";\n"]);return OE=function(){return e},e}function gE(){var e=Object(f.a)(["\n  padding-bottom: 10px;\n"]);return gE=function(){return e},e}function xE(){var e=Object(f.a)(["\n  width: 265px;\n"]);return xE=function(){return e},e}var yE=x.default.div(xE()),wE=x.default.div(gE()),_E=x.default.span(OE(),y.gray3),kE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleSearch=function(t){t&&t.length>1&&e.props.onChangeSearch(t)},e.debouncedSearch=Object(m.debounce)(e.handleSearch,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.mentionsUsers,r=e.onSelectMentionsUser;return Object(a.jsxs)(yE,{children:[Object(a.jsx)(wE,{className:"px-2",children:Object(a.jsx)(ES,{loading:t||!1,onSearchValueChange:this.debouncedSearch,placeholder:"Search...",focusOnMount:!0})}),!(n&&n.length>0)&&Object(a.jsx)(_E,{className:"px-2",children:"No users found"}),n&&n.map((function(e){return Object(a.jsx)(vE,{firstName:e.first_name,lastName:e.last_name,locations:e.locations&&e.locations.join(" "),onClick:function(){return r(e)}},e.id)}))]})}}]),n}(p.PureComponent),SE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).menuProps=void 0,e.clearAndToggle=function(t){t.isExpanded||e.props.onClearSearch(),t.toggle()},e.renderTrigger=function(t){return Object(a.jsx)(qN,{isActive:!1,name:Ef.Mention,onClick:function(){return e.clearAndToggle(t)},"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.onSelect=function(t){return e.props.onSelect(t),e.menuProps&&e.menuProps.close(),Promise.resolve()},e.renderUsersMenu=function(t){e.menuProps=t;var n=e.props,r=n.loading,o=n.users;return Object(a.jsx)(kE,{loading:r,mentionsUsers:o,onSelectMentionsUser:e.onSelect,onChangeSearch:e.props.onChangeSearch,onClearSearch:e.props.onClearSearch})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(fw,{trigger:this.renderTrigger,menu:this.renderUsersMenu})}}]),n}(p.PureComponent);function CE(){var e=Object(f.a)(["\n  float: right;\n  padding-left: 5px;\n  font-weight: ",";\n  color: ",";\n"]);return CE=function(){return e},e}function NE(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  min-width: 220px;\n  padding: 5px 15px;\n"]);return NE=function(){return e},e}function EE(){var e=Object(f.a)(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 5px;\n  height: 45px;\n"]);return EE=function(){return e},e}function AE(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n\n  span > span > span {\n    color: ",";\n    background: transparent;\n    text-decoration: underline;\n    text-decoration-style: dashed;\n  }\n\n  ."," > span > span {\n    color: "," !important;\n    background: transparent !important;\n    text-decoration: none !important;\n  }\n\n  ."," {\n    z-index: 2;\n    position: absolute;\n    padding: 5px;\n    border: 1px solid ",";\n    border-radius: 4px;\n    margin-top: 0.4em;\n    background: ",";\n  }\n\n  ."," {\n    box-shadow: none;\n    padding-top: 5px;\n    cursor: pointer;\n  }\n\n  ."," {\n    background: ",";\n  }\n\n  .DraftEditor-root {\n    position: relative;\n  }\n\n  .DraftEditor-editorContainer {\n    padding: ","px;\n    min-height: 120px;\n    max-height: 500px;\n    overflow: auto;\n    z-index: 1;\n    position: relative;\n  }\n\n  .public-DraftEditorPlaceholder-root {\n    color: ",";\n    position: absolute;\n    top: ","px;\n    left: ","px;\n  }\n"]);return AE=function(){return e},e}var TE={mention:"MENTIONS_THEME_MENTION_CLASS",mentionSuggestions:"MENTIONS_THEME_MENTION_SUGGESTIONS_CLASS",mentionSuggestionsEntryContainer:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_CONTAINER",mentionSuggestionsEntry:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_CLASS",mentionSuggestionsEntryFocused:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_FOCUSED_CLASS",mentionSuggestionsEntryActive:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_CLASS"},IE=x.default.div(AE(),y.gray2,y.red1,TE.mention,y.green2,TE.mentionSuggestions,y.gray2,y.white,TE.mentionSuggestionsEntry,TE.mentionSuggestionsEntryFocused,y.gray0,10,y.gray4,10,10),RE=x.default.div(EE(),(function(e){return e.color}),y.gray2),DE=x.default.div(NE(),Vf.normal,Bf.normal),ME=x.default.div(CE(),Bf.normal,y.gray4),PE=function(e){var t=e.mention,n=(e.searchValue,e.isFocused,Object(Rm.a)(e,["mention","searchValue","isFocused"]));return Object(a.jsxs)(DE,Object(c.a)(Object(c.a)({},n),{},{children:[Object(a.jsx)("strong",{children:t.first_name})," ",t.last_name,Object(a.jsx)(ME,{children:t.locations&&t.locations.join(" ")})]}))},LE=[{icon:Ef.TextBold,style:"BOLD",title:"Bold"},{icon:Ef.TextItalic,style:"ITALIC",title:"Italic"},{icon:Ef.TextUnderlined,style:"UNDERLINE",title:"Underline"}],FE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).editor=p.createRef(),e.upload=p.createRef(),e.initMentionPlugin=function(){return VN()({mentionPrefix:"@",theme:TE})},e.mentionPlugin=e.initMentionPlugin(),e.state={editorState:ov.EditorState.createWithContent(Object(iv.a)(e.props.initValue||"")),suggestions:[]},e.onChange=function(t){e.setState({editorState:t});var n=e.getHTML();e.props.value!==n&&e.props.onChange&&e.props.onChange(n)},e.onChangeFile=function(t){var n=e.props.postDocument;n&&n(t.target.files)},e.getHTML=function(){var t=e.state.editorState.getCurrentContent();return Object(BN.a)({entityToHTML:function(e,t){return"mention"===e.type?"[USER_ID:".concat(e.data.mention.id,"]"):t}})(t)},e.onSearchMentionChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.value.length>=n.mentionLengthForSearch)){t.next=7;break}return t.next=3,e.getSuggestions(r.value);case 3:a=t.sent,e.setState({suggestions:Object(UN.defaultSuggestionsFilter)(r.value,a)}),t.next=8;break;case 7:0===r.value.length&&e.clearMentionsState();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddMention=function(t){e.clearMentionsState(),e.onClearUserSearch()},e.onClearUserSearch=function(){e.props.users.reset()},e.clearMentionsState=function(){e.setState({suggestions:[]})},e.fetchDebounced=Object(m.debounce)(function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.users.fetch(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),350,{leading:!0}),e.getSuggestions=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchDebounced(n);case 2:return r=e.props.users.data,t.abrupt("return",r&&r.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:"".concat(e.first_name," ").concat(e.last_name)})}))||[]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleInlineStyle=function(t){e.focusEditor(),setTimeout((function(){e.onChange(ov.RichUtils.toggleInlineStyle(e.state.editorState,t))}),0)},e.toggleBulletList=function(){e.focusEditor(),setTimeout((function(){e.onChange(ov.RichUtils.toggleBlockType(e.state.editorState,"unordered-list-item"))}),0)},e.isActive=function(t){return e.state.editorState.getCurrentInlineStyle().has(t)},e.isActiveBulletList=function(){var t=e.state.editorState,n=t.getSelection();return"unordered-list-item"===t.getCurrentContent().getBlockForKey(n.getStartKey()).getType()},e.useTemplate=function(t){e.onChange(ov.EditorState.createWithContent(Object(iv.a)(t.content)))},e.openAttachmentDialog=function(){var t=e.upload.current;t&&t.click()},e.onSelectMentionUser=function(t){var n=e.state.editorState,r=n.getCurrentContent(),a=n.getSelection(),o=r.createEntity("mention","SEGMENTED",{mention:t}),i=o.getLastCreatedEntityKey(),c=ov.Modifier.replaceText(o,a,"@".concat(t.full_name),void 0,i);e.setState({editorState:ov.EditorState.push(n,c,"apply-entity")})},e.onDrop=function(t){var n=e.props,r=n.postDocument,a=n.disableAttachments;t.preventDefault(),t.dataTransfer.files.length>0&&r&&!a&&r(t.dataTransfer.files)},e.onDragOver=function(t){t.preventDefault(),e.focusEditor()},e.onClick=function(t){e.focusEditor()},e.setExternalDisabledCondition=function(){var t=e.props.externalDisableListener;t&&t(!e.state.editorState.getCurrentContent().getPlainText())},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setExternalDisabledCondition()}},{key:"componentDidUpdate",value:function(e){this.setExternalDisabledCondition(),this.props.initValue!==e.initValue&&this.setState({editorState:ov.EditorState.createWithContent(Object(iv.a)(this.props.initValue||"")),suggestions:[]})}},{key:"focusEditor",value:function(){this.editor.current&&this.editor.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.disableAttachments,r=t.disableMentionControl,o=t.disableTemplatesControl,i=t.disableTextFormatting,c=t.attachmentMode,s=t.hideCheckIcon,l=this.isActiveBulletList(),u=this.mentionPlugin.MentionSuggestions,d=[this.mentionPlugin],p=this.props.users.data&&this.props.users.data.data,h=[];return this.state.suggestions.forEach((function(e){var t=!0;h.forEach((function(n){n.email===e.email&&(t=!1)})),t&&h.push(e)})),Object(a.jsxs)(IE,{onDragOver:this.onDragOver,onDrop:this.onDrop,onClick:this.onClick,children:[Object(a.jsxs)(RE,{color:this.props.color,className:"d-flex justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"editor-menu-tooltip",effect:"solid",place:"top"},Date.now()),!i&&LE.map((function(t){return Object(a.jsx)(qN,{isActive:e.isActive(t.style),name:t.icon,onClick:function(){return e.toggleInlineStyle(t.style)},"data-tip":t.title,"data-for":"editor-menu-tooltip"},t.style)})),!i&&Object(a.jsx)(qN,{isActive:l,name:Ef.BulletList,onClick:this.toggleBulletList,"data-tip":"Bullet list","data-for":"editor-menu-tooltip"}),!n&&Object(a.jsx)(dE,{onSelect:this.openAttachmentDialog,mode:c||"","data-tip":"Files & images","data-for":"editor-menu-tooltip"}),!r&&Object(a.jsx)(SE,{loading:this.props.users.loading,onSelect:this.onSelectMentionUser,onChangeSearch:this.getSuggestions,onClearSearch:this.onClearUserSearch,users:p,"data-tip":"Mention people","data-for":"editor-menu-tooltip"}),!o&&Object(a.jsx)(YN,{onSelect:this.useTemplate,"data-tip":"Templates","data-for":"editor-menu-tooltip"})]}),Object(a.jsxs)("div",{children:[this.props.onSave&&!s&&Object(a.jsx)(qN,{isActive:!1,name:Ef.Check,onClick:this.props.onSave,"data-tip":"Save draft","data-for":"editor-menu-tooltip"}),this.props.onCancel&&Object(a.jsx)(qN,{isActive:!1,name:Ef.Trash,onClick:this.props.onCancel,"data-tip":"Trash","data-for":"editor-menu-tooltip"})]})]}),Object(a.jsx)("div",{style:{cursor:"text"},children:Object(a.jsx)(FN.a,{ref:this.editor,placeholder:l?"":this.props.placeholder,editorState:this.state.editorState,onChange:this.onChange,plugins:d,spellCheck:!0})}),Object(a.jsx)(u,{onSearchChange:this.onSearchMentionChange,onAddMention:this.onAddMention,suggestions:h,entryComponent:PE}),Object(a.jsx)("input",{id:"fileUpload",type:"file",ref:this.upload,onChange:this.onChangeFile,style:{display:"none"}}),this.props.children?Object(a.jsx)("div",{style:{padding:"10px"},children:this.props.children}):null]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return""===e.value?{editorState:ov.EditorState.createWithContent(Object(iv.a)(""))}:null}}]),n}(p.Component);FE.mentionLengthForSearch=3;var UE=Object(LO.compose)(Object(b.b)(),Mm({users:{fetch:function(e){return uE.searchUsers({name:e})}}}))(FE),VE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/notes"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/notes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),JE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/notes",Object(c.a)({note:t},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/notes/".concat(t),Object(c.a)({note:n},r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/notes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),WE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(n,"/notes/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),HE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/contacts/".concat(n,"/notes/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),GE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),YE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/messages"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),QE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/messages",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ZE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/messages/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XE=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$E={getJobNotes:VE,addNoteToJob:WE,detachNoteFromJob:GE,getNote:BE,postNote:JE,updateNote:zE,removeNote:qE,getJobMessages:YE,addMessageToJob:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(n,"/messages/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeMessageFromJob:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(n,"/messages/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sendJobMessage:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(n,"/messages/").concat(t,"/send"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getMessage:QE,postMessage:KE,updateMessage:ZE,removeMessage:XE,getJobNotesAndMessages:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/notes-and-messages"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addNoteToContact:HE,getContactNotesAndMeetings:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contacts/".concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function eA(){var e=Object(f.a)(["\n  border: 1px solid ",";\n"]);return eA=function(){return e},e}function tA(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  padding: 0 25px;\n  border: 0;\n  border-radius: 0;\n  height: 100%;\n  cursor: pointer;\n"]);return tA=function(){return e},e}function nA(){var e=Object(f.a)(["\n  background: ",";\n  text-align: right;\n  height: 45px;\n"]);return nA=function(){return e},e}function rA(){var e=Object(f.a)(["\n  position: relative;\n"]);return rA=function(){return e},e}var aA=x.default.div(rA()),oA=x.default.div(nA(),y.orange0),iA=x.default.button(tA(),y.orange1,y.white),cA=x.default.div(eA(),y.gray2),sA=BS.ColoredDiv,lA=/\B@[a-z0-9_-]+/gi,uA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;Object(s.a)(this,n),(a=t.call(this,e,r)).state={loading:!1,noteText:"",documents:[],disabled:!1},a.existedDocumentIds=[],a.handleAsyncAction=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,t();case 4:return e.prev=4,a.setState({loading:!1}),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleNoteChange=function(e){a.setState({noteText:e})},a.isContainInvalidMentions=function(){return!!a.state.noteText.match(lA)},a.postNoteDocument=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.length){e.next=5;break}return e.next=3,p_.postDocument(t[0]);case 3:n=e.sent,a.setState({documents:[].concat(Object(Dm.a)(a.state.documents),[n.data])});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeDocument=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({documents:a.state.documents.filter((function(e){return t!==e.id}))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onSave=Object(Um.a)(Fm.a.mark((function e(){var t,n,r,o,i,c,s,l,u,d,p,h,b;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.afterSave,r=t.edit,o=t.note,i=t.beforeSave,c=t.saveWith,s=a.state,l=s.noteText,u=s.documents,!i){e.next=5;break}return e.next=5,i();case 5:if(!r){e.next=11;break}return e.next=8,$E.updateNote(o.id,l,c);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,$E.postNote(l,c);case 13:e.t0=e.sent;case 14:return d=e.t0,p=u.filter((function(e){return!a.existedDocumentIds.includes(e.id)})).map((function(e){return p_.attachDocumentToNote(d.data.id,e.id)})),h=u.map((function(e){return e.id})),b=a.existedDocumentIds.filter((function(e){return!h.includes(e)})).map((function(e){return p_.detachDocumentFromNote(d.data.id,e)})),e.next=20,Promise.all([Promise.all([p]),Promise.all([b])]);case 20:setTimeout((function(){n&&n(d.data)}),10);case 21:case"end":return e.stop()}}),e)}))),a.setDisableSate=function(e){a.setState({disabled:e})};var o=e.edit,i=e.note;return o&&i?(a.setState({noteText:i.note}),a.setState({documents:i.documents}),a.existedDocumentIds=i.documents.map((function(e){return e.id}))):a.existedDocumentIds=[],a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.edit,n=e.note;t&&n?(this.setState({noteText:n.note}),this.setState({documents:n.documents}),this.existedDocumentIds=n.documents.map((function(e){return e.id}))):this.existedDocumentIds=[]}},{key:"componentDidUpdate",value:function(e){var t=this.props.triggerToSave;t&&t!==e.triggerToSave&&this.handleAsyncAction(this.onSave)}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,r=t.color,o=t.buttonPlaceholder,i=t.loadingColor,s=t.hideBottom,l=t.initValue,u=t.attachmentMode,d=t.externalDisableListener,p=this.state,h=p.loading,b=p.noteText,f=p.documents,m=p.disabled;return Object(a.jsxs)(aA,{children:[h&&Object(a.jsx)(av,{size:40,color:i||y.white,zIndex:2}),Object(a.jsxs)(cA,{children:[Object(a.jsx)(UE,Object(c.a)(Object(c.a)({},this.props),{},{value:b,initValue:l,onChange:this.handleNoteChange,postDocument:function(t){return e.handleAsyncAction((function(){return e.postNoteDocument(t)}))},placeholder:n||"Write your note here...",color:r||y.orange0,externalDisableListener:d||this.setDisableSate,attachmentMode:u})),!s&&Object(a.jsx)(oA,{children:Object(a.jsx)(iA,{onClick:function(){return e.handleAsyncAction(e.onSave)},disabled:m||this.isContainInvalidMentions(),children:o||"Add Note"})})]}),f&&f.length>0&&Object(a.jsx)(sA,{margin:"15px 0 0 0",children:Object(a.jsx)(x_,{documents:f,onRemove:this.removeDocument})})]})}}]),n}(p.PureComponent),dA=Object(b.b)()(uA),pA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disableAttachments,n=e.disableMentionControl,r=e.disableTemplatesControl,o=e.disableTextFormatting,i=e.attachmentMode,c=e.hideCheckIcon,s=e.meta,l=s.touched&&s.error;return Object(a.jsx)(UE,{color:this.props.color,postDocument:this.props.postDocument,onChange:this.props.input.onChange,value:this.props.input.value,initValue:this.props.initialValue,placeholder:this.props.placeholder,onCancel:this.props.onCancel,onSave:this.props.onSave,disableAttachments:t,disableMentionControl:n,disableTemplatesControl:r,disableTextFormatting:o,attachmentMode:i,hideCheckIcon:c,children:l&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:s.error})})}}]),n}(p.PureComponent);function hA(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  padding: 0 25px;\n  border: 0;\n  border-radius: 0;\n  height: 100%;\n  cursor: pointer;\n"]);return hA=function(){return e},e}function bA(){var e=Object(f.a)(["\n  background: ",";\n  text-align: right;\n  height: 45px;\n"]);return bA=function(){return e},e}function fA(){var e=Object(f.a)(["\n  margin-top: 25px;\n  border: 1px solid ",";\n"]);return fA=function(){return e},e}var mA="MeetingForm",jA=x.default.div(fA(),y.gray2),vA=x.default.div(bA(),y.orange0),OA=x.default.button(hA(),y.orange1,y.white),gA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.change,n=e.initialValues;n&&"meeting_date"in n||t("meeting_date",qf()())}},{key:"render",value:function(){var e=this.props,t=e.hideFooter,n=e.initialValues;return Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-lg-4 col-md-6",children:Object(a.jsx)(yv.a,{name:"meeting_date",label:"Meeting Date",validate:uv,futureEnabled:!0,showTime:!0,component:Cy})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)(jA,{children:[Object(a.jsx)(yv.a,{name:"note",placeholder:"Enter text here...",postDocument:function(){return null},color:y.orange0,validate:fv,disableAttachments:!0,disableMentionControl:!0,disableTemplatesControl:!0,onCancel:this.props.onCancel,component:pA,initialValue:null===n||void 0===n?void 0:n.note}),!t&&Object(a.jsx)(vA,{children:Object(a.jsx)(OA,{type:"submit",children:"Add Meeting"})})]})})})]})}}]),n}(p.PureComponent),xA=Object(LO.compose)(Object(Gj.a)({form:mA}))(gA),yA=function(e){return{title:e.note,scheduled_at:Wj(e.meeting_date,!0)||"---"}},wA={createMeeting:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/meetings",yA(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateMeeting:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/meetings/".concat(t),yA(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dehydrate:yA};function _A(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return _A=function(){return e},e}function kA(){var e=Object(f.a)(["\n  word-break: break-word;\n"]);return kA=function(){return e},e}var SA=x.default.div(kA()),CA=x.default.div(_A(),Vf.big),NA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeTag=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.company.id){t.next=5;break}return t.next=3,Jv.removeTag(e.props.company.id,n.id);case 3:return t.next=5,e.props.loadTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.company,r=t.tags,o=t.disabled;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(SA,{className:"d-flex align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(CA,{children:n.legal_name}),t.has(Dw.TAGS_VIEW)&&Object(a.jsx)(UC,{tags:r||[],onRemove:o?void 0:e.removeTag})]})})}})}}]),n}(p.PureComponent);function EA(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n"]);return EA=function(){return e},e}function AA(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return AA=function(){return e},e}function TA(){var e=Object(f.a)(["\n  word-break: break-word;\n"]);return TA=function(){return e},e}var IA=x.default.div(TA()),RA=x.default.div(AA(),Vf.big),DA=x.default.div(EA(),Vf.medium,Bf.light),MA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeTag=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.person.id){t.next=5;break}return t.next=3,Jv.removeTag(e.props.person.id,n.id);case 3:return t.next=5,e.props.loadTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"getCompanyDescription",value:function(){var e=this.props.person;return Object(m.compact)([e.parent_company&&e.parent_company.legal_name,e.job_title]).join(", ")}},{key:"render",value:function(){var e=this,t=this.props,n=t.person,r=t.tags,o=t.disabled;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(IA,{className:"d-flex align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsxs)(RA,{children:[n.first_name," ",n.last_name]}),Object(a.jsx)(DA,{children:e.getCompanyDescription()}),r&&t.has(Dw.TAGS_VIEW)&&Object(a.jsx)(UC,{tags:r,onRemove:o?void 0:e.removeTag})]})})}})}}]),n}(p.PureComponent),PA={address_line_1:[uv],suburb:[hv]},LA=sv({legal_name:[uv],abn:[uv],payment_term_id:[uv],business_phone:[uv],address:PA},(function(e,t){return e.mailing_address&&(e.mailing_address.suburb||e.mailing_address.address_line_1)&&(t.mailing_address=sv(PA)(e.mailing_address)),t})),FA=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a,o,i;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={term:t.legal_name,contact_type:ev.company},e.next=3,Jv.searchContacts(a);case 3:if(o=e.sent,i={},!o.data.find((function(e){var n=e;return n.legal_name===t.legal_name&&n.id!==r.company.id}))){e.next=9;break}return i.legal_name="Company with this name already exists",e.abrupt("return",Promise.reject(i));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function UA(){var e=Object(f.a)(["\n  color: ","\n"]);return UA=function(){return e},e}var VA,BA=x.default.div(UA(),y.gray4),JA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={members:e.props.initialValue||[],selectedValue:null,selectedIds:function(){var t={};return j.a.forEach(e.props.initialValue,(function(e){t[e.id]=!0})),t}()},e.loadCompanies=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Jv.getContacts({term:n,contact_type:ev.company,exclude_contact_group:1});case 3:return r=t.sent,t.abrupt("return",r.data.filter((function(t){return!e.state.selectedIds[t.id]})));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadComapnies=_v()(e.loadCompanies,250),e.publishValue=function(t){var n,r;e.props.valuePrimitive?null===(n=e.props.input)||void 0===n||n.onChange(t):null===(r=e.props.input)||void 0===r||r.onChange(j.a.map(t,"id"))},e.handleChange=function(t){var n=t,r=e.state.members;(null===n||void 0===n?void 0:n.id)&&(r=[n].concat(Object(Dm.a)(r)),e.setState({members:r,selectedIds:Object(c.a)(Object(c.a)({},e.state.selectedIds),{},Object(k.a)({},n.id,!0))})),e.publishValue(r)},e.removeMember=function(t){return function(){var n=e.state.members.filter((function(e){return e.id!==t.id}));e.setState({members:n,selectedIds:Object(c.a)(Object(c.a)({},e.state.selectedIds),{},Object(k.a)({},t.id,!1))}),e.publishValue(n)}},e.getCompanyLabel=function(e){var t=j.a.find(e.addresses,{type:tv.mailing});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:e.legal_name}),t&&Object(a.jsx)(BA,{className:"text-grey text-sm mt-1",children:t.full_address})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsx)(Zv.a,{placeholder:this.props.placeholder,menuPlacement:"top",value:this.state.selectedValue,loadOptions:this.debouncedLoadComapnies,noOptionsMessage:function(){return"Start typing..."},getOptionValue:function(e){return e.id.toString()},formatOptionLabel:this.getCompanyLabel,onChange:this.handleChange})}),this.state.members.length?Object(a.jsxs)("div",{className:"border rounded",children:[Object(a.jsx)(vg,{className:"p-2 m-0",children:"Members"}),Object(a.jsx)("div",{className:"border border-bottom-0 border-left-0 border-right-0 "}),this.state.members.map((function(t,n,r){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row p-2 pr-3 m-0",children:[Object(a.jsx)("div",{className:"col pl-0",children:e.getCompanyLabel(t)}),Object(a.jsx)("div",{className:"float-right text-lg",children:Object(a.jsx)("span",{className:"cursor-pointer",title:"Remove",onClick:e.removeMember(t),children:"\xd7"})})]},n),n<r.length-1&&Object(a.jsx)("div",{className:"border border-bottom-0 border-left-0 border-right-0 "})]})}))]}):null]})}}]),n}(p.PureComponent),zA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).copyAddress=function(){var t,n=Object(m.pick)(e.props.address,["address_line_1","address_line_2","postcode","suburb","state","country"]);e.props.change("mailing_address",Object(c.a)(Object(c.a)({},n),{},{type:tv.mailing,id:null===(t=e.props.company.mailing_address)||void 0===t?void 0:t.id})),e.scheduleUpdate()},e.scheduleUpdate=Object(m.debounce)((function(){e.isNewCompany||e.handleSubmitForm()}),1e3),e.handleSubmitForm=function(){var t=e.props,n=t.handleSubmit,r=t.onSubmit;return e.props.submitting?(e.scheduleUpdate(),Promise.resolve()):n(r)()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(mg,{isNew:e.isNewCompany,children:Object(a.jsxs)("form",{onSubmit:e.props.handleSubmit,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:e.props.disabled,children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"legal_name",label:"Legal Company Name",placeholder:"Legal Company Name",component:ZO,onChange:e.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"trading_name",label:"Trading Name",placeholder:"Trading Name",component:ZO,onChange:e.scheduleUpdate})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"abn",label:"ABN",placeholder:"ABN",component:ZO,mask:"99 999 999 999",onChange:e.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"payment_term",label:"Default Payment Terms",placeholder:"Select Payment Terms",component:Kv,options:e.props.paymentTerms,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.description},onChange:e.scheduleUpdate})})]}),Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"email",label:"Email",placeholder:"Email",component:ZO,onChange:e.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"business_phone",label:"Business Phone",placeholder:"Business Phone",component:ZO,mask:Ng,onChange:e.scheduleUpdate})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"website",label:"Website",placeholder:"Website",component:ZO,onChange:e.scheduleUpdate})})}),Object(a.jsx)(Qj,{}),Object(a.jsxs)(FO.a,{name:"address",children:[Object(a.jsxs)(vg,{children:["Street Address ",Object(a.jsx)("sup",{children:"*"})]}),Object(a.jsx)(bg,{name:"address",change:e.props.change,onChange:e.scheduleUpdate})]}),Object(a.jsx)(Qj,{}),Object(a.jsxs)(FO.a,{name:"mailing_address",children:[Object(a.jsxs)(vg,{children:["Mailing Address",!e.props.disabled&&Object(a.jsx)(wg,{onClick:e.copyAddress,children:"Copy from above"})]}),Object(a.jsx)(bg,{name:"mailing_address",change:e.props.change,onChange:e.scheduleUpdate})]}),t.has(Dw.CONTACTS_GROUP_CREATE)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{children:[Object(a.jsx)(vg,{children:"Add Member"}),Object(a.jsx)(yv.a,{initialValue:e.props.initialValues.subsidiaries,name:"group_of_companies",placeholder:"Select Members",component:JA,onChange:e.scheduleUpdate})]})]})]}),e.isNewCompany&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qj,{}),Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",disabled:e.props.submitting,children:"Create"}),Object(a.jsx)(Qj,{})]})]})})}})}},{key:"isNewCompany",get:function(){var e=this.props.company;return null===e.id||void 0===e.id}}]),n}(p.PureComponent),qA=Object(LO.compose)(Object(Gj.a)({form:"CompanyForm",validate:LA,asyncValidate:FA,asyncBlurFields:["legal_name"],shouldAsyncValidate:function(e){return!e.initialized},enableReinitialize:!1}),Object(UO.a)({address:"address"}))(zA),WA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,saving:!1},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.onClose,o=r.afterSuccess;try{o&&o(n),setTimeout((function(){a()}))}finally{e.setState({loading:!1})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.startToSave=function(){e.setState({loading:!0,saving:!0})},e.setDisableSate=function(t){e.setState({disabled:t})},e.renderBody=function(){var t=e.props,n=t.note,r=t.disableTemplatesControl,o=t.saveWith,i=Object(Rm.a)(t,["note","disableTemplatesControl","saveWith"]),s=e.state.saving;return Object(a.jsx)(dA,Object(c.a)({afterSave:e.saveNoteDraft,note:n,color:y.orange0,placeholder:"Write your note here...",hideBottom:!0,disableTemplatesControl:r,edit:!!n,triggerToSave:s,initValue:null===n||void 0===n?void 0:n.note_resolved,saveWith:o,externalDisableListener:e.setDisableSate},i))},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",onClick:this.startToSave,disabled:this.state.disabled,children:"Save"})}},{key:"render",value:function(){var e=this.props,t=e.note,n=e.isOpen,r=e.onClose,o=this.state.loading;return Object(a.jsx)(vO,{isOpen:n,children:Object(a.jsx)(PO,{onClose:r,loading:o,footer:this.renderFooter(),body:this.renderBody(),title:t?"Edit Note":"Add Note"})})}}]),n}(p.PureComponent),HA=Object(b.b)()(WA),GA=n(489),YA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={saving:!1},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,o=r.note,i=r.onClose,c=r.onSave,!a(Object(GA.a)(mA))){t.next=31;break}if(e.setState({saving:!0}),l=!(null===o||void 0===o||null===(s=o.meeting)||void 0===s?void 0:s.id),t.prev=4,!l){t.next=11;break}return t.next=8,wA.createMeeting(n);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,wA.updateMeeting(o.meeting.id,n);case 13:t.t0=t.sent;case 14:if(u=t.t0,!l){t.next=21;break}return t.next=18,$E.postNote(n.note);case 18:d=t.sent.data,t.next=24;break;case 21:return t.next=23,$E.updateNote(o.id,n.note);case 23:d=t.sent.data;case 24:return t.prev=24,e.setState({saving:!1}),t.finish(24);case 27:return p={meeting:u,note:d},null===c||void 0===c||c(p),null===i||void 0===i||i(),t.abrupt("return",p);case 31:throw Error("There are validation errors");case 32:case"end":return t.stop()}}),t,null,[[4,,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.saveMeeting=function(){(0,e.props.dispatch)(Object(xv.c)(mA))},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",onClick:e.saveMeeting,children:"Save"})},e.renderBody=function(){var t,n=e.props.note;return Object(a.jsx)(xA,{onSubmit:e.onSubmit,hideFooter:!0,initialValues:{note:null===n||void 0===n?void 0:n.note_resolved,meeting_date:(null===n||void 0===n?void 0:n.meeting)?qf()(null===n||void 0===n||null===(t=n.meeting)||void 0===t?void 0:t.scheduled_at):void 0}})},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.note,r=t.isOpen,o=t.loading,i=t.onClose,c=this.state.saving,s=!(null===n||void 0===n||null===(e=n.meeting)||void 0===e?void 0:e.id);return Object(a.jsx)("div",{children:Object(a.jsx)(vO,{isOpen:r,children:Object(a.jsx)(PO,{onClose:i,loading:o||c,footer:this.renderFooter(),body:this.renderBody(),title:s?"Create Meeting":"Edit Meeting"})})})}}]),n}(p.Component),QA=Object(LO.compose)(Object(b.b)())(YA);function KA(){var e=Object(f.a)(["\n  margin-right: 21px;\n  width: 20px;\n"]);return KA=function(){return e},e}function ZA(){var e=Object(f.a)(["\n  width: 140px;\n  font-size: ",";\n  margin-right: 21px;\n"]);return ZA=function(){return e},e}function XA(){var e=Object(f.a)(["\n  margin-left: ","px;\n  margin-bottom: 1rem;\n  display: flex;\n\n  font-size: 1.1rem;\n  font-weight: ",";\n\n  & .title {\n    font-weight: ",";\n  }\n\n  & .action {\n    padding-left: 10px;\n    color: ",";\n  }\n"]);return XA=function(){return e},e}function $A(){var e=Object(f.a)(["\n  word-break: break-all;\n  p {\n    margin-bottom: 0;\n  }\n"]);return $A=function(){return e},e}function eT(){var e=Object(f.a)(["\n  margin-left: ","px;\n"]);return eT=function(){return e},e}function tT(){var e=Object(f.a)(["\n  background-color: ",";\n  border-radius: 3px;\n  padding: .1rem .5rem;\n  :not(:last-child){margin-right: .25rem;}\n"]);return tT=function(){return e},e}function nT(){var e=Object(f.a)(["\n  margin-left: ","px;\n  margin-bottom: 1rem;\n"]);return nT=function(){return e},e}function rT(){var e=Object(f.a)(["\n  height: ","px;\n"]);return rT=function(){return e},e}function aT(){var e=Object(f.a)(["\n  width: ","px;\n  height: ","px;\n  line-height: ","px;\n  margin-left: ","px;\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: ",";\n  background-image: ",";\n  background-size: cover;\n  text-align: center;\n  font-size: 130%;\n  font-weight: ",";\n  color: ",";\n"]);return aT=function(){return e},e}function oT(){var e=Object(f.a)(["\n  color: ",";\n  padding: 21px 0;\n  border-bottom: 1px solid ",";\n  border-left: ","px solid\n    ",";\n  ","\n"]);return oT=function(){return e},e}var iT=x.default.div(oT(),y.gray5,y.gray2,4,(function(e){return e.isMeeting&&y.purple2||e.isReply&&y.gray4||y.orange2}),(function(e){return e.isHighlighted&&"background: ".concat(y.blue0,";")})),cT=x.default.div(aT(),40,40,40,24,(function(e){return e.backgroundImage?"transparent":y.green0}),(function(e){return e.backgroundImage?"url(".concat(e.backgroundImage,")"):"none"}),Bf.bold,(function(e){return e.backgroundImage?"transparent":y.white})),sT=x.default.div(rT(),40),lT=x.default.div(nT(),88),uT=x.default.span(tT(),y.gray1),dT=x.default.div(eT(),88),pT=x.default.div($A()),hT=x.default.div(XA(),(function(e){return e.isReply?88:24}),Bf.medium,Bf.bold,(function(e){return e.isMeeting&&y.purple2||e.isReply&&y.gray4||y.orange2})),bT=x.default.div(ZA(),Vf.smaller),fT=x.default.div(KA()),mT=BS.ColoredDiv,jT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showSubject:!1,showEditModal:!1},e.parseNote=function(e){return em($f(e))},e.onEdit=function(){var t,n;e.isReply?null===(t=(n=e.props).onEditMessage)||void 0===t||t.call(n,e.props.noteOrReply):e.setState({showEditModal:!0})},e.renderMenu=function(t){var n=[],r=e.props,a=r.onDelete,o=r.editable,i=r.noteOrReply;return e.isReply&&(i.message_type===Hw.EMAIL&&n.push({name:e.state.showSubject?"Hide Subject":"Show Subject",onClick:e.toggleSubject}),i.is_incoming&&n.push({name:"Reply To All",onClick:function(){return e.props.onReply&&e.props.onReply(i)}})),o&&(!e.isReply&&t.has(Dw.NOTES_UPDATE)||e.isDraft&&t.has(Dw.MESSAGES_MANAGE))&&n.push({name:"Edit",onClick:e.onEdit}),a&&t.has(Dw.NOTES_DELETE)&&n.push({name:"Delete",onClick:a}),n},e.toggleSubject=function(){e.setState({showSubject:!e.state.showSubject})},e.isMeeting=function(){return!!e.props.noteOrReply.meeting},e.closeEditNoteModal=function(){e.setState({showEditModal:!1})},e}return Object(l.a)(n,[{key:"renderHeadLine",value:function(e,t){var n=this,r=Yf(e.user||e.sender),o=r.name,i=e.from_name,c=e.user&&e.user.avatar&&e.user.avatar.url,s=r.initials;return Object(a.jsx)(Cw.Consumer,{children:function(l){var u,d,p,h,b,f;return Object(a.jsxs)("div",{className:"d-flex",children:[t||r.invalid?Object(a.jsx)(sT,{}):Object(a.jsx)(cT,{className:"flex-shrink-0",backgroundImage:c,children:s}),!t&&Object(a.jsxs)(hT,{isReply:t,isMeeting:n.isMeeting(),className:"flex-grow-1",children:[Object(a.jsx)("span",{className:"title",children:o}),Object(a.jsx)("div",{className:"action",children:n.isMeeting()?"added a meeting to ".concat(e.contact.name):"added a note"})]}),t&&Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)(hT,{isReply:t,children:[Object(a.jsx)("span",{className:"title",children:e.is_incoming?i:o}),Object(a.jsx)("div",{className:"action",children:n.addReplyPhrase})]}),n.state.showSubject&&Object(a.jsx)(lT,{children:e.subject?"Subject: ".concat(e.subject):"No Subject"}),(f=null===(u=e.recipients)||void 0===u?void 0:u.filter((function(e){return"to"===e.type})),f.length?Object(a.jsxs)(lT,{children:["To: ",f.map((function(e){return Object(a.jsx)(uT,{children:e.address})}))]}):null),function(e){return e.length?Object(a.jsxs)(lT,{children:["Cc: ",e.map((function(e){return Object(a.jsx)(uT,{children:e.address})}))]}):null}(null===(d=e.recipients)||void 0===d?void 0:d.filter((function(e){return"cc"===e.type}))),!e.is_incoming&&(null===(p=e.sender)||void 0===p?void 0:p.id)===(null===(h=l.user)||void 0===h?void 0:h.id)&&function(e){return e.length?Object(a.jsxs)(lT,{children:["Bcc: ",e.map((function(e){return Object(a.jsx)(uT,{children:e.address})}))]}):null}(null===(b=e.recipients)||void 0===b?void 0:b.filter((function(e){return"bcc"===e.type})))]}),Object(a.jsx)(bT,{children:qf()(e.updated_at||e.created_at).format(Uj)})]})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.noteOrReply,r=t.highlightedItemId,o=t.afterEditSuccess,i=t.saveWith,c=n,s=!(!c.note_resolved&&!c.message_body_resolved),l=this.isReply,u=l&&c.id===r||!l&&c.id===r,d=this.state.showEditModal;return Object(a.jsx)(Cw.Consumer,{children:function(t){var r=e.renderMenu(t);return Object(a.jsxs)(a.Fragment,{children:[!l&&!e.isMeeting()&&d&&Object(a.jsx)(HA,{isOpen:d,onClose:e.closeEditNoteModal,note:n,disableTemplatesControl:!0,afterSuccess:o,saveWith:i}),!l&&e.isMeeting()&&d&&Object(a.jsx)(QA,{isOpen:d,onClose:e.closeEditNoteModal,note:n,onSave:o}),Object(a.jsxs)(iT,{isHighlighted:u,isReply:l,isMeeting:e.isMeeting(),className:"d-flex flex-row align-items-end",id:"".concat(l?"message":"note","-").concat(c.id),children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[e.renderHeadLine(c,l),Object(a.jsx)(dT,{className:"flex-column",children:Object(a.jsxs)(pT,{children:[e.isMeeting()&&Object(a.jsx)(mT,{weight:Bf.bold,children:qf()(c.meeting.scheduled_at).format("dddd Do MMMM YYYY, h:mma")}),s&&Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.parseNote(c.note_resolved||c.message_body_resolved||"")}}),Object(a.jsx)("br",{}),c.documents&&!!c.documents.length&&Object(a.jsx)(x_,{documents:c.documents})]})})]}),Object(a.jsx)(fT,{className:"flex-shrink-0 align-self-start",children:r.length>0&&Object(a.jsx)(yw,{iconName:Ef.MenuVertical,items:r})})]})]})}})}},{key:"isDraft",get:function(){var e;return(null===(e=this.props.noteOrReply.latest_status)||void 0===e?void 0:e.status)===Yw.DRAFT}},{key:"addReplyPhrase",get:function(){var e=this.props.noteOrReply;return e.is_incoming?n.replyPhrases.incoming:e.message_type===Hw.EMAIL?this.isDraft?n.replyPhrases.email_draft:n.replyPhrases.email:e.message_type===Hw.SMS?this.isDraft?n.replyPhrases.sms_draft:n.replyPhrases.sms:n.replyPhrases[e.message_type]||null}},{key:"isReply",get:function(){return!!this.props.noteOrReply.message_body_resolved}}]),n}(p.PureComponent);jT.replyPhrases=(VA={incoming:"sent an Email",email:"replied via Email"},Object(k.a)(VA,Hw.RA_EMAIL,"sent Risk Assessment"),Object(k.a)(VA,"email_draft","Draft Email"),Object(k.a)(VA,"sms","replied via SMS"),Object(k.a)(VA,"sms_draft","Draft SMS"),VA);var vT=jT;function OT(){var e=Object(f.a)(["\n  width: 140px;\n  font-size: ",";\n  margin-right: 62px;\n"]);return OT=function(){return e},e}function gT(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  background: ",";\n  color: ",";\n  height: 50px;\n  padding-left: ","px;\n  margin-top: -1px;\n"]);return gT=function(){return e},e}var xT=x.default.div(gT(),y.gray2,y.gray2,y.gray0,y.gray5,92),yT=x.default.div(OT(),Vf.smaller),wT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getStatusOfChanging",value:function(){var e=this.props.status,t=e.status,n=e.user,r=Yf(n);return"Status changed to \u2018".concat(t,"\u2019 ").concat(n?"by ".concat(r.name):"")}},{key:"getStatusOfCreating",value:function(){var e=this.props,t=e.status.user,n=e.itemTypeName,r=Yf(t);return"".concat(n," created ").concat(t?"by ".concat(r.name):"")}},{key:"render",value:function(){return Object(a.jsxs)(xT,{className:"d-flex flex-row align-items-end",children:[Object(a.jsx)("div",{className:"d-flex flex-column align-self-center flex-grow-1",children:this.renderStatusLabel}),Object(a.jsx)(yT,{className:"d-flex flex-column align-self-center",children:qf()(this.props.status.created_at||"").format(Uj)})]})}},{key:"renderStatusLabel",get:function(){switch(this.props.status.status.toLowerCase()){case"created":return this.getStatusOfCreating();default:return this.getStatusOfChanging()}}}]),n}(p.PureComponent);function _T(){var e=Object(f.a)(["\n  position: relative;\n  min-height: 50px;\n"]);return _T=function(){return e},e}var kT=x.default.div(_T()),ST=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).typeCheckers={instanceOfJobStatus:function(e){return e.hasOwnProperty("status")&&e.hasOwnProperty("created_at")},instanceOfNote:function(e){return e.hasOwnProperty("note")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("id")}},e}return Object(l.a)(n,[{key:"allowAction",value:function(e){var t,n,r=this.props.user;return!!r&&((null===(t=r.me)||void 0===t?void 0:t.id)===e.user_id||/^administrator$|^admin$/i.test((null===(n=r.me)||void 0===n?void 0:n.role)||""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.notes,r=t.statuses,o=t.onNoteDelete,i=t.onNoteEdit,c=t.loading,s=t.loadingColor,l=t.highlightedItemId,u=t.afterEditSuccess,d=r?[].concat(n).concat(r).sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})):n;return Object(a.jsxs)(kT,{children:[c&&Object(a.jsx)(av,{size:40,color:s||y.white}),Object(a.jsx)(Cw.Consumer,{children:function(t){return d.map((function(n,r){return e.typeCheckers.instanceOfJobStatus(n)?Object(a.jsx)(wT,{status:n},r):t.has(Dw.NOTES_VIEW)&&e.typeCheckers.instanceOfNote(n)?Object(a.jsx)(vT,{highlightedItemId:l,noteOrReply:n,onEdit:e.allowAction(n)&&i?function(){return i()}:void 0,editable:!!e.allowAction(n),afterEditSuccess:u,onDelete:e.allowAction(n)&&o?function(){return o(n.id)}:void 0},n.id):null}))}})]})}}]),n}(p.PureComponent);function CT(){var e=Object(f.a)(["\n  font-size: ",";\n  display: ",";\n"]);return CT=function(){return e},e}function NT(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n"]);return NT=function(){return e},e}function ET(){var e=Object(f.a)(["\n  float: right;\n  cursor: pointer;\n  margin-top: -3px;\n  margin-right: -8px;\n"]);return ET=function(){return e},e}function AT(){var e=Object(f.a)(["\n  width: 280px;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 4px;\n  border-color: ",";\n  background: ",";\n  margin: 10px auto;\n  padding: 12px;\n  padding-right: 20px;\n  position: relative;\n  overflow: ",";\n  position: relative;\n"]);return AT=function(){return e},e}var TT=Object(x.default)(Kj(["collapsed","overflow"])("div"))(AT(),(function(e){return e.collapsed?"transparent":y.gray2}),(function(e){return e.collapsed?"transparent":y.white}),(function(e){return e.overflow?e.overflow:"hidden"})),IT=x.default.div(ET()),RT=x.default.div(NT(),Bf.bold),DT=Object(x.default)(Kj(["collapsed"])("div"))(CT(),Vf.smaller,(function(e){return e.collapsed?"none":"block"})),MT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state=void 0,r.toggleCollapsed=function(){r.setState({collapsed:!r.state.collapsed})},r.state={collapsed:e.defaultCollapsed||!1,overflow:e.overflow||"hidden"},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.loading,t=this.state,r=t.collapsed,o=t.overflow;return Object(a.jsxs)(TT,{collapsed:r,overflow:o,children:[e&&Object(a.jsx)(av,{size:30,color:r?y.gray1:y.white}),this.props.collapsable&&Object(a.jsx)(IT,{onClick:this.toggleCollapsed,children:Object(a.jsx)(Ff,{name:this.collapseIconName,size:n.iconSize})}),this.props.hasMenu&&Object(a.jsx)(IT,{children:Object(a.jsx)(Ff,{name:Ef.MenuVertical,size:n.iconSize})}),Object(a.jsx)(RT,{children:this.props.caption}),Object(a.jsx)(DT,{collapsed:this.state.collapsed,children:this.props.children})]})}},{key:"collapseIconName",get:function(){return this.state.collapsed?Ef.ArrowDown:Ef.ArrowUp}}]),n}(p.PureComponent);MT.iconSize=16;var PT=MT;function LT(){var e=Object(f.a)(["\n  margin: 5px 0;\n"]);return LT=function(){return e},e}var FT=x.default.div(LT()),UT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(PT,{caption:"Jobs",collapsable:!0,children:[this.props.referrals&&this.props.referrals.map((function(e){return Object(a.jsxs)(FT,{children:[Object(a.jsx)("strong",{children:e.year}),Object(a.jsxs)("p",{children:["Referrals: ",e.referrals,Object(a.jsx)("br",{}),"Jobs (invoice to): ",e.invoice]})]},e.year)})),Object(a.jsx)("div",{children:Object(a.jsx)(Uf.b,{to:"",children:"View jobs"})}),Object(a.jsx)("div",{children:Object(a.jsx)(Uf.b,{to:"",children:"View referrals"})})]})}}]),n}(p.PureComponent);function VT(){var e=Object(f.a)(["\n  font-weight: ",";\n  td {\n    padding-top: 20px;\n  }\n"]);return VT=function(){return e},e}function BT(){var e=Object(f.a)(["\n  text-align: right;\n"]);return BT=function(){return e},e}function JT(){var e=Object(f.a)(["\n  text-align: left;\n"]);return JT=function(){return e},e}function zT(){var e=Object(f.a)(["\n  width: 100%;\n  table-layout: fixed;\n"]);return zT=function(){return e},e}var qT=x.default.table(zT()),WT=x.default.td(JT()),HT=x.default.td(BT()),GT=x.default.tr(VT(),Bf.bold),YT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(PT,{caption:this.props.caption,collapsable:!0,children:Object(a.jsx)(qT,{children:Object(a.jsxs)("tbody",{children:[this.props.receivables&&this.props.receivables.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(WT,{children:e.name}),Object(a.jsx)(HT,{children:e.value})]},e.name)})),Object(a.jsxs)(GT,{children:[Object(a.jsx)(WT,{children:"Total:"}),Object(a.jsx)(HT,{children:this.props.total})]})]})})})}}]),n}(p.PureComponent);function QT(){var e=Object(f.a)(["\n  color: ",";\n"]);return QT=function(){return e},e}function KT(){var e=Object(f.a)(["\n  margin-top: 15px;\n"]);return KT=function(){return e},e}var ZT=x.default.div(KT()),XT=x.default.div(QT(),y.gray5),$T=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.companyName,n=e.people;return Object(a.jsxs)(PT,{caption:"People at ".concat(t),collapsable:!0,children:[!n.length&&Object(a.jsxs)(ZT,{children:["No people at ",t]}),n.map((function(e,t){return Object(a.jsxs)(ZT,{children:[Object(a.jsxs)(Uf.b,{to:"/contacts/".concat(e.contact_category.id,"/edit/").concat(e.id),children:[e.first_name," ",e.last_name]}),Object(a.jsx)(XT,{children:e.job_title})]},t)}))]})}}]),n}(p.PureComponent);function eI(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return eI=function(){return e},e}var tI=x.default.div(eI(),y.blue4,Vf.smaller),nI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).menuProps=void 0,e.clearAndToggle=function(t){t.isExpanded||e.props.onClearSearch(),t.toggle()},e.onSelect=function(t){return e.props.onSelect(t),e.menuProps&&e.menuProps.close(),Promise.resolve()},e.renderUsersMenu=function(t){e.menuProps=t;var n=e.props,r=n.loading,o=n.users;return Object(a.jsx)(kE,{loading:r,mentionsUsers:o,onSelectMentionsUser:e.onSelect,onChangeSearch:e.props.onChangeSearch,onClearSearch:e.props.onClearSearch})},e.renderTrigger=function(t){return Object(a.jsx)(tI,{onClick:function(){return e.clearAndToggle(t)},children:"Add staff"})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(fw,{trigger:this.renderTrigger,menu:this.renderUsersMenu})}}]),n}(p.PureComponent);function rI(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return rI=function(){return e},e}function aI(){var e=Object(f.a)(["\n  margin-top: -15px;\n  padding-bottom: 15px;\n"]);return aI=function(){return e},e}function oI(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return oI=function(){return e},e}var iI,cI=x.default.div(oI()),sI=x.default.div(aI()),lI=x.default.div(rI(),y.blue4,Vf.smaller);!function(e){e.addUser="add",e.deleteUser="delete"}(iI||(iI={}));var uI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,value:e.props.managedAccounts},e.fetchDebounced=Object(m.debounce)(function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.users.fetch(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),350,{leading:!0}),e.getSuggestions=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchDebounced(n);case 2:return r=e.props.users.data,t.abrupt("return",r&&r.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:"".concat(e.full_name)})}))||[]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClearUserSearch=function(){e.props.users.reset()},e.addManageAcc=function(t){var n=e.state.value;return Jv.createManagedAccount(e.props.contactId,t.id).then((function(){return n&&[].concat(Object(Dm.a)(n),[t])}))},e.handleChange=function(t){return function(n){e.setState({loading:!0});var r=Promise.resolve(e.state.value);switch(t){case iI.addUser:r=e.addManageAcc(n);break;case iI.deleteUser:r=e.deleteManageAcc(n)}r.then((function(t){return e.setState({value:t})})).finally((function(){e.props.onUpdate().then((function(){return e.setState({loading:!1})}))}))}},e.handleDelete=e.handleChange(iI.deleteUser),e.handleAdd=e.handleChange(iI.addUser),e}return Object(l.a)(n,[{key:"deleteManageAcc",value:function(e){var t=this.state.value;return Jv.deleteManagedAccount(this.props.contactId,e.id).then((function(){return t&&t.filter((function(t){return t.id!==e.id}))}))}},{key:"render",value:function(){var e=this,t=this.state.value,n=this.state.loading,r=this.props.users.data&&this.props.users.data.data;return Object(a.jsx)(PT,{caption:"Account Management",collapsable:!1,overflow:"visible",children:n?Object(a.jsx)(av,{size:40,color:y.white}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(sI,{children:Object(a.jsx)(nI,{loading:this.props.users.loading,onSelect:this.handleAdd,onChangeSearch:this.getSuggestions,onClearSearch:this.onClearUserSearch,users:r})}),t&&t.length>0?t.map((function(t){return Object(a.jsxs)(cI,{children:[Object(a.jsx)("span",{children:t.full_name}),Object(a.jsx)(lI,{onClick:function(){return e.handleDelete(t)},children:"remove"})]},t.id)})):""]})})}}]),n}(p.PureComponent),dI=Object(LO.compose)(Mm({users:{fetch:function(e){return uE.searchUsers({name:e})}}}))(uI),pI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getPeopleAtCompany=function(){return(e.props.company.subsidiaries||[]).filter((function(e){return!!e.first_name}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.company,r=t.receivables,o=t.referrals,i=t.onLoadTags;return Object(a.jsx)(Cw.Consumer,{children:function(t){return n.id&&n.legal_name&&Object(a.jsxs)(a.Fragment,{children:[t.has(Dw.CONTACTS_UPDATE)&&Object(a.jsx)(dI,{managedAccounts:n.managed_accounts,contactId:n.id,onUpdate:i,contactLoading:e.props.contactLoading}),t.has(Dw.JOBS_VIEW)&&o&&o.length>0&&Object(a.jsx)(UT,{referrals:o}),r&&0!==Object.keys(r).length&&Object(a.jsx)(YT,{receivables:r.rows,total:r.total,caption:"Aged Receivables"}),Object(a.jsx)($T,{companyName:n.legal_name,people:e.getPeopleAtCompany()})]})}})}}]),n}(p.PureComponent),hI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.person,r=t.receivables,o=t.referrals,i=t.onLoadTags;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[n.id&&t.has(Dw.CONTACTS_UPDATE)&&Object(a.jsx)(dI,{managedAccounts:n.managed_accounts,contactId:n.id,onUpdate:i,contactLoading:e.props.contactLoading}),n.parent_company&&Object(a.jsxs)(PT,{caption:"Company",children:[Object(a.jsx)("p",{children:n.parent_company.legal_name}),Object(a.jsx)(Uf.b,{to:"/contacts/".concat(n.parent_company.contact_category.id,"/edit/").concat(n.parent_company.id),children:"View company"})]}),n.id&&Object(a.jsxs)(a.Fragment,{children:[t.has(Dw.JOBS_VIEW)&&o&&o.length>0&&Object(a.jsx)(UT,{referrals:o}),r&&0!==Object.keys(r).length&&Object(a.jsx)(YT,{receivables:r.rows,total:r.total,caption:"Aged Receivables (Company)"})]})]})}})}}]),n}(p.PureComponent),bI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).scrollToHighlightedItem=function(e){if(e){var t=document.getElementById(e);t&&t.scrollIntoView&&t.scrollIntoView(!0)}},e.getHighlightedItem=function(){var t=qm.parse(e.props.location.search,{ignoreQueryPrefix:!0});return{note:+t.note,message:+t.message,itemId:+t.note||+t.message}},e}return n}(p.PureComponent),fI="/v1/finance/payment-terms",mI={getAllPaymentTerm:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(fI),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPaymentTerm:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(fI,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createPaymentTerm:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(fI),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePaymentTerm:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("".concat(fI,"/").concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePaymentTerm:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(fI,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function jI(){var e=Object(f.a)(["\n  width: 300px;\n  border-left: 1px solid ",";\n  background: ",";\n"]);return jI=function(){return e},e}function vI(){var e=Object(f.a)(["\n  position: relative;\n  margin: 0 -30px -30px;\n  min-height: 100px;\n  border-top: 1px solid ",";\n"]);return vI=function(){return e},e}function OI(){var e=Object(f.a)(["\n  padding: 0 0 10px 0;\n  margin: 0 0 10px 0;\n  border-bottom: 1px solid ",";\n  cursor: pointer;\n\n  :last-of-type {\n    border: 0;\n    margin: 0;\n  }\n"]);return OI=function(){return e},e}function gI(){var e=Object(f.a)(["\n  margin-bottom: 80px;\n"]);return gI=function(){return e},e}function xI(){var e=Object(f.a)(["\n  margin: 10px -30px 40px -30px;\n  padding: 0 30px 40px 30px;\n  overflow: hidden;\n  position: relative;\n  border-bottom: 1px solid ",";\n"]);return xI=function(){return e},e}var yI=x.default.div(xI(),y.gray2),wI=x.default.div(gI()),_I=x.default.div(OI(),y.gray2),kI=x.default.div(vI(),y.gray2),SI=x.default.div(jI(),y.gray2,y.gray1),CI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={note:"",meetingNote:"",loading:!1,savingMeeting:!1,updateByMe:!1},e.newEntityPosted=!1,e.notesCounter=function(e){return e.contactNotes.data?e.contactNotes.data.data.length:0},e.joinContactChannels=function(){var t=e.props,n=t.match,r=t.user,a=n.params.id;aj().private("contact-".concat(a)).listen(".contact.updated",(function(t){r.me&&e.setState({updateByMe:r.me.id===t.notification.sender.id}),e.debouncedFetchContact(!0)}))},e.loadContactTags=function(){var t=e.props,n=t.match;return t.tags.fetch(n.params.id)},e.fetchContact=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s=arguments;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]&&s[0],r=e.props,a=r.contactNotes,o=r.match,i=r.contact,!o.params.id){t.next=11;break}if(!n){t.next=9;break}return e.loadContactTags(),a.fetch(o.params.id),t.next=8,i.fetch(o.params.id);case 8:e.setState({updateByMe:!1});case 9:t.next=14;break;case 11:c={data:{contact_type:o.params.type,default_payment_terms_days:30,contact_category:{id:+o.params.category},address:{type:tv.street},mailing_address:{type:tv.mailing}}},i.init(c),e.setState({updateByMe:!1});case 14:case"end":return t.stop()}}),t)}))),e.debouncedFetchContact=Object(m.debounce)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.fetchContact(t)}),500),e.updateContact=function(t){return e.newEntityPosted=!1,e.createOrUpdateContactAndAddresses(t).then(e.handlePartialUpdates).then(e.linkEntitiesToContact(t)).then((function(t){t&&t.data.id&&!e.props.match.params.id?e.props.history.push("/contacts/".concat(e.props.match.params.category,"/edit/").concat(t.data.id)):e.newEntityPosted&&e.fetchContact()}))},e.needToUpdateContact=function(t){var r=e.props.contact.data.data;return!!(t.contact_type===ev.person?n.commonContactFields.concat(n.personContactFields):n.commonContactFields.concat(n.companyContactFields)).find((function(e){return!Object(m.isEqual)(t[e],r[e])}))},e.needToUpdateEntity=function(t,n){var r=e.props.contact.data.data;return!(!t[n]||r[n]&&!Object.keys(t[n]).find((function(e){return t[n][e]!==r[n][e]})))},e.createOrUpdateContactAndAddresses=function(t){var n=[],r=e.needToUpdateContact(t),a=!!t.address&&e.needToUpdateEntity(t,"address"),o=!!t.mailing_address&&e.needToUpdateEntity(t,"mailing_address");return r&&n.push(e.createOrUpdateContact(t).catch(Pg)),a&&n.push(e.createOrUpdateAddress(t.address).catch(Pg)),o&&n.push(e.createOrUpdateAddress(t.mailing_address).catch(Pg)),Promise.all(n).then((function(e){return{contact:r?e.shift():void 0,address:a?e.shift():void 0,mailingAddress:o?e.shift():void 0}}))},e.updateWithoutFetch=function(t,n,r){var a=t&&t.data,o=n&&sg.expandAddress(n),i=r&&sg.expandAddress(r),s=a||{};o&&(s.address=Object(c.a)(Object(c.a)({},o),{},{type:e.props.contact.data.data.address.type})),i&&(s.mailing_address=Object(c.a)(Object(c.a)({},i),{},{type:e.props.contact.data.data.mailing_address.type})),e.props.contact.init({data:Object(c.a)(Object(c.a)({},e.props.contact.data.data),s)})},e.createOrUpdateContact=function(t){var n=e.props.contact.data.data.id;return(n?Jv.update(n,Ev(t)):e.createContact(t)).then((function(e){return Jv.getContactById(e.data.id)})).then((function(t){var r=n?mS(t.data.id,t.data):jS(t.data);return e.props.dispatch(r),e.newEntityPosted=e.newEntityPosted||!n,t}))},e.createContact=function(e){var t=Object(c.a)(Object(c.a)({},e),{},{contact_category_id:e.contact_category&&e.contact_category.id});return e.contact_type===ev.company?Jv.createCompany(Ev(t)):Jv.createPerson(Ev(t))},e.createOrUpdateAddress=function(t){if(!t||!t.suburb&&!t.address_line_1)return Promise.resolve();var n=t.id?sg.update(t.id,t):sg.create(t);return e.newEntityPosted=e.newEntityPosted||!t.id,n},e.handlePartialUpdates=function(t){var n,r,a,o,i="error_code",c=t.address,s=t.mailingAddress,l=t.contact;return c&&c.hasOwnProperty(i)&&(n=c),s&&s.hasOwnProperty(i)&&(r=s),l&&l.hasOwnProperty(i)&&(a=l),n||r||a?(o=a?a.fields:{},n&&(o.address=n.fields),r&&(o.mailing_address=r.fields),Lg(o)):(e.newEntityPosted||e.updateWithoutFetch(l,c,s),Promise.resolve(t))},e.linkEntitiesToContact=function(t){return function(n){var r,a,o=e.props.contact.data.data,i=!!(null===(r=o.address)||void 0===r?void 0:r.id),s=!!(null===(a=o.mailing_address)||void 0===a?void 0:a.id),l=e.wasChangedCompany(t),u=n.contact,d=n.address,p=n.mailingAddress,h=u?u.data.id:o.id,b=[];if(h&&!i&&d&&b.push(Jv.addContactAddress(h,d.data,tv.street)),h&&!s&&p&&b.push(Jv.addContactAddress(h,p.data,tv.mailing)),h&&l){var f=t.parent_company;if(f)b.push(Jv.linkPersonToCompany(h,f).then((function(){e.props.contact.init({data:Object(c.a)(Object(c.a)({},e.props.contact.data.data),{},{parent_company:f})})})));else{var m=e.props.contact.data.data.parent_company;m&&b.push(Jv.unlinkPersonFromCompany(h,m))}}return Promise.all(b).then((function(){return u}))}},e.wasChangedCompany=function(t){if(t.contact_type===ev.person){var n=t,r=e.props.contact.data.data;return!n.parent_company||n.parent_company.id!==(r.parent_company&&r.parent_company.id)}},e.redirectToNotes=function(){e.props.history.push("/contacts/".concat(e.props.match.params.category,"/edit/").concat(e.props.match.params.id,"?note=true"))},e.redirectToMeetings=function(){e.props.history.push("/contacts/".concat(e.props.match.params.category,"/edit/").concat(e.props.match.params.id,"?meeting=true"))},e.isNoteEditorVisible=function(){return"true"===qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.isMeetingEditorVisible=function(){return"true"===qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}).meeting},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.contact.data,o=r.contactNotes,i=r.match,!a||!a.data.id){t.next=7;break}return t.next=4,$E.addNoteToContact(n.id,a.data.id);case 4:return t.next=6,o.fetch(a.data.id);case 6:e.props.history.replace("/contacts/".concat(i.params.category,"/edit/").concat(i.params.id));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmitMeeting=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.contactNotes,o=r.match,i=r.contact.data,c=i.data,e.setState({savingMeeting:!0}),t.prev=3,t.next=6,wA.createMeeting(n);case 6:if(s=t.sent,!c.id){t.next=18;break}return t.next=10,$E.postNote(n.note);case 10:return l=t.sent,u=l.data,t.next=14,$E.addNoteToContact(u.id,c.id,{meeting_id:s.data.id});case 14:return e.setState({savingMeeting:!1}),e.props.history.replace("/contacts/".concat(o.params.category,"/edit/").concat(o.params.id)),t.next=18,a.fetch(c.id);case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(3),e.setState({savingMeeting:!1});case 23:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e.beforeSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.match.url.includes("/create/"),o=+(e.props.match.params.category||""),i=e.props.dispatch,r){t.next=5;break}return t.abrupt("return",e.updateContact(n));case 5:return e.setState({loading:!0}),t.next=8,Jv.getContacts({contact_category_id:o,contact_type:n.contact_type,term:"".concat(n.legal_name)});case 8:if(!((c=t.sent).data.length>0)){t.next=15;break}return t.next=12,i(Sw("Confirm","Do you really want to create new contact?",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(FS,{margin:"0 0 20px 0",children:["Similar ",c.data.length," ",1===c.data.length?"company":"companies"," found:"," "]}),c.data.map((function(e){return Object(a.jsxs)(_I,{onClick:function(){window.open("/contacts/".concat(o,"/edit/").concat(e.id))},children:[Object(a.jsx)(FS,{color:y.black0,weight:Bf.bold,children:Jv.getContactName(e)}),Object(a.jsx)(FS,{color:y.gray5,children:e.addresses[0]&&e.addresses[0].full_address}),Object(a.jsx)(FS,{color:y.gray5,children:e.website})]},e.id)}))]})));case 12:s=t.sent,t.next=16;break;case 15:s=!0;case 16:if(!s){t.next=18;break}return t.abrupt("return",e.updateContact(n).then((function(){e.setState({loading:!1})})));case 18:return e.setState({loading:!1}),t.abrupt("return",Promise.resolve(!0));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSortedNotes=function(){var t=e.props.contactNotes;return t.data?t.data.data.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})):[]},e.loadContactNotes=function(){e.props.contactNotes.fetch(e.props.match.params.id)},e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.joinContactChannels(),this.fetchContact(!0),this.scrollToHighlightedItem(this.getHighlightedItemSelector()),this.props.paymentTerms.fetch()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.id,n=e.match.params.id;t!==n&&(this.props.contact.reset(),aj().leave("contact-".concat(n)),this.joinContactChannels(),this.fetchContact(!0)),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.id;aj().leave("contact-".concat(e))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.contact,o=n.tags,i=n.contactNotes,s=n.user,l=n.match,u=n.paymentTerms,d=r.data,p=r.loading,h=this.state,b=h.updateByMe,f=h.savingMeeting,m={tags:o.data.data,onSubmit:this.updateContact,onUpdate:this.debouncedFetchContact,loading:p,redirectToNotes:this.redirectToNotes,redirectToMeetings:this.redirectToMeetings,categoryId:+(l.params.category||""),isNew:this.props.match.url.includes("/create/"),paymentTerms:null===(e=u.data)||void 0===e?void 0:e.data};return d?Object(a.jsx)(Cw.Consumer,{children:function(e){var n=!e.has(m.isNew?Dw.CONTACTS_CREATE:Dw.CONTACTS_UPDATE),r=e.has(Dw.MEETINGS_CREATE);return Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[d.data.id&&Object(a.jsx)(PN,{contact:d.data,contactTags:o.data?o.data.data:[],onNoteAdd:t.redirectToNotes,onMeetingAdd:t.redirectToMeetings,newContact:m.loading&&!b,onUpdate:t.debouncedFetchContact,onTagsUpdate:t.loadContactTags}),Object(a.jsxs)(hC,{children:[Object(a.jsxs)("div",{style:{position:"relative"},children:[m.loading&&!b&&Object(a.jsx)(av,{size:40,color:y.white}),t.isNoteEditorVisible()&&Object(a.jsx)(yI,{children:Object(a.jsx)(dA,{afterSave:t.saveNoteDraft,color:y.orange0,disableTemplatesControl:!0,onCancel:t.revertBackToNotes})}),t.isMeetingEditorVisible()&&r&&Object(a.jsxs)(yI,{children:[f&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(xA,{onSubmit:t.onSubmitMeeting})]}),Object(a.jsx)(wI,{children:d?d.data.contact_type===ev.company?d.data.id?Object(a.jsx)(NA,{tags:m.tags,company:d.data,onUpdate:t.debouncedFetchContact,disabled:n,loadTags:t.loadContactTags}):Object(a.jsx)("h2",{children:"New company"}):d.data.id?Object(a.jsx)(MA,{person:d.data,tags:o.data.data,onUpdate:t.debouncedFetchContact,disabled:n,loadTags:t.loadContactTags}):Object(a.jsx)("h2",{children:"New contact"}):null}),function(){var e,r,o,i;return d?d.data.contact_type===ev.company?Object(a.jsx)(qA,{company:Object(c.a)(Object(c.a)({},d.data),null===(e=t.props.location.state)||void 0===e?void 0:e.contact),initialValues:Object(c.a)(Object(c.a)({},d.data),null===(r=t.props.location.state)||void 0===r?void 0:r.contact),onSubmit:t.beforeSubmit,disabled:n,paymentTerms:m.paymentTerms}):Object(a.jsx)(Ig,{person:Object(c.a)(Object(c.a)({},d.data),null===(o=t.props.location.state)||void 0===o?void 0:o.contact),initialValues:Object(c.a)(Object(c.a)({},d.data),null===(i=t.props.location.state)||void 0===i?void 0:i.contact),onSubmit:t.beforeSubmit,contactCategory:m.categoryId,disabled:n,paymentTerms:m.paymentTerms}):null}()]}),i.data&&(i.loading||i.data.data&&i.data.data.length>0)&&Object(a.jsx)(kI,{children:Object(a.jsx)(ST,{notes:t.getSortedNotes(),user:s,loading:i.loading,highlightedItemId:t.getHighlightedItem().itemId,afterEditSuccess:t.loadContactNotes})})]})]}),Object(a.jsx)(SI,{className:"flex-shrink-0",children:d?d.data.contact_type===ev.company?Object(a.jsx)(pI,{company:d.data,onLoadTags:t.loadContactTags,contactLoading:m.loading&&!b,receivables:{},referrals:[]}):Object(a.jsx)(hI,{person:d.data,onLoadTags:t.loadContactTags,contactLoading:m.loading&&!b,receivables:{},referrals:[]}):null})]})}}):Object(a.jsx)("div",{className:"d-flex h-100",style:{position:"relative"},children:Object(a.jsx)(av,{size:40,color:y.white})})}}]),n}(bI);CI.personContactFields=["first_name","last_name","job_title","direct_phone","mobile_phone","payment_term"],CI.companyContactFields=["legal_name","default_payment_terms_days","payment_term","abn","website","trading_name","group_of_companies"],CI.commonContactFields=["id","email","business_phone"];var NI=Object(LO.compose)(v.g,Object(b.b)((function(e){return{user:e.user}})),Mm({contact:{fetch:Jv.findById},tags:{fetch:Jv.getTags,initialData:{data:[]}},contactNotes:{fetch:$E.getContactNotesAndMeetings,initialData:{data:[]}},paymentTerms:{fetch:mI.getAllPaymentTerm}}))(CI),EI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.exact,r=e.path;return this.isAllowAccess?Object(a.jsx)(v.b,{exact:n,path:r,component:t}):Object(a.jsx)(v.a,{to:"/unauthorized"})}},{key:"isAllowAccess",get:function(){var e=this.props.permission;switch(typeof e){case"function":return e(this.context.has);default:return this.context.has(e)}}}]),n}(p.PureComponent);EI.contextType=Cw;var AI=EI,TI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(sC,{category:e.params.category}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(uC,{className:"h-100",children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{exact:!0,path:e.path,component:xC}),Object(a.jsx)(AI,{exact:!0,path:"".concat(e.path,"/create/:type"),component:NI,permission:Dw.CONTACTS_CREATE}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(e.path,"/edit/:id"),component:NI}),Object(a.jsx)(v.a,{to:e.url})]})})})]})}}]),n}(p.PureComponent),II=Object(LO.compose)(v.g,Mm({category:{fetch:Jv.findCategoryById}}))(TI);function RI(){var e=Object(f.a)(["\n  height: ","px;\n  background: ",";\n  display: inherit;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n"]);return RI=function(){return e},e}var DI=x.default.div(RI(),50,y.purple1),MI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(DI,{className:this.props.className,children:this.props.children})}}]),n}(h.a.PureComponent),PI=n(544);function LI(){var e=Object(f.a)(["\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  color: ",";\n  display: block;\n  height: calc(2.25rem + 2px);\n"]);return LI=function(){return e},e}function FI(){var e=Object(f.a)(["\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]);return FI=function(){return e},e}var UI=x.default.div(FI(),y.white,y.white),VI=x.default.div(LI(),y.white,y.white);function BI(){var e=Object(f.a)(["\n  max-width: 100%;\n  white-space: normal;\n  word-break: break-word;\n  display: block;\n"]);return BI=function(){return e},e}function JI(){var e=Object(f.a)([""]);return JI=function(){return e},e}function zI(){var e=Object(f.a)(["\n  color: #e7e7e7;\n  top: 50%;\n  font-weight: bold;\n"]);return zI=function(){return e},e}var qI,WI,HI=x.default.label(zI()),GI=x.default.span(JI()),YI=(x.default.div(BI()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={opened:!1},e.loadSuburbs=function(t){var n,r,a,o,i=null===(n=e.props.state)||void 0===n||null===(r=n.id)||void 0===r?void 0:r.toString(),c=null===(a=e.props.country)||void 0===a||null===(o=a.id)||void 0===o?void 0:o.toString();return sg.searchSuburbs(t||"",c,i,20).then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name||e.name===t.name&&+e.postcode>+t.postcode?1:-1})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.loadCountries=function(t){return sg.searchByCountry(t||"").then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name?1:n})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.loadStates=function(t){var n,r,a=null===(n=e.props.country)||void 0===n||null===(r=n.id)||void 0===r?void 0:r.toString();return console.log(a),sg.searchByStates(t||"",a).then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name?1:n})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.handleCountryChange=function(t){t&&(e.props.change("state",null),e.props.change("suburb",null))},e.handleStateChange=function(t){t&&e.props.change("suburb",null)},e.handleSuburbChange=function(e){},e.debouncedLoadCountries=_v()(e.loadCountries,1e3),e.debouncedLoadStates=_v()(e.loadStates,1e3),e.debouncedLoadSuburbs=_v()(e.loadSuburbs,1e3),e.addShowPostcodeFlag=function(e){return e.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{showPostcode:!1,label:e.name,value:e.id})}))},e.getSuburbOptionLabel=function(t){if(!t.id)return"";var n=t,r=e.props.states.data&&e.props.states.data.data.find((function(e){return e.id===n.state_id}));return Object(a.jsx)(lO,{children:Object(a.jsxs)("div",{className:"text-truncate",children:[t.name," ",Object(a.jsxs)(GI,{children:[r&&r.code," ",t.postcode]})]})})},e.toggleView=function(){var t=e.state.opened;e.setState({opened:!t}),t&&e.resetFilters()},e.resetFilters=function(){var t=e.props.change;t("country",null),t("state",null),t("suburb",null),t("contactType",null)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.opened;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"row m-0 d-flex align-items-center h-100",children:[Object(a.jsx)("div",{className:"col-2 pr-0",children:Object(a.jsx)(VI,{children:Object(a.jsx)(HI,{children:"Contacts"})})}),Object(a.jsx)("div",{className:"col-1 p-0",children:Object(a.jsx)(VI,{children:Object(a.jsx)(Wk,{name:Ef.Filter,onClick:this.toggleView,"data-tip":"Filter","data-for":"jobs-sidebar-tooltip"})})}),e?Object(a.jsx)("div",{className:"col-9",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3 p-0",children:Object(a.jsx)(VI,{children:Object(a.jsx)(yv.a,{name:"country",placeholder:"Select Country",component:rO,loadOptions:this.debouncedLoadCountries,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:this.handleCountryChange,isClearable:!0,className:"m-0"})})}),Object(a.jsx)("div",{className:"col-3 p-0",children:Object(a.jsx)(VI,{children:Object(a.jsx)(yv.a,{name:"state",placeholder:"Select State",loadOptions:this.debouncedLoadStates,getOptionValue:function(e){return null!==e.id?e.id.toString():null},getOptionLabel:function(e){return e.name},component:rO,onChange:this.handleStateChange,isClearable:!0,className:"m-0"})})}),Object(a.jsx)("div",{className:"col-3 p-0",children:Object(a.jsx)(VI,{children:Object(a.jsx)(yv.a,{name:"suburb",placeholder:"Select Suburb",loadOptions:this.debouncedLoadSuburbs,getOptionValue:function(e){return e.id&&e.id.toString()},getOptionLabel:this.getSuburbOptionLabel,onChange:this.handleSuburbChange,component:rO,isClearable:!0,className:"m-0"})})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"contactType",placeholder:"Select Type",onChange:this.handleSuburbChange,component:Kv,isClearable:!0,isSearchable:!1,options:[{value:ev.person,label:"Persons"},{value:ev.company,label:"Companies"}],className:"m-0"})})]})}):null]})})}}]),n}(p.PureComponent)),QI=Object(LO.compose)(Object(Gj.a)({form:"ContactFilterForm"}),Object(b.b)((function(e){return Object(c.a)({states:e.allStates,countries:e.allCountries},{country:(t=Object(PI.a)("ContactFilterForm"))(e,"country"),state:t(e,"state"),suburb:t(e,"suburb"),contactType:t(e,"contactType")});var t})))(YI);!function(e){e[e.customer=0]="customer",e[e.supplier=1]="supplier",e[e.insurer=2]="insurer",e[e.broker=3]="broker",e[e.loss_adjustor=4]="loss_adjustor",e[e.company_location=5]="company_location"}(WI||(WI={}));var KI=(qI={},Object(k.a)(qI,WI.customer,"Customers"),Object(k.a)(qI,WI.supplier,"Suppliers"),Object(k.a)(qI,WI.insurer,"Insurers"),Object(k.a)(qI,WI.broker,"Broker"),Object(k.a)(qI,WI.loss_adjustor,"Loss adjustor"),Object(k.a)(qI,WI.company_location,"Company location"),qI),ZI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onContactFilterChange=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){um.status("Contacts"),this.props.categories.fetch()}},{key:"componentWillUnmount",value:function(){um.reset()}},{key:"getContactsMenuItems",value:function(){var e=this;return this.props.categories.data?this.props.categories.data.data.sort((function(e,t){return WI[e.type]<WI[t.type]?-1:1})).map((function(t){var n="/contacts/".concat(t.id),r=Jv.getCategoryIcon(t.type),a=!!Object(v.f)(e.props.location.pathname,{path:n}),o=KI[WI[t.type]];return{path:n,icon:r,isActive:a,hint:o,title:"Contacts - ".concat(o)}})):[]}},{key:"render",value:function(){var e=this.props,t=e.match,n=e.categories;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(MI,{className:"sub-header p-0",children:Object(a.jsx)(QI,{})}),Object(a.jsxs)("div",{className:"d-flex flex-row align-items-stretch content",children:[Object(a.jsx)(eS,{items:this.getContactsMenuItems(),children:n.loading&&Object(a.jsx)(av,{size:40,color:y.gray1})}),Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(t.url,"/:category"),component:II}),n.data&&n.data.data.length>0&&Object(a.jsx)(v.a,{to:"".concat(t.url,"/").concat(n.data.data[0].id)})]})]})]})}}]),n}(p.PureComponent),XI=Object(LO.compose)(v.g,Mm({categories:{fetch:Jv.getCategories}}))(ZI);function $I(){var e=Object(f.a)(["\n  background: ",";\n  padding: 20px;\n  color: ",";\n"]);return $I=function(){return e},e}var eR=x.default.h1($I(),y.red1,y.white),tR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"container h-100",children:Object(a.jsx)("div",{className:"row align-items-center justify-content-center h-100",children:Object(a.jsxs)("div",{className:"col-lg-12",children:[Object(a.jsx)(eR,{children:"Page not found"}),"Please try following links:",Object(a.jsx)("div",{children:Object(a.jsx)(Uf.b,{to:"/login",children:"Login"})})]})})})}}]),n}(p.PureComponent),nR=Object(v.g)(tR);function rR(){var e=Object(f.a)(["\n  line-height: 0;\n  padding: "," 20px;\n  background: transparent;\n  color: ",";\n  font-weight: ",";\n"]);return rR=function(){return e},e}function aR(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  padding: .25rem 20px;\n  color: ",";\n  font-size: 12px;\n  :not(:first-child){\n    margin-top: 10px;\n  }\n"]);return aR=function(){return e},e}function oR(){var e=Object(f.a)(["\n  line-height: ",";\n"]);return oR=function(){return e},e}function iR(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  border-right: 1px solid ",";\n  width: 210px;\n"]);return iR=function(){return e},e}var cR=x.default.nav(iR(),y.gray0,y.gray2),sR=x.default.div(oR(),Vf.normal),lR=x.default.div(aR(),y.gray4),uR=Object(x.default)(Uf.b)(rR(),Vf.normal,(function(e){return e.isActive?y.blue4:y.black0}),Bf.normal),dR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(cR,{className:"flex-shrink-0",children:[this.props.items.map((function(e){return Object(a.jsxs)(p.Fragment,{children:[e.header&&Object(a.jsx)(lR,{children:e.header}),Object(a.jsx)(uR,{to:e.path,className:"nav-link",isActive:e.isActive,children:Object(a.jsx)("div",{className:"d-flex flex-row align-items-center",children:Object(a.jsx)(sR,{children:e.label})})},e.path)]},e.path)})),this.props.children]})}}]),n}(p.PureComponent);function pR(){var e=Object(f.a)(["\n  width: 300px;\n  border-left: 1px solid ",";\n  background: ",";\n  min-height: 100%;\n  position: relative;\n"]);return pR=function(){return e},e}var hR,bR=x.default.div(pR(),y.gray2,y.gray1),fR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(bR,{className:"flex-shrink-0",children:this.props.children})}}]),n}(p.PureComponent);function mR(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 15px 0 10px;\n  height: 1px;\n  border-top: 1px solid ",";\n"]);return mR=function(){return e},e}function jR(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 20px;\n  padding: 5px 8px;\n  border-radius: 5px;\n  border: 2px solid ",";\n  background: ",";\n  font-weight: ",";\n"]);return jR=function(){return e},e}function vR(){var e=Object(f.a)(["\n  line-height: 1.5;\n  font-weight: ",";\n"]);return vR=function(){return e},e}function OR(){var e=Object(f.a)(["\n  margin: 8px 0;\n  font-weight: ",";\n"]);return OR=function(){return e},e}function gR(){var e=Object(f.a)(["\n  display: flex;\n  .financiels-reference-label {\n    flex-basis: 100%;\n  }\n"]);return gR=function(){return e},e}var xR,yR=x.default.div(gR()),wR=Object(x.default)(yR)(OR(),Bf.bold),_R=Object(x.default)(yR)(vR(),Bf.bold),kR=Object(x.default)(yR)(jR(),(function(e){return e.profit>=55?y.green1:y.orange1}),(function(e){return e.profit>=55?y.green0:y.orange0}),Bf.bold),SR=x.default.div(mR(),y.gray2);!function(e){e.Labour="Labour",e.Equipment="Equipment",e.Materials="Materials",e.PO="PO",e.Required="Required",e.Budget="Budget",e.Used="Used",e.Remaining="Remaining",e.GrossProfit="GrossProfit"}(xR||(xR={}));var CR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).topValues=[xR.Labour,xR.Equipment,xR.Materials,xR.PO],e.budgetValues=[xR.Used,xR.Remaining],e}return Object(l.a)(n,[{key:"renderLabelAndValue",value:function(e){var t=n.fields[e],r=t.label,o=t.key,i=t.percents,c=this.props.financials[o];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",children:r}),c&&Object(a.jsx)("div",{className:"financiels-reference-value",children:this.formatValue(c,i)})]})}},{key:"formatValue",value:function(e,t){return t?"".concat(e,"%"):Kf(e)}},{key:"renderRows",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(yR,{children:t.renderLabelAndValue(e)},"fnc-".concat(e))}))}},{key:"render",value:function(){var e=this.props.financials.grossProfit;return Object(a.jsxs)(PT,{caption:"Financials",collapsable:!0,defaultCollapsed:!0,children:[this.renderRows(this.topValues),Object(a.jsx)(wR,{children:this.renderLabelAndValue(xR.Required)}),Object(a.jsx)(SR,{}),Object(a.jsx)(_R,{children:this.renderLabelAndValue(xR.Budget)}),this.renderRows(this.budgetValues),Object(a.jsx)(kR,{profit:e,children:this.renderLabelAndValue(xR.GrossProfit)})]})}}]),n}(p.PureComponent);CR.fields=(hR={},Object(k.a)(hR,xR.Labour,{label:"Labour",key:"labour",percents:!0}),Object(k.a)(hR,xR.Equipment,{label:"Equipment",key:"equipment",percents:!0}),Object(k.a)(hR,xR.Materials,{label:"Materials",key:"materials",percents:!0}),Object(k.a)(hR,xR.PO,{label:"PO and Others",key:"purchase_orders",percents:!0}),Object(k.a)(hR,xR.Required,{label:"Required to meet GP",key:"required",percents:!1}),Object(k.a)(hR,xR.Budget,{label:"Budget",key:"budget",percents:!1}),Object(k.a)(hR,xR.Used,{label:"Used",key:"used",percents:!1}),Object(k.a)(hR,xR.Remaining,{label:"Remaining",key:"remaining",percents:!1}),Object(k.a)(hR,xR.GrossProfit,{label:"Gross Profit",key:"used",percents:!1}),hR);var NR=CR;function ER(){var e=Object(f.a)(["\n  vertical-align: sub;\n  margin-right: 4px;\n\n  & path,\n  circle {\n    stroke: ",";\n  }\n"]);return ER=function(){return e},e}function AR(){var e=Object(f.a)(["\n  margin-top: 5px;\n  color: ",";\n"]);return AR=function(){return e},e}function TR(){var e=Object(f.a)(["\n  list-style-type: none;\n  padding-left: 0;\n  margin: 0;\n"]);return TR=function(){return e},e}function IR(){var e=Object(f.a)(["\n  display: inline-block;\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return IR=function(){return e},e}function RR(){var e=Object(f.a)(["\n  color: ",";\n  font-size: ",";\n  margin-right: 10px;\n"]);return RR=function(){return e},e}var DR=x.default.span(RR(),y.gray4,Vf.smaller),MR=x.default.div(IR(),y.blue4,Vf.smaller),PR=x.default.ul(TR()),LR=x.default.div(AR(),y.orange2),FR=Object(x.default)(Ff)(ER(),y.orange2),UR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showMoreInfo:!1},e.toggleMoreInfo=function(){e.setState({showMoreInfo:!e.state.showMoreInfo})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.contact,t=e.mobile_phone,n=e.direct_phone,r=e.business_phone,o=e.mailing_address,i=e.addresses,c=e.email,s=e.assignment_type,l=e.website,u=e.tags,d=c||r||t||n||l,p=i&&i.find((function(e){return e.type===tv.street}))||o,h=Jv.getContactName(this.props.contact)||c||"";return Object(a.jsxs)(PT,{caption:h,hasMenu:!1,children:[p&&p.full_address,this.state.showMoreInfo&&d&&Object(a.jsxs)(PR,{children:[r&&Object(a.jsx)("li",{children:"Business Phone: ".concat(r)}),t&&Object(a.jsx)("li",{children:"Mobile Phone: ".concat(t)}),n&&Object(a.jsx)("li",{children:"Direct Phone: ".concat(n)}),c&&Object(a.jsxs)("li",{children:["Email: ",Object(a.jsx)("a",{href:"mailto:".concat(c),target:"_blank",rel:"noreferrer",children:c})]}),l&&Object(a.jsxs)("li",{children:["Website: ",Object(a.jsx)("a",{href:l,target:"_blank",rel:"noreferrer",children:l})]})]}),Object(a.jsxs)("div",{children:[s&&Object(a.jsx)(DR,{children:s.name}),d&&Object(a.jsx)(MR,{onClick:this.toggleMoreInfo,children:this.state.showMoreInfo?"less":"more"}),u&&u.find((function(e){return e.is_alert}))&&Object(a.jsxs)(LR,{children:[Object(a.jsx)(FR,{name:Ef.Alert,size:18})," Alerts"]})]})]})}}]),n}(p.PureComponent),VR="Steamatic/CurrentJob/LOAD_JOB",BR="Steamatic/CurrentJob/LOAD_JOB_COMPLETE",JR="Steamatic/CurrentJob/RESET",zR="Steamatic/CurrentJob/ERROR",qR="Steamatic/CurrentJob/UPDATE_JOB",WR="Steamatic/CurrentJob/ASSIGN_TAG",HR="Steamatic/CurrentJob/REMOVE_TAG",GR="Steamatic/CurrentJob/UPDATE_LINKED_JOBS",YR=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case BR:return t.payload;case JR:return null;case qR:return e?Object(c.a)(Object(c.a)({},e),{},{site_address:t.payload.data.site_address,site_address_id:t.payload.data.site_address_id,site_address_lat:t.payload.data.site_address_lat,site_address_lng:t.payload.data.site_address_lng}):null;case WR:return e?Object(c.a)(Object(c.a)({},e),{},{tags:Object(m.uniqBy)([].concat(Object(Dm.a)(e.tags),[t.payload]),"id")}):null;case HR:return e?Object(c.a)(Object(c.a)({},e),{},{tags:e.tags.filter((function(e){return e.id!==t.payload.id}))}):null;case GR:return e?Object(c.a)(Object(c.a)({},e),{},{linked_jobs:t.payload}):null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case zR:return t.payload;case BR:case JR:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case VR:return!0;case BR:case JR:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case BR:return!0;case JR:return!1;default:return e}}}),QR=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o,i,c,s,l;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),(null===(o=s.currentJob)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id)===+e&&!t||(null===(c=s.currentJob)||void 0===c?void 0:c.loading)){n.next=5;break}return n.abrupt("return",iS(VR,BR,zR,(function(){return ly.findById(e)}))(r));case 5:return n.abrupt("return",null===(l=s.currentJob)||void 0===l?void 0:l.data);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},KR=function(){return{type:JR}},ZR=function(e){return{type:qR,payload:{data:e}}},XR=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ly.assignTag(e,t.id);case 3:r({type:WR,payload:t}),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},$R=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ly.removeTag(e,t.id);case 3:r({type:HR,payload:t}),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},eD=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ly.getLinkedJobs(e);case 2:r=t.sent,n({type:GR,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},tD=function(e,t){return function(n){var r=[];return t.forEach((function(t){r.push(ly.linkJobs(e,t))})),Promise.all(r).then((function(){n(eD(e))}))}},nD=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,ly.removeLink(e,t.id);case 2:void 0!==n.sent&&r(eD(e));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function rD(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return rD=function(){return e},e}function aD(){var e=Object(f.a)(["\n  display: inline;\n"]);return aD=function(){return e},e}var oD=Object(x.default)(Uf.b)(aD()),iD=x.default.div(rD()),cD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isRemoving:!1},e.removeHandler=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,o=n.jobId,i=n.linkedJob,t.next=3,r(Sw("Confirm","Remove Linked Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove linked Job ",Object(a.jsx)("strong",{children:ly.getJobName(i)}),"?"]})));case 3:if(!t.sent){t.next=14;break}return t.prev=5,t.next=8,r(nD(o,i));case 8:return t.abrupt("return",Promise.resolve());case 9:return t.prev=9,e.setState({isRemoving:!0}),t.finish(9);case 12:t.next=15;break;case 14:return t.abrupt("return",Promise.reject(!0));case 15:case"end":return t.stop()}}),t,null,[[5,,9,12]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.linkedJob,n=e.disabled,r=this.state.isRemoving;return Object(a.jsxs)(iD,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(oD,{to:"/job/".concat(t.id,"/details"),children:ly.getJobName(t)}),": ".concat(t.latest_status.status)]}),r&&Object(a.jsx)(oD,{to:"#",children:"removing..."}),!r&&!n&&Object(a.jsx)(oD,{to:"#",onClick:this.removeHandler,children:"remove"})]})}}]),n}(p.PureComponent),sD=Object(b.b)()(cD);function lD(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n"]);return lD=function(){return e},e}function uD(){var e=Object(f.a)(["\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  margin-bottom: 2px;\n"]);return uD=function(){return e},e}function dD(){var e=Object(f.a)(["\n  color: ",";\n"]);return dD=function(){return e},e}function pD(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-weight: ",";\n"]);return pD=function(){return e},e}function hD(){var e=Object(f.a)(["\n  padding: 10px 0;\n  border-top: 1px solid ","\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n  \n  :last-child {\n    border-bottom: 0;\n  }\n"]);return hD=function(){return e},e}var bD=x.default.div(hD(),y.gray2),fD=x.default.div(pD(),Bf.bold),mD=x.default.div(dD(),y.gray5),jD=Object(x.default)(NC)(uD(),Vf.normal),vD=x.default.div(lD()),OD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){var t=e.props,n=t.checkbox,r=t.job;!n&&e.props.onSelectJob&&e.props.onSelectJob(!0,r.id)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.tags.fetch(this.props.job.id)}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.tags,r=n.data,o=n.loading;return Object(a.jsxs)(bD,{onClick:this.handleClick,children:[Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("div",{children:["#",t.id]}),Object(a.jsx)(fD,{children:t.site_address&&t.site_address.contact_name})]}),Object(a.jsx)(mD,{children:t.site_address&&t.site_address.full_address})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(vD,{children:[Object(a.jsx)(jD,{tag:{name:t.latest_status?t.latest_status.status:"",color:y.gray4},mode:"outlined"}),Object(a.jsx)(UC,{loading:o,tags:r&&r.data,direction:"left"})]})})]})}}]),n}(p.PureComponent),gD=Mm({tags:{fetch:ly.getTags}})(OD);function xD(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return xD=function(){return e},e}var yD=x.default.div(xD()),wD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobsForLinking:[],loading:!1},e.searchJobsById=function(t){e.props.jobs.fetch(t,{per_page:20,include_closed:!0})},e.searchById=function(t){t?e.debouncedSearch(t):e.debouncedSearch.cancel()},e.debouncedSearch=Object(m.debounce)(e.searchJobsById,1e3),e.linkJobs=function(){if(e.props.currentJob.data){e.setState({loading:!0});try{e.props.dispatch(tD(e.props.currentJob.data.id,e.state.jobsForLinking))}finally{e.props.onClose(),e.setState({loading:!1})}}},e.processSelectedJob=function(t,n){t?e.state.jobsForLinking.includes(n)||(e.setState({jobsForLinking:e.state.jobsForLinking.concat(n)}),setTimeout((function(){e.linkJobs()}))):e.state.jobsForLinking.includes(n)&&e.removeJobFromSelected(n)},e.removeJobFromSelected=function(t){var n=e.state.jobsForLinking;n.splice(n.indexOf(t),1),e.setState({jobsForLinking:Array.from(n)})},e.onClose=function(){var t=e.props,n=t.onClose,r=t.jobs.reset;n(),r()},e.sortJobs=function(){var t=e.props.jobs.data;if(t){var n=t.filter((function(e){var t;return(null===(t=e.latest_status)||void 0===t?void 0:t.status)!==gj.Cancelled}));return Object(m.orderBy)(n,[function(e){var t;return Ij[null===(t=e.latest_status)||void 0===t?void 0:t.status]},function(e){return qf()(e.created_at).unix()}],["asc","asc"])}return[]},e}return Object(l.a)(n,[{key:"renderBody",value:function(){var e=this,t=this.props.jobs,n=t.loading,r=t.error,o=this.props.currentJob.loading;return Object(a.jsx)(a.Fragment,{children:o?"Loading...":Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ES,{searchIcon:!0,loading:n,placeholder:"Search...",onSearchValueChange:this.searchById,mode:"typeGray"}),!r&&Object(a.jsx)(yD,{children:this.sortJobs().map((function(t){return Object(a.jsx)(gD,{checked:e.state.jobsForLinking.includes(t.id),onSelectJob:e.processSelectedJob,job:t},t.id)}))})]})})}},{key:"render",value:function(){var e=this.props.isOpen;return Object(a.jsx)(vO,{isOpen:e,children:Object(a.jsx)(PO,{onClose:this.onClose,title:"Link to Jobs",body:this.renderBody(),loading:this.state.loading})})}}]),n}(p.PureComponent),_D=Object(LO.compose)(Mm({jobs:{fetch:ly.searchJobs,initialData:null}}),Object(b.b)((function(e){return{currentJob:e.currentJob}})))(wD),kD="Steamatic/NotesAndReplies/LOAD_JOB_NOTES",SD="Steamatic/NotesAndReplies/LOAD_JOB_NOTES_COMPLETE",CD="Steamatic/NotesAndReplies/RESET",ND="Steamatic/NotesAndReplies/ERROR",ED=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case SD:return t.payload;case CD:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ND:return t.payload;case SD:case CD:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case kD:return!0;case SD:case CD:return!1;default:return e}}}),AD=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:kD}),n.prev=1,n.next=4,$E.getJobNotesAndMessages(e,t);case 4:a=n.sent,r({type:SD,payload:a.data}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r({type:ND,payload:n.t0}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},TD=function(e,t,n,r){return function(){var a=Object(Um.a)(Fm.a.mark((function a(o){return Fm.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,$E.addNoteToJob(t,e,n);case 3:!1!==r&&o(AD(e,r)),a.next=10;break;case 6:throw a.prev=6,a.t0=a.catch(0),o({type:ND,payload:a.t0}),a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()},ID=function(e,t,n){return function(){var r=Object(Um.a)(Fm.a.mark((function r(a){return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,$E.addMessageToJob(t,e,n);case 3:return r.abrupt("return",a(AD(e)));case 6:throw r.prev=6,r.t0=r.catch(0),a({type:ND,payload:r.t0}),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()},RD=function(e,t,n){return function(){var r=Object(Um.a)(Fm.a.mark((function r(a){return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,$E.sendJobMessage(t,e,n);case 3:return r.abrupt("return",a(AD(e)));case 6:throw r.prev=6,r.t0=r.catch(0),a({type:ND,payload:r.t0}),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()};function DD(){var e=Object(f.a)(["\n  margin-bottom: 25px;\n  font-size: 14px;\n"]);return DD=function(){return e},e}function MD(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return MD=function(){return e},e}var PD=x.default.div(MD()),LD=x.default.div(DD()),FD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.searchJobsById=function(t){t?e.props.jobs.fetch(t):e.debouncedSearch.cancel()},e.debouncedSearch=Object(m.debounce)(e.searchJobsById,500),e.mergeJobs=function(t,n){if(e.props.sourceJobId&&e.props.jobs.data){var r=e.props,a=r.sourceJobId,o=r.dispatch;e.setState({loading:!0}),ly.mergeJobs(a,n).then((function(){e.props.onClose(),e.setState({loading:!1}),o(AD(a)),o(QR(a,!0))})).catch((function(){e.props.onClose(),e.setState({loading:!1})}))}},e.onClose=function(){var t=e.props,n=t.onClose,r=t.jobs.reset;n(),r()},e}return Object(l.a)(n,[{key:"renderBody",value:function(){var e=this,t=this.props.jobs,n=t.loading,r=t.data,o=t.error;return Object(a.jsx)(a.Fragment,{children:this.props.sourceJobId?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(LD,{children:"This option will merge all current notes, emails, attendances, etc. from this job into the selected job below. The Job Details of the job selected below will remain and not be overwritten. Once complete this job will automatically be set to cancelled status."}),Object(a.jsx)(ES,{searchIcon:!0,loading:n,placeholder:"Search...",onSearchValueChange:this.debouncedSearch,mode:"typeGray"}),!o&&r&&Object(a.jsx)(PD,{children:r.map((function(t){return Object(a.jsx)(gD,{onSelectJob:e.mergeJobs,job:t},t.id)}))})]}):"Loading..."})}},{key:"render",value:function(){var e=this.props.isOpen;return Object(a.jsx)(vO,{isOpen:e,children:Object(a.jsx)(PO,{onClose:this.onClose,title:"Merge with Job",body:this.renderBody(),loading:this.state.loading})})}}]),n}(p.PureComponent),UD=Object(LO.compose)(Mm({jobs:{fetch:ly.searchJobs,initialData:null}}),Object(b.b)())(FD);function VD(){var e=Object(f.a)(["\n  position: relative;\n  padding: .25rem .5rem;\n  :hover{\n    background-color: ","\n  }\n"]);return VD=function(){return e},e}function BD(){var e=Object(f.a)(["\n  color: ",";\n"]);return BD=function(){return e},e}function JD(){var e=Object(f.a)(["\n  margin-top: 20px;\n"]);return JD=function(){return e},e}function zD(){var e=Object(f.a)(["\n  margin-top: 15px;\n  font-weight: ",";\n  font-size: ",";\n"]);return zD=function(){return e},e}function qD(){var e=Object(f.a)(["\n  position: relative;\n  ul {\n    list-style-type: none;\n    padding-left: 0;\n    margin: 0;\n  }\n"]);return qD=function(){return e},e}var WD=x.default.div(qD()),HD=x.default.div(zD(),Bf.bold,Vf.smaller),GD=x.default.div(JD()),YD=x.default.div(BD(),y.gray5),QD=x.default.li(VD(),y.gray1),KD=BS.Link,ZD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={stateLinkJobsModal:!1,stateMergeJobsModal:!1,isDuplicating:!1,removingContact:!1},e.openModal=function(t){e.setState(Object(k.a)({},t,!0))},e.closeModal=function(t){e.setState(Object(k.a)({},t,!1))},e.duplicateJob=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.job,o=n.match.params.id,i=n.location,c=n.history,s=i.pathname,!a||+a.id!==+o){t.next=22;break}return t.next=5,r(Sw("Confirm","Duplicate job #".concat(a.id,"?")));case 5:if(!t.sent){t.next=22;break}return e.setState({isDuplicating:!0}),t.prev=8,t.next=11,ly.duplicateJob(a.id);case 11:l=t.sent,u=l.data,e.props.history.location.pathname===s?c.push("/job/".concat(u.id,"/details")):Qm(Vm.Success,"New job #".concat(u.id," has been created (duplicate of #").concat(a.id,")")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),Qm(Vm.Danger,"This job can't be duplicated");case 19:return t.prev=19,e.setState({isDuplicating:!1}),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[8,16,19,22]])}))),e.deselectContact=function(t){return Object(Um.a)(Fm.a.mark((function n(){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({removingContact:!0}),n.prev=1,n.next=4,e.confirmAndDeselectContact(t);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:setTimeout((function(){e.setState({removingContact:!1})}),500);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))},e.confirmAndDeselectContact=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.dispatch,i=r.job,t.next=3,o(Sw("Confirm","Unassign Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to revoke assigment of Job ",Object(a.jsx)("strong",{children:ly.getJobName(i)})," from ",Object(a.jsx)("strong",{children:n.name}),"?"]})));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",Promise.reject());case 6:return t.abrupt("return",ly.removeUserOrTeam(i.id,n.id,n.type).then(e.props.onUpdate));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.contacts,o=t.withoutActions,i=t.showJobLink,c=r.find((function(e){return e.invoice_to})),s=this.state,l=s.stateLinkJobsModal,u=s.stateMergeJobsModal,d=s.isDuplicating,p=s.removingContact;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(PT,{caption:"Job Details",collapsable:!0,children:[i&&n.id&&Object(a.jsx)(Uf.b,{to:"/job/".concat(n.id,"/details"),children:ly.getJobName(n)}),c&&Object(a.jsxs)("div",{children:["Invoice to: ",c.assignment_type.name]}),n.insurer&&Object(a.jsxs)("div",{children:["Insurer: ",n.insurer.legal_name]}),n.claim_number&&Object(a.jsxs)("div",{children:["Claim No. ",n.claim_number]}),Object(a.jsx)("div",{children:n.claim_type&&Object(a.jsxs)("span",{children:["(",n.claim_type.value,")"]})}),n.assigned_to.length>0&&Object(a.jsxs)(WD,{children:[Object(a.jsx)(HD,{children:"Assigned To"}),Object(a.jsx)(Jf.a,{className:"overlapping",id:"job-sidebar-contacts-tooltip",effect:"solid",place:"left"}),Object(a.jsx)("ul",{children:n.assigned_to.map((function(t){return Object(a.jsx)(QD,{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{className:"col p-0",children:t.name}),Object(a.jsx)("div",{className:"cursor-pointer position-relative",onClick:e.deselectContact(t),children:Object(a.jsx)(Ff,{name:Ef.Remove,size:15,"data-tip":"Unassign job","data-for":"job-sidebar-contacts-tooltip"})})]})},"".concat(t.id,"_").concat(t.type))}))}),p&&Object(a.jsx)(av,{size:20,color:y.white})]}),Object(a.jsxs)(WD,{children:[Object(a.jsx)(HD,{children:"Linked Jobs"}),n.linked_jobs.length?n.linked_jobs.map((function(e){return Object(a.jsx)(sD,{linkedJob:e,jobId:n.id,disabled:!t.has(Dw.JOBS_MANAGE_JOBS)||!!o},e.id)})):Object(a.jsx)(YD,{children:"No linked jobs"})]}),!o&&Object(a.jsxs)(GD,{children:[t.has(Dw.JOBS_MANAGE_JOBS)&&Object(a.jsx)(KD,{onClick:function(){return e.openModal("stateLinkJobsModal")},children:"Link to other job"}),t.has(Dw.JOBS_CREATE)&&Object(a.jsx)(KD,{disabled:d,onClick:d?void 0:e.duplicateJob,children:"Duplicate this job"}),t.has(Dw.JOBS_MANAGE_JOBS)&&Object(a.jsx)(KD,{onClick:function(){return e.openModal("stateMergeJobsModal")},children:"Merge with job"})]})]}),l&&Object(a.jsx)(_D,{isOpen:l,onClose:function(){return e.closeModal("stateLinkJobsModal")}}),u&&Object(a.jsx)(UD,{isOpen:u,onClose:function(){return e.closeModal("stateMergeJobsModal")},sourceJobId:n.id})]})}})}}]),n}(p.PureComponent),XD=Object(LO.compose)(v.g,Object(b.b)())(ZD),$D=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.items;return Object(a.jsx)(PT,{caption:"Previous Jobs",loading:t,collapsable:!0,children:n.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(Uf.b,{to:"/job/".concat(e.id,"/notes-and-replies"),children:["#",e.id,":"]})," ",e.description]},e.id)}))})}}]),n}(p.PureComponent),eM=n(545);function tM(){var e=Object(f.a)(["\n  position: relative;\n  top: 5px;\n"]);return tM=function(){return e},e}function nM(){var e=Object(f.a)(["\n  color: ",";\n"]);return nM=function(){return e},e}function rM(){var e=Object(f.a)(["\n  ","\n"]);return rM=function(){return e},e}function aM(){var e=Object(f.a)(["\n  background: ",";\n  border-radius: 4px;\n  border: none;\n\n  &::placeholder {\n    font-weight: lighter;\n    color: ",";\n  }\n"]);return aM=function(){return e},e}var oM=Object(x.css)(aM(),y.gray1,y.gray4),iM=x.default.input(rM(),oM),cM=x.default.label(nM(),y.gray4),sM=x.default.div(tM()),lM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isExpanded:!1,isHoverHint:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.meta,r=t.hint,o=this.state,i=o.isExpanded,s=o.isHoverHint,l=n.touched&&n.error;return Object(a.jsxs)("div",{className:"form-group",children:[this.props.label&&Object(a.jsx)(cM,{children:this.props.label}),Object(a.jsx)(iM,Object(c.a)(Object(c.a)({},this.props.input),{},{className:g()("form-control",this.props.className,{"is-invalid":l}),placeholder:this.props.placeholder,type:this.props.type,disabled:!!this.props.disabled,onFocus:function(){e.setExpanded=!0},onBlur:function(){e.setExpanded=!1}})),Object(a.jsx)(sM,{children:(i||s)&&r&&Object(a.jsx)("div",{className:"dropdown-menu show",onMouseOver:function(){e.setHoverHint=!0},onMouseOut:function(){e.setHoverHint=!1},onClick:function(){e.setHoverHint=!1},children:r})}),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:n.error})]})}},{key:"setExpanded",set:function(e){this.setState({isExpanded:e})}},{key:"setHoverHint",set:function(e){this.setState({isHoverHint:e})}}]),n}(p.PureComponent),uM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderHintForToField=function(){var t=e.props,n=t.assignedContacts,r=t.loading;if(!n)return null;var o=n.filter((function(t){return e.includeInFullName(t)||e.includeInFields(t)}));return r?Object(a.jsx)("div",{className:"dropdown-header",children:"Loading..."}):o.length?o.sort((function(e){return+!!e.disabled})).map((function(t,n){return Object(a.jsx)("div",{className:"dropdown-item",onClick:function(){return e.selectContact(t)},children:Object(a.jsx)(uO,{contact:t,disabled:t.disabled})},"drd-i-".concat(n))})):null},e.selectContact=function(t){!t.disabled&&e.props.onSelect&&e.props.onSelect(t)},e}return Object(l.a)(n,[{key:"includeInFullName",value:function(e){return e.first_name&&e.last_name&&this.includeInContact("".concat(e.first_name," ").concat(e.last_name))}},{key:"includeInFields",value:function(e){var t=this;return["first_name","last_name","legal_name","email","mobile_phone"].find((function(n){return t.includeInContact(e[n])}))}},{key:"includeInContact",value:function(e){if(!this.props.contactValue||!e)return!1;if(this.props.multiple){var t=this.props.contactValue.split(",").map((function(e){return e.trim()})).pop();return!!t&&e.toLowerCase().includes(t.toLowerCase())}return e.toLowerCase().includes(this.props.contactValue.toLowerCase())}},{key:"render",value:function(){return Object(a.jsx)(lM,{input:this.props.input,meta:this.props.meta,placeholder:"Select...",label:this.props.label,className:this.props.className,hint:this.renderHintForToField(),disabled:this.props.disabled})}}]),n}(p.PureComponent),dM="Steamatic/EditedReply/UPDATE_EDITED_REPLY",pM="Steamatic/EditedReply/ADD_DOCUMENT_TO_EDITED_REPLY",hM="Steamatic/EditedReply/REMOVE_DOCUMENT_FROM_EDITED_REPLY",bM="Steamatic/EditedReply/SAVE_EDITED_REPLY",fM="Steamatic/EditedReply/SAVE_EDITED_REPLY_COMPLETE",mM="Steamatic/EditedReply/DELETE_EDITED_REPLY",jM="Steamatic/EditedReply/DELETE_EDITED_REPLY_COMPLETE",vM="Steamatic/EditedReply/RESET_EDITED_REPLY",OM="Steamatic/EditedReply/ERROR",gM={savedReply:null,documents:[],loading:!1,error:null},xM=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:gM,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null};switch(n.type){case OM:return Object(c.a)(Object(c.a)({},t),{},{savedReply:null,loading:!1,error:n.payload});case vM:case jM:return Object(c.a)({},gM);case dM:return Object(c.a)(Object(c.a)({},t),{},{body:n.payload});case bM:case mM:return Object(c.a)(Object(c.a)({},t),{},{loading:!0});case fM:return Object(c.a)(Object(c.a)({},t),{},{loading:!1,error:null,savedReply:n.payload});case pM:var r=t.documents||[];return e=n.payload?[].concat(Object(Dm.a)(r),[n.payload]):r,Object(c.a)(Object(c.a)({},t||{}),{},{documents:e});case hM:var a=(e=t.documents||[]).findIndex((function(e){return e.id===n.payload}));return a>=0&&e.splice(a,1),Object(c.a)(Object(c.a)({},t),{},{documents:e});default:return t}},yM=function(){return{type:vM}},wM=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,p_.postDocument(e);case 2:r=t.sent,n({type:pM,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_M=function(e){var t=e.type.value===Hw.EMAIL,n=Object.keys(Gw).filter((function(t){return!!e[Gw[t]]})).reduce((function(n,r){var a=Gw[r],o=e[Gw[r]];return t?o.forEach((function(e){return n.push({type:a,address:(null===e||void 0===e?void 0:e.email)||(null===e||void 0===e?void 0:e.value)||e})})):o.split(",").map((function(e){return e.trim()})).forEach((function(e){return n.push({type:a,address:e})})),n}),[]);return{body:e.body,subject:t?e.subject:void 0,type:e.type.value,recipients:n}},kM=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o,i,s,l,u,d;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:bM}),o=a(),i=o.editedReply,s=i.savedReply,l=i.documents,u=Object(c.a)(Object(c.a)({},_M(e)),t),n.prev=3,null!==s){n.next=10;break}return n.next=7,$E.postMessage(u);case 7:n.t0=n.sent,n.next=13;break;case 10:return n.next=12,$E.updateMessage(s.id,u);case 12:n.t0=n.sent;case 13:d=n.t0,l&&d.data&&l.forEach(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,p_.attachDocumentToMessage(d.data.id,t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r({type:fM,payload:d.data}),n.next=22;break;case 18:throw n.prev=18,n.t1=n.catch(3),r({type:OM,payload:n.t1}),n.t1;case 22:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e,t){return n.apply(this,arguments)}}()},SM=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a,o,i;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.editedReply,a.savedReply,o=a.documents,t({type:mM}),!o){e.next=10;break}i=0;case 4:if(!(i<o.length)){e.next=10;break}return e.next=7,p_.remove(o[i].id);case 7:i++,e.next=4;break;case 10:t({type:jM});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},CM=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,p_.remove(e);case 3:n({type:hM,payload:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),n({type:OM,payload:t.t0}),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()};function NM(){var e=Object(f.a)(["\n  vertical-align: sub;\n  margin-right: 12px;\n"]);return NM=function(){return e},e}function EM(){var e=Object(f.a)(["\n  color: ",";\n  background: ",";\n  border-radius: 0;\n  border-color: ",";\n  border-left-width: 8px;\n  margin-top: 20px;\n"]);return EM=function(){return e},e}var AM=x.default.div(EM(),y.black0,y.orange0,y.orange1),TM=Object(x.default)(Ff)(NM()),IM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(AM,{className:"alert",children:[Object(a.jsx)(TM,{name:Ef.Alert,size:18}),this.props.children]})}}]),n}(p.PureComponent),RM=n(303);function DM(){var e=Object(f.a)(["\n  color: ",";\n"]);return DM=function(){return e},e}function MM(){var e=Object(f.a)(["\n  >div>div{max-height: initial;}\n  .form-control{height:initial;}\n  .fcc__value-container .trim{display: none;}\n"]);return MM=function(){return e},e}var PM=x.default.div(MM()),LM=x.default.label(DM(),y.gray4),FM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleBlur=function(){e.props.input.onBlur(e.props.input.value)},e.getStyles=function(){return Object(c.a)(Object(c.a)({},Wv),e.props.selectStyles)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(c.a)(Object(c.a)({},n.defaultOptions),this.props),t=e.meta,r=e.className,o=e.labelClassName,i=e.valueClassName,s=Object(Rm.a)(e,["meta","className","labelClassName","valueClassName"]),l=t.touched&&t.error;return Object(a.jsxs)("div",{className:g()("form-group",r),children:[this.props.label&&Object(a.jsx)(LM,{className:o,children:this.props.label}),Object(a.jsxs)(PM,{className:i,children:[Object(a.jsx)(RM.a,Object(c.a)(Object(c.a)({},this.props.input),{},{onBlur:this.handleBlur,styles:this.getStyles(),className:g()("p-0 form-control",{"is-invalid":l}),classNamePrefix:"fcc",isDisabled:this.props.disabled},s)),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})]})}}]),n}(p.PureComponent);FM.defaultOptions={};var UM=FM;function VM(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  padding-left: 10px;\n  color: ",";\n  float: left;\n  height: 100%;\n"]);return VM=function(){return e},e}function BM(){var e=Object(f.a)(["\n  margin-top: 5px;\n"]);return BM=function(){return e},e}function JM(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  padding: 0 25px;\n  border: 0;\n  border-radius: 0;\n  height: 100%;\n  cursor: pointer;\n"]);return JM=function(){return e},e}function zM(){var e=Object(f.a)(["\n  text-align: right;\n  background: ",";\n  height: 45px;\n"]);return zM=function(){return e},e}function qM(){var e=Object(f.a)(["\n  margin-top: 25px;\n  border: 1px solid ",";\n"]);return qM=function(){return e},e}function WM(){var e=Object(f.a)(["\n  color: ",";\n"]);return WM=function(){return e},e}var HM=x.default.label(WM(),y.gray4),GM=x.default.div(qM(),y.gray2),YM=x.default.div(zM(),y.blue0),QM=x.default.button(JM(),y.blue1,y.white),KM=x.default.div(BM()),ZM=x.default.div(VM(),y.gray5),XM=[{value:Hw.EMAIL,label:"Email"},{value:Hw.SMS,label:"SMS"}],$M=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(r=t.call.apply(t,[this].concat(i))).state={hasInvalidMention:!1},r.hasInvalidMention=function(e){return/(^@|\s@|<[^.]+>@)[a-z0-9]{1,}\b/gim.test(e)},r.saveDraft=function(){r.props.handleSubmit(r.props.onSave)()},r.clickOnHintItem=(e={},Object(k.a)(e,Hw.EMAIL,(function(e,t){var n;r.props.change(t,e.email);var a,o=null===(n=r.props.formData.subject)||void 0===n?void 0:n.split("-");2===(null===o||void 0===o?void 0:o.length)?a="".concat(o[0],"- ").concat(e.first_name+" "+e.last_name," -").concat(o[1]):3===(null===o||void 0===o?void 0:o.length)&&(a="".concat(o[0],"- ").concat(e.first_name+" "+e.last_name," -").concat(o[2])),r.props.change("subject",a)})),Object(k.a)(e,Hw.SMS,(function(e,t){r.props.change(t,e.mobile_phone)})),e),r.removeDocumentFromReply=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.dispatch(CM(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onMultipleSelectContact=function(e,t){var n=(r.props.formData[t]||"").split(",").map((function(e){return e.trim()})).filter((function(t){return!!t&&t!==e.email&&!jv(t)}));n.push(e.email),r.props.change(t,n.join(", "))},r.emailOptionLabel=function(e){var t=Jv.getContactName(e);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"trim mr-2",children:e.email}),Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"trim",children:"<"}),t,Object(a.jsx)("span",{className:"trim",children:">"})]})]}):(null===e||void 0===e?void 0:e.email)?e.email:jv(null===e||void 0===e?void 0:e.value)?void 0:e.value},r.emailOptionValue=function(e,t){return(null===e||void 0===e?void 0:e.email)?e.email:jv(null===e||void 0===e?void 0:e.value)||null===e||void 0===e?void 0:e.value},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.change("type",this.props.initialValues.type||XM[0])}},{key:"componentDidUpdate",value:function(e){var t=this.props.formData.body;if(t){var n=this.hasInvalidMention(t);n!==this.state.hasInvalidMention&&this.setState({hasInvalidMention:n})}}},{key:"render",value:function(){var e,t,n,r,o=this,i=this.clickOnHintItem[(this.props.formData.type||{}).value||Hw.EMAIL],c=this.props.formData.type,s=this.props,l=s.handleSubmit,u=s.submitting,d=c&&c.value===Hw.EMAIL,p=!c||!!c&&c.value===Hw.SMS;return Object(a.jsxs)(a.Fragment,{children:[u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("form",{onSubmit:l,autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(HM,{className:"col-2 col-form-label",children:"Send As:"}),Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)(yv.a,{name:"type",placeholder:"Select...",validate:uv,component:Kv,options:XM,disabled:this.props.disabled,onChange:function(){o.props.change("to","")}})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(HM,{className:"col-2 col-form-label",children:"To:"}),Object(a.jsx)("div",{className:d?"col":"col-5",children:d?Object(a.jsx)(yv.a,{name:"to",placeholder:"Select...",validate:[uv],component:UM,options:(null===(e=this.props.contacts.data)||void 0===e?void 0:e.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel,disabled:this.props.disabled}):Object(a.jsx)(yv.a,{name:"to",placeholder:"Select...",validate:[uv],component:uM,onSelect:function(e){return i(e,"to")},assignedContacts:this.assignedContacts,contactValue:this.props.formData.to,loading:this.props.contacts.loading,disabled:this.props.disabled})})]}),d&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(HM,{className:"col-2 col-form-label",children:"Cc:"}),Object(a.jsx)("div",{className:d?"col":"col-5",children:Object(a.jsx)(yv.a,{name:"cc",placeholder:"Select...",component:UM,options:(null===(t=this.props.contacts.data)||void 0===t?void 0:t.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel,disabled:this.props.disabled})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(HM,{className:"col-2 col-form-label",children:"Bcc:"}),Object(a.jsx)("div",{className:d?"col":"col-5",children:Object(a.jsx)(yv.a,{name:"bcc",placeholder:"Select...",component:UM,options:(null===(n=this.props.contacts.data)||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel,disabled:this.props.disabled})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(HM,{className:"col-2 col-form-label",children:"Subject:"}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"subject",placeholder:"Subject...",component:ZO,validate:d?uv:void 0,disabled:this.props.disabled})})]})]}),c&&Object(a.jsxs)(IM,{children:["This message will be sent to the specified"," ",c.value===Hw.EMAIL?"email addresses":"phone number","."," ",Object(a.jsx)("strong",{children:"Switch to a Note"})," if you want to reply with an internal note."]}),Object(a.jsxs)(GM,{children:[Object(a.jsx)(yv.a,{name:"body",placeholder:"Enter body here...",component:pA,initialValue:null===(r=this.props.initialValues)||void 0===r?void 0:r.body,color:y.blue0,onCancel:this.props.onCancel,onSave:this.saveDraft,postDocument:this.props.postDocument,validate:fv,disableAttachments:p,disableTextFormatting:!d,disableMentionControl:!d,attachmentMode:"icon",hideCheckIcon:this.state.hasInvalidMention}),Object(a.jsxs)(YM,{children:[c&&c.value===Hw.SMS&&Object(a.jsx)(ZM,{children:"160 characters = 1 SMS"}),Object(a.jsxs)(QM,{type:"submit",disabled:this.props.submitting||this.state.hasInvalidMention,children:["Send ",c&&(c.value===Hw.EMAIL?"Email":"SMS")]})]})]}),!p&&Object(a.jsx)(KM,{children:Object(a.jsx)(x_,{documents:this.props.documents,onRemove:this.removeDocumentFromReply})})]})]})}},{key:"assignedContacts",get:function(){var e=this;return this.props.contacts.data?this.props.contacts.data.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{disabled:e.props.formData.type&&e.props.formData.type.value===Hw.SMS?!t.mobile_phone:!t.email})})):[]}}]),n}(p.PureComponent),eP=sv({},(function(e,t){var n,r,a,o,i,c,s;(null===(n=e.type)||void 0===n?void 0:n.value)===Hw.EMAIL&&(t.to=j.a.some(null===(r=e.to)||void 0===r||null===(a=r.map)||void 0===a?void 0:a.call(r,(function(e){return null===e||void 0===e?void 0:e.email})),jv)?"Invalid e-mail addresses":void 0,t.cc=j.a.some(null===(o=e.cc)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,(function(e){return null===e||void 0===e?void 0:e.email})),jv)?"Invalid e-mail addresses":void 0,t.bcc=j.a.some(null===(c=e.bcc)||void 0===c||null===(s=c.map)||void 0===s?void 0:s.call(c,(function(e){return null===e||void 0===e?void 0:e.email})),jv)?"Invalid e-mail addresses":void 0);return t})),tP=Object(LO.compose)(Object(Gj.a)({form:"EmailReplyForm",validate:eP,enableReinitialize:!0}),Object(b.b)((function(e){return{formData:Object(eM.a)("EmailReplyForm")(e),contacts:e.currentJobContacts,editedReply:e.editedReply}})))($M);function nP(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n  position: relative;\n"]);return nP=function(){return e},e}var rP,aP=Object(x.default)(FS)(nP(),y.gray2),oP=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"computeCreator",value:function(){var e=this.props.status,t=e.user;switch(e.type){case rP.user:return Yf(t).name;case rP.email:return"incoming email";default:return null}}},{key:"getStatusOfCreating",value:function(){var e=this.computeCreator();return"Job created ".concat(e?"by ".concat(e):"")}}]),n}(wT);!function(e){e.user="user",e.email="email",e.recurring="recurring"}(rP||(rP={}));var iP,cP=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={replyMessage:null,editMessage:null,loading:!1,removing:!1},e.notesAndRepliesCounter=function(e){return e.notesAndReplies.data?e.notesAndReplies.data.notes.length+e.notesAndReplies.data.messages.length:0},e.markJobAsReadIfAllowed=function(){var t=e.props,n=t.job,r=t.match;n.data&&!n.data.edit_forbidden&&ly.markJobAsRead(+r.params.id)},e.revertBackToNotes=function(){e.props.dispatch(yM()),e.props.history.push(e.props.location.pathname)},e.cancelNote=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.revertBackToNotes();case 1:case"end":return t.stop()}}),t)}))),e.cancelReply=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.job,a=n.editedReply.savedReply,e.setState({removing:!0}),!a){t.next=5;break}return t.next=5,$E.removeMessageFromJob(a.id,r.data.id);case 5:return t.next=7,e.props.dispatch(SM());case 7:e.revertBackToNotes(),a&&e.getJobNotesAndReplies(),e.setState({removing:!1});case 10:case"end":return t.stop()}}),t)}))),e.sendReply=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.dispatch,o=null===(r=e.props.editedReply)||void 0===r?void 0:r.savedReply,t.next=4,a(kM(n,{job_id:e.props.job.data.id}));case 4:if(i=e.props,c=i.job,!(s=i.editedReply.savedReply)){t.next=14;break}if(!o){t.next=11;break}return t.next=9,a(RD(c.data.id,s.id));case 9:t.next=13;break;case 11:return t.next=13,a(ID(c.data.id,s.id));case 13:a(yM());case 14:e.revertBackToNotes();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveReplyDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.dispatch,o=null===(r=e.props.editedReply)||void 0===r?void 0:r.savedReply,t.next=4,a(kM(n,{job_id:e.props.job.data.id}));case 4:i=e.props,c=i.job,(s=i.editedReply.savedReply)&&a(o?AD(c.data.id):ID(c.data.id,s.id,{send_immediately:!1})),Qm(Vm.Info,"Draft saved");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,a=e.props.job,e.cancelNote(),t.next=5,r(TD(a.data.id,n.id,{job_id:a.data.id}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.postReplyDocument=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!n.length){t.next=3;break}return t.next=3,e.props.dispatch(wM(n[0]));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.typeCheckers={instanceOfJobStatus:function(e){return e.hasOwnProperty("status")&&e.hasOwnProperty("created_at")},instanceOfNote:function(e){return e.hasOwnProperty("note")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("id")},instanceOfMessage:function(e){return e.hasOwnProperty("sender")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("id")&&e.hasOwnProperty("subject")}},e._isEmailReplyVisible=function(t){return"true"===qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}).reply},e.onReplyMessage=function(t){e.props.dispatch(yM()),e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?reply=true")),e.setState({replyMessage:t}),setTimeout((function(){var t;null===(t=e.replyForm.current)||void 0===t||t.scrollIntoView()}))},e.onEditMessage=function(t){var n,r=e.props.dispatch;r(yM()),r({type:fM,payload:t}),(null===(n=t.documents)||void 0===n?void 0:n.length)&&t.documents.forEach((function(e){r({type:pM,payload:e})})),e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?reply=true")),e.setState({editMessage:t}),setTimeout((function(){var t;null===(t=e.replyForm.current)||void 0===t||t.scrollIntoView()}))},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note?t="note-".concat(n.note):n.message&&(t="message-".concat(n.message)),t},e.getJobNotesAndReplies=function(){return e.props.dispatch(AD(e.props.match.params.id))},e.replyForm=p.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getJobNotesAndReplies().then(this.markJobAsReadIfAllowed),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.job,a=n.dispatch;!e.job.data&&r.data&&this.markJobAsReadIfAllowed(),this.notesAndRepliesCounter(this.props)!==this.notesAndRepliesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector()),(!this.isEmailReplyVisible&&this.state.editMessage||e.location.search&&!this.props.location.search)&&(this.setState({editMessage:null}),a(yM())),!e.location.search&&this.props.location.search&&setTimeout((function(){var e;null===(e=t.replyForm.current)||void 0===e||e.scrollIntoView()}))}},{key:"deleteJobNote",value:function(e){var t,n,r=this.props,a=r.job;(0,r.dispatch)((t=a.data.id,n=e,function(){var e=Object(Um.a)(Fm.a.mark((function e(r){var a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,$E.getNote(n);case 3:return a=e.sent,(o=a.data&&a.data.documents)&&o.forEach(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",p_.remove(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,$E.detachNoteFromJob(n,t);case 8:return e.abrupt("return",r(AD(t)));case 11:throw e.prev=11,e.t0=e.catch(0),r({type:ND,payload:e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()))}},{key:"canDeleteNote",value:function(e){var t=this.props,n=t.job,r=t.user,a=n.data&&n.data.edit_forbidden;return!!r&&(r.me&&r.me.id===e.user.id&&!a)}},{key:"computeJobCreatorType",value:function(e){var t=this.props.job.data;return e&&e.user?rP.user:t&&t.recurring_job_id?rP.recurring:rP.email}},{key:"getAll",value:function(e,t){var n=this.getStatuses(),r=n[n.length-1],a=n.slice(0,n.length-1).concat(this.getNotesAndReplies(e,t)).sort((function(e,t){return qf()(t.updated_at||t.created_at||"").diff(e.updated_at||e.created_at||"")}));return[].concat(Object(Dm.a)(a),[{user:r&&r.status===gj.New&&r.user||void 0,created_at:Wj(this.props.job.data.created_at),type:this.computeJobCreatorType(r),status:gj.Created}])}},{key:"getStatuses",value:function(){var e=this.props.job;return e&&e.data.statuses||[]}},{key:"getNotesAndReplies",value:function(e,t){var n=this.props.notesAndReplies.data;if(n){var r=n.notes,a=n.messages;return[].concat(Object(Dm.a)(r&&e?r:[]),Object(Dm.a)(a&&t?a:[]))}return[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.notesAndReplies,r=t.job,o=r.data&&r.data.edit_forbidden;return Object(a.jsx)(Cw.Consumer,{children:function(t){var i=t.has(Dw.NOTES_VIEW),c=t.has(Dw.MESSAGES_VIEW),s=t.has(Dw.NOTES_CREATE),l=t.has(Dw.MESSAGES_MANAGE);return r.data&&Object(a.jsxs)("div",{style:{position:"relative"},className:"flex-grow-1",children:[e.state.loading&&Object(a.jsx)(av,{size:40,color:y.white}),e.isNoteEditorVisible&&!o&&s&&Object(a.jsx)(aP,{padding:"40px 30px",overflow:"visible",children:Object(a.jsx)(dA,{afterSave:e.saveNoteDraft,color:y.orange0,onCancel:e.cancelNote,attachmentMode:"icon",saveWith:{job_id:r.data.id}})}),e.isEmailReplyVisible&&!o&&l&&Object(a.jsxs)(aP,{ref:e.replyForm,padding:"40px 30px 70px 30px",children:[e.state.removing&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(tP,{documents:e.props.editedReply.documents,onSubmit:e.sendReply,onSave:e.saveReplyDraft,onCancel:e.cancelReply,postDocument:e.postReplyDocument,disabled:!!o,initialValues:e.emailReplyFormInitialValues,editMessage:e.state.editMessage})]}),n&&Object(a.jsxs)("div",{style:{position:"relative"},children:[n.loading&&Object(a.jsx)(av,{size:40,color:y.white}),e.getAll(i,c).map((function(t,n){return e.typeCheckers.instanceOfJobStatus(t)?Object(a.jsx)(oP,{status:t},n):e.typeCheckers.instanceOfNote(t)?Object(a.jsx)(vT,{highlightedItemId:e.getHighlightedItem().note,noteOrReply:t,onDelete:e.canDeleteNote(t)?function(){return e.deleteJobNote(t.id)}:void 0,editable:!!e.canDeleteNote(t),afterEditSuccess:e.getJobNotesAndReplies,saveWith:{job_id:r.data.id}},"note-".concat(t.id)):e.typeCheckers.instanceOfMessage(t)?e.isEmailReplyVisible&&t.id===(null===(i=e.state.editMessage)||void 0===i?void 0:i.id)?null:Object(a.jsx)(vT,{noteOrReply:t,onReply:e.onReplyMessage,onEditMessage:e.onEditMessage,highlightedItemId:e.getHighlightedItem().message,editable:!o},"reply-".concat(t.id)):null;var i}))]})]})}})}},{key:"isNoteEditorVisible",get:function(){return"true"===qm.parse(this.props.location.search,{ignoreQueryPrefix:!0}).note}},{key:"isEmailReplyVisible",get:function(){return this._isEmailReplyVisible(this.props)}},{key:"emailReplyFormInitialValues",get:function(){var e=this.props.job,t=Object();if(e.data&&e.data.id){var n,r,a=this.state.replyMessage||this.state.editMessage;if(this.state.replyMessage)t.subject=a?"".concat(e.data.claim_number," - ").concat(a.from_name," - Job No. #").concat(e.data.id):"".concat(e.data.claim_number," - Job No. #").concat(e.data.id),t.type=XM.find((function(e){return e.value===Hw.EMAIL})),t.to=null===(n=a.recipients)||void 0===n?void 0:n.filter((function(e){return"to"===e.type})).map((function(e){return{email:e.address}})),t.cc=null===(r=a.recipients)||void 0===r?void 0:r.filter((function(e){return"cc"===e.type})).map((function(e){return{email:e.address}}));else if(this.state.editMessage){var o,i,c,s;if(t.id=a.id,t.subject=a.subject,t.body=a.message_body_resolved||a.message_body,t.type=XM.find((function(e){return e.value===a.message_type})),a.message_type===Hw.EMAIL)t.to=null===(o=a.recipients)||void 0===o?void 0:o.filter((function(e){return"to"===e.type})).map((function(e){return{email:e.address}})),t.cc=null===(i=a.recipients)||void 0===i?void 0:i.filter((function(e){return"cc"===e.type})).map((function(e){return{email:e.address}})),t.bcc=null===(c=a.recipients)||void 0===c?void 0:c.filter((function(e){return"bcc"===e.type})).map((function(e){return{email:e.address}}));else t.to=null===(s=a.recipients)||void 0===s?void 0:s.filter((function(e){return"to"===e.type})).map((function(e){return e.address})).toString()}}return t}}]),n}(bI),sP=Object(b.b)((function(e){return{editedReply:e.editedReply,notesAndReplies:e.notesAndReplies,job:e.currentJob,user:e.user}}))(cP),lP=sv({},(function(e,t){var n;if(e.anticipated_revenue&&e.anticipated_revenue.length>0){var r=e.anticipated_revenue;r[r.length-1].match(/(\d|\.)/g)||(e.anticipated_revenue=r.slice(0,r.length-1))}if(e.expected_excess_payment&&e.expected_excess_payment.length>0){var a=e.expected_excess_payment;a[a.length-1].match(/(\d|\.)/g)||(e.expected_excess_payment=a.slice(0,a.length-1))}if(e.insurer&&(t.date_of_loss=uv(e.date_of_loss),t.cause_of_loss=uv(e.cause_of_loss)),null===(n=e.contacts)||void 0===n?void 0:n.length){var o=e.contacts.find((function(e){return e.assignment_type.name===Tj.SITE_CONTACT}));if(o){var i,c,s=null===o||void 0===o||null===(i=o.contact)||void 0===i||null===(c=i.addresses[0])||void 0===c?void 0:c.id;s&&(e.site_address_id=s)}}return t}));!function(e){e.ContentsOnly="Contents Only",e.StructureOnly="Structure Only",e.ContentsAndStructure="Contents and Structure"}(iP||(iP={}));var uP,dP=[{value:iP.ContentsOnly,label:iP.ContentsOnly},{value:iP.StructureOnly,label:iP.StructureOnly},{value:iP.ContentsAndStructure,label:iP.ContentsAndStructure}];!function(e){e.Critical="Critical",e.NonCritical="Non-Critical",e.SemiCritical="Semi-Critical"}(uP||(uP={}));var pP=[{value:uP.Critical,label:uP.Critical},{value:uP.NonCritical,label:uP.NonCritical},{value:uP.SemiCritical,label:uP.SemiCritical}],hP=document.querySelector("body"),bP="beacon-script";function fP(){if(!document.querySelector("#".concat(bP)))try{var e=document.createElement("script");e.type="text/javascript",e.id=bP;var t=document.createElement("script");t.src="/beacon.js",hP.appendChild(t),t.onload=function(){hP.appendChild(e)}}catch(n){throw new Error("Beacon error")}}var mP="Steamatic/User/SET_USER",jP="Steamatic/User/SET_USER_NOTIFICATIONS",vP="Steamatic/User/SET_USER_LOCATIONS",OP="Steamatic/User/START_LOAD_USER_NOTIFICATIONS",gP="Steamatic/User/SET_USERS_BY_LOCATION",xP="Steamatic/User/SET_IS_SUPERVISOR_DISABLED",yP=function(e){return{type:mP,payload:e}},wP={me:null,locations:[],userNotifications:{data:{data:[]},loading:!1},usersByLocations:[],isSupervisorDisabled:!0},_P=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:wP,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case mP:return Object(c.a)(Object(c.a)({},e),{},{me:Object(c.a)(Object(c.a)({},e.me),t.payload)});case jP:return Object(c.a)(Object(c.a)({},e),{},{userNotifications:{data:t.payload,loading:!1}});case vP:return Object(c.a)(Object(c.a)({},e),{},{locations:t.payload});case OP:return Object(c.a)(Object(c.a)({},e),{},{userNotifications:{data:e.userNotifications.data,loading:!0}});case gP:return Object(c.a)(Object(c.a)({},e),{},{usersByLocations:t.payload});case xP:return Object(c.a)(Object(c.a)({},e),{},{isSupervisorDisabled:t.is_disabled});default:return e}},kP=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vj.getCurrentUser();case 2:return n=e.sent,fP(),t(yP(n.data)),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},SP=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:OP}),e.next=3,uE.getMyUnreadNotifications();case 3:n=e.sent,t({type:jP,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},CP=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE.getLocations();case 2:n=e.sent,t({type:vP,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function NP(e){var t=e.user;return t.me&&t.me.id}function EP(e){var t=e.user;return t.me&&t.me.locations.find((function(e){return e.primary}))||null}function AP(e){var t=e.user;return t.me?t.me.locations:[]}var TP=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:xP,is_disabled:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},IP=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,uE.getUsersByLocation(e);case 2:r=t.sent,n({type:gP,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function RP(){var e=Object(f.a)(["\n  margin-bottom: ",";\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return RP=function(){return e},e}var DP=x.default.span(RP(),Vf.smaller,y.blue4),MP=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loadedInsurersData:[],companyLocations:[]},e.scheduledUpdateTimer=null,e.loadInsurers=function(e){var t={term:e,contact_type:ev.company,contact_category_type:$j.Insurer};return Jv.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadInsurers=_v()(e.loadInsurers,1e3),e.loadCompanyLocations=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Jv.getCompanyLocationsByLocationId(t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadCompanyLocations=_v()(e.loadCompanyLocations,1e3),e.scheduleUpdate=function(t){var n=e.props.formData;t&&t.target&&"anticipated_revenue"===t.target.name&&n&&(t.preventDefault(),void 0!==n.anticipated_revenue&&e.props.change("anticipated_revenue",Number(n.anticipated_revenue).toFixed(2))),t&&t.target&&"expected_excess_payment"===t.target.name&&n&&(t.preventDefault(),void 0!==n.expected_excess_payment&&e.props.change("expected_excess_payment",Number(n.expected_excess_payment).toFixed(2)));var r=e.props.job;e.scheduledUpdateTimer&&clearTimeout(e.scheduledUpdateTimer),r&&!ly.isEmailTemplate(r)&&(e.scheduledUpdateTimer=setTimeout(e.handleSubmitForm,1e3))},e.handleLocationChange=function(t,n){var r=e.props,a=r.ownerLocation,o=r.assignedLocation,i=r.change,c=r.userLocations,s=r.locations;if(!a){var l=s.data&&s.data.data.find((function(e){return e.id===n.id}));l&&i("owner_location",l)}if(!o){var u=c&&c.find((function(e){return e.id===n.id}));u&&i("assigned_location",u)}"assigned_location"===t&&(i("company_location",null),setTimeout((function(){clearTimeout(e.scheduledUpdateTimer)}),1),e.setState({companyLocations:[]}),(null===n||void 0===n?void 0:n.id)?e.debouncedLoadCompanyLocations(n.id).then((function(t){e.setState({companyLocations:t}),1===t.length&&e.props.change("company_location",t[0]),e.scheduleUpdate()})):e.scheduleUpdate())},e.handleSubmitForm=function(){var t=e.props,n=t.handleSubmit,r=t.onSubmit;return t.submitting?(e.scheduleUpdate(),Promise.resolve()):n(r)()},e.addContact=function(t){var n=e.props.assignmentTypes.find((function(e){return!e.is_unique}));return function(){return t.push({assignment_type:n})}},e.renderContactsList=function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hg,Object(c.a)(Object(c.a)({},t),{},{assignmentTypes:e.props.assignmentTypes})),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6 offset-2 offset-xl-3",children:Object(a.jsx)(DP,{onClick:e.addContact(t.fields),children:"Add another contact"})})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.locations.fetch({per_page:999}),this.props.jobServices.fetch(),this.loadInsurers("").then((function(t){t.sort((function(e,t){return e.legal_name>t.legal_name?1:-1})),e.setState({loadedInsurersData:t})}))}},{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.job)||void 0===t?void 0:t.id)!==(null===(n=this.props.job)||void 0===n?void 0:n.id)&&this.props.reset()}},{key:"componentWillUnmount",value:function(){this.scheduledUpdateTimer&&clearTimeout(this.scheduledUpdateTimer)}},{key:"componentWillReceiveProps",value:function(e){if(void 0===this.props.formData&&e.formData){var t=e.formData;t&&t.anticipated_revenue&&this.props.change("anticipated_revenue",Number(t.anticipated_revenue).toFixed(2)),t&&t.expected_excess_payment&&this.props.change("expected_excess_payment",Number(t.expected_excess_payment).toFixed(2)),t&&t.created_at&&this.props.change("created_at",qf()(new Date(t.created_at._i).toLocaleString()))}}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.jobServices,o=t.job,i=t.handleSubmit,c=t.userLocations,s=t.usersByLocations,l=t.isSupervisorDisabled,u=t.assignedLocation,d=[];s.data&&(d=s.data.sort((function(e,t){return e.full_name>t.full_name?1:t.full_name>e.full_name?-1:0})));var p=this.state.companyLocations,h=!o,b=ly.isEmailTemplate(o);return Object(a.jsx)(Cw.Consumer,{children:function(t){var s,f=o&&o.edit_forbidden||!t.has(Dw.JOBS_UPDATE);return Object(a.jsx)(mg,{isNew:h||b,children:Object(a.jsxs)("form",{onSubmit:i,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:f,children:[h&&!!(null===(s=e.props.initialValues.contacts)||void 0===s?void 0:s.length)&&t.has(Dw.JOBS_MANAGE_CONTACTS)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hj.a,{name:"contacts",component:e.renderContactsList,onChange:e.scheduleUpdate})})}),Object(a.jsx)(Qj,{})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"date_of_loss",label:"Date of Loss",placeholder:"Date of Loss",component:Cy,onChange:e.scheduleUpdate,disabled:f})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"cause_of_loss",label:"Cause of Loss",placeholder:"Cause of Loss",component:ZO,onChange:e.scheduleUpdate,disabled:f})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"service",label:"Service Type",placeholder:"Select...",component:Kv,options:r.data&&r.data.data,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:e.scheduleUpdate,disabled:f,validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"initial_contact_at",label:"Initial Contact",placeholder:"Initial Contact",component:Cy,showTime:!0,onChange:e.scheduleUpdate,disabled:f,validate:uv,viewDate:new Date})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)(yv.a,{name:"description",label:"Job Description",placeholder:"Job Description",component:ZO,onChange:e.scheduleUpdate,disabled:f,validate:uv})})}),Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"assigned_location",label:"Assigned to Location",placeholder:"Select...",component:Kv,options:c,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.handleLocationChange("assigned_location",n),e.props.dispatch(TP(!1)),e.props.dispatch(IP(n.id)),e.props.change("supervisor",null);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:f,validate:uv})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"owner_location",label:"Belongs to Location",placeholder:"Select...",component:Kv,options:n.data&&n.data.data,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(t){e.handleLocationChange("owner_location",t),e.scheduleUpdate()},disabled:f,validate:uv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"company_location",label:"Company",placeholder:"Select...",component:Kv,options:p||[],getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return Jv.getContactName(e)},onChange:e.scheduleUpdate,disabled:f||!u})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"supervisor",label:"Supervisor",placeholder:"Select...",component:Kv,options:d,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.full_name},onChange:e.scheduleUpdate,disabled:f||l,isClearable:!0})})]}),Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"insurer",label:"Insurance / Contract",placeholder:"Select...",component:rO,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.legal_name},loadOptions:e.debouncedLoadInsurers,onChange:e.scheduleUpdate,disabled:f,isClearable:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"claim_number",label:"Claim No.",placeholder:"Claim No.",component:ZO,onChange:e.scheduleUpdate,disabled:f})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"reference_number",label:"Reference No.",placeholder:"Reference No.",component:ZO,onChange:e.scheduleUpdate,disabled:f})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"claim_type",label:"Claim Type",placeholder:"Select...",component:Kv,options:dP,onChange:e.scheduleUpdate,disabled:f,isClearable:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"criticality",label:"Criticality",placeholder:"Select...",component:Kv,options:pP,onChange:e.scheduleUpdate,disabled:f,isClearable:!0})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"expected_excess_payment",label:"Excess payment",placeholder:"Excess payment",component:ZO,currency:!0,onBlur:e.scheduleUpdate,disabled:f})})}),Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"anticipated_revenue",label:"Anticipated Revenue",placeholder:"Anticipated Revenue",component:ZO,onBlur:e.scheduleUpdate,currency:!0,disabled:f})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"anticipated_invoice_date",label:"Anticipated Invoice Date",placeholder:"Anticipated Invoice Date",component:Cy,onChange:e.scheduleUpdate,disabled:f,futureEnabled:!0,validate:uv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"created_at",label:"Job Received",placeholder:"Job Received",disabled:!h,component:Cy,showTime:!0,onChange:e.scheduleUpdate,viewDate:new Date,defaultDate:new Date,validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"authority_received_at",label:"Authority Received",placeholder:"Authority Received",component:Cy,showTime:!0,onChange:e.scheduleUpdate,disabled:f,viewDate:new Date})})]})]}),(h||b)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qj,{}),Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",disabled:e.props.submitting,children:"Create"})]})]})})}})}}]),n}(p.PureComponent),PP="JobForm",LP=Object(LO.compose)(Object(b.b)((function(e){return{userLocations:e.user.locations,usersByLocations:e.user.usersByLocations,isSupervisorDisabled:e.user.isSupervisorDisabled,assignedLocation:Object(PI.a)(PP)(e,"assigned_location"),ownerLocation:Object(PI.a)(PP)(e,"owner_location"),formData:Object(eM.a)("JobForm")(e),assignmentTypes:e.constants.jobAssignmentTypes,contacts:e.currentJobContacts}})),Object(Gj.a)({form:PP,validate:lP,enableReinitialize:!0}),Mm({locations:{fetch:sg.searchLocations},jobServices:{fetch:ly.getServices}}))(MP),FP="Steamatic/CurrentJobContacts/LOAD",UP="Steamatic/CurrentJobContacts/LOAD_COMPLETE",VP="Steamatic/CurrentJobContacts/RESET",BP="Steamatic/CurrentJobContacts/ERROR",JP=tS({load:FP,loadComplete:UP,reset:VP,error:BP}),zP=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o,i,c,s,l;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),(null===(o=s.currentJobContacts)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id)===+e&&!t||(null===(c=s.currentJobContacts)||void 0===c?void 0:c.loading)){n.next=5;break}return n.abrupt("return",iS(FP,UP,BP,(function(){return ly.getContacts(e)}))(r));case 5:return n.abrupt("return",null===(l=s.currentJobContacts)||void 0===l?void 0:l.data);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},qP=function(){return{type:VP}},WP=[Tj.CUSTOMER],HP=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={updating:!1},e.asyncPromiseHandler=wC(),e.submitContacts=function(t){var n=e.props.contacts.data||[],r=t.contacts.filter((function(e){return e.contact&&e.assignment_type})),a=Object(m.keyBy)(n,ex),o=Object(m.keyBy)(r,ex),i=n.filter((function(e){return!o[ex(e)]})),c=r.filter((function(e){return!a[ex(e)]})),s=Promise.resolve(),l=n.find((function(e){var n=ex(e);return o[n]&&n===t.invoiceToKey&&!e.invoice_to}));return l&&(s=e.markAsInvoiceTo(l)),e.asyncPromiseHandler.asyncHandler((function(){return Promise.all(i.map(e.removeAssignment)).then((function(){return Promise.all([].concat(Object(Dm.a)(c.map((function(n){return e.createAssignment(n,ex(n)===t.invoiceToKey)}))),[s]))})).then(e.updateJobSiteAddressIfNeeded(r))})).then((function(){e.closeContacts(),e.props.dispatch(zP(e.props.job.id,!0))}))},e.debouncedSubmitContacts=_v()(e.submitContacts,300),e.updateJobSiteAddressIfNeeded=function(t,n){return function(){var r,a,o,i;n||(n=e.props.job);var c=n.site_address_id||null,s=t.find((function(e){return e.assignment_type.name===Tj.SITE_CONTACT})),l=t.find((function(e){return e.assignment_type.name===Tj.CUSTOMER})),u=(null===s||void 0===s||null===(r=s.contact)||void 0===r||null===(a=r.addresses[0])||void 0===a?void 0:a.id)||(null===l||void 0===l||null===(o=l.contact)||void 0===o||null===(i=o.addresses[0])||void 0===i?void 0:i.id)||null;return(u||c)&&u!==c?ly.update(n.id,{site_address_id:u||null}).then((function(t){return e.props.dispatch(ZR(t))})):Promise.resolve()}},e.closeContacts=function(){e.props.job&&e.props.history.push("/job/".concat(e.props.job.id,"/details"))},e.removeAssignment=function(t){var n=e.props.job,r=t.assignment_type,a=t.contact;return ly.removeAssignment(n.id,a.id,{assignment_type_id:r.id})},e.createAssignment=function(t,n){var r=e.props.job;return ly.createAssignment(r.id,t.contact.id,{invoice_to:n,assignment_type_id:t.assignment_type.id})},e.markAsInvoiceTo=function(t){var n=e.props.job;return ly.updateAssignment(n.id,t.contact.id,{invoice_to:!0,assignment_type_id:t.assignment_type.id})},e.onDetailsUpdate=function(t){var n=e.props.job;return e.props.dispatch(TP(!0)),n?ly.deprecatedUpdate(n.id,t).then((function(){e.props.dispatch(QR(n.id,!0))})).catch(Mg):ly.createJob(t).then(function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(a=t.contacts)||void 0===a?void 0:a.length)){n.next=3;break}return n.next=3,e.updateJobSiteAddressIfNeeded(t.contacts,r.data)();case 3:e.props.history.push("/job/".concat(r.data.id,"/details"));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(Mg)},e.getInitialContactsValues=function(){var t=e.props,n=t.contacts,r=t.assignmentTypes;if(n.data&&n.data.length){var a=n.data,o=a.find((function(e){return e.invoice_to}));return{contacts:a.map((function(e){return{assignment_type:e.assignment_type,contact:e}})),invoiceToKey:o?ex(o):null}}return{invoiceToKey:null,contacts:WP.map((function(e){return{assignment_type:r.find((function(t){return t.name===e}))}})).filter((function(e){return!!e.assignment_type}))}},e.fetchUsersByLocation=function(t){(null===t||void 0===t?void 0:t.assigned_location_id)?(e.props.dispatch(TP(!1)),e.props.dispatch(IP(t.assigned_location_id))):e.props.dispatch(TP(!0))},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.asyncPromiseHandler.doCancel()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.job)!=JSON.stringify(this.props.job)&&this.fetchUsersByLocation(this.props.job)}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.contacts,r=e.assignmentTypes;return Object(a.jsxs)(hC,{children:[this.isContactsFormVisible&&n.ready&&Object(a.jsx)(ax,{job:t,assignmentTypes:r,initialValues:this.getInitialContactsValues(),onSubmit:this.debouncedSubmitContacts,onFieldChange:this.debouncedSubmitContacts}),Object(a.jsx)(LP,{job:t,initialValues:Object(c.a)(Object(c.a)({},t),this.getInitialContactsValues()),onSubmit:this.onDetailsUpdate})]})}},{key:"isContactsFormVisible",get:function(){var e=this.props.job;return!(!e||!e.id||e.edit_forbidden)}}]),n}(p.PureComponent),GP=Object(LO.compose)(Object(b.b)((function(e){return{job:e.currentJob.data,assignmentTypes:e.constants.jobAssignmentTypes,contacts:e.currentJobContacts}})),v.g)(HP),YP=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/assessment-reports/flooring-types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),QP=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,Aj.get("/v1/assessment-reports/".concat(t),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KP=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,Aj.get("/v1/suburbs",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ZP={getFlooringTypes:YP,getFormOptionsData:QP,deleteFormOptionsData:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suburbs"===t){e.next=6;break}return e.next=3,Aj.remove("/v1/assessment-reports/".concat(t,"/").concat(n));case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,Aj.remove("/v1/suburbs/".concat(n));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addFormOptionsData:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},"suburbs"===t){e.next=7;break}return e.next=4,Aj.post("/v1/assessment-reports/".concat(t),n);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,Aj.post("/v1/suburbs",n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateFormOptionsData:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},"suburbs"===t){e.next=7;break}return e.next=4,Aj.patch("/v1/assessment-reports/".concat(t,"/").concat(n),r);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,Aj.patch("/v1/suburbs/".concat(n),r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSuburbsFormOptionsData:KP},XP={getJobSurvey:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/site-survey"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),attachQuestionOption:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,Aj.post("/v1/jobs/".concat(t,"/site-survey/questions/").concat(n),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),detachQuestionOption:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,Aj.remove("/v1/jobs/".concat(t,"/site-survey/questions/").concat(n),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),postJobRooms:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,Aj.post("/v1/jobs/".concat(t,"/areas"),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateJobRooms:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r,a=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.next=4,Aj.patch("/v1/jobs/".concat(t,"/areas/").concat(r),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeJobRooms:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/areas/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},$P="Steamatic/CurrentJobSurvey/LOAD_SITE_SURVEY",eL="Steamatic/CurrentJobSurvey/LOAD_SITE_SURVEY_COMPLETE",tL="Steamatic/CurrentJobSurvey/LOAD_FLOORING_TYPES",nL="Steamatic/CurrentJobSurvey/LOAD_FLOORING_TYPES_COMPLETE",rL="Steamatic/CurrentJobSurvey/SEND_SURVEY_ANSWER",aL="Steamatic/CurrentJobSurvey/SEND_SURVEY_ANSWER_COMPLETE",oL="Steamatic/CurrentJobSurvey/SEND_JOB_ROOM",iL="Steamatic/CurrentJobSurvey/REQUEST_REMOVE_JOB_ROOM",cL="Steamatic/CurrentJobSurvey/SEND_JOB_ROOM_COMPLETE",sL="Steamatic/CurrentJobSurvey/REMOVE_JOB_ROOM_COMPLETE",lL="Steamatic/CurrentJobSurvey/RESET",uL="Steamatic/CurrentJobSurvey/ERROR",dL={data:{allQuestions:[],jobQuestions:[],jobRooms:[],flooringTypes:[]},error:null,removing:{rooms:[]},loading:!1,ready:{surveyIsReady:!1,flooringIsReady:!1}},pL=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL.data,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case nL:return Object(c.a)(Object(c.a)({},e),{},{flooringTypes:t.payload});case eL:return Object(c.a)(Object(c.a)({},e),t.payload);case cL:return Object(c.a)(Object(c.a)({},e),{},{jobRooms:[].concat(Object(Dm.a)(e.jobRooms),[t.payload])});case sL:return Object(c.a)(Object(c.a)({},e),{},{jobRooms:e.jobRooms.filter((function(e){return e.id!==t.payload}))});case lL:return dL.data;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL.error,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case uL:return t.payload;case eL:case lL:return dL.error;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL.loading,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case tL:case $P:case rL:case oL:return!0;case nL:case eL:case aL:case cL:case uL:return!1;case lL:return dL.loading;default:return e}},removing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL.removing,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case iL:return Object(c.a)(Object(c.a)({},e),{},{rooms:[].concat(Object(Dm.a)(e.rooms),[t.payload])});case sL:return Object(c.a)(Object(c.a)({},e),{},{rooms:e.rooms.filter((function(e){return e!==t.payload}))});default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL.ready,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case nL:return{surveyIsReady:e.surveyIsReady,flooringIsReady:!0};case eL:return{surveyIsReady:!0,flooringIsReady:e.flooringIsReady};case lL:return dL.ready;default:return e}}}),hL=function(){return{type:lL}},bL=function(e){return{type:uL,payload:e}},fL=function(){return{type:$P}},mL=function(e){return{type:iL,payload:Number(e)}},jL=function(e){return{type:eL,payload:e}},vL=function(e){return{type:sL,payload:Number(e)}},OL=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n().currentJobSurvey.ready.flooringIsReady){e.next=6;break}return e.next=4,ZP.getFlooringTypes();case 4:r=e.sent,t((a=r.data,{type:nL,payload:a}));case 6:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}()},gL=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[XP.getJobSurvey(e),n(OL())],n(fL()),t.prev=2,t.next=5,Promise.all(r);case 5:a=t.sent,o=a[0].data,n(jL(o)),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),n(bL(t.t0)),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},xL=function(e,t,n){var r=n.optionId,a=n.answer;return function(){var n=Object(Um.a)(Fm.a.mark((function n(o){var i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={},r&&(i.site_survey_question_option_id=r),a&&(i.answer=a),o({type:rL}),n.prev=4,n.next=7,XP.attachQuestionOption(e,t,i);case 7:o({type:aL}),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(4),o(bL(n.t0)),n.t0;case 14:case"end":return n.stop()}}),n,null,[[4,10]])})));return function(e){return n.apply(this,arguments)}}()},yL=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a,o,i,c;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:oL}),n.prev=1,!t.area_id){n.next=21;break}return n.next=5,XP.updateJobRooms(e,t,t.area_id);case 5:return a=[XP.getJobSurvey(t.job_id),r(OL())],r(fL()),n.prev=7,n.next=10,Promise.all(a);case 10:o=n.sent,i=o[0].data,r(jL(i)),n.next=19;break;case 15:throw n.prev=15,n.t0=n.catch(7),r(bL(n.t0)),n.t0;case 19:n.next=25;break;case 21:return n.next=23,XP.postJobRooms(e,t);case 23:c=n.sent,r((s=c.data,{type:cL,payload:s}));case 25:n.next=31;break;case 27:throw n.prev=27,n.t1=n.catch(1),r(bL(n.t1)),n.t1;case 31:case"end":return n.stop()}var s}),n,null,[[1,27],[7,15]])})));return function(e){return n.apply(this,arguments)}}()},wL=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(mL(t)),n.prev=1,n.next=4,XP.removeJobRooms(e,t);case 4:r(vL(t)),n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(1),r(bL(n.t0)),n.t0;case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()};function _L(){var e=Object(f.a)(["\n  display: table-row;\n  color: unset;\n  &:not(:last-of-type) "," {\n    border-bottom: ",";\n  }\n  &:hover {\n    color: unset;\n    text-decoration: none;\n  }\n"]);return _L=function(){return e},e}function kL(){var e=Object(f.a)(["\n  display: table-row;\n  &:not(:last-of-type) "," {\n    border-bottom: ",";\n  }\n"]);return kL=function(){return e},e}function SL(){var e=Object(f.a)(["\n  display: table-cell;\n  ",";\n"]);return SL=function(){return e},e}function CL(){var e=Object(f.a)(["\n  display: table-row-group;\n"]);return CL=function(){return e},e}function NL(){var e=Object(f.a)(["\n  display: table-cell;\n  ",";\n  border-bottom: ",";\n"]);return NL=function(){return e},e}function EL(){var e=Object(f.a)(["\n  display: table-header-group;\n"]);return EL=function(){return e},e}function AL(){var e=Object(f.a)(["\n  display: table;\n  border: ",";\n"]);return AL=function(){return e},e}function TL(){var e=Object(f.a)(["\n  padding: 0.75em;\n"]);return TL=function(){return e},e}var IL="1px solid ".concat(y.gray2," !important"),RL=Object(x.css)(TL()),DL=x.default.div(AL(),IL),ML=x.default.div(EL()),PL=x.default.div(NL(),RL,IL),LL=x.default.div(CL()),FL=x.default.div(SL(),RL),UL=x.default.div(kL(),FL,IL),VL=Object(x.default)(Uf.b)(_L(),FL,IL);function BL(){var e=Object(f.a)(["\n  display: table-row;\n  background: ",";\n  cursor: pointer;\n  &:not(:last-of-type) "," {\n    border-bottom: 1px solid "," !important;\n  }\n  &:hover {\n    background-color: ",";\n  }\n"]);return BL=function(){return e},e}function JL(){var e=Object(f.a)(["\n  font-weight: normal;\n  color: ",";\n"]);return JL=function(){return e},e}function zL(){var e=Object(f.a)(["\n  font-weight: bold;\n  color: ",";\n"]);return zL=function(){return e},e}function qL(){var e=Object(f.a)(["\n  float: right;\n"]);return qL=function(){return e},e}function WL(){var e=Object(f.a)(["\n  min-width: 200px;\n"]);return WL=function(){return e},e}var HL=x.default.div(WL()),GL=x.default.div(qL()),YL=x.default.div(zL(),y.black0),QL=(x.default.div(JL(),y.black0),x.default.div(BL(),(function(e){return e.selected?y.gray2:""}),FL,y.gray2,(function(e){return e.selected?y.gray2:y.semiGray})));function KL(){var e=Object(f.a)(["\n  ","\n  position: relative;\n  ",", ",", "," {\n    ","\n  }\n  "," {\n    ","\n  }\n  "," ",", "," {\n    ","\n  }\n  "," {\n    "," {\n      "," {\n        ","\n      }\n    }\n  }\n  .no-items {\n    color: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    position: absolute;\n    height: ","px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n  }\n"]);return KL=function(){return e},e}function ZL(){var e=Object(f.a)(["\n  ","\n  tr {\n    ","\n  }\n  td {\n    ","\n  }\n  tbody tr {\n    ","\n  }\n  thead {\n    tr {\n      th {\n        ","\n      }\n    }\n  }\n  .no-items {\n    color: ",";\n    text-align: center;\n  }\n"]);return ZL=function(){return e},e}function XL(){var e=Object(f.a)(["\n  color: ",";\n  ","\n"]);return XL=function(){return e},e}function $L(){var e=Object(f.a)(["\n  cursor: pointer;\n  &.selected-row {\n    background-color: ",";\n    &:hover {\n      opacity: 0.75;\n    }\n  }\n  &:hover {\n    background-color: ",";\n  }\n"]);return $L=function(){return e},e}function eF(){var e=Object(f.a)(["\n  padding: 5px 15px;\n  vertical-align: middle;\n  &:first-child {\n    padding-left: 20px;\n  }\n"]);return eF=function(){return e},e}function tF(){var e=Object(f.a)(["\n  height: ","px;\n"]);return tF=function(){return e},e}function nF(){var e=Object(f.a)(["\n  border: 1px solid ",";\n  width: 100%;\n"]);return nF=function(){return e},e}var rF=Object(x.css)(nF(),y.gray2),aF=Object(x.css)(tF(),50),oF=Object(x.css)(eF()),iF=Object(x.css)($L(),y.blue0,y.semiGray),cF=Object(x.css)(XL(),y.gray4,oF),sF=x.default.table(ZL(),rF,aF,oF,iF,cF,y.gray4),lF=Object(x.default)(DL)(KL(),rF,UL,VL,QL,aF,FL,oF,LL,UL,VL,iF,ML,UL,PL,cF,y.gray4,50),uF=sF;function dF(){var e=Object(f.a)(["\n  thead tr {\n    height: 50px;\n  }\n  tbody tr:nth-of-type(odd) {\n    background: ",";\n  }\n  input {\n    background: white;\n    border: 1px solid ",";\n  }\n  .form-group {\n    margin-bottom: 0;\n  }\n"]);return dF=function(){return e},e}var pF,hF=Object(x.default)(uF)(dF(),y.gray0,y.gray2);!function(e){e.Question="question",e.Answer="answer",e.QuestionAnswer="question_answer"}(pF||(pF={}));var bF="AddQuestionToJobForm",fF=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={answerOptions:[],question:void 0},e.onQuestionChange=function(t){var n=t;e.setState({question:n}),e.setState({answerOptions:n.site_survey_question_options||[]})},e.renderBody=function(){var t=e.props,n=t.questions,r=t.handleSubmit,o=e.state,i=o.question,c=o.answerOptions;return Object(a.jsx)("form",{id:bF,onSubmit:r,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(yv.a,{name:pF.Question,component:Kv,options:n,placeholder:"Select question",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},label:"Question",validate:uv,onChange:e.onQuestionChange})}),i&&Object(a.jsx)("div",{className:"col-5",children:c.length>0?Object(a.jsx)(yv.a,{name:pF.QuestionAnswer,component:Kv,options:c,placeholder:"Select Answer",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},label:"Answer",validate:uv}):Object(a.jsx)(yv.a,{name:pF.Answer,component:ZO,placeholder:"Type answer",label:"Answer",validate:uv})})]})})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",form:bF,children:"Save"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,loading:r,footer:this.renderFooter(),body:this.renderBody(),title:"Add Question"})})}}]),n}(p.PureComponent),mF=Object(Gj.a)({form:bF})(fF);function jF(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  margin-top: 60px;\n"]);return jF=function(){return e},e}function vF(){var e=Object(f.a)(["\n  margin-bottom: ",";\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return vF=function(){return e},e}function OF(){var e=Object(f.a)(["\n  .form-group {\n    max-width: 200px;\n  }\n  th {\n    &:first-child {\n      width: 50%;\n      max-width: 320px;\n    }\n    &:last-child {\n      width: 78px;\n    }\n  }\n  td:first-child {\n    input {\n      max-width: 250px;\n    }\n  }\n"]);return OF=function(){return e},e}function gF(){var e=Object(f.a)(["\n  th:last-child {\n    width: 30%;\n    min-width: 160px;\n    padding-right: 80px;\n  }\n  td:first-child {\n    font-weight: ",";\n    &.no-items {\n      color: ",";\n      font-weight: ",";\n      text-align: center;\n    }\n  }\n  .form-group {\n    max-width: 200px;\n  }\n"]);return gF=function(){return e},e}function xF(){var e=Object(f.a)(["\n  cursor: pointer;\n  opacity: ",";\n  display: flex;\n  justify-content: space-between;\n  .icon {\n    padding: 4px;\n  }\n"]);return xF=function(){return e},e}var yF=x.default.div(xF(),(function(e){return e.disabled?.3:1})),wF=Object(x.default)(hF)(gF(),Bf.bold,y.gray4,Bf.normal),_F=Object(x.default)(hF)(OF()),kF=x.default.span(vF(),Vf.smaller,y.blue4),SF=x.default.h2(jF(),Bf.bold,Vf.normal,y.gray4),CF=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).scheduledUpdateTimer=null,e.state={addNewRoom:!1,edited:!1,showModal:!1,editingId:null},e.roomsCountTouched=!1,e.clippedRoom={},e.addNewRoom=function(){e.state.edited||e.setState({addNewRoom:!0})},e.onSaveRoom=function(t){return function(n){var r=e.state,a=r.edited,o=r.editingId,i=n.rooms[t];return i.name&&i.flooring_type?(e.setState({edited:!1,editingId:null}),e.props.onSubmit({rooms:[i],edited:a,editingId:o})):Promise.reject()}},e.onSaveQuestions=function(t){var n=t.questions.filter((function(t,n){var r=e.props.initialValues.questions[n];return!!t.site_survey_question_option_id&&r&&(t.site_survey_question_option_id.value!==r.site_survey_question_option_id.value||t.answer!==r.answer)}));e.props.onSubmit({questions:n})},e.renderNoQuestions=function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:3,children:"No questions..."})})},e.renderNoRooms=function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:3,children:"No rooms..."})})},e.renderQuestionsRows=function(t){return function(r){var o=r.fields,i=o.getAll();i&&0!==i.length||e.props.initialValues.questions.forEach((function(e){return o.push(e)}));var c=o.map((function(r,i){var c=o.getAll()[i];return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:c.name}),Object(a.jsx)("td",{children:c.site_survey_question_options.length?Object(a.jsx)(yv.a,{name:"".concat(r,".site_survey_question_option_id"),placeholder:"Select",component:Kv,options:c.site_survey_question_options.map((function(e){return{value:e.id,label:e.name}})),onChange:function(){return setTimeout(e.props.handleSubmit(e.onSaveQuestions))},selectStyles:n.customTypeSelectStyles}):Object(a.jsx)(yv.a,{name:"".concat(r,".answer"),placeholder:"Answer",component:ZO,onChange:e.scheduleUpdate(i)})}),Object(a.jsx)("td",{children:Object(a.jsx)(yF,{disabled:!t.has(Dw.JOBS_UPDATE),children:Object(a.jsx)(Ff,{name:Ef.Remove,onClick:function(){return e.removeQuestion(c)}})})})]},"qn-row-".concat(i))}));return Object(a.jsx)(a.Fragment,{children:c})}},e.scheduleUpdate=function(t){return function(n){!function e(){document.getElementsByName("questions[".concat(t,"].answer"))[0].onblur=function(n){n.relatedTarget||setTimeout((function(){document.getElementsByName("questions[".concat(t,"].answer"))[0].focus(),e()}))}}();var r=e.props.job;e.scheduledUpdateTimer&&clearTimeout(e.scheduledUpdateTimer),r&&(e.scheduledUpdateTimer=setTimeout(e.handleSubmitForm(t),1e3))}},e.handleSubmitForm=function(t){return function(){var n=e.props,r=n.handleSubmit;return n.submitting?(e.scheduleUpdate(t),Promise.resolve()):r(e.onSaveQuestions)()}},e.renderRoomFields=function(){return function(t){var r=t.fields;e.state.addNewRoom&&(r.push(e.clippedRoom),e.clippedRoom={},e.setState({addNewRoom:!1}));var o=r.map((function(t,o){var i=function(t){e.props.handleSubmit(e.onSaveRoom(o))().then((function(){return r.remove(o)}))};return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(yv.a,{name:"".concat(t,".name"),placeholder:"Enter a name...",component:ZO,onBlur:i})}),Object(a.jsx)("td",{children:Object(a.jsx)(yv.a,{name:"".concat(t,".flooring_type"),placeholder:"Select type",component:Kv,options:e.flooringOptions,onBlur:i,selectStyles:n.customTypeSelectStyles})}),Object(a.jsx)("td",{children:e.renderRoomControls((function(){r.remove(o),e.setState({edited:!1,editingId:null})}),(function(){}),(function(){}))})]},"rooms-row-".concat(o))}));return Object(a.jsx)(a.Fragment,{children:o})}},e.renderRoomsRows=function(t){return e.props.jobRooms?e.props.jobRooms.map((function(n,r){var o=e.props.flooringTypes.find((function(e){return e.id===n.flooring_type_id})),i=e.props.removingRooms.includes(Number(n.id)),c=function(){var t=Object(Um.a)(Fm.a.mark((function t(){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(Sw("Confirm","Delete Room!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to permanently delete room ",Object(a.jsx)("strong",{children:n.name})," of type ",Object(a.jsx)("strong",{children:(null===o||void 0===o?void 0:o.name)||"Unknown"}),"? This action cannot be undone!"]})));case 3:if(!t.sent){t.next=9;break}return e.props.onRemoveRoom(n.id),t.abrupt("return",Promise.resolve());case 9:return t.abrupt("return",Promise.reject(!0));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n.name}),Object(a.jsx)("td",{children:o?o.name:"Unknown"}),Object(a.jsx)("td",{children:t&&e.renderRoomControls(c,(function(){e.state.edited||e.copyExistRoom({name:n.name,flooring_type:e.flooringOptions.find((function(e){return e.value===n.flooring_type_id}))})}),(function(){e.editExistRoom({name:n.name,flooring_type:e.flooringOptions.find((function(e){return e.value===n.flooring_type_id})),areaId:n.id})}),i)})]},"room-tr-".concat(r))})):null},e.copyExistRoom=function(t){e.clippedRoom=t,e.addNewRoom()},e.editExistRoom=function(t){e.setState({edited:!0,editingId:t.areaId}),e.clippedRoom=t,e.addNewRoom()},e.renderRoomControls=function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=o?function(){return null}:t,c=o?function(){return null}:n||function(){return null};return Object(a.jsxs)(yF,{disabled:o||e.props.disabled,children:[Object(a.jsx)("div",{className:"icon",children:Object(a.jsx)(Ff,{name:Ef.CopyPaste,onClick:c})}),Object(a.jsx)("div",{className:"icon",children:Object(a.jsx)(Ff,{name:Ef.Remove,onClick:i})})]})},e.removeQuestion=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.loadSurvey,t.next=3,a(Sw("Confirm","Delete question?"));case 3:if(!t.sent){t.next=8;break}return t.next=7,XP.detachQuestionOption(n.job_id,n.id);case 7:o(n.job_id);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.onQuestionAdd=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.job,o=r.loadSurvey,i={},n[pF.Answer]&&(i.answer=n[pF.Answer]),n[pF.QuestionAnswer]&&(i.site_survey_question_option_id=n[pF.QuestionAnswer].id),!a){t.next=9;break}return t.next=7,XP.attachQuestionOption(a.id,n[pF.Question].id,i);case 7:e.closeModal(),o(a.id);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.scheduledUpdateTimer&&clearTimeout(this.scheduledUpdateTimer)}},{key:"componentDidUpdate",value:function(e){this.props.disabled||!e.surveyIsReady&&this.props.surveyIsReady&&!this.roomsCountTouched&&0===this.props.jobRooms.length&&(this.addNewRoom(),this.roomsCountTouched=!0)}},{key:"render",value:function(){var e=this,t=this.props.questionsForAdd,n=this.state.showModal;return Object(a.jsx)(Cw.Consumer,{children:function(r){return Object(a.jsxs)(a.Fragment,{children:[n&&Object(a.jsx)(mF,{isOpen:n,onClose:e.closeModal,questions:t,onSubmit:e.onQuestionAdd}),Object(a.jsxs)("form",{children:[Object(a.jsx)(SF,{children:"Triage questions"}),Object(a.jsxs)(wF,{className:"table table-striped",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Question"}),Object(a.jsx)("th",{scope:"col",colSpan:2,children:"Customer Response"})]})}),Object(a.jsx)("tbody",{children:e.props.initialValues.questions.length>0?Object(a.jsx)(Hj.a,{name:"questions",component:e.renderQuestionsRows(r)}):e.renderNoQuestions()})]}),!e.props.disabled&&r.has(Dw.JOBS_UPDATE)&&Object(a.jsx)(kF,{onClick:e.openModal,children:"Add question"}),Object(a.jsx)(SF,{children:"Rooms"}),Object(a.jsxs)(_F,{className:"table table-striped",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Name"}),Object(a.jsx)("th",{scope:"col",children:"Flooring Type"}),Object(a.jsx)("th",{})]})}),Object(a.jsxs)("tbody",{children:[e.props.disabled&&0===e.props.jobRooms.length?e.renderNoRooms():e.renderRoomsRows(r.has(Dw.JOBS_AREAS_MANAGE)),Object(a.jsx)(Hj.a,{name:"rooms",component:e.renderRoomFields()})]})]}),!e.props.disabled&&r.has(Dw.JOBS_AREAS_MANAGE)&&Object(a.jsx)(kF,{onClick:e.addNewRoom,children:"Add room"})]})]})}})}},{key:"flooringOptions",get:function(){return this.props.flooringTypes.map((function(e){return{value:e.id,label:e.name}}))}}]),n}(p.PureComponent);CF.customTypeSelectStyles={control:function(e){return Object(c.a)(Object(c.a)({},e),{},{maxWidth:"200px",borderColor:y.gray2})}};var NF=Object(LO.compose)(Object(Gj.a)({form:"JobSiteSurveyForm",enableReinitialize:!0}),Object(b.b)())(CF);function EF(){var e=Object(f.a)(["\n  margin: 45px auto;\n"]);return EF=function(){return e},e}var AF=x.default.div(EF()),TF=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadSurvey=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,!r.currentJobSurvey.loading){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return a(hL()),t.next=6,a(gL(n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submitSurveyForm=function(t){var n=[];return t.rooms&&(t.edited?n.push(e.submitRooms(t.rooms,t.editingId)):n.push(e.submitRooms(t.rooms))),t.questions&&n.push(e.submitQuestions(t.questions)),Promise.all(n)},e.submitRooms=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.dispatch,i=a.currentJob,c=i.data.id,s=n.map((function(e){var t={flooring_type_id:e.flooring_type.value,name:e.name,job_id:c,area_id:r};return o(yL(c,t))})),t.abrupt("return",Promise.all(s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.submitQuestions=function(t){var n=e.props,r=n.dispatch,a=n.currentJob.data.id,o=t.map((function(e){var t=e.site_survey_question_option_id,n=e.answer;return t&&t.value||n?r(xL(a,e.id,{optionId:t.value,answer:n})):Promise.resolve()}));return Promise.all(o)},e.removeRoom=function(t){var n=e.props,r=n.dispatch,a=n.currentJob.data.id;r(wL(a,t))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match;this.loadSurvey(e.params.id)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match,n=e.match.params.id;t.params.id!==n&&this.loadSurvey(t.params.id)}},{key:"render",value:function(){var e=this.props.currentJobSurvey.data,t=e.jobRooms,n=e.flooringTypes,r=e.allQuestions,o=this.props.currentJobSurvey,i=o.loading,c=o.ready,s=this.props.currentJobSurvey.removing.rooms,l=this.props.currentJob.data&&this.props.currentJob.data.edit_forbidden;return Object(a.jsx)(FS,{padding:"0 30px",overflow:"visible",children:Object(a.jsxs)(AF,{children:[i&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(NF,{job:this.props.currentJob.data,onSubmit:this.submitSurveyForm,onRemoveRoom:this.removeRoom,removingRooms:s,jobRooms:t,flooringTypes:n,surveyIsReady:c.surveyIsReady,initialValues:this.formInitialValues,disabled:!!l,questionsForAdd:r||[],loadSurvey:this.loadSurvey})]})})}},{key:"questions",get:function(){var e=this.props.currentJobSurvey.data,t=e.allQuestions,n=e.jobQuestions;return n&&t?n.map((function(e){return Object(c.a)(Object(c.a)({},e),t.find((function(t){return t.id===e.site_survey_question_id})))})):[]}},{key:"formInitialValues",get:function(){return{questions:this.questions.map((function(e){var t=e.site_survey_question_options.find((function(t){return t.id===e.site_survey_question_option_id})),n=t&&t.name,r={value:e.site_survey_question_option_id,label:n};return Object(c.a)(Object(c.a)({},e),{},{site_survey_question_option_id:r})})).sort((function(e,t){return e.site_survey_question_id-t.site_survey_question_id}))}}}]),n}(p.PureComponent),IF=Object(LO.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,currentJobSurvey:e.currentJobSurvey}})),v.g)(TF),RF=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/search/users-and-teams?term=".concat(t),n,r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),DF={searchTeamUserWC:yj(RF,3),searchTeamUser:RF};function MF(){var e=Object(f.a)(["\n  display: inline-block;\n  margin-left: 12px;\n  text-transform: uppercase;\n  color: ",";\n"]);return MF=function(){return e},e}function PF(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: relative;\n"]);return PF=function(){return e},e}function LF(){var e=Object(f.a)(["\n  display: inline-block;\n  margin-left: -15px;\n  font-weight: ",";\n"]);return LF=function(){return e},e}var FF=Object(x.default)(Kj(["bold"])("div"))(LF(),(function(e){return e.bold&&Bf.bold})),UF=x.default.div(PF()),VF=x.default.div(MF(),y.gray4),BF=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.handleClick=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.onItemClick){t.next=5;break}return e.setState({loading:!0}),t.next=4,e.props.onItemClick();case 4:e.setState({loading:!1});case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.className,r=e.bold,o=e.locationCode,i=this.state.loading;return Object(a.jsxs)(UF,{children:[Object(a.jsxs)("div",{className:g()("dropdown-item",n),onClick:this.handleClick,children:[Object(a.jsx)(FF,{bold:r,children:t}),o&&Object(a.jsx)(VF,{children:o})]}),i&&Object(a.jsx)(av,{size:20,color:y.white})]})}}]),n}(p.PureComponent);function JF(){var e=Object(f.a)(["\n  color: ",";\n"]);return JF=function(){return e},e}function zF(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return zF=function(){return e},e}function qF(){var e=Object(f.a)(["\n  width: 265px;\n  position: relative;\n"]);return qF=function(){return e},e}var WF=x.default.div(qF()),HF=x.default.div(zF()),GF=x.default.span(JF(),y.gray3),YF={users:[],teams:[]},QF=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={usersTeams:YF,isLoading:!1,isTouched:!1},e.activeRequest=void 0,e.handleSearch=function(t){if(e.activeRequest&&e.activeRequest.abort(),t){var n=DF.searchTeamUserWC(t),r=n.promise,a=n.controller;e.activeRequest=a,e.setState({isLoading:!0}),r.then((function(t){return e.setState({isLoading:!1,usersTeams:t,isTouched:!0})})).catch((function(t){"AbortError"!==t.name&&(e.setState({isLoading:!1,usersTeams:YF}),Qm(Vm.Warning,"Search failed"))}))}else e.setState({usersTeams:YF,isTouched:!1,isLoading:!1})},e.debouncedSearch=Object(m.debounce)(e.handleSearch,500),e.renderIconTrigger=function(t){var n=e.props.disabled;return Object(a.jsx)(cw,{"data-tip":"Assign to","data-for":"job-menu-tooltip",onClick:n?function(){return null}:t.toggle,disabled:n,children:Object(a.jsx)(Ff,{name:Ef.EditPerson})})},e.selectUserOrTeam=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onUserTeamClick(n);case 2:r.close();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.deselectUserOrTeam=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.onSelectedUserTeamClick(n);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:r.close();case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}(),e.renderUsersMenu=function(t){var n=e.state,r=n.usersTeams,o=n.isLoading,i=n.isTouched,c=e.props.selectedUsersTeams,s=r?r.users.concat(r.teams).filter((function(e){return!c.some((function(t){return e.id===t.id&&e.type===t.type}))})).map((function(e){return{item:e,assigned:!1}})):[],l=c.map((function(e){return{item:e,assigned:!0}})),u=Object(m.orderBy)(s.concat(l),[function(e){return e.item.name}],["asc"]);return Object(a.jsxs)(WF,{children:[Object(a.jsx)("div",{className:"px-2",children:Object(a.jsx)(ES,{loading:o,onSearchValueChange:e.debouncedSearch,placeholder:"Search..."})}),0===s.length&&i&&!o&&Object(a.jsx)(HF,{children:Object(a.jsx)(GF,{className:"px-2",children:"No users or teams found"})}),u.length>0&&Object(a.jsx)(HF,{children:u.map((function(n){return Object(a.jsx)(BF,{name:n.item.name,bold:n.assigned,locationCode:n.item.primary_location&&n.item.primary_location.code,onItemClick:n.assigned?function(){return e.deselectUserOrTeam(n.item,t)}:function(){return e.selectUserOrTeam(n.item,t)}},"".concat(n.item.id,"-").concat(n.item.type))}))})]})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.activeRequest&&this.activeRequest.abort()}},{key:"render",value:function(){return Object(a.jsx)(fw,{trigger:this.renderIconTrigger,menu:this.renderUsersMenu})}}]),n}(p.PureComponent);function KF(){var e=Object(f.a)(["\n  color: ",";\n"]);return KF=function(){return e},e}var ZF=x.default.label(KF(),y.gray4);function XF(){var e=Object(f.a)(["\n  margin-right: 10px;\n"]);return XF=function(){return e},e}function $F(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  width: fit-content;\n  :not(:last-child){\n    margin-right: ","\n  }\n  input {\n    margin-right: 10px;\n  }\n"]);return $F=function(){return e},e}var eU,tU=x.default.label($F(),(function(e){return"horizontal"===e.direction?"25px":"auto"})),nU=x.default.div(XF()),rU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.meta,o=t.size,i=t.direction,s=t.disabled,l=t.input,u=r.touched&&r.error;return Object(a.jsxs)("div",{className:"form-group",children:[this.props.label&&Object(a.jsx)(ZF,{children:this.props.label}),Object(a.jsx)("div",{className:"horizontal"===i?"d-flex":void 0,children:n&&n.map((function(t,n){return Object(a.jsxs)(tU,{id:"".concat(l.name,"_").concat(t.value),direction:i,className:"radio-list-item-wrapper ".concat(e.props.input.value===t.value?"checked":""),children:[Object(a.jsx)(nU,{children:Object(a.jsx)(hO,Object(c.a)(Object(c.a)({},e.props.input),{},{size:o||16,value:t.value,checked:e.props.input.value===t.value,disabled:t.disabled||s}))}),Object(a.jsx)("div",{children:t.label})]},n)}))}),u&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:r.error})]})}}]),n}(p.PureComponent),aU=n(48);function oU(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  margin: 0 -","px;\n  padding: 0 ","px;\n  padding-top: 20px;\n  margin-top: 40px;\n"]);return oU=function(){return e},e}function iU(){var e=Object(f.a)(["\n  flex-grow: 1;\n"]);return iU=function(){return e},e}function cU(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: ","px;\n"]);return cU=function(){return e},e}var sU=x.default.div(cU(),gO),lU=x.default.form(iU()),uU=x.default.div(oU(),y.gray2,OO,OO),dU={daily:"DAILY",weakly:"WEEKLY",fortnightly:"FORTNIGHTLY",monthly:"MONTHLY",yearly:"YEARLY",custom:"CUSTOM"},pU=[{value:dU.weakly,label:"Every Week"},{value:dU.fortnightly,label:"Every Fortnight"},{value:dU.monthly,label:"Every Month"},{value:dU.yearly,label:"Every Year"},{value:dU.custom,label:"Custom"}],hU=[{value:dU.daily,label:"Daily"},{value:dU.weakly,label:"Weekly"},{value:dU.monthly,label:"Monthly"},{value:dU.yearly,label:"Yearly"}],bU=(eU={},Object(k.a)(eU,dU.daily,"Day"),Object(k.a)(eU,dU.weakly,"Week"),Object(k.a)(eU,dU.monthly,"Month"),Object(k.a)(eU,dU.yearly,"Year"),eU);function fU(e){return(e.repeat!==dU.custom?aU.a.optionsToString({freq:aU.a[e.repeat!==dU.fortnightly?e.repeat:dU.weakly],interval:e.repeat!==dU.fortnightly?1:2,dtstart:new Date(1e3*e.start_date.add(1,"d").unix())}):aU.a.optionsToString({freq:aU.a[e.frequency.value],interval:e.every,dtstart:new Date(1e3*e.start_date.add(1,"d").unix()),until:new Date(1e3*e.end_date.add(1,"d").unix())})).split("\n").join(";").replace("RRULE:","").replace("DTSTART:","DTSTART=")}var mU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,form:{}},e.handleFormChange=function(){setTimeout((function(){e.props.handleSubmit(e.setData)()}))},e.setData=function(t){e.setState({form:t})},e.createRecurringJob=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.currentJob.data)){t.next=15;break}return e.setState({loading:!0}),t.prev=3,t.next=6,ly.createRecurringJob({recurrence_rule:fU(e.state.form),job_service_id:n.job_service_id||0,insurer_id:n.insurer_id||0,site_address_id:n.site_address_id||0,owner_location_id:n.owner_location_id||0,description:n.description||"---",job_id:n.id||0,user_id:e.props.userId});case 6:e.setState({loading:!1}),Qm(Vm.Success,"Recurring job successfully created!"),e.onClose(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),e.setState({loading:!1}),Qm(Vm.Danger,Object(a.jsx)(a.Fragment,{children:Object.entries(t.t0.fields).map((function(e,t){return Object(a.jsx)("div",{children:e[1]},t)}))}));case 15:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.setEvery=function(){var t=e.state.form;if(t){var n=t.frequency;return bU[(n||{}).value]||""}return""},e.onClose=function(){var t=e.props,n=t.onClose,r=t.reset;e.setState({loading:!1,form:{}}),r(),n()},e.customHintRenderCondition=function(){var t=e.state.form,n=t.frequency,r=t.every,a=n.value===dU.daily,o=[dU.weakly,dU.monthly,dU.yearly].includes(n.value)&&r;return a||o},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initialize({every:1})}},{key:"renderHint",value:function(){var e=this.state.form;if(!e)return"";var t=e,n=t.frequency,r=t.start_date;switch((n||{}).value){case"2":return r.format("dddd");default:return""}}},{key:"renderBody",value:function(){var e=this.state.form,t=e.repeat,n=e.start_date,r=e.end_date,o=e.every,i=e.frequency;return Object(a.jsxs)(sU,{children:[Object(a.jsxs)(lU,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"start_date",label:"Start Date",placeholder:"Start Date",component:Cy,futureEnabled:!0,onChange:this.handleFormChange})})}),t!==dU.custom&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"repeat",label:"Repeat",list:pU,direction:"vertical",component:rU,onChange:this.handleFormChange})})})}),t===dU.custom&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"frequency",label:"Frequency",placeholder:"Frequency",options:hU,component:Kv,onChange:this.handleFormChange})}),i&&i.value!==dU.daily&&Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"every",label:"Every X ".concat(this.setEvery().toLowerCase(),"(s)"),type:"number",min:1,component:ZO,onChange:this.handleFormChange})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"end_date",label:"Until Date",placeholder:"Until Date",component:Cy,futureEnabled:!0,onChange:this.handleFormChange})})})]})]}),t&&t!==dU.custom&&n&&Object(a.jsxs)(uU,{children:["This job will automatically reoccur ",Object(a.jsx)("strong",{children:t.toLowerCase()})," on"," ",Object(a.jsx)("strong",{children:n.format("dddd")})," starting"," ",Object(a.jsx)("strong",{children:qj(n,"D MMM YYYY")})," with no end date."]}),t&&t===dU.custom&&n&&r&&i&&this.customHintRenderCondition()&&Object(a.jsxs)(uU,{children:["This job will automatically reoccur"," ",Object(a.jsxs)("strong",{children:["every ",o>1&&i.value!==dU.daily?o:""," ",this.setEvery().toLowerCase(),o>1&&i.value!==dU.daily?"s":""]})," ",i.value!==dU.daily?"on ":"",Object(a.jsx)("strong",{children:this.renderHint()})," starting"," ",Object(a.jsx)("strong",{children:qj(n,"D MMM YYYY")})," and stop on"," ",Object(a.jsx)("strong",{children:qj(r,"D MMM YYYY")}),"."]})]})}},{key:"renderFooter",value:function(){var e=this.state.form,t=e.repeat,n=e.start_date,r=e.end_date,o=e.frequency;return Object(a.jsx)(Cg,{className:"btn btn-primary",onClick:this.createRecurringJob,disabled:!(t&&n&&(t!==dU.custom||t===dU.custom&&r&&o&&this.customHintRenderCondition())),children:"Create"})}},{key:"render",value:function(){var e=this.props.isOpen;return Object(a.jsx)(vO,{isOpen:e,children:Object(a.jsx)(PO,{onClose:this.onClose,title:"Create Recurring Job",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent),jU=Object(LO.compose)(Object(Gj.a)({form:"RecurringJobForm"}),Object(b.b)((function(e){return{currentJob:e.currentJob,userId:NP(e)}})))(mU),vU=function(e){var t=Object(c.a)(Object(c.a)({},e),{},{date:qj(e.date),items:e.items||[]});return e.location&&(t.location_id=e.location.id),e.recipient_contact&&(t.recipient_contact_id=e.recipient_contact.id),e.job&&(t.job_id=e.job.id),e.reference&&(t.reference=e.reference),e.invoice_template_id&&e.invoice_template_id>0&&(t.invoice_template_id=e.invoice_template_id),delete t.job,delete t.location,delete t.recipient_contact,0===t.invoice_template_id&&delete t.invoice_template_id,t},OU=function(e){var t=Object(c.a)({},e);return t.fields&&(t.fields={location:e.fields.location_id,recipient_contact:e.fields.recipient_contact_id,job:e.fields.job_id,date:e.fields.date,reference:e.fields.reference}),t},gU=function(e){var t={description:e.description,unit_cost:e.unit_cost,quantity:e.quantity};return e.gs_code&&(t.gs_code_id=e.gs_code.id),e.gl_account&&(t.gl_account_id=e.gl_account.id),e.tax_rate&&(t.tax_rate_id=e.tax_rate.id),t},xU=function(e){var t=Object(c.a)(Object(c.a)({},e.data),{},{date:Jj(e.data.date),due_at:Jj(e.data.due_at)});return e.data.job&&(t.job=ix(e.data.job)),{data:t}},yU=function(e){var t;return Object(c.a)(Object(c.a)({},vU(e)),{},{due_at:Wj(e.due_at),payment_term_id:null===e||void 0===e||null===(t=e.payment_term)||void 0===t?void 0:t.id})},wU=function(e){var t=OU(e);return t.fields&&(t.fields.due_at=e.fields.due_at),t},_U=function(e){return Object(c.a)(Object(c.a)({},gU(e)),{},{discount:e.discount||0,position:(null===e||void 0===e?void 0:e.position)||0})},kU=function(e,t){return void 0!==t?e.find((function(e){return e.id===t})):void 0};function SU(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push({name:r,path:t[r]});return Object(c.a)(Object(c.a)({},function(e,t){var n={};return t.forEach((function(t){var r=t.name,a=t.path;n[r]=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Aj.get("".concat(e,"/").concat(a),n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n}(e,n)),{},{getInfo:function(){var t=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Aj.get("".concat(e,"/info"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}var CU="/v1/finance/invoices",NU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(CU,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",xU(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),EU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("".concat(CU,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),AU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=_U(n),e.next=3,Aj.post("".concat(CU,"/").concat(t,"/items"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),TU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=_U(r),e.next=3,Aj.patch("".concat(CU,"/").concat(t,"/items/").concat(n),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),IU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(CU,"/").concat(t,"/items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(CU,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),DU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(CU,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),MU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(CU,"/").concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),PU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(CU,"/").concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(CU,"/").concat(t,"/approve-requests"),{approver_list:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),FU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("".concat(CU,"/").concat(t),{recipient_address:n,recipient_name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),UU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(CU,"/").concat(t,"/approve"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(CU,"/").concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),BU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(CU,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),JU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(CU,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.downloadFile("".concat(CU,"/").concat(t,"/document")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("".concat(CU,"/listings/search"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),WU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("".concat(CU,"/").concat(t,"/items/positions"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),HU=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/invoice-templates");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),GU=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/attach/invoice-item"),{bulkdata:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),YU=SU("".concat(CU,"/listings"),{getDraft:"draft",getAll:"all",getUnpaid:"unpaid",getOverdue:"overdue",getPaid:"paid",search:"search"}),QU=Object(c.a)(Object(c.a)({},YU),{},{findById:NU,create:function(e){var t=yU(e);return Aj.post(CU,t).then(xU).catch((function(e){return Promise.reject(wU(e))}))},update:function(e,t){var n=yU(t);return Aj.patch("".concat(CU,"/").concat(e),n).then(xU).catch((function(e){return Promise.reject(wU(e))}))},createItem:AU,updateItem:TU,removeItem:IU,addNoteToInvoice:RU,getInvoiceNotes:MU,removeNoteFromInvoice:DU,getApproverList:PU,sendApproveRequest:LU,adjustInvoice:FU,approveInvoice:UU,getInvoiceTags:VU,addTag:BU,removeTag:JU,remove:EU,forPrint:zU,getFilterInvoices:qU,invoiceItemsPositionUpdate:WU,getInvoicetemplates:HU,setInvoiceItemToJobCostingItem:GU}),KU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={stateCreateRecurringJobModal:!1},e.onUserClick=function(t){return ly.assignUserOrTeam(e.props.job.id,t.id,t.type).then(e.props.onUpdate)},e.onSelectedUserClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.dispatch,i=r.job,t.next=3,o(Sw("Confirm","Unassign Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to revoke assigment of Job ",Object(a.jsx)("strong",{children:ly.getJobName(i)})," from ",Object(a.jsx)("strong",{children:n.name}),"?"]})));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",Promise.reject(!0));case 6:return t.abrupt("return",ly.removeUserOrTeam(e.props.job.id,n.id,n.type).then(e.props.onUpdate));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.dispatch(XR(e.props.job.id,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStatusClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ly.applyNewJobStatus(e.props.job.id,{status:n.name,note:"---"});case 3:e.props.nextStatuses.fetch(e.props.job.id),e.props.onUpdate(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"This status can't be applied");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.openModal=function(t){e.setState(Object(k.a)({},t,!0))},e.closeModal=function(t){e.setState(Object(k.a)({},t,!1))},e.deleteJob=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.history,o=n.job,i=n.dispatch,t.next=3,i(Sw("Confirm","Delete Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to permanently delete Job ",Object(a.jsx)("strong",{children:ly.getJobName(o)}),"? This action cannot be undone!"]})));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",Promise.reject(!0));case 6:return t.abrupt("return",ly.removeJob(o.id).then((function(){window.location.pathname.startsWith("/job/".concat(o.id))&&r.replace("/jobs/inbox")})));case 7:case"end":return t.stop()}}),t)}))),e.followJob=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.onUpdate,t.next=3,ly.followJob(r.id);case 3:return o=t.sent,a(),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),e.unfollowJob=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.onUpdate,t.next=3,ly.unfollowJob(r.id);case 3:return o=t.sent,a(),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),e.canICreateRecurringJob=function(){var t=e.props.job;return t.job_service_id&&t.insurer_id&&t.site_address_id&&t.owner_location_id},e.createInvoiceFromJob=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.currentJobContacts,o=n.history,t.prev=1,t.next=4,QU.create({location:{id:r.assigned_location_id},recipient_contact:a.data.find((function(e){return e.invoice_to})),job:{id:r.id},date:qf()(),due_at:qf()().add(1,"d")});case 4:(i=t.sent)&&o.push("/finance/invoices/details/".concat(i.data.id)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Qm(Vm.Danger,"Could not create invoice");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.createPOFromJob=function(){var t=e.props,n=t.job;t.history.push("/finance/purchase-orders/create?form_job_id=".concat(n.id,"&form_location_id=").concat(n.assigned_location_id))},e.createCNFromJob=function(){var t=e.props,n=t.job;t.history.push("/finance/credit-notes/create?form_job_id=".concat(n.id,"&form_location_id=").concat(n.assigned_location_id))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.job;e.nextStatuses.fetch(t.id)}},{key:"componentDidUpdate",value:function(e){Jf.a.rebuild()}},{key:"getNextStatuses",value:function(){var e=this.props,t=e.nextStatuses,n=e.jobInvoices;if(t&&t.data){var r=!n||!!n&&n.filter((function(e){return e.virtual_status===Mf.unpaid})).length>0;return t.data.data.map((function(e,t){return{id:t,name:e,onClick:r&&[gj.Cancelled,gj.Closed].includes(e)?function(){return Qm(Vm.Warning,"There are outstanding invoices that have not been paid.")}:void 0}}))}return[]}},{key:"getRestMenuItems",value:function(e){var t=this,n=this.props,r=n.job,a=n.userId,o=(n.location,n.currentJobContacts.data),i=(n.onContactsToggle,(r.followers||[]).map((function(e){return e.id})).includes(a)),c=!(!o||!o.find((function(e){return e.invoice_to})));return[{name:i?"Unfollow job":"Follow job",onClick:i?this.unfollowJob:this.followJob,disabled:r.edit_forbidden||!e.has(Dw.JOBS_VIEW)||!a},{name:"Create recurring job",disabled:!this.canICreateRecurringJob()||!e.has(Dw.JOBS_MANAGE_RECURRING),onClick:function(){t.openModal("stateCreateRecurringJobModal")}},{type:"divider"},{name:"Create Invoice...",disabled:!e.has(Dw.INVOICES_MANAGE)||!c,onClick:this.createInvoiceFromJob},{name:"Create PO...",disabled:!e.has(Dw.PURCHASE_ORDERS_MANAGE)||!c,onClick:this.createPOFromJob},{name:"Create CN...",disabled:!e.has(Dw.CREDIT_NOTES_MANAGE)||!c,onClick:this.createCNFromJob},{type:"divider"},{name:"Delete",onClick:this.deleteJob,disabled:!e.has(Dw.JOBS_DELETE)}]}},{key:"render",value:function(){var e=this,t=this.props.job,n=this.state.stateCreateRecurringJobModal,r=t.edit_forbidden,o=!!(t.assigned_location_id&&t.assigned_location_id>0),i=!!(t.owner_location_id&&t.owner_location_id>0);return Object(a.jsx)(Cw.Consumer,{children:function(c){var s=e.getRestMenuItems(c);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"job-menu-tooltip",effect:"solid",place:"left"}),Object(a.jsxs)(sw,{className:"d-flex align-items-center justify-content-between print-hide",children:[Object(a.jsxs)("div",{children:[c.has(Dw.JOBS_MANAGE_MESSAGES)&&Object(a.jsx)(cw,{"data-tip":"Reply","data-for":"job-menu-tooltip",disabled:r,children:Object(a.jsx)(Ff,{name:Ef.EmailReply,onClick:r?function(){return null}:e.props.onEmailReply})}),c.has(Dw.JOBS_MANAGE_NOTES)&&Object(a.jsx)(cw,{"data-tip":"Add note","data-for":"job-menu-tooltip",disabled:r,children:Object(a.jsx)(Ff,{name:Ef.AddNote,onClick:r?function(){return null}:e.props.onNoteAdd})}),c.has(Dw.JOBS_UPDATE)&&Object(a.jsx)(HC,{loading:e.props.nextStatuses.loading,type:"job",statuses:e.getNextStatuses(),onStatusClick:e.onStatusClick}),c.has(Dw.USERS_VIEW)&&Object(a.jsx)(QF,{onUserTeamClick:e.onUserClick,onSelectedUserTeamClick:e.onSelectedUserClick,selectedUsersTeams:t.assigned_to,disabled:r||!c.has(Dw.JOBS_ASSIGN_STAFF)||!o||!i}),c.has(Dw.TAGS_VIEW)&&c.has(Dw.JOBS_MANAGE_TAGS)&&Object(a.jsx)(WC,{type:"job",filter:t.tags,onTagClick:e.onTagClick,disabled:r}),s.length>0&&Object(a.jsx)(yw,{items:s,disabled:r})]}),Object(a.jsx)(tN,{channel:"online-job-".concat(t.id)})]}),n&&Object(a.jsx)(jU,{isOpen:n,onClose:function(){return e.closeModal("stateCreateRecurringJobModal")}})]})}})}}]),n}(p.PureComponent),ZU=Object(LO.compose)(v.g,Object(b.b)((function(e){return{userId:NP(e),currentJobContacts:e.currentJobContacts}})),Mm({nextStatuses:{fetch:ly.getJobNextStatuses}}))(KU);function XU(){var e=Object(f.a)(["\n  margin-left: 30px;\n"]);return XU=function(){return e},e}function $U(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n"]);return $U=function(){return e},e}function eV(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  text-align: right;\n  white-space: nowrap;\n"]);return eV=function(){return e},e}function tV(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  margin-right: ",";\n"]);return tV=function(){return e},e}function nV(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n"]);return nV=function(){return e},e}function rV(){var e=Object(f.a)(["\n  padding: 32px 30px 17px 30px;\n  border-bottom: 1px solid ",";\n"]);return rV=function(){return e},e}var aV=x.default.div(rV(),y.gray2),oV=x.default.div(nV(),Bf.light,Vf.medium),iV=x.default.div(tV(),Bf.bold,Vf.medium,Vf.smaller),cV=x.default.div(eV(),Bf.bold,Vf.medium),sV=Object(x.default)(NC)($U(),Vf.normal),lV=x.default.div(XU()),uV=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeTag=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.dispatch($R(e.props.job.id,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.loading,o=t.disabled;return Object(a.jsx)(aV,{className:"d-flex flex-row",children:Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(iV,{children:"Customer Address"}),Object(a.jsx)(oV,{children:n.site_address?n.site_address.full_address:"No Site Address Specified"}),t.has(Dw.TAGS_VIEW)&&Object(a.jsx)(lV,{children:Object(a.jsx)(UC,{tags:n.tags,onRemove:o||n.edit_forbidden?void 0:e.removeTag,loading:r})}),Object(a.jsx)(cV,{className:"flex-grow-1",children:ly.getJobName(n)}),Object(a.jsx)(sV,{tag:{name:n.latest_status.status,color:y.gray4}})]})}})})}}]),n}(p.PureComponent),dV=Object(b.b)()(uV),pV=n(75),hV="Steamatic/CurrentJob/Photos/LOAD_PHOTOS",bV="Steamatic/CurrentJob/Photos/LOAD_PHOTOS_COMPLETE",fV="Steamatic/CurrentJob/Photos/RESET",mV="Steamatic/CurrentJob/Photos/ERROR",jV="Steamatic/CurrentJob/Photos/SELECTED_PHOTOS",vV="Steamatic/CurrentJob/Photos/RESET_SELECTED_PHOTOS",OV=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case bV:return t.payload;case fV:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case mV:return t.payload;case bV:case fV:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case hV:return!0;case bV:case fV:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case bV:return!0;case fV:return!1;default:return e}},params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case hV:return t.payload;case fV:return{};default:return e}},selectedPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case jV:return t.payload;case fV:case vV:return[];default:return e}}}),gV=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||r().currentJobPhotos.params,n({type:hV,payload:a}),t.prev=2,t.next=5,ly.getJobPhotos(e);case 5:return o=t.sent,n({type:bV,payload:o}),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(2),n({type:mV,payload:t.t0}),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()},xV=function(){return{type:vV}};function yV(){var e=Object(f.a)(["\n  margin: 0 5px;\n  font-size: ",";\n"]);return yV=function(){return e},e}function wV(){var e=Object(f.a)(["\n  height: 20px;\n  min-width: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: 100px;\n  background: ",";\n  z-index: 5;\n  color: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  * {\n    stroke-width: 2.5px !important;\n  }\n"]);return wV=function(){return e},e}function _V(){var e=Object(f.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n\n  > * {\n    margin-left: 5px;\n  }\n"]);return _V=function(){return e},e}function kV(){var e=Object(f.a)(["\n  padding: 10px;\n  border: 0;\n  width: 100%;\n  font-weight: ",";\n  font-size: ",";\n  outline: none;\n  background: ",";\n  color: ",";\n"]);return kV=function(){return e},e}function SV(){var e=Object(f.a)(["\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: ",";\n  background-image: url(",");\n  width: 100%;\n  height: 150px;\n  position: relative;\n  .photo-title{\n    position: absolute;\n    // display: none;\n    left: 0px;\n    bottom: 0px;\n    width: 100%;\n    text-align: center;\n    background: #000;\n    opacity: 0.6;\n    color: #fff;\n  }\n"]);return SV=function(){return e},e}function CV(){var e=Object(f.a)(["\n  width: 230px;\n  margin: 0 20px 20px 0;\n  overflow: hidden;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 0 0 0 1px ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n\n    & .tools {\n      visibility: visible !important;\n    }\n    .photo-title{display: block}\n  }\n"]);return CV=function(){return e},e}var NV=x.default.div(CV(),y.gray2,y.blue0),EV=x.default.div(SV(),y.gray0,(function(e){return e.backgroundImage})),AV=Object(x.default)(Kj(["selected"])("input"))(kV(),Bf.medium,Vf.smaller,(function(e){return e.selected?y.blue0:"transparent"}),(function(e){return e.selected?y.black1:y.gray5})),TV=x.default.div(_V()),IV=Object(x.default)(Kj(["br","color"])("div"))(wV(),(function(e){return e.bg}),(function(e){return e.color?e.color:y.white}),(function(e){return e.color?e.color:y.white})),RV=x.default.span(yV(),Vf.smaller),DV=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={description:e.props.photo.description,thumbnailUrl:"",loading:!1,url:e.props.photo.url},e.counter=0,e.startUpdate=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onDescriptionChangeInternal=function(t){e.setState({description:t.target.value}),e.debouncedDescriptionChange(t.target.value)},e.debouncedDescriptionChange=Object(m.debounce)((function(t){var n=e.props,r=n.onDescriptionChange,a=n.photo.id;e.setState({loading:!0}),r(t,a).finally((function(){e.setState({loading:!1})}))}),1500),e.uploadPhoto=function(t){var n=e.props,r=n.photo.id,a=n.onPhotoUpdate,o=new FormData;o.append("file",t),a(o,r).finally((function(){e.setState({loading:!1})}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhoto(t.target.files[0]))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.photo.thumbnails;(null===e||void 0===e?void 0:e.length)?this.setState({thumbnailUrl:e[0].url,url:e[0].url}):e&&e[0]&&e[0].url||this.startUpdate()}},{key:"componentDidUpdate",value:function(e){e.photo.url!==this.props.photo.url&&this.setState({url:this.props.photo.url}),e.rotated!==this.props.rotated&&!0===this.props.rotated&&this.props.photo.id===this.props.rotateImageId&&this.setState({url:this.props.photo.url})}},{key:"render",value:function(){var e=this.props,t=e.photo.id,n=e.onExpand,r=e.photo,o=e.selected,i=e.dispatch,c=e.noUpdate,s=this.state,l=s.description,u=s.loading,d=s.thumbnailUrl,p=s.url;return Object(a.jsxs)(NV,{children:[Object(a.jsxs)(TV,{className:"tools",children:[Object(a.jsx)(IV,{bg:y.gray1,color:y.black0,onClick:function(){return n(t)},children:Object(a.jsx)(Ff,{name:Ef.Expand,size:10})}),!c&&Object(a.jsx)(IV,{bg:y.blue5,color:y.white,onClick:this.onUploadLinkClick,children:Object(a.jsx)(RV,{children:"Update"})})]}),Object(a.jsxs)(EV,{backgroundImage:""!==p||void 0!==p?"".concat(p):d,onClick:c?void 0:function(){return i(function(e){return function(t,n){var r=n().currentJobPhotos.selectedPhotos,a=r.slice(0);r.find((function(t){return t.id===e.id}))?a.splice(r.map((function(e){return e.id})).indexOf(e.id),1):a.push(e),t({type:jV,payload:a})}}(r))},children:[Object(a.jsx)(Jf.a,{className:"overlapping text-left",id:"photo_title",effect:"solid"}),Object(a.jsx)("div",{className:"photo-title text-truncate p-2","data-for":"photo_title","data-tip":r.file_name,children:r.file_name})]}),Object(a.jsx)(AV,{type:"text",onChange:this.onDescriptionChangeInternal,value:l,selected:o,disabled:c,placeholder:c?"Editing is disabled":"Enter a short description..."}),u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("input",{type:"file",accept:jB,hidden:!0,disabled:c,onChange:this.onFileInputChange,ref:this.inputRef})]})}}]),n}(p.PureComponent),MV=Object(b.b)()(DV),PV=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.postFormData("/v1/photos",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LV=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.postFormData("/v1/photos/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),FV=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,UV(t);case 2:r=e.sent,d_(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),UV=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.downloadFile("/v1/photos/".concat(t,"/download"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VV={uploadPhoto:PV,downloadPhoto:FV,getPhotoData:UV,deletePhoto:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/photos/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePhoto:LV,getPhotoInfo:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/photos/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rotatePhoto:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/photos/".concat(t,"/update"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},BV=n(109),JV=n.n(BV);function zV(){var e=Object(f.a)(["\n  transform: rotate(","deg);\n  cursor: pointer;\n  path,\n  circle,\n  line,\n  polyline,\n  polygon,\n  rect {\n    stroke: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle,\n  :hover polygon,\n  :hover rect,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return zV=function(){return e},e}function qV(){var e=Object(f.a)(["\n  height: 50px;\n  padding: 20px;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  bottom: 20px;\n  position: absolute;\n  overflow: hidden;\n"]);return qV=function(){return e},e}function WV(){var e=Object(f.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: 0;\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n"]);return WV=function(){return e},e}function HV(){var e=Object(f.a)(["\n  position: relative;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: ","px;\n  height: ","px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return HV=function(){return e},e}function GV(){var e=Object(f.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n"]);return GV=function(){return e},e}function YV(){var e=Object(f.a)(["\n  display: flex;\n  min-height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 20px 0 90px 0;\n"]);return YV=function(){return e},e}function QV(){var e=Object(f.a)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n"]);return QV=function(){return e},e}function KV(){var e=Object(f.a)(["\n  color: ",";\n"]);return KV=function(){return e},e}function ZV(){var e=Object(f.a)(["\n  position: relative;\n  top: 0px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: ","px;\n  padding: 0 30px;\n  background: ",";\n  text-align: right;\n  z-index: 100;\n  border-bottom: 1px solid ",";\n"]);return ZV=function(){return e},e}function XV(){var e=Object(f.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n"]);return XV=function(){return e},e}var $V=x.default.div(XV()),eB=x.default.div(ZV(),xO,y.white,y.gray2),tB=x.default.div(KV(),y.gray5),nB=x.default.div(QV()),rB=x.default.div(YV()),aB=x.default.div(GV()),oB=x.default.div(HV(),(function(e){return e.width?e.width:0}),(function(e){return e.height?e.height:0})),iB=x.default.div(WV()),cB=x.default.div(qV(),y.menu,y.white),sB=Object(x.default)(Kj(["color","rotate"])(Ff))(zV(),(function(e){return e.rotate}),(function(e){return e.color?e.color:y.black1}),y.blue4),lB=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCurrentPhotoIndex=function(){var t=e.props,n=t.photos,r=t.currentPhotoId,a=n.map((function(e){return e.id})).indexOf(r);return a>-1?a:0},e.state={currentIndex:e.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1},e.zoomDelta=.2,e.setZoom=function(t){"+"===t&&e.setState({zoom:e.state.zoom+e.zoomDelta}),"-"===t&&e.state.zoom>1.1*e.zoomDelta&&e.setState({zoom:e.state.zoom-e.zoomDelta})},e.setPhoto=function(t){var n=e.props.photos;"+"===t&&e.state.currentIndex<n.length-1&&e.setState({currentIndex:e.state.currentIndex+1}),"-"===t&&e.state.currentIndex>0&&e.setState({currentIndex:e.state.currentIndex-1})},e.rotateImage=function(){var t=e.props,n=t.photos,r=t.rotatedImage,a=n[e.state.currentIndex];e.setState({bottomToolsLoading:!0}),e.setState({rotateDegrees:e.state.rotateDegrees+1},(function(){VV.rotatePhoto(a.id,{degree:90,level:1}).then((function(t){r(t.data),e.setState({bottomToolsLoading:!1})}))}))},e.downloadPhoto=function(){var t=e.props,n=t.job,r=t.photos[e.state.currentIndex];e.setState({bottomToolsLoading:!0}),VV.downloadPhoto(r.id,"".concat(n.id,"_").concat(r.description.split(" ").join("_"),"_").concat(qf()(r.updated_at).format("YYYYMMDD"),".").concat(r.mime_type.split("/")[1])).then((function(){e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.printPhoto=function(){var t=e.props.photos[e.state.currentIndex];e.setState({bottomToolsLoading:!0}),VV.getPhotoData(t.id).then((function(t){JV()({printable:window.URL.createObjectURL(t),type:"image"}),e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.deletePhoto=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.photos,o=n.job,i=n.updateParentPhotos,c=n.dispatch,s=r[e.state.currentIndex],t.next=4,c(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:"Do you really want to delete this photo from this job?"})));case 4:if(!t.sent){t.next=18;break}return e.setState({bottomToolsLoading:!0}),t.prev=7,t.next=10,ly.detachPhoto(o.id,s.id);case 10:return t.next=12,i();case 12:e.setState({bottomToolsLoading:!1}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.setState({bottomToolsLoading:!1});case 18:case"end":return t.stop()}}),t,null,[[7,15]])}))),e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.currentPhotoId,a=n.photos,o=n.onClose;r===e.currentPhotoId&&a.length===e.photos.length||this.setState({currentIndex:this.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),this.state.currentIndex!==t.currentIndex&&this.setState({zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),a.length<1&&o()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,o=t.customModal,i=t.job,c=t.photos,s=t.noUpdate,l=this.state,u=l.currentIndex,d=l.zoom,p=l.rotateDegrees,h=l.bottomToolsLoading,b=c[u];return Object(a.jsx)(vO,{isOpen:n,children:Object(a.jsx)(PO,{onClose:r,customModal:o,children:Object(a.jsx)($V,{children:b&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsxs)(eB,{className:"align-items-center",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(sB,{name:Ef.Chevron,size:20,rotate:45,color:y.black1,onClick:r}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:b.description})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:ly.getJobName(i)}),Object(a.jsx)(tB,{children:b.created_at===b.updated_at?"Created ".concat(qf()(b.created_at).format(Uj)," by ").concat(Yf(b.creator).name):"Modified ".concat(qf()(b.updated_at).format(Uj)," ").concat(b.modified_by?Yf(b.modified_by).name:"")})]})]})}),Object(a.jsx)(nB,{children:Object(a.jsxs)(rB,{children:[Object(a.jsx)(aB,{onClick:r}),Object(a.jsxs)(oB,{width:p%2>0?b.height*d:b.width*d,className:"d-flex align-items-center justify-content-center",height:p%2>0?b.width*d:b.height*d,children:[Object(a.jsx)("div",{style:{width:"".concat(p%2>0?b.height*d:b.width*d,"px"),height:"".concat(p%2>0?b.width*d:b.height*d,"px")}}),Object(a.jsx)(oB,{width:b.width*d,height:b.height*d,style:{position:"absolute"},children:Object(a.jsx)("img",{src:"".concat(b.url)},b.id)},b.id)]},b.id)]})}),Object(a.jsx)(iB,{children:Object(a.jsxs)(cB,{children:[h&&Object(a.jsx)(av,{size:40,color:y.menu}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(sB,{name:Ef.Chevron,size:20,rotate:45,color:y.white,onClick:function(){return e.setPhoto("-")}}),Object(a.jsxs)("div",{style:{margin:"0 10px"},children:[u+1," of ",c.length]}),Object(a.jsx)(sB,{name:Ef.Chevron,size:20,rotate:-135,color:y.white,onClick:function(){return e.setPhoto("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center",style:{margin:"0 50px"},children:[Object(a.jsx)(sB,{name:Ef.SubtractCircle,size:20,rotate:0,color:y.white,onClick:function(){return e.setZoom("-")}}),Object(a.jsxs)("div",{style:{margin:"0 15px"},children:[(100*d).toFixed(0),"%"]}),Object(a.jsx)(sB,{name:Ef.AddCircle,size:20,rotate:0,color:y.white,onClick:function(){return e.setZoom("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{width:"150px"},children:[Object(a.jsx)(sB,{name:Ef.Rotate,size:20,rotate:0,color:y.white,onClick:this.rotateImage}),Object(a.jsx)(sB,{name:Ef.Download,size:20,rotate:0,color:y.white,onClick:this.downloadPhoto}),Object(a.jsx)(sB,{name:Ef.Printer,size:20,rotate:0,color:y.white,onClick:this.printPhoto}),!s&&Object(a.jsx)(sB,{name:Ef.Trash,size:20,rotate:0,color:y.white,onClick:this.deletePhoto})]})]})})]})})})})}}]),n}(p.PureComponent),uB=Object(b.b)()(lB);function dB(){var e=Object(f.a)(["\n  position: absolute;\n  top: 20px;\n  right: 30px;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n\n  :hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return dB=function(){return e},e}function pB(){var e=Object(f.a)(["\n  color: transparent;\n  filter: grayscale(1);\n"]);return pB=function(){return e},e}function hB(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return hB=function(){return e},e}function bB(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return bB=function(){return e},e}function fB(){var e=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 10px 0 40px 0;\n"]);return fB=function(){return e},e}function mB(){var e=Object(f.a)(["\n  padding: 40px 30px 30px 30px;\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return mB=function(){return e},e}var jB="image/jpeg,image/png",vB=x.default.div(mB()),OB=x.default.div(fB()),gB=BS.SortedGroupTitle,xB=x.default.div(bB(),Bf.bold),yB=x.default.span(hB(),y.blue4,y.blue5),wB=x.default.div(pB()),_B=x.default.div(dB(),y.blue4,Vf.smaller,y.blue5),kB=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,filmstrip:!1,currentPhotoId:void 0,blockLoading:!1,sortedPhotosGroups:e.groupedPhotos,rotateImage:!1,rotateImageId:0},e.loadPhotos=function(){var t=e.props,n=t.match;return(0,t.dispatch)(gV(n.params.id))},e.handleDrop=function(t){var n=e.props.currentJob.data,r=n&&n.edit_forbidden;t.preventDefault(),!r&&t.dataTransfer.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files))},e.uploadPhotos=function(t){var n,r=e.props.match,o=[],i=["png","jpeg","jpg"],c=Object(pV.a)(t);try{for(c.s();!(n=c.n()).done;){var s=n.value,l=(s.name.split(".").pop()||"").toLowerCase();if(i.includes(l)){var u=new FormData;u.append("file",s),o.push(VV.uploadPhoto(u).then((function(e){return ly.attachPhoto(r.params.id,e.data.id,{description:""})})))}else Qm(Vm.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",l]})," is not supported!"]}))}}catch(d){c.e(d)}finally{c.f()}0===o.length?e.setState({loading:!1}):Promise.all(o).then((function(){setTimeout((function(){e.loadPhotos(),e.setState({loading:!1})}),500)})).catch((function(){e.setState({loading:!1})}))},e.onDragOver=function(e){e.preventDefault()},e.callGroupedPhoto=function(t){var n=t.id;e.setState({sortedPhotosGroups:e.groupedPhotos,rotateImage:!e.state.rotateImage,rotateImageId:n}),e.loadPhotos()},e.changeDescription=function(t,n){var r=e.props.match;return ly.updateAttachedPhoto(r.params.id,n,{description:t})},e.onPhotoUpdate=function(t,n){return VV.updatePhoto(n,t).then((function(){return e.setState({blockLoading:!0}),e.loadPhotos().then((function(){e.setState({blockLoading:!1})})).catch((function(){e.setState({blockLoading:!1})}))}))},e.openFilmstrip=function(t){e.setState({currentPhotoId:t,filmstrip:!0})},e.closeFilmstrip=function(){e.setState({filmstrip:!1})},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.target.files))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadPhotos()}},{key:"componentDidUpdate",value:function(e){e.currentJobPhotos!==this.props.currentJobPhotos&&this.setState({sortedPhotosGroups:this.groupedPhotos})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:fV})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentJobPhotos,r=n.loading,o=n.data,i=n.selectedPhotos,c=t.currentJob.data,s=this.state,l=s.loading,u=s.filmstrip,d=s.currentPhotoId,p=s.blockLoading,h=s.sortedPhotosGroups,b=c&&c.edit_forbidden;return Object(a.jsxs)(vB,{onDragOver:this.onDragOver,onDrop:this.handleDrop,children:[o&&c&&Object(a.jsxs)(a.Fragment,{children:[h.length>0?Object(a.jsxs)(a.Fragment,{children:[!b&&Object(a.jsx)(_B,{onClick:this.onUploadLinkClick,children:"Add photos"}),h.map((function(t,n){return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(gB,{children:qf()(1e3*t.unix).format("ddd, D MMM YYYY")}),Object(a.jsx)(OB,{children:t.items.map((function(t){return Object(a.jsx)(MV,{photo:t,selected:!!i.find((function(e){return e.id===t.id})),noUpdate:!!b,onExpand:e.openFilmstrip,onDescriptionChange:e.changeDescription,onPhotoUpdate:e.onPhotoUpdate,rotated:e.state.rotateImage,rotateImageId:e.state.rotateImageId},t.id)}))})]},n)}))]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(wB,{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(Ff,{name:Ef.Barista,size:200})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(xB,{children:"No photos have been uploaded"})}),!b&&Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:["Drag and drop to add photos or ",Object(a.jsx)(yB,{onClick:this.onUploadLinkClick,children:"click here"})," to ",Object(a.jsx)("br",{})," ","upload the old fashioned way."]})})]}),d&&Object(a.jsx)(uB,{isOpen:u,job:c,customModal:!0,noUpdate:!!b,photos:this.sortedPhotos,currentPhotoId:d||0,updateParentPhotos:this.loadPhotos,onClose:this.closeFilmstrip,rotatedImage:this.callGroupedPhoto})]}),(r||l)&&!p&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("input",{type:"file",accept:jB,multiple:!0,hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef})]})}},{key:"groupedPhotos",get:function(){var e=this.props.currentJobPhotos.data;return e?Qf(e.data,"created_at"):[]}},{key:"sortedPhotos",get:function(){var e=this.props.currentJobPhotos.data;return e?e.data.sort((function(e,t){return qf()(e.created_at)>qf()(t.created_at)?-1:1})):[]}}]),n}(p.PureComponent),SB=Object(LO.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,currentJobPhotos:e.currentJobPhotos}})),v.g)(kB);function CB(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n  margin-top: 10px;\n  display: inline-block;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return CB=function(){return e},e}function NB(){var e=Object(f.a)(["\n  color: ",";\n  margin-bottom: 30px;\n"]);return NB=function(){return e},e}function EB(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n"]);return EB=function(){return e},e}function AB(){var e=Object(f.a)(["\n  padding: 15px;\n  position: fixed;\n  margin-top: 60px;\n"]);return AB=function(){return e},e}var TB,IB=x.default.div(AB()),RB=x.default.div(EB(),Vf.medium,Bf.medium),DB=x.default.div(NB(),y.gray4),MB=x.default.div(CB(),y.blue4,y.blue5),PB=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.downloadPhotos=function(){var t=e.props,n=t.currentJobPhotos.selectedPhotos,r=t.job,a=t.dispatch;if(n.length>0){var o=[];e.setState({loading:!0});var i,c=Object(pV.a)(n);try{for(c.s();!(i=c.n()).done;){var s=i.value;o.push(VV.downloadPhoto(s.id,"".concat(r.id,"_").concat(s.description.split(" ").join("_"),"_").concat(qf()(s.updated_at).format("YYYYMMDD"),".").concat(s.mime_type.split("/")[1])))}}catch(l){c.e(l)}finally{c.f()}Promise.all(o).then((function(){a(xV()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},e.detachPhotos=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currentJobPhotos.selectedPhotos,a=n.job,o=n.dispatch,t.next=3,o(Sw("Confirm","Delete Photo"+(r.length>1?"s":""),"Do you really want to delete ".concat(r.length>1?"these photos":"this photo"," from this job?")));case 3:if(t.sent){i=[],e.setState({loading:!0}),c=Object(pV.a)(r);try{for(c.s();!(s=c.n()).done;)l=s.value,i.push(ly.detachPhoto(a.id,l.id))}catch(u){c.e(u)}finally{c.f()}Promise.all(i).then((function(){o(gV(a.id)),o(xV()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.currentJobPhotos.selectedPhotos,n=this.state.loading;return Object(a.jsxs)(IB,{children:[Object(a.jsx)(RB,{children:"Manage Photos"}),Object(a.jsxs)(DB,{children:[t.length," ",t.length>1?"items":"item"," selected"]}),Object(a.jsx)(Cg,{className:"btn",onClick:this.downloadPhotos,children:"Download"}),Object(a.jsx)("br",{}),Object(a.jsx)(MB,{onClick:function(){e.detachPhotos()},children:"Delete"}),n&&Object(a.jsx)(av,{size:40,color:y.gray1})]})}}]),n}(p.PureComponent),LB=Object(b.b)((function(e){return{currentJobPhotos:e.currentJobPhotos}}))(PB);!function(e){e.Active="Active",e.Completed="Completed"}(TB||(TB={}));var FB=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/tasks/types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),UB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/tasks/types",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/tasks"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),BB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/tasks"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),JB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/tasks/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),zB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/tasks/adhoc",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/tasks/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),WB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/tasks/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),HB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/slots/".concat(t,"/crew/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),GB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/slots/".concat(t,"/crew/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),YB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/slots/".concat(t,"/teams/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),QB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/slots/".concat(t,"/teams/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),KB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/tasks/").concat(n,"/status"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ZB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/tasks/").concat(n,"/status/scheduled"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),XB=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/tasks/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$B=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/tasks/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),eJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/tasks",{location_id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/".concat(t,"/tasks/").concat(n,"/slot"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),nJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/slots/".concat(n),Object(c.a)(Object(c.a)({},r),{},{job_run_id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),rJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/slots/".concat(n,"/move"),Object(c.a)(Object(c.a)({},r),{},{job_run_id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),aJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/".concat(t,"/tasks/").concat(n,"/slot/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/sub-tasks/types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),iJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/tasks/".concat(t,"/sub-tasks/types"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/sub-tasks/types",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/sub-tasks/types/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/sub-tasks/types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/tasks/types/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/tasks/types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pJ={getTaskTypes:FB,createTaskType:UB,getJobTasks:VB,createJobTask:BB,updateJobTask:JB,createAdhocTask:zB,updateAdhocTask:qB,removeAdhocTask:WB,assignUserToScheduledTaskSlot:HB,removeUserFromScheduledTaskSlot:GB,assignTeamToScheduledTaskSlot:YB,removeTeamFromScheduledTaskSlot:QB,changeTaskStatus:KB,changeTaskScheduledStatus:ZB,removeTaskFromJob:XB,searchTasks:$B,addTaskSlotToRun:tJ,updateTaskSlotToRun:nJ,moveTaskSlotToRun:rJ,removeTaskSlotFromRun:aJ,getTasksFromLocation:eJ,snoozeTask:function(e,t,n){return Aj.post("/v1/jobs/".concat(e,"/tasks/").concat(t,"/snooze"),n)},unsnoozeTask:function(e,t){return Aj.remove("/v1/jobs/".concat(e,"/tasks/").concat(t,"/unsnooze"))},getSubTaskTypes:oJ,removeTaskTypes:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/tasks/types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeSubTaskTypes:lJ,createSubTaskType:cJ,getSubTaskOfTask:iJ,updateSubTaskType:sJ,updateTaskType:uJ,getTaskTypesDetail:dJ,isCustomTask:function(e){return/adhoc|other|custom/i.test((null===e||void 0===e?void 0:e.name)||"")}};function hJ(){var e=Object(f.a)(["\n  border-radius: 0px;\n  background: ",";\n  height: ","px;\n  width: ","px;\n  position: absolute;\n  top: 23px;\n  left: 7px;\n"]);return hJ=function(){return e},e}function bJ(){var e=Object(f.a)(["\n  padding: 0 30px;\n  height: 60px;\n"]);return bJ=function(){return e},e}function fJ(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  background: ",";\n  box-shadow: 4px 0 0 0 "," inset;\n  position: relative;\n"]);return fJ=function(){return e},e}var mJ=Object(x.default)(Kj(["color"])("div"))(fJ(),y.gray2,y.white,(function(e){return e.color})),jJ=x.default.div(bJ()),vJ=Object(x.default)(Kj(["color","height"])("div"))(hJ(),(function(e){return e.color}),(function(e){return e.height}),(function(e){return e.height})),OJ=BS.ColoredDiv,gJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showNote:!1},e.menuItems=function(t){var n=e.props,r=n.onTaskEdit,a=n.task,o=n.jobId,i=n.fetch,c=n.deleteTask,s=e.isTaskCompleted();return[{name:"Edit",onClick:function(){return r(a)}},{type:"divider"},{name:"Mark task ".concat(s?"incomplete":"done"),onClick:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pJ.changeTaskStatus(o,a.id,{status:s?TB.Active:TB.Completed});case 2:i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{type:"divider"},{name:"Delete",onClick:c}].filter((function(e){return!e.remove}))},e.isTaskCompleted=function(){var t=e.props.task;return!!t.latest_status&&t.latest_status.status===TB.Completed},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.task,r=t.slot,o=this.state.showNote;return Object(a.jsx)(Cw.Consumer,{children:function(t){var i,c,s,l=e.menuItems(t);return Object(a.jsxs)(mJ,{color:y.white,children:[Object(a.jsx)(vJ,{color:n.type.color?tm(n.type.color):y.white,height:16}),Object(a.jsxs)(jJ,{className:"d-flex align-items-center justify-content-between",children:[Object(a.jsx)(OJ,{margin:"0 20px 0 0",weight:Bf.bold,children:n.name||n.type.name}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsxs)(OJ,{className:"d-flex align-items-center",padding:"0 0 0 30px",children:[Object(a.jsx)(OJ,{className:"d-flex align-items-center",margin:"0 0 0 30px",children:n.due_at&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(OJ,{margin:"0 20px 0 0",weight:"500",fontSize:"16px",color:e.isWasted?y.red1:y.black1,children:["Due: ",qf()(n.due_at).format("D MMM, hh:mm A")]})})}),((null===r||void 0===r?void 0:r.starts_at)||(null===(i=n.assigned_slots)||void 0===i?void 0:i.length)>0)&&Object(a.jsx)(OJ,{className:"d-flex align-items-center",margin:"0 0 0 30px",children:Object(a.jsxs)(OJ,{margin:"0 20px 0 0",fontSize:"16px",color:y.black1,weight:"500",children:["Scheduled: ",qf()((null===r||void 0===r?void 0:r.starts_at)||(null===(c=n.assigned_slots)||void 0===c||null===(s=c[0])||void 0===s?void 0:s.starts_at)).format(Pj)]})})]}),Object(a.jsxs)(OJ,{className:"d-flex align-items-center justify-content-end",overflow:"visible",margin:"0 0 0 30px",style:{width:"60px"},children:[(n.internal_note||(null===r||void 0===r?void 0:r.assigned_users.length)>0||((null===r||void 0===r?void 0:r.assigned_teams)||[]).length>0)&&Object(a.jsx)(cw,{onClick:function(){return e.setState({showNote:!e.state.showNote})},children:Object(a.jsx)(Ff,{name:Ef.MessageChat})}),Object(a.jsx)(yw,{iconName:Ef.MenuVertical,items:l,disabled:!t.has(Dw.JOBS_TASK_MANAGE),noMargin:!0})]})]})]}),o&&Object(a.jsxs)(OJ,{padding:"5px 30px 15px 30px",color:y.gray5,children:[n.internal_note,Object(a.jsx)(OJ,{weight:Bf.bold,color:y.gray5,children:((null===r||void 0===r?void 0:r.assigned_teams)||[]).map((function(e){return e.name})).concat(null===r||void 0===r?void 0:r.assigned_users.map((function(e){return e.full_name}))).join(", ")})]})]})}})}},{key:"isWasted",get:function(){var e=this.props.task;return qf()().isAfter(qf()(e.due_at))}}]),n}(p.PureComponent);function xJ(){var e=Object(f.a)(["\n  color: ",";\n"]);return xJ=function(){return e},e}function yJ(){var e=Object(f.a)(["\n  min-height: 90px;\n  resize: none;\n  ","\n"]);return yJ=function(){return e},e}var wJ,_J=x.default.textarea(yJ(),GO),kJ=x.default.label(xJ(),y.gray4),SJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.meta,t=e.touched&&e.error;return Object(a.jsxs)("div",{className:g()("form-group",this.props.className),children:[this.props.label&&Object(a.jsx)(kJ,{className:this.props.labelClassName,children:this.props.label}),Object(a.jsxs)("div",{className:this.props.valueClassName,children:[Object(a.jsx)(_J,Object(c.a)(Object(c.a)({},this.props.input),{},{className:g()("form-control",{"is-invalid":t}),placeholder:this.props.placeholder,disabled:this.props.disabled})),t&&Object(a.jsx)("div",{className:"invalid-feedback",children:e.error})]})]})}}]),n}(p.PureComponent),CJ=sv({},(function(e,t,n){var r=n.addTaskToRunConfig;if(e.starts_at&&e.ends_at){if(qf.a.isMoment(e.starts_at)){if(qf.a.isMoment(e.ends_at)&&e.starts_at.isSameOrAfter(e.ends_at))t.starts_at="Start date must be before end date";else if(r){var a=qf()(r.date).startOf("day");e.starts_at.isBefore(a)&&(t.starts_at="Start date cannot be before ".concat(a.format(Pj)))}}else t.starts_at="Incorrect start date";if(qf.a.isMoment(e.ends_at)){if(qf.a.isMoment(e.starts_at)&&e.ends_at.isSameOrBefore(e.starts_at))t.ends_at="End date must be after start date ";else if(r){var o=qf()(r.date).endOf("day");e.ends_at.isAfter(o)&&(t.ends_at="End date cannot be after ".concat(o.format(Pj)))}}else t.ends_at="Incorrect end date"}return t}));function NJ(){var e=Object(f.a)(["\n  order: ",";\n  margin-left: ",";\n  margin-top: ",";\n"]);return NJ=function(){return e},e}function EJ(){var e=Object(f.a)(["\n  position: absolute;\n"]);return EJ=function(){return e},e}function AJ(){var e=Object(f.a)(["\n  color: ",";\n  flex-direction: ",";\n  align-items: ",";\n"]);return AJ=function(){return e},e}function TJ(){var e=Object(f.a)(["\n  border: ",";\n  border-radius: 0.25em;\n  display: block;\n  background: ",";\n  position: relative;\n  margin-bottom: 0;\n  order: ",";\n\n  & > input {\n    opacity: 0 !important;\n    height: ","px;\n    width: ","px;\n  }\n\n  path {\n    stroke: ",";\n    fill: ",";\n    stroke: ",";\n    fill: ",";\n  }\n"]);return TJ=function(){return e},e}!function(e){e.horizontal="horizontal",e.verical="vertical"}(wJ||(wJ={}));var IJ=Object(x.default)(Kj(["size","checked","color","background","checkedBackground","hasBorder","disabled"])("div"))(TJ(),(function(e){return e.hasBorder?"1px solid ".concat(e.color):"1px solid ".concat(y.gray2," !important")}),(function(e){return e.checked&&!e.disabled?e.checkedBackground:e.background}),1,(function(e){return e.size}),(function(e){return e.size}),y.white,y.white,(function(e){return e.color}),(function(e){return e.color})),RJ=x.default.label(AJ(),(function(e){return e.color||y.gray4}),(function(e){return e.isHorizontal?"row":"column"}),(function(e){return e.isHorizontal&&"center"})),DJ=Object(x.default)(Ff)(EJ()),MJ=x.default.div(NJ(),(function(e){return e.isHorizontal?2:0}),(function(e){return e.isHorizontal&&"14px"}),(function(e){return e.isHorizontal&&"-2px"})),PJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){!e.props.propsForForm&&e.props.onChange&&e.props.onChange(t.target.checked)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.size,r=e.propsForForm,o=e.label,i=e.disabled,s=e.unremovable,l=e.direction,u=void 0===l?wJ.verical:l,d=e.onClick,p=this.props.inversedColors?y.gray3:y.white,h=this.props.inversedColors?"transparent":y.gray1,b=this.props.inversedColors?y.white:y.blue2,f=(r||{}).value||t||s,m=!!i||!!s,j=u===wJ.horizontal;return Object(a.jsxs)(RJ,{isHorizontal:j,className:"m-0 d-flex align-items-start checkbox-item".concat(f?" checked":""),children:[o&&Object(a.jsx)(MJ,{className:"flex-grow-1",isHorizontal:j,children:o}),Object(a.jsxs)(IJ,{className:"print-hide",size:n||18,checked:!!f,hasBorder:this.props.inversedColors,color:p,background:h,checkedBackground:b,disabled:m,children:[f&&Object(a.jsx)(DJ,{name:Ef.CheckSimple,size:n||18}),Object(a.jsx)("input",Object(c.a)({type:"checkbox",className:"form-control",checked:!!f,disabled:i,onChange:this.handleChange,onClick:d},r))]}),Object(a.jsx)("input",{type:"checkbox",className:"print-only",checked:!!f})]})}}]),n}(p.PureComponent),LJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){e.props.input.onChange(t.target.checked)},e.handleBlur=function(t){e.props.input.onBlur(t.target.checked)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.meta,n=e.label,r=e.direction,o=e.disabled,i=e.size,s=t.touched&&t.error,l=g()("form-group",this.props.wrapperClassName),u=Object(c.a)(Object(c.a)({},this.props.input),{},{onChange:this.handleChange,onBlur:this.handleBlur,className:g()("form-control",this.props.className,{"is-invalid":s}),defaultChecked:this.props.optionValue});return Object(a.jsxs)("div",{className:l,children:[Object(a.jsx)(PJ,{propsForForm:u,label:n,direction:r,disabled:o,size:i}),s&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:t.error})]})}}]),n}(p.PureComponent);function FJ(){var e=Object(f.a)(["\n  .d-flex{flex-direction: row-reverse;}\n  .d-flex>:first-child{margin-left: 15px;}\n"]);return FJ=function(){return e},e}var UJ=x.default.div(FJ()),VJ="JobTaskDetailsForm",BJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={canBeScheduled:!1,kpiHours:0,notes:"",customTask:pJ.isCustomTask(e.props.initialValues.type)},e.onChangeType=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.change("kpi_time","".concat(n.kpi_hours," hours")),e.setState({canBeScheduled:n.can_be_scheduled,kpiHours:n.kpi_hours||0,customTask:pJ.isCustomTask(n)},(function(){e.setDueDateAuto()})),t.next=4,e.props.getSubTaskTypes(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeSubTask=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:""===e.state.notes&&(""!=n.default_crew_note||null!=n.default_crew_note?e.props.change("scheduling_note",n.default_crew_note):e.props.change("scheduling_note",""));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeNotes=function(t){e.setState({notes:t.currentTarget.defaultValue})},e.setDueDateAuto=function(){var t=e.state.kpiHours;t?e.props.change("due_at",qf()(qf()().add(t,"h"))):e.props.change("due_at",qf()(qf()().add(48,"h")))},e.validateDate=function(t){var n=e.props.addTaskToRunConfig;return!!n&&qf()(t).isSame(n.date)},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=Object(m.debounce)(e.searchJobsById,100),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.reset()}},{key:"render",value:function(){var e=this.props,t=e.taskTypes,n=e.kpiIsMissed,r=e.edit,o=e.handleSubmit,i=e.canBeScheduled,c=e.canEditDueDate,s=e.isSchedulingActive,l=e.mode,u=e.subTaskTypes,d=e.addTaskToRunConfig,p=e.initialValues,h=null===d||void 0===d?void 0:d.assigned_slot,b=this.state,f=b.canBeScheduled,m=b.customTask,j=i||f,v=!l||l&&l!==Cz.ADD_TASK_TO_RUN;return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:o,children:[v&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"type",label:"Task",options:t,validate:uv,onChange:this.onChangeType,disabled:r,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},component:Kv})}),u.length>0?Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"subtype",label:"Sub Task",options:u,validate:uv,onChange:this.onChangeSubTask,disabled:r||0===u.length,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},component:Kv})}):m&&Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"name",label:"Task Name",component:ZO,validate:uv})})||null]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"internal_note",label:"Notes",component:SJ})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"due_at",validate:uv,showTime:!0,futureEnabled:!0,component:Cy,disabled:r&&!c,label:"Task Due"})}),Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)(yv.a,{name:"kpi_time",disabled:!0,component:ZO,label:"KPI Time"})}),r&&n&&Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"kpi_missed_reason",component:ZO,label:"Reason KPI Missed"})})]}),r&&!p.job_id&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"job",label:"Link to job",placeholder:"Select...",component:rO,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return ly.getJobName(e)},loadOptions:this.searchJobsById,isClearable:!0})})})]}),j&&(h||d)&&Object(a.jsxs)(a.Fragment,{children:[v&&Object(a.jsx)(Qj,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"starts_at",showTime:!0,futureEnabled:!0,component:Cy,disabled:!s,validate:s?[uv]:void 0,label:"Scheduled From",isValidDate:this.validateDate})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"ends_at",showTime:!0,futureEnabled:!0,component:Cy,disabled:!s,validate:s?[uv]:void 0,label:"Scheduled To",isValidDate:this.validateDate})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(UJ,{children:Object(a.jsx)(yv.a,{name:"is_confirmed",label:"Attendance Confirmed",component:LJ})})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"scheduling_note",className:"mb-0",label:"Crew Notes",component:SJ,onChange:this.onChangeNotes})})})]})]})}}]),n}(p.PureComponent),JJ=Object(LO.compose)(Object(Gj.a)({form:VJ,enableReinitialize:!0,validate:CJ}),Object(UO.a)({startsAt:"starts_at",endsAt:"ends_at"}),Mm({jobs:{fetch:ly.searchJobs,initialData:null}}))(BJ);function zJ(){var e=Object(f.a)(["\n  border-width: 1px 1px 0 1px;\n  border-style: solid;\n  border-color: ",";\n  padding: 15px 10px;\n  display: flex;\n  flex-wrap: wrap;\n  overflow: hidden;\n  justify-content: space-between;\n  align-items: center;\n  background: ",";\n\n  &:last-child {\n    border-width: 1px 1px 1px 1px;\n  }\n"]);return zJ=function(){return e},e}var qJ=Object(x.default)(Kj(["selected"])("div"))(zJ(),y.gray2,(function(e){return e.selected?y.blue0:y.white})),WJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.assignee,n=e.selected,r=e.isTeam,o=e.onClick,i=e.children;return Object(a.jsxs)(qJ,{selected:n,children:[Object(a.jsx)("div",{children:t.full_name||t.name}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(FS,{color:y.gray5,children:r&&"Team"}),Object(a.jsx)(FS,{color:y.gray4,margin:"0 0 0 15px",children:i})]}),Object(a.jsxs)("div",{onClick:o,className:"cursor-pointer",children:[n&&Object(a.jsx)(Ff,{name:Ef.Trash}),!n&&Object(a.jsx)(Ff,{name:Ef.Add})]})]})}}]),n}(p.PureComponent),HJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/runs",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/".concat(t,"/clone/slot"),Object(c.a)(Object(c.a)({},n),r));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),QJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/runs/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ZJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/runs/templates",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),XJ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/templates",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$J=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/runs/templates/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ez=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/templates/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/runs/templates/".concat(t,"/runs"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/from-template/".concat(t,"/"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/templates/".concat(t,"/runs"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),az=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/runs/templates/".concat(t,"/runs/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/templates/".concat(t,"/runs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/crew/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),cz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/crew/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/vehicles/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),lz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/vehicles/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/staff/search",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dz=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/staff",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pz={getRuns:HJ,createRun:GJ,cloneRun:YJ,removeRun:QJ,searchStaff:uz,assignStaffToRun:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/".concat(t,"/crew/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeStaffFromRun:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/".concat(t,"/crew/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateRun:KJ,assignVehicleToRun:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/runs/".concat(t,"/vehicles/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),removeVehicleFromRun:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/runs/".concat(t,"/vehicles/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getStaffList:dz,getRunsTemplates:ZJ,createRunTemplate:XJ,updateRunTemplate:$J,removeRunTemplate:ez,createRunsFromTemplate:nz,getTemplatedRuns:tz,createTemplatedRun:rz,updateTemplatedRun:az,removeTemplatedRun:oz,assignStaffToTemplatedRun:iz,removeStaffFromTemplatedRun:cz,assignVehicleToTemplatedRun:sz,removeVehicleFromTemplatedRun:lz};function hz(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return hz=function(){return e},e}var bz="JobTaskAssignToForm",fz=x.default.div(hz()),mz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",selectedUsers:[],selectedTeams:[]},e.onSearchValueChange=function(t){e.setState({search:t}),t?e.debouncedSearch(t):e.debouncedSearch.cancel()},e.isUserSelected=function(t){return e.state.selectedUsers.map((function(e){return e.id})).includes(t)},e.isTeamSelected=function(t){return e.state.selectedTeams.map((function(e){return e.id})).includes(t)},e.loadUsersAndTeams=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.searchStaff,o=r.usersTeams,i=r.locationId,c=r.date,t.prev=1,t.next=4,Promise.all([a.fetch({name:n,location_id:i,date:c}),o.fetch(n)]);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Object(m.debounce)(e.loadUsersAndTeams,500),e.onUserClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!e.isUserSelected(n.id)){t.next=8;break}return t.next=4,r(Sw("Confirm","Remove User",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",Object(a.jsx)("strong",{children:n.full_name})," from this schedule?"]})));case 4:t.sent&&e.setState({selectedUsers:e.state.selectedUsers.filter((function(e){return e.id!==n.id}))}),t.next=9;break;case 8:e.setState({selectedUsers:e.state.selectedUsers.concat(n)});case 9:setTimeout((function(){return e.props.change("selectedUsers",e.state.selectedUsers)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onTeamClick=function(t){e.isTeamSelected(t.id)?e.setState({selectedTeams:e.state.selectedTeams.filter((function(e){return e.id!==t.id}))}):e.setState({selectedTeams:e.state.selectedTeams.concat(t)}),setTimeout((function(){return e.props.change("selectedTeams",e.state.selectedTeams)}))},e.getAssignedUsersAndTeams=function(){var t=e.state,n=t.selectedUsers,r=t.selectedTeams;return Object(m.orderBy)(r,["name"],["asc"]).map((function(e){return Object.assign({isTeam:!0},e)})).concat(Object(m.orderBy)(n,[function(e){return e.name||e.full_name}],["asc"]))},e.getSearchUsersAndTeams=function(){var t=e.props,n=t.usersTeams.data,r=t.searchStaff.data;return n?Object(m.orderBy)(n.teams,[function(e){return e.name||e.full_name}],["asc"]).map((function(e){return Object.assign({isTeam:!0},e)})).concat(Object(m.orderBy)(r,[function(e){return e.name||e.full_name}],["asc"])):[]},e.renderAssignee=function(t){return Object(a.jsx)(WJ,{onClick:function(){return t.isTeam?e.onTeamClick(t):e.onUserClick(t)},selected:t.isTeam?e.isTeamSelected(t.id):e.isUserSelected(t.id),isTeam:t.isTeam,assignee:t,children:!t.isTeam&&!!t.working_hours_per_week&&t.date_hours>=t.working_hours_per_week/5&&"Booked"},"".concat(t.id,"-").concat(t.isTeam?"team":"user"))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.task,n=e.slot,r=e.change;t&&(this.setState({selectedUsers:(null===n||void 0===n?void 0:n.assigned_users)||[],selectedTeams:(null===n||void 0===n?void 0:n.assigned_teams)||[]}),r("selectedUsers",(null===n||void 0===n?void 0:n.assigned_users)||[]),r("selectedTeams",(null===n||void 0===n?void 0:n.assigned_teams)||[]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.usersTeams.loading,r=t.searchStaff.loading,o=t.handleSubmit,i=t.locationId,c=this.state.search;return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:o,children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(ES,{loading:n||r,placeholder:"Search...",searchIcon:!0,mode:"typeGray",disabled:!i,onSearchValueChange:this.onSearchValueChange})})}),Object(a.jsxs)(fz,{children:[!c&&this.getAssignedUsersAndTeams().map((function(t){return e.renderAssignee(t)})),c&&this.getSearchUsersAndTeams().map((function(t){return e.renderAssignee(t)}))]})]})}}]),n}(p.PureComponent),jz=Object(LO.compose)(Object(Gj.a)({form:bz}),Mm({searchStaff:{fetch:pz.searchStaff},usersTeams:{fetch:DF.searchTeamUser}}))(mz);function vz(){var e=Object(f.a)(["\n  padding: 0 20px;\n  height: 100%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  opacity: ",";\n  color: ",";\n  font-weight: ",";\n  box-shadow: ",";\n"]);return vz=function(){return e},e}function Oz(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return Oz=function(){return e},e}var gz=x.default.div(Oz()),xz=Object(x.default)(Kj(["active","disabled"])("div"))(vz(),(function(e){return e.disabled?".4":"1"}),y.gray5,(function(e){return e.active&&Bf.bold}),(function(e){return e.active&&"0 -3px 0 ".concat(y.blue2," inset")})),yz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.selectedTabId;return Object(a.jsx)(gz,{children:t.map((function(e,t){return Object(a.jsx)(xz,{active:n===e.id,disabled:e.disabled,onClick:function(){return!e.disabled&&e.onClick&&n!==e.id?e.onClick(e):void 0},children:e.name},t)}))})}}]),n}(p.PureComponent),wz=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{id:e.id,job_id:e.job_id||(null===(t=e.job)||void 0===t?void 0:t.id),job:void 0,type:void 0,job_task_type_id:+e.type.id,name:pJ.isCustomTask(e.type)?e.name:e.type.name,internal_note:e.internal_note,kpi_missed_reason:e.kpi_missed_reason||"",due_at:Wj(e.due_at,!0),starts_at:e.starts_at&&Wj(e.starts_at,!0)||"",ends_at:e.ends_at&&Wj(e.ends_at,!0)||""})},_z=function(e){var t=Object.assign({},e);return t.due_at=zj(e.due_at),t.starts_at=zj(e.starts_at),t.ends_at=zj(e.ends_at),Object.assign({kpi_time:"".concat(t.type.kpi_hours||0," hours")},t)};function kz(){var e=Object(f.a)(["\n  padding: 0 ","px;\n  height: 60px;\n  margin: -30px -","px 30px;\n  border-bottom: 1px solid ",";\n  display: flex;\n  justify-content: space-between;\n"]);return kz=function(){return e},e}function Sz(){var e=Object(f.a)(["\n  padding: 1rem;\n  &:not(:last-child){\n    border-bottom: 1px solid ",";\n  }\n  &:first-child{padding-top: 0px;}\n"]);return Sz=function(){return e},e}var Cz,Nz,Ez=x.default.div(Sz(),y.gray2);!function(e){e.ADD_TASK_TO_RUN="ADD_TASK_TO_RUN"}(Cz||(Cz={})),function(e){e[e.Details=0]="Details",e[e.AssignedTo=1]="AssignedTo",e[e.Contacts=2]="Contacts"}(Nz||(Nz={}));var Az=x.default.div(kz(),OO,OO,y.gray2),Tz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,activeTabId:Nz.Details,detailsValues:null,assignedToValues:null,addTaskToRunFormValues:{},subTaskTypes:[]},e.onDetailsSubmit=function(t){t.hasOwnProperty("subtype")&&t.subtype&&(t.job_sub_task_type_id=t.subtype.id),e.setState({detailsValues:t})},e.onAssignedToSubmit=function(t){e.setState({assignedToValues:t})},e.submitCombine=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d,p,h,b;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,a=n.onSave,o=n.onClose,i=n.doAssign,c=n.task,s=n.doSave,l=n.validateForm,r(Object(xv.c)(VJ)),r(Object(xv.c)(bz)),t.next=5,Object(Uw.delay)(100);case 5:if(!l(VJ)){t.next=26;break}if(u=e.state,d=u.detailsValues,p=u.assignedToValues,e.setState({loading:!0}),t.prev=8,!s){t.next=17;break}return t.next=12,e.onInternalSave();case 12:if(b=t.sent,h=b.data,!i||!c&&!h){t.next=17;break}return t.next=17,e.onInternalAssign(c||h);case 17:if(!a){t.next=20;break}return t.next=20,a(d,p);case 20:uy.emit(Kg.TaskWasUpdated),setTimeout(o);case 22:return t.prev=22,e.setState({loading:!1}),e.props.onClose(),t.finish(22);case 26:case"end":return t.stop()}}),t,null,[[8,,22,26]])}))),e.onInternalSave=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.edit,a=n.task,o=n.jobId,!(i=e.state.detailsValues)){t.next=26;break}if(c=wz(i),r){t.next=16;break}if(!o){t.next=11;break}return t.next=8,pJ.createJobTask(o,c);case 8:return t.abrupt("return",t.sent);case 11:return t.next=13,pJ.createAdhocTask(c);case 13:return t.abrupt("return",t.sent);case 14:t.next=26;break;case 16:if(!a){t.next=26;break}if(!a.job_id){t.next=23;break}return t.next=20,pJ.updateJobTask(a.job_id,a.id,c);case 20:return t.abrupt("return",t.sent);case 23:return t.next=25,pJ.updateAdhocTask(a.id,c);case 25:return t.abrupt("return",t.sent);case 26:return t.abrupt("return");case 27:case"end":return t.stop()}}),t)}))),e.onInternalAssign=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o,i,c,s,l,u,d,p,h,b,f,j,v,O;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.assignedToValues,o=e.props,i=o.addTaskToRunConfig,o.dispatch,c=null===i||void 0===i?void 0:i.assigned_slot,!(r&&n&&c)){t.next=28;break}return s=(c.assigned_users||[]).map((function(e){return e.id})),l=(r.selectedUsers||[]).map((function(e){return e.id})),u=(c.assigned_teams||[]).map((function(e){return e.id})),d=(r.selectedTeams||[]).map((function(e){return e.id})),p=Object(m.intersection)(s,l),h=Object(m.intersection)(u,d),b=Object(m.difference)(l,p),f=Object(m.difference)(s,p),j=Object(m.difference)(d,h),v=Object(m.difference)(u,h),t.next=16,Promise.all([Promise.all(f.map((function(e){return pJ.removeUserFromScheduledTaskSlot(c.id,e)}))),Promise.all(j.map((function(e){return pJ.assignTeamToScheduledTaskSlot(c.id,e)}))),Promise.all(v.map((function(e){return pJ.removeTeamFromScheduledTaskSlot(c.id,e)})))]);case 16:return O=[],t.next=19,Promise.all(b.map((function(e){return pJ.assignUserToScheduledTaskSlot(c.id,e,{assign_user:1}).catch((function(t){405===t.status_code&&O.push(r.selectedUsers.find((function(t){return t.id===e})))}))})));case 19:if(!O.length){t.next=27;break}return console.log(c),t.next=23,e.props.dispatch(Sw("Confirm","Assign Staff to Task",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:[1===O.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:O[0].full_name})," is"]}):Object(a.jsx)(a.Fragment,{children:"Following staff members are"})," already booked between ",qf()(c.starts_at).format(Fj)," to ",qf()(c.ends_at).format(Fj),"."]}),O.length>1&&Object(a.jsx)("p",{children:O.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:e.user.full_name})})}))}),Object(a.jsx)("p",{children:"Are you sure you want to assign them to this task?"})]})));case 23:if(!t.sent){t.next=27;break}return t.next=27,Promise.all(O.map((function(e){return pJ.assignUserToScheduledTaskSlot(c.id,e.id)})));case 27:uy.emit(Kg.StaffAssignedToTask);case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isKPIMissed=function(){var t=e.props.task;return!!t&&qf()().isAfter(qf()(t.due_at).subtract(t.type.kpi_hours||0,"h"))},e.tabs=j.a.compact([{name:"Details",id:Nz.Details,onClick:function(){return e.setState({activeTabId:Nz.Details})}},{name:"Assigned To",id:Nz.AssignedTo,onClick:function(){return e.setState({activeTabId:Nz.AssignedTo})},disabled:!!e.props.mode&&e.props.mode===Cz.ADD_TASK_TO_RUN||!e.props.locationId||!e.props.assignStaffDate},function(t){var n=t.edit,r=t.task;return n&&(null===r||void 0===r?void 0:r.job)&&{name:"Contact Info",id:Nz.Contacts,onClick:function(){return e.setState({activeTabId:Nz.Contacts})}}}(e.props)]),e.applyScheduleValues=function(){var t=e.props,n=t.task,r=t.addTaskToRunConfig,a=null===r||void 0===r?void 0:r.assigned_slot;return a&&a.starts_at&&a.ends_at?Object(c.a)(Object(c.a)({},n),{},{is_confirmed:!!a.is_confirmed,scheduling_note:a.scheduling_note,starts_at:qf()(a.starts_at),ends_at:qf()(a.ends_at)}):n||{}},e.getSubTaskTypes=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pJ.getSubTaskOfTask(n.id).then(function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({subTaskTypes:n.data});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setState({subTaskTypes:[]}),Qm(Vm.Danger,t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t,n=e.props,r=n.taskTypes,o=n.edit,i=n.task,c=n.isSchedulingActive,s=n.addTaskToRunConfig,l=n.mode,u=n.locationId,d=n.assignStaffDate,p=e.state,h=p.activeTabId,b=p.addTaskToRunFormValues,f=e.isKPIMissed(),m=!l||l&&l!==Cz.ADD_TASK_TO_RUN;return Object(a.jsxs)(a.Fragment,{children:[m&&Object(a.jsx)(Az,{children:Object(a.jsx)(yz,{selectedTabId:h,items:e.tabs})}),Object(a.jsx)("div",{style:{display:h===Nz.Details?"block":"none"},children:Object(a.jsx)(JJ,{taskTypes:r,kpiIsMissed:f,canBeScheduled:i&&i.type.can_be_scheduled,canEditDueDate:i&&i.type.allow_edit_due_date,initialValues:Object.assign(e.applyScheduleValues(),b,{location_id:u}),addTaskToRunConfig:s,mode:l,onSubmit:e.onDetailsSubmit,isSchedulingActive:!!c,edit:o,subTaskTypes:e.state.subTaskTypes,getSubTaskTypes:e.getSubTaskTypes})}),Object(a.jsx)("div",{style:{display:h===Nz.AssignedTo?"block":"none"},children:Object(a.jsx)(jz,{slot:null===s||void 0===s?void 0:s.assigned_slot,task:i,onSubmit:e.onAssignedToSubmit,locationId:u,date:d})}),o&&(null===i||void 0===i?void 0:i.job)&&h===Nz.Contacts&&Object(a.jsx)("div",{children:null===(t=e.props.contacts.data)||void 0===t?void 0:t.filter((function(e){return[Tj.CUSTOMER,Tj.SITE_CONTACT].includes(e.assignment_type.name)})).map((function(e){return Object(a.jsxs)(Ez,{children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("strong",{children:e.assignment_type.name})}),Object(a.jsx)("div",{children:Jv.getContactName(e)}),e.addresses.length&&Object(a.jsx)("div",{children:e.addresses[0].full_address}),e.mobile_phone&&Object(a.jsxs)("div",{children:["Mobile Phone: ",e.mobile_phone]}),e.email&&Object(a.jsxs)("div",{children:["Email: ",Object(a.jsx)("a",{href:"mailto:".concat(e.email),target:"_blank",children:e.email})]})]})}))})]})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn",onClick:e.submitCombine,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.addTaskToRunConfig;if(this.props.task){if(this.props.task.hasOwnProperty("subtype")&&this.props.task.subtype){var t=[];t.push(this.props.task.subtype),this.setState({subTaskTypes:t})}this.props.task.job&&this.props.contacts.fetch(this.props.task.job.id)}if(e&&e.startHour){var n=e.assigned_slot,r=qf()(e.date).hours(+e.startHour),a=qf()(r);if(n){var o=Number(qf()(n.starts_at).format("mm"));r.add(o,"m");var i=qf()(n.ends_at).diff(qf()(n.starts_at));a.add(o,"m").add(i,"ms")}else a.add(60,"m");this.setState({addTaskToRunFormValues:{starts_at:r,ends_at:a}})}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.edit,o=e.task,i=e.addTaskToRunConfig,c=e.mode,s=(i||{}).assigned_slot,l=!c||c&&c!==Cz.ADD_TASK_TO_RUN;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(a.jsxs)("span",{children:[s&&!l?"Re-schedule":i&&!l?"Schedule":r?"Edit":"Add"," Task"]})," ",(null===o||void 0===o?void 0:o.job)&&Object(a.jsx)("a",{href:"/job/".concat(o.job.id,"/details"),target:"_blank",children:"View Job Details"})]}),body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent),Iz=Object(LO.compose)(Object(b.b)((function(e){return{validateForm:function(t){return Object(GA.a)(t)(e)}}})),Mm({contacts:{fetch:ly.getContacts}}))(Tz);function Rz(){var e=Object(f.a)(["\n  margin-top: 30px;\n  position: relative;\n  width: 100%;\n  min-height: 60px;\n"]);return Rz=function(){return e},e}function Dz(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n  margin-bottom: 30px;\n"]);return Dz=function(){return e},e}function Mz(){var e=Object(f.a)(["\n  padding: 17px 30px 0;\n"]);return Mz=function(){return e},e}function Pz(){var e=Object(f.a)(["\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  background: ",";\n"]);return Pz=function(){return e},e}var Lz=x.default.div(Pz(),y.gray0),Fz=x.default.div(Mz()),Uz=x.default.div(Dz(),y.gray2),Vz=x.default.div(Rz()),Bz=BS.SortedGroupTitle,Jz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,editTask:!1,task:{}},e.convertTaskTypes=function(){var t=e.props.taskTypes.data;return t?t.data:[]},e.onSave=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.match.params.id,(0,n.tasks.fetch)(r);case 2:case"end":return t.stop()}}),t)}))),e.getSortedTasks=function(){var t=e.props.tasks.data,n={completed:[],notCompleted:[]};return t&&(n.completed=t.data.filter((function(e){return e.latest_status.status===TB.Completed})),n.notCompleted=t.data.filter((function(e){return e.latest_status.status===TB.Active}))),n},e.editTask=function(t){e.setState({showModal:!0,editTask:!0,task:t})},e.deleteTask=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,i=r.tasks.fetch,t.next=3,a(Sw("Confirm","Delete task #".concat(n.id," ").concat(n.name,"?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,pJ.removeTaskFromJob(o,n.id);case 7:i(o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showAddNewTaskModal=function(){e.setState({editTask:!1,showModal:!0})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id,n=e.tasks.fetch,r=e.taskTypes.fetch;n(t),r()}},{key:"render",value:function(){var e=this,t=this.state,n=t.showModal,r=t.editTask,o=t.task,i=this.props,c=i.tasks,s=c.loading,l=c.fetch,u=i.match.params.id,d=i.currentJob.data,p=this.getSortedTasks();return Object(a.jsx)(Cw.Consumer,{children:function(t){var i=t.has(Dw.JOBS_TASK_MANAGE),c=d&&d.id===+u&&d.assigned_location_id||void 0;return Object(a.jsxs)(Lz,{children:[n&&Object(a.jsx)(Iz,{locationId:c,jobId:+u,edit:r,task:r?_z(o):null,isOpen:n,onClose:function(){return e.setState({showModal:!1})},onSave:e.onSave,doAssign:!0,doSave:!0,taskTypes:e.convertTaskTypes()}),i&&Object(a.jsx)(Fz,{className:"d-flex justify-content-end w-100",children:Object(a.jsx)(Cg,{className:"btn",onClick:e.showAddNewTaskModal,disabled:!!d&&d.edit_forbidden,children:"Add Task"})}),Object(a.jsxs)(Vz,{children:[s&&Object(a.jsx)(av,{size:40,color:y.gray0}),p.notCompleted.length>0&&Object(a.jsx)(Uz,{style:{width:"100%"},children:p.notCompleted.map((function(t){return Object(a.jsx)(gJ,{onTaskEdit:function(){return e.editTask(t)},jobId:+u,fetch:function(){return l(u)},deleteTask:function(){return e.deleteTask(t)},task:t},t.id)}))}),p.completed.length>0&&Object(a.jsxs)(Uz,{style:{width:"100%"},children:[Object(a.jsx)(Bz,{padding:"0 30px 10px 30px",children:"Completed"}),p.completed.map((function(t){return Object(a.jsx)(gJ,{onTaskEdit:function(){return e.editTask(t)},jobId:+u,fetch:function(){return l(u)},deleteTask:function(){return e.deleteTask(t)},task:t},t.id)}))]})]})]})}})}}]),n}(p.PureComponent),zz=Object(LO.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob}})),v.g,Mm({tasks:{fetch:pJ.getJobTasks},taskTypes:{fetch:pJ.getTaskTypes}}))(Jz),qz="Steamatic/CurrentJob/Documents/LOAD_DOCUMENTS",Wz="Steamatic/CurrentJob/Documents/LOAD_DOCUMENTS_COMPLETE",Hz="Steamatic/CurrentJob/Documents/RESET",Gz="Steamatic/CurrentJob/Documents/ERROR",Yz="Steamatic/CurrentJob/Documents/SELECTED_DOCUMENTS",Qz="Steamatic/CurrentJob/Documents/RESET_SELECTED_DOCUMENTS",Kz=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Wz:return t.payload;case Hz:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Gz:return t.payload;case Wz:case Hz:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case qz:return!0;case Wz:case Hz:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Wz:return!0;case Hz:return!1;default:return e}},params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case qz:return t.payload;case Hz:return{};default:return e}},selectedDocuments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Yz:return t.payload;case Hz:case Qz:return[];default:return e}}}),Zz=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||r().currentJobDocuments.params,n({type:qz,payload:a}),t.prev=2,t.next=5,ly.getJobDocuments(e);case 5:return o=t.sent,n({type:Wz,payload:o}),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(2),n({type:Gz,payload:t.t0}),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Xz=function(){return{type:Qz}};function $z(){var e=Object(f.a)(["\n  margin: 0 5px;\n  font-size: ",";\n"]);return $z=function(){return e},e}function eq(){var e=Object(f.a)(["\n  height: 20px;\n  min-width: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: 100px;\n  background: ",";\n  z-index: 5;\n  color: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  * {\n    stroke-width: 2.5px !important;\n  }\n"]);return eq=function(){return e},e}function tq(){var e=Object(f.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n\n  > * {\n    margin-left: 5px;\n  }\n"]);return tq=function(){return e},e}function nq(){var e=Object(f.a)(["\n  padding: 10px;\n  border: 0;\n  width: 100%;\n  font-weight: ",";\n  font-size: ",";\n  outline: none;\n  background: ",";\n  color: ",";\n"]);return nq=function(){return e},e}function rq(){var e=Object(f.a)(["\n  background-size: cover;\n  background-position: center;\n  background-color: ",";\n  position: relative;\n  width: 100%;\n  height: 150px;\n  .doc-icon{\n    font-size: 100px;\n  }\n  .doc-title{\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    width: 100%;\n    text-align: center;\n    background: #000;\n    opacity: 0.7;\n    color: #fff;\n  }\n"]);return rq=function(){return e},e}function aq(){var e=Object(f.a)(["\n  width: 230px;\n  margin: 0 20px 20px 0;\n  overflow: hidden;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 0 0 0 1px ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n\n    & .tools {\n      visibility: visible !important;\n    }\n  }\n"]);return aq=function(){return e},e}var oq={jpg:"fa-file-image text-info",jpeg:"fa-file-image text-info",png:"fa-file-image text-info",gif:"fa-file-image text-info",xls:"fa-file-excel text-success",xlsx:"fa-file-excel text-success",xlt:"fa-file-excel text-success",xltx:"fa-file-excel text-success",xlm:"fa-file-excel text-success",xlsm:"fa-file-excel text-success",doc:"fa-file-word text-primary",docx:"fa-file-word text-primary",dot:"fa-file-word text-primary",dotx:"fa-file-word text-primary",wbk:"fa-file-word text-primary",docm:"fa-file-word text-primary",docb:"fa-file-word text-primary",pdf:"fa-file-pdf text-danger",zip:"fa-file-archive text-dark",file:"fa-file text-dark"},iq=x.default.div(aq(),y.gray2,y.blue0),cq=x.default.div(rq(),y.gray0),sq=Object(x.default)(Kj(["selected"])("input"))(nq(),Bf.medium,Vf.smaller,(function(e){return e.selected?y.blue0:"transparent"}),(function(e){return e.selected?y.black1:y.gray5})),lq=x.default.div(tq()),uq=Object(x.default)(Kj(["br","color"])("div"))(eq(),(function(e){return e.bg}),(function(e){return e.color?e.color:y.white}),(function(e){return e.color?e.color:y.white})),dq=x.default.span($z(),Vf.smaller),pq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={description:e.props.doc.description,loading:!1,url:e.props.doc.url},e.onDescriptionChangeInternal=function(t){e.setState({description:t.target.value}),e.debouncedDescriptionChange(t.target.value)},e.debouncedDescriptionChange=Object(m.debounce)((function(t){var n=e.props,r=n.onDescriptionChange,a=n.doc.id;e.setState({loading:!0}),r(t,a).finally((function(){e.setState({loading:!1})}))}),1500),e.uploadDoc=function(t){var n=e.props,r=n.doc.id,a=n.onDocUpdate,o=new FormData;o.append("file",t),a(o,r).finally((function(){e.setState({loading:!1})}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadDoc(t.target.files[0]))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.doc,n=(t.id,t.file_name),r=(e.onExpand,e.doc),o=e.selected,i=e.dispatch,c=e.noUpdate,s=this.state,l=s.description,u=s.loading,d=(null===n||void 0===n?void 0:n.split(".").pop())||"file",p=oq[d]||oq.file;return Object(a.jsxs)(iq,{children:[Object(a.jsx)(lq,{className:"tools",children:!c&&Object(a.jsx)(uq,{bg:y.blue5,color:y.white,onClick:this.onUploadLinkClick,children:Object(a.jsx)(dq,{children:"Update"})})}),Object(a.jsxs)(cq,{className:"d-flex p-2 justify-content-center",onClick:c?void 0:function(){return i(function(e){return function(t,n){var r=n().currentJobDocuments.selectedDocuments,a=r.slice(0);r.find((function(t){return t.id===e.id}))?a.splice(r.map((function(e){return e.id})).indexOf(e.id),1):a.push(e),t({type:Yz,payload:a})}}(r))},children:[Object(a.jsx)("span",{className:"doc-icon fas ".concat(p," text-center")}),Object(a.jsx)(Jf.a,{className:"overlapping text-left",id:"doc_title",effect:"solid"}),Object(a.jsx)("div",{className:"doc-title text-truncate p-2","data-for":"doc_title","data-tip":r.file_name,children:r.file_name})]}),Object(a.jsx)(sq,{type:"text",onChange:this.onDescriptionChangeInternal,value:l,selected:o,disabled:c,placeholder:c?"Editing is disabled":"Enter a short description..."}),u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("input",{type:"file",accept:gq,hidden:!0,disabled:c,onChange:this.onFileInputChange,ref:this.inputRef})]})}}]),n}(p.PureComponent),hq=Object(b.b)()(pq);function bq(){var e=Object(f.a)(["\n  position: absolute;\n  top: 20px;\n  right: 30px;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n\n  :hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return bq=function(){return e},e}function fq(){var e=Object(f.a)(["\n  color: transparent;\n  filter: grayscale(1);\n"]);return fq=function(){return e},e}function mq(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return mq=function(){return e},e}function jq(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return jq=function(){return e},e}function vq(){var e=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 10px 0 40px 0;\n"]);return vq=function(){return e},e}function Oq(){var e=Object(f.a)(["\n  padding: 40px 30px 30px 30px;\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return Oq=function(){return e},e}var gq="*",xq=x.default.div(Oq()),yq=x.default.div(vq()),wq=BS.SortedGroupTitle,_q=x.default.div(jq(),Bf.bold),kq=x.default.span(mq(),y.blue4,y.blue5),Sq=x.default.div(fq()),Cq=x.default.div(bq(),y.blue4,Vf.smaller,y.blue5),Nq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,filmstrip:!1,currentDocId:void 0,blockLoading:!1,sortedDocsGroups:e.groupedDocs,rotateImage:!1,rotateImageId:0},e.loadDocs=function(){var t=e.props,n=t.match;return(0,t.dispatch)(Zz(n.params.id))},e.handleDrop=function(t){var n=e.props.currentJob.data,r=n&&n.edit_forbidden;t.preventDefault(),!r&&t.dataTransfer.files.length>0&&(e.setState({loading:!0}),e.uploadDocuments(t.dataTransfer.files))},e.uploadDocuments=function(t){var n,r=e.props.match,o=[],i=["pdf","doc","docx","dot","dotx","wbk","docm","docb","xls","xlsx","xlt","xltx","xlm","xlsm","zip","jpg","jpeg","png"],c=Object(pV.a)(t);try{for(c.s();!(n=c.n()).done;){var s=n.value,l=(s.name.split(".").pop()||"").toLowerCase();i.includes(l)?o.push(p_.postDocument(s).then((function(e){return ly.attachDocument(r.params.id,e.data.id,{description:""})}))):Qm(Vm.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",l]})," is not supported!"]}))}}catch(u){c.e(u)}finally{c.f()}0===o.length?e.setState({loading:!1}):Promise.all(o).then((function(){setTimeout((function(){e.loadDocs(),e.setState({loading:!1})}),500)})).catch((function(){e.setState({loading:!1})}))},e.onDragOver=function(e){e.preventDefault()},e.changeDescription=function(t,n){var r=e.props.match;return ly.updateAttachedDocument(r.params.id,n,{description:t})},e.onDocUpdate=function(t,n){return p_.updateDocument(n,t).then((function(){return e.setState({blockLoading:!0}),e.loadDocs().then((function(){e.setState({blockLoading:!1})})).catch((function(){e.setState({blockLoading:!1})}))}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadDocuments(t.target.files))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadDocs()}},{key:"componentDidUpdate",value:function(e){e.currentJobDocuments!==this.props.currentJobDocuments&&this.setState({sortedDocsGroups:this.groupedDocs})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:Hz})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentJobDocuments,r=n.loading,o=n.data,i=n.selectedDocuments,c=t.currentJob.data,s=this.state,l=s.loading,u=s.blockLoading,d=s.sortedDocsGroups,p=c&&c.edit_forbidden;return Object(a.jsxs)(xq,{onDragOver:this.onDragOver,onDrop:this.handleDrop,children:[o&&c&&Object(a.jsx)(a.Fragment,{children:d.length>0?Object(a.jsxs)(a.Fragment,{children:[!p&&Object(a.jsx)(Cq,{onClick:this.onUploadLinkClick,children:"Add documents"}),d.map((function(t,n){return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(wq,{children:qf()(1e3*t.unix).format("ddd, D MMM YYYY")}),Object(a.jsx)(yq,{children:t.items.map((function(t){return Object(a.jsx)(hq,{doc:t,selected:!!i.find((function(e){return e.id===t.id})),noUpdate:!!p,onDescriptionChange:e.changeDescription,onDocUpdate:e.onDocUpdate},t.id)}))})]},n)}))]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Sq,{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(Ff,{name:Ef.Barista,size:200})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(_q,{children:"No documents have been uploaded"})}),!p&&Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:["Drag and drop to add documents or ",Object(a.jsx)(kq,{onClick:this.onUploadLinkClick,children:"click here"})," to ",Object(a.jsx)("br",{})," ","upload the old fashioned way."]})})]})}),(r||l)&&!u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("input",{type:"file",accept:gq,multiple:!0,hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef})]})}},{key:"groupedDocs",get:function(){var e=this.props.currentJobDocuments.data;return e?Qf(e.data,"created_at"):[]}}]),n}(p.PureComponent),Eq=Object(LO.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,currentJobDocuments:e.currentJobDocuments}})),v.g)(Nq);function Aq(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n  margin-top: 10px;\n  display: inline-block;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return Aq=function(){return e},e}function Tq(){var e=Object(f.a)(["\n  color: ",";\n  margin-bottom: 30px;\n"]);return Tq=function(){return e},e}function Iq(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n"]);return Iq=function(){return e},e}function Rq(){var e=Object(f.a)(["\n  padding: 15px;\n  position: fixed;\n  margin-top: 60px;\n"]);return Rq=function(){return e},e}var Dq=x.default.div(Rq()),Mq=x.default.div(Iq(),Vf.medium,Bf.medium),Pq=x.default.div(Tq(),y.gray4),Lq=x.default.div(Aq(),y.blue4,y.blue5),Fq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.downloadDocuments=function(){var t=e.props,n=t.currentJobDocuments.selectedDocuments,r=(t.job,t.dispatch);if(n.length>0){var a=[];e.setState({loading:!0});var o,i=Object(pV.a)(n);try{for(i.s();!(o=i.n()).done;){var c=o.value;a.push(p_.downloadDocument(c.id,c.file_name))}}catch(s){i.e(s)}finally{i.f()}Promise.all(a).then((function(){r(Xz()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},e.detachDocuments=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currentJobDocuments.selectedDocuments,a=n.job,o=n.dispatch,t.next=3,o(Sw("Confirm","Delete Document"+(r.length>1?"s":""),"Do you really want to delete ".concat(r.length>1?"these documents":"this document"," from this job?")));case 3:if(t.sent){i=[],e.setState({loading:!0}),c=Object(pV.a)(r);try{for(c.s();!(s=c.n()).done;)l=s.value,i.push(ly.detachDocument(a.id,l.id))}catch(u){c.e(u)}finally{c.f()}Promise.all(i).then((function(){o(Zz(a.id)),o(Xz()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.currentJobDocuments.selectedDocuments,n=this.state.loading;return Object(a.jsxs)(Dq,{children:[Object(a.jsx)(Mq,{children:"Manage Documents"}),Object(a.jsxs)(Pq,{children:[t.length," ",t.length>1?"items":"item"," selected"]}),Object(a.jsx)(Cg,{className:"btn",onClick:this.downloadDocuments,children:"Download"}),Object(a.jsx)("br",{}),Object(a.jsx)(Lq,{onClick:function(){e.detachDocuments()},children:"Delete"}),n&&Object(a.jsx)(av,{size:40,color:y.gray1})]})}}]),n}(p.PureComponent),Uq=Object(b.b)((function(e){return{currentJobDocuments:e.currentJobDocuments}}))(Fq);function Vq(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  display: flex;\n  align-items: center;\n"]);return Vq=function(){return e},e}function Bq(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  padding-left: 26px;\n  display: flex;\n  align-items: center;\n  margin-right: ",";\n"]);return Bq=function(){return e},e}function Jq(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return Jq=function(){return e},e}function zq(){var e=Object(f.a)(["\n  height: 55px;\n  background: ",";\n  border: 1px "," solid;\n  padding: 27px 0;\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n"]);return zq=function(){return e},e}function qq(){var e=Object(f.a)(["\n  padding: 0px 25px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"]);return qq=function(){return e},e}var Wq=x.default.div(qq()),Hq=x.default.div(zq(),y.white,y.gray2),Gq=x.default.div(Jq()),Yq=x.default.div(Bq(),Bf.bold,Vf.medium,Vf.big),Qq=x.default.div(Vq(),Bf.light,Vf.medium),Kq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.siteAddress,n=e.additionalHeaderLayout,r=e.customHeaderTitle;return Object(a.jsxs)(Hq,{className:"print-hide",children:[Object(a.jsxs)(Gq,{children:[Object(a.jsx)(Yq,{children:r||"Job Usage, Actuals, Reports"}),Object(a.jsx)(Qq,{children:t})]}),Object(a.jsx)(Wq,{className:"flex-grow-1",children:n})]})}}]),n}(p.PureComponent),Zq=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/usages-all?usedtype=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xq=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/assessment-reports/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$q=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/assessment-reports/").concat(n,"/status-and-total"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/assessment-reports/").concat(n,"/statuses"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),tW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/assessment-reports/").concat(n,"/duplicate"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/assessment-reports/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/assessment-reports/".concat(t,"/cost-items"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/assessment-reports/".concat(t,"/cost-items/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(t,"/cost-items"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/assessment-reports/".concat(t,"/cost-items/positions"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/assessment-reports/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/assessment-reports/".concat(t,"/cost-items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(t,"/sections"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/assessment-reports/".concat(t,"/sections/positions"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),pW={getAllImportModal:Zq,assessmentReportsGet:Xq,assessmentReportsGetStatusAndTotal:$q,assessmentReportStatusUpdate:eW,assessmentReportDuplicate:tW,assessmentReportDelete:nW,costItemList:rW,costItemCreate:oW,costItemListUpdate:aW,costItemPositionUpdate:iW,costItemDelete:sW,assessmentReportHeading:cW,assessmentReportSectionHeadingUpdate:lW,assessmentReportSectionDelete:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/assessment-reports/".concat(t,"/sections/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportSectionPositionUpdate:dW,assessmentReportSectionDuplicate:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/duplicate"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportAttachImage:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/images"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdateImage:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r,a){var o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/images/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),assessmentReportDeleteImage:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/images/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAttachPhotos:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/photos"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdatePhotos:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r,a){var o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/photos/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),assessmentReportDeletePhotos:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/photos/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAddPhotosFromJob:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/photos/add-from-job"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAddBulkItems:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/bulk"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAddSingleItems:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdateSingleItems:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r,a){var o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),assessmentReportDeleteSingleItems:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/").concat(r));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdatePositionItems:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/positions"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportSectionCreate:uW,addScopeOfWorkServiceList:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/services");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addScopeOfWorkCategory:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/work_categories");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addScopeOfWorkList:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/works");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addScopeOfWorkListFilter:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/works?term=".concat(t,"&work_category_id=").concat(n,"&job_service_id=").concat(r));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getAreas:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/areas"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newReportCreate:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/assessment-reports/with-cost-item"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setMarkAsUsed:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/assessment-reports/update-job-usages-counter"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportCoastingSatges:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/assessment-reports/".concat(t,"/costing-stages"));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},hW={getAllowanceTypes:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/allowance-types");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createAllowance:function(e){var t=e.job_id;return Aj.post("/v1/jobs/".concat(t,"/allowances"),e)},updateAllowance:function(e){var t=e.job_id,n=e.id;return Aj.patch("/v1/jobs/".concat(t,"/allowances/").concat(n),e)},getJobAllowances:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/allowances"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["date_given","user.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteJobAllowance:function(e,t){return Aj.remove("/v1/jobs/".concat(e,"/allowances/").concat(t))},approveAllowance:function(e){var t=e.job_id,n=e.id;return Aj.post("/v1/jobs/".concat(t,"/allowances/").concat(n,"/approve"))}},bW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/labours"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["started_at_override","worker.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/usage-and-actuals/labour-types",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/usage-and-actuals/labour-types/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/usage-and-actuals/labour-types/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vW={getJobLabours:bW,createJobLabour:function(e){return Aj.post("/v1/jobs/".concat(e.job_id,"/labours"),e)},deleteJobLabour:function(e,t){return Aj.remove("/v1/jobs/".concat(e,"/labours/").concat(t))},updateJobLabour:function(e,t,n){return Aj.patch("/v1/jobs/".concat(e,"/labours/").concat(t),n)},getLabourTypes:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/labour-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateJobLabourStatus:function(e,t,n){return Aj.patch("/v1/jobs/".concat(e,"/labours/").concat(t,"/status"),{status:n})},createLabourType:fW,updateLabourType:mW,deleteLabourType:jW},OW={createReimbursement:function(e){var t=e.job_id;return Aj.post("/v1/jobs/".concat(t,"/reimbursements"),e)},getJobReimbursements:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/reimbursements"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["date_of_expense","user.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteJobReimbursement:function(e,t){return Aj.remove("/v1/jobs/".concat(e,"/reimbursements/").concat(t))},updateReimbursement:function(e){var t=e.job_id,n=e.id;return Aj.patch("/v1/jobs/".concat(t,"/reimbursements/").concat(n),e)},approveReimbursement:function(e){var t=e.job_id,n=e.id;return Aj.post("/v1/jobs/".concat(t,"/reimbursements/").concat(n,"/approve"))}},gW={createLaha:function(e){var t=e.job_id;return Aj.post("/v1/jobs/".concat(t,"/laha"),e)},getJobLahas:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/laha"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["date_started","user.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateJobLaha:function(e){var t=e.job_id,n=e.id;return Aj.patch("/v1/jobs/".concat(t,"/laha/").concat(n),e)},deleteJobLaha:function(e,t){return Aj.remove("/v1/jobs/".concat(e,"/laha/").concat(t))},getLahaCompensations:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/laha-compensations");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),approveLaha:function(e){var t=e.job_id,n=e.id;return Aj.post("/v1/jobs/".concat(t,"/laha/").concat(n,"/approve"))}},xW=function(e){var t,n;return Object(c.a)(Object(c.a)({},e),{},{type:(null===(t=e.type)||void 0===t?void 0:t.value)||e.type||null,charging_interval:(null===(n=e.charging_interval)||void 0===n?void 0:n.value)||e.charging_interval,charging_intervals:void 0})},yW=function(e){var t,n,r;return Object(c.a)(Object(c.a)({},e),{},{equipment_category_id:null===(t=e.equipment_category)||void 0===t?void 0:t.id,location_id:(null===(n=e.location)||void 0===n?void 0:n.id)||null,status:(null===(r=e.status)||void 0===r?void 0:r.value)||e.status||null,last_test_tag_at:qf.a.isMoment(e.last_test_tag_at)?Wj(e.last_test_tag_at,!0):e.last_test_tag_at||null,next_test_tag_at:qf.a.isMoment(e.next_test_tag_at)?Wj(e.next_test_tag_at,!0):e.next_test_tag_at||null,equipment_category:void 0,location:void 0,job_equipment:void 0})},wW=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{charging_interval:(null===(t=e.charging_interval)||void 0===t?void 0:t.value)||e.charging_interval||null})},_W=function(e){return{name:e.equipment.model,equipment:e.equipment,total_amount:e.total_charge,unit_cost_to_me:e.buy_cost_per_interval,started_at:qf()(e.started_at),ended_at:qf()(e.ended_at),intervals_count_override:e.intervals_count_override}},kW=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{measure_unit_id:null===(t=e.measure_unit)||void 0===t?void 0:t.id,measure_unit:void 0})},SW=function(e){return{buy_cost_per_unit:+e.default_buy_cost_per_unit,sell_cost_per_unit:+e.default_sell_cost_per_unit,quantity_used_override:e.count,used_at:e.used_at.format(Mj),material_id:e.material.id}},CW=function(){return{used_at:qf()()}},NW=function(e){return{used_at:qf()(e.used_at),material:e.material,default_buy_cost_per_unit:e.buy_cost_per_unit,default_sell_cost_per_unit:e.sell_cost_per_unit,count:e.quantity_used_override}},EW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/materials",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),AW=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/measure-units"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),TW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/usage-and-actuals/materials",kW(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),IW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/usage-and-actuals/materials/".concat(t),kW(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/materials/search",{name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/usage-and-actuals/materials/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),MW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/materials/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),PW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/usage-and-actuals/equipment",yW(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),FW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/usage-and-actuals/equipment/".concat(t),yW(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),UW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/usage-and-actuals/equipment/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment/search",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),BW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/equipment/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),JW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment-categories",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment-categories/search",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qW=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/insurer-contract-material");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),WW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/usage-and-actuals/insurer-contract-material/".concat(t,"/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),HW=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/insurer-contracts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),GW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/usage-and-actuals/equipment-categories",xW(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/usage-and-actuals/equipment-categories/".concat(t),xW(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),QW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/usage-and-actuals/equipment-categories/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/equipment-categories/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ZW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval"),wW(Object(c.a)({equipment_category_id:t},n)));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XW=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval/").concat(n),wW(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$W=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval/").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/usage-and-actuals/equipment/".concat(t,"/placement/start"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/usage-and-actuals/equipment/".concat(t,"/placement/stop")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment/".concat(t,"/placements"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment/".concat(t,"/equipment-history"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/usage-and-actuals/equipment/".concat(t,"/qr-history"),Object(c.a)({equipment_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment/".concat(t,"/qr-history"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/equipment/equipments-last-qr-history",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/usage-and-actuals/expenses/search",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uH=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/operations/inventory-items/job",Object(c.a)({job:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dH=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},pW),hW),vW),OW),gW),{},{getAllMaterials:EW,getAllMeasureUnits:AW,createMaterial:TW,updateMaterial:IW,deleteMaterial:DW,getMaterial:MW,searchMaterials:RW,getAllEquipments:PW,createEquipment:LW,updateEquipment:FW,deleteEquipment:UW,searchEquipment:VW,getEquipmentInfo:BW,getEquipmentCategories:JW,searchEquipmentCategories:zW,getAllContracts:qW,Updatecontract:WW,getListInsurerContracts:HW,createEquipmentCategory:GW,updateEquipmentCategory:YW,deleteEquipmentCategory:QW,getEquipmentCategory:KW,createEquipmentChargingInterval:ZW,updateEquipmentChargingInterval:XW,deleteEquipmentChargingInterval:$W,getEquipmentChargingInterval:eH,getEquipmentChargingIntervals:tH,startEquipmentPlacement:nH,stopEquipmentPlacement:rH,getEquipmentPlacements:aH,getEquipmentDeployemntHistory:oH,saveEquipmentScannedLocation:iH,getEquipmentScannedLocation:cH,getEquipmentsScannedLocations:sH,searchExpenses:lH,getJobStorageItems:uH});function pH(e){return{load:"Steamatic/Job/".concat(e,"/LOAD"),loadComplete:"Steamatic/Job/".concat(e,"/LOAD_COMPLETE"),reset:"Steamatic/Job/".concat(e,"/RESET"),error:"Steamatic/Job/".concat(e,"/ERROR")}}var hH=pH("Costings"),bH=tS({load:hH.load,loadComplete:hH.loadComplete,reset:hH.reset,error:hH.error}),fH=pH("Allowances"),mH=tS({load:fH.load,loadComplete:fH.loadComplete,reset:fH.reset,error:fH.error}),jH=pH("Equipments"),vH=tS({load:jH.load,loadComplete:jH.loadComplete,reset:jH.reset,error:jH.error}),OH=pH("Materials"),gH=tS({load:OH.load,loadComplete:OH.loadComplete,reset:OH.reset,error:OH.error}),xH=pH("Reimbursements"),yH=tS({load:xH.load,loadComplete:xH.loadComplete,reset:xH.reset,error:xH.error}),wH=pH("Lahas"),_H=tS({load:wH.load,loadComplete:wH.loadComplete,reset:wH.reset,error:wH.error}),kH=pH("Labours"),SH={toggle:"Steamatic/Job/Labour/TOGGLE_LABOUR",resetSelected:"Steamatic/Job/Labour/RESET_SELECTED_LABOUR",massSelect:"Steamatic/Job/Labour/MASS_SELECT_LABOUR"},CH=tS({load:kH.load,loadComplete:kH.loadComplete,reset:kH.reset,error:kH.error}),NH=pH("CostingCounters"),EH=tS({load:NH.load,loadComplete:NH.loadComplete,reset:NH.reset,error:NH.error}),AH=function(e){return iS(hH.load,hH.loadComplete,hH.error,(function(){return ly.getJobUsageSummary(e)}))},TH=function(e){return iS(jH.load,jH.loadComplete,jH.error,(function(){return ly.getJobEquipments(e)}))},IH=function(e){return iS(OH.load,OH.loadComplete,OH.error,(function(){return ly.getJobMaterials(e)}))},RH=function(e){return iS(NH.load,NH.loadComplete,NH.error,(function(){return ly.getJobCostingCounters(e)}))},DH=oS(SH),MH=rS(SH),PH=DH.resetSelected,LH=function(e){return DH.toggle(e.id)},FH=function(e){return DH.massSelect(e.map((function(e){return e.id})))},UH=Object(LO.combineReducers)({summary:bH,equipments:vH,materials:gH,labourAllowances:mH,labourReimbursements:yH,labours:CH,costingCounters:EH,labourLahas:_H,selectedLabourIds:MH});function VH(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n"]);return VH=function(){return e},e}var BH,JH,zH,qH=x.default.div(VH()),WH=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.job,n=e.match.params.id,r=e.dispatch;(!t.data||t.data&&t.data.id!==+n)&&(r(QR(n)),r(zP(n)),r(RH(+n)))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.job,r=t.match.params.id,a=t.dispatch,o=e.match.params.id;n.data&&r===o||a(QR(r))}},{key:"getMenuItems",value:function(){var e=this,t=this.props.match.params.id;return[{path:"/usage-and-actuals/".concat(t,"/summary"),label:"Summary",icon:Ef.AnalyticsBar,isActive:this.isActive("/usage-and-actuals/".concat(t,"/summary")),type:"summary"},{path:"/usage-and-actuals/".concat(t,"/report"),label:"Reports",icon:Ef.AnalyticsBar,isActive:this.isActive("/usage-and-actuals/".concat(t,"/report")),type:"report"},{path:"/usage-and-actuals/".concat(t,"/labour"),label:"Time",icon:Ef.Stopwatch,isActive:this.isActive("/usage-and-actuals/".concat(t,"/labour")),type:"time",value:0},{path:"/usage-and-actuals/".concat(t,"/equipment"),label:"Equipment",icon:Ef.Tools,isActive:this.isActive("/usage-and-actuals/".concat(t,"/equipment")),type:"equipment",value:0},{path:"/usage-and-actuals/".concat(t,"/materials"),label:"Materials",icon:Ef.Materials,isActive:this.isActive("/usage-and-actuals/".concat(t,"/materials")),type:"materials",value:0},{path:"/usage-and-actuals/".concat(t,"/purchase-order"),label:"PO's, Storage",icon:Ef.File,isActive:this.isActive("/usage-and-actuals/".concat(t,"/purchase-order")),type:"purchase_orders",value:0},{path:"/usage-and-actuals/".concat(t,"/others"),label:"Others",icon:Ef.LayoutBullets,isActive:this.isActive("/usage-and-actuals/".concat(t,"/others")),type:"others",value:0}].map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"getMenu2Items",value:function(){var e=this.props.match.params.id;return[{path:"/usage-and-actuals/".concat(e,"/crew-report"),label:"Crew Report",icon:Ef.File,isActive:this.isActive("/usage-and-actuals/".concat(e,"/crew-report")),type:"crew-report"},{path:"/usage-and-actuals/".concat(e,"/risk-assessment"),label:"Risk Assessment",icon:Ef.File,isActive:this.isActive("/usage-and-actuals/".concat(e,"/risk-assessment")),type:"risk-assessment"}]}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.contentLayout,r=e.additionalHeaderLayout,o=e.customHeaderTitle,i=e.customMenuElements,c=e.sidebar,s=t.data,l=s?ly.getJobAddress(s):"",u=s&&ly.getJobName(s);return u&&(l+=" | ".concat(u)),Object(a.jsxs)(qH,{className:"d-flex flex-column flex-grow-1",children:[Object(a.jsx)(Kq,{customHeaderTitle:o,siteAddress:l,additionalHeaderLayout:r}),Object(a.jsxs)(uC,{className:"h-100 d-flex flex-row min-100",children:[!1!==c&&Object(a.jsx)(Im,{children:i||Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Jk,{children:"Usage and Actuals"}),this.getMenuItems().map((function(e){return Object(a.jsx)(ym,{item:e},e.path)})),Object(a.jsx)(Jk,{children:"On-Site Data & Contracts"}),this.getMenu2Items().map((function(e){return Object(a.jsx)(ym,{item:e},e.path)}))]})}),Object(a.jsx)(qH,{children:n})]})]})}}]),n}(p.PureComponent),HH=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters}})))(WH);!function(e){e.GENERAL_AUTHORITY="general_authority",e.JOB_CONTRACT="job_contract",e.PRE_START_CHECK="pre_start_check",e.ADDITIONAL_WORKS="additional_work",e.CONTENTS_INVENTORY="contents_inventory",e.WORK_COMPLETION="work_completion",e.JOB_FORM_WORK_COMPLETION="job_form_statement_of_work_complete",e.JOB_FORM_PRE_START_CHECK="job_form_non_restorable_floor_covering",e.JOB_FORM_CONTENTS_INVENTORY="job_form_contents_inventory"}(JH||(JH={})),function(e){e.NEW="new",e.AWAITING_SIGNATURE="awaiting_signature",e.SIGNED="signed",e.CANCELED="canceled"}(zH||(zH={}));var GH=(BH={},Object(k.a)(BH,zH.NEW,"New"),Object(k.a)(BH,zH.AWAITING_SIGNATURE,"Awaiting Signature"),Object(k.a)(BH,zH.SIGNED,"Signed"),Object(k.a)(BH,zH.CANCELED,"Cancelled"),BH),YH=function(e,t){var n,r,a;if(!e)return null;var o={job:Object(c.a)(Object(c.a)({},e.job),t),id:e.id,created_at:e.created_at,status:e.status,hash:e.hash,type:null===(n=e.contract_template)||void 0===n||null===(r=n.contract)||void 0===r||null===(a=r.contract_type)||void 0===a?void 0:a.name,template:e.contract_template,signatures:(e.contract_template_signature||[]).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{meta:e.field_data,field_data:void 0})})),meta:j.a.isString(e.field_data)?JSON.parse(e.field_data):e.field_data||{}};return j.a.forEach(o.signatures,(function(e){var t,n;(null===(t=o.meta)||void 0===t||null===(n=t.signature)||void 0===n?void 0:n[e.type])&&(o.meta.signature[e.type].meta=e.meta)})),o};function QH(e){return KH.apply(this,arguments)}function KH(){return(KH=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts",{type:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function ZH(e){return XH.apply(this,arguments)}function XH(){return(XH=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts/".concat(t,"/template"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function $H(e,t,n){return eG.apply(this,arguments)}function eG(){return(eG=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts/jobs/search",Object(c.a)({contract_type:n,job_id:t},r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function tG(e,t,n){return nG.apply(this,arguments)}function nG(){return(nG=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts/jobs/search-latest",Object(c.a)({contract_type:n,job_id:t,per_page:1,latest:1},r));case 2:if(e.t0=e.sent.data[0],e.t0){e.next=5;break}e.t0=null;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function rG(e,t,n){return aG.apply(this,arguments)}function aG(){return(aG=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/contracts/".concat(n,"/job/").concat(t),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function oG(e){return iG.apply(this,arguments)}function iG(){return(iG=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts/job/contracts/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function cG(e){return sG.apply(this,arguments)}function sG(){return(sG=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/contracts/external/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function lG(e,t){return uG.apply(this,arguments)}function uG(){return(uG=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/contracts/job/contracts/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function dG(e){return pG.apply(this,arguments)}function pG(){return(pG=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/contracts/job/contracts/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function hG(e,t){return bG.apply(this,arguments)}function bG(){return(bG=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/contracts/job/contracts/".concat(t,"/email"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function fG(e,t,n,r,a,o){return mG.apply(this,arguments)}function mG(){return(mG=Object(Um.a)(Fm.a.mark((function e(t,n,r,a,o,i){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post(o?"/v1/contracts/job/contracts/".concat(r,"/signature"):"/v1/contracts/signature/external/".concat(i),Object(c.a)({type:t,signature:n},a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var jG=n(164),vG={onchange:"onChange",onclick:"onClick",class:"className",classname:"className",for:"htmlFor",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",maxlength:"maxLength"},OG=/{{\s*([\w_.-]+)\s*}}/g,gG=function e(t,n,r,a){return t.map((function(t,o){var i={key:o},s=t.attributes,l=t.localName,u=t.childNodes,d=t.nodeValue;if(s){var p={};j.a.forEach(s,(function(e){p[e.name]=e.nodeValue})),Array.from(s).forEach((function(e){var t=e.name;if(t in vG&&(t=vG[t]),"style"===t){var n=e.nodeValue.split(";"),o={};n.forEach((function(e){var t=e.split(":"),n=Object(w.a)(t,2),r=n[0],a=n[1];o[r]=a})),i[t]=o}else{var c=j.a.isString(e.nodeValue)?e.nodeValue.match(/{{([\w_]+)}}/):null;if(j.a.has(r,t)||j.a.has(a,t))i[t]=j.a.get(r,t,j.a.get(a,t));else if(c&&(j.a.has(r,c[1])||j.a.has(a,c[1]))){var s=j.a.get(r,c[1],j.a.get(a,c[1]));j.a.isFunction(s)&&!/^on[A-Z]/.test(t)?i[t]=s(p):i[t]=s}else""===e.nodeValue&&["checked","disabled"].includes(t)?i[t]=!0:i[t]=e.nodeValue}}))}return l?(l in n&&(l=n[l],i=Object(c.a)(Object(c.a)(Object(c.a)({},i),a),{},{bindings:r})),h.a.createElement(l,i,u&&Array.isArray(Array.from(u))&&u.length?e(Array.from(u),n,r,a):null)):j.a.isString(d)?xG(d,n,r,a):d}))},xG=function(e,t,n,r){var o,i=[],s=0,l=0;do{if(o=OG.exec(e)){var u=o[1],d=e.substring(s,o.index);d&&i.push(d);var p=t[u];p?i.push(Object(a.jsx)(p,Object(c.a)(Object(c.a)({},r),{},{bindings:n}),l++)):j.a.has(n,u)?j.a.isFunction(j.a.get(n,u))?i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(n,u)(r)},l++)):i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(n,u)||""},l++)):j.a.has(r,u)?j.a.isFunction(j.a.get(r,u))?i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(r,u)(r)},l++)):i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(r,u)||""},l++)):i.push(Object(a.jsx)(h.a.Fragment,{children:"{{".concat(u,"}}")},l++)),s=o.index+o[0].length}}while(o);if(s){var b=e.substr(s);b&&i.push(Object(a.jsx)(h.a.Fragment,{children:b},l++))}return i.length?i:e},yG=function(e){var t,n=e.template,r=e.components,a=e.bindings,o=e.props,i={};return j.a.forEach(r,(function(e,t){i[t.toLowerCase()]=e})),gG(Array.from((t=n,(new DOMParser).parseFromString(t,"text/html").body.childNodes)),i,a,o)},wG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._eval=function(t){if(j.a.isFunction(t))return t(e.props);if(j.a.isString(t)&&t){var n=t.match(/([^=]+)[=]+((.)+)/);if(n){var r=j.a.get(e.props,n[1]),a=n[2];return"boolean"===typeof r?a=sm(a):"number"===typeof r&&(a=parseFloat(a)),r===a}return j.a.get(e.props,t)}return t},e}return Object(l.a)(n,[{key:"eval",value:function(e){var t=this.props,n=t.if,r=t.not;return void 0===n||this._eval(n)?this._eval(r)?null:e:null}}]),n}(p.Component),_G=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.eval(this.props.children)}}]),n}(wG),kG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.default,r=e.jobContract.meta;return Object(a.jsxs)(a.Fragment,{children:[this.eval(Object(a.jsx)("span",{children:j.a.get(r,t,n)||""})),this.props.children]})}}]),n}(wG),SG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onMetaInputChange=function(t){return function(n){var r,a,o=n.target,i=o.value;"checkbox"!==o.type||n.target.checked||(i=null),null===(r=(a=e.props).onChange)||void 0===r||r.call(a,t,i)}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.jobContract.meta,o=(t.bindings,t.errors),i=j.a.get(r,n),c=j.a.get(o,n),s=h.a.Children.map(this.props.children,(function(t){if(h.a.isValidElement(t)){var r={onChange:e.onMetaInputChange(n)};switch(c&&(r.className=(t.props.className||"")+" is-invalid",r.title=c),t.props.type){case"checkbox":r.defaultChecked=i;break;case"radio":r.defaultChecked=i===t.props.value;break;default:r.defaultValue=i}return Object(a.jsxs)(a.Fragment,{children:[h.a.cloneElement(t,r),Object(a.jsx)("div",{className:"text-danger",children:c})]})}return t}));return Object(a.jsx)(a.Fragment,{children:this.eval(Object(a.jsx)(a.Fragment,{children:s}))})}}]),n}(wG),CG=n(563);function NG(){var e=Object(f.a)(["\n  .btn{\n    border-width: 0;\n    box-shadow: none;\n    border-radius: 0;\n  }\n"]);return NG=function(){return e},e}function EG(){var e=Object(f.a)(["\nborder: 1px solid ",";\n// overflow: hidden;\n"]);return EG=function(){return e},e}var AG=x.default.div(EG(),(function(e){return e.borderColor||y.gray3})),TG=x.default.div(NG()),IG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).canvas=h.a.createRef(),e.pad=null,e.resizeCanvas=function(){var t=e.canvas.current.getContext("2d");t.canvas.width=0,t.canvas.height=0;var n=e.canvas.current.parentElement;t.canvas.width=n.clientWidth,t.canvas.height=n.clientHeight,e.clear()},e.clear=function(){var t;null===(t=e.pad)||void 0===t||t.clear()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=this,r=this.props.color,a=void 0===r?"#000000":r;this.pad=new CG.a(this.canvas.current,{dotSize:2,penColor:a}),this.pad._toDataURL=this.pad.toDataURL.bind(this.pad),this.pad.toDataURL=function(){return function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);var r,a,o,i=t.width,c=t.height,s={x:[],y:[]},l=n.getImageData(0,0,t.width,t.height);for(a=0;a<c;a++)for(r=0;r<i;r++)o=4*(a*i+r),l.data[o+3]>0&&(s.x.push(r),s.y.push(a));s.x.sort((function(e,t){return e-t})),s.y.sort((function(e,t){return e-t}));var u=s.x.length-1;i=s.x[u]-s.x[0],c=s.y[u]-s.y[0];var d=n.getImageData(s.x[0],s.y[0],i,c);return t.width=i,t.height=c,n.putImageData(d,0,0),t.toDataURL()}(n.canvas.current)},null===(e=(t=this.props).onRender)||void 0===e||e.call(t,this.pad),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeCanvas)}},{key:"render",value:function(){var e=this.props.toolbar,t=void 0===e||e;return Object(a.jsxs)("div",{className:"w-100 h-100 d-flex flex-column",children:[Object(a.jsx)(AG,{className:"flex-grow-1",borderColor:this.props.borderColor,children:Object(a.jsx)("div",{className:"h-100 w-100",children:Object(a.jsx)("canvas",{ref:this.canvas,className:"h-100 max-h-100 w-100 max-w-100"})})}),t&&Object(a.jsx)(TG,{className:"d-flex justify-content-end",children:Object(a.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-dark",onClick:this.clear,children:"Clear"})})]})}}]),n}(p.Component);function RG(){var e=Object(f.a)(["\n  height: 200px;\n  width: 500px;\n  max-width: 100%;\n"]);return RG=function(){return e},e}var DG=x.default.div(RG()),MG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={invalid:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.onSignatureRender,o=t.jobContract,i=j.a.find(null===o||void 0===o?void 0:o.signatures,{type:n});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"my-3",children:[i?Object(a.jsx)("img",{src:i.url,alt:"Signature",style:{maxHeight:"100px",maxWidth:"100%"}}):Object(a.jsx)(DG,{children:Object(a.jsx)(IG,{borderColor:this.state.invalid?y.red1:y.black0,color:y.black0,onRender:function(t){t.setInvalid=function(t){e.setState({invalid:!0,error:t})},null===r||void 0===r||r(n,t)}})}),this.state.error&&Object(a.jsx)("div",{className:"text-danger",children:this.state.error})]}),this.props.children]})}}]),n}(wG),PG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.type,r=j.a.get(this.props,t);if(r)switch(n){case"date":return qf()(r).format(Pj);case"datetime":case"date_time":return qf()(r).format(Uj);case"currency":return lm(r)}return""}}]),n}(wG),LG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={value:j.a.get(e.props.jobContract.meta,e.props.name)},e.onChange=function(t){var n,r,a=t.target.value;e.setState({value:a}),null===(n=(r=e.props).onChange)||void 0===n||n.call(r,e.props.name,a)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.value,t=this.props,n=t.name,r=t.on,o=void 0===r?"Yes":r,i=t.off,c=void 0===i?"No":i,s=sm(e),l=!s;return this.eval(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"margin-left-10 btn-group btn-group-raised ",children:[Object(a.jsxs)("label",{className:"btn btn-".concat(s?"":"outline-","primary"),htmlFor:"switch_".concat(n,"_yes"),children:[Object(a.jsx)("input",{type:"radio",name:"switch_".concat(n),id:"switch_".concat(n,"_yes"),className:"d-none",value:"1",checked:s,onChange:this.onChange})," ",o]}),Object(a.jsxs)("label",{className:"btn btn-".concat(l?"":"outline-","primary"),htmlFor:"switch_".concat(n,"_no"),children:[Object(a.jsx)("input",{type:"radio",name:"switch_".concat(n),id:"switch_".concat(n,"_no"),className:"d-none",value:"0",checked:l,onChange:this.onChange})," ",c]})]}),this.props.children]}))}}]),n}(wG),FG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,r=e.jobContract.meta;return sm(j.a.get(r,t))===sm(n)?this.eval(Object(a.jsx)(a.Fragment,{children:this.props.children})):null}}]),n}(wG),UG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={data:[]},e.fetchData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="insurer"===t.t0?3:4;break;case 3:return t.abrupt("return",e.loadInsurers());case 4:return t.abrupt("return",[]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadInsurers=Object(Um.a)(Fm.a.mark((function e(){var t,n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={term:"",contact_type:ev.company,contact_category_type:$j.Insurer},e.next=3,Jv.searchContacts(t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",j.a.map(j.a.sortBy(n,"legal_name"),(function(e){return{text:e.legal_name,value:e.id}})));case 5:case"end":return e.stop()}}),e)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.type;this.fetchData(t).then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,r=t.name,o=t.jobContract.meta,i=t.errors,c=t.onChange,s=j.a.get(o,r)||"",l=j.a.get(i,r);return this.eval(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("select",{className:"form-control ".concat(l?"is-invalid":""),title:l||"",value:(null===s||void 0===s?void 0:s.value)||"",onChange:function(t){null===c||void 0===c||c(r,j.a.find(e.state.data,{value:t.target.value})||j.a.find(e.state.data,{value:+t.target.value}))},style:{},children:[n?Object(a.jsx)("option",{style:{display:"none"},children:n}):null,this.state.data.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.text},e.value)}))]}),l&&Object(a.jsx)("div",{className:"text-danger",children:l}),this.props.children]}))}}]),n}(wG),VG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.name,r=e.jobContract.meta,o=e.errors,i=e.onChange,s=j.a.get(r,n),l=j.a.get(o,n);return this.eval(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(by.a,{initialValue:s?qf()(s):void 0,dateFormat:Pj,timeFormat:!1,inputProps:{placeholder:t||""},onChange:function(e){null===i||void 0===i||i(n,e)},closeOnSelect:!0,renderInput:function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("input",Object(c.a)(Object(c.a)({},e),{},{className:(e.className||"")+(l?" is-invalid":" aaa")})),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("span",{className:"input-group-text",onClick:function(){t()},children:Object(a.jsx)(Ff,{name:Ef.Calendar})})})]}),l&&Object(a.jsx)("div",{className:"text-danger",children:l})]})}}),this.props.children]}))}}]),n}(wG),BG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.jobContract,r=t.jobContract.meta,o=t.bindings,i=t.cancel;return n.status===zH.CANCELED?null:Object(a.jsxs)("div",{className:"p-3 min-h-100",style:{backgroundColor:y.gray1,border:"1px solid ".concat(y.gray2)},children:[Object(a.jsxs)("div",{children:[n.status!==zH.SIGNED&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Customer Details:"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(SG,Object(c.a)(Object(c.a)({},this.props),{},{name:"email.send.to",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address"})}))}),n.status!==zH.NEW?Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:o.resendEmail,children:"Resend"})}):null]}),Object(a.jsx)("hr",{})]}),n.status!==zH.NEW&&Object(a.jsx)("div",{className:"my-3",children:Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("button",{className:"btn btn-danger",onClick:i,children:"Cancel this Contract"})})}),n.status!==zH.NEW&&Object(a.jsxs)("div",{className:"text-muted margin-top-5",children:["Sent at ",qf()((null===r||void 0===r||null===(e=r.email)||void 0===e?void 0:e.sent_at)||n.created_at).format(Uj)," "]})]}),n.status===zH.NEW&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsx)("label",{children:"Date of contract:"}),Object(a.jsx)(VG,Object(c.a)(Object(c.a)({},this.props),{},{name:"contract.date"}))]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Steamatic Contact Details:"}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-12 form-group",children:Object(a.jsx)(SG,Object(c.a)(Object(c.a)({},this.props),{},{name:"contact.full_name",children:Object(a.jsx)("input",{className:"form-control",placeholder:"Full name",maxLength:255})}))}),Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(SG,Object(c.a)(Object(c.a)({},this.props),{},{name:"contact.email",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",maxLength:1024})}))})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"margin-top-20",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Cost Ex GST:"}),Object(a.jsx)("div",{className:"input-dollar",children:Object(a.jsx)(SG,Object(c.a)(Object(c.a)({},this.props),{},{name:"contract.cost",children:Object(a.jsx)("input",{className:"form-control text-left",placeholder:"0.00"})}))})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"GST %:"}),Object(a.jsx)(SG,Object(c.a)(Object(c.a)({},this.props),{},{name:"contract.gst",children:Object(a.jsx)("input",{type:"number",className:"form-control",name:"contract.gst",min:"0",max:"100"})}))]})]}),Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:o.submitContract,children:"Ready"})})]})]})}}]),n}(wG);function JG(){var e=Object(f.a)(['\n  .is-invalid{background-image: none;}\n  .form-control.is-invalid{padding-right: .75rem;}\n  input[type=checkbox].is-invalid+label,input[type=radio].is-invalid+label{color: #dc3545; }\n  ol {\n    counter-reset: item;\n    padding-inline-start: 20px;\n  }\n  li {\n    display: block\n  }\n  li:before {\n    content: counters(item, ".") ". ";\n    counter-increment: item\n  }\n  li ol li:before {\n    content: counters(item, ".") " ";\n  }\n  .contract-list>li{font-weight: bold; margin-top: 20px;}\n  .contract-list>li li, .contract-list>li div{font-weight: normal;}\n']);return JG=function(){return e},e}var zG=x.default.div(JG()),qG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).signaturePad={},e.state={jobContract:e.defaultContract},e.onMetaInputChange=function(t){var n=t.target,r=n.name,a=n.value;"checkbox"!==n.type||t.target.checked||(a=null),e.onMetaChange(r,a)},e.onMetaChange=function(t,n){var r=e.state.jobContract,a=j.a.get(r,"meta.".concat(t));if(typeof a!==typeof n)switch(typeof a){case"boolean":n=!!["1","true","on",!0,1].includes(n);break;case"number":n=isNaN(parseFloat(n))?0:parseFloat(n)}j.a.set(r,"meta.".concat(t),n),e.setState({jobContract:r})},e.isMetaInputChecked=function(t){var n=e.state.jobContract,r=t.value,a=j.a.get(n.meta,t.name);return void 0!==r?r===a:sm(a)},e.getMetaValue=function(t){var n=e.state.jobContract;return j.a.get(n.meta,t.name)||""},e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e.uploadSignature=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],j.a.forEach(e.signaturePad,(function(t,a){var o={field_data:JSON.stringify(j.a.get(n.meta,"signature.".concat(a,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:Jv.getContactName(e.customer),customer_email:n.meta.email.send.to};r.push(fG(a,t.toDataURL(),n.id,o,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateSignature=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(t,r){if(e.props.beforeSign){var a=e.props.beforeSign(r,e.state.jobContract.meta,e.props.job);!0===a?e.setState({errors:{}}):(n=!1,e.setState({errors:a}))}if(t.isEmpty())throw t.setInvalid("Signature is required"),n=!1,Qm(Vm.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.submit=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.job,a=n.user,o=n.beforeSubmit,c=n.afterSubmit,e.setState({working:!0}),t.prev=2,s=!0,l=e.state.jobContract,!o){t.next=18;break}return t.prev=6,t.next=9,o(l.meta,r);case 9:u=t.sent,(s=!0===u)?e.setState({errors:{}}):(e.setState({errors:u}),Qm(Vm.Danger,"There are validation errors."),setTimeout((function(){var t,n,r=i.a.findDOMNode(Object(jG.a)(e));null===r||void 0===r||null===(t=r.getElementsByClassName("is-invalid"))||void 0===t||null===(n=t[0])||void 0===n||n.focus()}),1)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),s=!1,Qm(Vm.Danger,t.t0.message);case 18:if(!s){t.next=45;break}if(l.type!==JH.GENERAL_AUTHORITY){t.next=22;break}return t.next=22,e.validateSignature();case 22:if(d=null,!l.id){t.next=33;break}if(!a){t.next=30;break}return t.next=27,lG(l.id,{field_data:JSON.stringify(l.meta)});case 27:d=t.sent,t.next=31;break;case 30:d=l;case 31:t.next=37;break;case 33:if(!a){t.next=37;break}return t.next=36,rG(r.id,l.template.contract.id,{field_data:JSON.stringify(l.meta),contract_date:(p=j.a.get(l.meta,"contract.date"),p?qf()(p).format(Dj):l.contract_date)});case 36:d=t.sent;case 37:if(!d){t.next=45;break}if(a&&(d=YH(d,r)),!a){t.next=43;break}return t.next=42,e.sendEmail(d);case 42:d=t.sent;case 43:e.setState({jobContract:d}),l.type===JH.GENERAL_AUTHORITY?setTimeout(Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!d){t.next=4;break}return t.next=3,e.lockSignature();case 3:setTimeout((function(){null===c||void 0===c||c(e.state.jobContract)}),1);case 4:case"end":return t.stop()}}),t)}))),1):null===c||void 0===c||c(d);case 45:t.next=49;break;case 47:t.prev=47,t.t1=t.catch(2);case 49:return t.prev=49,e.setState({working:!1}),t.finish(49);case 52:case"end":return t.stop()}var p}),t,null,[[2,47,49,52],[6,14]])}))),e.lockSignature=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),n=e.state.jobContract,t.next=5,e.validateSignature();case 5:return t.next=7,e.uploadSignature(n);case 7:r=t.sent,n.signatures=n.signatures.concat(r),e.setState({jobContract:n}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),setTimeout((function(){var t,n,r=i.a.findDOMNode(Object(jG.a)(e));null===r||void 0===r||null===(t=r.getElementsByClassName("is-invalid"))||void 0===t||null===(n=t[0])||void 0===n||n.focus()}),1);case 15:return t.prev=15,setTimeout((function(){e.setState({working:!1})}),100),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])}))),e.sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=j.a.get(n.meta,"email.send.to"),t.next=3,e._sendEmail(a,n);case 3:if(!n.id||n.type!==JH.JOB_CONTRACT){t.next=7;break}return j.a.set(n,"meta.email.sent_at",new Date),t.next=7,lG(n.id,{field_data:JSON.stringify(n.meta)});case 7:return t.t0=r,t.next=10,oG(n.id);case 10:return t.t1=t.sent,t.t2=e.props.job,o=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),e.setState({jobContract:o}),t.abrupt("return",o);case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resendEmail=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.jobContract,a=n.jobContract.meta,o=j.a.get(a,"email.send.to")){t.next=6;break}e.setState({errors:{email:{send:{to:"Email is required"}}}}),t.next=22;break;case 6:if(!jv(o)){t.next=10;break}e.setState({errors:{email:{send:{to:"Email format is not correct"}}}}),t.next=22;break;case 10:return e.setState({working:!0,errors:{}}),t.prev=11,t.next=14,e._sendEmail(o,r);case 14:if(!r.id){t.next=18;break}return j.a.set(a,"email.sent_at",new Date),t.next=18,lG(r.id,{field_data:JSON.stringify(a)});case 18:Qm(Vm.Info,"Email sent");case 19:return t.prev=19,e.setState({working:!1}),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[11,,19,22]])}))),e._sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:Jv.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.next=5,hG(r.id,s);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.cancelContract=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.jobContract,r=e.props,o=r.dispatch,i=r.onDelete,n.type!==JH.GENERAL_AUTHORITY){t.next=17;break}return t.next=5,o(Sw("Confirm","Cancel General Authority!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to cancel general authority? This action can not be undone."})));case 5:if(!t.sent){t.next=15;break}return e.setState({working:!0}),c=e.state.jobContract,t.next=11,dG(c.id);case 11:if(!i){t.next=14;break}return t.next=14,i();case 14:e.setState({working:!1});case 15:t.next=27;break;case 17:return t.next=19,e.props.dispatch(Sw("Confirm","Cancel Contract!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to cancel this contract? This action can not be undone."})));case 19:if(!t.sent){t.next=27;break}return e.setState({working:!0}),s=e.state.jobContract,t.next=25,lG(s.id,{status:zH.CANCELED});case 25:l=t.sent,e.setState({working:!1,jobContract:YH(l,e.props.job)});case 27:case"end":return t.stop()}}),t)}))),e.FTA={NSW:"Fair Trading Act 1987",SA:"Fair Trading Act 1987",WA:"Fair Trading Act 2010",TAS:"Australian Consumer Law (Tasmania) Act 2010",QLD:"Fair Trading Act 1989",ACT:"Fair Trading (Australian Consumer Law) Act 1992"},e.WHSA={NSW:"Work Health and Safety Act 2011",SA:"Work Health and Safety Act 2012",WA:"Occupational Safety and Health Act 1984",TAS:"Work Health and Safety Act 2012",QLD:"Work Health and Safety Act 2011",ACT:"Work Health and Safety Act 2011"},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){e.jobContract.id!==this.props.jobContract.id&&this.setState({jobContract:this.defaultContract})}},{key:"extractContact",value:function(e){var t=this.props.jobContacts;return ly.extractContact(e,t)}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.jobContract,o=n.working,i=n.jobContract,s=i.signatures,l=i.meta,u=n.errors,d=this.props,p=d.a4,h=d.user,b=d.Sidebar,f=b||(r.type===JH.JOB_CONTRACT?BG:null);return Object(a.jsxs)(zG,{className:"position-relative h-100",children:[o&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("div",{className:"d-flex flex-row h-100",children:[h&&f&&r.status!==zH.CANCELED&&Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("div",{className:"h-100",style:{width:300,overflow:"auto"},children:Object(a.jsx)(f,Object(c.a)(Object(c.a)({},this.props),{},{jobContract:r,errors:u,bindings:this.bindings,onChange:this.onMetaChange,cancel:this.cancelContract}))})}),Object(a.jsx)("div",{className:"d-flex flex-column flex-grow-1 h-100",children:Object(a.jsx)("div",{className:"h-100 py-3",style:{overflow:"auto"},children:Object(a.jsxs)("div",{className:"py-4 px-5",style:p?{maxWidth:"210mm",margin:"auto",backgroundColor:"#fff",border:"1px solid ".concat(y.gray2)}:void 0,children:[r.type===JH.JOB_CONTRACT&&Object(a.jsx)("h3",{className:"mb-5 text-center",children:Object(a.jsxs)("strong",{children:[r.status===zH.CANCELED?Object(a.jsx)("span",{className:"text-danger",children:"Cancelled:"}):""," Steamatic ",r.template.contract.name]})}),Object(a.jsx)(yG,{template:r.template.content,components:{Container:_G,C:_G,MetaText:kG,Field:SG,Switch:LG,SwitchData:FG,Signature:MG,DropDownList:UG,DatePicker:VG,Formatter:PG},bindings:this.bindings,props:Object(c.a)(Object(c.a)(Object(c.a)({},this.props),this.CONST_PROPS),{},{jobContract:r,errors:u,meta:l,signature:{customer:(e=j.a.findLast(s,{type:"customer"}),Object(c.a)(Object(c.a)({},e),{},{meta:j.a.merge({full_name:Jv.getContactName(t.customer)},null===e||void 0===e?void 0:e.field_data,null===e||void 0===e?void 0:e.meta)})),staff:function(e){return Object(c.a)(Object(c.a)({},e),{},{meta:j.a.merge({full_name:""},null===e||void 0===e?void 0:e.field_data)})}(j.a.findLast(s,{type:"staff"}))},onChange:this.onMetaChange,onSignatureRender:this.onSignatureRender})})]})})})]})]})}},{key:"defaultContract",get:function(){var e,t=this.props.jobContract;return j.a.merge({meta:{email:{send:{to:null===(e=this.customer)||void 0===e?void 0:e.email}},signature:{customer:{meta:{full_name:Jv.getContactName(this.customer)}}}}},{meta:this.props.defaultMeta},t)}},{key:"sitContact",get:function(){return this.extractContact(Tj.SITE_CONTACT)}},{key:"customer",get:function(){return this.extractContact(Tj.CUSTOMER)}},{key:"referrer",get:function(){return this.extractContact(Tj.REFERRER)}},{key:"losAdustor",get:function(){return this.extractContact(Tj.LOS_ADJUSTOR)}},{key:"broker",get:function(){return this.extractContact(Tj.BROKER)}},{key:"invoiceTo",get:function(){var e=this.props.jobContacts;return null===e||void 0===e?void 0:e.find((function(e){return e.invoice_to}))}},{key:"franchise",get:function(){return this.state.jobContract.job.company_location}},{key:"CONST_PROPS",get:function(){var e,t,n,r,a,o,i,c,s,l,u,d,p,h,b,f,m,v,O,g,x,y,w,_,k,S,C=this,N=this.props,E=N.job,A=N.user,T=this.state.jobContract,I=T.signatures,R=T.meta,D=T.hash;return{FRANCHISE_LEGAL_NAME:null===(e=this.franchise)||void 0===e?void 0:e.legal_name,FRANCHISE_ABN:null===(t=this.franchise)||void 0===t?void 0:t.abn,FRANCHISE_ADDRESS:(null===(n=this.franchise)||void 0===n||null===(r=n.addresses)||void 0===r||null===(a=r.find((function(e){return e.type===tv.street})))||void 0===a?void 0:a.full_address)||"",FRANCHISE_PHONE:null===(o=this.franchise)||void 0===o?void 0:o.business_phone,CONTACT_NAME:null===(i=this.franchise)||void 0===i?void 0:i.trading_name,CONTACT_EMAIL:null===(c=this.franchise)||void 0===c?void 0:c.email,CUSTOMER_NAME:Jv.getContactName(this.customer),CUSTOMER_ADDRESS:(null===(s=this.sitContact||this.customer)||void 0===s||null===(l=s.addresses)||void 0===l||null===(u=l.find((function(e){return e.type===tv.street})))||void 0===u?void 0:u.full_address)||"",CUSTOMER_ABN:null===(d=this.customer)||void 0===d?void 0:d.abn,INVOICE_TO_NAME:Jv.getContactName(this.invoiceTo),INVOICE_TO_ADDRESS:(null===(p=this.invoiceTo)||void 0===p||null===(h=p.addresses)||void 0===h||null===(b=h.find((function(e){return e.type===tv.street})))||void 0===b?void 0:b.full_address)||"",INVOICE_TO_ABN:null===(f=this.invoiceTo)||void 0===f?void 0:f.abn,SITE_ADDRESS:(null===(m=this.sitContact||this.customer)||void 0===m||null===(v=m.addresses)||void 0===v||null===(O=v.find((function(e){return e.type===tv.street})))||void 0===O?void 0:O.full_address)||"",REFERRED_BY:Jv.getContactName(this.referrer),SERVICE_NAME:null===(g=E.service)||void 0===g?void 0:g.name,INQUIRY_SERVICE:null===(x=E.service)||void 0===x?void 0:x.name,BILLING_COMPANY:Jv.getContactName(this.invoiceTo),COLLECT_EXCESS_PAYMENT:+E.expected_excess_payment>0,EXCESS_PAYMENT_TYPE:function(e){switch(e.toLowerCase()){case"cash":return"Cash";case"credit":return"Credit Card";case"debit":return"Debit Card";case"cheque":return"Cheque"}return"N/A"}((null===R||void 0===R||null===(y=R.excess_payment)||void 0===y?void 0:y.type)||""),EXCESS_PAYMENT_RECEIVED_AT:(S=(null===R||void 0===R||null===(w=R.excess_payment)||void 0===w?void 0:w.received_at)||"",S?qf()(S).format(Pj):""),IS_STAFF:!!A,IS_CUSTOMER:!A,STAFF_SIGNED_AT:function(e){return e?qf()(e).format(Uj):""}(null===(_=j.a.findLast(I,{type:"staff"}))||void 0===_?void 0:_.created_at),CUSTOMER_SIGNED_AT:function(e){return e?qf()(e).format(Uj):""}(null===(k=j.a.findLast(I,{type:"customer"}))||void 0===k?void 0:k.created_at),CONTRACT_COST:lm(j.a.get(R,"contract.cost")),CONTRACT_GST_AMOUNT:lm(parseFloat(j.a.get(R,"contract.gst")||"10")/100*parseFloat(j.a.get(R,"contract.cost")||"0")),CONTRACT_TOTAL:lm(parseFloat(j.a.get(R,"contract.gst")||"10")/100*parseFloat(j.a.get(R,"contract.cost")||"0")+parseFloat(j.a.get(R,"contract.cost")||"0")),CONTRACT_URL:"/external/job/contract/".concat(D),FTA:function(){var e;return j.a.get(C.FTA,(null===(e=E.assigned_location)||void 0===e?void 0:e.code)||"","")},WHSA:function(){var e;return j.a.get(C.WHSA,(null===(e=E.assigned_location)||void 0===e?void 0:e.code)||"","")}}}},{key:"bindings",get:function(){return{onMetaInputChange:this.onMetaInputChange,metaChecked:this.isMetaInputChecked,metaValue:this.getMetaValue,submitContract:this.submit,lockSignature:this.lockSignature,resendEmail:this.resendEmail,cancelContract:this.cancelContract}}}]),n}(p.Component),WG=Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me}}))(qG),HG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobContract:null},e.loadContract=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.contractId,o=r.type,i=r.job,c=r.defaultTemplate,t.prev=1,!a&&!n){t.next=11;break}return t.next=5,oG(n||a);case 5:s=t.sent,!(l=YH(s,i)).template.content&&c&&(l.template.content=c),e.setState({jobContract:l}),t.next=18;break;case 11:return t.next=13,QH(o);case 13:return u=t.sent[0],t.next=16,ZH(u.id);case 16:d=t.sent,e.setState({jobContract:{job:i,type:o,template:d}});case 18:t.next=22;break;case 20:t.prev=20,t.t0=t.catch(1);case 22:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}(),e.afterSubmit=function(t){var n,r;e.setState({jobContract:t}),null===(n=(r=e.props).afterSubmit)||void 0===n||n.call(r,t)},e.onDelete=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=(r=e.props).onDelete)||void 0===n||n.call(r),e.props.type!==JH.GENERAL_AUTHORITY){t.next=4;break}return t.next=4,e.loadContract();case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadContract()}},{key:"componentDidUpdate",value:function(e){e.job.id!==this.props.job.id&&this.loadContract()}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.jobContacts,r=e.defaultMeta,o=e.Sidebar,i=e.beforeSubmit,c=e.beforeSign,s=this.state.jobContract;return s?Object(a.jsx)(WG,{job:t,jobContacts:n,jobContract:s,defaultMeta:r,beforeSubmit:i,onDelete:this.onDelete,beforeSign:c,afterSubmit:this.afterSubmit,Sidebar:o}):Object(a.jsx)(av,{size:40})}}]),n}(p.Component),GG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadJobContract=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.job,!(null===(n=r.data)||void 0===n?void 0:n.id)){t.next=3;break}return t.abrupt("return",$H(e.props.job.data.id,JH.GENERAL_AUTHORITY,{latest:1}).then((function(t){var n=j.a.last(t);e.setState({contract:n?YH(n,r.data):null})})));case 3:return t.abrupt("return",null);case 4:case"end":return t.stop()}}),t)}))),e._loadJobContract=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContract();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContract=_v()(e._loadJobContract,100),e.beforeContractSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(r,a){var o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validate(r,a,e.props.user);case 2:if(!0!==(o=t.sent)){t.next=24;break}if(i=e.props.job,!r.insured){t.next=24;break}return c={insurer_id:r.insurance.insurer.value,date_of_loss:qj(qf()(r.insurance.date_of_loss)),claim_number:r.insurance.claim_no,cause_of_loss:i.data.cause_of_loss||"-"},t.prev=7,t.next=10,ly.update(i.data.id,c);case 10:return t.abrupt("return",!0);case 13:if(t.prev=13,t.t0=t.catch(7),(null===(s=t.t0)||void 0===s?void 0:s.status_code)!==Dg){t.next=23;break}return l=n.fields,u={},s.fields.insurer_id&&(u[l.insurer]=s.fields.insurer_id[0]),s.fields.date_of_loss&&(u[l.date_of_loss]=s.fields.date_of_loss[0]),s.fields.claim_number&&(u[l.claim_no]=s.fields.claim_number[0]),t.abrupt("return",u);case 23:return t.abrupt("return",{});case 24:return t.abrupt("return",o);case 25:case"end":return t.stop()}}),t,null,[[7,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDelete=function(){e.setState({contract:null})},e.afterSubmit=function(t){t.meta&&t.meta.insured&&e.props.dispatch(QR(t.job.id,!0))},e.debouncedUpdateJob=_v()(ly.update,1e3),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadJobContract()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.job.data)||void 0===t?void 0:t.id)!==(null===(n=this.props.job.data)||void 0===n?void 0:n.id)&&this.debouncedLoadJobContract()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params.id;return Object(a.jsx)("div",{children:Object(a.jsx)(Uf.b,{to:"/job/".concat(e,"/details"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Details"})})})}},{key:"renderContentPage",value:function(){var e,t,n=this.props,r=n.job,o=n.contacts,i=this.state.contract;return Object(a.jsx)("div",{className:"h-100",children:r.data&&o.data&&void 0!==i?Object(a.jsx)(HG,{type:JH.GENERAL_AUTHORITY,job:r.data,jobContacts:o.data,contractId:null===i||void 0===i?void 0:i.id,defaultTemplate:'\n<h3 class="mb-5"><strong>General Authority to Commence Works</strong></h3>\n<div>\n  I,\n  <C not="jobContract.id">\n    <div class="d-inline-block mx-2">\n      <Field name="contact.full_name">\n        <input type="text" class="form-control" maxlength="255" />\n      </Field>\n    </div>\n  </C>\n  <C if="jobContract.id"><span>{{meta.contact.full_name}}</span></C> , authorise {{FRANCHISE_LEGAL_NAME}} to undertake {{SERVICE_NAME}} restoration work on my building and/or contents located at {{CUSTOMER_ADDRESS}}.\n</div>\n\n<p>I give this authority in my capacity as the owner or lawful occupier of the damaged\n  property, or I am the authorised agent of the owner or occupier.</p>\n\n<hr class="my-4" />\n\n<h5 class="mb-3 font-weight-bold">Terms</h5>\n\n<div>\n  <span class="mr-3">I have an insurance policy:</span>\n  <C if="jobContract.id">\n    <span>\n      <C if="meta.insured">Yes</C>\n      <C not="meta.insured">No</C>\n    </span>\n  </C>\n  <C not="jobContract.id">\n    <Switch name="insured" />\n  </C>\n</div>\n\n<C if="meta.insured">\n  <div>\n    <div>\n      <p><strong>Insurance Terms and Details</strong></p>\n      <ol>\n        <li>I have made or will make a claim with my insurer, {{BILLING_COMPANY}} to be\n          indemnified for costs\n          incurred in undertaking\n          restoration works to my property and/or contents.</li>\n        <li>I authorise and direct my insurer to make payment directly to Steamatic for the\n          restoration work undertaken\n          as invoiced by Steamatic.<br>\n          I request Steamatic to forward all invoices to my insurer or to {{REFERRED_BY}}\n          Insurance Loss\n          Adjusters.</li>\n        <li>I acknowledge that if my insurer pays your invoice less the GST component, then I will be\n          responsible for\n          the payment of the GST component.<br>\n          NOTE: This clause only applies to commercial/business customers.</li>\n        <li>If my insurer pays me the amount Steamatic has invoiced then I understand and agree that I\n          will be liable to\n          reimburse Steamatic immediately\n          upon receiving this amount.</li>\n        <C not="meta.is_suncorp">\n          <li>In the event my insurer fails to pay Steamatic\'s invoice\n            within 30 days\n            from the date invoiced, or in the event my insurer fails to pay\n            Steamatic\'s invoice at all (including but not limited to non acceptance of the claim), then\n            I agree I will be\n            responsible to immediately\n            pay Steamatic the amount of the invoice. Upon payment to Steamatic you may potentially be\n            entitled to claim a\n            reimbursement for this amount\n            from your insurer, it is your sole responsibility to seek further clarification from your\n            insurer.</li>\n        </C>\n        <C if="meta.is_qbe">\n          <li>QBE and Steamatic are acting on a without prejudice basis and\n            any mitigation\n            works completed does not imply\n            acceptance of the claim (whole or part) nor mean either party is responsible for\n            rectification of mitigation\n            works.</li>\n        </C>\n      </ol>\n    </div>\n    <div class="my-3">\n      <div class="form-group">\n        <div class="row">\n          <div class="col-2 text-right">\n            <label class="m-0 pt-2">Insurer Name:</label>\n          </div>\n          <div class="col-5">\n            <C not="jobContract.id">\n              <DropDownList name="insurance.insurer" type="insurer" placeholder="Choose insurance company name" />\n            </C>\n            <C if="jobContract.id">\n              <label class="m-0 pt-2">{{meta.insurance.insurer.text}}</label>\n            </C>\n          </div>\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="row">\n          <div class="col-2 text-right">\n            <label class="m-0 pt-2">Claim Number:</label>\n          </div>\n          <div class="col-3">\n            <C not="jobContract.id">\n              <Field name="insurance.claim_no">\n                <input type="text" maxLength="255" placeholder="Claim Number" class="form-control" />\n              </Field>\n            </C>\n            <C if="jobContract.id">\n              <label class="m-0 pt-2">{{meta.insurance.claim_no}}</label>\n            </C>\n          </div>\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="row">\n          <div class="col-2 text-right">\n            <label class="m-0 pt-2">Date of Loss:</label>\n          </div>\n          <div class="col-3">\n            <C not="jobContract.id">\n              <DatePicker name="insurance.date_of_loss" />\n            </C>\n            <C if="jobContract.id">\n              <label class="m-0 pt-2"><Formatter name="meta.insurance.date_of_loss" type="date" /></label>\n            </C>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</C>\n\n<div class="mt-4">\n  <ol class="pl-0">\n    <li>\n      <strong>Pre Existing Damage</strong>\n      <ol>\n        <li>Steamatic does not accept responsibility for any form of\n          pre-existing damage that occurred prior to the\n          event that caused damage to which Steamatic is repairing/restoring\n          currently.</li>\n        <li>It is also your responsibility to notify Steamatic if you are\n          aware of pre existing damage that is not\n          visible. Failure to do so can result in you becoming personally\n          liable for the cost of restoration works\n          undertaken to repair you pre existing damage.</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Carpet Damage</strong>\n      <ol>\n        <li>Although Steamatic takes every possible precaution to minimise\n          the risk of damage to the structure of your\n          carpets (if you have carpet)\n          it cannot take responsibility for the list below of structural\n          damage as this damage is primarily due to the\n          existing nature and\n          condition of your carpets. Steamatic does not accept\n          responsibility for:</li>\n        <li>any removal of discolouration which has caused dye structure\n          changes\n          <ol>\n            <li>shrinkage or buckling of rugs/carpets woven on a wool base\n            </li>\n            <li>separation of the primary and secondary backings of\n              carpets/rugs of this design/running of colours in\n              rugs/carpets/upholstery containing non colour-fast fibres\n              including, in upholstery, bleeding of colour\n              from materials under the fabric</li>\n            <li>any pre-existing damage and/or hidden conditions including\n              improperly made seams or damaged\n              heating/cooling systems not specifically brought to our\n              attention</li>\n            <li>any damaged caused to the goods other than as can be\n              established has occurred solely as a result of\n              Steamatic undertaking cleaning and/or restoration in a\n              negligent manner.</li>\n          </ol>\n        </li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Steamatic Signage</strong>\n      <ol>\n        <li>If the completion of your restoration works is expected to\n          exceed 5 days, we may erect a temporary sign\n          outside your property\n          for the duration of our work for marketing purposes.</li>\n        <li>Steamatic maintains ownership of the temporary signage and\n          will be responsible for its installation and\n          removal from your property.</li>\n        <li>If you do not wish to have a temporary sign erected on\n          your property you can make a request to this effect\n          to your client manager</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Liability for our equipment</strong>\n      <ol>\n        <li>In some instances our technician will need to install\n          and leave equipment in your property to continue the\n          restoration process after they have left your property.\n          In such cases it is your sole responsibility to\n          ensure the security of the equipment and you will be\n          liable to compensate Steamatic in the event of theft,\n          damage or other loss, should it occur.</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Warranties</strong>\n      <ol>\n        <li>Steamatic undertakes to exercise due skill and\n          care in the restoration of all goods and warrants\n          its\n          restoration work for a period of one year from the\n          provision of such service. The warranty shall also\n          be\n          limited to re-performance of Steamatic\'s services or\n          refund of the service price.</li>\n        <li>Our warranty excludes any damage that occurs as a\n          result of the defective manufacturing of a product\n          used\n          during the restoration process.</li>\n        <li if="$is_iag">IAG and Steamatic are\n          acting on a without prejudice basis and any\n          mitigation\n          works completed does not imply acceptance of the\n          claim\n          (whole or part) nor mean either party is responsible\n          for rectification of mitigation works.</li>\n      </ol>\n    </li>\n\n    <li if="isQLD">\n      <span>Right of sale/disposal of uncollected\n        goods</span>\n      <ol>\n        <li>I hereby acknowledge that goods accepted by\n          Steamatic for repair or other treatment under\n          the customer\n          service agreement is subject to\n          the Disposal of Uncollected Goods Act (1967) QLD\n          which covers inspection, custody, storage,\n          repair and other\n          treatment of goods.\n          Under this Act, uncollected goods may be sold\n          six months after the date on which they were\n          ready for\n          collection.</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Chemicals</strong>\n      <ol>\n        <li>In some instances our technician will need\n          to use chemicals in your property as part of\n          the cleaning and\n          restoration process.</li>\n        <li>Safety Data\n          Sheets are available to be viewed and/or\n          emailed by Steamatic upon\n          request.</li>\n        <li>If you do not wish to have chemicals used\n          in your property, or have occupants that may\n          be chemically\n          sensitive please advise the technician\n          immediately.</li>\n      </ol>\n    </li>\n\n  </ol>\n</div>\n<C if="COLLECT_EXCESS_PAYMENT">\n  <hr class="my-4" />\n  <div>\n    <h5 class="mb-3 font-weight-bold">Excess Payment</h5>\n    <div>\n      <div class="d-flex align-items-center">\n        <label class="mr-4 mb-0">Payment Type:</label>\n        <C if="jobContract.id">\n          <span>{{EXCESS_PAYMENT_TYPE}}</span>\n        </C>\n        <C not="jobContract.id">\n          <div class="d-flex">\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_na" value="" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_na">\n                N/A\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_cash" value="cash" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_cash">\n                Cash\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_cheque" value="cheque" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_cheque">\n                Cheque\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_credit" value="credit" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_credit">\n                Credit Card\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_debit" value="debit" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_debit">\n                Debit Card\n              </label>\n            </div>\n          </div>\n        </C>\n      </div>\n      <C if="meta.excess_payment.type">\n        <div class="mt-3">\n          <div class="form-group">\n            <div class="row">\n              <div class="col-2 text-right">\n                <label class="m-0 pt-2">Amount Received:</label>\n              </div>\n              <div class="col-3">\n                <C not="jobContract.id">\n                  <div>\n                    <div class="input-group">\n                      <div class="input-group-prepend"><span class="input-group-text">$</span></div>\n                      <Field name="excess_payment.amount_received">\n                        <input type="number" class="form-control" step="0.01" placeholder="0.00" />\n                      </Field>\n                    </div>\n                  </div>\n                </C>\n                <C if="jobContract.id">\n                  <div class="m-0 pt-2">$&nbsp;<Formatter name="meta.excess_payment.amount_received" type="currency" /></div>\n                </C>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="row">\n              <div class="col-2 text-right">\n                <label class="m-0 pt-2">Date Received:</label>\n              </div>\n              <div class="col-3">\n                <C not="jobContract.id">\n                  <Datepicker name="excess_payment.received_at" />\n                </C>\n                <C if="meta.excess_payment.type">\n                  <C if="jobContract.id">\n                    <div class="m-0 pt-2"><Formatter name="meta.excess_payment.received_at" type="date" /></div>\n                  </C>\n                </C>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="row">\n              <div class="col-2 text-right">\n                <label class="m-0 pt-2">Receipt Number:</label>\n              </div>\n              <div class="col-3">\n                <C not="jobContract.id">\n                  <Field name="excess_payment.receipt_book_no">\n                    <input type="text" maxlength="255" class="form-control" />\n                  </Field>\n                </C>\n                <C if="jobContract.id">\n                  <C if="meta.excess_payment.receipt_book_no">\n                    <div class="m-0 pt-2">{{meta.excess_payment.receipt_book_no}}</div>\n                  </C>\n                  <C not="meta.excess_payment.receipt_book_no">\n                    <div class="m-0 pt-2">N/A</div>\n                  </C>\n                </C>\n              </div>\n            </div>\n          </div>\n        </div>\n      </C>\n    </div>\n  </div>\n</C>\n<C not="CUSTOMER_SIGNED_AT">\n  <C if="jobContract.id">\n    <hr class="my-4" />\n    <p><strong><span>SIGNATURE</span></strong></p>\n    <C if="IS_CUSTOMER">\n      <div class="py-3 px-5">\n        <Field name="signature.customer.meta.acknowledged">\n          <input type="checkbox" id="gen_auth_ack" />\n        </Field>\n        &nbsp; <label for="gen_auth_ack">I acknowledge and have read the terms and conditions and agree to abide by\n          them.</label>\n        <Signature type="customer" />\n        <div class="d-flex align-items-start">\n          <div class="text-nowrap mr-3">\n            <Field name="signature.customer.meta.responsible_party">\n              <input type="radio" name="signature.customer.meta.responsible_party" id="opt_ga_responsible_party_owner" value="owner" />\n            </Field>\n            <label class=" mb-0" for="opt_ga_responsible_party_owner">\n              I am the owner\n            </label>\n          </div>\n          <div>\n            <Field name="signature.customer.meta.responsible_party">\n            <input type="radio" name="signature.customer.meta.responsible_party" id="opt_ga_responsible_party_agent" value="agent" />\n            </Field>\n            <label class="mb-0" for="opt_ga_responsible_party_agent">\n              I am an authorised agent of the owner\n            </label>\n            <C if="meta.signature.customer.meta.responsible_party=agent">\n              <div class="d-inline-block mt-3">\n                <Field name="signature.customer.meta.agent_relation">\n                  <input type="text" placeholder="Relationship with owner" class="form-control" style="width: 300px;" maxLength="200" />\n                </Field>\n              </div>\n            </C>\n          </div>\n        </div>\n      </div>\n    </C>\n    <C if="IS_STAFF">\n      <p class="text-center"><a href={{CONTRACT_URL}} target="_blank" class="btn btn-outline-primary">Get Customer Signature</a></p>\n    </C>\n  </C>\n  <hr class="my-4 print-hide" />\n  <C if="IS_STAFF">\n    <C not="jobContract.id">\n      <div class="mt-5 d-flex justify-content-center print-hide">\n        <button class="btn btn-primary" onClick={{submitContract}}>Send Authority Form</button>\n      </div>\n    </C>\n    <C if="jobContract.id">\n      <div class="d-flex align-items-center print-hide">\n        <div>Resend this form to:</div>\n        <div class=\'mx-3\'>\n          <div class="d-inline-block">\n            <Field name="email.send.to">\n              <input type="email" placeholder="Email address" class="form-control" style="width: 300px;" maxLength="200" />\n            </Field>\n          </div>\n        </div>\n        <div>\n          <button class="btn btn-primary" onClick={{resendEmail}}>Resend Authority Form</button>\n        </div>\n      </div>\n    </C>\n  </C>\n  <C if="IS_CUSTOMER">\n    <div class="mt-3 d-flex justify-content-center print-hide">\n      <button class="btn btn-primary" onClick={{submitContract}}>Submit Authority</button>\n    </div>\n  </C>\n</C>\n<C if="CUSTOMER_SIGNED_AT">\n  <hr class="my-4" />\n  <C if="signature.customer.meta.acknowledged">\n    <p>I acknowledge and have read the terms and conditions and agree to abide by them.</p>\n  </C>\n  <C not="signature.customer.meta.acknowledged">\n    <p>I do not acknowledge and have not read the terms and conditions and do not agree to abide by them.</p>\n  </C>\n  <p><strong><span>SIGNATURE</span></strong></p>\n  <Signature type="customer" />\n  <div><strong>Signed At:</strong> {{CUSTOMER_SIGNED_AT}}</div>\n  <div class="mt-3">\n    <C if="signature.customer.meta.responsible_party=owner">I am the owner.</C>\n    <C if="signature.customer.meta.responsible_party=agent">I am an authorised agent of the owner. Relationship with owner is {{signature.customer.meta.agent_relation}}.</C>\n  </div>\n</C>\n<C if="jobContract.id">\n  <C if="IS_STAFF">\n    <hr class="my-4 print-hide" />\n    <div class="mt-3 d-flex justify-content-center print-hide">\n      <button class="ml-3 btn btn-danger" onClick={{cancelContract}}>Cancel General Authority</button>\n    </div>\n  </C>\n</C>\n',defaultMeta:{contact:{full_name:Jv.getContactName(ly.extractContact(Tj.CUSTOMER,o.data))},insured:!1,signature:{customer:{meta:{acknowledged:!1,responsible_party:"owner"}}},insurance:{insurer:{value:(null===(e=r.data.insurer)||void 0===e?void 0:e.id)||"",text:(null===(t=r.data.insurer)||void 0===t?void 0:t.legal_name)||""},claim_no:r.data.claim_number||"",date_of_loss:r.data.date_of_loss||""},email:{cc:{requested:!1,to:""}},excess_payment:{type:void 0,amount_received:r.data.expected_excess_payment||"",received_at:""}},beforeSubmit:this.beforeContractSubmit,afterSubmit:this.afterSubmit,onDelete:this.onDelete}):Object(a.jsx)(av,{size:40})})}},{key:"render",value:function(){return Object(a.jsx)(HH,{customHeaderTitle:"General Authority",sidebar:!1,contentLayout:this.renderContentPage()})}}]),n}(p.PureComponent);GG.fields={name:"contact.full_name",insured:"insured",insurer:"insurance.insurer",claim_no:"insurance.claim_no",date_of_loss:"insurance.date_of_loss",payment_type:"excess_payment.type",amount_received:"excess_payment.amount_received",amount_received_at:"excess_payment.received_at",receipt_book_no:"excess_payment.receipt_book_no",acknowledged:"signature.customer.meta.acknowledged",responsible_party:"signature.customer.meta.responsible_party",agent_relation:"signature.customer.meta.agent_relation",email_send_to:"email.send.to"},GG.validate=function(e,t,n){var r=GG.fields,a={};j.a.forEach(r,(function(t,n){a[n]=j.a.get(e,t),j.a.isString(a[n])&&(a[n]=a[n].trim())}));var o={};if(n){var i;if(a.name||j.a.set(o,r.name,"This field is required"),a.insured)(null===(i=a.insurer)||void 0===i?void 0:i.value)||j.a.set(o,r.insurer,"This field is required"),a.claim_no||j.a.set(o,r.claim_no,"This field is required"),a.date_of_loss?qf()(a.date_of_loss).isValid()||j.a.set(o,r.date_of_loss,"Date format is not correct"):j.a.set(o,r.date_of_loss,"This field is required");+t.expected_excess_payment>0&&void 0===a.payment_type&&j.a.set(o,r.payment_type,"This field is required"),a.payment_type&&(a.amount_received||j.a.set(o,r.amount_received,"This field is required"),a.amount_received_at?qf.a.isMoment(a.amount_received_at)||j.a.set(o,r.amount_received_at,"Date format is not correct"):j.a.set(o,r.amount_received_at,"This field is required"))}else"agent"===a.responsible_party&&(a.agent_relation||j.a.set(o,r.agent_relation,"This field is required")),a.acknowledged||j.a.set(o,r.acknowledged,"This field is required");return!!j.a.isEmpty(o)||o};var YG=Object(LO.compose)(v.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(GG),QG=n(29);function KG(){var e=Object(f.a)(["\n  padding: 5px;\n  cursor: pointer;\n  opacity: 0.7;\n  :hover{\n    opacity: 1;\n  }\n"]);return KG=function(){return e},e}function ZG(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return ZG=function(){return e},e}var XG=x.default.div(ZG()),$G=x.default.div(KG()),eY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.data,scrollable:"none"}},e.deleteContract=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.dispatch,i=r.onDelete,n.next=3,o(Sw("Confirm","Delete Job Contract!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete job contract ",Object(a.jsx)("strong",{children:j.a.get(t,"contract_template.contract.name")}),"?"]})));case 3:if(!n.sent){n.next=10;break}return e.setState({loading:!0}),n.next=8,dG(t.id);case 8:null===i||void 0===i||i(t),e.setState({loading:!1});case 10:case"end":return n.stop()}}),n)})))},e.onCellClick=function(t){return function(){e.props.history.push("".concat(e.props.match.url,"/").concat(t.id))}},e.Name=function(t){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{className:"cursor-pointer",children:j.a.get(t,"contract_template.contract.name")})}}))},e.Date=function(t){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data,n=j.a.get(t,"contract_date");return Object(a.jsx)("div",{className:"cursor-pointer",children:n?qf()(n).format(Pj):""})}}))},e.Status=function(t){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{className:"cursor-pointer",children:GH[j.a.get(t,"status")||"NEW"]})}}))},e.Actions=function(t){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data;return Object(a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:!(n.status===zH.SIGNED||n.status===zH.CANCELED)&&Object(a.jsx)($G,{onClick:e.deleteContract(n),children:Object(a.jsx)(Ff,{name:Ef.Delete,size:20})})})}}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.props.data!==this.state.gridState.data&&this.setState((function(t){return t.gridState.data=e.props.data,t}))}},{key:"render",value:function(){var e=this.state.loading;return Object(a.jsxs)(XG,{className:"h-100",children:[e&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{className:"d-flex flex-column",children:[Object(a.jsx)(rw.b,{field:"id",title:"Name",cell:this.Name}),Object(a.jsx)(rw.b,{field:"customer_name",title:"Contract Date",width:"250px",cell:this.Date}),Object(a.jsx)(rw.b,{field:"invoice_to_contact_name",title:"Status",width:"150px",cell:this.Status}),Object(a.jsx)(rw.b,{width:"110px",cell:this.Actions,sortable:!1})]}))]})}}]),n}(p.Component);function tY(e){var t=e.Component,n=e.dataItem,r=e.field,o=e.cellProps;return Object(a.jsx)("td",Object(c.a)(Object(c.a)({},o),{},{children:Object(a.jsx)(t,{data:n,value:r?j.a.get(n,r):void 0})}))}var nY=Object(LO.compose)(Object(b.b)(),v.g)(eY),rY='\n<p>\n  <strong>Parties:</strong><br>\n  {{CUSTOMER_NAME}} of {{INVOICE_TO_ADDRESS}} <C if="">{{CUSTOMER_ABN}}</C> <br>\n  <strong>(\'The Customer\')</strong>\n</p>\n\n<p>And</p>\n\n<p>\n  {{FRANCHISE_LEGAL_NAME}} trading as Steamatic, ABN: {{FRANCHISE_ABN}}<br>\n  <strong>(\'Steamatic\')</strong><br>\n  Address: {{FRANCHISE_ADDRESS}}<br>\n  Phone number: {{FRANCHISE_PHONE}}<br>\n  Contact person details: {{meta.contact.full_name}}<br>\n  Email: {{meta.contact.email}}\n</p>\n\n<p>Steamatic is an experienced cleaning and restoration business that assists customers that have suffered an Event so\n  that where practicable, the Property the subject of the Event is restored to as near as practicable to its pre-Event\n  condition.</p>\n\n<p>\n  <strong>Scope of Works</strong><br>\n  This scope of works details the Services to be provided to the Customer under this Contract.\n</p>\n\n<p>\n  <strong>Location of Property</strong><br>\n  {{SITE_ADDRESS}}\n</p>\n\n<p>\n  <strong>Time and Materials</strong><br>\n  All work performed under this Contract will be priced in accordance with Steamatic\'s Time and Materials Schedule\n  (Schedule). The Schedule is attached to this contract.\n</p>\n\nThe Customer <b>authorises</b> Steamatic:\n<ol class="split start">\n  <li>To complete the Services at the property location as stated above;</li>\n  <li>To complete any Variation to the Services in respect of approved changes to the Property; and,</li>\n  <li>To provide confirmation of Variations to the Customer electronically.</li>\n</ol>\nThe Customer <b>agrees</b>:\n<ol class="split">\n  <li>To make a claim under their insurance policy to cover the Works agreed to be performed under this Contract.</li>\n  <li>Upon receipt of payment of the insurance claim, the Customer will forward such payment forthwith to Steamatic.\n  </li>\n  <li>If there is any difference between the amount due by the Customer to Steamatic under this Contract and the amount\n    paid by the Insurer to the Customer, the Customer will pay the difference to Steamatic.</li>\n  <li>Where the Customer\'s Insurer requests the Customer to do so, the Customer will pay any excess (as defined in the\n    insurance policy) to Steamatic.</li>\n  <li>The Customer acknowledges that in cases where the Customer is not insured for the Services the Customer is\n    responsible for payment of the Services to Steamatic calculated in accordance with this Contract.</li>\n</ol>\n\n<div class="row">\n  <div class="col-6">\n    <div class="mb-3">\n      <strong>Customer</strong>\n    </div>\n    <div class="mb-3">\n      <C not="CUSTOMER_SIGNED_AT">\n        <C if="IS_CUSTOMER">\n          <Field name="signature.customer.meta.full_name"><input type="text" class="form-control" placeholder="Full name" /></Field>\n        </C>\n        <C not="IS_CUSTOMER">\n          <strong>Name:</strong> {{signature.customer.meta.full_name}}\n        </C>\n      </C>\n      <C if="CUSTOMER_SIGNED_AT">\n        <strong>Name:</strong> {{signature.customer.meta.full_name}}\n      </C>\n    </div>\n    <div class="mb-3">\n      <div>\n        <strong>Signature:</strong><C not="CUSTOMER_SIGNED_AT"><C not="IS_CUSTOMER"> (Not signed yet) </C></C>\n      </div>\n      <div>\n      <C if="CUSTOMER_SIGNED_AT">\n        <Signature type="customer" />\n      </C>\n      <C not="CUSTOMER_SIGNED_AT">\n        <C if="IS_CUSTOMER">\n          <Signature type="customer" />\n        </C>\n      </C>\n      </div>\n      <div>\n        <C not="CUSTOMER_SIGNED_AT">\n          <C if="IS_CUSTOMER">\n            <button class="btn btn-primary" onClick={{lockSignature}}>I Agree</button>\n          </C>\n        </C>\n        <C if="CUSTOMER_SIGNED_AT">\n          <strong>Signed At:</strong> {{CUSTOMER_SIGNED_AT}}\n        </C>\n      </div>\n    </div>\n  </div>\n  <div class="col-6">\n    <div class="mb-3">\n      <strong>Steamatic</strong>\n    </div>\n    <div class="mb-3">\n      <C not="STAFF_SIGNED_AT">\n        <C if="IS_STAFF">\n        <Field name="signature.staff.meta.full_name"><input type="text" class="form-control" placeholder="Full name" /></Field>\n        </C>\n      </C>\n      <C if="STAFF_SIGNED_AT">\n        <strong>Name:</strong> {{signature.staff.meta.full_name}}\n      </C>\n    </div>\n    <div class="mb-3">\n      <div>\n        <strong>Signature:</strong>\n      </div>\n      <div>\n      <C if="STAFF_SIGNED_AT">\n        <Signature type="staff" />\n      </C>\n      <C not="STAFF_SIGNED_AT">\n        <C if="IS_STAFF">\n          <Signature type="staff" />\n        </C>\n      </C>\n      </div>\n      <div>\n        <C not="STAFF_SIGNED_AT">\n          <C if="IS_STAFF">\n            <button class="btn btn-primary" onClick={{lockSignature}}>I Agree</button>\n          </C>\n        </C>\n        <C if="STAFF_SIGNED_AT">\n          <strong>Signed At:</strong> {{STAFF_SIGNED_AT}}\n        </C>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<p><b><u>Defined Terms</u></b></p>\n\n<p><b>\'Contract\'</b> means this Service Contract.</p>\n\n<p><b>\'Customer\'</b> means any person or company that is provided with Services by Steamatic under this Contract.</p>\n\n<p><b>\'Event\'</b> means the action, activity, incident, or happening including but not limited to fire, storm, flood or\n  malicious damage, that results in damage to the Customer\'s Property.</p>\n\n<p><b>\'Goods\'</b> \u2013 means the contents of the customer\'s property, and includes personal property.</p>\n\n<p><b>\'Insured\'</b> means the party to an insurance arrangement to whom the insurer agrees to provide cover against\n  specified losses, or to render services, subject to the terms of the insurance contract.</p>\n\n<p><b>\'Insurer\'</b> means the party to an insurance arrangement who undertakes to provide cover or to render services,\n  on the happening of specified events.</p>\n\n<p><b>\'Policy\'</b> means the Product Disclosure Statement and the policy schedule.</p>\n\n<p><b>\'Property\'</b> means the Customer\'s property the subject of an Event which may include Goods.</p>\n\n<p><b>\'Services\'</b> means all of the services supplied to the Customer in accordance with this Contract including but\n  not limited to:</p>\n<ul>\n  <li>liaising with loss assessors to establish the total loss or otherwise of the Customer\'s Property;</li>\n  <li>cleaning;</li>\n  <li>decontamination</li>\n  <li>restoration;</li>\n  <li>repair;</li>\n  <li>replacement of damaged and unserviceable parts with new Goods.</li>\n</ul>\n\n<p><b>\'Steamatic\'</b> means any person(s) or sub-contractor(s) who perform the Services.</p>\n\n<p><b>\'Variation\'</b> means a change to the Services to be supplied under this Contract as agreed by the parties from\n  time to time.</p>\n\n<p><b>\'Works\'</b> refers to the Services to be provided to the Customer to return the Property to as near as practicable\n  to its pre-Event condition.</p>\n\n<ol class="margin-top-30 contract-list">\n  <li><u>This Contract is between The Customer and Steamatic</u>\n    <ol>\n      <li>This Contract states the terms on which Steamatic will supply Services to the Customer.</li>\n      <li>The terms of this Contract cannot be waived or varied unless agreed in writing between the Customer and\n        Steamatic.</li>\n      <li>Steamatic may in its absolute discretion subcontract part or all of its obligations relating to this Contract.\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Insurance policy claims</u>\n    <ol>\n      <li>The Customer hereby authorises and directs the Customer\'s insurers to make payment directly to Steamatic in\n        respect of any Services rendered and/or work undertaken by Steamatic.</li>\n      <li>If Steamatic\'s charges for the Services are not reimbursed by the Insurers within 30 days from the date of\n        Steamatic\'s invoice the Customer agrees to pay the invoice within seven days of a written request to do so.</li>\n      <li>The Customer will be liable for any reasonable legal fees and interest incurred by Steamatic as a result of\n        delay in receipt of payment from the Insurer, and interest (see cl 5).</li>\n    </ol>\n  </li>\n\n  <li><u>Variation</u>\n    <ol>\n      <li>The Customer agrees to pay for any Variation calculated as follows:\n        <ol>\n          <li>If Steamatic has quoted an amount for such Variation, the amount quoted; or</li>\n          <li>If Steamatic has not provided a quote, an amount calculated for the Variation in accordance with\n            Steamatic\'s\n            Time and Materials Schedule as applicable at the time that the Services are provided.\n            Steamatic\'s standard rates are attached to this Contract.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Invoicing and Payment</u>\n    <ol>\n      <li>Steamatic will invoice the Customer upon completion of the Services.</li>\n      <li>Where the Services are not completed within one month, Steamatic will invoice the Customer at suitable\n        intervals, at Steamatic\'s sole discretion.</li>\n      <li>Invoices are payable within 14 days of the date of issue of the invoice(s).</li>\n    </ol>\n  </li>\n\n  <li><u>Interest on Overdue amounts</u>\n    <ol>\n      <li>Where the Customer or the Insurer fails to make payment by the invoice due date, the Customer may be charged\n        interest at the Penalty Interest Rate equivalent to the Reserve Bank of Australia Cash Rate plus 2%, calculated\n        from the date of invoice.</li>\n      <li>Steamatic reserves the right to suspend work until payment of the overdue invoice is received.</li>\n      <li>Steamatic will not be liable for any loss or damage that the Customer may suffer as a result of the suspension\n        of works for non-payment.</li>\n    </ol>\n  </li>\n\n  <li><u>GST</u>\n    <ol>\n      <li>Any amount payable under this Contract, unless specifically described in this Contract as \'GST inclusive\',\n        does not include any amount on account of GST. If GST is payable on any amount payable under this Contract the\n        Customer must pay to Steamatic an additional amount equal to the GST payable on the supply (GST Amount). The GST\n        Amount is payable at the same time as the GST exclusive amount is paid, subject to Steamatic issuing the\n        Customer with a tax invoice for the supply to which the payment relates.</li>\n      <li>The Customer acknowledges that if the Customer\'s insurers pay Steamatic\'s invoice less the GST component, the\n        Customer will be responsible for the payment of the GST in accordance with the payment terms specified in this\n        Contract.</li>\n    </ol>\n  </li>\n\n  <li><u>Storage and Disposal</u>\n    <ol>\n      <li>The Customer acknowledges that as part of providing the Services under this Contract to the Customer,\n        Steamatic may need to remove Goods from the Customer\'s premises, for storage and/or restoration.</li>\n      <li>Goods removed under this Contract will commence accruing storage charges immediately.</li>\n      <li>Storage charges will be invoiced every 30 days.</li>\n      <li>Where the Customer\'s Goods have been assessed as non-restorable, Steamatic will provide notice to the Customer\n        requesting the Customer\n        either collect or accept delivery of the Goods where practicable and pay the relevant charges, or seek the\n        Customer\'s authority to dispose\n        of the non-restorable Goods.</li>\n      <li>Storage charges will continue to accrue on non-restorable Goods until the Customer either arranges for\n        collection or delivery of\n        the non-restorable Goods or authorizes Steamatic to dispose of the non-restorable Goods.</li>\n      <li>The Customer acknowledges that where Steamatic does not receive notice referred to in clause 7.5,\n        Steamatic will dispose of the Goods as provided for under the <i>Australian Consumer Law and {{FTA}} (Fair\n          Trading Act)</i>.</li>\n      <li>Costs incurred by Steamatic in storing the Goods, and in disposing of the Goods will be payable by the\n        Customer in accordance with the <i>Fair Trading Act</i>.</li>\n    </ol>\n  </li>\n\n  <li><u>The Customer\'s obligations</u>\n    <ol>\n      <li>The Customer will:\n        <ol>\n          <li>Provide Steamatic with access to the site for purposes of providing the Services detailed in this\n            Contract; and,</li>\n          <li>At all times provide a safe working environment in accordance with the <i>{{WHSA}}</i> or the equivalent\n            legislation in the State or Territory in which the Services are performed; and,</li>\n          <li>Provide adequate facilities at the site at no cost to Steamatic, including but not limited to parking,\n            water, toilets and power; and,</li>\n          <li>Advise Steamatic if the value of any one Good has a value in excess of $10,000.00.</li>\n        </ol>\n      </li>\n      <li>Where Steamatic removes Goods from the Customer\'s premises for either assessment, restoration or storage as\n        part of the Services, it is the Customer\'s responsibility to inform their Insurer that covered Goods are\n        temporarily relocated and ensure that the insurance policy will continue to apply to the relocated Goods.</li>\n      <li>The Customer releases and indemnifies Steamatic against any claims of whatsoever nature (including costs and\n        interest) and consequential loss and damage (including claims by third parties) for:\n        <ol>\n          <li>scuffing and other marking to surrounding areas outside the Service area; and,</li>\n          <li>loss or damage to a single item of an otherwise incomplete set, where Steamatic\'s responsibility is\n            limited to replacing the lost or damaged item; and,</li>\n          <li>damage to Goods in transit, where Goods damaged by an Event require transportation, and transit results in\n            damage, or previously undetected damage becoming evident; and,</li>\n          <li>any electronic or mechanical malfunction occasioned by the transportation of the Goods; and,</li>\n          <li>damage and disappearance of images in cases of restoration of thermographic paper; and,</li>\n          <li>non-event related mould damage to other areas of the site not specifically forming part of the areas\n            treated under the Services; and,</li>\n          <li>occurrence of secondary damage, such as mould or bacteria growth as a result of recommended irradiation\n            services not being taken up by the Customer; and,</li>\n          <li>missing inventory items where the Customer does not confirm contents of inventory prior to the inventory\n            items being transported off-site by Steamatic as part of the Services; and,</li>\n          <li>For the purposes of this sub-clause 8.3 in transit and transportation are taken to include loading and\n            unloading.</li>\n        </ol>\n      </li>\n      <li>The Customer releases and indemnifies Steamatic of any claim or cause of action of whatsoever nature including\n        consequential loss where:\n        <ol>\n          <li>the repair of Goods capable of retaining user-generated data has resulted in a loss of the data; and,</li>\n          <li>commissioning or decommissioning of equipment has caused secondary damage; and,</li>\n          <li>containment of a site has been established by Steamatic which is then breached by an unauthorized person.\n          </li>\n        </ol>\n      </li>\n      <li>The Customer acknowledges that it is not the responsibility of Steamatic to:\n        <ol>\n          <li>re-install electrical equipment such as televisions, refrigerators, audio and sound equipment and the\n            like; and,</li>\n          <li>warranty any floor covering on concrete floors which have not been dried adequately.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Warranty and Claims (Commercial Customers)</u>\n    <ol>\n      <li>The Customer must inspect Services provided under this Contract within 7 days of completion of the Works.\n        Where the Customer believes that the Services provided are defective, the Customer must give written notice to\n        Steamatic of the particulars of the alleged defects within a further 14 days.\n        <ol>\n          <li>If on inspection Steamatic accepts the defects as being a result of Steamatic failing to provide the\n            Services in accordance with its obligation under this Contract then Steamatic will rectify the Services.\n          </li>\n          <li>Where Steamatic cannot rectify the Services, Steamatic will refund the amount paid by the Customer for the\n            Services that cannot be rectified.</li>\n        </ol>\n      </li>\n\n      <li>Steamatic has no obligation to rectify any Services where it does not receive written notice of the defect\n        within 21 days of completion of the Services. Notwithstanding the warranty claim, the Customer will remain\n        liable to pay Steamatic\'s charges under this Contract.</li>\n      <li>The Customer agrees that Steamatic is not liable under this clause to the extent that any defect or damage to\n        the Goods arises out of the Customer\'s negligence, fault, neglect, abuse, incorrect use of the Goods or as a\n        result of vandalism, fire, water damage, or any other circumstance outside of Steamatic\'s control.</li>\n      <li>Notwithstanding anything in this clause, Steamatic can elect to reimburse the Customer the cost of the\n        Services in full and complete discharge of its obligations to the Customer under this warranty.</li>\n    </ol>\n  </li>\n\n  <li><u>Best Endeavours</u>\n    <ol>\n      <li>In the event that Goods restored or repaired by Steamatic under this Contract fail within 12 months of\n        Steamatic\'s restoration or repair, Steamatic agrees to restore or repair the Goods to pre-loss condition, but\n        where this is deemed as not practicable by Steamatic due to commercial and economic factors, then Steamatic will\n        refund the amount paid by the Customer for the Services in respect of those Goods incapable of restoration.</li>\n      <li>Subject to Steamatic using its best endeavours in accordance with sub-clause 10.2 Steamatic is not liable for\n        any loss or damage including any consequential loss or damage arising out of the failure to restore or repair\n        the Goods to its pre-loss condition.</li>\n    </ol>\n  </li>\n\n  <li><u>Warranty \u2013 Consumer Services Only</u>\n    <ol>\n      <li>This clause only applies if the Customer is a consumer for the purposes of the <i>Competition and Consumer Act\n          2010 (Cth) (the Act)</i>.</li>\n      <li>If the Customer is a consumer as defined in the Australian Consumer Law (ACL), the consumer guarantees apply.\n        Nothing in this Contract limits or excludes the application of the Act.</li>\n      <li>Steamatic\'s Services come with guarantees that cannot be excluded under the ACL. The Customer is entitled to a\n        refund for a major failure and for compensation for any other reasonably foreseeable loss or damage. The\n        Customer is also entitled to have the parts supplied with the Services repaired or replaced if the parts fail to\n        be of acceptable quality, and/or the Services resupplied if the Services fail to be of acceptable quality, and\n        the failure does not amount to a major failure.</li>\n      <li>The benefits to the consumer given by this warranty are in addition to other rights and remedies of the\n        consumer under applicable laws relating to the Goods or Service.</li>\n      <li>If there is a defect in the parts or Service the Customer is entitled to submit a warranty claim by providing\n        written notice and delivering it to the address shown. Any reasonable expenses incurred in transportation and\n        return of Goods will be to Steamatic\'s expense where a defect is shown to have occurred. The expenses must be\n        included in your claim.</li>\n      <li>\n        The warranty claim must provide an original or copy of the proof of purchase and where possible provide an\n        explanation of the problem the subject of the warranty claim.\n        <div class="margin-bottom-20">\n          Details for lodging the warranty claim are as follows:<br>\n          Contact Name: Service and Warranties<br>\n          Address: 10-11 Walker Street, Braeside, VIC 3195<br>\n          Phone: 03 9587 6333<br>\n          Email: admin@steamatic.com.au\n        </div>\n      </li>\n\n      <li>If the Goods are capable of retaining user-generated data, the repair of the Goods may result in a loss of the\n        data.</li>\n      <li>The following warranty periods apply:\n        <ol>\n          <li>In respect of the Services provided, a period of 12 months from completion; and,</li>\n          <li>In respect of Goods that are provided under this Contract which are new and not refurbished then the\n            manufacturer\'s warranty period applies.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Insurances of Goods removed by Steamatic</u>\n    <ol>\n      <li>Steamatic is not liable for the damage, loss, theft or any other action that may occur as a result of the\n        Customer\'s failure to obtain current insurance cover on any Goods requiring transport under this Contract.</li>\n      <li>The Customer must advise Steamatic if the monetary value of any single transportable Good is in excess of\n        Three Hundred and Fifty Thousand Dollars ($350,000).</li>\n      <li>Where any such Good is in excess of $350,000 it is the Customer\'s sole responsibility to obtain specific\n        insurance coverage for the item whilst it is in transit.</li>\n      <li>Steamatic will not cover electronic or mechanical derangement whilst in transit or loading/unloading, and will\n        not be held liable for any such alleged damages. The Customer agrees to obtain insurance cover for this\n        circumstance.</li>\n    </ol>\n  </li>\n\n  <li><u>Limitations</u>\n    <div>Notwithstanding any other terms in this Contract, the following limitations apply:</div>\n    <ol>\n      <li>All terms, conditions, representations and warranties expressed or implied by statute, the common law, equity,\n        trade, custom or usage or otherwise are expressly excluded to the maximum extent permitted by law.</li>\n      <li>Steamatic\'s liability under any warranty, expressed or implied, will be limited to re-performance of services\n        or refund of the price paid under this Contract. Steamatic will not be liable for replacement cost of any\n        equipment nor the reinstatement cost of any of the Customer\'s premises, nor will Steamatic be responsible for\n        damages related to loss of use of the Customer\'s premises or equipment or any other consequential damage.</li>\n      <li>Steamatic\'s liability to the Customer, whether for any breach of the Contract or for negligence or any other\n        tort or otherwise, will not in any event exceed the price paid by the Customer for the work performed.</li>\n    </ol>\n  </li>\n\n  <li><u>Force Majeure</u>\n    <div>Neither party will be liable for any breach of this Contract arising from any circumstance beyond that party\'s\n      reasonable control or the control of that party\'s employees, contractors, sub-contractors and officers, including\n      but not limited to, natural disasters, military operations, acts of war, terrorism, civil commotion, strikes, acts\n      or omissions of government, malicious damage, or shortages or delays in delivery by a third party of any goods or\n      services.</div>\n  </li>\n\n  <li><u>Entire Agreement</u>\n    <div>The Contract and any written variation in accordance with clause 3 comprises the complete agreement of the\n      parties in respect of the Services to be performed. No engagements, promises, representations, or warranties have\n      been made by either party except as is expressly stated in this Contract, and/or the parties hereby expressly\n      disclaim all implied warranties.</div>\n  </li>\n\n  <li><u>Other</u>\n    <ol>\n      <li>Steamatic\'s rights pursuant to this Contract are cumulative and additional to any other rights Steamatic may\n        have whether express or implied by contract or by law.</li>\n      <li>No delay or failure by Steamatic to enforce any of its rights under this Contract will amount to a waiver of\n        that right. Any waiver by Steamatic of any term or breach of this Contract is not to be taken as a continuing\n        waiver, and is capable of being revoked at the discretion of Steamatic and such a waiver by Steamatic will not\n        prejudice Steamatic\'s rights in respect of any subsequent breach of this Contract by the Customer.</li>\n      <li>The Customer will not be entitled to off-set any amount whatsoever against Steamatic notwithstanding any\n        default or alleged default by Steamatic under this Contract or any other agreement or contract.</li>\n      <li>If any term or provision in this Contract will in whole or in part be held to any extent to be illegal or\n        unenforceable under any enactment or rule of law that term or provision or part will be excluded from this\n        Contract and the enforceability of the remainder of this Contract will not be affected.</li>\n      <li>Time is of the essence in respect of anything that needs to be done by the Customer pursuant to this Contract.\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Privacy</u>\n    <div>Please refer to our privacy statement on our website, Steamatic.com.au.</div>\n  </li>\n\n  <li><u>Jurisdiction</u>\n    <div>This Contract is governed by the laws of Victoria. Each party irrevocably submits to the non-exclusive\n      jurisdiction of the Courts of Victoria.</div>\n  </li>\n</ol>\n';function aY(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return aY=function(){return e},e}var oY=x.default.div(aY()),iY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.addContract=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,a=r.match,o=r.job.data,e.setState({loading:!0,creating:!0}),n.prev=2,n.next=5,rG(o.id,t.id,{contract_date:qf()().format(Dj),field_data:JSON.stringify({contract:{date:new Date}})});case 5:i=n.sent,e.props.history.push("".concat(a.url,"/").concat(i.id));case 7:return n.prev=7,e.setState({loading:!1,creating:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[2,,7,10]])})))},e.loadContractsList=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QH(JH.JOB_CONTRACT);case 2:return n=t.sent,e.setState({contracts:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),e.loadJobContracts=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.job,!(null===(n=r.data)||void 0===n?void 0:n.id)){t.next=7;break}return t.next=4,$H(e.props.job.data.id,JH.JOB_CONTRACT);case 4:return a=t.sent,e.setState({jobContracts:a}),t.abrupt("return",a);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),e._loadJobContracts=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContracts();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContracts=_v()(e._loadJobContracts,100),e.onContractDelete=function(t){var n=e.state.jobContracts;e.setState({jobContracts:null===n||void 0===n?void 0:n.filter((function(e){return e.id!==t.id}))})},e.beforeContractSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(r,a){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.validate(r,a,e.props.user));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t,n;((null===(t=e.job.data)||void 0===t?void 0:t.id)!==(null===(n=this.props.job.data)||void 0===n?void 0:n.id)||e.match.params.contract_id&&!this.props.match.params.contract_id)&&this.debouncedLoadJobContracts()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params,t=e.id,n=e.contract_id;return n?Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)(Uf.b,{to:"/job/".concat(t,"/details"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Details"})}),n&&Object(a.jsx)(Uf.b,{to:"/job/".concat(t,"/job-contract"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Contracts"})})]}):null}},{key:"renderContentPage",value:function(){var e=this,t=this.props,r=t.job,o=t.contacts,i=t.match.params.contract_id,c=this.state,s=c.loading,l=c.creating,u=c.contracts,d=c.jobContracts;return Object(a.jsx)(oY,{className:"h-100 d-flex flex-column",children:r.data&&o.data?Object(a.jsxs)(a.Fragment,{children:[s&&Object(a.jsx)(av,{size:40}),i?Object(a.jsx)(oY,{className:"h-100",children:Object(a.jsx)(HG,{type:JH.JOB_CONTRACT,job:r.data,jobContacts:o.data,defaultTemplate:rY,beforeSubmit:this.beforeContractSubmit,beforeSign:n.validateSignatureMeta,defaultMeta:{contact:{full_name:"",email:""},contract:{cost:"",gst:10}},contractId:+i})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"px-5 my-4 d-flex align-items-center",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:"Job Contracts"})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end print-hide",children:Object(a.jsxs)(QG.e,{children:[Object(a.jsxs)(QG.h,{caret:!0,color:"primary",className:"position-relative",disabled:!u||l,children:[(!u||l)&&Object(a.jsx)(av,{size:30}),"Add New"]}),Object(a.jsx)(QG.g,{basic:!0,right:!0,children:null===u||void 0===u?void 0:u.map((function(t){return Object(a.jsx)(QG.f,{onClick:e.addContract(t),children:t.name},t.id)}))})]})})]}),Object(a.jsx)(oY,{className:"flex-grow-1 h-100 px-3 pb-3",children:Object(a.jsx)(nY,{job:r.data,data:d||[],onDelete:this.onContractDelete})})]})]}):Object(a.jsx)(av,{size:40})})}},{key:"render",value:function(){return Object(a.jsx)(HH,{customHeaderTitle:"Job Contracts",sidebar:!1,contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent);iY.validate=function(e,t,n){var r={name:"contact.full_name",email:"contact.email",cost:"contract.cost",date:"contract.date",gst:"contract.gst",email_send_to:"email.send.to"},a={};j.a.forEach(r,(function(t,n){a[n]=j.a.get(e,t),j.a.isString(a[n])&&(a[n]=a[n].trim())}));var o={};return n&&(a.name||j.a.set(o,r.name,"This field is required"),a.email?jv(a.email)&&j.a.set(o,r.email,"Email format is not correct"):j.a.set(o,r.email,"This field is required"),a.email_send_to?jv(a.email_send_to)&&j.a.set(o,r.email_send_to,"Email format is not correct"):j.a.set(o,r.email_send_to,"This field is required"),a.cost||j.a.set(o,r.cost,"This field is required"),a.gst||j.a.set(o,r.gst,"This field is required"),a.date?qf()(a.date).isValid()||j.a.set(o,r.date,"Date format is not correct"):j.a.set(o,r.date,"This field is required")),!!j.a.isEmpty(o)||o},iY.validateSignatureMeta=function(e,t,n,r){var a={name:"signature."+e+".meta.full_name"},o={};j.a.forEach(a,(function(e,n){o[n]=j.a.get(t,e),j.a.isString(o[n])&&(o[n]=o[n].trim())}));var i={};return o.name||j.a.set(i,a.name,"This field is required"),!!j.a.isEmpty(i)||i};var cY=Object(LO.compose)(v.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(iY),sY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.jobContract,r=t.jobContract.meta,o=t.bindings;t.cancel;return n.status===zH.CANCELED?null:Object(a.jsx)("div",{className:"p-3 min-h-100",style:{backgroundColor:y.gray1,border:"1px solid ".concat(y.gray2)},children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Customer Details:"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(SG,Object(c.a)(Object(c.a)({},this.props),{},{name:"email.send.to",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",disabled:n.status!==zH.NEW})}))})]}),Object(a.jsx)("hr",{}),n.status===zH.NEW&&Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:o.submitContract,children:"Send"})})}),n.status!==zH.NEW&&Object(a.jsxs)("div",{className:"text-muted margin-top-5",children:["Sent at ",qf()((null===r||void 0===r||null===(e=r.email)||void 0===e?void 0:e.sent_at)||n.created_at).format(Uj)," "]})]})})}}]),n}(wG),lY=function(e){var t,n,r,a,o,i,s,l;return Object(c.a)(Object(c.a)({},e),{},{flooring_type_id:(null===(t=e.flooring_type)||void 0===t?void 0:t.id)||null,flooring_subtype_id:(null===(n=e.flooring_subtype)||void 0===n?void 0:n.id)||null,non_restorable_reason_id:(null===(r=e.non_restorable_reason)||void 0===r?void 0:r.id)||null,carpet_type_id:(null===(a=e.carpet_type)||void 0===a?void 0:a.id)||null,carpet_age_id:(null===(o=e.carpet_age)||void 0===o?void 0:o.id)||null,carpet_face_fibre_id:(null===(i=e.carpet_face_fibre)||void 0===i?void 0:i.id)||null,underlay_type_id:(null===(s=e.underlay_type)||void 0===s?void 0:s.id)||null,carpet_construction_type_id:(null===(l=e.carpet_construction_type)||void 0===l?void 0:l.id)||null,job:void 0,flooring_type:void 0,flooring_subtype:void 0,non_restorable_reason:void 0,carpet_type:void 0,carpet_age:void 0,carpet_face_fibre:void 0,underlay_type:void 0,carpet_construction_type:void 0,params:void 0})},uY=function(e){return Object(c.a)(Object(c.a)({},e),{},{group_at:e.group_at?Wj(qf()(e.group_at),!0):void 0})},dY=function(e){if(e&&(e.temp||e.rh)){var t=1.8*(e.temp||0)+32;return 4353.86/(29.92/((e.rh||0)/100*Math.exp(17.863-9621/(t+460)))-1)}return null},pY=function(e){var t=dY(e);return null!==t?t/7:null},hY=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{trade_id:(null===(t=e.trade)||void 0===t?void 0:t.id)||e.trade,trade:void 0,job:void 0,created_by:void 0})},bY=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{area_manager_user_id:null===(t=e.area_manager)||void 0===t?void 0:t.id,job:void 0,area_manager:void 0})},fY=function(e){return Object(c.a)(Object(c.a)({},e),{},{secondary_damage:e.secondary_damage?"1":"0",area_manager_contacted:e.area_manager_contacted?"1":"0",heavy_furniture:e.heavy_furniture?"1":"0",truck_required:e.truck_required?"1":"0",disposal:e.disposal?parseFloat(e.disposal):null,area_manager:e.area_manager_user,area_manager_user:void 0})},mY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/rooms"),lY(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/jobs/".concat(t,"/rooms/").concat(n),lY(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),vY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/rooms/").concat(n,"/duplicate"),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),OY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/jobs/".concat(t,"/rooms/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/jobs/".concat(t,"/rooms")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/readings"),uY(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),yY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/jobs/".concat(t,"/readings")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/moisture-areas"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_Y=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/jobs/".concat(t,"/moisture-areas/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/jobs/".concat(t,"/moisture-areas/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),SY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/jobs/".concat(t,"/moisture-areas")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),CY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/jobs/surface-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),NY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/flooring-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),EY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/flooring-subtypes",Object(c.a)({flooring_type_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),AY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/carpet-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),TY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/carpet-ages",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),IY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/carpet-construction-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/carpet-face-fibres",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/underlay-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),MY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/assessment-reports/non-restorable-reasons",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),PY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/work_categories",Object(c.a)({service_id:t},n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),LY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/works"),Object(c.a)({job_room_id:n},r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),FY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/works/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),UY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/jobs/".concat(t,"/works/search"),Object(c.a)({job_room_id:n},r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),VY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/jobs/".concat(t,"/works/").concat(n),{job_room_id:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),BY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/jobs/".concat(t,"/works/bulk"),{job_room_id:r,job_work_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),JY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.post("/v1/jobs/".concat(t,"/works/copy-to-room"),{from_room_id:n,to_room_id:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),zY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/works",{work_category_id:t,service_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("/v1/work_groups/search",Object(c.a)({job_service_id:t,floor_type_id:n},r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),WY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/rooms/").concat(n,"/floor-plan"),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),HY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/services",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GY=function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/trades");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),YY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/third-party-trades"),hY(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),QY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/jobs/".concat(t,"/third-party-trades/").concat(n),hY(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),KY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/jobs/".concat(t,"/third-party-trades/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ZY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/third-party-trades"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),XY=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/jobs/".concat(t,"/job-additional-works"),bY(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$Y=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/".concat(t,"/job-additional-works"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eQ="Steamatic/WaterForm/SET_SURFACE_TYPE",tQ="Steamatic/WaterForm/SET_FLOOR_TYPE",nQ="Steamatic/WaterForm/SET_FLOOR_SUB_TYPE",rQ="Steamatic/WaterForm/SET_CARPET_TYPE",aQ="Steamatic/WaterForm/SET_CARPET_AGES",oQ="Steamatic/WaterForm/SET_CARPET_CONSTRUCT_TYPE",iQ="Steamatic/WaterForm/SET_CARPET_FACE_FIBER",cQ="Steamatic/WaterForm/SET_UNDERLAY_TYPE",sQ="Steamatic/WaterForm/SET_NON_RESTORABLE_REASON",lQ="Steamatic/WaterForm/SET_SERVICE",uQ="Steamatic/WaterForm/SET_PRE_START_CHECK",dQ="Steamatic/WaterForm/SET_GENERAL_AUTHORITY",pQ="Steamatic/WaterForm/SET_WORK_COMPLETION",hQ="Steamatic/WaterForm/SET_TRADE",bQ={surfaceTypes:[],floorTypes:[],floorSubTypes:{},carpetTypes:[],carpetAges:[],carpetConstructTypes:[],carpetFaceFyber:[],underlayTypes:[],services:[],trades:[],nonRestroableReasons:[]},fQ=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bQ,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case eQ:return Object(c.a)(Object(c.a)({},e),{},{surfaceTypes:t.payload});case tQ:return Object(c.a)(Object(c.a)({},e),{},{floorTypes:t.payload});case nQ:return Object(c.a)(Object(c.a)({},e),{},{floorSubTypes:Object(c.a)(Object(c.a)({},e.floorSubTypes),{},Object(k.a)({},t.payload.floorTypeId,t.payload.data))});case rQ:return Object(c.a)(Object(c.a)({},e),{},{carpetTypes:t.payload});case aQ:return Object(c.a)(Object(c.a)({},e),{},{carpetAges:t.payload});case oQ:return Object(c.a)(Object(c.a)({},e),{},{carpetConstructTypes:t.payload});case iQ:return Object(c.a)(Object(c.a)({},e),{},{carpetFaceFyber:t.payload});case cQ:return Object(c.a)(Object(c.a)({},e),{},{underlayTypes:t.payload});case sQ:return Object(c.a)(Object(c.a)({},e),{},{nonRestroableReasons:t.payload});case lQ:return Object(c.a)(Object(c.a)({},e),{},{services:t.payload});case uQ:return Object(c.a)(Object(c.a)({},e),{},{preStartCheck:t.payload});case dQ:return Object(c.a)(Object(c.a)({},e),{},{generalAuthority:t.payload});case pQ:return Object(c.a)(Object(c.a)({},e),{},{workCompletion:t.payload});case hQ:return Object(c.a)(Object(c.a)({},e),{},{trades:t.payload});default:return e}},mQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.surfaceTypes.length&&!t){n.next=6;break}return n.next=4,CY(e);case 4:o=n.sent,r({type:eQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},jQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.floorTypes.length&&!t){n.next=6;break}return n.next=4,NY(e);case 4:o=n.sent,r({type:tQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},vQ=function(e,t,n){return function(){var r=Object(Um.a)(Fm.a.mark((function r(a,o){var i,c,s;return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=o(),(null===(i=c.waterForm.floorSubTypes[e])||void 0===i?void 0:i.length)&&!n){r.next=6;break}return r.next=4,EY(e,t);case 4:s=r.sent,a({type:nQ,payload:{floorTypeId:e,data:s.data}});case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},OQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetTypes.length&&!t){n.next=6;break}return n.next=4,AY(e);case 4:o=n.sent,r({type:rQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},gQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetAges.length&&!t){n.next=6;break}return n.next=4,TY(e);case 4:o=n.sent,r({type:aQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},xQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetConstructTypes.length&&!t){n.next=6;break}return n.next=4,IY(e);case 4:o=n.sent,r({type:oQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},yQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetFaceFyber.length&&!t){n.next=6;break}return n.next=4,RY(e);case 4:o=n.sent,r({type:iQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},wQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.underlayTypes.length&&!t){n.next=6;break}return n.next=4,DY(e);case 4:o=n.sent,r({type:cQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},_Q=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.nonRestroableReasons.length&&!t){n.next=6;break}return n.next=4,MY(e);case 4:o=n.sent,r({type:sQ,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},kQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.services.length&&!t){n.next=6;break}return n.next=4,HY(e);case 4:o=n.sent,r({type:lQ,payload:o});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},SQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(void 0===(o=a()).waterForm.preStartCheck||o.waterForm.preStartCheck&&o.waterForm.preStartCheck.job.id!==e.id||t)){n.next=6;break}return n.next=4,tG(e.id,JH.PRE_START_CHECK);case 4:i=n.sent,r({type:uQ,payload:i?YH(i,e):null});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},CQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(void 0===(o=a()).waterForm.generalAuthority||o.waterForm.generalAuthority&&o.waterForm.generalAuthority.job.id!==e.id||t)){n.next=6;break}return n.next=4,tG(e.id,JH.GENERAL_AUTHORITY);case 4:i=n.sent,r({type:dQ,payload:i?YH(i,e):null});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},NQ=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){var o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(void 0===(o=a()).waterForm.workCompletion||o.waterForm.workCompletion&&o.waterForm.workCompletion.job.id!==e.id||t)){n.next=6;break}return n.next=4,tG(e.id,JH.WORK_COMPLETION);case 4:i=n.sent,r({type:pQ,payload:i?YH(i,e):null});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};function EQ(){var e=Object(f.a)(["\n  input[type='radio']{\n    position: relative; top: 2px; margin-right: 5px;\n  }\n"]);return EQ=function(){return e},e}var AQ=x.default.div(EQ()),TQ="PRE_START_CHECK_FORM",IQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobContract:e.props.jobContract},e.signaturePad={},e.validateSignature=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(e,t){if(e.isEmpty())throw e.setInvalid(),n=!1,Qm(Vm.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.lockSignature=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:return t.next=6,e.uploadSignature(n);case 6:r=t.sent,n.signatures=n.signatures.concat(r);case 8:return t.prev=8,setTimeout((function(){e.setState({working:!1})}),100),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e.uploadSignature=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],j.a.forEach(e.signaturePad,(function(t,a){var o,i={field_data:JSON.stringify(j.a.get(n.meta,"signature.".concat(a,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:Jv.getContactName(e.customer),customer_email:null===(o=e.customer)||void 0===o?void 0:o.email};r.push(fG(a,t.toDataURL(),n.id,i,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(a=e.customer)||void 0===a?void 0:a.email)){t.next=13;break}return t.next=4,e._sendEmail(o,n);case 4:return t.t0=r,t.next=7,oG(n.id);case 7:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),t.abrupt("return",i);case 13:return Qm(Vm.Danger,"Customer email address is not set"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:Jv.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.abrupt("return",hG(r.id,s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.saveContract=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,o=a.user,i=a.job,c=a.dispatch,t.prev=1,s=null,t.next=13;break;case 7:s=t.sent,t.next=11;break;case 10:s=n;case 11:t.next=21;break;case 13:if(!o){t.next=20;break}return t.next=16,rG(e.props.job.id,n.template.contract.id,{field_data:JSON.stringify(r),contract_date:qf()().format(Dj)});case 16:s=t.sent,c(SQ(i,!0)),t.next=21;break;case 20:s=n;case 21:if(!s){t.next=37;break}if(o&&(s=YH(s,i)),"1"!==r.non_restoreable_floor_covering){t.next=36;break}if(!o){t.next=34;break}return t.prev=25,t.next=28,e.sendEmail(s);case 28:t.next=32;break;case 30:t.prev=30,t.t0=t.catch(25);case 32:t.next=36;break;case 34:return t.next=36,e.lockSignature(s);case 36:e.setState({jobContract:s});case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(1),console.log(t.t1);case 42:case"end":return t.stop()}}),t,null,[[1,39],[25,30]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:if(!e.state.jobContract){t.next=9;break}return t.next=7,e.saveContract(e.state.jobContract,n);case 7:t.next=14;break;case 9:return t.next=11,e.getJobContract();case 11:return r=t.sent,t.next=14,e.saveContract(r,n);case 14:return t.prev=14,e.setState({working:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,,14,17]])})));return function(e){return t.apply(this,arguments)}}(),e.getJobContract=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QH(JH.PRE_START_CHECK);case 2:return n=t.sent[0],t.next=5,ZH(n.id);case 5:return r=t.sent,t.abrupt("return",{job:e.props.job,type:JH.PRE_START_CHECK,template:r});case 7:case"end":return t.stop()}}),t)}))),e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e}return Object(l.a)(n,[{key:"extractContact",value:function(e){var t=this.props.jobContacts;return ly.extractContact(e,t)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.job,o=n.formData,i=void 0===o?{}:o,c=n.user,s=n.submitting,l=n.locked,u=this.state,d=u.working,p=u.jobContract,h=j.a.find(null===p||void 0===p?void 0:p.signatures,{type:"customer"});return Object(a.jsxs)(AQ,{children:[(s||d)&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),children:[!!c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{children:"Date of Loss:"})}),Object(a.jsx)("div",{className:"col",children:r.date_of_loss?r.date_of_loss.format(Pj):"Date not available"})]})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"pt-2",children:"Cause of Loss:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"cause_of_loss",component:SJ,validate:uv,disabled:l||!c})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"pt-2",children:"Origin of Damage:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"origin_of_damage",component:ZO,type:"text",validate:uv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Problem Source Repaired:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"source_repaired",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"},{value:"-1",label:"Not Applicable"}],disabled:l||!c})})]}),"0"===i.source_repaired&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"pt-2",children:"Comments:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"source_repaired_comments",component:SJ,validate:uv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Category:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"category_id",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"1",label:"Cat 1 (Clean)"},{value:"2",label:"Cat 2 (Grey)"},{value:"3",label:"Cat 3 (Black)"},{value:"-1",label:"N/A"}],disabled:l||!c})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Class:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"class_id",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"1",label:"Class 1"},{value:"2",label:"Class 2"},{value:"3",label:"Class 3"},{value:"4",label:"Class 4"}],disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Is Mould Damage Present?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"mould_present",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:l||!c})})]}),"1"===i.mould_present&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Is the mould damage related to the incident?"})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{children:Object(a.jsx)(yv.a,{name:"mould_present_related",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:l||!c})}),"1"===i.mould_present_related&&Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"badge badge-warning",children:"Call the office to notify of mould!"})})]})]})})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Is the Property Habitable:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"property_habitable",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"1",label:"Yes"},{value:"0",label:"No"}],disabled:l||!c})})]}),"0"===i.property_habitable&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Reason:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"property_habitable_comments",component:SJ,validate:uv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Have you pointed out any pre-existing damage?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"pre_existing_damage_notified",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"},{value:"-1",label:"Not Applicable"}],disabled:l||!c})})]}),"1"===i.pre_existing_damage_notified&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Pre-existing damages:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"pre_existing_damage_comments",component:SJ,validate:uv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Has the work plan been explained to the customer as per below scope?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"work_plan_notified",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"},{value:"-1",label:"Not Applicable"}],disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Has non-restorable floor covering been identified on the premises?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"non_restoreable_floor_covering",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],onChange:function(e){"0"===e.target.value&&delete t.signaturePad.customer},disabled:l||!c})})]}),"1"===i.non_restoreable_floor_covering&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Non-Restorable Areas:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"non_restoreable_floor_covering_comments",component:SJ,disabled:l||!c})})]})]})]}),(!c||h)&&"1"===i.non_restoreable_floor_covering&&Object(a.jsxs)("section",{children:[!!c&&Object(a.jsx)("hr",{className:""}),!c&&i.non_restoreable_floor_covering_comments&&Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{className:"mr-3",children:"Non-Restorable Areas:"}),i.non_restoreable_floor_covering_comments]}),Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Customer Signature for Non-Restorable Floor Covering:"})}),Object(a.jsx)("p",{children:"I acknowledge that the list of non-restorable floor coverings is complete and accurate and if indicated will be removed from the property to process as per the Scope of Work."}),Object(a.jsx)("p",{children:"Authority is hereby given to Steamatic to remove the affected Non-Restorable Floor Covering(s) for disposal, knowing that the Non-Restorable Floor Covering(s) may not be replaced/covered by my Insurance Company or Steamatic."}),Object(a.jsxs)("div",{style:{maxWidth:"400px",margin:"auto"},children:[Object(a.jsx)(MG,{job:r,jobContract:p,bindings:{},type:"customer",onSignatureRender:this.onSignatureRender}),h&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Signed At: "}),qf()(h.created_at).format(Uj)]})]})]}),!l&&c&&!h&&"1"===i.non_restoreable_floor_covering&&"1"===(null===p||void 0===p||null===(e=p.meta)||void 0===e?void 0:e.non_restoreable_floor_covering)&&(null===p||void 0===p?void 0:p.id)&&Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("p",{className:"text-center",children:Object(a.jsx)("a",{href:"/external/job/contract/".concat(p.hash),target:"_blank",className:"btn btn-outline-primary",children:"Get Customer Signature"})})]}),!l&&(c||"1"===i.non_restoreable_floor_covering&&!h)&&Object(a.jsxs)("section",{className:"print-hide",children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:s||d,children:["Save ",(s||d)&&Object(a.jsx)(av,{size:20})]})})]})]})]})}},{key:"customer",get:function(){return this.extractContact(Tj.CUSTOMER)}}]),n}(p.PureComponent),RQ=Object(LO.compose)(Object(Gj.a)({form:TQ,enableReinitialize:!0,onSubmitFail:function(e){Qm(Vm.Danger,"There are validation errors")}}),v.g,Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me,formData:Object(eM.a)(TQ)(e)}})))(IQ);function DQ(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return DQ=function(){return e},e}var MQ=x.default.div(DQ()),PQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(MQ,{className:"h-100 d-flex flex-column",children:this.props.children})}}]),n}(p.Component),LQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.job,r=e.contacts,o=e.preStartCheck,i=e.locked;return Object(a.jsx)(PQ,{children:t.data&&r.data&&void 0!==o?Object(a.jsxs)("div",{className:"pr-4 pb-4",children:[Object(a.jsx)("h3",{className:"mb-5",children:Object(a.jsx)("strong",{children:"Pre-Start Check"})}),Object(a.jsx)(RQ,{job:t.data,locked:i,jobContacts:r.data,jobContract:o,initialValues:(null===o||void 0===o?void 0:o.meta)||n.getDefaultValue(t.data)})]}):Object(a.jsx)(av,{size:40})})}}]),n}(p.PureComponent);LQ.getDefaultValue=function(e){return{cause_of_loss:e.cause_of_loss,source_repaired:"0",category_id:"1",class_id:"1",mould_present:"0",property_habitable:"1",pre_existing_damage_notified:"0",work_plan_notified:"0",non_restoreable_floor_covering:"0"}};var FQ=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,preStartCheck:e.waterForm.preStartCheck,contacts:e.currentJobContacts}})))(LQ);function UQ(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return UQ=function(){return e},e}var VQ,BQ,JQ,zQ=x.default.div(UQ());(BQ=VQ||(VQ={}))[BQ["pre-start-check"]=JH.JOB_FORM_PRE_START_CHECK]="pre-start-check",BQ[BQ["work-completion"]=JH.JOB_FORM_WORK_COMPLETION]="work-completion",BQ[BQ.inventory=JH.JOB_FORM_CONTENTS_INVENTORY]="inventory",function(e){e["pre-start-check"]="Non-Restorable Floor Covering",e["work-completion"]="Statement of Work Complete",e.inventory="Contents Inventory"}(JQ||(JQ={}));var qQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.addContract=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,a=r.match,o=r.job.data,e.setState({loading:!0,creating:!0}),n.prev=2,n.next=5,rG(o.id,t.id,{contract_date:qf()().format(Dj),field_data:JSON.stringify({contract:{date:new Date}})});case 5:i=n.sent,e.props.history.push("".concat(a.url,"/").concat(i.id));case 7:return n.prev=7,e.setState({loading:!1,creating:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[2,,7,10]])})))},e.loadContractsList=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.form_type,t.next=3,QH(VQ[n]);case 3:return r=t.sent,e.setState({contracts:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),e.loadJobContracts=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.job,o=r.match.params.form_type,!(null===(n=a.data)||void 0===n?void 0:n.id)){t.next=7;break}return t.next=4,$H(e.props.job.data.id,VQ[o]);case 4:return i=t.sent,e.setState({jobContracts:i}),t.abrupt("return",i);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),e._loadJobContracts=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContracts();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContracts=_v()(e._loadJobContracts,100),e.onContractDelete=function(t){var n=e.state.jobContracts;e.setState({jobContracts:null===n||void 0===n?void 0:n.filter((function(e){return e.id!==t.id}))})},e.beforeContractSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(r,a){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.validate(r,a,e.props.user));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t,n,r=this,a=this.props,o=a.match.params,i=o.form_type,c=o.contract_id,s=a.job,l=e.match.params,u=l.form_type,d=l.contract_id,p=e.job;i!==u?(this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){r.setState({loading:!1})}))):((null===(t=p.data)||void 0===t?void 0:t.id)!==(null===(n=s.data)||void 0===n?void 0:n.id)||d&&!c)&&this.debouncedLoadJobContracts()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params,t=e.id,n=e.contract_id,r=e.form_type;return n?Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)(Uf.b,{to:"/job/".concat(t,"/details"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Details"})}),n&&Object(a.jsx)(Uf.b,{to:"/job/".concat(t,"/job-form/").concat(r),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Forms"})})]}):null}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,r=e.contacts,o=e.match.params,i=o.contract_id,c=o.form_type,s=this.state,l=s.loading,u=s.creating,d=s.contracts,p=s.jobContracts,h=VQ[c],b=JQ[c];return Object(a.jsx)(zQ,{className:"h-100 d-flex flex-column",children:t.data&&r.data?Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(av,{size:40}),i?Object(a.jsx)(zQ,{className:"h-100",children:Object(a.jsx)(HG,{type:h,job:t.data,jobContacts:r.data,beforeSubmit:this.beforeContractSubmit,beforeSign:n.validateSignatureMeta,defaultMeta:this.defaultMeta,contractId:+i,Sidebar:sY})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"px-5 my-4 d-flex align-items-center",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:b})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end print-hide",children:Object(a.jsxs)("button",{className:"btn btn-primary position-relative",disabled:!(null===d||void 0===d?void 0:d.length),onClick:this.addContract(null===d||void 0===d?void 0:d[0]),children:[(!d||u)&&Object(a.jsx)(av,{size:30}),"Add New"]})})]}),Object(a.jsx)(zQ,{className:"flex-grow-1 h-100 px-3 pb-3",children:Object(a.jsx)(nY,{job:t.data,data:p||[],onDelete:this.onContractDelete})})]})]}):Object(a.jsx)(av,{size:40})})}},{key:"render",value:function(){return Object(a.jsx)(HH,{customHeaderTitle:"Job Forms",sidebar:!1,contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}},{key:"defaultMeta",get:function(){var e=this.props,t=e.job,n=e.match.params.form_type;switch(VQ[n]){case JH.JOB_FORM_PRE_START_CHECK:return Object(c.a)(Object(c.a)({},LQ.getDefaultValue(t.data)),{},{non_restoreable_floor_covering:"1"})}}}]),n}(p.PureComponent);qQ.validate=function(e,t,n){var r={email_send_to:"email.send.to"},a={};j.a.forEach(r,(function(t,n){a[n]=j.a.get(e,t),j.a.isString(a[n])&&(a[n]=a[n].trim())}));var o={};return n&&(a.email_send_to?jv(a.email_send_to)&&j.a.set(o,r.email_send_to,"Email format is not correct"):j.a.set(o,r.email_send_to,"This field is required")),!!j.a.isEmpty(o)||o},qQ.validateSignatureMeta=function(e,t,n,r){if(r.type===JH.JOB_FORM_WORK_COMPLETION){var a={satisfied:"signature."+e+".meta.satisfied",acknowledged:"signature."+e+".meta.acknowledged",responsible_party:"signature."+e+".meta.responsible_party",agent_relation:"signature."+e+".meta.agent_relation",agent_name:"signature."+e+".meta.agent_name"},o={};j.a.forEach(a,(function(e,n){o[n]=j.a.get(t,e),j.a.isString(o[n])&&(o[n]=o[n].trim())}));var i={};return o.satisfied||j.a.set(i,a.satisfied,"This field is required"),o.acknowledged||j.a.set(i,a.acknowledged,"This field is required"),o.responsible_party||j.a.set(i,a.responsible_party,"This field is required"),o.agent_name||j.a.set(i,a.agent_name,"This field is required"),"agent"!==o.responsible_party||o.agent_relation||j.a.set(i,a.agent_relation,"This field is required"),!!j.a.isEmpty(i)||i}return!0};var WQ=Object(LO.compose)(v.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(qQ);function HQ(){var e=Object(f.a)(["\n  min-height: 100%;\n"]);return HQ=function(){return e},e}function GQ(){var e=Object(f.a)(["\n  position: relative;\n"]);return GQ=function(){return e},e}var YQ=x.default.div(GQ()),QQ=x.default.div(HQ()),KQ=function(e){return"true"===qm.parse(e.search,{ignoreQueryPrefix:!0}).contacts},ZQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobInvoices:null},e.getJobInvoices=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!+(n=e.props.match.params.id)){t.next=6;break}return t.next=4,QU.getAll({job_id:n});case 4:r=t.sent,e.setState({jobInvoices:r.data});case 6:case"end":return t.stop()}}),t)}))),e.isCreateNewJob=function(){return"new"===e.props.match.params.id.toLowerCase()},e.isTemplated=function(){var t=e.props.job.data;return ly.isEmailTemplate(t)},e.fetchJob=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=e.props.match.params.id;return e.isCreateNewJob()?Promise.resolve(!0):Promise.all([e.props.dispatch(QR(r,n)),e.props.dispatch(zP(r,n))]).then((function(n){var r=Object(w.a)(n,1)[0];um.status("Job "+ly.getJobName(r)),t&&e.props.dispatch(Object(xv.b)(PP,e.props.job.data))}))},e.debouncedFetchJob=Object(m.debounce)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.fetchJob(t,!0)}),500),e.joinJobChannels=function(){var t=e.props,n=t.match,r=t.user,a=n.params.id;um.status("Job #".concat(a)),aj().private("job-".concat(a)).listen(".job.updated",(function(t){r.id!==t.notification.sender.id&&e.debouncedFetchJob(!0)}))},e.redirectToNotes=function(){e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?note=true"))},e.redirectToReply=function(){e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?reply=true"))},e.toggleContacts=function(){var t=e.props,n=t.history,r=t.location,a=t.match,o=qm.stringify({contacts:!KQ(r)});n.push("/job/".concat(a.params.id,"/details?").concat(o))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e;(this.joinJobChannels(),this.isCreateNewJob())?(null===(e=this.props.job.data)||void 0===e?void 0:e.id)&&(this.props.dispatch(KR()),this.props.dispatch(qP())):(this.fetchJob(),this.getJobInvoices())}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.id;aj().leave("job-".concat(e)),um.reset()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.id,n=e.match.params.id;t!==n&&(aj().leave("job-".concat(n)),this.joinJobChannels(),this.isCreateNewJob()?(this.props.dispatch(KR()),this.props.dispatch(qP())):(this.fetchJob(),this.getJobInvoices()))}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getJobsMenuItems",value:function(){return[{path:"/jobs/inbox",icon:Ef.DrawerOpen,isActive:this.isActive("/jobs/inbox"),hint:"Inbox"},{path:"/jobs/mine",icon:Ef.Hand,isActive:this.isActive("/jobs/mine"),hint:"Mine"},{path:"/jobs/all",icon:Ef.ManCircle,isActive:this.isActive("/jobs/all"),hint:"All active jobs"},{path:"/jobs/closed",icon:Ef.Archive,isActive:this.isActive("/jobs/closed"),hint:"Closed"}]}},{key:"getJobsSubmenuItems",value:function(){if(this.props.job.loading)return[];var e=this.props.match.params.id;return this.isCreateNewJob()||this.isTemplated()?[{path:"/job/".concat(e,"/details"),label:"Job Details",isActive:this.isActive("/job/".concat(e,"/details"))}]:[{path:"/job/".concat(e,"/details"),label:"Job Details",isActive:this.isActive("/job/".concat(e,"/details"))},{path:"/job/".concat(e,"/notes-and-replies"),label:"Notes and Replies",isActive:this.isActive("/job/".concat(e,"/notes-and-replies"))},{path:"/job/".concat(e,"/schedule-and-tasks"),label:"Schedule & Tasks",isActive:this.isActive("/job/".concat(e,"/schedule-and-tasks"))},{path:"/usage-and-actuals/".concat(e),label:"Job Costings",isActive:this.isActive("/usage-and-actuals/".concat(e))},{path:"/job/".concat(e,"/storage-and-inventory"),label:"Storage & Inventory",isActive:this.isActive("/job/".concat(e,"/storage-and-inventory")),removed:!0},{path:"/job/".concat(e,"/site-survey"),label:"Site Survey",isActive:this.isActive("/job/".concat(e,"/site-survey"))},{path:"/job/".concat(e,"/photos"),label:"Photos",isActive:this.isActive("/job/".concat(e,"/photos"))},{path:"/job/".concat(e,"/documents"),label:"Documents",isActive:this.isActive("/job/".concat(e,"/documents"))},{path:"/jobs/".concat(e,"/water-form"),label:"Water Form",isActive:this.isActive("/jobs/".concat(e,"/water-form"))},{header:"Job Forms",path:"/job/".concat(e,"/job-form/pre-start-check"),label:"Non-Restorable Floor Covering",isActive:this.isActive("/job/".concat(e,"/job-form/pre-start-check"))},{path:"/job/".concat(e,"/job-form/inventory"),label:"Contents Inventory",isActive:this.isActive("/job/".concat(e,"/job-form/inventory"))},{path:"/job/".concat(e,"/job-form/work-completion"),label:"Work Complete",isActive:this.isActive("/job/".concat(e,"/job-form/work-completion"))},{header:"On-Site Data & Contracts",path:"/job/".concat(e,"/general-authority"),label:"General Authority",isActive:this.isActive("/job/".concat(e,"/general-authority"))},{path:"/job/".concat(e,"/job-contract"),label:"Job Contracts",isActive:this.isActive("/job/".concat(e,"/job-contract"))}].filter((function(e){return!e.removed}))}},{key:"renderReferenceBarContacts",value:function(){return this.props.contacts.data?this.props.contacts.data.map((function(e,t){return Object(a.jsx)(UR,{contact:e},"cnt-".concat(e.type,"-").concat(t))})):null}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.job,o=r.data,i=r.loading,c=t.currentJobPhotos.selectedPhotos,s=t.currentJobDocuments.selectedDocuments,l=o,u=this.isCreateNewJob(),d=l&&(this.isActive("/job/".concat(l.id,"/job-contract/:contract_id"))||this.isActive("/job/".concat(l.id,"/job-form/:type/:contract_id"))),p=l&&(d||this.isActive("/job/".concat(l.id,"/general-authority"))||this.isActive("/job/".concat(l.id,"/job-contract"))||this.isActive("/job/".concat(l.id,"/job-form")));return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(eS,{items:this.getJobsMenuItems()}),!d&&Object(a.jsx)(dR,{items:this.getJobsSubmenuItems()}),Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)("div",{className:"flex-grow-1 h-100",children:Object(a.jsx)(uC,{className:"h-100",children:Object(a.jsxs)(QQ,{className:"d-flex flex-row min-100 ".concat(p?"h-100":""),children:[Object(a.jsxs)(YQ,{className:"d-flex flex-column flex-grow-1",children:[e.isBlockingLoading&&Object(a.jsx)(av,{zIndex:200,size:40,color:y.white}),l&&!u&&!p&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ZU,{onNoteAdd:e.redirectToNotes,onEmailReply:e.redirectToReply,onContactsToggle:e.toggleContacts,onUpdate:e.debouncedFetchJob,job:l,jobInvoices:e.state.jobInvoices}),Object(a.jsx)(dV,{job:l,disabled:!t.has(Dw.JOBS_MANAGE_TAGS),loading:i})]}),Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/details"),component:GP}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/notes-and-replies"),component:sP}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/schedule-and-tasks"),component:zz}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/site-survey"),component:IF}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/photos"),component:SB}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/documents"),component:Eq}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/general-authority"),component:YG}),Object(a.jsx)(v.b,{path:"".concat(n.path,"/job-contract/:contract_id?"),component:cY}),Object(a.jsx)(v.b,{path:"".concat(n.path,"/job-form/:form_type?/:contract_id?"),component:WQ}),Object(a.jsx)(v.a,{to:"".concat(n.url,"/notes-and-replies")})]})]}),!p&&Object(a.jsxs)(fR,{children:[i&&Object(a.jsx)(av,{size:40,color:y.gray1}),l&&!e.isCreateNewJob()&&0===c.length&&0===s.length&&Object(a.jsxs)(a.Fragment,{children:[e.renderReferenceBarContacts(),Object(a.jsx)(XD,{job:l,contacts:e.props.contacts.data||[],onUpdate:e.debouncedFetchJob}),l.previous_jobs.length>0&&Object(a.jsx)($D,{items:l.previous_jobs}),Object(a.jsx)(NR,{financials:{}})]}),l&&c.length>0&&Object(a.jsx)(LB,{job:l}),l&&s.length>0&&Object(a.jsx)(Uq,{job:l})]})]})})})}})]},n.params.id)}},{key:"isBlockingLoading",get:function(){var e=this.props,t=e.job,n=e.match;return t.loading&&(!t.data||String(t.data.id)!==n.params.id)}}]),n}(p.Component),XQ=Object(LO.compose)(Object(b.b)((function(e){return{job:e.currentJob,contacts:e.currentJobContacts,currentJobPhotos:e.currentJobPhotos,currentJobDocuments:e.currentJobDocuments,user:e.user.me}})),v.g)(ZQ);function $Q(){var e=Object(f.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 4px;\n  background-color: ",";\n  background-image: url(",");\n  background-size: cover;\n  background-position: center;\n  margin: 0 0 0 10px;\n  text-transform: uppercase;\n  justify-content: center;\n  display: flex;\n  align-items: center;\n  color: ",";\n  overflow: hidden;\n  position: relative;\n  cursor: ",";\n\n  > input {\n    opacity: 0;\n    cursor: pointer;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n"]);return $Q=function(){return e},e}var eK=x.default.label($Q(),y.green0,(function(e){return e.backgroundImage}),y.white,(function(e){return e.active?"pointer":"unset"})),tK=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onClick=function(){var t=e.props,n=t.history,r=t.user;r.me&&n.push("/manage/user/".concat(r.me.id))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user;return Object(a.jsx)(Cw.Consumer,{children:function(n){var r=n.has(Dw.USERS_VIEW);return Object(a.jsx)(eK,{backgroundImage:t.me&&t.me.avatar&&t.me.avatar.url,active:r,onClick:r?e.onClick:void 0,children:t.me&&!t.me.avatar&&"".concat((t.me.first_name||" ")[0]).concat((t.me.last_name||" ")[0])})}})}}]),n}(p.PureComponent),nK=Object(LO.compose)(Object(b.b)((function(e){return{user:e.user}})),v.g)(tK),rK=n(567),aK=n(568),oK=n(542),iK="Steamatic/Finance/Invoices/LOAD",cK="Steamatic/Finance/Invoices/LOAD_COMPLETE",sK="Steamatic/Finance/Invoices/ERROR",lK=tS({load:iK,loadComplete:cK,reset:"Steamatic/Finance/Invoices/RESET",error:sK}),uK=function(e,t){switch(e){case Mf.draft:return QU.getDraft(t);case Mf.unpaid:return QU.getUnpaid(t);case Mf.overdue:return QU.getOverdue(t);case Mf.paid:return QU.getPaid(t);default:return QU.getAll(t)}},dK=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:iK}),n.prev=1,n.next=4,uK(e,t);case 4:a=n.sent,r({type:cK,payload:a}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r({type:sK,payload:n.t0}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},pK=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:iK}),t.prev=1,r=fK(e.type),t.next=5,QU.search({id:e.term,virtual_status:r.virtualStatus,page:e.page,status:r.status});case 5:a=t.sent,n({type:cK,payload:a}),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),n({type:sK,payload:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},hK=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:iK}),t.prev=1,t.next=4,QU.getFilterInvoices(e);case 4:r=t.sent,n({type:cK,payload:r}),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n({type:sK,payload:t.t0}),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},bK=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:iK}),t.prev=1,r=fK(e.type),t.next=5,QU.search({virtual_status:r.virtualStatus,page:e.page?e.page:1,per_page:20,status:r.status,sortby:"desc"});case 5:a=t.sent,n({type:cK,payload:a}),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),n({type:sK,payload:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()};function fK(e){var t=e&&Mf[e],n=e&&Lf[e];return e===Lf.draft&&(t=void 0,n=e),{virtualStatus:t,status:n}}function mK(e,t){var n=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(r.type){case t.loadComplete:return r.payload;case t.reset:return Object.assign({},e);case t.createItem:return n.items?Object.assign({},n,{items:[].concat(Object(Dm.a)(n.items),[r.payload])}):Object.assign({},n,{items:[r.payload]});case t.updateItem:return n.items?Object.assign({},n,{items:n.items.map((function(e){return e.id===r.payload.id?Object(c.a)(Object(c.a)({},e),r.payload.data):e}))}):n;case t.updateItems:return n.items?Object.assign({},n,{items:r.payload}):n;case t.removeItem:return n.items?Object.assign({},n,{items:n.items.filter((function(e){return e.id!==r.payload.id}))}):n;case t.updateTotals:return Object.assign({},n,{sub_total:r.payload.sub_total,taxes:r.payload.taxes,amount_due:r.payload.amount_due,total_amount:r.payload.total_amount});default:return n}}}(t,e);return tS({load:e.load,loadComplete:e.loadComplete,reset:e.reset,error:e.error,customReducers:{data:n}})}var jK,vK,OK="invoice_item_",gK="Steamatic/Invoice/LOAD",xK="Steamatic/Invoice/LOAD_COMPLETE",yK="Steamatic/Invoice/RESET",wK="Steamatic/Invoice/ERROR",_K="Steamatic/Invoice/CREATE_ITEM",kK="Steamatic/Invoice/UPDATE_ITEM",SK="Steamatic/Invoice/UPDATE_ITEMS",CK="Steamatic/Invoice/REMOVE_ITEM",NK="Steamatic/Invoice/UPDATE_TOTALS",EK={},AK=mK({load:gK,loadComplete:xK,reset:yK,error:wK,createItem:_K,updateItem:kK,updateItems:SK,removeItem:CK,updateTotals:NK},EK),TK=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:gK,payload:{id:e}}),t.prev=1,!e){t.next=8;break}return t.next=5,QU.findById(e);case 5:r=t.sent,t.next=9;break;case 8:r={data:Object(c.a)({},EK)};case 9:return n({type:xK,payload:r.data}),t.abrupt("return",r.data);case 13:throw t.prev=13,t.t0=t.catch(1),n({type:wK,payload:t.t0}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},IK=function(e,t){return iS(gK,xK,wK,(function(){return QU.update(e,t).then((function(e){return e.data}))}),{id:e})},RK=function(){return function(e,t){var n=t().invoice.data;return n&&n.id?QU.findById(n.id).then((function(t){e({type:NK,payload:t.data})})):Promise.reject("Invoice doesn't exist")}},DK=function(e){return function(t,n){t({type:NK,payload:e})}},MK=function(){var e={id:Object(m.uniqueId)(OK),total_amount:0,dirty:!0};return{type:_K,payload:e}},PK=function(e){return{type:_K,payload:e}},LK=function(e,t,n){return{type:kK,payload:{id:e,data:Object(c.a)(Object(c.a)({},t),{},{dirty:n})}}},FK=function(e){return{type:SK,payload:e}},UK=function(e){return function(t,n){var r=n().invoice.data;if(!r||!r.id)return Promise.reject("Invoice doesn't exist");var a=r.items.find((function(t){return t.id===e}));return a?uv(a.gs_code)||uv(a.description)||uv(a.unit_cost)||uv(a.quantity)||uv(a.gl_account)||uv(a.tax_rate)?Promise.reject("Validation errors"):(String(a.id).startsWith(OK)?QU.createItem(r.id,a):QU.updateItem(r.id,a.id,a)).then((function(n){t(LK(e,n.data,!1)),t(RK())})):Promise.reject("Item doesn't exist")}},VK=function(e){return function(t,n){var r=n().invoice.data;return r&&r.id?(t({type:CK,payload:{id:e}}),String(e).startsWith(OK)?Promise.resolve():QU.removeItem(r.id,e).then((function(){return t(RK())}))):Promise.reject("Invoice doesn't exist")}},BK=function(e){return function(t){return t({type:CK,payload:{id:e}}),Promise.resolve()}},JK="Steamatic/Finance/InvoicesInfo/LOAD",zK="Steamatic/Finance/InvoicesInfo/LOAD_COMPLETE",qK="Steamatic/Finance/InvoicesInfo/RESET",WK=tS({load:JK,loadComplete:zK,reset:qK,error:"Steamatic/Finance/InvoicesInfo/ERROR"}),HK=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:JK}),e.prev=1,e.next=4,QU.getInfo();case 4:n=e.sent,t((r=n.data,{type:zK,payload:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}var r}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},GK={hydrate:function(e){var t=Object(c.a)(Object(c.a)({},e.data),{},{date:Jj(e.data.date)});return e.data.job&&(t.job=ix(e.data.job)),{data:t}},dehydrate:function(e){return Object(c.a)(Object(c.a)({},vU(e)),{},{credit_note_items:[]})},dehydrateItem:gU},YK="/v1/finance/credit-notes",QK=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(YK,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",GK.hydrate(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KK=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("".concat(YK,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ZK=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=GK.dehydrateItem(n),e.next=3,Aj.post("".concat(YK,"/").concat(t,"/items"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XK=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=GK.dehydrateItem(r),e.next=3,Aj.patch("".concat(YK,"/").concat(t,"/items/").concat(n),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$K=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(YK,"/").concat(t,"/items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(YK,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(YK,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),nZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(YK,"/").concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(YK,"/").concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(YK,"/").concat(t,"/approve-requests"),{approver_list:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("".concat(YK,"/").concat(t),{recipient_address:n,recipient_name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),iZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(YK,"/").concat(t,"/approve"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(YK,"/").concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(YK,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(YK,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),uZ=SU("".concat(YK,"/listings"),{getDraft:"draft",getPendingApproval:"pending-approval",getApproved:"approved",getAll:"all",search:"search"}),dZ=Object(c.a)(Object(c.a)({},uZ),{},{findById:QK,create:function(e){var t=GK.dehydrate(e);return Aj.post(YK,t).then(GK.hydrate).catch((function(e){return Promise.reject(OU(e))}))},update:function(e,t){var n=GK.dehydrate(t);return Aj.patch("".concat(YK,"/").concat(e),n).then(GK.hydrate).catch((function(e){return Promise.reject(OU(e))}))},createItem:ZK,updateItem:XK,removeItem:$K,addNoteToCreditNote:eZ,removeNoteFromCreditNote:tZ,getCreditNoteNotes:nZ,getApproverList:rZ,sendApproveRequest:aZ,adjustCreditNote:oZ,approveCreditNote:iZ,getCreditNoteTags:cZ,addTag:sZ,removeTag:lZ,remove:KK,forPrint:function(e){return Aj.downloadFile("".concat(YK,"/").concat(e,"/document"))},applyCreditNoteToInvoices:function(e,t){return Aj.post("".concat(YK,"/").concat(e,"/payment"),{payment_items:t})},getFilterCreditNotes:function(e){return Aj.get("".concat(YK,"/listings/search"),e)},creditNoteItemsPositionUpdate:function(e,t){return Aj.post("".concat(YK,"/").concat(e,"/items/positions"),t)}}),pZ={load:"Steamatic/Finance/CreditNotes/LOAD",loadComplete:"Steamatic/Finance/CreditNotes/LOAD_COMPLETE",reset:"Steamatic/Finance/CreditNotes/RESET",error:"Steamatic/Finance/CreditNotes/ERROR"},hZ=tS(pZ),bZ=nS(pZ),fZ=function(e,t){switch(e){case Lf.draft:return dZ.getDraft(t);case Mf.pending_approval:return dZ.getPendingApproval(t);case Lf.approved:return dZ.getApproved(t);default:return dZ.getAll(t)}},mZ=(bZ.reset(),function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(bZ.load()),n.prev=1,n.next=4,fZ(e,t);case 4:a=n.sent,r(bZ.loadComplete(a)),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r(bZ.error(n.t0)),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}),jZ=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(bZ.load()),t.prev=1,t.next=4,dZ.getFilterCreditNotes(e);case 4:r=t.sent,n(bZ.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(bZ.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},vZ=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(bZ.load()),t.prev=1,t.next=4,dZ.search(e);case 4:r=t.sent,n(bZ.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(bZ.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},OZ="Steamatic/Finance/CreditNotesInfo/LOAD",gZ="Steamatic/Finance/CreditNotesInfo/LOAD_COMPLETE",xZ="Steamatic/Finance/CreditNotesInfo/RESET",yZ=tS({load:OZ,loadComplete:gZ,reset:xZ,error:"Steamatic/Finance/CreditNotesInfo/ERROR"}),wZ="credite_note_item_",_Z="Steamatic/CreditNote/LOAD",kZ="Steamatic/CreditNote/LOAD_COMPLETE",SZ="Steamatic/CreditNote/RESET",CZ="Steamatic/CreditNote/ERROR",NZ="Steamatic/CreditNote/CREATE_ITEM",EZ="Steamatic/CreditNote/UPDATE_ITEM",AZ="Steamatic/CreditNote/UPDATE_ITEMS",TZ="Steamatic/CreditNote/REMOVE_ITEM",IZ="Steamatic/CreditNote/UPDATE_TOTALS",RZ={},DZ=mK({load:_Z,loadComplete:kZ,reset:SZ,error:CZ,createItem:NZ,updateItem:EZ,updateItems:AZ,removeItem:TZ,updateTotals:IZ},RZ),MZ=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:_Z,payload:{id:e}}),t.prev=1,!e){t.next=8;break}return t.next=5,dZ.findById(e);case 5:r=t.sent,t.next=9;break;case 8:r={data:Object(c.a)({},RZ)};case 9:return n({type:kZ,payload:r.data}),t.abrupt("return",r.data);case 13:throw t.prev=13,t.t0=t.catch(1),n({type:CZ,payload:t.t0}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},PZ=function(e,t){return iS(_Z,kZ,CZ,(function(){return dZ.update(e,t).then((function(e){return e.data}))}),{id:e})},LZ=function(){return function(e,t){var n=t().creditNote.data;return n&&n.id?dZ.findById(n.id).then((function(t){e({type:IZ,payload:t.data})})):Promise.reject("Credit note doesn't exist")}},FZ=function(){var e={id:Object(m.uniqueId)(wZ),dirty:!0};return{type:NZ,payload:e}},UZ=function(e,t,n){return{type:EZ,payload:{id:e,data:Object(c.a)(Object(c.a)({},t),{},{dirty:n})}}},VZ=function(e){return{type:AZ,payload:e}},BZ=function(e){return function(t,n){var r=n().creditNote.data;if(!r||!r.id)return Promise.reject("Credit note doesn't exist");var a=r.items.find((function(t){return t.id===e}));return a?uv(a.gs_code)||uv(a.description)||uv(a.unit_cost)||uv(a.quantity)||uv(a.gl_account)||uv(a.tax_rate)?Promise.reject("Validation errors"):(String(a.id).startsWith(wZ)?dZ.createItem(r.id,a):dZ.updateItem(r.id,a.id,a)).then((function(n){t(UZ(e,n.data,!1)),t(LZ())})):Promise.reject("Credit note item doesn't exist")}},JZ=function(e){return function(t,n){var r=n().creditNote.data;return r&&r.id?(t({type:TZ,payload:{id:e}}),String(e).startsWith(wZ)?Promise.resolve():dZ.removeItem(r.id,e).then((function(){return t(LZ())}))):Promise.reject("Credit Note doesn't exist")}},zZ=function(e){var t=Object(c.a)(Object(c.a)({},e.data),{},{date:Jj(e.data.date)});return e.data.job&&(t.job=ix(e.data.job)),{data:t}},qZ=function(e){return Object(c.a)(Object(c.a)({},vU(e)),{},{purchase_orders_items:[]})},WZ=function(e){return Object(c.a)(Object(c.a)({},gU(e)),{},{markup:e.markup||0})},HZ="/v1/finance/purchase-orders",GZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(HZ,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",zZ(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("".concat(HZ,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),QZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=WZ(n),e.next=3,Aj.post("".concat(HZ,"/").concat(t,"/items"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),KZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=WZ(r),e.next=3,Aj.patch("".concat(HZ,"/").concat(t,"/items/").concat(n),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ZZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(HZ,"/").concat(t,"/items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XZ=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(HZ,"/").concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$Z=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(HZ,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),eX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(HZ,"s/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(HZ,"/").concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(HZ,"/").concat(t,"/approve-requests"),{approver_ids:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("".concat(HZ,"/").concat(t),{recipient_address:n,recipient_name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),aX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(HZ,"/").concat(t,"/approve"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(HZ,"/").concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),iX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(HZ,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),cX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(HZ,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.downloadFile("".concat(HZ,"/").concat(t,"/document")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),lX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.get("".concat(HZ,"/listings/search"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(HZ,"/").concat(t,"/items/positions"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dX=SU("".concat(HZ,"/listings"),{getDraft:"draft",getPendingApproval:"pending-approval",getApproved:"approved",getAll:"all",getFoundPurchaseOrders:"search"}),pX=Object(c.a)(Object(c.a)({},dX),{},{findById:GZ,create:function(e){var t=qZ(e);return Aj.post(HZ,t).then(zZ).catch((function(e){return Promise.reject(OU(e))}))},update:function(e,t){var n=qZ(t);return Aj.patch("".concat(HZ,"/").concat(e),n).then(zZ).catch((function(e){return Promise.reject(OU(e))}))},createItem:QZ,updateItem:KZ,removeItem:ZZ,getPurchaseOrderNotes:XZ,addNoteToPurchaseOrder:$Z,removeNoteFromPurchaseOrder:eX,getApproverList:tX,sendApproveRequest:nX,adjustPurchaseOrder:rX,approvePurchaseOrder:aX,getPurchaseOrderTags:oX,addTag:iX,removeTag:cX,remove:YZ,forPrint:sX,getFilterPurchaseOrders:lX,purchaseOrderItemsPositionUpdate:uX}),hX="Steamatic/Finance/PurchaseOrdersInfo/LOAD",bX="Steamatic/Finance/PurchaseOrdersInfo/LOAD_COMPLETE",fX="Steamatic/Finance/PurchaseOrdersInfo/ERROR",mX="Steamatic/Finance/PurchaseOrders/LOAD",jX="Steamatic/Finance/PurchaseOrders/LOAD_COMPLETE",vX="Steamatic/Finance/PurchaseOrders/ERROR",OX=tS({load:hX,loadComplete:bX,reset:"Steamatic/Finance/PurchaseOrdersInfo/RESET",error:fX}),gX=tS({load:mX,loadComplete:jX,reset:"Steamatic/Finance/PurchaseOrders/RESET",error:vX}),xX=function(e,t){switch(e){case Mf.draft:return pX.getDraft(t);case Mf.pending_approval:return pX.getPendingApproval(t);case Lf.approved:return pX.getApproved(t);default:return pX.getAll(t)}},yX=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:hX}),e.prev=1,e.next=4,pX.getInfo();case 4:return n=e.sent,t({type:bX,payload:n}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),t({type:fX,payload:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},wX=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:mX}),n.prev=1,n.next=4,xX(e,t);case 4:a=n.sent,r({type:jX,payload:a}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r({type:vX,payload:n.t0}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},_X=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:mX}),t.prev=1,t.next=4,pX.getFoundPurchaseOrders(e);case 4:r=t.sent,n({type:jX,payload:r}),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n({type:vX,payload:t.t0}),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},kX=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:mX}),t.prev=1,t.next=4,pX.getFilterPurchaseOrders(e);case 4:r=t.sent,n({type:jX,payload:r}),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n({type:vX,payload:t.t0}),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},SX="purchase_order_item_",CX="Steamatic/PurchaseOrder/LOAD",NX="Steamatic/PurchaseOrder/LOAD_COMPLETE",EX="Steamatic/PurchaseOrder/RESET",AX="Steamatic/PurchaseOrder/ERROR",TX="Steamatic/PurchaseOrder/CREATE_ITEM",IX="Steamatic/PurchaseOrder/UPDATE_ITEM",RX="Steamatic/PurchaseOrder/UPDATE_ITEMS",DX="Steamatic/PurchaseOrder/REMOVE_ITEM",MX="Steamatic/PurchaseOrder/UPDATE_TOTALS",PX={},LX=mK({load:CX,loadComplete:NX,reset:EX,error:AX,createItem:TX,updateItem:IX,updateItems:RX,removeItem:DX,updateTotals:MX},PX),FX=function(e,t){return iS(CX,NX,AX,(function(){return pX.update(e,t).then((function(e){return e.data}))}),{id:e})},UX=function(){return function(e,t){var n=t().purchaseOrder.data;return n&&n.id?pX.findById(n.id).then((function(t){e({type:MX,payload:t.data})})):Promise.reject("Purchase Order doesn't exist")}},VX=function(){var e={id:Object(m.uniqueId)(SX),dirty:!0};return{type:TX,payload:e}},BX=function(e,t,n){return{type:IX,payload:{id:e,data:Object(c.a)(Object(c.a)({},t),{},{dirty:n})}}},JX=function(e){return{type:RX,payload:e}},zX=function(e){return function(t,n){var r=n().purchaseOrder.data;if(!r||!r.id)return Promise.reject("Purchase Order doesn't exist");var a=r.items.find((function(t){return t.id===e}));return a?uv(a.gs_code)||uv(a.description)||uv(a.unit_cost)||uv(a.quantity)||uv(a.gl_account)||uv(a.tax_rate)?Promise.reject("Validation errors"):(String(a.id).startsWith(SX)?pX.createItem(r.id,a):pX.updateItem(r.id,a.id,a)).then((function(n){t(BX(e,n.data,!1)),t(UX())})):Promise.reject("PO item doesn't exist")}},qX=function(e){return function(t,n){var r=n().purchaseOrder.data;return r&&r.id?(t({type:DX,payload:{id:e}}),String(e).startsWith(SX)?Promise.resolve():pX.removeItem(r.id,e).then((function(){return t(UX())}))):Promise.reject("Purchase Order doesn't exist")}},WX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/accounting-organizations/".concat(t,"/gl-accounts"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),HX=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/accounting-organizations-currentUser",{per_page:XO.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),GX=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/locations/".concat(t,"/accounting-organization"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YX=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/tax-rates",{per_page:XO.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),QX=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/gs-codes",{per_page:XO.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),KX={getAccountingOrganizations:HX,getAccountingOrganizationsForLocation:GX,getGLAccounts:WX,searchGLAccounts:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/gl-accounts/search",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTaxRates:YX,getGSCodes:QX,isEditable:function(e,t,n,r,a){var o=(n.latest_status?n.latest_status.status:Lf.draft)===Lf.draft,i=n.locked;return o&&!a?r.has(e)&&o&&!i&&r.has(t):!(!o||!a)&&(r.has(e)&&i&&r.has(t))},getGLAccountLabel:function(e){return"".concat(e.name).concat(e.code?": ".concat(e.code):"")}},ZX="Steamatic/Finance/LOAD_COMPLETE",XX="Steamatic/Finance/ERROR",$X="Steamatic/Finance/RESET_ENTITY";!function(e){e.accountingOrganizations="accountingOrganizations",e.glAccounts="glAccounts",e.glAccountsForUser="glAccountsForUser",e.taxRates="taxRates",e.gsCodes="gsCodes"}(vK||(vK={}));var e$=(jK={},Object(k.a)(jK,vK.accountingOrganizations,[]),Object(k.a)(jK,vK.glAccounts,[]),Object(k.a)(jK,vK.taxRates,[]),Object(k.a)(jK,vK.gsCodes,[]),Object(k.a)(jK,"error",null),jK),t$=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e$,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ZX:return Object(c.a)(Object(c.a)({},e),t.payload);case XX:return Object(c.a)(Object(c.a)({},e),{},{error:t.payload});case $X:return Object(c.a)(Object(c.a)({},e),{},Object(k.a)({},t.payload,[]));default:return e}},n$=function(e){return{type:$X,payload:e}},r$=function(e,t){return{type:ZX,payload:Object(k.a)({},e,t)}},a$=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(n$(n)),e.next=4,r();case 4:a=e.sent,t(r$(n,a)),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),t((o=e.t0,{type:XX,payload:o})),e.t0;case 12:case"end":return e.stop()}var o}),e,null,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),o$=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a$(n,vK.glAccounts,(function(){return KX.getGLAccounts(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},i$=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a$(n,vK.glAccounts,Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,KX.searchGLAccounts({locations:e});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Promise.resolve([]));case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function c$(e){return e.finance[vK.glAccounts]}var s$=function(e){return Object(c.a)(Object(c.a)({},e.data),{},{created_at:zj(e.data.created_at),paid_at:zj(e.data.paid_at),updated_at:zj(e.data.updated_at)})},l$=function(e){return{name:e.name,cvv:+e.cvv,number:e.number.replace(/\D/g,""),expiry_month:e.expiry_month.value.toString(),expiry_year:e.expiry_year.value.toString(),billing_address1:e.billing_address1,billing_city:e.billing_city,billing_country:e.billing_country,email:e.email}},u$=s$,d$=function(e){return Object(c.a)(Object(c.a)({},e),{},{paid_at:qj(e.paid_at),gl_account_id:e.gl_account_id.id,amount:b$(e.amount)})},p$=s$,h$=function(e,t){return{payment_data:Object(c.a)(Object(c.a)({},e),{},{paid_at:Wj(e.paid_at),dst_gl_account_id:e.dst_gl_account.id}),invoices_list:t}};function b$(e){return+e.replace(/[^\d\.]/g,"")}var f$,m$={forwardPayments:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/finance/payments/forward",Object(c.a)(Object(c.a)({},t),{},{transferred_at:Wj(t.transferred_at)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPaymentsToForward:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/invoices/listings/unforwarded",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getForwardedPayments:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve({data:[]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getForwardedPaymentsInfo:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve({year:0,month:0,overall:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),receiveWithCreditCard:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/finance/invoices/".concat(t,"/payments/receive/credit-card"),l$(n));case 2:return r=e.sent,e.abrupt("return",u$(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),receiveDirectDeposit:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/finance/invoices/".concat(t,"/payments/receive/direct-deposit"),d$(n));case 2:return r=e.sent,e.abrupt("return",p$(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),receivePayment:function(e,t){return Aj.post("/v1/finance/payments/transfers/receive",h$(e,t))},paymentTransferInfo:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/reports/payments/transfers/info?location_id=".concat(t.toString(),"&date_from=").concat(qf()(n).format(Dj),"&date_to=").concat(qf()(r).format(Dj)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getPaymentTransfersList:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/reports/payments/transfers?location_id=".concat(t.toString(),"&date_from=").concat(qf()(n).format(Dj),"&date_to=").concat(qf()(r).format(Dj)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getForwardPaymentTransfersList:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/payments/forward",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},j$="Steamatic/Finance/ForwardPayments/LOAD_COMPLETE",v$="Steamatic/Finance/ForwardPayments/RESET",O$={load:"Steamatic/Finance/ForwardPayments/LOAD_JOB",loadComplete:j$,reset:v$,error:"Steamatic/Finance/ForwardPayments/ERROR"},g$={toggle:"Steamatic/Finance/ForwardPayments/TOGGLE_INVOICE_PAYMENT",massSelect:"Steamatic/Finance/ForwardPayments/MASS_SELECT_INVOICE_PAYMENT",resetSelected:"Steamatic/Finance/ForwardPayments/RESET_SELECTED_INVOICE_PAYMENT"},x$=tS(Object(c.a)(Object(c.a)({},O$),{},{customReducers:{data:Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null};switch(t.type){case j$:return t.payload.data;case v$:return[];default:return e}},selectedIds:rS(g$)})}})),y$=nS(O$),w$=oS(g$),_$=w$.resetSelected,k$=function(e){return w$.toggle(e.id)},S$=function(e){return w$.massSelect(e.map((function(e){return e.id})))},C$=(y$.reset(),function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t(w$.resetSelected()),t(y$.reset()),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),t(y$.error(e.t0)),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}),N$=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(y$.load()),t.prev=1,t.next=4,m$.getPaymentsToForward(e);case 4:r=t.sent,n(y$.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(y$.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},E$=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r,a){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(y$.load()),n.next=4,m$.forwardPayments(Object(c.a)(Object(c.a)({},e),{},{invoices_ids:a().forwardPayments.data.selectedIds}));case 4:Qm(Vm.Success,"Forward invoice payments received"),n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(0),r(y$.error(n.t0)),n.t0;case 11:return n.next=13,r(N$(t));case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()},A$=x$,T$={load:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_JOB",loadComplete:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_COMPLETE",reset:"Steamatic/Finance/ForwardPaymentsReceived/RESET",error:"Steamatic/Finance/ForwardPaymentsReceived/ERROR"},I$={load:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_JOB_INFO",loadComplete:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_COMPLETE_INFO",reset:"Steamatic/Finance/ForwardPaymentsReceived/RESET_INFO",error:"Steamatic/Finance/ForwardPaymentsReceived/ERROR_INFO"},R$=tS(T$),D$=nS(T$),M$=tS(I$),P$=(nS(I$),function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(D$.load()),t.prev=1,t.next=4,m$.getForwardedPayments(e);case 4:r=t.sent,n(D$.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(D$.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()});!function(e){e.DP="DP",e.FP="FP"}(f$||(f$={}));var L$,F$,U$,V$="Steamatic/Finance/ReceivePayments/LOAD_COMPLETE",B$="Steamatic/Finance/ReceivePayments/RESET",J$="Steamatic/Finance/ReceivePayments/SET_PAYMENT_TYPE",z$="Steamatic/Finance/ReceivePayments/SET_AMOUNT",q$={load:"Steamatic/Finance/ReceivePayments/LOAD",loadComplete:V$,reset:B$,error:"Steamatic/Finance/ReceivePayments/ERROR"},W$={toggle:"Steamatic/Finance/ReceivePayments/TOGGLE_INVOICE",resetSelected:"Steamatic/Finance/ReceivePayments/RESET_SELECTED_INVOICES",massSelect:"Steamatic/Finance/ReceivePayments/MASS_SELECT_INVOICES"},H$=function(e){return Object(c.a)(Object(c.a)({},e),{},{payment_type:f$.DP,payment_amount:0})},G$=tS(Object(c.a)(Object(c.a)({},q$),{},{customReducers:{data:Object(LO.combineReducers)({data:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null},r=function(e){return t.findIndex((function(t){return t.id===e}))};switch(n.type){case V$:return n.payload.data.map(H$);case J$:return(e=r(n.payload.id))>=0&&(t[e].payment_type=n.payload.payment_type),Object(Dm.a)(t);case z$:return(e=r(n.payload.id))>=0&&(t[e].payment_amount=n.payload.amount),Object(Dm.a)(t);case B$:return[];default:return t}},selectedIds:rS(W$)})}})),Y$=nS(q$),Q$=oS(W$),K$=(Q$.resetSelected,function(e){return Q$.toggle(e.id)}),Z$=(Y$.reset(),function(e,t){return{type:J$,payload:{id:e,payment_type:t}}}),X$=function(e,t){return{type:z$,payload:{id:e,amount:t}}},$$=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(Q$.resetSelected()),n(Y$.load()),t.prev=2,t.next=5,QU.search({invoices:e,jobs:e,virtual_status:["unpaid","overdue"]});case 5:r=t.sent,n(Y$.loadComplete(r)),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(2),n(Y$.error(t.t0)),t.t0;case 13:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},e0=function(){return function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t(Q$.resetSelected()),t(Y$.reset()),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),t(Y$.error(e.t0)),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},t0=G$,n0={getAccountTransactionsByGlAccountId:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat("/v1/finance/reports/gl-accounts","/").concat(t,"/").concat("transactions/info"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},r0="Steamatic/Finance/Reports/GlAccounts/LOAD",a0="Steamatic/Finance/Reports/GlAccounts/LOAD_COMPLETE",o0="Steamatic/Finance/Reports/GlAccounts/ERROR",i0=tS({load:r0,loadComplete:a0,reset:"Steamatic/Finance/Reports/GlAccounts/RESET",error:o0}),c0=function(e,t){return iS(r0,a0,o0,(function(){return n0.getAccountTransactionsByGlAccountId(e,t)}))},s0="Steamatic/Operations/Runs/LOAD",l0="Steamatic/Operations/Runs/LOAD_COMPLETE",u0="Steamatic/Operations/Runs/RESET",d0="Steamatic/Operations/Runs/ERROR",p0=tS({load:s0,loadComplete:l0,reset:u0,error:d0}),h0=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:s0}),t.prev=1,t.next=4,pz.getRuns(e);case 4:return r=t.sent,n({type:l0,payload:r}),t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(1),n({type:d0,payload:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},b0="Steamatic/Constants/LOAD_COMPLETE",f0={jobAssignmentTypes:[]},m0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case b0:return t.payload;default:return e}},j0="Steamatic/UsageAndActuals/Materials/LOAD",v0="Steamatic/UsageAndActuals/Materials/LOAD_COMPLETE",O0="Steamatic/UsageAndActuals/Materials/ERROR",g0=tS({load:j0,loadComplete:v0,reset:"Steamatic/UsageAndActuals/Materials/RESET",error:O0}),x0="Steamatic/UsageAndActuals/MeasureUnits/LOAD",y0="Steamatic/UsageAndActuals/MeasureUnits/LOAD_COMPLETE",w0="Steamatic/UsageAndActuals/MeasureUnits/ERROR",_0=tS({load:x0,loadComplete:y0,reset:"Steamatic/UsageAndActuals/MeasureUnits/RESET",error:w0}),k0="Steamatic/Contacts/Statuses/LOAD",S0="Steamatic/Contacts/Statuses/LOAD_COMPLETE",C0="Steamatic/Contacts/Statuses/ERROR",N0=tS({load:k0,loadComplete:S0,reset:"Steamatic/Contacts/Statuses/RESET",error:C0}),E0=Object(LO.combineReducers)({statuses:N0}),A0={getInvoicePayments:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat("/v1/finance/reports/invoices/payments"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},T0="Steamatic/Finance/Reports/InvoicePayment/LOAD",I0="Steamatic/Finance/Reports/InvoicePayment/LOAD_COMPLETE",R0="Steamatic/Finance/Reports/InvoicePayment/ERROR",D0=tS({load:T0,loadComplete:I0,reset:"Steamatic/Finance/Reports/InvoicePayment/RESET",error:R0}),M0="Steamatic/UsageAndActuals/Equipment/LOAD",P0="Steamatic/UsageAndActuals/Equipment/LOAD_COMPLETE",L0="Steamatic/UsageAndActuals/Equipment/ERROR",F0=tS({load:M0,loadComplete:P0,reset:"Steamatic/UsageAndActuals/Equipment/RESET",error:L0}),U0=function(e){return Object(c.a)(Object(c.a)({},e),{},{current_date_from:qj(e.current_date_from),current_date_to:qj(e.current_date_to),previous_date_from:qj(e.previous_date_from),previous_date_to:qj(e.previous_date_to)})},V0={getVolume:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/reports/financial/volume",U0(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRevenue:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/reports/financial/revenue",U0(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gerAccountsReceivable:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/finance/reports/financial/accounts_receivables",U0(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function B0(e,t){return"".concat("Steamatic/FinancialReports/").concat(e,"/").concat(t)}!function(e){e.revenue="revenue",e.volume="volume",e.accounts_receivables="accounts_receivables"}(F$||(F$={})),function(e){e.load="load",e.loadComplete="loadComplete",e.reset="reset",e.error="error"}(U$||(U$={}));var J0=[U$.load,U$.loadComplete,U$.reset,U$.error];function z0(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:J0;return t.reduce((function(t,n){return Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n,B0(e,n)))}),{})}var q0=Object(LO.combineReducers)((L$={},Object(k.a)(L$,F$.revenue,tS(z0(F$.revenue))),Object(k.a)(L$,F$.accounts_receivables,tS(z0(F$.accounts_receivables))),Object(k.a)(L$,F$.volume,tS(z0(F$.volume))),L$)),W0=z0(F$.volume,[U$.load,U$.loadComplete,U$.error]),H0=z0(F$.revenue,[U$.load,U$.loadComplete,U$.error]),G0=function(e){return iS(H0[U$.load],H0[U$.loadComplete],H0[U$.error],(function(){return V0.getRevenue(e)}))},Y0=z0(F$.accounts_receivables,[U$.load,U$.loadComplete,U$.error]),Q0=function(e){return iS(Y0[U$.load],Y0[U$.loadComplete],Y0[U$.error],(function(){return V0.gerAccountsReceivable(e)}))};function K0(e,t){return e.financialReport[t]}function Z0(e){return K0(e,F$.volume)}function X0(e){return K0(e,F$.revenue)}function $0(e){return K0(e,F$.accounts_receivables)}var e1,t1,n1,r1,a1,o1="Steamatic/Contacts/Countries/LOAD",i1="Steamatic/Contacts/Countries/LOAD_COMPLETE",c1="Steamatic/Contacts/Countries/ERROR",s1=tS({load:o1,loadComplete:i1,reset:"Steamatic/Contacts/Countries/RESET",error:c1}),l1="Steamatic/Contacts/States/LOAD",u1="Steamatic/States/Countries/LOAD_COMPLETE",d1="Steamatic/Contacts/States/ERROR",p1=tS({load:l1,loadComplete:u1,reset:"Steamatic/Contacts/States/RESET",error:d1}),h1={getITrialBalance:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat("/v1/finance/reports/gl-accounts/trial-report"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},b1="Steamatic/Finance/Reports/TrialBalance/LOAD",f1="Steamatic/Finance/Reports/TrialBalance/LOAD_COMPLETE",m1="Steamatic/Finance/Reports/TrialBalance/ERROR",j1=tS({load:b1,loadComplete:f1,reset:"Steamatic/Finance/Reports/TrialBalance/RESET",error:m1}),v1=function(e){return Aj.get("".concat("/v1/finance/reports/gst"),e)},O1="Steamatic/Finance/Reports/GstSummary/LOAD",g1="Steamatic/Finance/Reports/GstSummary/LOAD_COMPLETE",x1="Steamatic/Finance/Reports/GstSummary/ERROR",y1=tS({load:O1,loadComplete:g1,reset:"Steamatic/Finance/Reports/GstSummary/RESET",error:x1}),w1="Steamatic/Tags/Job/LOAD",_1="Steamatic/Tags/Job/LOAD_COMPLETE",k1="Steamatic/Tags/Job/ERROR",S1=tS({load:w1,loadComplete:_1,reset:"Steamatic/Tags/Job/RESET",error:k1}),C1=function(){return iS(w1,_1,k1,(function(){return yC.searchTags({type:"job"})}))},N1="CurrentAS/",E1="Steamatic/UsageAndActuals/AssessmentReports/",A1="".concat(E1).concat(N1,"Load"),T1="".concat(E1).concat(N1,"LoadComplete"),I1="".concat(E1).concat(N1,"Reset"),R1="".concat(E1).concat(N1,"Error"),D1=tS({load:A1,loadComplete:T1,reset:I1,error:R1}),M1=Object(LO.combineReducers)({currentAR:D1}),P1="Steamatic/UserRoles/",L1="".concat(P1,"Load"),F1="".concat(P1,"LoadComplete"),U1="".concat(P1,"Reset"),V1="".concat(P1,"Error"),B1=tS({load:L1,loadComplete:F1,reset:U1,error:V1}),J1=function(e){var t,n,r,a,o;return Object(c.a)(Object(c.a)({},e),{},{restoration_hours:(null===(t=e.restoration_hours)||void 0===t?void 0:t.value)||e.restoration_hours,job_id:null===(n=e.inventory)||void 0===n||null===(r=n.job)||void 0===r?void 0:r.id,inventory_id:null===(a=e.inventory)||void 0===a?void 0:a.id,inventory_item_standard_type_id:null===(o=e.standard_type)||void 0===o?void 0:o.id,inventory:void 0,job:void 0,container:void 0,space:void 0,standard_type:void 0})},z1="/v1/operations/inventories",q1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(z1,"/search?location_id=").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(z1),{job_id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(z1,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),G1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(z1,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Y1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(z1,"/").concat(t,"/items"),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Q1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-items/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),K1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-items/".concat(t,"/notes"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-items/".concat(t,"/placements"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-item-statuses",{inventory_item_id:t,user_id:n,status:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$1=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/inventory-items/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-items",J1(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/inventory-items/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),n2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-items/".concat(t,"/photos"),Object(c.a)({inventory_item_id:t,photo_id:n},r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),r2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/inventory-items/".concat(t,"/photos/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),a2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-items/".concat(t,"/photos"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),o2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/inventory-items/".concat(t,"/photos/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i2=function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-standard-items");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),c2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-todo/item/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),s2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-todo/".concat(t,"/complete"),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),l2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-todo/".concat(t,"/incomplete"),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),u2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/inventory-todo/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d2={getInventoryListByLocationID:q1,getInventoryInfo:G1,getInventoryItems:Y1,createNewInventory:W1,deleteInventory:H1,getInventoryItem:Q1,getInventoryItemNotes:K1,getInventoryItemPlacements:Z1,markInventoryItemStatus:X1,removeInventoryItem:$1,createInventoryItem:e2,updateInventoryItem:t2,attachPhoto:n2,updateAttachedPhoto:r2,getAttachedPhotos:a2,detachPhoto:o2,getItemStandardTypes:i2,addTodoGroupToInventoryItem:c2,getItemToDoList:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-todo/item/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addNoteToInventoryItem:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-item-notes",{inventory_item_id:n,note_id:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getInventoryReport:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventories/inventory-report-by-code?code=".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getReportLink:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventories/".concat(t,"/inventory-report-get-code"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContainers:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-containers");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSpaces:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-spaces");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),startPlacement:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-items/".concat(t.inventory_item_id,"/placement/start"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stopPlacement:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-items/".concat(t,"/placement/stop"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),markToDoItemAsCompleted:s2,markToDoItemAsInComplete:l2,deleteToDoItem:u2,assignChargingIntervalToPlacement:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-item-placement-charging-intervals",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateChargingIntervalToPlacement:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/inventory-item-placement-charging-intervals/".concat(t,"/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeChargingIntervalFromPlacement:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Aj.remove("/v1/operations/inventory-item-placement-charging-intervals/".concat(t,"/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},p2="Steamatic/Warehouse/Inventories/LOAD",h2="Steamatic/Warehouse/Inventories/LOAD_COMPLETE",b2="Steamatic/Warehouse/Inventories/ERROR",f2=tS({load:p2,loadComplete:h2,reset:"Steamatic/Warehouse/Inventories/RESET",error:b2}),m2=function(e){var t,n;return Object(c.a)(Object(c.a)({},e),{},{location_id:(null===(t=e.location)||void 0===t?void 0:t.id)||null,location:void 0,inventory_storage_space_type_id:(null===(n=e.inventory_storage_space_type)||void 0===n?void 0:n.id)||null,inventory_storage_space_type:void 0})},j2=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{inventory_storage_container_type_id:(null===(t=e.inventory_storage_container_type)||void 0===t?void 0:t.id)||null,inventory_storage_container_type:void 0})},v2=function(e){var t,n;return Object(c.a)(Object(c.a)({},e),{},{charging_interval:(null===(t=e.charging_interval)||void 0===t?void 0:t.value)||e.charging_interval||null,inventory_storage_space_type_id:(null===(n=e.inventory_storage_space_type)||void 0===n?void 0:n.id)||null,inventory_storage_space_type:void 0})},O2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventories/search",{location_id:t,per_page:XO.Big,job_id:n.job_id,status:n.status,page:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),g2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-items/locations",Object(c.a)({location_id:t,per_page:XO.Middle,page:r},n));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),x2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-location-usage",{location_id:t,per_page:XO.Middle,page:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),y2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventories/ready-for-return-dispose",{location_id:t,per_page:XO.Middle,job_id:r,page:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),w2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-items/returned-disposed",{location_id:t,per_page:XO.Middle,job_id:n.job_id,status:n.status,page:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/inventory-items/ready-for-return-dispose",{location_id:t,per_page:XO.Huge,page:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/jobs/inventory-items/returned-disposed",{location_id:t,per_page:XO.Huge,page:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),S2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventories/info",{location_id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C2=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-items/scan-to-placement",{inventoryStorageSpaceId:t,inventoryItemIds:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N2={getInventories:O2,getReadyToReturn:y2,getStorageItems:g2,getToReturnDisposeJobs:_2,getReturnedDisposedJobs:k2,getReturned:w2,getWarehouseInfo:S2,getStorageUsage:x2,createStorageSpace:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/storage-spaces",m2(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStorageSpace:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/storage-spaces/".concat(t),m2(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteStorageSpace:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/storage-spaces/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageSpace:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-spaces/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageSpaces:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-spaces",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),scanToLocation:C2,createStorageSpaceType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/storage-space-types",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStorageSpaceType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/storage-space-types/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteStorageSpaceType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/storage-space-types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageSpaceType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-space-types/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageSpaceTypes:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-space-types");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createStorageContainerType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/storage-container-types",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStorageContainerType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/storage-container-types/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteStorageContainerType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/storage-container-types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageContainerType:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-container-types/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageContainerTypes:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-container-types");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createStorageContainer:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/storage-containers",j2(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStorageContainer:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/storage-containers/".concat(t),j2(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteStorageContainer:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/storage-containers/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageContainer:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-containers/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStorageContainers:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/storage-containers",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createChargingInterval:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-storage-space-type-charging-intervals",v2(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateChargingInterval:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/inventory-storage-space-type-charging-intervals/".concat(t),v2(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteChargingInterval:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/inventory-storage-space-type-charging-intervals/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getChargingInterval:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-storage-space-type-charging-intervals/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getChargingIntervals:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-storage-space-type-charging-intervals/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createStandardItem:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/operations/inventory-standard-items",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStandardItem:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.patch("/v1/operations/inventory-standard-items/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteStandardItem:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/inventory-standard-items/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStandardItem:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-standard-items/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStandardItems:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/inventory-standard-items",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getToDoGroups:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/todo-groups",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},E2="Steamatic/Warehousing/",A2="Steamatic/Warehousing/Steamatic/Finance/setLocation",T2="Steamatic/Finance/ReceivePayments/TOGGLE_ENTITY";!function(e){e.selectedLocation="selectedLocation",e.selectedInventoryJob="selectedInventoryJob"}(n1||(n1={})),function(e){e.inventories="inventories",e.readyToReturn="readyToReturn",e.itemsInStorage="itemsInStorage",e.toReturnDisposeJobs="toReturnDisposeJobs",e.returnedDisposedJobs="returnedDisposedJobs",e.options="options",e.returnedItems="returnedItems",e.selectedGroup="selectedGroup",e.selectedPlacements="selectedPlacements",e.warehouseInfo="warehouseInfo",e.storageUsage="storageUsage",e.jobsNewInventory="jobsNewInventory",e.storageSpaces="storageSpaces"}(r1||(r1={})),function(e){e.load="load",e.loadComplete="loadComplete",e.reset="reset",e.error="error"}(a1||(a1={}));var I2={toggleEntity:T2,toggle:"Steamatic/Finance/ReceivePayments/TOGGLE_PLACEMENT",resetSelected:"Steamatic/Finance/ReceivePayments/RESET_SELECTED_PLACEMENT",massSelect:"Steamatic/Finance/ReceivePayments/MASS_SELECT_PLACEMENTS"},R2={toggleEntity:T2,toggle:"Steamatic/Finance/ReceivePayments/TOGGLE_GROUP",resetSelected:"Steamatic/Finance/ReceivePayments/RESET_SELECTED_GROUP",massSelect:"Steamatic/Finance/ReceivePayments/MASS_SELECT_GROUP"},D2=(e1={},Object(k.a)(e1,n1.selectedLocation,null),Object(k.a)(e1,n1.selectedInventoryJob,null),e1);function M2(e,t){return"".concat(E2).concat(e,"/").concat(t)}var P2=[a1.load,a1.loadComplete,a1.reset,a1.error];function L2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:P2;return t.reduce((function(t,n){return Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n,M2(e,n)))}),{})}var F2=Object(LO.combineReducers)((t1={},Object(k.a)(t1,r1.inventories,tS(L2(r1.inventories))),Object(k.a)(t1,r1.readyToReturn,tS(L2(r1.readyToReturn))),Object(k.a)(t1,r1.returnedItems,tS(L2(r1.returnedItems))),Object(k.a)(t1,r1.itemsInStorage,tS(L2(r1.itemsInStorage))),Object(k.a)(t1,r1.storageUsage,tS(L2(r1.storageUsage))),Object(k.a)(t1,r1.toReturnDisposeJobs,tS(L2(r1.toReturnDisposeJobs))),Object(k.a)(t1,r1.returnedDisposedJobs,tS(L2(r1.returnedDisposedJobs))),Object(k.a)(t1,r1.warehouseInfo,tS(L2(r1.warehouseInfo))),Object(k.a)(t1,r1.jobsNewInventory,tS(L2(r1.jobsNewInventory))),Object(k.a)(t1,r1.storageSpaces,tS(L2(r1.storageSpaces))),Object(k.a)(t1,r1.selectedGroup,rS(R2)),Object(k.a)(t1,r1.selectedPlacements,rS(I2)),Object(k.a)(t1,r1.options,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:D2,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case A2:return Object(c.a)(Object(c.a)({},e),t.payload);default:return e}})),t1)),U2=L2(r1.inventories,[a1.load,a1.loadComplete,a1.error]),V2=L2(r1.readyToReturn,[a1.load,a1.loadComplete,a1.error]),B2=L2(r1.returnedItems,[a1.load,a1.loadComplete,a1.error]),J2=L2(r1.itemsInStorage,[a1.load,a1.loadComplete,a1.error]),z2=L2(r1.storageUsage,[a1.load,a1.loadComplete,a1.error]),q2=L2(r1.toReturnDisposeJobs,[a1.load,a1.loadComplete,a1.error]),W2=L2(r1.returnedDisposedJobs,[a1.load,a1.loadComplete,a1.error]),H2=L2(r1.warehouseInfo,[a1.load,a1.loadComplete,a1.error]),G2=(L2(r1.jobsNewInventory,[a1.load,a1.loadComplete,a1.error]),L2(r1.storageSpaces,[a1.load,a1.loadComplete,a1.error]),function(e,t,n){return iS(U2[a1.load],U2[a1.loadComplete],U2[a1.error],(function(){return N2.getInventories(e,t,n)}))}),Y2=function(e,t,n){return iS(J2[a1.load],J2[a1.loadComplete],J2[a1.error],(function(){return N2.getStorageItems(e,t,n)}))},Q2=function(e,t,n){return iS(V2[a1.load],V2[a1.loadComplete],V2[a1.error],(function(){return N2.getReadyToReturn(e,t,n)}))},K2=function(e,t,n){return iS(B2[a1.load],B2[a1.loadComplete],B2[a1.error],(function(){return N2.getReturned(e,t,n)}))},Z2=function(e,t){return iS(z2[a1.load],z2[a1.loadComplete],z2[a1.error],(function(){return N2.getStorageUsage(e,t)}))},X2=function(e,t){return iS(q2[a1.load],q2[a1.loadComplete],q2[a1.error],(function(){return N2.getToReturnDisposeJobs(e,t)}))},$2=function(e,t){return iS(W2[a1.load],W2[a1.loadComplete],W2[a1.error],(function(){return N2.getReturnedDisposedJobs(e,t)}))},e5=function(e){return iS(H2[a1.load],H2[a1.loadComplete],H2[a1.error],(function(){return N2.getWarehouseInfo(e)}))},t5=function(e){return t=A2,n=e,function(e){e({type:t,payload:n})};var t,n};function n5(e,t){return e.warehousing[t]}function r5(e){return n5(e,r1.options)}var a5=oS(R2),o5=function(e){return a5.toggle(e.id)},i5=oS(I2),c5=function(e){return i5.toggleEntity({itemId:e.inventory_item.id,containerId:e.container.id})},s5="Steamatic/Manage/FormOptions/SET_FORM_OPTIONS_DATA",l5="Steamatic/Manage/FormOptions/SET_FLOORING_TYPES",u5="Steamatic/Manage/FormOptions/SET_BELONGS_TO_LOCATION",d5="Steamatic/Manage/FormOptions/SET_SELECTED_TASK_DATA",p5="Steamatic/Manage/FormOptions/SET_TASK_OPTIONS_DATA",h5="Steamatic/Manage/FormOptions/SET_SUB_TASK_OPTIONS_DATA",b5="Steamatic/Manage/FormOptions/SET_SELECTED_SUB_TASK_DATA",f5="Steamatic/Manage/FormOptions/SET_SUB_TASK_OF_TASK_DATA",m5={formOptionData:[],flooringTypes:[],locations:[],tasksOptions:[],selectedTask:{id:0,name:"",can_be_scheduled:!1,default_duration_minutes:0,kpi_hours:0,kpi_include_afterhours:!1,deleted_at:null,color:"#000000",allow_edit_due_date:!1,can_be_scheduled_obj:{id:2,value:!1,name:"No"},allow_edit_due_date_obj:{id:2,value:!1,name:"Unable to edit due date"},kpi_include_afterhours_obj:{id:2,value:!1,name:"No"}},subTasksOptions:[],selectedSubTask:{id:0,job_task_type_id:0,name:"",default_crew_note:"",job_task_type:{},deleted_at:null,created_at:null,updated_at:null},subTaskOfTaskList:[]},j5=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case s5:return Object(c.a)(Object(c.a)({},e),{},{formOptionData:Object(c.a)(Object(c.a)({},e.formOptionData),t.payload)});case l5:return Object(c.a)(Object(c.a)({},e),{},{flooringTypes:Object(c.a)(Object(c.a)({},e.flooringTypes),t.payload)});case u5:return Object(c.a)(Object(c.a)({},e),{},{locations:t.payload});case p5:return Object(c.a)(Object(c.a)({},e),{},{tasksOptions:t.payload});case d5:return Object(c.a)(Object(c.a)({},e),{},{selectedTask:t.payload});case h5:return Object(c.a)(Object(c.a)({},e),{},{subTasksOptions:t.payload});case b5:return Object(c.a)(Object(c.a)({},e),{},{selectedSubTask:t.payload});case f5:return Object(c.a)(Object(c.a)({},e),{},{subTaskOfTaskList:t.payload});default:return e}},v5="TEXTHEADING",O5="FONTSTYLE",g5="FONTCOLOR",x5="TEXTHEADING_BULLET",y5="FONTSTYLE_BULLET",w5="FONTCOLOR_BULLET",_5="TEXTDESC",k5="UPDATE_NUMERICAL_LIST",S5="UPDATE_BULLET_LIST",C5="DRAG_START",N5="REQUESTCOSTLIST",E5="REQUESTCOSTLIST_SUCCESS",A5="REQUESTCOSTLIST_FAIL",T5="AR_REPORT_REQUEST",I5="AR_REPORT_SUCCESS",R5="AR_REPORT_FAIL",D5="SET_TOGGLE_SELECTED",M5={heading:{text:"Enter your text here...",id:""},fontStyleData:{style:"normal",id:""},fontColorData:{color:"#000000",id:""},description:"",numericList:[],bulletList:[],isDragStart:!1,isCostListLoad:!1,costListRes:[],costListError:void 0,isArLoad:!1,arReport:[],arReportError:void 0,selectedItems:[]},P5=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:M5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case v5:return Object(c.a)(Object(c.a)({},e),{},{heading:t.payload});case O5:return Object(c.a)(Object(c.a)({},e),{},{fontStyleData:t.payload});case g5:return Object(c.a)(Object(c.a)({},e),{},{fontColorData:t.payload});case x5:return Object(c.a)(Object(c.a)({},e),{},{heading:t.payload});case y5:return Object(c.a)(Object(c.a)({},e),{},{fontStyleData:t.payload});case w5:return Object(c.a)(Object(c.a)({},e),{},{fontColorData:t.payload});case _5:return Object(c.a)(Object(c.a)({},e),{},{description:t.payload});case k5:return Object(c.a)(Object(c.a)({},e),{},{numericList:t.payload});case S5:return Object(c.a)(Object(c.a)({},e),{},{bulletList:t.payload});case C5:return Object(c.a)(Object(c.a)({},e),{},{isDragStart:t.payload});case N5:return Object(c.a)(Object(c.a)({},e),{},{isCostListLoad:!0});case E5:return Object(c.a)(Object(c.a)({},e),{},{isCostListLoad:!1,costListRes:t.payload});case A5:case N5:return Object(c.a)(Object(c.a)({},e),{},{isCostListLoad:!1,costListError:t.payload});case T5:return Object(c.a)(Object(c.a)({},e),{},{isArLoad:t.payload});case I5:return Object(c.a)(Object(c.a)({},e),{},{isArLoad:!1,arReport:t.payload});case R5:return Object(c.a)(Object(c.a)({},e),{},{isArLoad:!1,arReportError:t.payload});case D5:return Object(c.a)(Object(c.a)({},e),{},{selectedItems:t.payload});default:return e}}}),L5=function(e){return{type:v5,payload:e}},F5=function(e){return{type:O5,payload:e}},U5=function(e){return{type:g5,payload:e}},V5=function(e){return{type:x5,payload:e}},B5=function(e){return{type:y5,payload:e}},J5=function(e){return{type:w5,payload:e}},z5=function(e){return{type:_5,payload:e}},q5=function(e){return{type:k5,payload:e}},W5=function(e){return{type:S5,payload:e}},H5=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:N5}),t.prev=1,t.next=4,dH.costItemList(e);case 4:r=t.sent,n({type:E5,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:A5,payload:null});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},G5=function(e,t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,dH.assessmentReportsGet(e,t);case 3:a=n.sent,r({type:I5,payload:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:R5,payload:null});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},Y5=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:T5,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},Q5={searchVehicles:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/operations/vehicles",{location_id:t,date:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createVehicle:function(e){return Aj.post("/v1/operations/vehicles",e)},deleteVehcile:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/operations/vehicles/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateVehcile:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,Aj.patch("/v1/operations/vehicles/".concat(t),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateVehicleStatus:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r=arguments;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,Aj.patch("/v1/operations/vehicles/".concat(t,"/status"),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},K5="Steamatic/Manage/FormOptions/SET_VEHCILE_DATA",Z5="Steamatic/Manage/FormOptions/SET_BELONGS_TO_LOCATION",X5={vehcileFormData:[],locations:[]},$5=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X5,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case K5:return Object(c.a)(Object(c.a)({},e),{},{vehcileFormData:t.payload});case Z5:return Object(c.a)(Object(c.a)({},e),{},{locations:t.payload});default:return e}},e3=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q5.searchVehicles(e);case 2:r=t.sent,n({type:K5,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},t3=function(e){return function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:K5,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},n3={getAllLocations:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/locations",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLocation:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/locations/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createLocation:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/locations",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateLocation:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/locations/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteLocation:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/locations/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},r3="Steamatic/Settings/Locations/LOAD",a3="Steamatic/Settings/Locations/LOAD_COMPLETE",o3="Steamatic/Settings/Locations/RESET",i3="Steamatic/Settings/Locations/ERROR",c3="Steamatic/Settings/Locations/CREATE_LOCATION",s3="Steamatic/Settings/Locations/UPDATE_LOCATION",l3="Steamatic/Settings/Locations/REMOVE_LOCATION",u3=Object(LO.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case a3:return t.payload;case o3:return null;case s3:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.id?Object(c.a)(Object(c.a)({},e),t.payload.data):e}))}):null;case l3:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.id}))}):null;case c3:return e?Object(c.a)(Object(c.a)({},e),{},{data:[t.payload.locations].concat(Object(Dm.a)(e.data))}):null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case i3:return t.payload;case a3:case o3:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case r3:return!0;case a3:case o3:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case a3:return!0;case o3:return!1;default:return e}}}),d3=Object(LO.combineReducers)({form:oK.a,user:_P,jobsInfo:Lw,contacts:bS,notesAndReplies:ED,editedReply:xM,currentJob:YR,currentJobPhotos:OV,currentJobDocuments:Kz,currentJobSurvey:pL,currentJobContacts:JP,invoices:lK,invoice:AK,invoicesInfo:WK,purchaseOrdersInfo:OX,purchaseOrders:gX,purchaseOrder:LX,creditNotesInfo:yZ,creditNotes:hZ,creditNote:DZ,modal:kw,forwardPayments:A$,forwardPaymentsReceived:R$,forwardPaymentsReceivedInfo:M$,receivePayments:t0,finance:t$,accountTransactions:i0,runsFromLocation:p0,constants:m0,invoicePayments:D0,materials:g0,measureUnits:_0,contactStatuses:E0,financialReport:q0,eqipments:F0,allCountries:s1,allStates:p1,trialBalance:j1,gstSummary:y1,jobTags:S1,assessmentReports:M1,currentJobUsageAndActuals:UH,userRoles:B1,inventories:f2,warehousing:F2,formOption:j5,vehcileFormOption:$5,document:P5,waterForm:fQ,locations:u3}),p3=(n(876),[aK.a]),h3=Object(LO.createStore)(d3,Object(rK.composeWithDevTools)(LO.applyMiddleware.apply(void 0,p3))),b3=function(e){var t;try{t=JSON.parse(e.body)}catch(n){t={sender:{},context:{},target:{}}}return{id:e.id,user_id:e.user_id,body:t,created_at:e.created_at,deleted_at:e.deleted_at,type:e.type}};function f3(){var e=Object(f.a)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ","\n  width: 36px;\n  height: 36px;\n  border-radius: 99px;\n  border: 10px solid ","4a;\n  background-clip: padding-box;\n  margin-right: 8px;\n"]);return f3=function(){return e},e}var m3=BS.ColoredDiv,j3=x.default.div(f3(),y.white,y.orange1,y.orange1),v3=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return Object(a.jsx)("table",{onClick:n,children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(j3,{children:"!"})}),Object(a.jsx)("td",{children:Object(a.jsx)(m3,{weight:Bf.medium,fontSize:Vf.medium,children:e})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsx)(m3,{color:y.gray5,children:t})})]})]})})};function O3(e){var t=e.title,n=void 0===t?"Notification":t,r=e.body,a=e.icon,o=e.onClick;if(document.hasFocus())Qm(Vm.Info,v3(n,r,o),{autoClose:2e4});else if("Notification"in window)if("granted"===Notification.permission){var i=new Notification(n,{body:r,icon:a});o&&(i.onclick=o)}else"denied"!==Notification.permission&&Notification.requestPermission((function(e){var t=new Notification(n,{body:r,icon:a});o&&(t.onclick=o)}));else Qm(Vm.Info,v3(n,r,o),{autoClose:1e4});g3()}var g3=Object(m.debounce)((function(){h3.dispatch(SP())}),1e3);function x3(e,t){var n=[];for(var r in $g)$g[r]&&n.push($g[r]);var a=aj().private("user-".concat(e));n.forEach((function(e){a.listen(".".concat(e),(function(n){e===$g.JOB_CREATED&&"/jobs/inbox"===t.location.pathname&&uy.emit($g.JOB_CREATED),function(e,t){var n=b3(e.notification);if(n.body){var r=n.body,a=r.text,o=r.sender;O3({body:a,icon:o&&o.avatar&&o.avatar.url,onClick:y3(n,t,!0)})}}(n,t)}))}))}function y3(e,t,n){var r=function(r){return Object(Um.a)(Fm.a.mark((function a(){return Fm.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.push(r),!n){a.next=5;break}return a.next=4,uE.removeNotification(e.id);case 4:h3.dispatch(SP());case 5:case"end":return a.stop()}}),a)})))},a=[$g.JOB_CREATED,$g.JOB_USER_ASSIGNED,$g.JOB_UPDATED,$g.JOB_TEAM_ASSIGNED],o=[$g.JOB_MESSAGE_ATTACHED,$g.JOB_NOTE_ATTACHED],i=[$g.INVOICE_NOTE_ATTACHED,$g.INVOICE_APPROVE_REQUEST],c=[$g.PURCHASE_ORDER_NOTE_ATTACHED,$g.PURCHASE_ORDER_APPROVE_REQUEST],s=[$g.CREDIT_NOTE_NOTE_ATTACHED,$g.CREDIT_NOTE_APPROVE_REQUEST],l=e.body.context&&e.body.context.type,u=e.body.context&&e.body.context.id,d=e.body.target&&e.body.target.id,p="/job/".concat(d,"/details"),h="/job/".concat(d,"/notes-and-replies?").concat(l,"=").concat(u),b="/contacts/category/edit/".concat(d,"?").concat(l,"=").concat(u),f="/finance/invoices/details/".concat(d,"?").concat(l,"=").concat(u),m="/finance/purchase-orders/details/".concat(d,"?").concat(l,"=").concat(u),j="/finance/credit-notes/details/".concat(d,"?").concat(l,"=").concat(u);if(a.includes(e.type))return r(p);if(o.includes(e.type))return r(h);if($g.CONTACT_NOTE_ATTACHED===e.type)return r(b);if(i.includes(e.type))return r(f);if(c.includes(e.type))return r(m);if(s.includes(e.type))return r(j);if([$g.USER_MENTIONED].includes(e.type))switch(e.body.target.type){case Xg.Job:return r(h);case Xg.Contact:return r(b);case Xg.Invoice:return r(f);case Xg.PurchaseOrder:return r(m);case Xg.CreditNote:return r(j)}return function(){return null}}function w3(){var e=Object(f.a)(["\n  overflow-y: auto;\n  max-height: calc(100vh - 160px);\n"]);return w3=function(){return e},e}function _3(){var e=Object(f.a)(["\n  padding: 10px 20px;\n  border-bottom: 1px solid ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n  }\n\n  :last-child {\n    border: 0;\n  }\n"]);return _3=function(){return e},e}function k3(){var e=Object(f.a)(["\n  padding: 0 20px;\n  height: 60px;\n  border-bottom: 1px solid ",";\n\n  & > .title {\n    font-size: ",";\n  }\n"]);return k3=function(){return e},e}function S3(){var e=Object(f.a)(["\n  width: 420px;\n  position: absolute;\n  overflow: hidden;\n  right: -30px;\n  top: 0;\n  background: ",";\n  color: ",";\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 4px;\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);\n"]);return S3=function(){return e},e}function C3(){var e=Object(f.a)(["\n  width: 100%;\n  position: relative;\n  top: 0px;\n\n  :before {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-color: transparent transparent "," transparent;\n    z-index: 99;\n  }\n"]);return C3=function(){return e},e}var N3=x.default.div(C3(),y.white),E3=x.default.div(S3(),y.white,y.black0),A3=x.default.div(k3(),y.gray2,Vf.medium),T3=x.default.div(_3(),y.gray2,y.gray0),I3=x.default.div(w3()),R3=BS.Link,D3=BS.AvatarSquare,M3=BS.ColoredDiv,P3=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.showNotification=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=b3(n),a=e.props,o=a.dispatch,i=a.closeDropDown,c=a.history,e.setState({loading:!0}),y3(r,c)(),i(),n.deleted_at){t.next=10;break}return t.next=8,uE.removeNotification(n.id);case 8:return t.next=10,o(SP());case 10:e.setState({loading:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showTheseAll=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.notifications.forEach((function(e){O3({body:b3(e).body.text})})),e.markAllAsRead();case 3:case"end":return t.stop()}}),t)}))),e.markAllAsRead=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.dispatch,!((r=e.getUnreadNotifications().map((function(e){return uE.removeNotification(e.id)}))).length>0)){t.next=9;break}return e.setState({loading:!0}),t.next=6,Promise.all(r);case 6:return t.next=8,n(SP());case 8:e.setState({loading:!1});case 9:case"end":return t.stop()}}),t)}))),e.getUnreadNotifications=function(){return e.props.notifications.filter((function(e){return!e.deleted_at}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.notifications,r=t.user.userNotifications.loading,o=this.state.loading,i=this.getUnreadNotifications().length;return Object(a.jsx)(N3,{className:"d-flex justify-content-center",children:Object(a.jsxs)(E3,{children:[Object(a.jsxs)(A3,{className:"d-flex align-items-center justify-content-between",children:[Object(a.jsx)("div",{className:"title",children:"Notifications"}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(R3,{onClick:this.showTheseAll,margin:"0 15px 0 0",children:"Show all"}),i>0&&Object(a.jsx)(R3,{onClick:this.markAllAsRead,children:"Mark all as read"})]})]}),Object(a.jsx)(I3,{children:n&&n.map((function(t){var n=b3(t).body,r=n.text,o=n.sender,i=Yf(o);return Object(a.jsxs)(T3,{className:"d-flex align-items-center",onClick:function(){return e.showNotification(t)},children:[Object(a.jsx)(D3,{wh:35,margin:"0 20px 0 0",backgroundColor:o?void 0:"transparent",backgroundUrl:o&&o.avatar&&o.avatar.url,fontSize:Vf.medium,children:!i.invalid&&i.initials}),Object(a.jsxs)("div",{children:[Object(a.jsx)(M3,{weight:t.deleted_at?Bf.normal:Bf.bold,textOverflow:"ellipsis",children:r}),Object(a.jsxs)(M3,{color:y.gray5,textOverflow:"ellipsis",children:[!i.invalid&&"".concat(i.full_name,", "),qf()(t.created_at).format(Uj)]})]})]},t.id)}))}),(r||o)&&Object(a.jsx)(av,{size:40,color:y.white})]})})}}]),n}(p.PureComponent),L3=Object(LO.compose)(v.g,Object(b.b)((function(e){return{user:e.user}})))(P3);function F3(){var e=Object(f.a)(["\n  & * {\n    stroke: "," !important;\n    fill: "," !important;\n  }\n\n  &:hover * {\n    stroke: "," !important;\n    fill: "," !important;\n  }\n"]);return F3=function(){return e},e}var U3,V3,B3=Object(x.default)(Kj(["color","fill","hoverColor"])(Ff))(F3(),(function(e){return e.color}),(function(e){return e.fill&&e.color}),(function(e){return e.hoverColor?e.hoverColor:e.color}),(function(e){return e.fill&&(e.hoverColor?e.hoverColor:e.color)})),J3=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.fill,r=e.hoverColor;return Object(a.jsx)(B3,Object(c.a)(Object(c.a)({},this.props),{},{color:t,fill:n,hoverColor:r}))}}]),n}(p.PureComponent),z3=n(190),q3=n.n(z3);!function(e){e.space="wh:s",e.container="wh:c",e.inventory="wh:i",e.inventory_item="wh:ii",e.equipment="lme:eq"}(V3||(V3={}));var W3,H3,G3,Y3=(U3={},Object(k.a)(U3,V3.space,"space"),Object(k.a)(U3,V3.container,"container"),Object(k.a)(U3,V3.inventory,"inventory"),Object(k.a)(U3,V3.inventory_item,"inventory item"),Object(k.a)(U3,V3.equipment,"equipment"),U3);!function(e){e.IN_PROGRESS="In-Progress",e.DISPOSED="Disposed",e.COMPLETED="Completed",e.PROCESSED="Processed",e.NEW="New"}(W3||(W3={})),function(e){e.IN_PROGRESS="In-Progress",e.RESTORABLE="Restorable",e.NON_RESTORABLE="Non-Restorable",e.AWAITING_DISPOSAL_AUTHORITY="Awaiting Disposal Authority",e.READY_FOR_RETURN="Ready For Return",e.READY_TO_DISPOSE="Ready To Dispose",e.DISPOSED="Disposed",e.CLIENT_PICKED_UP="Client Picked Up",e.NEW="New",e.RETURNED="Returned"}(H3||(H3={})),function(e){e.DISPOSED="Disposed",e.CLIENT_PICKED_UP="Client Picked Up",e.RETURNED="Returned"}(G3||(G3={}));var Q3=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.processing=!1,e.handleScan=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing){t.next=24;break}if(e.processing=!0,e.setState({working:!0}),!n){t.next=22;break}if(t.prev=4,r=JSON.parse(atob(n)),(o=Object.keys(V3).map((function(e){return V3[e]}))).includes(r.t)){t.next=11;break}e.setState({error:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Unsupported type ",Y3[r.t]||r.t," in global scan. Please try another QR Code."]}),Object(a.jsx)("p",{className:"text-info",children:"Only following types can be scanned using global scan option"}),Object(a.jsx)("ul",{className:"text-info pl-0",children:o.map((function(e){return Object(a.jsx)("ol",{children:Y3[e]},e)}))})]})}),t.next=16;break;case 11:return t.next=13,e.fetchScannedItem(r);case 13:i=t.sent,e.setState({error:void 0,result:Object(c.a)(Object(c.a)({},r),{},{item:i})}),e.publishScanHistory(r.t,i);case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(4),console.log(t.t0),e.setState({error:"Invalid QR Code. Please try another QR Code."});case 22:e.processing=!1,e.setState({working:!1});case 24:case"end":return t.stop()}}),t,null,[[4,18]])})));return function(e){return t.apply(this,arguments)}}(),e.handleError=function(t){e.setState({error:t.message}),console.error(t.message)},e.publishScanHistory=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dm();case 3:r=e.sent,e.t0=t,e.next=e.t0===V3.equipment?7:9;break;case 7:return dH.saveEquipmentScannedLocation(n.id,{location:"(".concat(r.coords.latitude,",").concat(r.coords.longitude,")")}),e.abrupt("break",9);case 9:e.next=13;break;case 11:e.prev=11,e.t1=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),e.fetchScannedItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n||e.state.result||{},a=r.t,o=r.id,r.pid,t.t0=a,t.next=t.t0===V3.inventory?4:t.t0===V3.inventory_item?7:t.t0===V3.equipment?10:t.t0===V3.space?13:t.t0===V3.container?16:19;break;case 4:return t.next=6,d2.getInventoryInfo(o);case 6:return t.abrupt("return",t.sent.data);case 7:return t.next=9,d2.getInventoryItem(o);case 9:return t.abrupt("return",t.sent.data);case 10:return t.next=12,dH.getEquipmentInfo(o);case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,N2.getStorageSpace(o);case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,N2.getStorageContainer(o);case 18:return t.abrupt("return",t.sent);case 19:return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLink=function(t){t.preventDefault();var n=t.currentTarget.getAttribute("href");n&&e.props.history.push(n),e.props.onClose()},e.renderScanResult=function(t){var n=t||e.state.result||{},r=n.t,o=(n.id,n.pid,n.item),i=null;switch(r){case V3.inventory:return i=o.status===W3.NEW?"new":"continued",Object(a.jsxs)("a",{href:"/operations/warehousing/inventories/".concat(i,"/").concat(o.id,"/items"),onClick:e.handleLink,children:["View details of inventory #",o.id]});case V3.inventory_item:return i="continued",Object(a.jsxs)("a",{href:"/operations/warehousing/inventories/".concat(i,"/").concat(o.inventory_id,"/item/").concat(o.id,"/details"),onClick:e.handleLink,children:["View details of inventory item #",o.id]});case V3.equipment:return Object(a.jsxs)("a",{href:"/operations/warehousing/equipment/".concat(o.id,"/details"),onClick:e.handleLink,children:["View details of equipment #",o.id," - ",o.equipment_category.name]});case V3.space:return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Storage Location"})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Location: "})," ",o.location.name]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Storage Type: "})," ",o.inventory_storage_space_type.name," [",Object(a.jsxs)("span",{className:"badge badge-warning",children:[o.inventory_storage_space_type.is_chargeable?"":"Not ","Chargeable"]}),"]"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Name: "})," ",o.name]})]});case V3.container:return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Storage Container"})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Container Type: "})," ",o.inventory_storage_container_type.name]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Label: "})," ",o.label]})]})}return null},e.renderModalBody=function(){var t=e.state,n=t.error,r=t.result;return Object(a.jsxs)("div",{className:"qr-reader-wrapper",children:[n&&Object(a.jsx)("p",{className:"p-3 text-danger",children:n}),r&&Object(a.jsx)("div",{className:"p-3",children:e.renderScanResult(r)}),!r&&Object(a.jsx)(q3.a,{delay:300,onError:e.handleError,onScan:e.handleScan,onImageLoad:function(e){console.log("a",e)},style:{width:"100%"}})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=(e.title,e.onClose),r=this.state.working;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{bodyClass:"p-0",onClose:n,loading:r,title:"Scan QR Code",body:this.renderModalBody()})})}}]),n}(p.PureComponent),K3=Object(v.g)(Q3);function Z3(){var e=Object(f.a)(["\n  color: ",";\n  :hover {\n    color: ",";\n  }\n"]);return Z3=function(){return e},e}function X3(){var e=Object(f.a)(["\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  right: 1px;\n  top: 1px;\n  border-radius: 9px;\n  border: 1.1px solid ",";\n  background: ",";\n"]);return X3=function(){return e},e}function $3(){var e=Object(f.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 10px;\n"]);return $3=function(){return e},e}function e4(){var e=Object(f.a)(["\n  cursor: pointer;\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: none;\n  }\n  ","\n"]);return e4=function(){return e},e}function t4(){var e=Object(f.a)(["\n  background: ",";\n  height: 55px;\n  padding: 0 15px;\n"]);return t4=function(){return e},e}var n4=x.default.nav(t4(),y.menu),r4=Object(x.default)(Ff)(e4(),y.white,(function(e){var t=e.brightness;return t?"filter: brightness(".concat(t,")"):""})),a4=x.default.div($3()),o4=x.default.div(X3(),y.white,y.red1),i4=Object(Ym.css)({"& .dropdown-menu":{border:"0",background:"transparent",padding:"0"}}),c4=Object(x.default)(Uf.b)(Z3(),(function(e){return e.active?y.white:y.gray2}),y.white),s4=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showNotifications:!1},e.isRouteItemActive=function(t){return t.isActive?t.isActive():Object(v.f)(e.props.location.pathname,{path:t.path})},e.renderNotificationMenu=function(t){return Object(a.jsx)(L3,{closeDropDown:t.close,notifications:e.props.user.userNotifications.data.data})},e.getUnreadNotifications=function(){return e.props.user.userNotifications.data.data.filter((function(e){return!e.deleted_at}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"scan":return Object(a.jsx)(K3,Object(c.a)({onClose:e.hideModal,isOpen:!0},r))}return null},e.renderDropdownTrigger=function(t){return function(n){return Object(a.jsx)(c4,{to:"#",active:!!e.isRouteItemActive(t),className:"nav-link",onClick:n.toggle,style:{cursor:"pointer"},children:t.name})}},e.renderDropdownItems=function(t){return function(n){return Object(a.jsx)(a.Fragment,{children:t.items.map((function(t,r){return Object(a.jsxs)(p.Fragment,{children:[0!==r&&Object(a.jsx)("div",{className:"dropdown-divider"}),t.map((function(t){var r=g()("dropdown-item",{active:e.isRouteItemActive(t)});return Object(a.jsx)(Uf.b,{to:t.path,className:r,onClick:n.close,children:t.name},t.path)}))]},r)}))})}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(SP())}},{key:"render",value:function(){var e=this,t=this.props,n=t.routes,r=t.user.userNotifications,o=r.data,i=r.loading,c=t.location.pathname,s=this.getUnreadNotifications().length;return Object(a.jsxs)(n4,{className:"navbar navbar-expand-lg navbar-dark fixed-top justify-content-between flex-nowrap",children:[this.renderModal(),Object(a.jsx)("div",{className:"h-100 d-flex align-items-center flex-nowrap",children:n.map((function(t){return Object(a.jsx)("div",{children:t.items?Object(a.jsx)(fw,{trigger:e.renderDropdownTrigger(t),menu:e.renderDropdownItems(t)}):Object(a.jsx)(c4,{active:!!e.isRouteItemActive(t),to:t.path,className:"nav-link",children:t.name})},t.path)}))}),Object(a.jsxs)("div",{className:"d-flex align-items-center h-100",children:[Object(a.jsx)(a4,{children:Object(a.jsx)(J3,{style:{cursor:"pointer"},color:y.white,fill:!0,name:Ef.QRCode,onClick:this.showModal("scan")})}),Object(a.jsx)(a4,{children:!c.startsWith("/operations/schedule/")&&Object(a.jsx)(J3,{style:{cursor:"pointer"},color:y.white,name:Ef.Printer,onClick:window.print})}),Object(a.jsx)(yw,{direction:"right",className:"".concat(i4),trigger:function(){return Object(a.jsxs)(a4,{children:[i&&Object(a.jsx)(av,{size:30,color:y.menu}),o.data.length>0&&Object(a.jsx)(Jf.a,{className:"overlapping",id:"user-notifications",place:"left",effect:"solid"}),s>0&&Object(a.jsx)(o4,{}),Object(a.jsx)(r4,{name:Ef.Notification,"data-tip":o.data&&(s>0?"You have ".concat(s>9?"more than ":"").concat(s," unread notification").concat(s>1?"s":""):""),"data-for":"user-notifications",size:20})]})},renderInternal:this.renderNotificationMenu}),Object(a.jsx)(a4,{children:Object(a.jsx)(r4,{name:Ef.Search,size:20})}),Object(a.jsx)(nK,{})]})]})}}]),n}(p.PureComponent),l4=Object(LO.compose)(v.g,Object(b.b)((function(e){return{user:e.user}})))(s4),u4=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onClose=function(){var t=e.props,n=t.onClose,r=t.onReject,a=t.hash;r&&r();var o=new CustomEvent("modal-confirm-".concat(a||""),{detail:!1});window.dispatchEvent(o),n()},e.onSuccess=function(){var t=e.props,n=t.onClose,r=t.onResolve,a=t.hash;r&&r();var o=new CustomEvent("modal-confirm-".concat(a||""),{detail:!0});window.dispatchEvent(o),n()},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary btn-confirm",onClick:this.onSuccess,autoFocus:!0,children:"Confirm"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.body;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:this.onClose,footer:this.renderFooter(),body:r,title:n||""})})}}]),n}(p.PureComponent);function d4(){var e=Object(f.a)(["\n  background: ",";\n  padding: 20px;\n  color: ",";\n"]);return d4=function(){return e},e}var p4=x.default.h1(d4(),y.red1,y.white),h4=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"container h-100",children:Object(a.jsx)("div",{className:"row align-items-center justify-content-center h-100",children:Object(a.jsxs)("div",{className:"col-lg-12",children:[Object(a.jsx)(p4,{children:"Unauthorized Access"}),"You don't have permission to access this page"]})})})}}]),n}(p.PureComponent);var b4=function(e){var t=e.loading,n=e.searchPlaceholder,r=e.disableActions,o=e.children,i=e.hint,c=e.onAddAction,s=e.searchLoading,l=e.onSearch,u=e.otherActions;return Object(a.jsxs)(Im,{children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right",id:"finance-sidebar-tooltip"}),Object(a.jsx)(_.Consumer,{children:function(e){return e.isOpen&&Object(a.jsx)("div",{className:"pl-4 pr-5 my-4",children:Object(a.jsx)(ES,{loading:!!s,onSearchValueChange:l,placeholder:n||"Search..."})})}}),Object(a.jsxs)("div",{className:"position-relative",children:[t&&Object(a.jsx)(av,{size:40,color:y.gray1}),o]}),Object(a.jsx)(Gk,{className:"d-flex flex-row align-items-center",children:r?Object(a.jsx)(a.Fragment,{}):u&&(null===u||void 0===u?void 0:u.length)<=0?Object(a.jsx)(Wk,{name:Ef.Add,"data-tip":i,"data-for":"finance-sidebar-tooltip",onClick:c}):Object(a.jsx)(yw,{iconName:Ef.Add,items:u,disabled:!(null===u||void 0===u?void 0:u.length)})})]})};function f4(){var e=Object(f.a)(["\n  color: ",";\n"]);return f4=function(){return e},e}var m4=x.default.span(f4(),y.gray5),j4=function(e){var t=e.job,n=e.withoutName,r=e.locationOnly,o=!(void 0!==r&&r)&&t&&t.insurer?t.insurer.contact_name||t.insurer.legal_name:"",i=t&&t.owner_location&&t.owner_location.code;return Object(a.jsx)(m4,{children:t?Object(a.jsxs)(a.Fragment,{children:[t.id,i&&"-".concat(i),n?"":o&&": ".concat(o)]}):Object(a.jsx)(a.Fragment,{children:"\xa0\xa0\xa0\u2014\xa0\xa0\xa0"})})};function v4(e){return e.substr(0,23).replace(/[^\d\s]|\s(?=\s)/g,"").replace(/(^\d{4}|\s+\d{4})(\d)/g,"$1 $2")}function O4(e){return function(e){return e.toUpperCase()}(e).replace(/[^a-zA-Z\s\.'-]/g,"").replace(/\s+/g," ")}function g4(e){var t=Zf(e.replace(/[^\d\.]/g,"").replace(/(\.\d\d)(\d)/g,"$1"));return t?"$ ".concat(t):""}function x4(e){return e.replace(/\D/g,"")}function y4(e){return e.replace(/[^\d\.]/g,"").replace(/(\.)(\d*)(\.)$/g,"$1$2")}function w4(e){var t=y4(e);return parseFloat(t)>100?"100":t}function _4(){var e=Object(f.a)(["\n  font-size: ",";\n  line-height: 0.7;\n"]);return _4=function(){return e},e}function k4(){var e=Object(f.a)(["\n  color: ",";\n"]);return k4=function(){return e},e}function S4(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return S4=function(){return e},e}function C4(){var e=Object(f.a)(["\n  line-height: 1.75;\n  font-size: ",";\n"]);return C4=function(){return e},e}function N4(){var e=Object(f.a)(["\n  flex-basis: 210px;\n  text-align: left;\n  background: ",";\n  padding: 15px 20px;\n"]);return N4=function(){return e},e}function E4(){var e=Object(f.a)(["\n  flex-basis: 100%;\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 15px 20px;\n"]);return E4=function(){return e},e}function A4(){var e=Object(f.a)(["\n  display: flex;\n  width: calc(100% + 40px);\n  margin: -30px -20px 15px;\n"]);return A4=function(){return e},e}var T4=x.default.div(A4()),I4=x.default.div(E4(),y.gray1,y.gray2),R4=x.default.div(N4(),y.gray2),D4=x.default.span(C4(),Vf.medium),M4=x.default.div(S4(),Bf.bold),P4=x.default.div(k4(),y.gray4),L4=Object(x.default)(P4)(_4(),Vf.smaller),F4=function(e){var t=e.invoiceData,n=e.showRate;return Object(a.jsxs)(T4,{children:[Object(a.jsxs)(I4,{children:[Object(a.jsxs)(M4,{children:["Invoice No. #",t.id]}),Object(a.jsx)(M4,{children:t.recipient_name}),t.job&&Object(a.jsxs)(P4,{children:["Job No. #",t.job.id,t.job.assigned_location&&Object(a.jsxs)("span",{children:["\u2013",t.job.assigned_location.code]})]})]}),Object(a.jsxs)(R4,{children:[Object(a.jsx)("div",{children:"AMOUNT TO PAY"}),Object(a.jsx)(M4,{children:Object(a.jsx)(D4,{children:t.amount_due&&Kf(t.amount_due)})}),n&&Object(a.jsx)(L4,{children:"PLUS 1.75% + 30c"})]})]})};function U4(){var e=Object(f.a)(["\n  margin-top: 20px;\n  padding-top: 35px;\n  border-top: 1px solid ",";\n"]);return U4=function(){return e},e}function V4(){var e=Object(f.a)(["\n  margin-top: -3px;\n  margin-right: 12px;\n"]);return V4=function(){return e},e}function B4(){var e=Object(f.a)(["\n  background: ",";\n  border-color: ",";\n"]);return B4=function(){return e},e}function J4(){var e=Object(f.a)(["\n  background: ",";\n  border-color: ",";\n"]);return J4=function(){return e},e}function z4(){var e=Object(f.a)(["\n  width: 100%;\n  margin-top: 25px;\n  padding: 10px 15px;\n  border-style: solid;\n  border-width: 1px 1px 1px 8px;\n"]);return z4=function(){return e},e}function q4(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return q4=function(){return e},e}var W4=x.default.form(q4()),H4=x.default.div(z4()),G4=Object(x.default)(H4)(J4(),y.orange0,y.orange1),Y4=Object(x.default)(H4)(B4(),y.green1,y.green2),Q4=Object(x.default)(Ff)(V4()),K4=x.default.div(U4(),y.gray2),Z4=function(e){var t=e.message;return Object(a.jsxs)(G4,{children:[Object(a.jsx)(Q4,{name:Ef.Alert,size:18}),t]})},X4=function(){return Object(a.jsx)(Y4,{children:"Your payment was successful."})},$4=function(e){var t=e.receipt;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row mt-5",children:[Object(a.jsx)("div",{className:"col-3",children:"Date Paid:"}),Object(a.jsx)("div",{className:"col-3",children:t.paid_at.format(Pj)})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Receipt Number:"}),Object(a.jsx)("div",{className:"col-3",children:t.external_transaction_id||t.transaction_id})]}),Object(a.jsxs)("div",{className:"row mt-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Amount:"}),Object(a.jsx)("div",{className:"col-3",children:Kf(t.amount)})]})]})},e7=n(570),t7=n.n(e7);function n7(){var e=Object(f.a)(["\n  max-width: 120px;\n  flex-basis: 40%;\n  margin: 0 5px;\n  &:first-child {\n    margin-right: 25px;\n  }\n  &.no-label-input {\n    margin-top: 2rem;\n  }\n"]);return n7=function(){return e},e}var r7=x.default.div(n7()),a7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hasReceipt:!1,errorMessage:"",securityLabel:"CVV",securityMask:Eg},e.receipt=void 0,e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.onSubmit(n);case 3:return e.receipt=t.sent,e.setState({hasReceipt:!0,errorMessage:""}),t.abrupt("return",e.receipt);case 8:return t.prev=8,t.t0=t.catch(0),e.setState({errorMessage:t.t0.error_message,fieldErrors:t.t0.fields}),t.abrupt("return",Promise.reject());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.receipt=void 0,e.setState({hasReceipt:!1,errorMessage:""}),e.props.reset(),e.props.onClose()},e.onChangeCardNumber=function(t){var n,r=t7.a.number(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value);if(r.isValid){var a,o,i,c,s=3===(null===(a=r.card)||void 0===a||null===(o=a.code)||void 0===o?void 0:o.size)?"999":Eg;e.setState({securityLabel:null===(i=r.card)||void 0===i||null===(c=i.code)||void 0===c?void 0:c.name,securityMask:s})}},e.renderError=function(){var t,n,r,o=e.state,i=o.fieldErrors,c=o.errorMessage,s=[];i?(null===(t=i.cvv)||void 0===t||t.filter((function(e){return s.push(Object(a.jsx)(Z4,{message:e}))})),null===(n=i.expiry_month)||void 0===n||n.filter((function(e){return s.push(Object(a.jsx)(Z4,{message:e}))})),null===(r=i.expiry_year)||void 0===r||r.filter((function(e){return s.push(Object(a.jsx)(Z4,{message:e}))}))):s.push(Object(a.jsx)(Z4,{message:c}));return s},e.renderBody=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F4,{invoiceData:e.props.invoiceData,showRate:!0}),Object(a.jsx)(BS.Link,{onClick:e.props.onSwitchPaymentType,children:"Change to direct deposit payment"}),e.state.errorMessage&&e.renderError(),e.state.hasReceipt&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X4,{}),e.receipt&&Object(a.jsx)($4,{receipt:e.receipt})]}),!e.state.hasReceipt&&Object(a.jsxs)(W4,{onSubmit:e.props.handleSubmit(e.onSubmit),autoComplete:"off",id:"CreditCardPaymentModalForm",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(yv.a,{name:"name",component:ZO,validate:[uv,Ov],normalize:O4,label:"Name"}),Object(a.jsx)(yv.a,{name:"number",component:ZO,validate:[uv,vv],normalize:v4,label:"Card Number",onChange:e.onChangeCardNumber})]})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"d-flex col-9",children:[Object(a.jsx)(r7,{children:Object(a.jsx)(yv.a,{name:"cvv",component:ZO,validate:uv,mask:e.state.securityMask,maskChar:null,label:e.state.securityLabel})}),Object(a.jsx)(r7,{children:Object(a.jsx)(yv.a,{name:"expiry_month",component:Kv,options:n.months,validate:uv,label:"Expiry"})}),Object(a.jsx)(r7,{className:"no-label-input",children:Object(a.jsx)(yv.a,{name:"expiry_year",component:Kv,options:n.years,validate:uv})})]})}),Object(a.jsxs)(K4,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"billing_address1",component:ZO,validate:uv,label:"Billing Address"})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"billing_city",component:ZO,validate:uv,label:"City"})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"billing_country",component:ZO,validate:uv,label:"Country"})})]})]}),Object(a.jsx)(K4,{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"email",validate:[uv,jv],component:ZO,label:"Email receipt to:"})})})})]})]})},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",type:"submit",form:"CreditCardPaymentModalForm",disabled:this.props.submitting||this.props.invalid||this.props.invoiceData.amount_due<0,children:"Pay Now"})}},{key:"render",value:function(){return Object(a.jsx)(vO,{isOpen:this.props.isOpen,children:Object(a.jsx)(PO,{onClose:this.onClose,footer:this.state.hasReceipt?void 0:this.renderFooter(),closeCaption:this.state.hasReceipt?"Close":"Cancel",body:this.renderBody(),loading:this.props.submitting,title:"Payment: Credit Card"})})}}]),n}(p.PureComponent);a7.months=Object(m.range)(1,13).map((function(e){return{value:e,label:e<10?"0".concat(e):"".concat(e)}})),a7.years=function(){var e=(new Date).getFullYear();return Object(m.range)(e,e+10).map((function(e){return{value:e,label:e}}))}();var o7=Object(Gj.a)({form:"InvoicePaymentCreditCard"})(a7);function i7(){var e=Object(f.a)(["\n  margin-top: 23px;\n  color: ",";\n"]);return i7=function(){return e},e}var c7,s7=x.default.div(i7(),y.gray4),l7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={glAccountInfoLine1:"",glAccountInfoLine2:"",hasReceipt:!1,errorMessage:""},e.receipt=void 0,e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.onSubmit(n);case 3:return e.receipt=t.sent,e.setState({hasReceipt:!0}),t.abrupt("return",e.receipt);case 8:return t.prev=8,t.t0=t.catch(0),e.setState({errorMessage:t.t0.error_message}),t.abrupt("return",Promise.reject());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.receipt=void 0,e.setState({hasReceipt:!1,errorMessage:""}),e.props.reset(),e.props.onClose()},e.onChangeGLAccount=function(t){e.setState({glAccountInfoLine1:"Name: ".concat(t.name),glAccountInfoLine2:"BSB: ".concat(t.bank_bsb||"-",", Account No: ").concat(t.bank_account_number||"-")})},e.validateAmount=function(t){var n=e.props.invoiceData,r=b$(t);return r<0?"Amount can't be less than 0":r>n.amount_due?"Amount can't be more than ".concat(Kf(n.amount_due)):void 0},e.renderBody=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(F4,{invoiceData:e.props.invoiceData}),Object(a.jsx)(BS.Link,{onClick:e.props.onSwitchPaymentType,children:"Change to credit card"}),e.state.errorMessage&&Object(a.jsx)(Z4,{message:e.state.errorMessage}),e.state.hasReceipt&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X4,{}),e.receipt&&Object(a.jsx)($4,{receipt:e.receipt})]}),!e.state.hasReceipt&&Object(a.jsxs)(W4,{onSubmit:e.props.handleSubmit(e.onSubmit),autoComplete:"off",id:"DirectDepositModalForm",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"amount",component:ZO,validate:[uv,e.validateAmount],label:"Amount",normalize:g4})})}),Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"paid_at",label:"Date",placeholder:"Date",component:Cy,futureEnabled:!0})})}),Object(a.jsxs)("div",{className:"row mt-1",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"gl_account_id",label:"Paid into Account",placeholder:"Select account...",component:Kv,options:e.props.glAccounts,validate:uv,getOptionLabel:KX.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},onChange:e.onChangeGLAccount})}),Object(a.jsxs)(s7,{className:"col-6",children:[Object(a.jsx)("div",{children:e.state.glAccountInfoLine1}),Object(a.jsx)("div",{children:e.state.glAccountInfoLine2})]})]}),Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"reference",component:ZO,label:"Reference",placeholder:"Optional reference number or description"})})}),Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{label:"Email receipt to:",name:"email",component:ZO,validate:jv,onChange:function(t){var n;e.props.change("email",null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value)}})})})]})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.initialValues.gl_account_id;e&&this.onChangeGLAccount(e)}},{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",type:"submit",form:"DirectDepositModalForm",disabled:this.props.submitting||this.props.invalid||this.props.invoiceData.amount_due<0,children:"Add Payment"})}},{key:"render",value:function(){return Object(a.jsx)(vO,{isOpen:this.props.isOpen,children:Object(a.jsx)(PO,{onClose:this.onClose,footer:this.state.hasReceipt?void 0:this.renderFooter(),closeCaption:this.state.hasReceipt?"Close":"Cancel",body:this.renderBody(),loading:this.props.submitting,title:"Payment: Direct Deposit"})})}}]),n}(p.PureComponent),u7=Object(Gj.a)({form:"PaymentDirectDeposit"})(l7);!function(e){e[e.DirectDeposit=0]="DirectDeposit",e[e.CreditCard=1]="CreditCard"}(c7||(c7={}));var d7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={paymentType:c7.CreditCard},e.receiveCreditCardPayment=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.receivePayment(n,m$.receiveWithCreditCard));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.receiveDirectDepositPayment=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.receivePayment(n,m$.receiveDirectDeposit));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.receivePayment=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e.props.invoice.id,n);case 2:return a=t.sent,e.props.onPaymentReceive&&e.props.onPaymentReceive(),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.switchPaymentWindow=function(){e.setState((function(e){return{paymentType:e.paymentType===c7.CreditCard?c7.DirectDeposit:c7.CreditCard}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(o$(this.props.invoice.accounting_organization_id))}},{key:"render",value:function(){var e=this.props,t=e.invoice,n=e.onClose,r=this.state.paymentType,o=t.recipient_contact&&t.recipient_contact.mailing_address;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(u7,{invoiceData:t,onSubmit:this.receiveDirectDepositPayment,isOpen:r===c7.DirectDeposit,onClose:n,onSwitchPaymentType:this.switchPaymentWindow,glAccounts:this.payableAccounts,initialValues:{email:t.recipient_contact&&t.recipient_contact.email,paid_at:qf()(),amount:void 0!==t.amount_due?Kf(t.amount_due):void 0,gl_account_id:this.payableAccounts&&this.payableAccounts.length>0&&this.payableAccounts[0]||void 0}}),Object(a.jsx)(o7,{initialValues:{email:t.recipient_contact&&t.recipient_contact.email,billing_address1:o&&o.address_line_1,billing_city:o&&o.suburb&&o.suburb.name,billing_country:o&&o.country?o.country.name:"Australia"},invoiceData:t,isOpen:r===c7.CreditCard,onSubmit:this.receiveCreditCardPayment,onClose:n,onSwitchPaymentType:this.switchPaymentWindow})]})}},{key:"payableAccounts",get:function(){return this.props.glAccounts.filter((function(e){return e.enable_payments_to_account}))}}]),n}(p.PureComponent),p7=Object(b.b)((function(e){return{glAccounts:e.finance.glAccounts}}))(d7);function h7(){var e=Object(f.a)(["\n  "," {\n    font-weight: ",";\n  }\n  ",", "," {\n    ",":first-of-type {\n      \n    }\n  }\n"]);return h7=function(){return e},e}function b7(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  th:first-child {\n    \n  }\n  th:nth-child(2) ~ th {\n    text-align: right;\n  }\n  tbody tr {\n    td:first-child {\n      \n    }\n    td:nth-child(2) {\n      font-weight: ",";\n    }\n    td:nth-child(3) ~ td {\n      text-align: right;\n    }\n  }\n"]);return b7=function(){return e},e}Object(x.default)(uF)(b7(),Bf.normal,Bf.bold);var f7=Object(x.default)(lF)(h7(),PL,Bf.normal,UL,VL,FL),m7=n(56);function j7(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return j7=function(){return e},e}function v7(){var e=Object(f.a)(["\n  color: ",";\n  margin-bottom: 7px;\n"]);return v7=function(){return e},e}function O7(){var e=Object(f.a)(["\n  margin-right: 10px;\n"]);return O7=function(){return e},e}function g7(){var e=Object(f.a)(["\n  color: "," !important;\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline !important;\n  }\n"]);return g7=function(){return e},e}function x7(){var e=Object(f.a)(["\n  display: ",";\n  justify-content: flex-start;\n  align-items: center;\n  flex-shrink: 0;\n  margin-top: 10px;\n"]);return x7=function(){return e},e}function y7(){var e=Object(f.a)(["\n  margin-bottom: 0px;\n"]);return y7=function(){return e},e}var w7=x.default.div(y7()),_7=x.default.div(x7(),(function(e){return e.visible?"flex":"none"})),k7=x.default.a(g7(),y.blue1),S7=x.default.div(O7()),C7=x.default.div(v7(),y.gray3),N7=x.default.input(j7()),E7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={expanded:!1},e.toogleBar=function(){e.setState({expanded:!e.state.expanded})},e.getFilterStyle=function(){return Object(c.a)(Object(c.a)({},Wv),{},{container:function(e){return Object(c.a)(Object(c.a)({},e),{},{minWidth:"156px",zIndex:9999})}})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state.expanded,n=this.props.filters;return Object(a.jsxs)(w7,{children:[Object(a.jsx)(k7,{onClick:this.toogleBar,children:t?"Hide Filter":"Show Filter"}),Object(a.jsxs)(_7,{visible:t,children:[" ",n.map((function(t){var n=t.label,r=t.filterKey,o=Object(Rm.a)(t,["label","filterKey"]);return Object(a.jsxs)(S7,{children:[Object(a.jsx)(C7,{children:n}),"text"===t.type||"date"===t.type?Object(a.jsx)(N7,{type:t.type,onChange:function(t){return e.props.handleChange(r,t)},defaultValue:t.defaultValue||""}):t.loadOptions?Object(a.jsx)(Zv.a,Object(c.a)({styles:e.getFilterStyle(),onChange:function(t){return e.props.handleChange(r,t)},isClearable:!0},o)):Object(a.jsx)(m7.a,Object(c.a)({styles:e.getFilterStyle(),onChange:function(t){return e.props.handleChange(r,t)},isClearable:!0},o))]},n)}))]})]})}}]),n}(p.Component);function A7(){var e=Object(f.a)(["\n  margin-right: 8px;\n"]);return A7=function(){return e},e}function T7(){var e=Object(f.a)(["\n  margin-right: 8px;\n  font-size: ",";\n  vertical-align: top;\n"]);return T7=function(){return e},e}var I7=Object(x.default)(NC)(T7(),Vf.normal),R7=x.default.span(A7()),D7=[],M7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={searchLoading:!1,invoiceForPayment:null,invoiceLoading:!1,invoiceTemplates:[],filters:{locations:D7,recipient_contact_id:null,from_date:"",to_date:"",jobs:D7,virtual_status:""}},e.searchString="",e.debouncedSearch=Object(m.debounce)((function(t){e.getInvoices(t)}),1e3,{trailing:!0}),e.handleSearch=function(t){e.searchString=t,t?e.debouncedSearch(t):(e.debouncedSearch.cancel(),e.getInvoices())},e.handlePagination=function(t){return e.getInvoices(e.searchString,t)},e.getInvoices=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.match.params.type,!n){t.next=8;break}return e.setState({searchLoading:!0}),t.next=5,e.props.dispatch(pK({term:n,type:a,page:r}));case 5:e.setState({searchLoading:!1}),t.next=19;break;case 8:if(e.setState({invoiceLoading:!0}),"all"!==a){t.next=14;break}return t.next=12,e.props.dispatch(dK(a,{per_page:20,page:r||1,sortby:"desc"}));case 12:t.next=16;break;case 14:return t.next=16,e.props.dispatch(bK({type:a,page:r}));case 16:return t.next=18,e.props.dispatch(HK());case 18:e.setState({invoiceLoading:!1});case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.createInvoice=function(t){t?e.props.history.push("/finance/invoices/create/".concat(t)):e.props.history.push("/finance/invoices/create")},e.openPaymentModal=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),e.setState({invoiceLoading:!0}),n.prev=2,n.next=5,QU.findById(t.id);case 5:a=n.sent,e.setState({invoiceForPayment:a.data,invoiceLoading:!1}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),e.setState({invoiceLoading:!1});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},e.closePaymentModal=function(){e.setState({invoiceForPayment:null})},e.isPayColumnShown=function(t){var n=e.props.match.params.type;return t.has(Dw.PAYMENTS_RECEIVE)&&n!==Mf.draft},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=_v()(e.searchJobsById,1e3),e.loadContacts=function(e){var t={term:e};return Jv.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadContacts=_v()(e.loadContacts,1e3),e.getFilterInvoices=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.filters,a=e.props.dispatch,e.setState({invoiceLoading:!0}),t.next=5,a(hK(Object(c.a)({per_page:20,page:n||1},r)));case 5:e.setState({invoiceLoading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilters=function(){var t=e.props,n=t.match.params.type,r=t.locations,a=[{value:Pf.draft,label:Pf.draft},{value:Pf.paid,label:Pf.paid},{value:Pf.unpaid,label:Pf.unpaid},{value:Mf.overdue,label:Mf.overdue}];return[{label:"Location",filterKey:"location",options:r,placeholder:"Type to search",getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}},{label:"Contacts",filterKey:"contact",loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return Jv.getContactName(e)},placeholder:"Type to search"},{label:"From",type:"date",filterKey:"dueDateFrom"},{label:"To",type:"date",filterKey:"dueDateTo"},{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return ly.getJobName(e)},placeholder:"Type to search"},"all"===n&&{label:"Status",filterKey:"status",options:a,getOptionValue:function(e){return null===e||void 0===e?void 0:e.value},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.label},placeholder:"Select..."}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters,a=e.props.match.params.type;switch(t){case"status":r.virtual_status=null===n||void 0===n?void 0:n.value;break;case"location":r.locations=[null===n||void 0===n?void 0:n.id]||!1;break;case"contact":r.recipient_contact_id=null===n||void 0===n?void 0:n.id;break;case"dueDateFrom":if(""!==n.currentTarget.value){var o=qf.a.utc(n.currentTarget.value).format(Mj);r.from_date=o}else r.from_date="";break;case"dueDateTo":if(""!==n.currentTarget.value){var i=qf.a.utc(n.currentTarget.value).format(Mj);r.to_date=i}else r.to_date="";break;case"jobNumber":r.jobs=[null===n||void 0===n?void 0:n.id]}r.virtual_status="all"===a?r.virtual_status:a,e.setState({filters:Object(c.a)({},r)},(function(){e.getFilterInvoices()}))},e.resetFilter=function(){e.setState({filters:{locations:D7,recipient_contact_id:null,from_date:"",to_date:"",jobs:D7,virtual_status:""}})},e.getInvoiceTemplate=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QU.getInvoicetemplates();case 2:(n=t.sent)&&e.setState({invoiceTemplates:null===n||void 0===n?void 0:n.data});case 4:case"end":return t.stop()}}),t)}))),e.onClickTemplate=function(t){e.createInvoice(t)},e.invoiceTemplates=function(){var t,n=[{name:"Blank Invoice",onClick:e.onClickTemplate}];return null===(t=e.state.invoiceTemplates)||void 0===t||t.filter((function(t){n.push({name:t.name,onClick:function(){return e.onClickTemplate(t.id)}})})),n},e}return Object(l.a)(n,[{key:"getMenuItems",value:function(){var e=this.props.invoicesInfo,t=function(t){var n,r,a=t&&e.data&&(null===(n=e.data[t])||void 0===n?void 0:n.count)>0&&(null===(r=e.data[t])||void 0===r?void 0:r.amount);return a&&Kf(a)};return[{path:"/finance/invoices/draft",label:"Drafts",icon:Ef.FileEdit,isActive:this.isActive("/finance/invoices/draft"),type:Mf.draft,value:t(Mf.draft)},{path:"/finance/invoices/unpaid",label:"Unpaid",icon:Ef.FileCheck,isActive:this.isActive("/finance/invoices/unpaid"),type:Mf.unpaid,value:t(Mf.unpaid)},{path:"/finance/invoices/overdue",label:"Overdue",icon:Ef.FileCash,isActive:this.isActive("/finance/invoices/overdue"),type:Mf.overdue,value:t(Mf.overdue)},{path:"/finance/invoices/paid",label:"Paid",icon:Ef.FileCash,type:Mf.paid,isActive:this.isActive("/finance/invoices/paid"),value:t(Mf.paid)},{path:"/finance/invoices/all",label:"All Invoices",icon:Ef.File,isActive:this.isActive("/finance/invoices/all")}]}},{key:"componentDidMount",value:function(){this.getInvoices(),this.getInvoiceTemplate()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.type;e.match.params.type!==t&&(this.getInvoices(this.searchString),this.resetFilter())}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"renderTags",value:function(e){var t=this.props.match.params.type,n=this.state.invoiceLoading;return nm(e).map((function(e){return"approved"===e&&"all"===t||n?Object(a.jsx)("div",{},e):Object(a.jsx)(I7,{tag:{name:Wf[e],color:rm(e)}},e)}))}},{key:"renderInvoicesRows",value:function(e){var t=this,n=this.props.invoices.data.data;return n?n.map((function(n){return Object(a.jsxs)(VL,{to:"/finance/invoices/details/".concat(n.id),children:[Object(a.jsxs)(FL,{children:["#",n.id]}),Object(a.jsxs)(FL,{children:[Object(a.jsx)(R7,{children:n.recipient_name}),t.renderTags(n)]}),Object(a.jsx)(FL,{children:Object(a.jsx)(j4,{job:n.job,locationOnly:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)($_.a,{format:Pj,children:n.due_at})}),Object(a.jsx)(FL,{children:Kf(n.total_amount)}),Object(a.jsx)(FL,{children:Kf(n.balance_due)}),t.isPayColumnShown(e)&&Object(a.jsx)(FL,{children:n.latest_status.status===Lf.approved&&(n.virtual_status===Mf.unpaid||n.virtual_status===Mf.overdue)&&Object(a.jsx)(PS,{fontSize:Vf.normal,onClick:t.openPaymentModal(n),children:"Pay Now"})})]},n.id)})):null}},{key:"renderNoInvoices",value:function(e){return Object(a.jsx)(UL,{children:Object(a.jsx)("div",{className:"no-items",children:"No Invoices..."})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.invoices,r=n.ready,o=n.loading,i=t.invoicesInfo.loading,c=this.state,s=c.searchLoading,l=c.invoiceForPayment,u=c.invoiceLoading,d=this.props.invoices.data,p=d&&d.data,h=!!(r&&p&&p.length>0);return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right",id:"invoices-sidebar-tooltip"}),Object(a.jsx)(b4,{disableActions:!t.has(Dw.INVOICES_MANAGE),onAddAction:e.createInvoice,searchPlaceholder:"Search invoice...",searchLoading:s,onSearch:e.handleSearch,loading:i,hint:"Create new invoice",otherActions:e.invoiceTemplates(),children:e.getMenuItems().map((function(e){return Object(a.jsx)(ym,{item:e},e.path)}))}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(o||u)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(uC,{className:"h-100",children:Object(a.jsxs)(hC,{children:[Object(a.jsx)("div",{className:"pb-3",children:Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter})}),Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Invoice"}),Object(a.jsx)(PL,{}),Object(a.jsx)(PL,{children:"Job No."}),Object(a.jsx)(PL,{children:"Due Date"}),Object(a.jsx)(PL,{children:"Total Amount"}),Object(a.jsx)(PL,{children:"Balance Due"}),e.isPayColumnShown(t)&&Object(a.jsx)(PL,{})]})}),Object(a.jsx)(LL,{children:h?e.renderInvoicesRows(t):e.renderNoInvoices(t)})]}),d&&d.pagination&&Object(a.jsx)(AS,{pagination:d.pagination,onChange:e.handlePagination})]})})]}),l&&Object(a.jsx)(p7,{invoice:l,onPaymentReceive:e.getInvoices,onClose:e.closePaymentModal})]})}})}}]),n}(h.a.PureComponent),P7=Object(LO.compose)(Object(b.b)((function(e){return{invoices:e.invoices,invoicesInfo:e.invoicesInfo,locations:e.user.locations}})),v.g,Mm({jobs:{fetch:ly.searchJobs,initialData:null}}))(M7);function L7(){var e=Object(f.a)(["\n  margin-left: 30px;\n"]);return L7=function(){return e},e}function F7(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n"]);return F7=function(){return e},e}function U7(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  text-align: right;\n  white-space: nowrap;\n"]);return U7=function(){return e},e}function V7(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  margin-right: ",";\n  text-transform: capitalize;\n"]);return V7=function(){return e},e}function B7(){var e=Object(f.a)(["\n  padding: 32px 30px 17px 30px;\n  border-bottom: 1px solid ",";\n"]);return B7=function(){return e},e}var J7=x.default.div(B7(),y.gray2),z7=x.default.div(V7(),Bf.bold,Vf.medium,Vf.smaller),q7=x.default.div(U7(),Bf.bold,Vf.medium),W7=Object(x.default)(NC)(F7(),Vf.normal),H7=x.default.div(L7()),G7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.removeTag=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.props.onTagRemove)){t.next=9;break}return e.setState({loading:!0}),t.prev=3,t.next=6,r(n);case 6:return t.prev=6,e.setState({loading:!1}),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.statusList,o=t.entityName,i=t.tags,c=t.loadingTags,s=t.disabled,l=t.isNew,u=this.state.loading,d=r.includes("draft");return Object(a.jsx)(J7,{className:"d-flex flex-row",children:Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(z7,{children:n?"".concat(d?"Draft":""," ").concat(o):"Create ".concat(o)}),!l&&i&&t.has(Dw.TAGS_VIEW)&&Object(a.jsx)(H7,{children:Object(a.jsx)(UC,{tags:i,onRemove:s?void 0:e.removeTag,loading:c||u})}),Object(a.jsx)(q7,{className:"flex-grow-1",children:n&&"#".concat(n)}),r.map((function(e){return Object(a.jsx)(W7,{tag:{color:rm(e),name:Lf[e]}},e)}))]})}})})}}]),n}(p.PureComponent);G7.defaultProps={statusList:[]};var Y7=G7;function Q7(){var e=Object(f.a)(["\n  border: 1px solid ",";\n\n  thead th {\n    font-weight: ",";\n    color: ",";\n    padding: 5px;\n    padding-left: 10px;\n    height: 50px;\n    line-height: 20px;\n    vertical-align: middle;\n  }\n\n  td {\n    vertical-align: middle;\n    &:nth-child(3) {\n      width: 20%;\n    }\n    &:last-child {\n      padding-right: 10px;\n      padding-bottom: 7px;\n      cursor: pointer;\n    }\n  }\n\n  tbody tr:nth-of-type(odd) {\n    background: ",";\n  }\n  tbody .no-item {\n    height: 42px;\n    color: ",";\n    text-align: center;\n  }\n  .form-control {\n    background: white;\n    border: 1px solid ",";\n  }\n"]);return Q7=function(){return e},e}var K7=x.default.table(Q7(),y.gray2,Bf.normal,y.gray4,y.gray0,y.gray4,y.gray2),Z7=function(e){return Object(a.jsx)(K7,{className:"table table-sm table-striped",children:e.children})},X7=n(114),$7=n.n(X7),e8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selectStyles=e.props.customStyles?Object(c.a)(Object(c.a)({},Wv),e.props.customStyles):Object(c.a)(Object(c.a)({},Wv),{},{control:function(t,n){return Object(c.a)(Object(c.a)({},t),{},{minHeight:"auto",maxHeight:e.props.isMulti?"inherit":33.5,background:y.white,boxShadow:n.isFocused?"0 0 0 0.2rem ".concat(y.bootstrap.boxShadow):"none",borderColor:n.isFocused?"transparent":y.gray2,":hover":{borderColor:n.isFocused?"transparent":y.gray2}})},dropdownIndicator:function(t){return Object(c.a)(Object(c.a)({},t),{},{padding:3,display:e.props.isDisabled?"none":t.display})}},e.props.additionalStyles),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(m7.a,Object(c.a)(Object(c.a)({},this.props),{},{styles:this.selectStyles}))}}]),n}(p.PureComponent);function t8(){var e=Object(f.a)(["\n  border-top: 2px solid ",";\n  display: table-cell;\n  padding: 10px 40px 10px 10px;\n  font-size: ",";\n  font-weight: ",";\n  text-align: right;\n"]);return t8=function(){return e},e}function n8(){var e=Object(f.a)(["\n  border-top: 2px solid ",";\n  display: table-cell;\n  text-align: left;\n  padding: 10px 130px 10px 10px;\n  font-size: ",";\n  font-weight: ",";\n"]);return n8=function(){return e},e}function r8(){var e=Object(f.a)(["\n  display: table-cell;\n  text-align: right;\n  padding: 10px 40px 10px 10px;\n  font-weight: ",";\n"]);return r8=function(){return e},e}function a8(){var e=Object(f.a)(["\n  display: table-cell;\n  text-align: left;\n  padding: 10px 40px 10px 120px;\n  color: ",";\n"]);return a8=function(){return e},e}function o8(){var e=Object(f.a)(["\n  display: table-row;\n"]);return o8=function(){return e},e}function i8(){var e=Object(f.a)(["\n  display: inline-block;\n  text-align: right;\n"]);return i8=function(){return e},e}var c8=x.default.div(i8()),s8=x.default.div(o8()),l8=x.default.div(a8(),y.gray5),u8=x.default.div(r8(),Bf.bold),d8=x.default.div(n8(),y.gray2,Vf.medium,Bf.bold),p8=x.default.div(t8(),y.gray2,Vf.medium,Bf.bold),h8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.subTotal,n=e.taxes,r=e.total,o=e.balanceDue,i=e.entityType;return Object(a.jsxs)(c8,{children:[Object(a.jsxs)(s8,{children:[Object(a.jsx)(l8,{children:"Sub-total"}),Object(a.jsx)(u8,{children:Kf(t)})]}),Object(a.jsxs)(s8,{children:[Object(a.jsx)(l8,{children:"Tax"}),Object(a.jsx)(u8,{children:Kf(n)})]}),Object(a.jsxs)(s8,{children:[Object(a.jsx)(l8,{children:"TOTAL"}),Object(a.jsx)(u8,{children:Kf(r)})]}),"invoice"===i&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(s8,{children:[Object(a.jsx)(d8,{children:"Balance Due"}),Object(a.jsx)(p8,{children:Kf(o)})]})})]})}}]),n}(p.PureComponent);function b8(){var e=Object(f.a)(["\n  text-align: right;\n"]);return b8=function(){return e},e}function f8(){var e=Object(f.a)(["\n  text-align: left;\n"]);return f8=function(){return e},e}function m8(){var e=Object(f.a)(["\n  text-align: ",";\n  width: ",";\n"]);return m8=function(){return e},e}var j8=x.default.td(m8(),(function(e){return e.align&&e.align}),(function(e){return e.width&&e.hidden?"0px":e.width})),v8=Object(x.default)(j8)(f8()),O8=Object(x.default)(j8)(b8());function g8(){var e=Object(f.a)(["\n  text-align: right;\n"]);return g8=function(){return e},e}function x8(){var e=Object(f.a)(["\n  text-align: left;\n"]);return x8=function(){return e},e}function y8(){var e=Object(f.a)(["\n  text-align: ",";\n  width: ",";\n  :last-child {\n    border-right: 1px solid #d3dbde;\n  }\n"]);return y8=function(){return e},e}var w8=x.default.th(y8(),(function(e){return e.align&&e.align}),(function(e){return e.width&&e.hidden?"0px":e.width})),_8=Object(x.default)(w8)(x8()),k8=Object(x.default)(w8)(g8());function S8(){var e=Object(f.a)(["\n  :hover {\n    background-color: ",";\n  }\n"]);return S8=function(){return e},e}var C8,N8,E8,A8,T8=x.default.tr(S8(),y.gray1),I8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={itemSelected:e.props.dataSource},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(t,n){for(var r=e.state.itemSelected.slice(),a=-1,o=-1,i=0;i<r.length;i++)"finance_".concat(i)===t.id&&(a=i),"finance_".concat(i)===n.id&&(o=i);if(-1!=a&&-1!=o){var s=Object.assign({},r[a]),l=Object.assign({},r[o]);r[a]=Object(c.a)({},l),r[o]=Object(c.a)({},s),e.setState({itemSelected:r},(function(){e.props.updatedData(e.state.itemSelected)}))}},e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContent")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){e.dataSource!==this.props.dataSource&&this.setState({itemSelected:this.props.dataSource})}},{key:"renderBodyRows",value:function(){var e=this,t=this.props,n=t.columnsDefinition;return t.dataSource.map((function(t,r){return Object(a.jsx)(T8,{id:"finance_".concat(r),children:n.map((function(n){return Object(a.jsx)(j8,{onDragOver:function(t){return e.onDragOver(t,"finance_".concat(r))},onDrop:function(t){return e.onDrop(t,"finance_".concat(r))},children:n.cell(t,r)},n.id)}))},r)}))}},{key:"renderNodata",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:e.length,children:"No items found"})})}},{key:"renderTHead",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:e.map((function(e){return Object(a.jsx)(w8,{className:e.className,children:e.header},e.id)}))})})}},{key:"renderTBody",value:function(){var e=this.props.dataSource;return Object(a.jsx)("tbody",{children:e&&e.length>0?this.renderBodyRows():this.renderNodata()})}},{key:"render",value:function(){var e=this.props.useCustomStyle;return Object(a.jsx)(a.Fragment,{children:e?Object(a.jsxs)(a.Fragment,{children:[this.renderTHead(),this.renderTBody()]}):Object(a.jsxs)("table",{className:"table",children:[this.renderTHead(),this.renderTBody()]})})}}]),n}(p.PureComponent);!function(e){e.hour="hour",e.day="day"}(C8||(C8={})),function(e){e.AIR_MOVER="AIR MOVER",e.DEHUM="DEHUM",e.WASTE_REMOVER="WASTE REMOVER"}(N8||(N8={})),function(e){e.CHECKED_IN="CHECKED_IN",e.CHECKED_OUT="CHECKED_OUT",e.IN_STORAGE="IN_STORAGE",e.DEPLOYED_ON_SITE="DEPLOYED_ON_SITE"}(E8||(E8={})),function(e){e.ACTIVE="active",e.IN_ACTTIVE="inactive"}(A8||(A8={}));var R8="SETTINGS_WH_CHARGING_INTERVAL",D8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,N2.updateChargingInterval(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingChargingIntervalUpdated,c),t.next=13;break;case 9:return t.next=11,N2.createChargingInterval(n);case 11:c=t.sent,uy.emit(Kg.WarehousingChargingIntervalAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.storageType,n=e.submitting,r=e.handleSubmit;return Object(a.jsxs)("form",{id:R8,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsxs)("strong",{children:["Space Type: ",t.name]}),Object(a.jsxs)("span",{className:"badge badge-warning ml-2",children:[t.is_chargeable?"":"Not "," Chargeable"]})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charging_interval",label:"Interval",component:Kv,options:Object.keys(C8).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv,itemProp:{autoFocus:!0}})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charging_rate_per_interval",label:"Rate Per Interval",component:ZO,type:"number",validate:uv,currency:!0})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval",component:ZO,type:"number",validate:uv})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{className:"mb-3",children:"\xa0"}),Object(a.jsx)(yv.a,{name:"is_default",label:"Default",direction:"horizontal",component:LJ})]})]})]})}}]),n}(p.PureComponent),M8=Object(LO.compose)(Object(Gj.a)({form:R8,initialValues:{is_default:!1}}))(D8),P8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.body,o=e.id,i=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{bodyClass:"position-static",onClose:i,title:n,body:r,footer:Object(a.jsx)("button",{type:"submit",form:o,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function L8(){var e=Object(f.a)(["\n  "," {\n    font-weight: ",";\n  }\n  ",", "," {\n    ",":first-of-type {\n      // width: 110px;\n    }\n  }\n"]);return L8=function(){return e},e}function F8(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  th:first-child {\n    // min-width: 300px;\n  }\n  th:nth-child(2) ~ th {\n    // text-align: right;\n  }\n  tbody tr {\n    td:first-child {\n      // width: 110px;\n    }\n    td:nth-child(2) {\n      // font-weight: ",";\n    }\n    td:nth-child(3) ~ td {\n      // text-align: right;\n    }\n  }\n"]);return F8=function(){return e},e}Object(x.default)(uF)(F8(),Bf.normal,Bf.bold);var U8=Object(x.default)(lF)(L8(),PL,Bf.normal,UL,VL,FL),V8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.WarehousingChargingIntervalAdded,(function(){return e.loadIntervals()})),uy.listen(Kg.WarehousingChargingIntervalDeleted,(function(){return e.loadIntervals()}))],e.componentDidMount=function(){var t=e.props,n=t.storageType,r=t.match.params.type_id;n.fetch(r),e.loadIntervals()},e.loadIntervals=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.chargingIntervals,o=r.match.params.type_id,a.fetch(Object(c.a)({inventory_storage_space_type_id:o},n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"chargingInterval":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Charging Interval",body:Object(a.jsx)(M8,Object(c.a)(Object(c.a)({},r),{},{storageType:e.props.storageType.data,afterSubmit:e.hideModal})),id:R8,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,N2.updateChargingInterval(t.id,r);case 4:if(a=n.sent,t.is_default||!a.is_default){n.next=10;break}return n.next=8,e.loadIntervals();case 8:n.next=11;break;case 10:j.a.merge(t,a);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 16:return n.prev=16,e.setState({working:!1}),n.finish(16);case 19:return n.abrupt("return",Promise.resolve());case 20:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadIntervals({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.storageType,i=r.chargingIntervals,c=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(i.loading||c)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Charging Intervals"})}),Object(a.jsx)("div",{children:o.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Space Type: ",o.data.name," ",Object(a.jsxs)("span",{className:"badge badge-warning",children:[o.data.is_chargeable?"":"Not "," Chargeable"]}),"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("chargingInterval",{initialValues:{inventory_storage_space_type:o.data,is_default:!1}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Interval"}),Object(a.jsx)(PL,{children:"Rate / Interval"}),Object(a.jsx)(PL,{children:"Max Count to Next Interval"}),Object(a.jsx)(PL,{children:"Default"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=i.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(z8,{form:"".concat(R8,"_").concat(e.id,"_").concat(e.is_default?"default":""),initialValues:e,item:e,onSubmit:n.onSubmit(e)},e.id+(e.is_default?"default":""))}))})]}),i.data&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:i.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent);V8.getPlacementCost=function(e){if(e.ended_at){var t=qf.a.duration(qf()(e.ended_at).diff(e.started_at)),n=0;switch(e.charging_interval.charging_interval){case"week":n=t.asWeeks();break;case"day":n=t.asDays();break;case"hour":n=t.asHours()}return n=Math.ceil(n),parseFloat((n*e.charging_interval.charging_rate_per_interval||e.charging_interval.charging_rate_per_interval).toFixed(2))}return 0},V8.getPlacementDuration=function(e){var t=qf.a.duration(qf()(e.ended_at||new Date).diff(e.started_at)),n=0;switch(e.charging_interval.charging_interval){case"week":n=t.asWeeks();break;case"day":n=t.asDays();break;case"hour":n=t.asHours();break;default:n=1}return(n=Math.ceil(n))+" "+e.charging_interval.charging_interval+(n>1?"s":"")};var B8=Object(LO.compose)(Mm({storageType:{fetch:N2.getStorageSpaceType},chargingIntervals:{fetch:N2.getChargingIntervals}}))(V8),J8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{children:"Are you sure you want to delete this charging interval?"})})));case 3:n.sent&&N2.deleteChargingInterval(t.id).then((function(){uy.emit(Kg.WarehousingChargingIntervalDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item);return j.a.isObject(t.charging_interval)||(t.charging_interval={value:t.charging_interval,label:t.charging_interval}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"charging_interval",component:Kv,options:Object.keys(C8).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv,onChange:this.onFieldChange,className:"m-0"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"charging_rate_per_interval",component:ZO,type:"number",validate:uv,onChange:this.onFieldChange,className:"m-0",currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"max_count_to_the_next_interval",component:ZO,type:"number",validate:uv,onChange:this.onFieldChange,className:"m-0"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"is_default",component:LJ,onChange:this.onFieldChange,wrapperClassName:"m-0"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),z8=Object(LO.compose)(Object(Gj.a)({form:R8}))(J8);function q8(){var e=Object(f.a)(["\n  min-height: 200px;\n  tr.disabled {\n    background-color: "," !important;\n    color: "," !important;\n    cursor: no-drop !important;\n  }\n  tr.disabled .k-checkbox {\n    opacity: 0;\n  }\n"]);return q8=function(){return e},e}var W8,H8,G8=x.default.div(q8(),y.gray1,y.gray4),Y8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"labour",submitting:!1,selected:{}},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d,p;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.labour,o=n.allowance,i=n.reimbursement,c=n.laha,s=n.equipment,l=n.material,u=n.po,d=n.storage,p=n.other,t.next=3,Promise.all([a.fetch(r.id,{attach_to_invoice:1}),o.fetch(r.id,{attach_to_invoice:1}),i.fetch(r.id,{attach_to_invoice:1}),c.fetch(r.id,{attach_to_invoice:1}),s.fetch(r.id,{attach_to_invoice:1}),l.fetch(r.id,{attach_to_invoice:1}),u.fetch({job_id:r.id,attach_to_invoice:1}),d.fetch(r.id,{attach_to_invoice:1,placement_ended:1,charging_interval:1}),p.fetch(r.id,{attach_to_invoice:1})]);case 3:e.selectAll();case 4:case"end":return t.stop()}}),t)}))),e.selectAll=function(){var t,n,r,a,o,i,c,s=e.props,l=s.labour,u=s.allowance,d=s.reimbursement,p=s.laha,h=s.equipment,b=s.material,f=s.po,m=s.storage,j=s.other,v={syntheticEvent:{target:{checked:!0}}};e.headerSelectionChange("labour",(null===(t=l.data)||void 0===t?void 0:t.data)||[])(v),e.headerSelectionChange("allowance",(null===(n=u.data)||void 0===n?void 0:n.data)||[])(v),e.headerSelectionChange("reimbursement",(null===(r=d.data)||void 0===r?void 0:r.data)||[])(v),e.headerSelectionChange("laha",(null===(a=p.data)||void 0===a?void 0:a.data)||[])(v),e.headerSelectionChange("equipment",h.data||[])(v),e.headerSelectionChange("material",b.data||[])(v),e.headerSelectionChange("po",(null===(o=f.data)||void 0===o?void 0:o.data)||[])(v),e.headerSelectionChange("storage",(null===(i=m.data)||void 0===i?void 0:i.data)||[])(v),e.headerSelectionChange("other",(null===(c=j.data)||void 0===c?void 0:c.data)||[])(v)},e.selectTab=function(t){return function(){e.setState({activeTab:t})}},e.renderModalBody=function(){var t,n,r,o,i,c,s,l,u,d,p,h,b,f,m=e.props,v=m.labour,O=m.allowance,g=m.reimbursement,x=m.laha,w=m.equipment,_=m.material,k=m.po,S=m.storage,C=m.other,N=v.loading||w.loading||_.loading||S.loading||C.loading,E=e.state.activeTab;return Object(a.jsxs)(G8,{children:[N&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(QG.i,{className:"mx-4 nav-tabs mr-4 print-hide",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[["labour","Labour"],["allowance","Allowance"],["reimbursement","Reimbursement"],["laha","LAHA"],["equipment","Equipment"],["material","Material"],["po","P/O"],["storage","Storage"],["other","Other"]].map((function(t){return Object(a.jsx)(QG.j,{children:Object(a.jsx)("span",{className:"nav-link cursor-pointer ".concat(E===t[0]?"active":""),onClick:e.selectTab(t[0]),children:t[1]})})}))}),!N&&Object(a.jsxs)(QG.k,{activeItem:E,className:" px-4 position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:[Object(a.jsxs)(QG.l,{tabId:"labour",role:"tabpanel",children:[e.renderLabourGrid((null===(t=v.data)||void 0===t?void 0:t.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(n=v.data)||void 0===n?void 0:n.data)||[]).filter((function(e){return e.__selected})).sumBy("calculated_total_amount"))]})]}),Object(a.jsxs)(QG.l,{tabId:"allowance",role:"tabpanel",children:[e.renderAllowanceGrid((null===(r=O.data)||void 0===r?void 0:r.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(o=O.data)||void 0===o?void 0:o.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(QG.l,{tabId:"reimbursement",role:"tabpanel",children:[e.renderReimbursementGrid((null===(i=g.data)||void 0===i?void 0:i.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(c=g.data)||void 0===c?void 0:c.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(QG.l,{tabId:"laha",role:"tabpanel",children:[e.renderLAHAGrid((null===(s=x.data)||void 0===s?void 0:s.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(l=x.data)||void 0===l?void 0:l.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(QG.l,{tabId:"equipment",role:"tabpanel",children:[e.renderEquipmentGrid(w.data||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()(w.data||[]).filter((function(e){return e.__selected})).sumBy("total_charge"))]})]}),Object(a.jsxs)(QG.l,{tabId:"material",role:"tabpanel",children:[e.renderMaterialGrid(_.data||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()(_.data||[]).filter((function(e){return e.__selected})).sumBy("amount_override"))]})]}),Object(a.jsxs)(QG.l,{tabId:"po",role:"tabpanel",children:[e.renderPOGrid((null===(u=k.data)||void 0===u?void 0:u.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(d=k.data)||void 0===d?void 0:d.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(QG.l,{tabId:"storage",role:"tabpanel",children:[e.renderStorageGrid((null===(p=S.data)||void 0===p?void 0:p.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(h=S.data)||void 0===h?void 0:h.data)||[]).filter((function(e){return e.__selected})).sumBy((function(e){return V8.getPlacementCost(e)})))]})]}),Object(a.jsxs)(QG.l,{tabId:"other",role:"tabpanel",children:[e.renderCustomExpenseGrid((null===(b=C.data)||void 0===b?void 0:b.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Cost:"})," ",Kf(j()((null===(f=C.data)||void 0===f?void 0:f.data)||[]).filter((function(e){return e.__selected})).sumBy((function(e){return e.amount})))]})]})]})]})},e.renderLabourGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("labour",t),onHeaderSelectionChange:e.headerSelectionChange("labour",t),children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"labour_type.name",title:"Type"}),Object(a.jsx)(rw.b,{field:"worker.full_name",title:"Worker"}),Object(a.jsx)(rw.b,{field:"total_hrs",title:"Total Hours",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:om(t.first_tier_time_amount+t.second_tier_time_amount+t.third_tier_time_amount+t.fourth_tier_time_amount)})}}),Object(a.jsx)(rw.b,{field:"calculated_total_amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.calculated_total_amount)})}})]})},e.renderAllowanceGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("allowance",t),onHeaderSelectionChange:e.headerSelectionChange("allowance",t),children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"user.full_name",title:"Recipient"}),Object(a.jsx)(rw.b,{field:"allowance_type.name",title:"Allowance Type"}),Object(a.jsx)(rw.b,{field:"total_amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.total_amount)})}})]})},e.renderReimbursementGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("reimbursement",t),onHeaderSelectionChange:e.headerSelectionChange("reimbursement",t),children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"user.full_name",title:"Recipient"}),Object(a.jsx)(rw.b,{field:"description",title:"Description"}),Object(a.jsx)(rw.b,{field:"total_amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.total_amount)})}})]})},e.renderLAHAGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("laha",t),onHeaderSelectionChange:e.headerSelectionChange("laha",t),children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"user.full_name",title:"Recipient"}),Object(a.jsx)(rw.b,{field:"rate_per_day",title:"Rate per Day",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.rate_per_day)})}}),Object(a.jsx)(rw.b,{field:"days",title:"Days"}),Object(a.jsx)(rw.b,{field:"total_amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.total_amount)})}})]})},e.renderEquipmentGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("equipment",t),onHeaderSelectionChange:e.headerSelectionChange("equipment",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"equipment.serial_number",title:"Serial #"}),Object(a.jsx)(rw.b,{field:"equipment.model",title:"Model"}),Object(a.jsx)(rw.b,{field:"started_at",title:"Deployment Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:t.started_at})})}}),Object(a.jsx)(rw.b,{field:"total_charge",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.total_charge)})}})]})},e.renderMaterialGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("material",t),onHeaderSelectionChange:e.headerSelectionChange("material",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"material.name",title:"Material"}),Object(a.jsx)(rw.b,{field:"used_at",title:"Used At",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:t.used_at})})}}),Object(a.jsx)(rw.b,{field:"quantity_used_override",title:"Quantity Used"}),Object(a.jsx)(rw.b,{field:"amount_override",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.amount_override)})}})]})},e.renderPOGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("po",t),onHeaderSelectionChange:e.headerSelectionChange("po",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"reference",title:"Reference#"}),Object(a.jsx)(rw.b,{field:"date",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:t.date&&Object(a.jsx)($_.a,{fromNow:!0,ago:!0,children:t.started_at})})}}),Object(a.jsx)(rw.b,{field:"total_amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.total_amount)})}})]})},e.renderStorageGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("storage",t),onHeaderSelectionChange:e.headerSelectionChange("storage",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"inventory_item.name",title:"Item Name"}),Object(a.jsx)(rw.b,{field:"started_at",title:"Date Started",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:t.started_at})})}}),Object(a.jsx)(rw.b,{field:"ended_at",title:"Date Ended",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:t.ended_at})})}}),Object(a.jsx)(rw.b,{field:"started_at",title:"Stayed in Location",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:V8.getPlacementDuration(t)})}}),Object(a.jsx)(rw.b,{field:"total_amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(V8.getPlacementCost(t))})}})]})},e.renderCustomExpenseGrid=function(t){return Object(a.jsxs)(rw.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("other",t),onHeaderSelectionChange:e.headerSelectionChange("other",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(rw.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(rw.b,{field:"name",title:"Item Name"}),Object(a.jsx)(rw.b,{field:"quantity",title:"Quantity"}),Object(a.jsx)(rw.b,{field:"amount",title:"Total Cost",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Kf(t.amount)})}})]})},e.rowRender=function(e,t){var n={selectedField:"aa"};return t.dataItem.__disabled&&(n.className="".concat(e.props.className," disabled")),h.a.cloneElement(e,Object(c.a)({},n),e.props.children)},e.selectionChange=function(t,n){return function(r){var a=n.find((function(e){return e===r.dataItem}));if(a&&1===a.in_report_used_count){a.__selected=!a.__selected;var o=e.state.selected;o[t]||(o[t]={}),a.__selected?o[t][a.id]=a:delete o[t][a.id],0===Object.keys(o[t]).length&&delete o[t],e.setState({selected:Object(c.a)({},o)})}}},e.headerSelectionChange=function(t,n){return function(r){var a=r.syntheticEvent.target.checked;n.forEach((function(e){1===e.in_report_used_count?e.__selected=a:e.__disabled=!0}));var o=e.state.selected;o[t]||(o[t]={}),a?n.forEach((function(e){e.__selected&&(o[t][e.id]=e)})):delete o[t],e.setState({selected:Object(c.a)({},o)})}},e.createInvoice=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({submitting:!0}),n=e.props,r=n.job,a=n.invoiceId,t.prev=2,!a){t.next=10;break}if(t.t0=e.props.submitInvoiceItems,!t.t0){t.next=8;break}return t.next=8,e.props.submitInvoiceItems(a,r,e.state.selected);case 8:t.next=11;break;case 10:e.props.history.push({pathname:"/finance/invoices/create",state:{job:{id:r.id,assigned_location:r.assigned_location,invoice_to_contact:r.invoice_to_contact},jobCosting:e.state.selected}});case 11:t.next=15;break;case 13:t.prev=13,t.t1=t.catch(2);case 15:return t.prev=15,e.setState({submitting:!1}),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,13,15,18]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.data,o=e.onClose,i=this.state,c=i.submitting,s=i.selected,l=r||{},u=l.actuals,d=l.expenses;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{scrollY:!0,onClose:o,loading:c,title:n||"Create Invoice".concat(u||d?" From ":"").concat(u?"Actuals":"").concat(u&&d?" And ":"").concat(d?"Expenses":""),bodyClass:"px-0 pt-3 pb-0",width:"900px",body:this.renderModalBody(),footer:Object(a.jsx)("button",{className:"btn btn-primary",disabled:0===Object.keys(s).length,onClick:this.createInvoice,children:"Create Invoice"})})})}}]),n}(p.PureComponent),Q8=Object(LO.compose)(Mm({labour:{fetch:vW.getJobLabours},allowance:{fetch:hW.getJobAllowances},reimbursement:{fetch:OW.getJobReimbursements},laha:{fetch:gW.getJobLahas},equipment:{fetch:ly.getJobEquipments},material:{fetch:ly.getJobMaterials},po:{fetch:pX.getAll},storage:{fetch:dH.getJobStorageItems},other:{fetch:ly.getCustomExpenses}}),v.g)(Y8);!function(e){e.invoice="invoice",e.purchaseOrder="purchase_order",e.creditNote="credit_note"}(W8||(W8={})),function(e){e.MATERIAL="MATERIAL",e.LABOUR="LABOUR",e.EQUIPMENT="EQUIPMENT",e.PO="PO",e.STORAGE="STORAGE",e.ALLOWANCE="ALLOWANCE",e.REIMBURSEMENT="REIMBURSEMENT",e.LAHA="LAHA",e.OTHER="OTHER"}(H8||(H8={}));var K8,Z8,X8=function(e){return e.id},$8=function(e){return e.name},e6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showInvoiceModel:!1},e.onClickDelete=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.isFromJobCosting,o=r.dispatch,!a){t.next=7;break}return t.next=4,o(BK(n));case 4:e.totalCalculation(),t.next=8;break;case 7:e.props.onRemove(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContent",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.allColumns=[{id:"itemDrag",className:$7.a.sm,cell:function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:"#",onDragStart:function(t){return e.onDragStart(t,"finance_".concat(n))},draggable:!0,children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})," "]})}},{id:"code",className:$7.a.sm,header:"Code",cell:function(t){return Object(a.jsx)(e8,{value:t.gs_code,options:e.props.entityType===W8.purchaseOrder?e.props.gsCodes.filter((function(e){return e.is_buy})):e.props.gsCodes.filter((function(e){return e.is_sell})),onChange:e.handleGsCodeChange(t),getOptionValue:X8,getOptionLabel:$8,isDisabled:e.props.disabled})}},{id:"description",className:$7.a.md,header:"Description",cell:function(t){return e.renderInlineInput(t,"description","Description...")}},{id:"quantity",className:$7.a.xs,header:"Qty",cell:function(t){return e.renderInlineInput(t,"quantity","0",x4)}},{id:"unit_cost",className:$7.a.sm,header:"Unit Ex.",cell:function(t){return e.renderInlineInput(t,"unit_cost","0",y4)}},{id:"discount",className:$7.a.sm,header:"Discount %",cell:function(t){return e.renderInlineInput(t,"discount","0",w4)}},{id:"markup",className:$7.a.sm,header:"Markup %",cell:function(t){return e.renderInlineInput(t,"markup","0",w4)}},{id:"account_code",className:$7.a.md,header:"Account Code",cell:function(t){return Object(a.jsx)(e8,{value:t.gl_account,options:e.props.glAccounts.filter(e.glFilter),onChange:e.handleGlAccountChange(t),getOptionValue:X8,getOptionLabel:KX.getGLAccountLabel,isDisabled:e.props.disabled})}},{id:"tax_code",className:$7.a.md,header:"Tax Code",cell:function(t){return Object(a.jsx)(e8,{value:t.tax_rate,options:e.props.taxRates,onChange:e.handleSelectChange(t,"tax_rate"),getOptionValue:X8,getOptionLabel:$8,isDisabled:e.props.disabled})}},{id:"amount_ex",className:$7.a.total,header:"Amount Ex.",cell:function(e){return Object(a.jsx)("strong",{children:Kf(e.total_amount)})}},{id:"delete",className:$7.a.remove,header:"",cell:function(t,n){return e.props.disabled?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)(Ff,{name:Ef.Remove,onClick:function(){e.onClickDelete(t.id)}})}}],e.handleGlAccountChange=function(t){return function(n){e.handleSelectChange(t,"gl_account")(n),n.tax_rate&&e.handleSelectChange(t,"tax_rate")(n.tax_rate),e.totalCalculation()}},e.handleGsCodeChange=function(t){return function(n){e.props.onChange(t.id,Object(k.a)({},"gs_code",n)),e.props.onChange(null===t||void 0===t?void 0:t.id,Object(k.a)({},"unit_cost",n.amount?parseFloat(n.amount):parseFloat(t.unit_cost))),e.props.onChange(t.id,Object(k.a)({},"description",n.description?n.description:t.description)),e.totalCalculation()}},e.getOrganizationByLocation=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,KX.getAccountingOrganizationsForLocation(t);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.parsingJobCosting=function(t){var n=[];return j.a.forEach(t,(function(e,t){switch(t){case"labour":j()(e).values().size()>0&&j()(e).values().groupBy("labour_type_id").forEach((function(e,t){n.push({description:e[0].labour_type.name,quantity:1,unit_cost:j.a.sumBy(e,(function(e){return e.first_tier_time_amount+e.second_tier_time_amount+e.third_tier_time_amount+e.fourth_tier_time_amount})),total_amount:j.a.sumBy(e,(function(e){return e.first_tier_time_amount+e.second_tier_time_amount+e.third_tier_time_amount+e.fourth_tier_time_amount})),linked_items:e,linked_items_category:H8.LABOUR})}));break;case"equipment":j()(e).values().size()>0&&n.push({description:"Equipment",quantity:1,unit_cost:j()(e).values().sumBy("total_charge"),total_amount:j()(e).values().sumBy("total_charge"),linked_items:j()(e).values(),linked_items_category:H8.EQUIPMENT});break;case"material":j()(e).values().size()>0&&n.push({description:"Material",quantity:1,unit_cost:j()(e).values().sumBy("amount_override"),total_amount:j()(e).values().sumBy("amount_override"),linked_items:j()(e).values(),linked_items_category:H8.MATERIAL});break;case"storage":var r=0;j()(e).values().forEach((function(e){r+=V8.getPlacementCost(e)})),j()(e).values().size()>0&&n.push({description:"Storage",quantity:1,unit_cost:r,total_amount:r,linked_items:j()(e).values(),linked_items_category:H8.STORAGE});break;case"allowance":j()(e).values().size()>0&&j()(e).values().groupBy("allowance_type_id").forEach((function(e,t){n.push({description:e[0].allowance_type.name,quantity:1,unit_cost:j.a.sumBy(e,(function(e){return e.total_amount})),total_amount:j.a.sumBy(e,(function(e){return e.total_amount})),linked_items:e,linked_items_category:H8.ALLOWANCE})}));break;case"reimbursement":j()(e).values().size()>0&&n.push({description:"Reimbursement",quantity:1,unit_cost:j()(e).values().sumBy("total_amount"),total_amount:j()(e).values().sumBy("total_amount"),linked_items:j()(e).values(),linked_items_category:H8.REIMBURSEMENT});break;case"laha":j()(e).values().size()>0&&n.push({description:"Laha",quantity:1,unit_cost:j()(e).values().sumBy("total_amount"),total_amount:j()(e).values().sumBy("total_amount"),linked_items:j()(e).values(),linked_items_category:H8.LAHA});break;case"po":j()(e).values().size()>0&&n.push({description:"PO",quantity:1,unit_cost:j()(e).values().sumBy("total_amount"),total_amount:j()(e).values().sumBy("total_amount"),linked_items:j()(e).values(),linked_items_category:H8.PO});break;case"other":j()(e).values().size()>0&&n.push({description:"Other Expense",quantity:1,unit_cost:j()(e).values().sumBy("amount"),total_amount:j()(e).values().sumBy("amount"),linked_items:j()(e).values(),linked_items_category:H8.OTHER})}})),n=n.map((function(t){var n;return t.gs_code=e.props.gsCodes.find((function(e){return e.description.toLocaleLowerCase().trim()===t.linked_items_category.toLocaleLowerCase().trim()&&!0===e.is_sell})),t.gl_account=e.props.glAccounts.find((function(e){var n;return(null===e||void 0===e||null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase().trim())===t.linked_items_category.toLocaleLowerCase().trim()})),t.tax_rate=null===(n=t.gl_account)||void 0===n?void 0:n.tax_rate,t}))},e.parseJobCostingItems=function(t){var n=[];n=(n=e.parsingJobCosting(t)).map((function(t){return e.createItemInState(t),t})),e.setState({jobCostingItems:n}),e.totalCalculation()},e.debounceJobCostingItems=Object(m.debounce)(e.parseJobCostingItems,1e3),e.createItemInState=function(t){var n,r={id:Object(m.uniqueId)(OK),total_amount:t.total_amount,dirty:!0,description:t.description,quantity:t.quantity,unit_cost:t.unit_cost,gs_code:t.gs_code,gl_account:t.gl_account,tax_rate:t.tax_rate,jobCostinItemType:t.linked_items_category,jobCostinItemTypeIds:null===(n=t.linked_items)||void 0===n?void 0:n.map((function(e){return e.id}))};e.props.dispatch(PK(r))},e.updateItemsInState=function(t){e.props.dispatch(FK(t))},e.handleSelectChange=function(t,n){return function(r){e.props.isFromJobCosting?(r.quantity&&r.unit_cost&&(r.total_amount=r.quantity*r.unit_cost),e.props.onChange(t.id,Object(k.a)({},n,r))):(e.props.onChange(t.id,Object(k.a)({},n,r)),e.debounceSubmit(t.id))}},e.debounceSubmit=Object(m.debounce)(e.props.onSubmit,500),e.handleInputChange=function(t,n,r){var a=t.id;return function(t){var o=r?r(t.target.value):t.target.value;e.props.onChange(a,Object(k.a)({},n,o))}},e.handleInputBlur=function(t){return function(){e.props.isFromJobCosting&&e.totalCalculation(),t.dirty&&!e.props.isFromJobCosting&&e.props.onSubmit(t.id)}},e.renderInlineInput=function(t,n,r,o){return Object(a.jsx)("input",{type:"text",placeholder:r,value:t[n],onChange:e.handleInputChange(t,n,o),onBlur:e.handleInputBlur(t),disabled:e.props.disabled,className:"form-control"})},e.DragDropPositionUpdate=function(t){e.props.isFromJobCosting?e.updateItemsInState(t):e.props.handlePositionUpdatedData(t)},e.invoiceLineItemsCalculation=function(){var t=e.props,n=t.financeEntity.data,r=t.dispatch,a=(t.isFromJobCosting,{sub_total:0,taxes:0,amount_due:0,total_amount:0});n.items&&j.a.forEach(n.items,(function(e){if(e.unit_cost&&e.quantity){var t,n=parseFloat(e.unit_cost)*parseInt(e.quantity);a.sub_total=a.sub_total+n;var o=e.discount?n*e.discount/100:0,i=(null===e||void 0===e||null===(t=e.tax_rate)||void 0===t?void 0:t.rate)?e.tax_rate.rate:0;a.taxes=a.taxes+n*Math.abs(i),a.total_amount=a.total_amount+n-o,a.amount_due=a.amount_due+n-o,e.total_amount=n-o,r(LK(e.id,e,!0))}})),a.total_amount=a.total_amount-a.taxes,a.amount_due=a.amount_due-a.taxes,r(DK(a))},e.totalCalculation=Object(m.debounce)(e.invoiceLineItemsCalculation,500),e.showInvoiceModel=function(){e.setState({showInvoiceModel:!0,modal:"new_invoice"})},e.renderModal=function(){var t=e.props.entity;switch(e.state.modal){case"new_invoice":return Object(a.jsx)(Q8,{isOpen:e.state.showInvoiceModel,onClose:e.hideInvoiceModel,job:t.job,invoiceId:t.id,data:{actuals:!0,expenses:!0},submitInvoiceItems:e.onClickInvoiceCreateModal})}return null},e.hideInvoiceModel=function(){e.setState({showInvoiceModel:!1,modal:void 0})},e.onClickInvoiceCreateModal=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r,a){var o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=[],t.prev=1,!((i=e.parsingJobCosting(a)||[]).length<=0)){t.next=6;break}return Qm(Vm.Danger,"Job costing items does not exist"),t.abrupt("return");case 6:if(!e.jobCostingItemsVaidate(i)){t.next=9;break}return Qm(Vm.Danger,"Validation error"),t.abrupt("return");case 9:c=Object(pV.a)(i),t.prev=10,l=Fm.a.mark((function e(){var t,r,a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,e.next=3,QU.createItem(n,t);case 3:r=e.sent,t.linked_items&&(null===(a=t.linked_items)||void 0===a||a.forEach((function(e){o.push({type:t.linked_items_category,id:e.id,invoice_item_id:r.data.id})})));case 5:case"end":return e.stop()}}),e)})),c.s();case 13:if((s=c.n()).done){t.next=17;break}return t.delegateYield(l(),"t0",15);case 15:t.next=13;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(10),c.e(t.t1);case 22:return t.prev=22,c.f(),t.finish(22);case 25:if(t.t2=o.length>0,!t.t2){t.next=29;break}return t.next=29,QU.setInvoiceItemToJobCostingItem(r.id,o);case 29:e.props.dispatch(TK(n)),e.hideInvoiceModel(),t.next=36;break;case 33:t.prev=33,t.t3=t.catch(1),Qm(Vm.Danger,"Server Error");case 36:return t.prev=36,t.finish(36);case 38:case"end":return t.stop()}}),t,null,[[1,33,36,38],[10,19,22,25]])})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n,r,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobFromJobCosting,!(a=n.jobCosting)){e.next=10;break}if(!r){e.next=10;break}return e.next=5,this.getOrganizationByLocation(null===r||void 0===r?void 0:r.assigned_location.id);case 5:if(!(o=e.sent)){e.next=10;break}return e.next=9,this.props.dispatch(o$(o.id));case 9:this.debounceJobCostingItems(a);case 10:(null===(t=this.props.entity)||void 0===t?void 0:t.accounting_organization_id)&&this.props.dispatch(o$(this.props.entity.accounting_organization_id));case 11:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jobCostingItemsVaidate",value:function(e){var t=!1;return j.a.forEach(e,(function(e){return!(uv(e.gs_code)||uv(e.description)||uv(e.unit_cost)||uv(e.quantity)||uv(e.gl_account)||uv(e.tax_rate))||(t=!0,!1)})),t}},{key:"render",value:function(){var e=this.props,t=e.entity,n=e.entityType,r=t.items||[];return Object(a.jsxs)("div",{children:[this.renderModal(),Object(a.jsx)(Z7,{children:Object(a.jsx)(I8,{dataSource:r,columnsDefinition:this.columns,useCustomStyle:!0,updatedData:this.DragDropPositionUpdate})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-4 pl-2",children:[!this.props.disabled&&Object(a.jsx)("button",{type:"button",className:"btn btn-link",onClick:this.props.onCreate,children:"Add Item"}),!this.props.disabled&&!!t.job&&this.props.entityType===W8.invoice&&Object(a.jsx)("button",{type:"button",className:"btn btn-link",onClick:this.showInvoiceModel,children:"Build From Job"})]}),Object(a.jsx)("div",{className:"col-8 text-right",children:Object(a.jsx)(h8,{entityType:n,subTotal:t.sub_total,taxes:t.taxes,total:t.total_amount,balanceDue:t.amount_due})})]})]})}},{key:"glFilter",get:function(){return this.props.entityType===W8.invoice?function(e){return!e.account_type.increase_action_is_debit}:function(e){return e}}},{key:"columns",get:function(){switch(this.props.entityType){case W8.invoice:return this.allColumns.filter((function(e){return"markup"!==e.id}));case W8.purchaseOrder:return this.allColumns.filter((function(e){return"discount"!==e.id}));default:return this.allColumns.filter((function(e){return"markup"!==e.id&&"discount"!==e.id}))}}}]),n}(p.PureComponent),t6=Object(b.b)((function(e){return{glAccounts:c$(e),taxRates:e.finance.taxRates,gsCodes:e.finance.gsCodes,financeEntity:e.invoice}}))(e6);!function(e){e.job="job",e.credit_note="credit_note",e.purchase_order="purchase_order",e.invoice="invoice",e.contact="contact"}(K8||(K8={})),function(e){e.credit_note="credit_note",e.purchase_order="purchase_order",e.invoice="invoice"}(Z8||(Z8={}));var n6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showApproveModal:!1},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){Jf.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.channelName,n=e.otherActions,r=e.type,o=e.onTagClick,i=e.viewTagsPermission,c=e.addNotePermission,s=e.onNoteAdd;return Object(a.jsxs)(sw,{className:"d-flex align-items-center justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"".concat(K8[r],"-menu-tooltip"),effect:"solid"}),Object(a.jsx)(cw,{"data-tip":"Add note","data-for":"".concat(K8[r],"-menu-tooltip"),disabled:!c,children:Object(a.jsx)(Ff,{name:Ef.AddNote,onClick:c?s:void 0})}),Object(a.jsx)(WC,{type:K8[r],onTagClick:o,disabled:!i}),Object(a.jsx)(yw,{items:n,disabled:!n.length})]}),Object(a.jsx)(tN,{channel:t})]})}}]),n}(p.PureComponent),r6={recipient_contact:[uv],location:[uv],date:[uv]},a6=sv(Object(c.a)(Object(c.a)({},r6),{},{due_at:[uv]})),o6=sv(r6);function i6(){var e=Object(f.a)(["\n  font-size: ",";\n  display: ",";\n"]);return i6=function(){return e},e}function c6(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n"]);return c6=function(){return e},e}function s6(){var e=Object(f.a)(["\n  float: right;\n  cursor: pointer;\n  margin-top: -3px;\n  margin-right: -8px;\n"]);return s6=function(){return e},e}function l6(){var e=Object(f.a)(["    \n  margin: 10px auto;\n  padding: 12px;\n  padding-right: 20px;\n  position: relative;\n  overflow: ",";\n  position: relative;\n"]);return l6=function(){return e},e}var u6=Object(x.default)(Kj(["collapsed","overflow"])("div"))(l6(),(function(e){return e.overflow?e.overflow:"hidden"})),d6=x.default.div(s6()),p6=x.default.div(c6(),Bf.bold),h6=Object(x.default)(Kj(["collapsed"])("div"))(i6(),Vf.smaller,(function(e){return e.collapsed?"none":"block"})),b6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!e.props.isNew,overflow:""},e.submitSavedInvoice=function(){if(!e.props.isNew&&e.props.dirty)return e.props.handleSubmit(e.props.onUpdate)()},e.debouncedSubmitSavedInvoice=Object(m.debounce)(e.submitSavedInvoice,200),e.onJobSelect=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.change("location",n.assigned_location),e.props.change("reference",n.reference_number),e.props.isNew&&(a=n.invoice_to_contact?{id:n.invoice_to_contact.contact_id,name:n.invoice_to_contact.contact_name}:{},e.props.change("recipient_contact",a),e.props.isInvoice&&n.invoice_to_contact&&(null===(r=n.invoice_to_contact)||void 0===r?void 0:r.payment_term)?(e.props.change("payment_term",null===(o=n.invoice_to_contact)||void 0===o?void 0:o.payment_term),s=(null===(i=n.invoice_to_contact)||void 0===i||null===(c=i.payment_term)||void 0===c?void 0:c.due_dates)||30,l=qf()(e.props.formData.date).add(s,"days"),e.props.change("due_at",null),setTimeout((function(){e.props.change("due_at",l)}))):(e.props.change("payment_term",null===(u=e.props.paymentTerms)||void 0===u?void 0:u.find((function(e){return 30===e.due_days}))),d=qf()(e.props.formData.date).add(30,"days"),e.props.change("due_at",null),setTimeout((function(){e.props.change("due_at",d)})))),e.debouncedSubmitSavedInvoice();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadContacts=function(e){var t={term:e};return Jv.searchContacts(t).then((function(e){return e.data}))},e.getContactName=function(t){var n=e.props.formData;n&&n.recipient_name;return t.name||Jv.getContactName(t)},e.debouncedLoadContacts=_v()(e.loadContacts,1e3),e.debouncedSearchJobs=_v()(ly.searchJobs,1e3),e.onChangePaymentTerm=function(t){e.setDueDateOnPaymentTerm(t),e.debouncedSubmitSavedInvoice()},e.setDueDateOnPaymentTerm=function(t){if(t){var n=t.due_days?t.due_days:30,r=qf()(e.props.formData.date).add(n,"days");e.props.change("due_at",null),setTimeout((function(){e.props.change("due_at",r)}))}},e.toggleCollapsed=function(){e.setState({collapsed:!e.state.collapsed})},e.onContactChange=function(t){t&&e.props.isInvoice&&t.payment_terms&&(e.setDueDateOnPaymentTerm(t.payment_terms),e.props.change("payment_term",t.payment_terms)),e.debouncedSubmitSavedInvoice()},e.toContactStyle=function(){return{container:function(e){return Object(c.a)(Object(c.a)({},e),{},{zIndex:9999})}}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.handleSubmit,r=e.isNew,o=e.isInvoice,i=e.disabled,c=e.isFromJobCosting,s=e.paymentTerms;return Object(a.jsxs)(u6,{collapsed:this.state.collapsed,overflow:"",children:[!r&&Object(a.jsx)(d6,{onClick:this.toggleCollapsed,children:Object(a.jsx)(Ff,{name:this.collapseIconName,size:16})}),Object(a.jsx)(p6,{}),Object(a.jsx)(h6,{collapsed:this.state.collapsed,children:Object(a.jsx)(mg,{isNew:r,children:Object(a.jsxs)("form",{onSubmit:n,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:i,children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12 position-relative",children:Object(a.jsx)(yv.a,{name:"recipient_contact",label:"To:",placeholder:"Start typing to search...",component:rO,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-9",loadOptions:this.debouncedLoadContacts,getOptionLabel:this.getContactName,getOptionValue:function(e){return e.id},onChange:this.onContactChange,disabled:i,style:this.toContactStyle})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"location",label:"From:",placeholder:"Select...",component:Kv,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-6",options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:this.debouncedSubmitSavedInvoice,disabled:!t.length||i})})})]}),Object(a.jsxs)("div",{className:"col-5 offset-1",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"date",label:"Date:",placeholder:"Date",component:Cy,className:"row",labelClassName:"col-4 pr-0 col-form-label",valueClassName:"col-6",onChange:this.debouncedSubmitSavedInvoice,disabled:i,futureEnabled:!0})})}),o&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"due_at",label:"Due Date:",placeholder:"Due Date",component:Cy,className:"row",labelClassName:"col-4 pr-0 col-form-label",valueClassName:"col-6",onChange:this.debouncedSubmitSavedInvoice,disabled:i,futureEnabled:!0})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"payment_term",label:"Payment Term:",placeholder:"Select...",component:Kv,className:"row",labelClassName:"col-4 col-form-label",valueClassName:"col-6",options:s,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.description},onChange:this.onChangePaymentTerm,disabled:!(null===s||void 0===s?void 0:s.length)||i})})})]})]})]}),Object(a.jsx)("div",{className:"row pt-5",children:Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"job",label:"Job Number (optional):",placeholder:"Job Number",component:rO,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-6",loadOptions:this.debouncedSearchJobs,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return ly.getJobName(e)},onChange:this.onJobSelect,disabled:i})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"reference",label:"Reference:",placeholder:"None",component:ZO,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-6",onBlur:this.debouncedSubmitSavedInvoice})})})]})})]}),Object(a.jsx)(Qj,{}),r&&!c&&Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",disabled:this.props.submitting,children:"Create"})]})})})]})}},{key:"collapseIconName",get:function(){return this.state.collapsed?Ef.ArrowDown:Ef.ArrowUp}}]),n}(p.PureComponent),f6=Object(b.b)((function(e){return{locations:e.user.locations}}))(b6),m6=Object(Gj.a)({form:"InvoiceDetailsForm",validate:a6,enableReinitialize:!0})(f6),j6=Object(b.b)((function(e){return{formData:Object(eM.a)("InvoiceDetailsForm")(e)}}))(m6);function v6(){var e=Object(f.a)(["\n  border-left: 1px solid ",";\n"]);return v6=function(){return e},e}function O6(){var e=Object(f.a)(["\n  min-height: 100%;\n"]);return O6=function(){return e},e}var g6,x6=x.default.div(O6()),y6=Object(x.default)(uC)(v6(),y.gray2),w6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.sidebarMenuItems,n=e.menu,r=e.header,o=e.content,i=e.references,c=e.upperToolsContainer,s=e.footer;return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(eS,{items:t}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(y6,{className:"h-100",children:Object(a.jsxs)(x6,{className:"d-flex flex-row align-items-stretch",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[n,r,c,Object(a.jsx)(hC,{children:o}),s]}),Object(a.jsx)(fR,{children:i})]})})})]})}}]),n}(p.PureComponent),_6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onClose,o=r.onSubmit,e.setState({loading:!0}),t.prev=2,t.next=5,o(n);case 5:Qm(Vm.Success,"A request for approval has been sent to selected users"),a(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),Qm(Vm.Danger,"Server error");case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.approvers,r=t.handleSubmit;return Object(a.jsx)("form",{autoComplete:"off",onSubmit:r(e.onSubmit),id:"RequestApprovalModalForm",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"user",component:Kv,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return Yf(e).name},validate:uv,options:n,label:"Staff Name"})})})})},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",type:"submit",form:"RequestApprovalModalForm",children:"Send"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=this.state.loading;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,footer:this.renderFooter(),body:this.renderBody(),loading:r,title:"Request Approval"})})}}]),n}(p.PureComponent),k6=Object(Gj.a)({form:"RequestApprovalModalForm"})(_6),S6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e._ISLOADED=!1,e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.id,n.id=r,a=e.props,o=a.onClose,i=a.onSubmit,e.setState({loading:!0}),t.prev=4,t.next=7,i(n);case 7:Qm(Vm.Success,"A request to Adjust has been sent."),o(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),Qm(Vm.Danger,"Server error");case 14:return t.prev=14,e._ISLOADED&&e.setState({loading:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[4,11,14,17]])})));return function(e){return t.apply(this,arguments)}}(),e.onClickReplaceWithContactDetails=function(t){var n;t.preventDefault();var r=e.props.contacts;e.props.change("name",e.contactFullName(r)),e.props.change("address",null===r||void 0===r||null===(n=r.mailing_address)||void 0===n?void 0:n.full_address)},e.renderBody=function(){var t=e.props.handleSubmit;return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:t(e.onSubmit),id:"AdjustModalForm",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",placeholder:"Name",component:ZO,validate:uv})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)(yv.a,{name:"address",label:"Address",component:SJ,validate:uv})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)("a",{href:"#",onClick:e.onClickReplaceWithContactDetails,children:"Replace with contact details"})})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._ISLOADED=!0}},{key:"componentWillUnmount",value:function(){this._ISLOADED=!1}},{key:"contactFullName",value:function(e){return"company"===(null===e||void 0===e?void 0:e.contact_type)?(null===e||void 0===e?void 0:e.trading_name)||"":"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"")}},{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",type:"submit",form:"AdjustModalForm",children:"Save"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.title,o=this.state.loading;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,footer:this.renderFooter(),body:this.renderBody(),loading:o,title:r})})}}]),n}(p.PureComponent),C6=Object(Gj.a)({form:"AdjustModalForm",enableReinitialize:!0})(S6),N6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).usedContactIds=void 0,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchReferenceBarData()}},{key:"componentDidUpdate",value:function(e){this.props.entity.job&&e.entity.job&&this.props.entity.job.id!==e.entity.job.id&&this.fetchReferenceBarData()}},{key:"fetchReferenceBarData",value:function(){var e=this.props.entity.job;if(e){var t=e.id;this.props.contacts.fetch(t)}}},{key:"renderReferenceBarJob",value:function(){var e=this.props.entity.job;return e?Object(a.jsx)(XD,{job:e,showJobLink:!0,contacts:this.props.contacts.data||[],withoutActions:!0}):null}},{key:"checkContactNotUsed",value:function(e){return!this.usedContactIds.includes(e.id)&&(this.usedContactIds.push(e.id),!0)}},{key:"renderJobContacts",value:function(){var e=this;return this.props.contacts.data?this.props.contacts.data.map((function(t,n){return e.checkContactNotUsed(t)?Object(a.jsx)(UR,{contact:t},"cnt-".concat(t.type,"-").concat(n)):null})):null}},{key:"renderContact",value:function(e){return this.checkContactNotUsed(e)?Object(a.jsx)(UR,{contact:e}):null}},{key:"renderFinancials",value:function(){return Object(a.jsx)(NR,{financials:{}})}},{key:"render",value:function(){return this.usedContactIds=[],Object(a.jsxs)(a.Fragment,{children:[(this.props.loading||this.props.contacts.loading)&&Object(a.jsx)(av,{size:40,color:y.white}),this.props.entity.recipient_contact&&this.renderContact(this.props.entity.recipient_contact),this.props.entity.accounting_organization&&this.renderContact(this.props.entity.accounting_organization.contact),this.props.additionalItems,this.renderJobContacts(),this.renderReferenceBarJob(),this.renderFinancials()]})}}]),n}(p.PureComponent),E6=Mm({contacts:{fetch:ly.getContacts,initialData:[]}})(N6),A6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getInitializeFormValues=function(){var t,n,r,a=e.props,o=a.location,i=a.financeEntity.data,c=a.user,s=qm.parse(o.search,{ignoreQueryPrefix:!0}),l=(o.state||{}).job;return e.isNew?(r={date:qf()(),location:(null===l||void 0===l?void 0:l.assigned_location)||s.form_location_id&&c.locations.find((function(e){return+e.id===+(void 0==s.form_location_id?0:s.form_location_id)}))||e.primaryLocation},Object(k.a)(r,l||s.form_job_id?"job":"",l||{id:+(void 0===s.form_job_id?0:s.form_job_id)}),Object(k.a)(r,(null===l||void 0===l?void 0:l.invoice_to_contact)?"recipient_contact":"",(null===l||void 0===l?void 0:l.invoice_to_contact)?{id:null===l||void 0===l||null===(t=l.invoice_to_contact)||void 0===t?void 0:t.contact_id,name:null===l||void 0===l||null===(n=l.invoice_to_contact)||void 0===n?void 0:n.contact_name}:{}),Object(k.a)(r,"due_at",qf()().add(30,"d")),r):i},e}return Object(l.a)(n,[{key:"isNew",get:function(){return!this.props.match.params.id}},{key:"primaryLocation",get:function(){return this.props.user.locations.find((function(e){return!!e.primary}))}}]),n}(bI);!function(e){e[e.FromCreditNote=0]="FromCreditNote",e[e.FromInvoice=1]="FromInvoice"}(g6||(g6={}));var T6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={invoices:[],loading:!1},e.loadInvoices=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.searchInvoices.fetch(n);case 2:r=t.sent,e.setState({invoices:e.invoicesConverter(r.data)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadCreditNotes=function(t){e.props.searchCreditNotes.fetch(t)},e.debouncedSearch=function(){switch(e.props.mode){case g6.FromCreditNote:return Object(m.debounce)(e.loadInvoices,1e3);case g6.FromInvoice:return Object(m.debounce)(e.loadCreditNotes,1e3);default:return Object(m.debounce)((function(e){return null}),1e3)}}(),e.onChange=function(t){var n=e.props,r=n.mode,a=n.financeEntity;if(+t)switch(r){case g6.FromCreditNote:e.debouncedSearch({job_id:+t});break;case g6.FromInvoice:e.debouncedSearch({id:+t,virtual_status:Lf.approved,locations:[a.location_id]})}else e.debouncedSearch.cancel()},e.invoicesConverter=function(e){return e.map((function(e){return{id:e.id,amount:0,invoice:e}}))},e.onInvoiceAmountChange=function(t){return function(n){var r=e.state.invoices,a=Object.assign([],r);a.forEach((function(e){e.id===t.id&&(e.amount=b$(n.target.value))})),e.setState({invoices:a})}},e.getAmount=function(){return e.state.invoices.reduce((function(e,t){return e+t.amount}),0)},e.isPaymentValid=function(){var t=e.props.financeEntity;return!!t&&t.sub_total===e.getAmount()},e.renderInvoiceAmountInput=function(t){return Object(a.jsx)("input",{type:"number",value:t.amount,onChange:e.onInvoiceAmountChange(t),onBlur:function(){return null},className:"form-control"})},e.chooseCN=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o,i,c;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,a=r.onPay,o=r.onClose,i=r.financeEntity,e.setState({loading:!0}),n.prev=2,c=i.amount_due||0,!(t.total_amount>c)){n.next=7;break}return Qm(Vm.Danger,"Unable to apply a credit note value that is higher than the invoice balance due"),n.abrupt("return");case 7:return n.next=9,a(t);case 9:setTimeout(o);case 10:return n.prev=10,e.setState({loading:!1}),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[2,,10,13]])})))},e.renderBody=function(){var t=e.props,n=t.searchInvoices,r=t.financeEntity,o=t.mode,i=t.searchCreditNotes,c=e.state.invoices,s=i.data?i.data.data.filter((function(e){return!r.job_id||(!e.job||e.job.id===r.job_id)})):[];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(ES,{loading:n.loading||i.loading,onSearchValueChange:e.onChange,placeholder:e.inputPlaceholder,mode:"typeGray",searchIcon:!0,disabled:e.disableInput})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(a.Fragment,{children:[o===g6.FromCreditNote&&!!c.length&&Object(a.jsxs)("div",{className:"col-12",children:[r&&Object(a.jsxs)(FS,{margin:"20px 0 0 0",className:"d-flex justify-content-end",children:[Kf(e.getAmount())," / ",Kf(r.sub_total)]}),Object(a.jsx)(FS,{margin:"20px 0 0 0",children:Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Invoice"}),Object(a.jsx)(PL,{}),Object(a.jsx)(PL,{children:"Job No."}),Object(a.jsx)(PL,{children:"Total Amount"}),Object(a.jsx)(PL,{children:"Balance Due"}),Object(a.jsx)(PL,{})]})}),Object(a.jsx)(LL,{children:e.state.invoices.map((function(t,n){return Object(a.jsxs)(UL,{children:[Object(a.jsxs)(FL,{children:["#",t.id]}),Object(a.jsx)(FL,{}),Object(a.jsx)(FL,{children:Object(a.jsx)(j4,{job:t.invoice.job,locationOnly:!0})}),Object(a.jsx)(FL,{children:Kf(t.invoice.total_amount)}),Object(a.jsx)(FL,{children:Kf(t.invoice.balance_due)}),Object(a.jsx)(FL,{children:Object(a.jsx)("div",{style:{width:"150px"},children:e.renderInvoiceAmountInput(t)})})]},n)}))})]})})]}),o===g6.FromInvoice&&!!s.length&&Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(FS,{margin:"20px 0 0 0",children:Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Credit Note"}),Object(a.jsx)(PL,{}),Object(a.jsx)(PL,{children:"Job No."}),Object(a.jsx)(PL,{children:"Total Amount"})]})}),Object(a.jsx)(LL,{children:s.map((function(t,n){return Object(a.jsxs)(UL,{onClick:e.chooseCN(t),children:[Object(a.jsxs)(FL,{children:["CN #",t.id]}),Object(a.jsx)(FL,{}),Object(a.jsx)(FL,{children:Object(a.jsx)(j4,{job:t.job,locationOnly:!0})}),Object(a.jsx)(FL,{children:Kf(t.total_amount)})]},n)}))})]})})})]})})]})},e.onInternalPay=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.onPay,a=n.onClose,o=e.state.invoices,e.setState({loading:!0}),t.prev=3,t.next=6,r(o);case 6:setTimeout(a);case 7:return t.prev=7,e.setState({loading:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])}))),e.renderFooter=function(){return e.props.mode===g6.FromCreditNote?Object(a.jsx)(Cg,{disabled:!e.isPaymentValid(),className:"btn",onClick:e.onInternalPay,children:"Apply"}):void 0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.financeEntity,n=e.mode;t&&t.job_id&&n===g6.FromCreditNote&&this.loadInvoices({job_id:t.job_id})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=this.state.loading;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,footer:this.renderFooter(),body:this.renderBody(),loading:r,title:"Apply Credit Note to Invoice"})})}},{key:"initialSearchInputValue",get:function(){var e=this.props,t=e.financeEntity;switch(e.mode){case g6.FromCreditNote:return(!!t&&t.job_id||"").toString();case g6.FromInvoice:default:return""}}},{key:"disableInput",get:function(){var e=this.props,t=e.financeEntity;switch(e.mode){case g6.FromCreditNote:return!!t&&!!t.job_id;case g6.FromInvoice:default:return!1}}},{key:"inputPlaceholder",get:function(){switch(this.props.mode){case g6.FromCreditNote:return"Type job number...";case g6.FromInvoice:return"CN number, reference or job no";default:return""}}}]),n}(p.PureComponent),I6=Object(LO.compose)(Mm({searchInvoices:{fetch:QU.getUnpaid},searchCreditNotes:{fetch:dZ.search}}))(T6);function R6(){var e=Object(f.a)(["\n  position: relative;\n  border-top: 1px solid ",";\n"]);return R6=function(){return e},e}var D6=x.default.div(R6(),y.gray2),M6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showApproveModal:!1,showAdjustModal:!1,disableApproveButton:!1,showAddPaymentModal:!1,showAddCreditNoteModal:!1,pageLoading:!1,isEditDraftLockedInvoice:!1},e.notesCounter=function(e){return e.invoiceNotes.data?e.invoiceNotes.data.data.length:0},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.createInvoice=function(t){var n=e.props.match.params.tempId;return t.invoice_template_id=n?+n:0,QU.create(t).then((function(t){e.props.history.push("/finance/invoices/details/".concat(t.data.id))})).catch((function(e){return e.status_code===Dg?Mg(e):Promise.reject()}))},e.updateInvoice=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.prev=2,t.next=5,e.props.dispatch(IK(+e.props.match.params.id,n));case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),t.t0.status_code!==Dg){t.next=14;break}return t.abrupt("return",Mg(t.t0));case 14:return t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createOrUpdateInvoice=function(t){return e.isNew?e.createInvoice(t):e.updateInvoice(t)},e.createItem=function(){return e.props.dispatch(MK())},e.updateItem=function(t,n){return e.props.dispatch(LK(t,n,!0))},e.updateItems=function(t){var n=e.props.match.params.id;if(n){var r=[];if(t.length>0&&t.map((function(e,t){r.push({id:e.id,position:t})})),r.length>0)try{QU.invoiceItemsPositionUpdate(+n,r)}catch(a){Qm(Vm.Danger,"Server Error")}e.props.dispatch(FK(t))}},e.submitItem=function(t){return e.props.dispatch(UK(t))},e.removeItem=function(t){return e.props.dispatch(VK(t))},e.approveInvoice=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match,!e.allowApprove()){t.next=23;break}return t.next=4,r(Sw("Confirm","Are you sure you want to approve Invoice #".concat(a.params.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=21;break}return e.setState({disableApproveButton:!0}),t.prev=7,t.next=10,QU.approveInvoice(a.params.id);case 10:return Qm(Vm.Success,"Invoice approved successfully"),t.next=13,e.fetchInvoice();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Qm(Vm.Danger,"Invoice can't be approved");case 18:return t.prev=18,e.setState({disableApproveButton:!1}),t.finish(18);case 21:t.next=24;break;case 23:e.showApproveModal();case 24:case"end":return t.stop()}}),t,null,[[7,15,18,21]])}))),e.duplicateInvoice=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=10;break}return t.next=4,a(Sw("Confirm","Duplicate financeEntity #".concat(r.id,"?")));case 4:if(!t.sent){t.next=10;break}return t.next=8,QU.create(r);case 8:o=t.sent,e.props.history.push("/finance/invoices/details/".concat(o.data.id));case 10:case"end":return t.stop()}}),t)}))),e.deleteInvoice=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=9;break}return t.next=4,a(Sw("Confirm","Are you sure you want to delete the invoice #".concat(r.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=9;break}return t.next=8,QU.remove(r.id);case 8:e.props.history.replace("/finance/invoices/draft");case 9:case"end":return t.stop()}}),t)}))),e.adjustInvoice=function(){e.showAdjustModal()},e.print=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.financeEntity.data)){t.next=6;break}return t.next=4,QU.forPrint(n.id);case 4:r=t.sent,JV()({printable:window.URL.createObjectURL(new Blob([r],{type:"application/pdf"})),type:"pdf"});case 6:case"end":return t.stop()}}),t)}))),e.onTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,QU.addTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,QU.removeTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickEditDraftLockedInvoice=function(){e.setState({isEditDraftLockedInvoice:!0})},e.getDropdownMenuItems=function(t){var n=e.props.financeEntity.data;return[{name:"Edit Invoice",onClick:e.onClickEditDraftLockedInvoice,disabled:!e.isEditDraftLockedInvoice()},{name:"Print",onClick:e.print},{name:"Duplicate",onClick:e.duplicateInvoice,disabled:!t.has(Dw.INVOICES_MANAGE)||!n},{type:"divider"},{name:"Adjust Invoice To...",onClick:e.adjustInvoice,disabled:!e.editableInvoice()},{type:"divider"},{name:"Delete",onClick:e.deleteInvoice,disabled:!t.has(Dw.INVOICES_MANAGE)}]},e.isNoteEditorVisible=function(){return"true"===qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.redirectToNotes=function(){var t=e.props,n=t.history,r=t.match;n.push("/finance/invoices/details/".concat(r.params.id,"?note=true"))},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.financeEntity.data,o=r.match,!a||!a.id){t.next=6;break}return t.next=4,QU.addNoteToInvoice(n.id,a.id);case 4:e.loadNotes(),e.props.history.replace("/finance/invoices/details/".concat(o.params.id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadNotes=function(){var t=e.props,n=t.match,r=t.invoiceNotes,a=n.params.id;r.fetch(a)},e.getSortedNotes=function(){var t=e.props.invoiceNotes;return t.data?t.data.data.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})):[]},e.deleteNote=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.invoiceNotes,t.next=3,QU.removeNoteFromInvoice(n,a.params.id);case 3:o.fetch(a.params.id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.allowApprove=function(){var t=e.props,n=t.user,r=t.financeEntity;return+n.me.invoice_approve_limit>=+(r.data.total_amount||0)&&!!r.data.location&&n.locations.map((function(e){return+e.id})).includes(+r.data.location.id)},e.sendApproveRequest=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,QU.sendApproveRequest(r.params.id,[n.user.id]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendAdjustRequest=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({pageLoading:!0}),QU.adjustInvoice(n.id,n.address,n.name).then(Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchInvoice();case 2:e.setState({pageLoading:!1});case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showApproveModal=function(){e.setState({showApproveModal:!0})},e.hideApproveModal=function(){e.setState({showApproveModal:!1})},e.showAdjustModal=function(){e.setState({showAdjustModal:!0})},e.hideAdjustModal=function(){e.setState({showAdjustModal:!1})},e.showAddPaymentModal=function(){e.setState({showAddPaymentModal:!0})},e.hideAddPaymentModal=function(){e.setState({showAddPaymentModal:!1})},e.showAddCreditModal=function(){var t=e.props.financeEntity.data,n=t&&t.total_amount;(t&&t.amount_due)<n?Qm(Vm.Danger,"Unable to apply a credit note value that is higher than the invoice balance due"):e.setState({showAddCreditNoteModal:!0})},e.hideAddCreditModal=function(){e.setState({showAddCreditNoteModal:!1})},e.onPaymentReceive=function(){e.fetchInvoice()},e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e.renderInvoicePayment=function(t){var n=t.has(Dw.PAYMENTS_RECEIVE),r=t.has(Dw.CREDIT_NOTES_MANAGE);return e.isPayable()&&(r||n)?Object(a.jsxs)(PT,{caption:"Invoice Payment",children:[n&&Object(a.jsx)(BS.Link,{onClick:e.showAddPaymentModal,children:"Add Payment"}),r&&Object(a.jsx)(BS.Link,{onClick:e.showAddCreditModal,children:"Add Credit Note"})]}):void 0},e.isDraft=function(){var t=e.props.financeEntity.data;return"draft"===(t.latest_status&&t.latest_status.status)},e.isApproved=function(){var t=e.props.financeEntity.data;return"approved"===(t.latest_status&&t.latest_status.status)},e.editableInvoice=function(){var t=e.props.user,n=t.me&&t.me.role;return!(!e.isDraft()||"administrator"!==n&&"Admin"!==n&&"branch_franchise_manager"!==n&&"cco"!==n&&"cso_am"!==n)||!(!e.isDraft()||"administrator"!==n&&"Admin"!==n)},e.isEditDraftLockedInvoice=function(){var t=e.props.financeEntity;return!(!e.isDraft()||!t.data.locked)},e.isPayable=function(){var t=e.props.financeEntity.data;return!e.isNew&&!e.isDraft()&&"paid"!==t.virtual_status},e.payInvoiceWithCN=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.dispatch,i=a.params.id,t.next=4,o(Sw("Confirm","Apply Credit Note #".concat(n.id," to Invoice #").concat(i,"?")));case 4:if(!(c=t.sent)){t.next=13;break}return t.next=8,dZ.findById(n.id);case 8:return s=t.sent,t.next=11,dZ.applyCreditNoteToInvoices(n.id,[{invoice_id:+i,amount:s.data.sub_total}]);case 11:t.next=14;break;case 13:throw c;case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickJobIncvoiceCreate=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,o=h3.getState(),i=[],!Object(GA.a)("InvoiceDetailsForm")(o)){t.next=15;break}if(!(r.items&&(null===(c=r.items)||void 0===c?void 0:c.length)<=0)){t.next=7;break}return Qm(Vm.Danger,"Invoice line item does not exist"),t.abrupt("return");case 7:if(!e.LineItemValidate()){t.next=10;break}return Qm(Vm.Danger,"Validation errors"),t.abrupt("return");case 10:e.setState({disableApproveButton:!0}),s=Object(eM.a)("InvoiceDetailsForm")(o),QU.create(s).then(function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var a,o,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.items||[],o=Object(pV.a)(a),t.prev=2,s=Fm.a.mark((function e(){var t,r,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=c.value).position=a.indexOf(t),e.next=4,QU.createItem(n.data.id,t);case 4:r=e.sent,t.jobCostinItemType&&(null===(o=t.jobCostinItemTypeIds)||void 0===o||o.forEach((function(e){i.push({type:t.jobCostinItemType,id:e,invoice_item_id:r.data.id})})));case 6:case"end":return e.stop()}}),e)})),o.s();case 5:if((c=o.n()).done){t.next=9;break}return t.delegateYield(s(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),o.e(t.t1);case 14:return t.prev=14,o.f(),t.finish(14);case 17:if(t.t2=i.length>0,!t.t2){t.next=21;break}return t.next=21,QU.setInvoiceItemToJobCostingItem(n.data.job_id,i);case 21:Qm(Vm.Success,"Invoice created successfully"),e.props.history.push("/finance/invoices/details/".concat(n.data.id));case 23:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){Qm(Vm.Danger,"Server Error")})).finally((function(){e.setState({disableApproveButton:!1})})),t.next=17;break;case 15:return t.next=17,a(Object(xv.c)("InvoiceDetailsForm"));case 17:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.isNew||this.fetchInvoice(),this.props.paymentTerms.fetch(),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id===e.match.params.id||this.isNew||this.fetchInvoice(),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:yK})}},{key:"fetchInvoice",value:function(){var e=this.props,t=e.dispatch,n=e.match,r=e.approvers,a=e.tags,o=n.params.id;this.loadNotes(),r.fetch(o),a.fetch(o),t(TK(o))}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){return[{path:"/finance/invoices/draft",icon:Ef.FileEdit,isActive:this.isActive("/finance/invoices/draft"),hint:"Drafts"},{path:"/finance/invoices/unpaid",icon:Ef.FileCheck,isActive:this.isActive("/finance/invoices/unpaid"),hint:"Unpaid"},{path:"/finance/invoices/overdue",icon:Ef.FileCash,isActive:this.isActive("/finance/invoices/overdue"),hint:"Overdue"},{path:"/finance/invoices/paid",icon:Ef.FileCash,isActive:this.isActive("/finance/invoices/paid"),hint:"Paid"},{path:"/finance/invoices/all",icon:Ef.File,isActive:this.isActive("/finance/invoices/all"),hint:"All invoices"}]}},{key:"LineItemValidate",value:function(){var e=this.props.financeEntity.data,t=!1;return j.a.forEach(e.items,(function(e){return!(uv(e.gs_code)||uv(e.description)||uv(e.unit_cost)||uv(e.quantity)||uv(e.gl_account)||uv(e.tax_rate))||(t=!0,!1)})),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.financeEntity,r=t.user,o=t.invoiceNotes,i=t.approvers,s=t.tags,l=this.state,u=l.showApproveModal,d=l.showAdjustModal,p=l.disableApproveButton,h=l.showAddPaymentModal,b=l.showAddCreditNoteModal;if(l.pageLoading||(!n.ready||n.loading)&&!this.isNew&&!this.alreadyLoaded)return Object(a.jsx)(av,{size:40,color:y.white});var f=n.data,m=f.statuses||[],v=!!f.items&&f.items.length>0,O=!f.amount_due||!!f.amount_due&&f.amount_due<0,g=p||!v||O,x=this.props.location.state||{},w=x.job,_=x.jobCosting;return Object(a.jsx)(Cw.Consumer,{children:function(t){var l,v,O,x=KX.isEditable(Dw.INVOICES_MANAGE,Dw.INVOICES_MANAGE_LOCKED,f,t,e.state.isEditDraftLockedInvoice),k=e.getDropdownMenuItems(t);return Object(a.jsxs)(a.Fragment,{children:[b&&Object(a.jsx)(I6,{isOpen:b,onClose:e.hideAddCreditModal,mode:g6.FromInvoice,onPay:e.payInvoiceWithCN,financeEntity:f}),u&&Object(a.jsx)(k6,{isOpen:u,approvers:i.data.data,onSubmit:e.sendApproveRequest,onClose:e.hideApproveModal}),e.editableInvoice()&&d&&Object(a.jsx)(C6,{isOpen:d,onSubmit:e.sendAdjustRequest,onClose:e.hideAdjustModal,title:"Edit Invoice To",id:f.id,contacts:f.recipient_contact,initialValues:{name:f.recipient_name,address:f.recipient_address}}),h&&Object(a.jsx)(p7,{invoice:f,onPaymentReceive:e.onPaymentReceive,onClose:e.hideAddPaymentModal}),Object(a.jsx)(w6,{sidebarMenuItems:e.getMenuItems(),menu:e.isNew?null:Object(a.jsx)(n6,{type:Z8.invoice,otherActions:k,onTagClick:e.onTagClick,viewTagsPermission:t.has(Dw.TAGS_VIEW),onNoteAdd:e.redirectToNotes,addNotePermission:t.has(Dw.INVOICES_MANAGE),channelName:"online-financeEntity-".concat(f.id)}),header:Object(a.jsx)(Y7,{id:f.id,tags:s.data.data||[],isNew:e.isNew,statusList:nm(f),loadingTags:s.loading,onTagRemove:e.onRemoveTagClick,entityName:"invoice"}),upperToolsContainer:e.isNoteEditorVisible()?Object(a.jsx)(hC,{style:{borderBottom:"1px solid ".concat(y.gray2)},children:Object(a.jsx)(dA,{afterSave:e.saveNoteDraft,disableTemplatesControl:!0,color:y.orange0,onCancel:e.revertBackToNotes})}):null,content:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(j6,{onSubmit:e.createOrUpdateInvoice,onUpdate:e.updateInvoice,isInvoice:!0,isNew:e.isNew,disabled:!x,initialValues:Object(c.a)(Object(c.a)({},e.getInitializeFormValues()),{},{payment_term:e.isNew?null===(l=e.props.paymentTerms.data)||void 0===l?void 0:l.data.find((function(e){return 30===e.due_days})):e.props.financeEntity.data.job&&e.props.financeEntity.data.job.invoice_to_contact?null===(v=e.props.financeEntity.data.job.invoice_to_contact)||void 0===v?void 0:v.payment_term:e.props.financeEntity.data.payment_term}),isFromJobCosting:!j.a.isEmpty(_),paymentTerms:null===(O=e.props.paymentTerms.data)||void 0===O?void 0:O.data}),(!e.isNew||!j.a.isEmpty(_))&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(t6,{entityType:W8.invoice,entity:f,disabled:!x,onCreate:e.createItem,onChange:e.updateItem,onSubmit:e.submitItem,onRemove:e.removeItem,handlePositionUpdatedData:e.updateItems,jobCosting:_,isFromJobCosting:!j.a.isEmpty(_),jobFromJobCosting:w}),t.has(Dw.INVOICES_MANAGE)&&e.isDraft()&&j.a.isEmpty(_)&&Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)(Cg,{type:"button",className:"btn",disabled:g,onClick:e.approveInvoice,children:e.allowApprove()?"Approve Invoice":"Request Approval"})}),t.has(Dw.INVOICES_MANAGE)&&!j.a.isEmpty(_)&&Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)(Cg,{type:"button",className:"btn",disabled:p,onClick:e.onClickJobIncvoiceCreate,children:"Create Invoice"})})]})]}),footer:e.isNew?null:Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[(e.getSortedNotes().length>0||m.length>0)&&Object(a.jsx)(D6,{children:Object(a.jsx)(ST,{notes:e.getSortedNotes(),onNoteDelete:e.deleteNote,loading:o.loading,highlightedItemId:e.getHighlightedItem().itemId,user:r,statuses:m,afterEditSuccess:e.loadNotes})}),Object(a.jsx)(wT,{status:Object.assign({status:"created"},n.data),itemTypeName:"Invoice"}),f.payments&&f.payments.length>0&&Object(a.jsxs)(xT,{className:"d-flex flex-row align-items-end",children:[Object(a.jsxs)("div",{className:"d-flex flex-column align-self-center flex-grow-1",children:["$",f.payments[0].pivot.amount," ",f.payments[0].type," ","credit_note"===f.payments[0].type&&ly.getJobNameOfCreditType(f.job)||ly.getJobName(f.job)," ","payment made by user ",f.location&&f.location.name]}),Object(a.jsx)(yT,{className:"d-flex flex-column align-self-center",children:qf()(f.payments&&f.payments[0].paid_at||"").format(Uj)})]})]}),references:t.has(Dw.JOBS_VIEW)&&!e.isNew?Object(a.jsx)(E6,{entity:f,loading:n.loading,additionalItems:e.renderInvoicePayment(t)}):Object(a.jsx)(a.Fragment,{})})]})}})}},{key:"alreadyLoaded",get:function(){return this.props.financeEntity.data.id&&+this.props.match.params.id===this.props.financeEntity.data.id}}]),n}(A6),P6=Object(LO.compose)(v.g,Mm({invoiceNotes:{fetch:QU.getInvoiceNotes},approvers:{fetch:QU.getApproverList,initialData:{data:[]}},tags:{fetch:QU.getInvoiceTags,initialData:{data:[]}},paymentTerms:{fetch:mI.getAllPaymentTerm}}),Object(b.b)((function(e){return{financeEntity:e.invoice,user:e.user}})))(M6);function L6(){var e=Object(f.a)(["\n  margin-left: 8px;\n  font-size: ",";\n  vertical-align: top;\n"]);return L6=function(){return e},e}var F6=[],U6=Object(x.default)(NC)(L6(),Vf.normal),V6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={type:Lf.draft,search:"",searchLoading:!1,filters:{locations:F6,recipient_contact_id:null,from_date:"",to_date:"",jobs:F6,virtual_status:""}},e.loadOrCancelPO=function(t,n){var r=e.props.match.params.type,a=e.state.search,o=fK(r);if(a){var i={id:a,virtual_status:o.virtualStatus,status:o.status};n?e.searcher(i):e.debouncedSearch(i)}else{e.debouncedSearch.cancel();var c={virtual_status:o.virtualStatus?o.virtualStatus:o.status,per_page:20,page:t||1,sortby:"desc"};"all"===r?e.loadPurchaseOrders(r,t):e.getTypePurchaseOrders(c)}},e.loadPurchaseOrders=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.dispatch,t.next=3,a(wX(n,{page:r,per_page:20,sortby:"desc"}));case 3:e.setState({type:n});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onSearch=function(t){e.setState({search:t}),setTimeout((function(){e.loadOrCancelPO()}))},e.searcher=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({searchLoading:!0}),t.prev=1,t.next=4,e.props.dispatch(_X(Object.assign({per_page:XO.Standard},n)));case 4:return t.prev=4,e.setState({searchLoading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Object(m.debounce)(e.searcher,1e3),e.getRows=function(){var t=e.props.purchaseOrders.data;return t&&t.data||[]},e.createPurchaseOrder=function(){e.props.history.push("/finance/purchase-orders/create")},e.handlePagination=function(t){e.loadOrCancelPO(t)},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=_v()(e.searchJobsById,1e3),e.loadContacts=function(e){var t={term:e};return Jv.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadContacts=_v()(e.loadContacts,1e3),e.getFilterPurchaseOrders=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.filters,n.type,a=e.props.dispatch,t.next=4,a(kX(r));case 4:case"end":return t.stop()}}),t)}))),e.getTypePurchaseOrders=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(kX(n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilters=function(){var t=e.props,n=t.match.params.type,r=t.locations,a=[{value:Lf.draft,label:Lf.draft},{value:Mf.pending_approval,label:Wf[Mf.pending_approval]},{value:Lf.approved,label:Lf.approved}];return[{label:"Location",filterKey:"location",options:r,placeholder:"Type to search",getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}},{label:"To",filterKey:"to",loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return Jv.getContactName(e)},placeholder:"Type to search"},{label:"From",type:"date",filterKey:"dateFrom"},{label:"To",type:"date",filterKey:"dateTo"},{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return ly.getJobName(e)},placeholder:"Type to search"},"all"===n&&{label:"Status",filterKey:"status",options:a,getOptionValue:function(e){return null===e||void 0===e?void 0:e.value},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.label},placeholder:"Select..."}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters,a=e.props.match.params.type;switch(t){case"status":r.virtual_status=null===n||void 0===n?void 0:n.value;break;case"location":r.locations=[null===n||void 0===n?void 0:n.id]||!1;break;case"to":r.recipient_contact_id=null===n||void 0===n?void 0:n.id;break;case"dateFrom":if(""!==n.currentTarget.value){var o=qf.a.utc(n.currentTarget.value).format(Mj);r.from_date=o}else r.from_date="";break;case"dateTo":if(""!==n.currentTarget.value){var i=qf.a.utc(n.currentTarget.value).format(Mj);r.to_date=i}else r.to_date="";break;case"jobNumber":r.jobs=[null===n||void 0===n?void 0:n.id]}r.virtual_status="all"===a?r.virtual_status:a,e.setState({filters:Object(c.a)({},r)},(function(){e.getFilterPurchaseOrders()}))},e.resetFilter=function(){e.setState({filters:{locations:F6,recipient_contact_id:null,from_date:"",to_date:"",jobs:F6,virtual_status:""}})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.match.params.type;t(yX()),this.loadOrCancelPO()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.type;e.match.params.type!==t&&(this.loadOrCancelPO(void 0,!0),this.resetFilter())}},{key:"getMenuItems",value:function(){var e=this.props.info.data;return[{path:"/finance/purchase-orders/draft",label:"Drafts",icon:Ef.FileEdit,isActive:this.isActive("/finance/purchase-orders/draft"),type:Mf.draft,value:0},{path:"/finance/purchase-orders/pending_approval",label:"Pending Approval",icon:Ef.FileCheck,isActive:this.isActive("/finance/purchase-orders/pending_approval"),type:Mf.pending_approval,value:0},{path:"/finance/purchase-orders/approved",label:"Approved",icon:Ef.FileCheck,isActive:this.isActive("/finance/purchase-orders/approved"),type:Lf.approved,value:0},{path:"/finance/purchase-orders/all",label:"All Purchase Orders",icon:Ef.FileQuestion,isActive:this.isActive("/finance/purchase-orders/all"),value:0}].map((function(t){return e&&t.type&&e.data[t.type]&&(t.value=Kf(e.data[t.type].amount)),t}))}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"renderTags",value:function(e){return nm(e,[]).map((function(e){return Object(a.jsx)(U6,{tag:{name:Wf[e],color:rm(e)}},e)}))}},{key:"renderPurchaseOrdersRows",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsxs)(VL,{to:"/finance/purchase-orders/details/".concat(e.id),children:[Object(a.jsxs)(FL,{children:["PO #",e.id]}),Object(a.jsxs)(FL,{children:[Object(a.jsx)("span",{children:e.recipient_name}),t.renderTags(e)]}),Object(a.jsx)(FL,{children:Object(a.jsx)(j4,{job:e.job,locationOnly:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)($_.a,{format:Pj,children:e.date})}),Object(a.jsx)(FL,{children:Kf(e.total_amount)})]},"po-tr-".concat(e.id))})):null}},{key:"renderNoPurchaseOrders",value:function(){return Object(a.jsx)(UL,{children:Object(a.jsx)("div",{className:"no-items",children:"No Purchase Orders..."})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.info.loading,r=t.purchaseOrders.loading,o=t.purchaseOrders,i=this.getRows(),c=i.length>0,s=this.state.searchLoading;return Object(a.jsx)(Cw.Consumer,{children:function(t){var l=t.has(Dw.PURCHASE_ORDERS_VIEW);return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(b4,{disableActions:!t.has(Dw.PURCHASE_ORDERS_MANAGE),onAddAction:e.createPurchaseOrder,onSearch:e.onSearch,loading:n,searchLoading:s,searchPlaceholder:"Search purchase orders...",hint:"Create new purchase order",otherActions:[],children:l&&e.getMenuItems().map((function(e,t){return Object(a.jsx)(ym,{item:e},"".concat(t,"-").concat(e.type))}))}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(r||s)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(uC,{className:"h-100",children:Object(a.jsxs)(hC,{children:[Object(a.jsx)("div",{className:"pb-3",children:Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter})}),l&&Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{style:{width:"135px"},children:"Purchase Order"}),Object(a.jsx)(PL,{}),Object(a.jsx)(PL,{children:"Job No."}),Object(a.jsx)(PL,{children:"Date"}),Object(a.jsx)(PL,{children:"Total Amount"})]})}),Object(a.jsx)(LL,{children:c?e.renderPurchaseOrdersRows(i):e.renderNoPurchaseOrders()})]}),o.data&&o.data.pagination&&c&&Object(a.jsx)(AS,{pagination:o.data.pagination,onChange:e.handlePagination})]})})]})]})}})}}]),n}(p.PureComponent),B6=Object(LO.compose)(Object(b.b)((function(e){return{info:e.purchaseOrdersInfo,purchaseOrders:e.purchaseOrders,locations:e.user.locations}})),v.g,Mm({jobs:{fetch:ly.searchJobs,initialData:null}}))(V6),J6=Object(Gj.a)({form:"PurchaseOrderDetailsForm",validate:o6,enableReinitialize:!0})(f6);function z6(){var e=Object(f.a)(["\n  position: relative;\n  border-top: 1px solid ",";\n"]);return z6=function(){return e},e}var q6=x.default.div(z6(),y.gray2),W6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showApproveModal:!1,showAdjustModal:!1,disableApproveButton:!1,isEditDraftLockedPO:!1},e.showAdjustModal=function(){e.setState({showAdjustModal:!0})},e.hideAdjustModal=function(){e.setState({showAdjustModal:!1})},e.sendAdjustRequest=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:pX.adjustPurchaseOrder(n.id,n.address,n.name).then(Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPurchaseOrder();case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.notesCounter=function(e){return e.poNotes.data?e.poNotes.data.data.length:0},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.create=function(t){return pX.create(t).then((function(t){e.props.history.push("/finance/purchase-orders/details/".concat(t.data.id))})).catch((function(e){return e.status_code===Dg?Mg(e):Promise.reject()}))},e.update=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.prev=2,t.next=5,e.props.dispatch(FX(+e.props.match.params.id,n));case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),t.t0.status_code!==Dg){t.next=14;break}return t.abrupt("return",Mg(t.t0));case 14:return t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createOrUpdate=function(t){return e.isNew?e.create(t):e.update(t)},e.createItem=function(){return e.props.dispatch(VX())},e.updateItem=function(t,n){return e.props.dispatch(BX(t,n,!0))},e.submitItem=function(t){return e.props.dispatch(zX(t))},e.removeItem=function(t){return e.props.dispatch(qX(t))},e.approvePurchaseOrder=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match,!e.allowApprove()){t.next=23;break}return t.next=4,r(Sw("Confirm","Are you sure you want to approve Purchase Order #".concat(a.params.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=21;break}return e.setState({disableApproveButton:!0}),t.prev=7,t.next=10,pX.approvePurchaseOrder(a.params.id);case 10:return Qm(Vm.Success,"Purchase order approved successfully"),t.next=13,e.fetchPurchaseOrder();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Qm(Vm.Danger,"Purchase order can't be approved");case 18:return t.prev=18,e.setState({disableApproveButton:!1}),t.finish(18);case 21:t.next=24;break;case 23:e.showApproveModal=!0;case 24:case"end":return t.stop()}}),t,null,[[7,15,18,21]])}))),e.duplicatePO=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=10;break}return t.next=4,a(Sw("Confirm","Duplicate purchase order #".concat(r.id,"?")));case 4:if(!t.sent){t.next=10;break}return t.next=8,pX.create(r);case 8:o=t.sent,e.props.history.push("/finance/purchase-orders/details/".concat(o.data.id));case 10:case"end":return t.stop()}}),t)}))),e.deletePO=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=9;break}return t.next=4,a(Sw("Confirm","Delete purchase order #".concat(r.id,"?")));case 4:if(!t.sent){t.next=9;break}return t.next=8,pX.remove(r.id);case 8:e.props.history.replace("/finance/invoices/draft");case 9:e.props.history.replace("/finance/purchase-orders/draft");case 10:case"end":return t.stop()}}),t)}))),e.print=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.financeEntity.data)){t.next=6;break}return t.next=4,pX.forPrint(n.id);case 4:r=t.sent,JV()({printable:window.URL.createObjectURL(new Blob([r],{type:"application/pdf"})),type:"pdf"});case 6:case"end":return t.stop()}}),t)}))),e.onTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,pX.addTag(n.id,+r.params.id);case 3:return t.next=5,e.fetchCurrentTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchCurrentTags=function(){var t=e.props,n=t.tags,r=t.match;return n.fetch(+r.params.id)},e.onRemoveTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,pX.removeTag(n.id,+r.params.id);case 3:return t.next=5,e.fetchCurrentTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.adjustPurchase=function(){e.showAdjustModal()},e.isEditDraftLockedPO=function(){var t=e.props.financeEntity;return!(!e.isDraft()||!t.data.locked)},e.onClickEditDraftLockedPO=function(){e.setState({isEditDraftLockedPO:!0})},e.getDropdownMenuItems=function(t){var n=e.props.financeEntity.data;return[{name:"Edit Purchase Order",onClick:e.onClickEditDraftLockedPO,disabled:!e.isEditDraftLockedPO()},{name:"Print",onClick:e.print},{name:"Duplicate",onClick:e.duplicatePO,disabled:!t.has(Dw.PURCHASE_ORDERS_MANAGE)||!n},{type:"divider"},{name:"Adjust Purchase Order To...",onClick:e.adjustPurchase,disabled:!e.editablePurchase()},{type:"divider"},{name:"Delete",onClick:e.deletePO,disabled:!t.has(Dw.PURCHASE_ORDERS_MANAGE)}]},e.isNoteEditorVisible=function(){return"true"===qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.financeEntity.data,o=r.match,i=r.poNotes,!a||!a.id){t.next=6;break}return t.next=4,pX.addNoteToPurchaseOrder(n.id,a.id);case 4:i.fetch(o.params.id),e.props.history.replace("/finance/purchase-orders/details/".concat(o.params.id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.redirectToNotes=function(){var t=e.props,n=t.history,r=t.match;n.push("/finance/purchase-orders/details/".concat(r.params.id,"?note=true"))},e.getSortedNotes=function(){var t=e.props.poNotes;return t.data?t.data.data.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})):[]},e.deleteNote=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.poNotes,t.next=3,pX.removeNoteFromPurchaseOrder(n,a.params.id);case 3:o.fetch(a.params.id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.allowApprove=function(){var t=e.props,n=t.user,r=t.financeEntity;return+n.me.purchase_order_approve_limit>=+(r.data.total_amount||0)&&!!r.data.location&&n.locations.map((function(e){return+e.id})).includes(+r.data.location.id)},e.sendApproveRequest=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,pX.sendApproveRequest(r.params.id,[n.user.id]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadNotes=function(){var t=e.props,n=t.match;t.poNotes.fetch(n.params.id)},e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e.isDraft=function(){var t=e.props.financeEntity.data;return"draft"===(t.latest_status&&t.latest_status.status)},e.isApproved=function(){var t=e.props.financeEntity.data;return"approved"===(t.latest_status&&t.latest_status.status)},e.editablePurchase=function(){var t=e.props.user,n=t.me&&t.me.role;return!(!e.isDraft()||"administrator"!==n&&"Admin"!==n&&"branch_franchise_manager"!==n&&"cco"!==n&&"cso_am"!==n)||!(!e.isDraft()||"administrator"!==n&&"Admin"!==n)},e.updateItems=function(t){var n=e.props.match.params.id,r=[];if(t.length>0&&t.map((function(e,t){r.push({id:e.id,position:t})})),r.length>0)try{pX.purchaseOrderItemsPositionUpdate(+n,r)}catch(a){Qm(Vm.Danger,"Server Error")}return e.props.dispatch(JX(t))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.isNew||(this.fetchPurchaseOrder(),this.fetchCurrentTags()),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id===e.match.params.id||this.isNew||this.fetchPurchaseOrder(),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:EX})}},{key:"fetchPurchaseOrder",value:function(){var e,t=this.props,n=t.dispatch,r=t.approvers,a=t.match;return this.loadNotes(),r.fetch(a.params.id),n((e=a.params.id,function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:CX,payload:{id:e}}),t.prev=1,!e){t.next=8;break}return t.next=5,pX.findById(e);case 5:r=t.sent,t.next=9;break;case 8:r={data:Object(c.a)({},PX)};case 9:return n({type:NX,payload:r.data}),t.abrupt("return",r.data);case 13:throw t.prev=13,t.t0=t.catch(1),n({type:AX,payload:t.t0}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()))}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){return[{path:"/finance/purchase-orders/draft",icon:Ef.FileEdit,isActive:this.isActive("/finance/purchase-orders/draft"),hint:"Drafts Purchase Orders"},{path:"/finance/purchase-orders/pending_approval",icon:Ef.FileCheck,isActive:this.isActive("/finance/purchase-orders/pending_approval"),hint:"Pending Approval Purchase Orders"},{path:"/finance/purchase-orders/approved",icon:Ef.FileCheck,isActive:this.isActive("/finance/purchase-orders/approved"),hint:"Approved Purchase Orders"},{path:"/finance/purchase-orders/all",icon:Ef.File,isActive:this.isActive("/finance/purchase-orders/all"),hint:"All Purchase Orders"}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.financeEntity,r=t.poNotes,o=t.user,i=t.approvers,c=t.tags,s=this.state,l=s.showApproveModal,u=s.disableApproveButton,d=s.showAdjustModal;if((!n.ready||n.loading)&&!this.isNew&&!this.alreadyLoaded)return Object(a.jsx)(av,{size:40,color:y.white});var p=n.data,h=this.isDraft(),b=!!p.items&&p.items.length>0,f=p.statuses||[],m=!p.total_amount||!!p.total_amount&&p.total_amount<0,j=u||!b||m;return Object(a.jsx)(Cw.Consumer,{children:function(t){var s=e.getDropdownMenuItems(t),u=KX.isEditable(Dw.PURCHASE_ORDERS_MANAGE,Dw.PURCHASE_ORDERS_MANAGE_LOCKED,p,t,e.state.isEditDraftLockedPO);return Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(k6,{isOpen:l,approvers:i.data.data,onSubmit:e.sendApproveRequest,onClose:function(){return e.showApproveModal=!1}}),e.editablePurchase()&&d&&Object(a.jsx)(C6,{isOpen:d,onSubmit:e.sendAdjustRequest,onClose:e.hideAdjustModal,title:"Edit Purchase Order To",id:p.id,contacts:p.recipient_contact,initialValues:{name:p.recipient_name,address:p.recipient_address}}),Object(a.jsx)(w6,{sidebarMenuItems:e.getMenuItems(),menu:e.isNew?null:Object(a.jsx)(n6,{type:Z8.purchase_order,otherActions:s,onTagClick:e.onTagClick,viewTagsPermission:t.has(Dw.TAGS_VIEW),onNoteAdd:e.redirectToNotes,addNotePermission:t.has(Dw.PURCHASE_ORDERS_MANAGE),channelName:"online-purchase-order-".concat(p.id)}),header:Object(a.jsx)(Y7,{id:p.id,tags:c.data.data,isNew:e.isNew,statusList:nm(p),loadingTags:c.loading,onTagRemove:e.onRemoveTagClick,entityName:"purchase order"}),upperToolsContainer:e.isNoteEditorVisible()?Object(a.jsx)(hC,{style:{borderBottom:"1px solid ".concat(y.gray2)},children:Object(a.jsx)(dA,{afterSave:e.saveNoteDraft,disableTemplatesControl:!0,color:y.orange0,onCancel:e.revertBackToNotes})}):null,content:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J6,{onSubmit:e.createOrUpdate,onUpdate:e.update,isNew:e.isNew,disabled:!u,initialValues:e.getInitializeFormValues()}),!e.isNew&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(t6,{entityType:W8.purchaseOrder,entity:p,disabled:!u,onCreate:e.createItem,onChange:e.updateItem,onSubmit:e.submitItem,onRemove:e.removeItem,handlePositionUpdatedData:e.updateItems}),t.has(Dw.PURCHASE_ORDERS_MANAGE)&&h&&Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)(Cg,{type:"button",className:"btn",disabled:j,onClick:e.approvePurchaseOrder,children:e.allowApprove()?"Approve Purchase Order":"Request Approval"})})]})]}),footer:e.isNew?null:Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[(e.getSortedNotes().length>0||f.length>0)&&Object(a.jsx)(q6,{children:Object(a.jsx)(ST,{notes:e.getSortedNotes(),onNoteDelete:e.deleteNote,loading:r.loading,highlightedItemId:e.getHighlightedItem().itemId,user:o,statuses:f,afterEditSuccess:e.loadNotes})}),Object(a.jsx)(wT,{status:Object.assign({status:"created"},n.data),itemTypeName:"Purchase order"})]}),references:t.has(Dw.JOBS_VIEW)&&!e.isNew?Object(a.jsx)(E6,{entity:p,loading:n.loading}):Object(a.jsx)(a.Fragment,{})})]})}})}},{key:"showApproveModal",set:function(e){this.setState({showApproveModal:e})}},{key:"alreadyLoaded",get:function(){return this.props.financeEntity.data.id&&+this.props.match.params.id===this.props.financeEntity.data.id}}]),n}(A6),H6=Object(LO.compose)(v.g,Mm({poNotes:{fetch:pX.getPurchaseOrderNotes},approvers:{fetch:pX.getApproverList,initialData:{data:[]}},tags:{fetch:pX.getPurchaseOrderTags,initialData:{data:[]}}}),Object(b.b)((function(e){return{financeEntity:e.purchaseOrder,user:e.user}})))(W6);function G6(){var e=Object(f.a)(["\n  margin-left: 8px;\n  font-size: ",";\n  vertical-align: top;\n"]);return G6=function(){return e},e}var Y6=[],Q6=Object(x.default)(NC)(G6(),Vf.normal),K6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={type:Lf.draft,search:"",searchLoading:!1,filters:{locations:Y6,recipient_contact_id:null,from_date:"",to_date:"",jobs:Y6,virtual_status:""}},e.loadCreditNotes=function(t){(0,e.props.dispatch)(mZ(t,{per_page:XO.Standard,sortby:"desc"})).then((function(){return e.setState({type:t})}))},e.onSearch=function(t){e.setState({search:t}),setTimeout((function(){e.loadOrCancelCN()}))},e.loadOrCancelCN=function(t){var n=e.props.dispatch,r=e.props.match.params.type,a=e.state.search,o=fK(r);if(a){var i={id:a,virtual_status:o.virtualStatus,status:o.status,per_page:XO.Standard};e.debouncedSearch(i)}else{e.debouncedSearch.cancel();var c={virtual_status:"all"===r?void 0:o.virtualStatus?o.virtualStatus:o.status,per_page:XO.Standard,page:t||1,sortby:"desc"};n(jZ(c))}},e.searcher=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({searchLoading:!0}),t.prev=1,t.next=4,e.props.dispatch(vZ(n));case 4:return t.prev=4,e.setState({searchLoading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Object(m.debounce)(e.searcher,1e3),e.getRows=function(){var t=e.props.creditNotes.data;return t&&t.data||[]},e.createCreditNotes=function(){e.props.history.push("/finance/credit-notes/create")},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=_v()(e.searchJobsById,1e3),e.loadContacts=function(e){var t={term:e};return Jv.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadContacts=_v()(e.loadContacts,1e3),e.getFilterCreditNotes=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.filters,n.type,a=e.props.dispatch,t.next=4,a(jZ(Object(c.a)({page:1,per_page:20},r)));case 4:case"end":return t.stop()}}),t)}))),e.getFilters=function(){var t=e.props,n=t.match.params.type,r=t.locations,a=[{value:Lf.draft,label:Lf.draft},{value:Mf.pending_approval,label:Wf[Mf.pending_approval]},{value:Lf.approved,label:Lf.approved}];return[{label:"Location",filterKey:"location",options:r,placeholder:"Type to search",getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}},{label:"To",filterKey:"to",loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return Jv.getContactName(e)},placeholder:"Type to search"},{label:"From",type:"date",filterKey:"dateFrom"},{label:"To",type:"date",filterKey:"dateTo"},{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return ly.getJobName(e)},placeholder:"Type to search"},"all"===n&&{label:"Status",filterKey:"status",options:a,getOptionValue:function(e){return null===e||void 0===e?void 0:e.value},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.label},placeholder:"Select..."}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters,a=e.props.match.params.type;switch(t){case"status":r.virtual_status=null===n||void 0===n?void 0:n.value;break;case"location":r.locations=[null===n||void 0===n?void 0:n.id]||!1;break;case"to":r.recipient_contact_id=null===n||void 0===n?void 0:n.id;break;case"dateFrom":if(""!==n.currentTarget.value){var o=qf.a.utc(n.currentTarget.value).format(Mj);r.from_date=o}else r.from_date="";break;case"dateTo":if(""!==n.currentTarget.value){var i=qf.a.utc(n.currentTarget.value).format(Mj);r.to_date=i}else r.to_date="";break;case"jobNumber":r.jobs=[null===n||void 0===n?void 0:n.id]}r.virtual_status="all"===a?r.virtual_status:a,e.setState({filters:Object(c.a)({},r)},(function(){e.getFilterCreditNotes()}))},e.resetFilter=function(){e.setState({filters:{locations:Y6,recipient_contact_id:null,from_date:"",to_date:"",jobs:Y6,virtual_status:""}})},e.handlePagination=function(t){e.loadOrCancelCN(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.match.params.type;t(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:OZ}),e.prev=1,e.next=4,dZ.getInfo();case 4:n=e.sent,t({type:gZ,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),this.loadOrCancelCN()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.type;e.match.params.type!==t&&(this.setState({type:t}),this.resetFilter(),this.loadOrCancelCN())}},{key:"getMenuItems",value:function(){var e=this.props.info.data;return[{path:"/finance/credit-notes/draft",label:"Drafts",icon:Ef.FileEdit,isActive:this.isActive("/finance/credit-notes/draft"),type:Lf.draft,value:0},{path:"/finance/credit-notes/pending_approval",label:"Pending Approval",icon:Ef.FileEdit,isActive:this.isActive("/finance/credit-notes/pending_approval"),type:Mf.pending_approval,value:0},{path:"/finance/credit-notes/approved",label:"Approved",icon:Ef.FileCash,isActive:this.isActive("/finance/credit-notes/approved"),type:Lf.approved,value:0},{path:"/finance/credit-notes/all",label:"All Credit Notes",icon:Ef.FileQuestion,isActive:this.isActive("/finance/credit-notes/all"),value:0}].map((function(t){return e&&t.type&&e.data[t.type]&&(t.value=Kf(e.data[t.type].amount)),t}))}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"renderTags",value:function(e){return nm(e,[]).map((function(e){return Object(a.jsx)(Q6,{tag:{name:Wf[e],color:rm(e)}},e)}))}},{key:"renderCreditNotesRows",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsxs)(VL,{to:"/finance/credit-notes/details/".concat(e.id),children:[Object(a.jsxs)(FL,{children:["CN #",e.id]}),Object(a.jsxs)(FL,{children:[Object(a.jsx)("span",{children:e.recipient_name}),t.renderTags(e)]}),Object(a.jsx)(FL,{children:Object(a.jsx)(j4,{job:e.job,locationOnly:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)($_.a,{format:Pj,children:e.date})}),Object(a.jsx)(FL,{children:Kf(e.total_amount)})]},"cn-tr-".concat(e.id))})):null}},{key:"renderNoCreditNotes",value:function(){return Object(a.jsx)(UL,{children:Object(a.jsx)("div",{className:"no-items",children:"No Credit Notes..."})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.creditNotes.loading,r=t.creditNotes,o=t.info.loading,i=this.getRows(),c=i.length>0,s=this.state.searchLoading;return Object(a.jsx)(Cw.Consumer,{children:function(t){var l=t.has(Dw.PURCHASE_ORDERS_VIEW);return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(b4,{disableActions:!t.has(Dw.PURCHASE_ORDERS_MANAGE),onAddAction:e.createCreditNotes,onSearch:e.onSearch,searchLoading:s,loading:o,searchPlaceholder:"Search credit notes...",hint:"Create new credit note",otherActions:[],children:l&&e.getMenuItems().map((function(e,t){return Object(a.jsx)(ym,{item:e},"".concat(t,"-").concat(e.type))}))}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(n||s)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(uC,{className:"h-100",children:Object(a.jsxs)(hC,{children:[Object(a.jsx)("div",{className:"pb-3",children:Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter})}),l&&Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Credit Note"}),Object(a.jsx)(PL,{}),Object(a.jsx)(PL,{children:"Job No."}),Object(a.jsx)(PL,{children:"Date"}),Object(a.jsx)(PL,{children:"Total Amount"})]})}),Object(a.jsx)(LL,{children:c?e.renderCreditNotesRows(i):e.renderNoCreditNotes()})]}),r.data&&r.data.pagination&&Object(a.jsx)(AS,{pagination:r.data.pagination,onChange:e.handlePagination})]})})]})]})}})}}]),n}(p.PureComponent),Z6=Object(LO.compose)(Object(b.b)((function(e){return{info:e.creditNotesInfo,creditNotes:e.creditNotes,locations:e.user.locations}})),v.g,Mm({jobs:{fetch:ly.searchJobs,initialData:null}}))(K6),X6=Object(Gj.a)({form:"CreditNotesDetailsForm",validate:o6,enableReinitialize:!0})(f6),$6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1},e.showModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.onPay=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.creditNote,o=r.loadCreditNote,t.next=3,dZ.applyCreditNoteToInvoices(a.id,n.filter((function(e){return e.amount>0})).map((function(e){return{invoice_id:e.id,amount:e.amount}})));case 3:o();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.creditNote,t=this.state.showModal;return Object(a.jsxs)(a.Fragment,{children:[e.total_amount>0&&t&&Object(a.jsx)(I6,{isOpen:t,onClose:this.closeModal,financeEntity:e,onPay:this.onPay,mode:g6.FromCreditNote}),Object(a.jsx)(PT,{caption:"Credit Note",collapsable:!1,children:Object(a.jsx)(PS,{noDecoration:!0,onClick:this.showModal,children:"Apply to Invoice"})})]})}}]),n}(p.PureComponent);function e9(){var e=Object(f.a)(["\n  position: relative;\n  border-top: 1px solid ",";\n"]);return e9=function(){return e},e}var t9=x.default.div(e9(),y.gray2),n9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showApproveModal:!1,showAdjustModal:!1,disableApproveButton:!1,isEditDraftLockedCN:!1},e.showApproveModal=function(){e.setState({showApproveModal:!0})},e.hideApproveModal=function(){e.setState({showApproveModal:!1})},e.sendAdjustRequest=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:dZ.adjustCreditNote(n.id,n.address,n.name).then(Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCreditNote();case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showAdjustModal=function(){e.setState({showAdjustModal:!0})},e.hideAdjustModal=function(){e.setState({showAdjustModal:!1})},e.notesCounter=function(e){return e.creditNoteNotes.data?e.creditNoteNotes.data.data.length:0},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.fetchCreditNote=function(){var t=e.props,n=t.dispatch,r=t.approvers,a=t.tags,o=t.match.params.id;return e.loadNotes(),r.fetch(o),a.fetch(o),n(MZ(e.props.match.params.id))},e.create=function(t){return dZ.create(t).then((function(t){e.props.history.push("/finance/credit-notes/details/".concat(t.data.id))})).catch((function(e){return e.status_code===Dg?Mg(e):Promise.reject()}))},e.update=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.prev=2,t.next=5,e.props.dispatch(PZ(+e.props.match.params.id,n));case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),t.t0.status_code!==Dg){t.next=14;break}return t.abrupt("return",Mg(t.t0));case 14:return t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createOrUpdate=function(t){return e.isNew?e.create(t):e.update(t)},e.createItem=function(){return e.props.dispatch(FZ())},e.updateItem=function(t,n){return e.props.dispatch(UZ(t,n,!0))},e.submitItem=function(t){return e.props.dispatch(BZ(t))},e.removeItem=function(t){return e.props.dispatch(JZ(t))},e.duplicateCN=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=10;break}return t.next=4,a(Sw("Confirm","Duplicate credit note #".concat(r.id,"?")));case 4:if(!t.sent){t.next=10;break}return t.next=8,dZ.create(r);case 8:o=t.sent,e.props.history.push("/finance/credit-notes/details/".concat(o.data.id));case 10:case"end":return t.stop()}}),t)}))),e.deleteCN=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=9;break}return t.next=4,a(Sw("Confirm","Delete credit note #".concat(r.id,"?")));case 4:if(!t.sent){t.next=9;break}return t.next=8,dZ.remove(r.id);case 8:e.props.history.replace("/finance/credit-notes/draft");case 9:case"end":return t.stop()}}),t)}))),e.print=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.financeEntity.data)){t.next=6;break}return t.next=4,dZ.forPrint(n.id);case 4:r=t.sent,JV()({printable:window.URL.createObjectURL(new Blob([r],{type:"application/pdf"})),type:"pdf"});case 6:case"end":return t.stop()}}),t)}))),e.onTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,dZ.addTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTagClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,dZ.removeTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isEditDraftLockedCN=function(){var t=e.props.financeEntity;return!(!e.isDraft()||!t.data.locked)},e.onClickEditDraftLockedCN=function(){e.setState({isEditDraftLockedCN:!0})},e.getDropdownMenuItems=function(t){var n=e.props.financeEntity.data;return[{name:"Edit Credit Note",onClick:e.onClickEditDraftLockedCN,disabled:!e.isEditDraftLockedCN()},{name:"Print",onClick:e.print,disabled:!t.has(Dw.CREDIT_NOTES_VIEW)},{name:"Duplicate",onClick:e.duplicateCN,disabled:!t.has(Dw.CREDIT_NOTES_MANAGE)||!n},{type:"divider"},{name:"Adjust Credit Note To...",onClick:e.adjustCreditNote,disabled:!e.editableCreditNote()},{type:"divider"},{name:"Delete",onClick:e.deleteCN,disabled:!t.has(Dw.CREDIT_NOTES_MANAGE)}]},e.isNoteEditorVisible=function(){return"true"===qm.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.redirectToNotes=function(){var t=e.props,n=t.history,r=t.match;n.push("/finance/credit-notes/details/".concat(r.params.id,"?note=true"))},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.financeEntity.data,o=r.match,i=r.creditNoteNotes,!a||!a.id){t.next=6;break}return t.next=4,dZ.addNoteToCreditNote(n.id,a.id);case 4:i.fetch(o.params.id),e.props.history.replace("/finance/credit-notes/details/".concat(o.params.id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSortedNotes=function(){var t=e.props.creditNoteNotes;return t.data?t.data.data.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})):[]},e.deleteNote=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.creditNoteNotes,t.next=3,dZ.removeNoteFromCreditNote(n,a.params.id);case 3:o.fetch(a.params.id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendApproveRequest=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,dZ.sendApproveRequest(r.params.id,[n.user.id]);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.allowApprove=function(){var t=e.props,n=t.user,r=t.financeEntity;return(+n.me.credit_note_approval_limit||0)>=+(r.data.total_amount||0)&&!!r.data.location&&n.locations.map((function(e){return+e.id})).includes(+r.data.location.id)},e.isDraft=function(){var t=e.props.financeEntity.data;return"draft"===(t.latest_status&&t.latest_status.status)},e.isApproved=function(){var t=e.props.financeEntity.data;return"approved"===(t.latest_status&&t.latest_status.status)},e.adjustCreditNote=function(){e.showAdjustModal()},e.editableCreditNote=function(){var t=e.props.user,n=t.me&&t.me.role;return!(!e.isDraft()||"administrator"!==n&&"Admin"!==n&&"branch_franchise_manager"!==n&&"cco"!==n&&"cso_am"!==n)||!(!e.isDraft()||"administrator"!==n&&"Admin"!==n)},e.approveCreditNote=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match,!e.allowApprove()){t.next=23;break}return t.next=4,r(Sw("Confirm","Are you sure you want to approve Credit Note #".concat(a.params.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=21;break}return e.setState({disableApproveButton:!0}),t.prev=7,t.next=10,dZ.approveCreditNote(a.params.id);case 10:return Qm(Vm.Success,"Credit note approved successfully"),t.next=13,e.fetchCreditNote();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Qm(Vm.Danger,"Credit note can't be approved");case 18:return t.prev=18,e.setState({disableApproveButton:!1}),t.finish(18);case 21:t.next=24;break;case 23:e.showApproveModal();case 24:case"end":return t.stop()}}),t,null,[[7,15,18,21]])}))),e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e.loadNotes=function(){var t=e.props,n=t.match;t.creditNoteNotes.fetch(n.params.id)},e.renderApplyToInvoice=function(t){var n=e.props.financeEntity;return n.data.latest_status.status===Lf.approved&&!n.data.payment_id&&t.has(Dw.CREDIT_NOTES_MANAGE)?Object(a.jsx)($6,{creditNote:n.data,loadCreditNote:e.fetchCreditNote}):void 0},e.updateItems=function(t){var n=e.props.match.params.id,r=[];if(t.length>0&&t.map((function(e,t){r.push({id:e.id,position:t})})),r.length>0)try{dZ.creditNoteItemsPositionUpdate(+n,r)}catch(a){Qm(Vm.Danger,"Server Error")}return e.props.dispatch(VZ(t))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.isNew||this.fetchCreditNote(),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id===e.match.params.id||this.isNew||this.fetchCreditNote(),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:SZ})}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){return[{path:"/finance/credit-notes/draft",icon:Ef.FileEdit,isActive:this.isActive("/finance/credit-notes/draft"),hint:"Draft Credit Notes"},{path:"/finance/credit-notes/pending_approval",icon:Ef.FileEdit,isActive:this.isActive("/finance/credit-notes/pending_approval"),hint:"Pending Approval Credit Notes"},{path:"/finance/credit-notes/approved",icon:Ef.File,isActive:this.isActive("/finance/credit-notes/approved"),hint:"Approved Credit Notes"}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.financeEntity,r=t.user,o=t.creditNoteNotes,i=t.tags,c=t.approvers,s=this.state,l=s.showApproveModal,u=s.disableApproveButton,d=s.showAdjustModal;if((!n.ready||n.loading)&&!this.isNew&&!this.alreadyLoaded)return Object(a.jsx)(av,{size:40,color:y.white});var p=n.data,h=p.statuses||[],b=this.isDraft(),f=!!p.items&&p.items.length>0,m=!p.total_amount||!!p.total_amount&&p.total_amount<0,j=u||!f||m;return Object(a.jsx)(Cw.Consumer,{children:function(t){var s=e.getDropdownMenuItems(t),u=KX.isEditable(Dw.CREDIT_NOTES_MANAGE,Dw.CREDIT_NOTES_MANAGE_LOCKED,p,t,e.state.isEditDraftLockedCN);return Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(k6,{isOpen:l,approvers:c.data.data,onSubmit:e.sendApproveRequest,onClose:e.hideApproveModal}),e.editableCreditNote()&&d&&Object(a.jsx)(C6,{isOpen:d,onSubmit:e.sendAdjustRequest,onClose:e.hideAdjustModal,title:"Edit Credit Note To",id:p.id,contacts:p.recipient_contact,initialValues:{name:p.recipient_name,address:p.recipient_address}}),Object(a.jsx)(w6,{sidebarMenuItems:e.getMenuItems(),menu:e.isNew?null:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(n6,{type:Z8.credit_note,otherActions:s,onTagClick:e.onTagClick,viewTagsPermission:t.has(Dw.TAGS_VIEW),onNoteAdd:e.redirectToNotes,addNotePermission:t.has(Dw.CREDIT_NOTES_MANAGE),channelName:"online-credit-note-".concat(p.id)})}),header:Object(a.jsx)(Y7,{id:p.id,tags:i.data.data,isNew:e.isNew,statusList:nm(p),loadingTags:i.loading,onTagRemove:e.onRemoveTagClick,entityName:"credit note"}),upperToolsContainer:e.isNoteEditorVisible()?Object(a.jsx)(hC,{style:{borderBottom:"1px solid ".concat(y.gray2)},children:Object(a.jsx)(dA,{afterSave:e.saveNoteDraft,disableTemplatesControl:!0,color:y.orange0,onCancel:e.revertBackToNotes})}):null,content:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(X6,{onSubmit:e.createOrUpdate,onUpdate:e.update,isNew:e.isNew,disabled:!u,initialValues:e.getInitializeFormValues()}),!e.isNew&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(t6,{entityType:W8.creditNote,entity:p,disabled:!u,onCreate:e.createItem,onChange:e.updateItem,onSubmit:e.submitItem,onRemove:e.removeItem,handlePositionUpdatedData:e.updateItems}),t.has(Dw.CREDIT_NOTES_MANAGE)&&b&&Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)(Cg,{type:"button",className:"btn",disabled:j,onClick:e.approveCreditNote,children:e.allowApprove()?"Approve Credit Note":"Request Approval"})})]})]}),footer:e.isNew?null:Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[(e.getSortedNotes().length>0||h.length>0)&&Object(a.jsx)(t9,{children:Object(a.jsx)(ST,{notes:e.getSortedNotes(),onNoteDelete:e.deleteNote,loading:o.loading,highlightedItemId:e.getHighlightedItem().itemId,user:r,statuses:h,afterEditSuccess:e.loadNotes})}),Object(a.jsx)(wT,{status:Object.assign({status:"created"},n.data),itemTypeName:"Credit note"})]}),references:t.has(Dw.JOBS_VIEW)&&!e.isNew?Object(a.jsx)(E6,{entity:p,loading:n.loading,additionalItems:e.renderApplyToInvoice(t)}):Object(a.jsx)(a.Fragment,{})})]})}})}},{key:"alreadyLoaded",get:function(){return this.props.financeEntity.data.id&&+this.props.match.params.id===this.props.financeEntity.data.id}}]),n}(A6),r9=Object(LO.compose)(v.g,Mm({creditNoteNotes:{fetch:dZ.getCreditNoteNotes},approvers:{fetch:dZ.getApproverList,initialData:{data:[]}},tags:{fetch:dZ.getCreditNoteTags,initialData:{data:[]}}}),Object(b.b)((function(e){return{financeEntity:e.creditNote,user:e.user}})))(n9),a9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(a.jsx)(yv.a,{name:"term",label:"Lookup Invoices",type:"textarea",placeholder:"Enter or paste all invoice numbers here...",component:SJ,className:"form__dark"}),Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",children:"Lookup"})]})}}]),n}(p.PureComponent),o9=Object(Gj.a)({form:"LookupInvoiceForm",enableReinitialize:!0})(a9);function i9(){var e=Object(f.a)(["\n  background: ",";\n  border-radius: 4px;\n  border: 1px solid ",";\n  max-height: 33.5;\n  padding: 5px 10px;\n\n  &:focus {\n    box-shadow: 0 0 1px ",";\n    border-color: ",";\n    outline: none;\n  }\n\n  &:disabled {\n    background: ",";\n  }\n\n  &::placeholder {\n    font-weight: lighter;\n    color: ",";\n  }\n"]);return i9=function(){return e},e}var c9=x.default.input(i9(),y.white,y.gray2,y.gray4,y.blue2,y.gray1,y.gray4),s9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={focused:!1,value:""},e.onFocus=function(){e.setState({focused:!0})},e.onBlur=function(t){e.setState({focused:!1}),e.props.onBlur(t)},e.onChange=function(t){if(e.state.focused){var n=t.target.value;/^\$*\s*[0-9\,]*\.*[0-9]{0,2}$/.test(n)&&e.setState({value:n})}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({value:this.props.value})}},{key:"render",value:function(){return Object(a.jsx)(c9,{type:"text",value:this.state.focused?this.state.value:this.props.value,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur})}}]),n}(p.PureComponent);function l9(){var e=Object(f.a)(["\n  @media print {\n    display: none;\n  }\n"]);return l9=function(){return e},e}var u9=x.default.div(l9());function d9(){var e=Object(f.a)(["\n  line-height: 45px;\n  padding: 0 15px;\n"]);return d9=function(){return e},e}function p9(){var e=Object(f.a)(["\n  line-height: 50px;\n  color: ",";\n  text-align: left;\n  width: 100%;\n"]);return p9=function(){return e},e}function h9(){var e=Object(f.a)(["\n  display: flex;\n  flex-basis: 100%;\n  flex-direction: row-reverse;\n  padding: 15px 0 15px 15px;\n"]);return h9=function(){return e},e}function b9(){var e=Object(f.a)(["\n  padding: 3px 30px 0;\n  height: 50px;\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return b9=function(){return e},e}function f9(){var e=Object(f.a)(["\n  max-width: 800px;\n  padding: 0 40px;\n\n  .form-group {\n    margin-bottom: 2rem;\n  }\n\n  input {\n    background: ",";\n    border: 1px solid ",";\n\n    &:disabled {\n      background: ",";\n    }\n  }\n"]);return f9=function(){return e},e}function m9(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  td {\n    vertical-align: top;\n    padding-top: 12px;\n    padding-bottom: 10px;\n  }\n"]);return m9=function(){return e},e}function j9(){var e=Object(f.a)(["\n  div {\n    &:first-child {\n      font-weight: ",";\n    }\n  }\n"]);return j9=function(){return e},e}function v9(){var e=Object(f.a)(["\n  div {\n    &:last-child {\n      color: ",";\n    }\n  }\n"]);return v9=function(){return e},e}var O9=x.default.div(v9(),y.gray5),g9=Object(x.default)(O9)(j9(),Bf.bold),x9=Object(x.default)(uF)(m9(),Bf.normal),y9=x.default.form(f9(),y.white,y.gray2,y.gray1),w9=x.default.div(b9(),y.white,y.gray2),_9=BS.ColoredRow,k9=x.default.div(h9()),S9=x.default.div(p9(),y.white),C9=Object(x.default)(u9)(d9());function N9(){var e=Object(f.a)(["\n  display: inline-block;\n  position: relative;\n  line-height: 20px;\n  margin-left: 10px;\n  color: ",";\n  font-size: ",";\n"]);return N9=function(){return e},e}function E9(){var e=Object(f.a)(["\n  top: -5px;\n  border: 5px solid transparent;\n  border-top: 5px solid ",";\n"]);return E9=function(){return e},e}function A9(){var e=Object(f.a)(["\n  top: -10px;\n  border: 5px solid transparent;\n  border-bottom: 5px solid ",";\n"]);return A9=function(){return e},e}function T9(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0;\n  height: 0;\n"]);return T9=function(){return e},e}function I9(){var e=Object(f.a)(["\n  label {\n    font-size: ",";\n    color: ",";\n    text-transform: capitalize;\n    line-height: 1.5;\n  }\n  max-width: 230px;\n  min-height: 80px;\n  min-width: 180px;\n  font-size: ",";\n  line-height: 1;\n  color: ",";\n  margin: 5px 60px 5px 0;\n  padding: 5px 0 20px 0;\n  border-bottom: ",";\n"]);return I9=function(){return e},e}var R9="1px solid ".concat(y.gray2),D9=x.default.div(I9(),Vf.normal,y.gray5,Vf.big,y.black0,(function(e){return e.hasDelimiter?R9:"none"})),M9=x.default.div(T9()),P9=Object(x.default)(M9)(A9(),y.green2),L9=Object(x.default)(M9)(E9(),y.red1),F9=x.default.div(N9(),y.gray4,Vf.smaller),U9=function(e){return Object(a.jsxs)(D9,{hasDelimiter:e.hasDelimiter,children:[Object(a.jsx)("label",Object(c.a)(Object(c.a)({},e.reactTipProps),{},{children:e.label||""})),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:e.color||"inherit"},children:e.value}),!!e.delta&&Object(a.jsxs)(F9,{children:[e.delta>0&&Object(a.jsx)(P9,{}),e.delta<0&&Object(a.jsx)(L9,{}),e.delta," %"]})]})]})},V9=p.memo(U9);function B9(){var e=Object(f.a)(["\n  padding-top: 30px;\n"]);return B9=function(){return e},e}var J9=x.default.div(B9()),z9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={amount:0},e.onChangeAmount=function(t){e.setState({amount:+t.target.value})},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onSubmit(n);case 2:e.setState({amount:0}),e.props.reset();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.glAccounts,r=e.totalSelected,o=e.loading,i=e.submitting,c=e.disabled,s=r-this.state.amount;return Object(a.jsx)(y9,{onSubmit:this.props.handleSubmit(this.onSubmit),children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(yv.a,{name:"paid_at",label:"Date Received",placeholder:"Date",component:Cy,futureEnabled:!0,validate:uv,disabled:c}),Object(a.jsx)(yv.a,{name:"amount",label:"Amount Received",type:"number",component:ZO,validate:uv,disabled:c,currency:!0,onChange:this.onChangeAmount}),Object(a.jsx)(yv.a,{name:"dst_gl_account",label:"Paid into Account",placeholder:"Select account...",component:Kv,options:t,validate:uv,disabled:c,getOptionLabel:KX.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},selectStyles:n.formSelectStyles}),Object(a.jsx)(yv.a,{name:"reference",label:"Remittence Reference",placeholder:"None",component:ZO,disabled:c,validate:uv})]}),Object(a.jsxs)(J9,{className:"col-5 offset-1",children:[(o||i)&&Object(a.jsx)(av,{size:40,color:y.white1}),Object(a.jsx)(V9,{label:"Amount Received",value:Kf(this.state.amount),hasDelimiter:!0}),Object(a.jsx)(V9,{label:"Total Selected",value:Kf(r),hasDelimiter:!0}),Object(a.jsx)(V9,{label:"Difference",value:Kf(s),color:s<0?y.red1:void 0}),Object(a.jsx)("div",{className:"pt-2",children:Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",disabled:!!c||i||Math.abs(s)>Number.MIN_VALUE,children:"Process Payment"})})]})]})})}}]),n}(p.PureComponent);z9.formSelectStyles=Object(c.a)(Object(c.a)({},Wv),{},{control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{borderColor:y.gray2,background:t.isDisabled?y.gray1:y.white,boxShadow:t.isFocused?"0 0 1px ".concat(y.gray4):"none"})}});var q9=Object(Gj.a)({form:"ReceivePaymentsForm"})(z9);function W9(){var e=Object(f.a)(["\n  div {\n    &:first-child {\n      font-weight: ",";\n    }\n  }\n  width: 8%;\n  float: left;\n"]);return W9=function(){return e},e}function H9(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  text-transform: uppercase;\n  margin: 45px 0 15px;\n"]);return H9=function(){return e},e}function G9(){var e=Object(f.a)(["\n  background: ",";\n  .form-group.form__dark {\n    width: 400px;\n    textarea,\n    input {\n      background: ",";\n      border: 1px solid ",";\n    }\n    textarea {\n      min-height: 90px;\n    }\n  }\n  button[type='submit'] {\n    margin-top: 5px;\n  }\n"]);return G9=function(){return e},e}var Y9,Q9=Object(x.default)(BS.ColoredRow)(G9(),y.gray0,y.white,y.gray2),K9=BS.ColoredRow,Z9=x.default.h2(H9(),Vf.normal,Bf.bold),X9=x.default.div(W9(),Bf.bold),$9=/(?:,|`|\n|[|]| )+/,eee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={lookupTerm:void 0},e.getPaymentInvoices=function(t){var n=t.term;e.setState({lookupTerm:n}),e.props.dispatch($$(e.lookupTermRefactorSearch(n)))},e.debouncedSearch=_v()(e.getPaymentInvoices),e.toggleSelection=function(t){e.props.dispatch(K$(t))},e.setPaymentType=function(t,n){e.props.dispatch(Z$(t,n))},e.setAmount=function(t,n){e.props.dispatch(X$(t,+n.target.value.replace(/[^\d\.]/g,"")))},e.invoiceIsSelected=function(t){var n=e.props.receivePayments;return!!n.data.selectedIds&&n.data.selectedIds.includes(t)},e.receivePayment=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.a)(Object(c.a)({},n),{},{location_id:null===(r=e.primaryLocation)||void 0===r?void 0:r.id}),o=e.selectedInvoices.map((function(e){return{invoice_id:+e.id,is_fp:e.payment_type===f$.FP,amount:e.payment_amount||0}})),t.next=4,m$.receivePayment(a,o);case 4:return""===(i=t.sent)&&(e.setState({lookupTerm:""}),e.props.dispatch(e0())),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.lookupTermRefactorSearch=function(e){var t=(null===e||void 0===e?void 0:e.split($9))||[];return(t=t.map((function(e){return e.replace(/[^0-9]/g,"")}))).filter((function(e){return!!e}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.userPrimaryLocationGLAccounts()}},{key:"componentDidUpdate",value:function(e){!e.locations.length&&this.props.locations.length&&this.userPrimaryLocationGLAccounts()}},{key:"userPrimaryLocationGLAccounts",value:function(){var e=this.props,t=e.locations,n=e.dispatch;n(e0());var r=t.find((function(e){return!0===e.primary}));r&&n(i$([r.id]))}},{key:"refreshLookup",value:function(){this.getPaymentInvoices({term:this.state.lookupTerm})}},{key:"renderInvoicesTable",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[this.invoicesData.length>0&&Object(a.jsx)(Z9,{children:"Invoices found"}),Object(a.jsx)(x9,{className:"table",children:Object(a.jsxs)("tbody",{children:[this.renderInvoiceNoRecordFoundRow(),this.invoicesData.length>0&&this.invoicesData.map((function(t){return e.renderInvoiceRow(t)}))]})})]})}},{key:"renderInvoiceNoRecordFoundRow",value:function(){var e=this.searchInvoiceNotFound(),t=e&&(null===e||void 0===e?void 0:e.map((function(e){return Object(a.jsxs)(X9,{children:[Object(a.jsxs)("div",{children:["Inv. ",e]}),Object(a.jsx)(NC,{tag:{name:"Not Found",color:y.gray4}})]})})));return t&&t.length>0?Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:6,children:t})},"rp-row-not-found-1"):Object(a.jsx)(a.Fragment,{})}},{key:"searchInvoiceNotFound",value:function(){var e=this,t=this.lookupTermRefactorSearch(this.state.lookupTerm),n=[];return null===t||void 0===t||t.filter((function(t){""===t||e.invoicesData.find((function(e){return e.id.toString()===t}))||n.push(t)})),n}},{key:"renderInvoiceRow",value:function(e){var t,n,r,o=this,i=this.invoiceIsSelected(+e.id),c=i?"selected-row":"";return Object(a.jsxs)("tr",{className:c,children:[Object(a.jsx)("td",{children:Object(a.jsx)(PJ,{value:i,onChange:function(t){return o.toggleSelection(e)},size:15,inversedColors:!0})}),Object(a.jsx)("td",{children:Object(a.jsxs)(g9,{children:[Object(a.jsxs)("div",{children:["Inv. ",e.id]}),Object(a.jsxs)("div",{children:[null===(t=e.location)||void 0===t?void 0:t.code," | ",e.recipient_name]})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)(O9,{children:[Object(a.jsx)(j4,{job:e.job}),Object(a.jsx)("div",{children:e.job&&"".concat(null===(n=e.job)||void 0===n||null===(r=n.invoice_to_contact)||void 0===r?void 0:r.contact_name)})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)(O9,{children:[Object(a.jsx)("div",{children:Kf(e.balance_due)}),Object(a.jsx)("div",{children:"Balance due"})]})}),Object(a.jsx)("td",{children:!!e.payment_type&&Object(a.jsx)(e8,{defaultValue:{label:f$[e.payment_type],value:e.payment_type},options:this.paymentTypeOptions,onChange:function(t){return o.setPaymentType(e.id,t.value)}})}),Object(a.jsx)("td",{children:Object(a.jsx)(s9,{value:Kf(e.payment_amount||0),onBlur:function(t){return o.setAmount(e.id,t)}})})]},"rp-row-".concat(e.id))}},{key:"render",value:function(){var e=this,t=this.props.receivePayments.loading;return Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsxs)(uC,{className:"h-100",children:[Object(a.jsx)(K9,{children:n.has(Dw.PAYMENTS_CREATE)&&Object(a.jsx)(q9,{onSubmit:e.receivePayment,disabled:0===e.invoicesData.length,totalSelected:e.selectedAmount,glAccounts:e.bankAccounts,initialValues:{paid_at:qf()(),dst_gl_account:e.bankAccounts[0]||void 0}})}),Object(a.jsx)(Q9,{children:Object(a.jsx)(o9,{onSubmit:e.debouncedSearch,initialValues:{term:e.state.lookupTerm}})}),n.has(Dw.PAYMENTS_VIEW)&&Object(a.jsxs)(hC,{children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),!t&&e.renderInvoicesTable()]})]})}})}},{key:"invoicesData",get:function(){return this.props.receivePayments.data&&this.props.receivePayments.data.data||[]}},{key:"selectedAmount",get:function(){return this.selectedInvoices.reduce((function(e,t){return t.payment_amount?e+t.payment_amount:e}),0)}},{key:"selectedInvoices",get:function(){var e=this;return this.props.receivePayments.data.selectedIds?this.invoicesData.filter((function(t){return e.invoiceIsSelected(+t.id)})):[]}},{key:"paymentTypeOptions",get:function(){var e=[];for(var t in f$)f$.hasOwnProperty(t)&&e.push({value:t,label:t});return e}},{key:"bankAccounts",get:function(){return this.props.glAccounts.filter((function(e){return e.is_bank_account}))}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.PureComponent),tee=Object(b.b)((function(e){return{receivePayments:e.receivePayments,glAccounts:e.finance.glAccounts,locations:e.user.locations}}))(eee),nee=p.memo((function(e){var t=e.withBorder,n=e.transformValueById,r=e.value,o=e.options,i={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{flexBasis:"200px",height:"50px",border:t?"1px solid ".concat(y.white):"none",borderTop:"none",borderBottom:"none",paddingTop:"5px"})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{background:"transparent",color:y.white})},control:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",boxShadow:"none",background:"transparent",color:y.white})},placeholder:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:y.gray2})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:y.gray2})}},s=n&&o&&o.find((function(e){return e.id===r}))||r;return Object(a.jsx)(e8,Object(c.a)(Object(c.a)({},e),{},{value:s,customStyles:i}))}));!function(e){e.new="new",e.received="received"}(Y9||(Y9={}));var ree=function(e){var t=function(t){return t===e.activeTabId?void 0:e.onChangePage},n=[{name:"New Transfer",id:Y9.new,onClick:t(Y9.new)},{name:"Received Remittences",id:Y9.received,onClick:t(Y9.received)}];return Object(a.jsx)(w9,{children:Object(a.jsx)(yz,{items:n,selectedTabId:e.activeTabId})})};function aee(){var e=Object(f.a)(["\n  height: ","px;\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return aee=function(){return e},e}var oee=x.default.div(aee(),50,y.purple2),iee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(oee,{className:this.props.className,children:this.props.children})}}]),n}(h.a.PureComponent),cee=function(e,t){var n="";if(e&&e.length>0){var r=function(e,t){return null===t?"":t},a=t||Object.keys(e[0]),o=e.map((function(e){return a.map((function(t){return e[t]?JSON.stringify(e[t],r):""})).join(",")}));o.unshift(a.join(",")),n=o.join("\r\n")}return n};function see(){var e=Object(f.a)(["\n  cursor: pointer;\n  path,\n  line,\n  polyline {\n    stroke: ",";\n    fill: none;\n  }\n  :hover path,\n  :hover line,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return see=function(){return e},e}var lee=x.default.div(see(),y.white,y.white),uee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).exportToCsv=function(t){var n=t.reportName,r=t.data,a=t.columns,o=n||"report",i=cee(r,a);e.download(i,"".concat(o,".csv"),"text/plain")},e.dataToCsv=function(){var t=e.props.transformToTable();t&&(Object(m.isArray)(t)?t.forEach((function(t){return setTimeout((function(){return e.exportToCsv(t)}))})):e.exportToCsv(t))},e.printToPdf=function(){window.print()},e.getDropdownMenuItems=function(){return[{name:"Export to CSV",onClick:e.dataToCsv},{type:"divider"},{name:"Print",onClick:e.printToPdf}]},e}return Object(l.a)(n,[{key:"download",value:function(e,t,n){var r=document.createElement("a"),a=new Blob([e],{type:n});r.href=URL.createObjectURL(a),r.download=t,r.click()}},{key:"render",value:function(){var e=this.getDropdownMenuItems();return Object(a.jsx)(lee,{children:Object(a.jsx)(yw,{items:e,noMargin:!0,iconName:Ef.Download,direction:"right"})})}}]),n}(p.PureComponent);function dee(){var e=Object(f.a)(["\n  padding-top: 30px;\n"]);return dee=function(){return e},e}var pee=x.default.div(dee()),hee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isBankAccount=function(e){return e.is_bank_account},e.onChangeGLAccount=function(t){e.props.values;e.props.onChangeGLAccount(t.id,qf()())},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.sourceAccounts||[];e&&e.length>0&&this.onChangeGLAccount(e[0])}},{key:"render",value:function(){var e=this.props,t=e.locationName,r=e.totalAvailable,o=e.totalRemittence,i=e.loading,c=e.disabled;e.onChangeGLAccount;return Object(a.jsx)(y9,{onSubmit:this.props.handleSubmit,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(yv.a,{name:"transferred_at",label:"Date to Transfer",placeholder:"Date",component:Cy,futureEnabled:!0,validate:uv,disabled:c}),Object(a.jsx)(yv.a,{name:"source_gl_account_id",label:"Paid from Account",placeholder:"Select account...",component:Kv,options:this.sourceAccounts,validate:uv,disabled:c,getOptionLabel:KX.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},selectStyles:n.formSelectStyles,onChange:this.onChangeGLAccount}),Object(a.jsx)(yv.a,{name:"destination_gl_account_id",label:"Paid to Account",placeholder:"Select account...",component:Kv,options:this.destinationAccounts,validate:uv,disabled:c,getOptionLabel:KX.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},selectStyles:n.formSelectStyles}),Object(a.jsx)(yv.a,{name:"remittance_reference",label:"Remittence Reference",placeholder:"None",component:ZO,disabled:c,validate:uv})]}),Object(a.jsxs)(pee,{className:"col-5 offset-1",children:[i&&Object(a.jsx)(av,{size:40}),Object(a.jsx)(V9,{label:"Location",value:t||"",hasDelimiter:!0}),Object(a.jsx)(V9,{label:"Total Available",value:Kf(r),hasDelimiter:!0}),Object(a.jsx)(V9,{label:"Total remittence",value:Kf(o)}),Object(a.jsx)("div",{className:"pt-2",children:Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",disabled:!!c,children:"Process Payment"})})]})]})})}},{key:"sourceAccounts",get:function(){return this.props.glAccounts.filter(this.isBankAccount)}},{key:"destinationAccounts",get:function(){var e=this;return this.props.glAccounts.filter((function(t){return!e.isBankAccount(t)}))}}]),n}(p.PureComponent);hee.formSelectStyles=Object(c.a)(Object(c.a)({},Wv),{},{control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{borderColor:y.gray2,background:t.isDisabled?y.gray1:y.white,boxShadow:t.isFocused?"0 0 1px ".concat(y.gray4):"none"})}});var bee=Object(LO.compose)(Object(Gj.a)({form:"ForwardPaymentsForm"}),Object(b.b)((function(e){var t;return{values:null===(t=e.form.ForwardPaymentsForm)||void 0===t?void 0:t.values}})))(hee);function fee(){var e=Object(f.a)(["\n  th:last-child,\n  td:last-child {\n    text-align: right;\n  }\n  tr.selected-row {\n    background-color: ",";\n    &:hover {\n      opacity: 0.75;\n    }\n  }\n"]);return fee=function(){return e},e}var mee=Object(x.default)(x9)(fee(),y.blue0),jee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={allSelected:!1,locationId:void 0},e.getLocationNameById=function(t){var n=kU(e.props.locations,t);return n&&n.name},e.getPayments=function(t){var n=t.id;e.setState({locationId:n}),e.props.dispatch(C$()),e.props.dispatch(N$({location_id:n,sortby:"desc"})),e.props.dispatch(i$([n]))},e.debouncedGetPayments=_v()(e.getPayments),e.fetchGLAccountInfo=function(t,n){e.props.glAccountInfo.fetch(t,{date_from:qf()(n).format(Dj)})},e.dataToExport=function(){return{reportName:"Forward_payments_new",data:e.allPaymentsData.map((function(e){return{"originally payd":e.due_at,invoice:"Inv. ".concat(e.id),job:e.job?"# ".concat(e.job.id).concat(e.job.location_code,": ").concat(e.job.insurer_name):"",amount:Kf(e.total_amount)}}))}},e.paymentIsSelected=function(t){var n=e.props.payments;return!!n.data.selectedIds&&n.data.selectedIds.includes(t)},e.selectAll=function(t){e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&e.allPaymentsData.length?e.props.dispatch(S$(e.allPaymentsData)):e.props.dispatch(_$())}))},e.toggleSelection=function(t){e.props.dispatch(k$(t)),e.setState({allSelected:!1})},e.calcBalance=function(e){return e.reduce((function(e,t){return e+t.fb_total_paid_amount}),0)},e.forwardPayments=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0!==e.state.locationId&&(e.props.dispatch(E$(Object(c.a)(Object(c.a)({},n),{},{location_id:e.state.locationId,source_gl_account_id:n.source_gl_account_id.id,destination_gl_account_id:n.destination_gl_account_id.id}),{location_id:e.state.locationId})),e.props.dispatch(C$()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=qm.parse(this.props.location.search,{ignoreQueryPrefix:!0});e.location?this.getPayments({id:+e.location}):this.getPaymentsForPrymary()}},{key:"componentDidUpdate",value:function(e,t){t.locationId||e.locations.length===this.props.locations.length||this.getPaymentsForPrymary()}},{key:"getPaymentsForPrymary",value:function(){this.primaryLocation&&this.getPayments(this.primaryLocation)}},{key:"renderPaymentRow",value:function(e){var t,n,r,o=this,i=this.paymentIsSelected(+e.id),c=i?"selected-row":"";return Object(a.jsxs)("tr",{className:c,children:[Object(a.jsx)("td",{children:Object(a.jsx)(PJ,{value:i,onChange:function(t){return o.toggleSelection(e)},size:15,inversedColors:!0})}),Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:e.due_at})}),Object(a.jsx)("td",{children:Object(a.jsxs)(g9,{children:[Object(a.jsxs)("div",{children:["Inv. ",e.id]}),Object(a.jsxs)("div",{children:[null===(t=e.location)||void 0===t?void 0:t.code," | ",e.recipient_name]})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)(O9,{children:[Object(a.jsx)(j4,{job:e.job,withoutName:!0}),Object(a.jsx)("div",{children:e.job&&"".concat(null===(n=e.job)||void 0===n||null===(r=n.invoice_to_contact)||void 0===r?void 0:r.contact_name)})]})}),Object(a.jsx)("td",{children:Kf(e.fb_total_paid_amount)})]},"pmnt-row-".concat(e.id))}},{key:"renderPaymentsTable",value:function(){var e=this;return Object(a.jsxs)(mee,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)(PJ,{value:this.state.allSelected,onChange:this.selectAll,size:15,inversedColors:!0})}),Object(a.jsx)("th",{children:"Invoice Due Date"}),Object(a.jsx)("th",{children:"Invoice"}),Object(a.jsx)("th",{children:"Job"}),Object(a.jsx)("th",{children:"Amount"})]})}),Object(a.jsx)("tbody",{children:this.allPaymentsData.map((function(t){return e.renderPaymentRow(t)}))})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.glAccounts,o=this.props.payments.data,i=this.props.payments.loading,c=i||!(o&&o.data&&o.data.length),s=this.props.glAccountInfo.data?this.props.glAccountInfo.data.additional.total_balance:0,l=this.calcBalance(this.selectedPayments),u=this.getLocationNameById(this.state.locationId);return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(uC,{className:"h-100",children:[Object(a.jsx)(iee,{children:Object(a.jsxs)(k9,{children:[Object(a.jsx)(C9,{children:Object(a.jsx)(uee,{transformToTable:e.dataToExport})}),Object(a.jsx)(nee,{options:n,value:e.state.locationId?{id:e.state.locationId,name:u}:void 0,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:e.debouncedGetPayments,placeholder:"Select location...",withBorder:!0}),Object(a.jsx)(S9,{children:"Forward Invoice Payments"})]})}),Object(a.jsx)(ree,{activeTabId:Y9.new,onChangePage:function(){return e.props.history.push({pathname:"/finance/forward-invoice-payments/received",search:e.state.locationId?"location=".concat(e.state.locationId):""})}}),Object(a.jsx)(_9,{children:t.has(Dw.PAYMENTS_FORWARD)&&Object(a.jsx)(bee,{totalAvailable:s,totalRemittence:l,locationName:u,glAccounts:r.filter((function(e){return"Current Liability"!==e.account_type.name&&"Revenue"!==e.account_type.name})),disabled:c,onSubmit:e.forwardPayments,onChangeGLAccount:e.fetchGLAccountInfo,loading:i,initialValues:{transferred_at:qf()(),source_gl_account_id:(null===r||void 0===r?void 0:r.find((function(e){return!0===e.is_bank_account})))||void 0,destination_gl_account_id:(null===r||void 0===r?void 0:r.find((function(e){return!1===e.is_bank_account})))||void 0}})}),t.has(Dw.PAYMENTS_VIEW)&&Object(a.jsxs)(hC,{children:[i&&Object(a.jsx)(av,{size:40,color:y.white}),!i&&e.allPaymentsData.length>0&&e.renderPaymentsTable()]})]})}})}},{key:"allPaymentsData",get:function(){var e=this.props.payments;return e.data&&e.data.data||[]}},{key:"selectedPayments",get:function(){var e=this;return this.props.payments.data.selectedIds?this.allPaymentsData.filter((function(t){return e.paymentIsSelected(t.id)})):[]}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.PureComponent),vee=Object(LO.compose)(v.g,Mm({glAccountInfo:{fetch:n0.getAccountTransactionsByGlAccountId}}),Object(b.b)((function(e){return{payments:e.forwardPayments,glAccounts:e.finance.glAccounts,locations:e.user.locations}})))(jee);function Oee(){var e=Object(f.a)(["\n  padding-right: 10px;\n  margin-top: -3px;\n  path {\n    stroke: ",";\n  }\n"]);return Oee=function(){return e},e}var gee=x.default.div(Oee(),y.white),xee=function(e){e.innerProps;return Object(a.jsx)(gee,{children:Object(a.jsx)(Ff,{name:Ef.Calendar})})},yee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).options=[];for(var a=qf()().month()>=6,o=qf()().year()+(a?1:0),i=[],c=o;c>o-7;c--)i.push({label:"FY ".concat(c-1," - ").concat(c),value:c.toString()});return r.options=i,r}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(nee,{defaultValue:this.options[0],options:this.options,onChange:this.props.onChange,components:{DropdownIndicator:xee}})}}]),n}(h.a.PureComponent);function wee(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  th:nth-child(4) ~ th,\n  td:nth-child(4) ~ td {\n    text-align: right;\n    padding-right: 15px;\n  }\n  tr.payment-row {\n    background: ",";\n  }\n"]);return wee=function(){return e},e}function _ee(){var e=Object(f.a)(["\n  margin-right: 70px;\n  display: flex;\n"]);return _ee=function(){return e},e}var kee=x.default.div(_ee()),See=Object(x.default)(uF)(wee(),Bf.normal,y.gray0),Cee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={locationName:void 0,locationId:void 0},e.getLocationNameById=function(t){var n=kU(e.props.locations,t);return n&&n.name},e.getPayments=function(t){var n=t.id;e.setState({locationId:n}),e.props.dispatch(P$({locations:[n]})),e.props.transferPaymentInfo.fetch(n)},e.debouncedGetPayments=_v()(e.getPayments),e.getTransferPayments=function(t,n){e.setState({locationId:t}),e.props.transferPaymentInfo.fetch(t,null===n||void 0===n?void 0:n.dateFrom,null===n||void 0===n?void 0:n.dateTo),e.props.transferPayments.fetch({location_id:t,date_from:qf()(null===n||void 0===n?void 0:n.dateFrom).format(Dj),date_to:qf()(null===n||void 0===n?void 0:n.dateTo).format(Dj)})},e.onChangeFiscalYear=function(t){var n=e.state.locationId;e.getTransferPayments(n,e.setDates(+t.value,6))},e.debouncedGetTransferPayments=_v()(e.onChangeFiscalYear),e.dataToExport=function(){var t=[];return e.allPaymentsData.forEach((function(e){t.push({date:e.date,"remittance reference/payment":"Receipt ".concat(e.id),"from account":e.source_gl_account_id,"to account":e.destination_gl_account_id,amount:"",total:Kf(e.total_amount)}),e.invoice.forEach((function(e){t.push({date:"","remittance reference/payment":"Inv. ".concat(e.id),"from account":"","to account":"",amount:Kf(e.amount),total:""})}))})),{reportName:"Forward_payments_received",data:e.allPaymentsData.map((function(e){return{"originally paid":e.due_at,invoice:"Inv. ".concat(e.id),job:e.job?"# ".concat(e.job.id).concat(e.job.location_code,": ").concat(e.job.insurer_name):"",amount:Kf(e.total_amount)}}))}},e.getAccountName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(null===e||void 0===e?void 0:e.find((function(e){return e.is_debit===n})))||void 0;return r?"".concat(null===r||void 0===r||null===(t=r.gl_account)||void 0===t?void 0:t.name):""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=qm.parse(this.props.location.search,{ignoreQueryPrefix:!0});e.location?this.getTransferPayments(+e.location,this.getCurrentYearFiscal()):this.getPaymentsForPrymary()}},{key:"componentDidUpdate",value:function(e,t){t.locationId||e.locations.length===this.props.locations.length||this.getPaymentsForPrymary()}},{key:"getPaymentsForPrymary",value:function(){this.primaryLocation&&this.getTransferPayments(this.primaryLocation.id,this.getCurrentYearFiscal())}},{key:"getCurrentYearFiscal",value:function(){var e=qf()().month()>=6,t=qf()().year()+(e?1:0);return this.setDates(t,6)}},{key:"setDates",value:function(e,t){return{dateFrom:qf()().set("year",e-1).set("month",t).startOf("month"),dateTo:qf()().set("year",e).set("month",t-1).endOf("month")}}},{key:"renderPaymentsTable",value:function(){var e=this;return Object(a.jsxs)(See,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Remittence Reference/Payment"}),Object(a.jsx)("th",{children:"From Account"}),Object(a.jsx)("th",{children:"To Account"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Total"})]})}),Object(a.jsx)("tbody",{children:this.allPaymentsData.map((function(t){return e.renderPayments(t)}))})]})}},{key:"renderPayments",value:function(e){var t,n,r,o,i;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("tr",{className:"payment-row",children:[Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:Object(a.jsx)($_.a,{format:Pj,children:null===e||void 0===e||null===(t=e.forward)||void 0===t?void 0:t.transferred_at})})}),Object(a.jsx)("td",{children:Object(a.jsxs)("strong",{children:["Receipt ",null===e||void 0===e?void 0:e.id]})}),Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:this.getAccountName(null===e||void 0===e||null===(n=e.transaction)||void 0===n?void 0:n.records,!1)})}),Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:this.getAccountName(null===e||void 0===e||null===(r=e.transaction)||void 0===r?void 0:r.records,!0)})}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:Kf(null===e||void 0===e?void 0:e.amount)})})]},"pmnt-row-".concat(null===e||void 0===e?void 0:e.id)),null===e||void 0===e||null===(o=e.forward)||void 0===o||null===(i=o.invoice)||void 0===i?void 0:i.map((function(t){var n;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsxs)("td",{children:["Inv. ",null===t||void 0===t?void 0:t.id]}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Kf(null===t||void 0===t||null===(n=t.pivot)||void 0===n?void 0:n.amount)})]},"pmnt-inv-".concat(null===e||void 0===e?void 0:e.id,"-").concat(null===t||void 0===t?void 0:t.id))}))]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=(t.info,t.transferPayments.loading),o=t.transferPaymentInfo,i=o.loading,c=o.data&&Kf(o.data.data.month),s=o.data&&Kf(o.data.data.year),l=o.data&&Kf(o.data.data.all),u=this.getLocationNameById(this.state.locationId);return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(uC,{className:"h-100",children:[Object(a.jsx)(iee,{children:Object(a.jsxs)(k9,{children:[Object(a.jsx)(C9,{children:Object(a.jsx)(uee,{transformToTable:e.dataToExport})}),Object(a.jsx)(nee,{options:n,value:e.state.locationId?{id:e.state.locationId,name:u}:void 0,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:e.debouncedGetPayments,placeholder:"Select location...",withBorder:!0}),Object(a.jsx)(yee,{onChange:e.debouncedGetTransferPayments}),Object(a.jsx)(S9,{children:"Forward Invoice Payments"})]})}),Object(a.jsx)(ree,{activeTabId:Y9.received,onChangePage:function(){return e.props.history.push({pathname:"/finance/forward-invoice-payments/new",search:e.state.locationId?"location=".concat(e.state.locationId):""})}}),Object(a.jsxs)(_9,{children:[i&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)(kee,{children:[Object(a.jsx)(V9,{label:"Location",value:u,hasDelimiter:!0}),Object(a.jsx)(V9,{label:"Selected Financial Year",value:s,hasDelimiter:!0})]}),Object(a.jsxs)(kee,{children:[Object(a.jsx)(V9,{label:"Overall Total",value:l,hasDelimiter:!0}),Object(a.jsx)(V9,{label:"This Month",value:c,hasDelimiter:!0})]})]}),t.has(Dw.PAYMENTS_VIEW)&&Object(a.jsxs)(hC,{children:[r&&Object(a.jsx)(av,{size:40,color:y.white}),!r&&e.allPaymentsData.length>0&&e.renderPaymentsTable()]})]})}})}},{key:"allPaymentsData",get:function(){var e=this.props.transferPayments;return e.data&&e.data.data||[]}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.PureComponent),Nee=Object(LO.compose)(v.g,Mm({transferPaymentInfo:{fetch:m$.paymentTransferInfo},transferPayments:{fetch:m$.getForwardPaymentTransfersList}}),Object(b.b)((function(e){return{payments:e.forwardPaymentsReceived,info:e.forwardPaymentsReceivedInfo,locations:e.user.locations}})))(Cee),Eee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Reimbursements Page"})}}]),n}(p.PureComponent),Aee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Timesheet Payroll Page"})}}]),n}(p.PureComponent);function Tee(){var e=Object(f.a)(["\n  background: ",";\n  border: 1px solid ",";\n  text-align: center;\n  padding: 0 0 0 30px;\n"]);return Tee=function(){return e},e}var Iee=x.default.div(Tee(),y.gray1,y.gray2),Ree=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(Iee,{children:this.props.children})}}]),n}(p.PureComponent);function Dee(){var e=Object(f.a)(["\n  color: ",";\n"]);return Dee=function(){return e},e}var Mee=x.default.span(Dee(),y.gray2),Pee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedItem:null},e.triggerRender=function(){var t=e.props,n=t.placeHolder,r=t.nameRender,o=e.state.selectedItem;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[o?r(o):Object(a.jsx)(Mee,{children:n}),Object(a.jsx)(J3,{style:{marginLeft:"20px"},color:y.white,name:Ef.ArrowDown})]})},e.dataSource=function(){var t=e.props,n=t.items,r=t.onChange,a=t.nameRender;return n.map((function(t){return{name:a(t),onClick:function(){e.setState({selectedItem:t}),r(t)}}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.defaultValueById,n=e.items;if(t){var r=n.find((function(e){return e.id===t}));r&&(this.setState({selectedItem:r}),this.props.onChange(r))}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.selectItemById,r=t.items;if(e.selectItemById!==n){var a=r.find((function(e){return e.id===n}));a&&this.setState({selectedItem:a})}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(yw,{direction:"right",trigger:function(){return e.triggerRender()},items:this.dataSource()})}}]),n}(p.PureComponent),Lee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={startDate:e.props.defaultStartDate?e.props.defaultStartDate:qf()(),endDate:e.props.defaultEndDate?e.props.defaultEndDate:qf()()},e.onStartDateChange=function(t,n){var r=e.state.endDate,a=t;e.setState({startDate:a}),e.onChange({startDate:a,endDate:r}),n.close()},e.onEndDateChange=function(t,n){var r=e.state.startDate,a=t;e.setState({endDate:a}),e.onChange({startDate:r,endDate:a}),n.close()},e.startTriggerRender=function(){var t=e.state.startDate;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[t.format(Pj)," - \xa0"]})},e.endTriggerRender=function(){var t=e.state.endDate;return Object(a.jsx)("div",{className:"d-flex",style:{cursor:"pointer"},children:t.format(Pj)})},e.startPickerRender=function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(by.a,{input:!1,timeFormat:!1,onChange:function(n){return e.onStartDateChange(n,t)},initialValue:e.props.defaultStartDate})})},e.endPickerRender=function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(by.a,{input:!1,timeFormat:!1,onChange:function(n){return e.onEndDateChange(n,t)},initialValue:e.props.defaultEndDate})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(this.props.defaultEndDate||this.props.defaultStartDate){var e=this.state,t=e.startDate,n=e.endDate;this.onChange({startDate:t,endDate:n})}}},{key:"onChange",value:function(e){this.props.onChange({startDate:e.startDate,endDate:e.endDate})}},{key:"render",value:function(){var e=this;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)(yw,{renderInternal:this.startPickerRender,trigger:function(){return e.startTriggerRender()}}),Object(a.jsx)(yw,{renderInternal:this.endPickerRender,trigger:function(){return e.endTriggerRender()}}),Object(a.jsx)(J3,{style:{marginLeft:"20px"},color:y.white,name:Ef.Calendar})]})})}}]),n}(p.PureComponent),Fee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dateFromSelected:qf()(),dateToSelected:qf()(),glAccountSelected:null,aoSelected:null},e.onGlAccountChange=function(t){e.setState({glAccountSelected:t})},e.onAoChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({aoSelected:n}),t.prev=1,t.next=4,e.debouncedSearch({accounting_organization_id:n.id});case 4:return t.prev=4,(r=e.props.glAccountsFilter.data)&&r.length>0?e.setState({glAccountSelected:r[0]}):e.setState({glAccountSelected:null}),t.finish(4);case 8:case"end":return t.stop()}}),t,null,[[1,,4,8]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=_v()(e.props.glAccountsFilter.fetch,500),e.onDateChange=function(t){e.setState({dateFromSelected:t.startDate,dateToSelected:t.endDate})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.dateFromSelected,a=n.dateToSelected,o=n.glAccountSelected;if(!r.isSame(t.dateFromSelected)||!a.isSame(t.dateToSelected)||o!==t.glAccountSelected){var i={dateFrom:r,dateTo:a,glAccount:o};this.props.onSubmit(i)}}},{key:"glAccountNameRender",value:function(e){return e.name}},{key:"aoNameRender",value:function(e){return Jv.getContactName(e.contact)}},{key:"render",value:function(){var e=this.props,t=e.glAccountsFilter.data,n=e.accountingOrganizations,r=e.user,o=qf()().startOf("month"),i=qf()().endOf("month");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(UI,{children:Object(a.jsx)(Lee,{onChange:this.onDateChange,defaultStartDate:o,defaultEndDate:i})}),Object(a.jsx)(UI,{children:!n||n&&0===n.length?Object(a.jsx)("div",{children:"No Accounting Organizations"}):Object(a.jsx)(Pee,{items:n,onChange:this.onAoChange,placeHolder:"Select Accounting Organization...",nameRender:this.aoNameRender,defaultValueById:r.locations[0]})}),Object(a.jsx)(UI,{children:!t||t&&0===t.length?Object(a.jsx)("div",{children:"No GL Accounts"}):Object(a.jsx)(Pee,{items:t,onChange:this.onGlAccountChange,placeHolder:"Select GL Account...",nameRender:this.glAccountNameRender,defaultValueById:t[0].id,selectItemById:t[0].id})})]})}}]),n}(h.a.PureComponent),Uee=Object(LO.compose)(Object(b.b)((function(e){return{accountingOrganizations:e.finance.accountingOrganizations,user:e.user}})),Mm({glAccountsFilter:{fetch:KX.searchGLAccounts}}))(Fee);function Vee(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return Vee=function(){return e},e}function Bee(){var e=Object(f.a)(["\n  padding: 0px 15px;\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]);return Bee=function(){return e},e}function Jee(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  padding: 0 25px 0 25px;\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]);return Jee=function(){return e},e}var zee=x.default.div(Jee(),Bf.medium,Vf.normal,y.white),qee=x.default.div(Bee()),Wee=x.default.div(Vee()),Hee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.reportName,n=e.toCsvFn;return Object(a.jsxs)(iee,{children:[Object(a.jsx)(Wee,{children:Object(a.jsx)(zee,{children:t})}),Object(a.jsxs)(Wee,{children:[Object(a.jsx)(Wee,{children:this.props.children}),Object(a.jsx)(qee,{children:Object(a.jsx)(u9,{children:Object(a.jsx)(uee,{transformToTable:n})})})]})]})}}]),n}(p.PureComponent);function Gee(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  min-width: 100%;\n"]);return Gee=function(){return e},e}function Yee(){var e=Object(f.a)(["\n  display: table-row;\n  text-align: left;\n  padding: 10px 40px 10px 10px;\n  font-weight: ",";\n  font-size: ",";\n"]);return Yee=function(){return e},e}function Qee(){var e=Object(f.a)(["\n  display: table-row;\n  text-align: left;\n  padding: 10px 40px 10px 120px;\n  color: ",";\n  font-size: ",";\n"]);return Qee=function(){return e},e}var Kee=x.default.div(Qee(),y.gray4,Vf.normal),Zee=x.default.div(Yee(),Bf.bold,Vf.big),Xee=x.default.div(Gee(),y.gray2),$ee="Account Transactions",ete=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={balance:0,glAccountName:"",glType:"",isEmpty:!0},e.getCsvData=function(){var t=e.props.accountTransactions.data.data;return e.hasAccountTransactions?{reportName:$ee,data:t.map((function(e){return{date:e.transaction?qj(e.transaction.created_at):"",description:e.transaction&&e.transaction.payment?e.transaction.payment.reference:"",debit:e.is_debit?e.amount:"",credit:e.is_debit?"":e.amount,balance:e.balance}}))}:null},e.getAccountTransactions=function(t){e.handlePagination(t,0)},e.filterReport=Object(m.debounce)(e.getAccountTransactions),e}return Object(l.a)(n,[{key:"handlePagination",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a,o,i,c;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dateFrom,a=t.dateTo,o=t.glAccount,i=qj(r),c=qj(a),!o){e.next=10;break}return this.setState({glAccountName:o.name,glType:o.account_type.name}),e.next=7,this.getData(o.id,n,i,c);case 7:return e.abrupt("return",e.sent);case 10:this.setEmpty();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setEmpty",value:function(){this.setState({glAccountName:"",glType:"",balance:0,isEmpty:!0})}},{key:"getData",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r,a){var o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.dispatch(c0(t,{date_from:r,date_to:a,page:n}));case 3:return e.prev=3,o=this.props.accountTransactions.data&&this.props.accountTransactions.data.additional&&this.props.accountTransactions.data.additional.total_balance,this.setState({balance:o||0,isEmpty:!1}),e.finish(3);case 7:case"end":return e.stop()}}),e,this,[[0,,3,7]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"renderReportRows",value:function(){var e=this.props.accountTransactions.data.data;if(!e)return null;var t="--";return e.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(v8,{children:Object(a.jsx)($_.a,{format:Pj,children:e.transaction?e.transaction.created_at.toString():t})}),Object(a.jsx)(v8,{children:t}),Object(a.jsx)(v8,{children:e.transaction&&e.transaction.payment&&e.transaction.payment.reference?e.transaction.payment.reference:t}),Object(a.jsx)(O8,{children:e.is_debit?Kf(e.amount)+" DR":t}),Object(a.jsx)(O8,{children:e.is_debit?t:Kf(e.amount)+" CR"}),Object(a.jsx)(O8,{children:Kf(e.balance)})]},"trans-tr-".concat(e.id))}))}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:6,children:"No data..."})})}},{key:"renderSummary",value:function(){var e=this.state,t=e.glAccountName,n=e.glType,r=e.balance;return Object(a.jsx)("div",{className:"row",style:{height:"288px"},children:Object(a.jsx)("div",{className:".col-lg-4 col-md-4 col-sm-12",children:Object(a.jsxs)("div",{className:"d-flex flex-column h-100 align-items-stretch",children:[Object(a.jsx)("div",{className:"d-flex flex-row flex-fill align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(Kee,{children:"Account"}),Object(a.jsx)(Zee,{children:t})]})}),Object(a.jsx)(Xee,{className:"d-flex flex-row flex-fill align-items-center",children:Object(a.jsxs)("div",{className:"row w-100",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(Kee,{children:"Account Balance"}),Object(a.jsx)(Zee,{children:Kf(r)})]}),Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(Kee,{children:"Account Type"}),Object(a.jsx)(Zee,{children:n})]})]})})]})})})}},{key:"render",value:function(){var e=this.props.accountTransactions.loading,t=this.props.accountTransactions.data,n=this.hasAccountTransactions;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hee,{reportName:$ee,toCsvFn:this.getCsvData,children:Object(a.jsx)(Uee,{onSubmit:this.filterReport})}),e?Object(a.jsx)(av,{size:40,color:y.white}):Object(a.jsxs)(uC,{className:"h-100",children:[Object(a.jsx)(Ree,{children:this.renderSummary()}),Object(a.jsxs)(hC,{children:[Object(a.jsxs)(hF,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(_8,{scope:"col",width:"10%",children:"Date"}),Object(a.jsx)(_8,{scope:"col",width:"20%",children:"Description"}),Object(a.jsx)(_8,{scope:"col",width:"25%",children:"Reference"}),Object(a.jsx)(k8,{scope:"col",width:"15%",children:"Debit"}),Object(a.jsx)(k8,{scope:"col",width:"15%",children:"Credit"}),Object(a.jsx)(k8,{scope:"col",width:"15%",children:"Balance"})]})}),Object(a.jsx)("tbody",{children:n?this.renderReportRows():this.renderNodata()})]}),t&&t.pagination&&Object(a.jsx)(u9,{children:Object(a.jsx)(AS,{pagination:t.pagination,onChange:this.handlePagination})})]})]})]})}},{key:"hasAccountTransactions",get:function(){var e=this.props.accountTransactions,t=e.ready,n=e.data,r=n&&n.data;return t&&r&&r.length>0&&!this.state.isEmpty}}]),n}(p.PureComponent),tte=Object(LO.compose)(Object(b.b)((function(e){return{accountTransactions:e.accountTransactions}})))(ete),nte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Aged Receivables Summary Page"})}}]),n}(p.PureComponent),rte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Aged Receivables Detailed Page"})}}]),n}(p.PureComponent),ate=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Income by Account Summary Page"})}}]),n}(p.PureComponent),ote=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Income by Account Detailed Page"})}}]),n}(p.PureComponent);function ite(){var e=Object(f.a)(["\n  margin: 40px 20px 40px 20px;\n"]);return ite=function(){return e},e}function cte(){var e=Object(f.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 5px;\n  @media print {\n    border: none;\n  }\n"]);return cte=function(){return e},e}function ste(){var e=Object(f.a)(["\n  padding: 60px 80px 0 80px;\n  background-color: ",";\n  position: relative;\n  min-height: 100%;\n"]);return ste=function(){return e},e}function lte(){var e=Object(f.a)(["\n  height: calc(100% - ","px);\n"]);return lte=function(){return e},e}var ute=x.default.div(lte(),50),dte=x.default.div(ste(),y.gray1),pte=x.default.div(cte(),y.white,y.gray2),hte=x.default.div(ite()),bte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.children;return Object(a.jsx)(ute,{children:Object(a.jsx)(uC,{className:"h-100",children:Object(a.jsx)(dte,{style:t,className:"d-flex flex-column",children:Object(a.jsx)(pte,{className:"flex-grow-1",children:Object(a.jsx)(hte,{children:n})})})})})}}]),n}(p.PureComponent);function fte(){var e=Object(f.a)(["\n  width: 100%;\n  border: none;\n  border-spacing: 0;\n  border-collapse: separate;\n  thead {\n    tr {\n      cursor: default;\n      th {\n        color: ",";\n        vertical-align: middle;\n        border-bottom: none;\n        &:first-child {\n          border-left: 1px solid ",";\n        }\n        &:last-child {\n          border-right: 1px solid ",";\n        }\n      }\n    }\n  }\n  tbody {\n    tr {\n      cursor: default;\n      td {\n        border-top: none;\n      }\n    }\n  }\n  .no-items {\n    color: ",";\n    text-align: center;\n    border: 1px solid ",";\n    background: ",";\n  }\n"]);return fte=function(){return e},e}var mte,jte=Object(x.default)(uF)(fte(),y.gray4,y.gray2,y.gray2,y.gray4,y.gray2,y.gray0);!function(e){e.Text="left",e.Numeric="right"}(mte||(mte={}));var vte="--",Ote=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dateFromSelected:qf()(),dateToSelected:qf()(),locationSelected:null},e.onLocationChange=function(t){e.setState({locationSelected:t})},e.onDateChange=function(t){e.setState({dateFromSelected:t.startDate,dateToSelected:t.endDate})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t={dateFrom:e.dateFromSelected,dateTo:e.dateToSelected,location:e.locationSelected};this.props.onSubmit(t)}},{key:"locationNameRender",value:function(e){return e.name}},{key:"render",value:function(){var e=this.props.locations,t=e.find((function(e){return e.primary})),n=qf()().quarter(),r=qf()().quarter(n).startOf("quarter"),o=qf()().quarter(n).endOf("quarter");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(UI,{children:Object(a.jsx)(Lee,{onChange:this.onDateChange,defaultStartDate:r,defaultEndDate:o})}),Object(a.jsx)(UI,{children:!e||e&&0===e.length?Object(a.jsx)("div",{children:"No Locations"}):Object(a.jsx)(Pee,{items:e,onChange:this.onLocationChange,placeHolder:"Select Location...",nameRender:this.locationNameRender,defaultValueById:t&&t.id})})]})}}]),n}(h.a.PureComponent),gte=Object(b.b)((function(e){return{locations:e.user.locations}}))(Ote);function xte(){var e=Object(f.a)(["\n  width: 100%;\n  border: none;\n  margin-bottom: 0;\n  thead {\n    th {\n      color: ",";\n      background: ",";\n    }\n  }\n  tbody {\n    tr {\n      td:first-child {\n        border-left: 1px solid ",";\n      }\n      td:last-child {\n        border-right: 1px solid ",";\n      }\n      td {\n        border-top: 1px solid ",";\n      }\n    }\n    tr:last-child {\n      &:hover {\n        background-color: ",";\n      }\n      td {\n        border-left: none;\n        border-right: none;\n      }\n    }\n  }\n  .no-items {\n    background: ",";\n    text-align: left;\n  }\n"]);return xte=function(){return e},e}var yte=Object(x.default)(uF)(xte(),y.black0,y.gray0,y.gray2,y.gray2,y.gray2,y.white,y.white);function wte(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n"]);return wte=function(){return e},e}var _te=x.default.span(wte(),y.black0,Bf.bold);function kte(){var e=Object(f.a)(["\n  thead {\n    th {\n      color: ",";\n      background: ",";\n    }\n  }\n  tbody {\n    tr:nth-last-child(2) {\n      background: ",";\n    }\n  }\n"]);return kte=function(){return e},e}var Ste=Object(x.default)(yte)(kte(),y.black0,y.white,y.gray0),Cte="GST Summary",Nte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsvData=function(){var t=e.props.gstSummary.data.data;if(!e.hasGstSummary)return null;var n=[];return t.income&&t.income.data.length>0&&(n=(n=(n=n.concat({name:"INCOME"})).concat(t.income.data)).concat({name:"Total Income",tax_rate:"",taxes:"",total_amount:t.income.total})),t.expenses&&t.expenses.data.length>0&&(n=(n=(n=n.concat({name:"EXPENSES"})).concat(t.expenses.data)).concat({name:"Total Expenses",tax_rate:"",taxes:"",total_amount:t.expenses.total})),t.other&&t.other.data.length>0&&(n=(n=(n=n.concat({name:"OTHER"})).concat(t.other.data)).concat({name:"Total Other",tax_rate:"",taxes:"",total_amount:t.other.total})),{reportName:Cte,data:n.map((function(e){return{account:e.name,tax_rate:e.tax_rate,taxes:e.taxes,total_amount:e.total_amount}}))}},e.getGstSummary=function(t,n){var r=t.dateFrom,a=t.dateTo,o=t.location;if(o){var i=qj(r),c=qj(a),s=o&&o.id;return e.getData(s,n,i,c)}},e.filterReport=Object(m.debounce)(e.getGstSummary),e.columnsDesc=[{id:"name",header:"Account",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.name})}},{id:"tax_rate",header:"Tax Rate",width:"30%",type:mte.Numeric,cell:function(e){return Object(a.jsxs)("span",{children:[e.tax_rate,"%"]})}},{id:"taxes",header:"Tax",width:"30%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:am(e.taxes,vte)})}},{id:"total_amount",header:"Amount Inc.",width:"30%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:am(e.total_amount,vte)})}}],e}return Object(l.a)(n,[{key:"getData",value:function(e,t,n,r){var a;this.props.dispatch((a={date_from:n,date_to:r,location_id:e,page:t},iS(O1,g1,x1,(function(){return v1(a)}))))}},{key:"renderReportRows",value:function(){var e=this.props.gstSummary.data.data;return e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,style:{padding:"0"},children:this.renderGstSummary(e.income,"Income")})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,style:{padding:"0"},children:this.renderGstSummary(e.expenses,"Expenses")})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,style:{padding:"0"},children:this.renderGstSummary(e.other,"Other")})})]}):null}},{key:"renderGstSummary",value:function(e,t){return Object(a.jsxs)(Ste,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)(_8,{colSpan:this.columnsDesc.length,children:Object(a.jsx)(_te,{children:t})})})}),Object(a.jsxs)("tbody",{children:[e&&e.data.length>0?this.renderSummaries(e.data):this.renderNodata(),e&&e.data.length>0&&Object(a.jsxs)("tr",{children:[Object(a.jsxs)(v8,{colSpan:this.columnsDesc.length-1,children:["Total ",t]}),Object(a.jsx)(O8,{width:"30%",children:Object(a.jsx)(_te,{children:am(e.total,vte)})})]}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,children:"\xa0"})})]})]})}},{key:"renderSummaries",value:function(e,t){var n=this;return e?e.map((function(e){return Object(a.jsx)("tr",{children:n.columnsDesc.map((function(n){return Object(a.jsx)(j8,{width:n.width,hidden:n.hidden,align:n.type,children:t?Object(a.jsx)(_te,{children:n.cell(e)}):n.cell(e)},n.id)}))},e.name)})):null}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsDesc.length,children:"No items found"})})}},{key:"render",value:function(){var e=this.props.gstSummary.loading,t=this.hasGstSummary;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hee,{reportName:Cte,toCsvFn:this.getCsvData,children:Object(a.jsx)(gte,{onSubmit:this.filterReport})}),e?Object(a.jsx)(av,{size:40,color:y.white}):Object(a.jsx)(bte,{children:Object(a.jsxs)(jte,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:this.columnsDesc.map((function(e){return Object(a.jsx)(w8,{width:e.width,align:e.type,children:e.header},e.id)}))})}),Object(a.jsx)("tbody",{children:t?this.renderReportRows():this.renderNodata()})]})})]})}},{key:"hasGstSummary",get:function(){var e=this.props.gstSummary,t=e.ready,n=e.data,r=n&&n.data;return!(!t||!r)}}]),n}(p.PureComponent),Ete=Object(b.b)((function(e){return{gstSummary:e.gstSummary}}))(Nte),Ate=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(hC,{children:"Statement by Contact Summary Page"})}}]),n}(p.PureComponent),Tte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dateFromSelected:qf()(),dateToSelected:qf()(),locationSelected:null},e.onLocationChange=function(t){e.setState({locationSelected:t})},e.onDateChange=function(t){e.setState({dateFromSelected:t.startDate,dateToSelected:t.endDate})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t={dateFrom:e.dateFromSelected,dateTo:e.dateToSelected,location:e.locationSelected};this.props.onSubmit(t)}},{key:"locationNameRender",value:function(e){return e.name}},{key:"render",value:function(){var e=this.props.locations,t=qf()().startOf("month"),n=qf()().endOf("month"),r=e.find((function(e){return e.primary}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(UI,{children:Object(a.jsx)(Lee,{onChange:this.onDateChange,defaultStartDate:t,defaultEndDate:n})}),Object(a.jsx)(UI,{children:!e||e&&0===e.length?Object(a.jsx)("div",{children:"No Locations"}):Object(a.jsx)(Pee,{items:e,onChange:this.onLocationChange,placeHolder:"Select Location...",nameRender:this.locationNameRender,defaultValueById:r&&r.id})})]})}}]),n}(h.a.PureComponent),Ite=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})))(Tte);function Rte(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return Rte=function(){return e},e}function Dte(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  white-space: nowrap;\n"]);return Dte=function(){return e},e}function Mte(){var e=Object(f.a)(["\n  color: ",";\n"]);return Mte=function(){return e},e}var Pte=x.default.span(Mte(),y.black0),Lte=x.default.span(Dte()),Fte=Object(x.default)(NC)(Rte(),Vf.smaller),Ute="Invoice Payments",Vte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={reportRequest:{dateFrom:null,dateTo:null,location:null}},e.getCsvData=function(){var t=e.props.invoicePayments.data.data;if(!e.hasIvoices)return[];var n=[];return t.forEach((function(e){var t={id:e.id,location_code:e.location_code,recipient_name:e.recipient_name?e.recipient_name:e.recipient_contact?e.recipient_contact.email:"",claim_number:e.job?e.job.claim_number:"",total_amount:e.total_amount,paid_status:e.paid_status,item:"",reference:"",amount:""};e.payments&&e.payments.length>0?e.payments.map((function(e){return{id:t.id,location_code:t.location_code,recipient_name:t.recipient_name,claim_number:t.claim_number,total_amount:t.total_amount,paid_status:t.paid_status,item:e.paid_at,reference:e.type,amount:e.amount}})).forEach((function(e){return n.push(e)})):n.push(t)})),{reportName:Ute,data:n}},e.columnsPaymentDef=[{id:"item",header:"Item",width:"15%",type:mte.Text,cell:function(e){return Object(a.jsx)($_.a,{format:Pj,children:e.paid_at?e.paid_at.toString():"--"})}},{id:"reference",header:"Reference",width:"65%",type:mte.Text,cell:function(t){return Object(a.jsxs)("span",{children:[t.reference," ",e.renderPaymentType(t.type)]})}},{id:"amount",header:"Amount",width:"10%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:Kf(e.amount)})}},{id:"paid",header:"",width:"10%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:"\xa0"})}}],e.getInoicePayments=function(t,n){var r=t.dateFrom,a=t.dateTo,o=t.location,i=qj(r),c=qj(a),s=o&&o.id;return e.getData(s,n,i,c)},e.filterReport=Object(m.debounce)(e.getInoicePayments),e.handlePagination=function(t){return e.getInoicePayments(e.state.reportRequest,t)},e}return Object(l.a)(n,[{key:"getData",value:function(e,t,n,r){var a;this.setState({reportRequest:{dateFrom:n,dateTo:r,location:e}}),this.props.dispatch((a={date_from:n,date_to:r,location_id:e,page:t},iS(T0,I0,R0,(function(){return A0.getInvoicePayments(a)}))))}},{key:"renderReportRows",value:function(){var e=this,t=this.props.invoicePayments.data.data;return t?t.map((function(t){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:5,style:{padding:"0"},children:e.renderInvoice(t)})},"invoice-tr-".concat(t.id))})):null}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsPaymentDef.length,children:"No data..."})})}},{key:"renderInvoice",value:function(e){var t=e.location_code?e.location_code:"",n=e.recipient_name?" | "+e.recipient_name:"";n&&(n=e.recipient_contact&&e.recipient_contact.email?" | "+e.recipient_contact.email:"");var r=e.job?" | #"+e.job.claim_number:"";return Object(a.jsxs)(yte,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsxs)(_8,{colSpan:2,width:"80%",children:[Object(a.jsxs)(Pte,{children:["Invoice ",e.id,":"]})," ",t," ",n," ",r]}),Object(a.jsx)(k8,{width:"10%",children:Object(a.jsx)(Pte,{children:Kf(e.total_amount)})}),Object(a.jsx)("th",{style:{width:"10%",textAlign:"center"},children:Object(a.jsx)(Lte,{children:e.paid_status})})]})}),Object(a.jsxs)("tbody",{children:[e.payments&&e.payments.length>0?this.renderPayments(e.payments):this.renderNoPayment(),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:5,children:"\xa0"})})]})]})}},{key:"renderPayments",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsx)("tr",{children:t.columnsPaymentDef.map((function(t){return Object(a.jsx)(j8,{width:t.width,hidden:t.hidden,align:t.type,children:t.cell(e)},t.id)}))},e.id)})):null}},{key:"renderPaymentType",value:function(e){switch(e){case"credit_card":return Object(a.jsx)(Fte,{tag:{name:"CREDIT CARD",color:y.blue1}});case"direct_deposit":return Object(a.jsx)(Fte,{tag:{name:"DIRECT DEPOSIT",color:y.gray4}});case"credit_note":return Object(a.jsx)(Fte,{tag:{name:"CREDIT NOTED",color:y.orange1}});default:return""}}},{key:"renderNoPayment",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsPaymentDef.length,"text-align":"left",children:"No payments made"})})}},{key:"render",value:function(){var e=this.props.invoicePayments.loading,t=this.props.invoicePayments.data,n=this.hasIvoices;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hee,{reportName:Ute,toCsvFn:this.getCsvData,children:Object(a.jsx)(Ite,{onSubmit:this.filterReport})}),e?Object(a.jsx)(av,{size:40,color:y.white}):Object(a.jsxs)(bte,{children:[Object(a.jsxs)(jte,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:this.columnsPaymentDef.map((function(e){return Object(a.jsx)(w8,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})}),Object(a.jsx)("tbody",{children:n?this.renderReportRows():this.renderNodata()})]}),t&&t.pagination&&t.pagination.last_page>1&&Object(a.jsx)(AS,{pagination:t.pagination,onChange:this.handlePagination})]})]})}},{key:"hasIvoices",get:function(){var e=this.props.invoicePayments,t=e.ready,n=e.data;return!!(t&&n&&n.data&&n.data.length>0)}}]),n}(p.PureComponent),Bte=Object(LO.compose)(Object(b.b)((function(e){return{invoicePayments:e.invoicePayments}})))(Vte),Jte=n(90),zte=n(304),qte=n.n(zte),Wte=(n(946),n(947),n(1068)),Hte=n(1069),Gte=n(1065),Yte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getPositions=function(){return e.props.slots.filter((function(e){var t,n,r=e.job_task;return(null===(t=r.job)||void 0===t?void 0:t.site_address_lat)&&(null===(n=r.job)||void 0===n?void 0:n.site_address_lng)})).map((function(e){var t=e.job_task;return[t.job.site_address_lat,t.job.site_address_lng]}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.color;return Object(a.jsx)(Gte.a,{color:e,positions:this.getPositions()})}}]),n}(p.PureComponent),Qte=n(1066),Kte=n(80),Zte=n.n(Kte),Xte=n(91),$te=n.n(Xte);function ene(){var e=Object(f.a)(["\n  position: absolute;\n  top: 25%;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 0px 50px ",";\n  opacity: 0.25;\n  border-radius: 50%;\n"]);return ene=function(){return e},e}var tne=Object(x.default)(Kj(["color"])("div"))(ene(),(function(e){return e.color||"black"})),nne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderIcon=function(){var t=e.props.color,n=40;return new Zte.a.DivIcon({html:$te.a.renderToStaticMarkup(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(tne,{color:t}),Object(a.jsx)(J3,{size:n,style:{position:"relative"},color:t,name:Ef.PinMapFilled,fill:!0})]})),iconSize:[n,n],iconAnchor:[20,n],popupAnchor:[0,-40/1.2]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.position,n=e.children;return Object(a.jsx)(Qte.a,{position:t,icon:this.renderIcon(),children:n})}}]),n}(h.a.PureComponent),rne=n(1067);function ane(){var e=Object(f.a)(["\n  margin-bottom: 10px;\n\n  :last-child {\n    margin-bottom: 0;\n  }\n"]);return ane=function(){return e},e}var one=x.default.div(ane()),ine=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tasks;e.location;return Object(a.jsx)(rne.a,{children:t.map((function(e,t){return Object(a.jsxs)(one,{children:[Object(a.jsxs)("strong",{children:[e.index+1," - ",e.task.name]}),Object(a.jsx)("br",{}),e.task.job.site_address&&Object(a.jsxs)(a.Fragment,{children:[e.task.job.site_address.full_address,Object(a.jsx)("br",{})]}),e.task.job.site_contact&&Object(a.jsxs)(a.Fragment,{children:[e.task.job.site_contact.first_name," ",e.task.job.site_contact.last_name,Object(a.jsx)("br",{})]}),"Job #",e.task.job.id,Object(a.jsx)("br",{}),"Schedule time:"," ",qf()(e.slot.starts_at).format(Fj)," ","-"," ",qf()(e.slot.ends_at).format(Fj)]},t)}))})}}]),n}(p.PureComponent),cne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).sortTasks=function(){var t=e.props.slots,n={};return t.forEach((function(e,t){var r,a,o=e.job_task,i=Object(Rm.a)(e,["job_task"]);if((null===(r=o.job)||void 0===r?void 0:r.site_address_lat)&&(null===(a=o.job)||void 0===a?void 0:a.site_address_lng)){var c="".concat(o.job.site_address_lat,"-").concat(o.job.site_address_lng);n[c]?n[c].tasks.push({task:o,slot:i,index:t}):n[c]={lat:o.job.site_address_lat,lng:o.job.site_address_lng,tasks:[{task:o,slot:i,index:t}]}}})),Object.values(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.location;return this.sortTasks().map((function(e,r){return Object(a.jsx)(nne,{position:[e.lat,e.lng],color:t,children:Object(a.jsx)(ine,{tasks:e.tasks,location:n})},"location-".concat(r))}))}}]),n}(p.PureComponent),sne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.run.assigned_slots,n=e.color,r=e.location;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Yte,{slots:t,color:n}),Object(a.jsx)(cne,{slots:t,color:n,location:r})]})}}]),n}(p.PureComponent);function lne(){var e=Object(f.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: ",";\n"]);return lne=function(){return e},e}function une(){var e=Object(f.a)(["\n  overflow:auto;\n"]);return une=function(){return e},e}function dne(){var e=Object(f.a)(["\n  overflow:auto;\n"]);return dne=function(){return e},e}var pne=x.default.div(dne()),hne=x.default.div(une()),bne=x.default.div(lne(),y.red1),fne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).runsColor={},e.center=[-34.397,150.644],e.generateRunsColor=function(){var t,n,r=e.props.runs;e.runsColor={},null===r||void 0===r||null===(t=(n=r.filter((function(e){return e.assigned_slots.length>0}))).forEach)||void 0===t||t.call(n,(function(t){e.runsColor[t.id]=Xf()})),e.forceUpdate()},e.fitMapBounds=function(){var t=e.getAllMarkersFromRuns(e.props.runs);e.map&&(t.length>0?e.map.fitBounds(Object(Kte.featureGroup)(e.getAllMarkersFromRuns(e.props.runs)).getBounds(),{padding:[100,100],maxZoom:17}):e.map.setView(e.center,4))},e.getAllMarkersFromRuns=function(e){var t=[];return e.forEach((function(e){e.assigned_slots.forEach((function(e){var n,r,a=e.job_task;(null===(n=a.job)||void 0===n?void 0:n.site_address_lat)&&(null===(r=a.job)||void 0===r?void 0:r.site_address_lng)&&(t.push(Object(Kte.circleMarker)([a.job.site_address_lat,a.job.site_address_lng])),1===t.length&&t.push(Object(Kte.circleMarker)([a.job.site_address_lat+1e-9,a.job.site_address_lng+1e-9])))}))})),t},e.map=void 0,e.renderRunsColor=function(t){var n=e.props,r=n.runs;if(n.loadingRuns)return null;var o=r.filter((function(e){return e.assigned_slots.length>0}));return o.length?o.map((function(n,r){return Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{children:Object(a.jsx)(J3,{size:15,style:{position:"relative"},color:e.runsColor[n.id],name:Ef.PinMapFilled,fill:!0})}),t&&Object(a.jsx)("div",{className:"col text-break",children:n.name})]})},r)})):Object(a.jsx)(a.Fragment,{children:"No run found"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.generateRunsColor(),this.fitMapBounds()}},{key:"componentDidUpdate",value:function(e){e.runs!==this.props.runs&&this.generateRunsColor(),this.fitMapBounds()}},{key:"render",value:function(){var e=this,t=this.props,n=t.runs,r=t.loadingRuns,o=t.location;return Object(a.jsxs)(pne,{className:"d-flex h-100 w-100",children:[Object(a.jsx)(Im,{width:250,children:Object(a.jsx)(_.Consumer,{children:function(t){return Object(a.jsx)("div",{className:"p-4",children:e.renderRunsColor(t.isOpen)})}})}),Object(a.jsx)(hne,{className:"flex-grow-1 position-relative",children:Object(a.jsx)(bne,{children:Object(a.jsxs)(Wte.a,{center:this.center,maxZoom:17,zoom:4,whenCreated:function(t){e.map=t,e.fitMapBounds()},children:[Object(a.jsx)(Hte.a,{url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:""}),!j.a.isEmpty(this.runsColor)&&n.map((function(t){return Object(a.jsx)(sne,{run:t,color:e.runsColor[t.id],location:o},"run-".concat(t.id))}))]})})}),r&&Object(a.jsx)(av,{color:y.white,size:40,zIndex:999})]})}}]),n}(p.PureComponent);function mne(){var e=Object(f.a)(["\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding-right: 15px;\n  display: flex;\n  align-items: center;\n  color: ",";\n  height: 0px;\n"]);return mne=function(){return e},e}function jne(){var e=Object(f.a)(["\n  height: ","px;\n  border-right: 1px solid ",";\n  position: relative;\n"]);return jne=function(){return e},e}var vne,One=Object(x.default)(Kj(["height"])("div"))(jne(),(function(e){return e.height}),y.gray2),gne=x.default.div(mne(),y.gray5),xne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hours:[]},e.blockRenderer=function(t){var n=e.props,r=n.blockHeight,o=n.endHours;return Object(a.jsxs)(One,{height:r,children:[Object(a.jsx)(gne,{children:qf()().hours(t).format("ha")}),t+1===o&&Object(a.jsx)(gne,{style:{bottom:"0",top:"unset"},children:qf()().hours(o).format("ha")})]},t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.startHours,n=e.endHours,r=[],a=t;a<n;a++)r.push(a);this.setState({hours:r})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"w-100",children:this.state.hours.map((function(t){return e.blockRenderer(t)}))})}}]),n}(p.PureComponent);!function(e){e.TASK="task",e.RUN="run",e.RUN_HEAD="run_head",e.CREW="crew",e.VEHICLE="vehicle"}(vne||(vne={}));function yne(){var e=Object(f.a)(["\n  width: calc(100% - 5px);\n  min-height: 100%;\n  margin-left: 5px;\n  background: ",";\n  box-shadow:"," ;\n"]);return yne=function(){return e},e}function wne(){var e=Object(f.a)(["\n  position: absolute;\n  right: 0px;\n  top: 5px;\n  z-index: 5;\n  cursor: pointer;\n"]);return wne=function(){return e},e}function _ne(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  opacity: ",";\n"]);return _ne=function(){return e},e}function kne(){var e=Object(f.a)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  width: ","px;\n  color: ",";\n  box-shadow: 4px 0 0 "," inset;\n  height: ","px;\n  font-size: 0.72em;\n  ","\n"]);return kne=function(){return e},e}var Sne=x.default.div(kne(),(function(e){return e.top}),(function(e){return e.isHovered?0:e.left}),(function(e){return e.isHovered?Lre.blockWidth-15:e.width}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.height||0}),(function(e){return e.isHovered&&"z-index: 100;"})),Cne=Object(x.default)(Kj(["color"])("div"))(_ne(),(function(e){return e.color}),(function(e){return e.isHovered?.5:.1})),Nne=x.default.div(wne()),Ene=BS.ColoredDiv,Ane=Object(x.default)(Kj(["showWhite"])(Ene))(yne(),(function(e){return e.showWhite?"".concat(y.white):"transparent"}),(function(e){return e.isHovered?"0px 1px 3px ".concat(e.color):"0px 0px 2px ".concat(e.color)})),Tne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={top:0,left:0,width:Lre.blockWidth-15,height:0,isHovered:!!e.props.selected,showModal:!1,isVeryShort:!1},e.calculateTaskState=function(){var t=e.props,n=t.slot,r=t.startHours,a=t.endHours,o=t.count,i=t.position,c=t.overlap,s=t.overlappingCount,l=qf()(n.starts_at),u=qf()(n.ends_at),d=qf()().hours(r).minutes(0).unix(),p=qf()().hours(a).minutes(0).unix()-d,h=qf()().hours(l.hours()).minutes(l.minutes()).unix(),b=qf()().hours(u.hours()).minutes(u.minutes()).unix(),f=(h-d)*((a-r)*Lre.blockHeight)/p,m=(b-h)*((a-r)*Lre.blockHeight)/p,j=s>0?(Lre.blockWidth-15)/s*c:0;e.setState({top:f,left:(Lre.blockWidth-15-j)/o*(i-1)+j,width:(Lre.blockWidth-15-j)/o,height:m})},e.setIsHoveredTimer=null,e.removeTaskFromRun=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.task,o=n.slot,i=n.dispatch,n.loadRuns,c=n.run,t.next=3,i(Sw("Confirm","Remove Task From Run",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove task ",Object(a.jsx)("strong",{children:r.type.name})," from run ",Object(a.jsx)("strong",{children:c.name}),"?"]})));case 3:if(!t.sent){t.next=8;break}return t.next=7,pJ.removeTaskSlotFromRun(c.id,r.id,o.id);case 7:uy.emit(Kg.TaskWasRemovedFromRun);case 8:case"end":return t.stop()}}),t)}))),e.menuItems=function(){return[{name:"Edit",onClick:function(){var t=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.setShowModal=!0);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{type:"divider"},{name:"Remove",onClick:e.removeTaskFromRun}]},e.onSave=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.task,o=r.slot,i=r.loadRuns,c=r.run,r.location,!n){t.next=19;break}if(t.prev=2,s={is_confirmed:!!n.is_confirmed,scheduling_note:n.scheduling_note,starts_at:Wj(n.starts_at,!0),ends_at:Wj(n.ends_at,!0)},!o){t.next=9;break}return t.next=7,pJ.updateTaskSlotToRun(c.id,o.id,s);case 7:t.next=11;break;case 9:return t.next=11,pJ.addTaskSlotToRun(c.id,a.id,s);case 11:i(),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(2),!1;case 17:t.next=20;break;case 19:throw!1;case 20:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),e.refOuter=p.createRef(),e.refInner=p.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.calculateTaskState()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.slot,r=t.count,a=t.position,o=t.overlap;(e&&n.starts_at!==e.slot.starts_at||n.ends_at!==e.slot.ends_at||r!==e.count||a!==e.position||o!==e.overlap)&&this.calculateTaskState(),this.refInner.current&&this.refOuter.current&&this.setState({isVeryShort:this.refInner.current.clientHeight>this.refOuter.current.clientHeight})}},{key:"render",value:function(){var e=this,t=this.props,n=t.task,r=t.slot,o=t.run,i=(t.location,t.count),c=t.overlap,s=this.state,l=s.top,u=s.left,d=s.isHovered,p=s.width,h=s.height,b=s.showModal,f=(s.isVeryShort,n.type.color?tm(n.type.color):y.gray5),m=(r.assigned_teams||[]).map((function(e){return e.name})).concat(r.assigned_users.map((function(e){return e.full_name})));return Object(a.jsx)(Cw.Consumer,{children:function(t){var s=t.has(Dw.OPERATIONS_RUNS_MANAGE)&&t.has(Dw.JOBS_TASK_MANAGE);return Object(a.jsxs)(a.Fragment,{children:[b&&Object(a.jsx)(Iz,{edit:!0,locationId:o.location_id,taskTypes:[n.type],onSave:e.onSave,isOpen:b,task:_z(n),isSchedulingActive:!0,doAssign:!0,doSave:!0,assignStaffDate:o.date,onClose:function(){return e.setShowModal=!1},addTaskToRunConfig:{runId:o.id,date:qf()(o.date),task:n,assigned_slot:r}}),Object(a.jsxs)(Sne,{ref:e.refOuter,isHovered:d,top:l,left:u,width:p,height:h,color:f,onMouseOver:i>1||c>0?void 0:function(){return e.setIsHovered=!0},onMouseLeave:function(){return e.setIsHovered=!1},onClick:1===i&&0===c?void 0:function(){return e.setIsHovered=!e.state.isHovered},children:[s&&d&&Object(a.jsx)(Nne,{children:Object(a.jsx)(yw,{noMargin:!0,trigger:function(){return Object(a.jsx)(J3,{color:f,name:Ef.MenuVertical,size:18})},items:e.menuItems()})}),Object(a.jsxs)(Ane,{className:"".concat(d?"h-auto":"h-100"),showWhite:!0,isHovered:d,color:f,overflow:"hidden",children:[Object(a.jsx)(Cne,{color:f}),Object(a.jsxs)(Ene,{padding:"5px",className:"zindex-dropdown",ref:e.refInner,children:[Object(a.jsxs)(Ene,{weight:Bf.bold,children:[qf()(r.starts_at).format("hh:mma")," ","-"," ",qf()(r.ends_at).format("hh:mma")]}),Object(a.jsxs)("div",{className:"text-truncate",children:[Object(a.jsx)("span",{className:"mr-1",children:"Attendance:"}),r.is_confirmed?Object(a.jsx)(J3,{name:Ef.TickCircle,size:14,color:"green",fill:!0,title:"Confirmed"}):Object(a.jsx)(J3,{name:Ef.CrossCircle,size:14,color:"red",fill:!0,title:"Not confirmed"})]}),n.job&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["#",n.job.id]}),n.job.site_address&&n.job.site_address.full_address&&Object(a.jsx)("div",{children:n.job.site_address.full_address})]}),Object(a.jsx)("div",{children:n.name||n.type.name}),m.length>0&&Object(a.jsxs)(Ene,{margin:"7px 0 0 0",className:"d-flex",children:[Object(a.jsx)(Ene,{margin:"0 5px 0 0",className:"flex-shrink-0",children:Object(a.jsx)(J3,{color:f,name:Ef.People,size:12})}),Object(a.jsx)("div",{className:"flex-grow-1",children:m.join(", ")})]}),r.scheduling_note&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"mt-1",children:Object(a.jsx)("strong",{children:"Crew Notes:"})}),Object(a.jsx)("div",{children:r.scheduling_note})]})]})]})]})]})}})}},{key:"setIsHovered",set:function(e){var t,n,r=this;(clearTimeout(this.setIsHoveredTimer),e&&this.props.count>1)?this.setIsHoveredTimer=setTimeout((function(){var t,n;r.setState({isHovered:e}),null===(t=(n=r.props).onSelect)||void 0===t||t.call(n,e)}),0):(this.setState({isHovered:e}),null===(t=(n=this.props).onSelect)||void 0===t||t.call(n,e))}},{key:"setShowModal",set:function(e){this.setState({showModal:e})}}]),n}(p.PureComponent),Ine=Object(LO.compose)(Object(b.b)())(Tne),Rne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.connectDragSource;return Object(a.jsx)(Cw.Consumer,{children:function(n){return n.has(Dw.OPERATIONS_RUNS_MANAGE)&&t(Object(a.jsx)("div",{className:"scheduled-task-drag-wrapper",children:Object(a.jsx)(Ine,Object(c.a)({},e.props))}))}})}}]),n}(p.PureComponent),Dne={canDrag:function(e){return!!e.selected},beginDrag:function(e){var t=e.task,n=e.slot;return Object(c.a)(Object(c.a)({},t),{},{assigned_slot:n})}},Mne=Object(Jte.DragSource)(vne.TASK,Dne,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Rne),Pne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selected:!1},e.onSelect=function(t){e.setState({selected:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.slot,t=this.state.selected,n=e.job_task,r=Object(Rm.a)(e,["job_task"]);return Object(a.jsx)(Mne,Object(c.a)(Object(c.a)({},this.props),{},{task:n,slot:r,selected:t,onSelect:this.onSelect}),e.id)}}]),n}(p.PureComponent);function Lne(){var e=Object(f.a)(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n"]);return Lne=function(){return e},e}var Fne=Object(x.default)(Kj(["dragEntered"])("div"))(Lne(),(function(e){return e.dragEntered?y.blue0:"transparent"})),Une=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOver;return(0,e.connectDropTarget)(Object(a.jsx)("div",{className:"w-100 h-100",children:Object(a.jsx)(Fne,{dragEntered:t})}))}}]),n}(p.PureComponent),Vne={drop:function(e,t){var n=e.openModal,r=e.run,a=e.hour,o=t.getItem(),i=o.assigned_slot,s=Object(Rm.a)(o,["assigned_slot"]);return n({runId:r.id,task:Object(c.a)({},s),assigned_slot:i,startHour:a,date:qf()(r.date)}),s}},Bne=Object(Jte.DropTarget)(vne.TASK,Vne,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}))(Une);function Jne(){var e=Object(f.a)(["\n  height: ","px;\n  width: ","px;\n  border-bottom: 1px solid ",";\n\n  &:last-child {\n    border-bottom: 0;\n  }\n"]);return Jne=function(){return e},e}function zne(){var e=Object(f.a)(["\n  width: ","px;\n  border-right: 1px solid ",";\n  position: relative;\n  box-sizing: unset;\n  border-bottom: 1px solid ",";\n\n  &:last-child {\n    border-right: 1px solid ",";\n  }\n"]);return zne=function(){return e},e}var qne=Object(x.default)(Kj(["width"])("div"))(zne(),(function(e){return e.width}),y.gray1,y.gray2,y.gray2),Wne=Object(x.default)(Kj(["height","width"])("div"))(Jne(),(function(e){return e.height}),(function(e){return e.width}),y.gray1),Hne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hours:[],dragEntered:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.startHours,n=e.endHours,r=[],a=t;a<n;a++)r.push(a);this.setState({hours:r})}},{key:"render",value:function(){var e=this.props,t=e.blockHeight,n=e.blockWidth,r=e.newRun,o=e.run,i=e.openModal,c=e.loadRuns,s=e.location,l=e.startHours,u=e.endHours,d=this.state.hours,p=(j.a.groupBy(null===o||void 0===o?void 0:o.assigned_slots,(function(e){return qf()(e.starts_at).format("H")})),j.a.reduce(null===o||void 0===o?void 0:o.assigned_slots,(function(e,t){var n=Number(qf()(t.starts_at).format("H")),r=Number(qf()(t.ends_at).format("H")),a=Number(qf()(t.ends_at).format("mm"));e[n]||(e[n]={value:0,count:0,overlap:0,overlappingCount:0,nodes:[]}),++e[n].value,++e[n].count;for(var o=n+1;o<=r;o++)(o<r||a>0)&&e[n].nodes.push(o);return e}),{}));j.a.forEach(p,(function(e,t){j.a.forEach(e.nodes,(function(t){p[t]&&(e.count<p[t].value+e.value&&(e.count=p[t].value+e.value),p[t].overlappingCount<e.count&&(p[t].overlappingCount=e.count),p[t].overlap+=1,p[t].overlap,e.value)}))}));var h={};return Object(a.jsx)(Cw.Consumer,{children:function(e){var b,f;return Object(a.jsxs)(qne,{width:n,children:[(null===o||void 0===o?void 0:o.assigned_slots)?null===(b=o.assigned_slots)||void 0===b||null===(f=b.sort((function(e,t){var n=qf()(e.ends_at).diff(qf()(e.starts_at)),r=qf()(t.ends_at).diff(qf()(t.starts_at));return n>r?-1:n<r?1:0})))||void 0===f?void 0:f.map((function(e){var t=qf()(e.starts_at).format("H");return h[t]||(h[t]=0),++h[t],Object(a.jsx)(Pne,{slot:e,run:o,count:p[t].count,position:h[t],overlap:p[t].overlap||0,overlappingCount:p[t].overlappingCount||0,loadRuns:c,location:s,startHours:l,endHours:u},e.id)})):null,d.map((function(c){return Object(a.jsx)(Wne,{height:t,width:n,children:e.has(Dw.OPERATIONS_RUNS_MANAGE)&&!r&&Object(a.jsx)(Bne,{openModal:i,run:o,hour:c})},c)}))]})}})}}]),n}(p.PureComponent),Gne="RunSettingsDetailsForm",Yne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(a.jsx)("form",{autoComplete:"off",onSubmit:e,children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"name",label:"Run Name",validate:uv,component:ZO})})})})}}]),n}(p.PureComponent),Qne=Object(Gj.a)({form:Gne,enableReinitialize:!0})(Yne);function Kne(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return Kne=function(){return e},e}var Zne=x.default.div(Kne()),Xne="RunSettingsStaffForm",$ne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",selectedUsers:[]},e.debouncedSearch=Object(m.debounce)(e.props.searchStaff.fetch,500),e.onSearchValueChange=function(t){var n=e.props.run;e.setState({search:t}),t?e.debouncedSearch({location_id:n.location_id,name:t,date:n.date}):e.debouncedSearch.cancel()},e.isUserSelected=function(t){return e.state.selectedUsers.map((function(e){return e.id})).includes(t)},e.onUserClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!e.isUserSelected(n.id)){t.next=8;break}return t.next=4,r(Sw("Confirm","Remove User",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",Object(a.jsx)("strong",{children:n.full_name})," from this run?"]})));case 4:t.sent&&e.setState({selectedUsers:e.state.selectedUsers.filter((function(e){return e.id!==n.id}))}),t.next=9;break;case 8:e.setState({selectedUsers:e.state.selectedUsers.concat(n)});case 9:setTimeout((function(){return e.props.change("selectedUsers",e.state.selectedUsers)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderAssignee=function(t){return Object(a.jsx)(WJ,{onClick:function(){return e.onUserClick(t)},selected:e.isUserSelected(t.id),assignee:t,children:!!t.working_hours_per_week&&t.date_hours>=t.working_hours_per_week/5&&"Booked"},"".concat(t.id,"-user"))},e.getOrderedAssignedStaff=function(){var t=e.state.selectedUsers;return Object(m.orderBy)(t,[function(e){return Yf(e).name}],["asc"])},e.getOrderedSearchStaff=function(){var t=e.props.searchStaff.data;return Object(m.orderBy)(t||[],[function(e){return Yf(e).name}],["asc"])},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.run,n=e.change;this.setState({selectedUsers:t.assigned_users||[]}),n("selectedUsers",t.assigned_users||[])}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.searchStaff,o=this.state.search;return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:n,children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(ES,{loading:r.loading,placeholder:"Search...",searchIcon:!0,mode:"typeGray",onSearchValueChange:this.onSearchValueChange})})}),Object(a.jsxs)(Zne,{children:[!o&&this.getOrderedAssignedStaff().map((function(t){return e.renderAssignee(t)})),o&&this.getOrderedSearchStaff().map((function(t){return e.renderAssignee(t)}))]})]})}}]),n}(p.PureComponent),ere=Object(LO.compose)(Object(Gj.a)({form:Xne,enableReinitialize:!0}),Mm({searchStaff:{fetch:pz.searchStaff}}))($ne);function tre(){var e=Object(f.a)(["\n  margin: 0 5px 0 15px;\n  cursor: pointer;\n"]);return tre=function(){return e},e}function nre(){var e=Object(f.a)(["\n  min-height: 60px;\n  position: relative;\n"]);return nre=function(){return e},e}var rre=x.default.div(nre()),are=Object(x.default)(Ff)(tre()),ore="RunSettingsVehiclesForm",ire=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",selectedVehicles:[]},e.isVehicleSelected=function(t){return e.state.selectedVehicles.map((function(e){return e.id})).includes(t)},e.onVehicleClick=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!e.isVehicleSelected(n.id)){t.next=8;break}return t.next=4,r(Sw("Confirm","Remove Vehicle",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",Object(a.jsx)("strong",{children:n.registration})," from this run?"]})));case 4:t.sent&&(n.is_booked=!1,e.setState({selectedVehicles:e.state.selectedVehicles.filter((function(e){return e.id!==n.id}))})),t.next=9;break;case 8:e.setState({selectedVehicles:e.state.selectedVehicles.concat(n)});case 9:setTimeout((function(){return e.props.change("selectedVehicles",e.state.selectedVehicles)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderVehicle=function(t){var n=e.isVehicleSelected(t.id);return Object(a.jsxs)(qJ,{selected:n,children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(FS,{weight:Bf.bold,children:t.registration}),Object(a.jsxs)(FS,{color:y.gray4,margin:"0 10px",children:[t.make," ",t.model]}),t.rent_starts_at&&Object(a.jsx)(NC,{tag:{name:"RENTAL",color:y.purple1},mode:"outlined"})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(FS,{color:y.gray5,textTransform:"uppercase",lineHeight:"20px",children:t.type}),!n&&t.is_booked?Object(a.jsx)("span",{className:"badge badge-info ml-2",children:"Booked"}):Object(a.jsx)(are,{name:n?Ef.Trash:Ef.Add,onClick:function(){return e.onVehicleClick(t)}})]})]},"".concat(t.id,"-vehicle"))},e.getOrderedVehicles=function(){var t=e.props.locationVehicles.data;return j.a.orderBy(j.a.filter(t||[],(function(e){var t,n;return!(null===e||void 0===e||null===(t=e.latest_status)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.makes_vehicle_unavailable)})),["registration"],["asc"])},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.run,n=e.date,r=e.change,a=e.locationVehicles,o=e.vehicles,i=j.a.filter(t.assigned_vehicles||[],(function(e){var t,n;return!(null===e||void 0===e||null===(t=e.latest_status)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.makes_vehicle_unavailable)}));this.setState({selectedVehicles:i}),r("selectedVehicles",i),o?a.data=o:a.fetch(t.location_id,qj(n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.locationVehicles,o=this.getOrderedVehicles();return Object(a.jsx)("form",{autoComplete:"off",onSubmit:n,children:Object(a.jsxs)(rre,{children:[r.loading&&Object(a.jsx)(av,{size:40,color:y.white}),o.length>0?o.map((function(t){return e.renderVehicle(t)})):"No available vehicles"]})})}}]),n}(p.PureComponent),cre=Object(LO.compose)(Object(Gj.a)({form:ore,enableReinitialize:!0}),Mm({locationVehicles:{fetch:Q5.searchVehicles}}))(ire),sre="RunCloneForm",lre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t=e.props,n=t.change,r=t.run;n("run",r),n("starts_at",qf()(r.date).add(1,"day")),n("ends_at",qf()(r.date).add(1,"day"))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(a.jsx)("form",{autoComplete:"off",onSubmit:e,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"starts_at",label:"From Date *",validate:uv,component:Cy,futureEnabled:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"ends_at",label:"To Date",validate:uv,component:Cy,futureEnabled:!0})})]})})}}]),n}(p.PureComponent),ure=sv({},(function(e,t){return e.starts_at&&e.ends_at&&e.ends_at<e.starts_at&&(t.ends_at="To date cannot be before from date"),t})),dre=Object(Gj.a)({form:sre,validate:ure})(lre),pre=function(e){return{starts_at:Wj(e.starts_at),ends_at:e.ends_at?Wj(e.ends_at):void 0,run_id:e.run.id}};function hre(){var e=Object(f.a)(["\n  padding: 0 ","px;\n  height: 60px;\n  margin: -30px -","px 30px;\n  border-bottom: 1px solid ",";\n  display: flex;\n"]);return hre=function(){return e},e}var bre,fre=x.default.div(hre(),OO,OO,y.gray2);!function(e){e[e.Details=0]="Details",e[e.Staff=1]="Staff",e[e.Vehicles=2]="Vehicles"}(bre||(bre={}));var mre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,activeTabId:e.props.startOpenTabId||bre.Details,detailsValues:{},staffValues:{},vehiclesValues:{},cloneValues:{},clone:!1},e.tabs=[{name:"Details",id:bre.Details,onClick:function(){return e.setState({activeTabId:bre.Details})}},{name:"Staff",id:bre.Staff,onClick:function(){return e.setState({activeTabId:bre.Staff})}},{name:"Vehicles",id:bre.Vehicles,onClick:function(){return e.setState({activeTabId:bre.Vehicles})}}],e.onCloneSubmit=function(t){e.setState({cloneValues:pre(t)})},e.onDetailsSubmit=function(t){e.setState({detailsValues:t})},e.onStaffSubmit=function(t){e.setState({staffValues:t})},e.onVehiclesSubmit=function(t){e.setState({vehiclesValues:t})},e.removeRun=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.run,o=n.dispatch,i=n.afterSubmit,c=n.onClose,!r){t.next=20;break}if(!(r.id<1)){t.next=7;break}uy.emit(Kg.EmptyRunRemoved,r),c(),t.next=20;break;case 7:return t.next=9,o(Sw("Confirm","Delete Run!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete run ",Object(a.jsx)("strong",{children:r.name}),"?"]})));case 9:if(!t.sent){t.next=20;break}return e.setState({loading:!0}),t.prev=12,t.next=15,pz.removeRun(r.id);case 15:null===i||void 0===i||i(),setTimeout((function(){c()}));case 17:return t.prev=17,e.setState({loading:!1}),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[12,,17,20]])}))),e.cloneRun=function(){e.setState({clone:!0})},e.saveClone=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,o=n.run,e.setState({loading:!0}),t.prev=2,t.next=5,r(Object(xv.c)(sre));case 5:if(!e.props.validCloneDetails){t.next=27;break}return i=!1,t.prev=7,t.next=10,pz.cloneRun(o.id,e.state.cloneValues,{check_unique_run:1});case 10:Qm(Vm.Info,Object(a.jsxs)(a.Fragment,{children:["Run ",Object(a.jsx)("strong",{children:o.name})," has been cloned"]})),i=!0,t.next=25;break;case 14:if(t.prev=14,t.t0=t.catch(7),405!==(null===t.t0||void 0===t.t0?void 0:t.t0.status_code)){t.next=25;break}return t.next=19,r(Sw("Confirm","Clone Run!",Object(a.jsx)(a.Fragment,{children:"The same run already exists in specified date range. Do you want to proceed?"})));case 19:if(!t.sent){t.next=25;break}return t.next=23,pz.cloneRun(o.id,e.state.cloneValues);case 23:Qm(Vm.Info,Object(a.jsxs)(a.Fragment,{children:["Run ",Object(a.jsx)("strong",{children:o.name})," has been cloned"]})),i=!0;case 25:i&&uy.emit(Kg.TaskWasAddedToRun),e.setState({clone:!1});case 27:return t.prev=27,e.setState({loading:!1}),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,,27,30],[7,14]])}))),e.onClose=function(t){if(e.state.clone)e.setState({clone:!1});else{var n=e.props.run;0===n.id&&uy.emit(Kg.EmptyRunRemoved,n),e.props.onClose()}},e.renderBody=function(){var t=e.props,n=t.run,r=t.date,o=e.state,i=o.activeTabId;return o.clone?Object(a.jsx)(dre,{run:n,onSubmit:e.onCloneSubmit}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(fre,{children:Object(a.jsx)(yz,{selectedTabId:i,items:e.tabs})}),Object(a.jsxs)("div",{style:{display:i===bre.Details?"block":"none"},children:[Object(a.jsx)(Qne,{onSubmit:e.onDetailsSubmit,initialValues:{name:n.name}}),n.id>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"d-inline-block",children:Object(a.jsx)(FS,{children:Object(a.jsx)(PS,{color:y.red1,colorOnHover:y.red1,onClick:e.removeRun,children:"Delete Run"})})}),Object(a.jsx)("div",{className:"d-inline-block ml-5",children:Object(a.jsx)(FS,{margin:"10px 0 0 0",children:Object(a.jsx)(PS,{color:y.blue1,colorOnHover:y.blue1,onClick:e.cloneRun,children:"Clone Run"})})})]})]}),Object(a.jsx)("div",{style:{display:i===bre.Staff?"block":"none"},children:Object(a.jsx)(ere,{onSubmit:e.onStaffSubmit,run:n})}),Object(a.jsx)("div",{style:{display:i===bre.Vehicles?"block":"none"},children:Object(a.jsx)(cre,{run:n,date:r,onSubmit:e.onVehiclesSubmit})})]})},e.submitCombine=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,s,l,u,d,p;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,a=n.onClose,o=n.run,i=n.afterSubmit,e.setState({loading:!0}),t.next=4,r(Object(xv.c)(Gne));case 4:return t.next=6,r(Object(xv.c)(Xne));case 6:return t.next=8,r(Object(xv.c)(ore));case 8:s=e.state,l=s.detailsValues,u=s.staffValues,d=s.vehiclesValues,uy.emit(Kg.CreateRunsFromTemplate,o.id>0?Object(c.a)({},o):Object(c.a)(Object(c.a)({},o),{},{name:l.name})),p=uy.listen(Kg.RunsCreatedFromTemplate,function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.stopListening(),t.prev=1,!n){t.next=8;break}return e.props.run.id=n.id,t.next=6,Promise.all([n.name!==l.name?pz.updateRun(n.id,l):Promise.resolve(n),e.onAssignUsers(u),e.onAssignVehicles(d)]);case 6:i&&i(),a();case 8:return t.prev=8,e.setState({loading:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])})));return function(e){return t.apply(this,arguments)}}());case 11:case"end":return t.stop()}}),t)}))),e.onAssignUsers=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.run,r.dispatch,i=(o.assigned_users||[]).map((function(e){return e.id})),c=(n.selectedUsers||[]).map((function(e){return e.id})),s=Object(m.intersection)(i,c),l=Object(m.difference)(c,s),u=Object(m.difference)(i,s),d=[],t.next=9,Promise.all(l.map((function(e){return pz.assignStaffToRun(o.id,e,{assign_user:1}).catch((function(t){405===t.status_code&&d.push(n.selectedUsers.find((function(t){return t.id===e})))}))})));case 9:return t.next=11,Promise.all(u.map((function(e){return pz.removeStaffFromRun(o.id,e)})));case 11:if(!d.length){t.next=18;break}return t.next=14,e.props.dispatch(Sw("Confirm","Assign Staff to Run",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:[1===d.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:d[0].full_name})," is"]}):Object(a.jsx)(a.Fragment,{children:"Following staff members are"})," already assigned to another run."]}),d.length>1&&Object(a.jsx)("p",{children:d.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:e.user.full_name})})}))}),Object(a.jsx)("p",{children:"Are you sure you want to assign them to this run?"})]})));case 14:if(!t.sent){t.next=18;break}return t.next=18,Promise.all(d.map((function(e){return pz.assignStaffToRun(o.id,e.id)})));case 18:uy.emit(Kg.StaffAssignedToTask);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAssignVehicles=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.run,a=(r.assigned_vehicles||[]).map((function(e){return e.id})),o=(n.selectedVehicles||[]).map((function(e){return e.id})),i=Object(m.intersection)(a,o),c=Object(m.difference)(o,i),s=Object(m.difference)(a,i),t.next=8,Promise.all([Promise.all(c.map((function(e){return pz.assignVehicleToRun(r.id,e)}))),Promise.all(s.map((function(e){return pz.removeVehicleFromRun(r.id,e)})))]);case 8:uy.emit(Kg.VehicleAssignedToTask);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderFooter=function(){var t=e.props.validFormDetails,n=e.state.clone,r=!n&&!t;return Object(a.jsx)(Cg,{className:"btn",disabled:r,onClick:n?e.saveClone:e.submitCombine,children:"Save"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.run,o=this.state,i=o.loading,c=o.clone;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:this.onClose,loading:i,title:c?"Clone Run ("+r.name+")":n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),jre=Object(LO.compose)(Object(b.b)((function(e){return{validFormDetails:Object(GA.a)(Gne)(e),validCloneDetails:Object(GA.a)(sre)(e)}})))(mre);function vre(){var e=Object(f.a)(["\n  position: absolute;\n  bottom: 7px;\n  right: 7px;\n  background: ",";\n"]);return vre=function(){return e},e}function Ore(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return Ore=function(){return e},e}function gre(){var e=Object(f.a)(["\n  position: absolute;\n  bottom: 5px;\n  left: 7px;\n  opacity: ","\n"]);return gre=function(){return e},e}function xre(){var e=Object(f.a)(["\n  width: ","px;\n  min-width: ","px;\n  height: 100%;\n  border-bottom: 1px solid ",";\n  position: relative;\n  box-sizing: unset;\n  padding-left: 1px;\n  background: ",";\n"]);return xre=function(){return e},e}var yre=Object(x.default)(Kj(["width","dragEntered"])("div"))(xre(),(function(e){return e.width}),(function(e){return e.width}),y.gray2,(function(e){return e.dragEntered?y.blue0:"transparent"})),wre=x.default.div(gre(),(function(e){return!e.run||e.run.id>0?1:.3})),_re=x.default.div(Ore(),Bf.bold),kre=x.default.div(vre(),y.white),Sre=BS.Link,Cre=BS.ColoredDiv,Nre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isHovered:!1,showModal:!1,loading:!1,startOpenTabId:void 0},e.openModal=function(t){e.setState({showModal:!0,startOpenTabId:t})},e.closeModal=function(){e.setState({showModal:!1,startOpenTabId:void 0})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Jf.a.rebuild(),this.props.run&&this.props.run===n.newRun&&this.openModal()}},{key:"componentDidUpdate",value:function(){Jf.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.props,r=t.blockWidth,o=t.newRun,i=t.createNewRun,c=t.run,s=t.connectDropTarget,l=t.isOver,u=t.loadRuns,d=t.date,p=this.state,h=p.isHovered,b=p.showModal,f=p.loading,m=p.startOpenTabId,v=c?c.assigned_users:[],O=c?j.a.filter(c.assigned_vehicles,(function(e){var t,n;return!(null===e||void 0===e||null===(t=e.latest_status)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.makes_vehicle_unavailable)})):[],g=v.map((function(e){return Yf(e)})),x=g.filter((function(e,t){return t>1})),w=O.map((function(e){return e.registration})),_=w.filter((function(e,t){return t>0}));return Object(a.jsx)(Cw.Consumer,{children:function(t){var p=t.has(Dw.OPERATIONS_RUNS_MANAGE);return s(Object(a.jsxs)("div",{className:"h-100 position-relative",children:[f&&Object(a.jsx)(av,{size:30,color:y.white}),c&&b&&Object(a.jsx)(jre,{afterSubmit:u,isOpen:b,startOpenTabId:m,onClose:e.closeModal,run:c,date:d,title:"Run Settings (".concat(c.name,")")}),Object(a.jsxs)(yre,{width:r,dragEntered:l&&!o,onMouseOver:function(){return e.setIsHovered=!0},onMouseLeave:function(){return e.setIsHovered=!1},children:[p&&h&&!o&&Object(a.jsx)(kre,{children:Object(a.jsx)(Cre,{margin:"5px 0 0 0",style:{cursor:"pointer"},children:Object(a.jsx)(J3,{color:y.gray4,name:Ef.CogWheel,size:16,hoverColor:y.blue4,onClick:function(){return e.openModal()}})})}),Object(a.jsxs)(wre,{run:c,children:[c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(_re,{children:c.name}),v.length>0||O.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Cre,{color:y.gray4,children:Object(a.jsxs)("div",{style:{width:"fit-content"},"data-tip":$te.a.renderToStaticMarkup(Object(a.jsx)(a.Fragment,{children:w.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))})),"data-for":qre,children:[w.filter((function(e,t){return t<1})).join(", "),_.length>0&&" + ".concat(_.length)]})}),Object(a.jsx)(Cre,{color:y.gray4,children:Object(a.jsxs)("div",{style:{width:"fit-content"},"data-tip":$te.a.renderToStaticMarkup(Object(a.jsx)(a.Fragment,{children:g.map((function(e,t){return Object(a.jsx)("div",{children:e.name},t)}))})),"data-for":qre,children:[g.filter((function(e,t){return t<2})).map((function(e){return e.initials})).join(", "),x.length>0&&" + ".concat(x.length)]})})]}):p&&Object(a.jsxs)(Cre,{color:y.blue4,className:"d-flex align-items-center",children:["Add\xa0",Object(a.jsx)(Sre,{fontSize:Vf.normal,onClick:function(){return e.openModal(bre.Staff)},children:"crew"}),"\xa0/\xa0",Object(a.jsx)(Sre,{fontSize:Vf.normal,onClick:function(){return e.openModal(bre.Vehicles)},children:"vehicle"})]})]}),p&&o&&Object(a.jsx)(Sre,{fontSize:Vf.normal,onClick:Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.next=3,i();case 3:n.newRun=e.sent;case 4:case"end":return e.stop()}}),e)}))),children:"Add run"})]})]})]}))}})}},{key:"setIsHovered",set:function(e){this.setState({isHovered:e})}}]),n}(p.PureComponent);Nre.newRun=null;var Ere={canDrop:function(e){return!e.newRun},drop:function(e,t,n){var r=e.run,a=e.loadRuns,o={item:t.getItem(),type:t.getItemType()};return function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loading:!0}),uy.emit(Kg.CreateRunsFromTemplate,r),t=uy.listen(Kg.RunsCreatedFromTemplate,function(){var e=Object(Um.a)(Fm.a.mark((function e(r){var i;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopListening(),e.prev=1,!r){e.next=17;break}e.t0=o.type,e.next=e.t0===vne.CREW?6:e.t0===vne.VEHICLE?12:16;break;case 6:return i=o.item,e.next=9,pz.assignStaffToRun(r.id,i.id);case 9:return i.working_hours_per_week&&i.date_hours>=i.working_hours_per_week/5&&Qm(Vm.Warning,"".concat(Yf(i).name," is already booked")),uy.emit(Kg.StaffAssignedToTask),e.abrupt("break",16);case 12:return e.next=14,pz.assignVehicleToRun(r.id,o.item.id);case 14:return uy.emit(Kg.VehicleAssignedToTask),e.abrupt("break",16);case 16:a();case 17:return e.prev=17,n.setState({loading:!1}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,,17,20]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),o}},Are=Object(LO.compose)(Object(b.b)(),Object(Jte.DropTarget)([vne.CREW,vne.VEHICLE],Ere,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})))(Nre);function Tre(){var e=Object(f.a)(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  z-index: 103;\n  left: 0;\n  top: 0;\n\n  &:before {\n    content: '';\n    position: absolute;\n    width: 1px;\n    height: 100%;\n    background: ",";\n    right: 0;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: calc(100% - 10px);\n    background: ",";\n  }\n"]);return Tre=function(){return e},e}function Ire(){var e=Object(f.a)(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  background: ",";\n  z-index: 11;\n  left: 0;\n  top: 0;\n"]);return Ire=function(){return e},e}function Rre(){var e=Object(f.a)(["\n  position: sticky;\n  width: ","px;\n  padding-bottom: ","px;\n  background: ",";\n  z-index: 102;\n  left: 0;\n"]);return Rre=function(){return e},e}function Dre(){var e=Object(f.a)(["\n  position: sticky;\n  margin-left: ","px;\n  padding-right: ","px;\n  height: ","px;\n  background: ",";\n  display: flex;\n  z-index: 102;\n  top: 0;\n  width: max-content;\n"]);return Dre=function(){return e},e}function Mre(){var e=Object(f.a)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  display: flex;\n"]);return Mre=function(){return e},e}function Pre(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return Pre=function(){return e},e}var Lre={startHours:7,endHours:21,blockHeight:100,blockWidth:170,panelsOffsetTop:120,panelsOffsetLeft:100},Fre=x.default.div(Pre()),Ure=x.default.div(Mre(),Lre.panelsOffsetTop,Lre.panelsOffsetLeft),Vre=x.default.div(Dre(),Lre.panelsOffsetLeft,Lre.panelsOffsetLeft,Lre.panelsOffsetTop,y.white),Bre=x.default.div(Rre(),Lre.panelsOffsetLeft,Lre.panelsOffsetTop,y.white),Jre=x.default.div(Ire(),Lre.panelsOffsetTop,Lre.panelsOffsetLeft,y.white),zre=x.default.div(Tre(),Lre.panelsOffsetTop,Lre.panelsOffsetLeft,y.white,y.white),qre="header-tooltip",Wre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.runs,n=e.createNewRun,r=e.openModal,o=e.loadRuns,i=e.location,c=e.date,s=j()(t).map("assigned_slots").compact().flatten().value(),l=j.a.minBy(s,(function(e){return qf()(e.starts_at)})),u=j.a.maxBy(s,(function(e){return qf()(e.ends_at)})),d=l?Math.min(Lre.startHours,qf()(l.starts_at).hours()):Lre.startHours,p=u?Math.max(Lre.endHours,qf()(u.ends_at).hours()):Lre.endHours;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:qre,place:"bottom",effect:"solid",html:!0}),Object(a.jsx)(Jre,{}),Object(a.jsx)(zre,{}),Object(a.jsxs)(Fre,{className:"h-100 position-relative",children:[Object(a.jsxs)(Vre,{children:[t.map((function(e){return Object(a.jsx)(Are,{blockWidth:Lre.blockWidth,run:e,date:c,loadRuns:o},e.id)})),Object(a.jsx)(Are,{blockWidth:Lre.blockWidth,newRun:!0,createNewRun:n})]}),Object(a.jsx)(Bre,{children:Object(a.jsx)(xne,{startHours:d,endHours:p,blockHeight:Lre.blockHeight})}),Object(a.jsxs)(Ure,{children:[t.map((function(e){return Object(a.jsx)(Hne,{startHours:d,endHours:p,blockHeight:Lre.blockHeight,blockWidth:Lre.blockWidth,run:e,openModal:r,loadRuns:o,location:i},e.id)})),Object(a.jsx)(Hne,{startHours:d,endHours:p,blockHeight:Lre.blockHeight,blockWidth:Lre.blockWidth,newRun:!0,location:i})]})]},d+p)]})}}]),n}(p.PureComponent);function Hre(){var e=Object(f.a)(["\n  padding: 10px;\n  background: ",";\n  border-radius: 4px;\n  border: 1px solid ",";\n  position: relative;\n  margin-bottom: 10px;\n"]);return Hre=function(){return e},e}var Gre=x.default.div(Hre(),y.white,y.gray2),Yre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(Gre,{children:this.props.children})}}]),n}(p.PureComponent);function Qre(){var e=Object(f.a)(["\n  color: ",";\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n"]);return Qre=function(){return e},e}function Kre(){var e=Object(f.a)(["\n  color: ",";\n"]);return Kre=function(){return e},e}function Zre(){var e=Object(f.a)(["\n  font-size: ",";\n  margin-top: 0.6em;\n"]);return Zre=function(){return e},e}function Xre(){var e=Object(f.a)(["\n  position: absolute;\n  right: 10px;\n  top: 10px;\n"]);return Xre=function(){return e},e}var $re=x.default.div(Xre()),eae=x.default.div(Zre(),Vf.smaller),tae=x.default.div(Kre(),y.gray4),nae=x.default.div(Qre(),y.gray3),rae=Object(Ym.css)({padding:0,"& .rdtPicker":{border:0,padding:0}}),aae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={datePickerLoading:!1,showDatePicker:!1,date:null,showEditModal:!1},e.dropdownTriggerRender=function(){return Object(a.jsx)(J3,{name:Ef.MenuVertical,color:y.black0})},e.datePickerRender=function(){return Object(a.jsx)(by.a,{input:!1,timeFormat:!0,isValidDate:function(e){var t=qf()();return qf()(e).isAfter(t)},onChange:function(t){e.setState({date:t})}})},e.isValidateCustomSnoozeDate=function(){var t=e.state.date;return!!t&&t.isAfter(qf()())},e.snoozeTaskUntilCustomDate=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.state.date)){t.next=10;break}return e.setState({datePickerLoading:!0}),t.prev=3,t.next=6,e.snoozeTask(n,a);case 6:r.close();case 7:return t.prev=7,e.setState({datePickerLoading:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})));return function(e,n){return t.apply(this,arguments)}}(),e.taskMenuItems=function(t,n){var r=e.state,o=r.showDatePicker,i=r.datePickerLoading,c=[{name:"Snooze for one day",onClick:function(){return e.snoozeTask(t,qf()().add(1,"d"))},disabled:!n.has(Dw.JOBS_TASK_MANAGE)},{name:"Snooze for one week",onClick:function(){return e.snoozeTask(t,qf()().add(7,"d"))},disabled:!n.has(Dw.JOBS_TASK_MANAGE)},{name:"Snooze for one month",onClick:function(){return e.snoozeTask(t,qf()().add(1,"M"))},disabled:!n.has(Dw.JOBS_TASK_MANAGE)},{customElements:function(n){return Object(a.jsx)(a.Fragment,{children:o?Object(a.jsxs)("div",{className:"position-relative",style:{background:y.white,padding:"0 1.5rem"},children:[i&&Object(a.jsx)(av,{size:30,color:y.white}),e.datePickerRender(),Object(a.jsx)(FS,{padding:"10px 0",children:Object(a.jsx)(Cg,{className:"btn",disabled:!e.isValidateCustomSnoozeDate(),onClick:function(){return e.snoozeTaskUntilCustomDate(t,n)},children:"Snooze"})})]}):"Snooze (choose date)"})},classNames:o?"".concat(rae):"",onClick:o?void 0:e.showDatePicker,noClose:!0,disabled:!n.has(Dw.JOBS_TASK_MANAGE),onOutsideClick:e.closeDatePicker}],s=[{name:"Unsnooze",onClick:function(){var n=Object(Um.a)(Fm.a.mark((function n(){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.unsnoozeTask(t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),disabled:!n.has(Dw.JOBS_TASK_MANAGE)}],l=t.job_id?t.snoozed_until?s:c:[];return j.a.compact([{name:"Edit",onClick:e.showEditModal,disabled:!n.has(Dw.JOBS_TASK_MANAGE)},{type:"divider"}].concat(Object(Dm.a)(l),[(null===l||void 0===l?void 0:l.length)?{type:"divider"}:null,{name:"Delete",onClick:e.removeTask,disabled:!n.has(Dw.JOBS_TASK_MANAGE)}]))},e.removeTask=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.task,a=n.dispatch,t.next=3,a(Sw("Confirm","Delete task ".concat(r.type.name,"?")));case 3:if(!t.sent){t.next=13;break}if(!r.job_id){t.next=10;break}return t.next=8,pJ.removeTaskFromJob(r.job_id,r.id);case 8:t.next=12;break;case 10:return t.next=12,pJ.removeAdhocTask(r.id);case 12:uy.emit(Kg.TaskWasRemovedFromRun);case 13:case"end":return t.stop()}}),t)}))),e.showDatePicker=function(){e.setState({showDatePicker:!0})},e.closeDatePicker=function(){e.setState({showDatePicker:!1})},e.showEditModal=function(){e.setState({showEditModal:!0})},e.closeEditModal=function(){e.setState({showEditModal:!1}),e.props.loadTaskList()},e.snoozeTask=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!0,!n.assigned_slots){t.next=5;break}return t.next=4,e.props.dispatch(Sw("Confirm","Snooze Task",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"This task is scheduled for one or more runs. It will be removed from run(s) after snoozing it."}),Object(a.jsx)("p",{children:"Do you want to proceed?"})]})));case 4:o=t.sent;case 5:if(!o){t.next=13;break}return t.next=8,pJ.snoozeTask(n.job_id,n.id,{snoozed_until:r.add(-r.utcOffset(),"m").format(Mj)});case 8:if(!(null===(i=n.assigned_slots)||void 0===i?void 0:i.length)){t.next=12;break}return t.next=11,Promise.all(n.assigned_slots.map((function(e){return pJ.removeTaskSlotFromRun(e.job_run_id,n.id,e.id)})));case 11:uy.emit(Kg.TaskWasRemovedFromRun);case 12:uy.emit(Kg.TaskWasSnoozed);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.unsnoozeTask=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,pJ.unsnoozeTask(t.job_id,t.id);case 2:uy.emit(Kg.TaskWasUnsnoozed);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.isScheduled=function(){var t;return(null===(t=e.props.task.assigned_slots)||void 0===t?void 0:t.length)>0},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.task,r=t.locationArea,o=(t.date,t.currentTime||qf()()),i=qf()(n.due_at),c=i.diff(o,"h"),s=qf.a.duration(i.diff(o)),l=n.type.kpi_hours||12,u=c<l,d=this.state.showEditModal;return Object(a.jsx)(Cw.Consumer,{children:function(t){var o,p,h;return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(Iz,{locationId:null===(o=n.job)||void 0===o?void 0:o.assigned_location_id,edit:!0,taskTypes:[n.type],isOpen:d,doSave:!0,doAssign:!0,task:_z(n),onClose:e.closeEditModal}),Object(a.jsxs)(Yre,{children:[Object(a.jsxs)(FS,{fontSize:Vf.smaller,children:[Object(a.jsxs)(FS,{padding:"0 30px 0 0",className:"d-flex justify-content-between",children:[Object(a.jsx)(FS,{weight:Bf.bold,fontSize:"17.6px",children:n.subtype&&null!==n.subtype.name?n.subtype.name:n.name||n.type.name}),n.job&&Object(a.jsxs)(Uf.b,{to:"/job/".concat(n.job.id,"/details"),style:{whiteSpace:"nowrap"},children:["#","".concat(n.job.id).concat(r&&"-".concat(r.code))]})]}),n.job&&Object(a.jsx)(FS,{padding:"0 30px 0 0",className:"d-flex justify-content-between",children:Object(a.jsx)("div",{children:n.job.site_address?n.job.site_address.full_address:"No Site Address"})})]}),Object(a.jsxs)(FS,{color:y.gray4,margin:"5px 0 0 0",className:"d-flex",children:[u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(FS,{className:"close-to-kpi",weight:Bf.bold,fontSize:"17.6px",color:c>l/2?y.orange2:y.red1,children:[c>-1?"".concat("0".concat(c).slice(-2),":").concat(qf()(s.asMilliseconds()).format("mm")):"00:00","hrs"]}),"\xa0\xa0"]})," ",Object(a.jsxs)(FS,{color:y.black0,fontSize:"17.6px",children:["Due: ",i.format("D MMM, hh:mm A")]})]}),((null===(p=n.job)||void 0===p?void 0:p.site_contact)||n.internal_note)&&Object(a.jsxs)(eae,{children:[(null===(h=n.job)||void 0===h?void 0:h.site_contact)&&Object(a.jsxs)(tae,{children:[Jv.getContactName(n.job.site_contact),Jv.getContactPhone(n.job.site_contact)&&": ".concat(Jv.getContactPhone(n.job.site_contact))]}),n.internal_note&&Object(a.jsx)(nae,{children:n.internal_note})]}),n.snoozed_until&&Object(a.jsxs)(FS,{color:y.orange2,fontSize:Vf.smaller,margin:"10px 0 0 0",children:["Snoozed until ",qf()(n.snoozed_until).format(Uj)]}),Object(a.jsx)($re,{children:Object(a.jsx)(yw,{trigger:e.dropdownTriggerRender,items:e.taskMenuItems(n,t),direction:"right"})})]})]})}})}}]),n}(p.Component),oae=Object(b.b)()(aae),iae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.task,n=e.locationArea,r=e.connectDragSource,o=e.date,i=e.loadTaskList;return Object(a.jsx)(Cw.Consumer,{children:function(e){return e.has(Dw.OPERATIONS_RUNS_MANAGE)&&!t.snoozed_until?r(Object(a.jsx)("div",{children:Object(a.jsx)(oae,{loadTaskList:i,task:t,locationArea:n,date:o})})):Object(a.jsx)(oae,{loadTaskList:i,task:t,locationArea:n,date:o})}})}}]),n}(p.PureComponent),cae=Object(Jte.DragSource)(vne.TASK,{beginDrag:function(e){return e.task}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(iae),sae="16px",lae="16px",uae="14px",dae="14px",pae="25px";function hae(){var e=Object(f.a)(["\n  :first-child {\n    margin-top: 0 !important;\n  }\n"]);return hae=function(){return e},e}var bae=Object(x.default)(FS)(hae()),fae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(bae,{color:y.gray4,style:{textTransform:"uppercase"},margin:"40px 0 10px 0",children:this.props.children})}}]),n}(p.PureComponent);function mae(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return mae=function(){return e},e}var jae,vae,Oae=Object(x.default)(FS)(mae()),gae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderTrigger=function(){var t=e.props.selectedName;return Object(a.jsxs)(Oae,{className:"d-flex align-items-center",margin:"5px 0 0 0",fontSize:"1em",children:[Object(a.jsx)(FS,{color:y.gray4,margin:"0 5px 0 0",fontSize:"1em",children:t}),Object(a.jsx)(J3,{name:Ef.ArrowDown,color:y.gray4,size:16})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.items;return Object(a.jsx)(yw,{items:e,noMargin:!0,direction:"right",trigger:this.renderTrigger})}}]),n}(h.a.PureComponent),xae=BS.ColoredDiv;!function(e){e[e.KPI=0]="KPI",e[e.Name=1]="Name",e[e.OldToNew=2]="OldToNew",e[e.NewToOld=3]="NewToOld"}(vae||(vae={}));var yae,wae=(jae={},Object(k.a)(jae,vae.KPI,"Closest KPI due"),Object(k.a)(jae,vae.Name,"Task name"),Object(k.a)(jae,vae.OldToNew,"All tasks (oldest to newest)"),Object(k.a)(jae,vae.NewToOld,"All tasks (newest to oldest)"),jae),_ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:"",sortType:vae.KPI},e.onSearchValueChange=function(t){var n=e.props.locationArea;e.setState({search:t}),n&&e.debouncedSearch({location_id:n.id,term:t})},e.debouncedSearch=Object(m.debounce)(e.props.searchTasks.fetch,500),e.isKPIIsCloseToBeFired=function(e){var t=qf()();return qf()(e.due_at).diff(t,"h")<(e.type.kpi_hours||24)},e.sortTasks=function(t){var n=e.props.date,r=null===n||void 0===n?void 0:n.format(Dj),a=t.filter((function(e){var t;return null===(t=e.assigned_slots)||void 0===t?void 0:t.length})),o=t.filter((function(e){var t;return!(null===(t=e.assigned_slots)||void 0===t?void 0:t.length)})),i=e.state.sortType,c=a.filter((function(e){return j()(e.assigned_slots).some((function(e){var t;return(null===(t=e.run)||void 0===t?void 0:t.date)===r}))})),s=[],l=[];return o.forEach((function(e){e.type.can_be_scheduled&&(e.snoozed_until?l.push(e):s.push(e))})),i===vae.OldToNew&&(s=Object(m.orderBy)(s,[function(e){return qf()(e.created_at).unix()}],["asc"]),c=Object(m.orderBy)(c,[function(e){return qf()(e.created_at).unix()}],["asc"])),i===vae.NewToOld&&(s=Object(m.orderBy)(s,[function(e){return qf()(e.created_at).unix()}],["desc"]),c=Object(m.orderBy)(c,[function(e){return qf()(e.created_at).unix()}],["desc"])),i===vae.KPI&&(s=Object(m.orderBy)(s,[function(t){return e.isKPIIsCloseToBeFired(t)}],["desc"]),c=Object(m.orderBy)(c,[function(t){return e.isKPIIsCloseToBeFired(t)}],["desc"])),i===vae.Name&&(s=Object(m.orderBy)(s,[function(e){return e.name}],["asc"]),c=Object(m.orderBy)(c,[function(e){return e.name}],["asc"])),{scheduled:c,toSchedule:s,snoozed:l}},e.sortItems=function(){var t=e.state.sortType;return[{name:wae[vae.KPI],classNames:t===vae.KPI?"active":"",onClick:function(){return e.setState({sortType:vae.KPI})}},{name:wae[vae.Name],classNames:t===vae.Name?"active":"",onClick:function(){return e.setState({sortType:vae.Name})}},{name:wae[vae.OldToNew],classNames:t===vae.OldToNew?"active":"",onClick:function(){return e.setState({sortType:vae.OldToNew})}},{name:wae[vae.NewToOld],classNames:t===vae.NewToOld?"active":"",onClick:function(){return e.setState({sortType:vae.NewToOld})}}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.onSearchValueChange(),uy.listen(Kg.TaskWasAddedToRun,this.onSearchValueChange),uy.listen(Kg.TaskWasRemovedFromRun,this.onSearchValueChange),uy.listen(Kg.TaskWasSnoozed,this.onSearchValueChange),uy.listen(Kg.TaskWasUnsnoozed,this.onSearchValueChange),uy.listen(Kg.TaskWasUpdated,this.onSearchValueChange)}},{key:"componentWillUnmount",value:function(){uy.removeListener(Kg.TaskWasAddedToRun,this.onSearchValueChange),uy.removeListener(Kg.TaskWasRemovedFromRun,this.onSearchValueChange),uy.removeListener(Kg.TaskWasSnoozed,this.onSearchValueChange),uy.removeListener(Kg.TaskWasUnsnoozed,this.onSearchValueChange),uy.removeListener(Kg.TaskWasUpdated,this.onSearchValueChange)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locationArea;t&&t.id!==(e.locationArea&&e.locationArea.id)&&(this.setState({search:""}),this.onSearchValueChange(""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchTasks,r=n.loading,o=n.data,i=t.locationArea,c=t.date,s=this.state,l=s.sortType,u=s.search,d=o?o.data:[],p=this.sortTasks(d);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(xae,{padding:"".concat(sae," ").concat(uae," ").concat(pae," ").concat(dae),className:"flex-shrink-0",overflow:"visible",children:[Object(a.jsx)(ES,{loading:r,onSearchValueChange:this.onSearchValueChange,placeholder:"Search...",value:u}),Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)(gae,{items:this.sortItems(),selectedName:wae[l]})})]}),Object(a.jsxs)(uC,{className:"d-flex flex-column flex-grow-1 position-relative",children:[r&&Object(a.jsx)(QC,{color:y.gray1,zIndex:2}),Object(a.jsxs)(xae,{padding:"0 ".concat(uae," ").concat(lae," ").concat(dae),overflow:"visible",children:[p.toSchedule.length>0&&Object(a.jsx)(fae,{children:"To Schedule"}),p.toSchedule.map((function(t){return Object(a.jsx)(cae,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)})),p.scheduled.length>0&&Object(a.jsx)(fae,{children:"Scheduled"}),p.scheduled.map((function(t){return Object(a.jsx)(cae,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i,date:c?qf()(c.format(Dj)):qf()()},t.id)})),p.snoozed.length>0&&Object(a.jsx)(fae,{children:"Snoozed"}),p.snoozed.map((function(t){return Object(a.jsx)(cae,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)}))]})]})]})}}]),n}(p.PureComponent),kae=Mm({searchTasks:{fetch:pJ.searchTasks}})(_ae),Sae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getHoursColor=function(){var t=e.props.staffMember,n=t.week_hours,r=t.working_hours_per_week;if(r){var a=y.black1,o=n/r;return o>.89&&(a=y.orange2),o>.99&&(a=y.red1),a}return y.black1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.staffMember,n=e.booked,r=Yf(t);return Object(a.jsx)(Yre,{children:Object(a.jsxs)(FS,{fontSize:Vf.smaller,weight:Bf.bold,className:"d-flex justify-content-between align-items-center",color:n?y.gray4:y.black1,children:[Object(a.jsx)("div",{children:r.name}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)(FS,{color:y.gray4,margin:"0 5px 0 0",children:["(",t.date_hours.toFixed(1),"hrs)"]}),Object(a.jsxs)(FS,{color:this.getHoursColor(),children:[t.week_hours.toFixed(1),"hrs"]})]})]})})}}]),n}(p.PureComponent),Cae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.staffMember,n=e.connectDragSource,r=e.booked;return Object(a.jsx)(Cw.Consumer,{children:function(e){return e.has(Dw.OPERATIONS_RUNS_MANAGE)?n(Object(a.jsx)("div",{children:Object(a.jsx)(Sae,{staffMember:t,booked:r})})):Object(a.jsx)(Sae,{staffMember:t,booked:r})}})}}]),n}(p.PureComponent),Nae=Object(Jte.DragSource)(vne.CREW,{beginDrag:function(e){return e.staffMember}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Cae);function Eae(){var e=Object(f.a)(["\n  .dropdown-menu{right:-100%;}\n"]);return Eae=function(){return e},e}var Aae,Tae=x.default.div(Eae());!function(e){e[e.HoursRemaining=0]="HoursRemaining",e[e.HoursUsed=1]="HoursUsed",e[e.ByName=2]="ByName",e[e.PrimaryLocation=3]="PrimaryLocation"}(Aae||(Aae={}));var Iae=(yae={},Object(k.a)(yae,Aae.HoursRemaining,"Hours remaining"),Object(k.a)(yae,Aae.HoursUsed,"Hours used"),Object(k.a)(yae,Aae.ByName,"By name"),Object(k.a)(yae,Aae.PrimaryLocation,"Primary location"),yae),Rae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:"",sortType:Aae.HoursRemaining,sortTypeByUserRole:"all",sortTypeByUserRoleName:"All"},e.eventListeners=[uy.listen(Kg.StaffAssignedToTask,(function(){return e.onSearchValueChange(e.state.search)})),uy.listen(Kg.TaskWasUpdated,(function(){return e.onSearchValueChange(e.state.search)})),uy.listen(Kg.TaskWasRemovedFromRun,(function(){return e.onSearchValueChange(e.state.search)}))],e.debouncedSearch=Object(m.debounce)(e.props.searchStaff.fetch,1e3),e.debouncedFetchList=Object(m.debounce)(e.props.getStaffList.fetch,1e3),e.onSearchValueChange=function(t){var n=e.props,r=n.locationArea,a=n.date;if(e.setState({search:t}),r&&a){var o={location_id:r.id,date:qj(a)};t?(e.debouncedFetchList.cancel(),e.debouncedSearch(Object(c.a)(Object(c.a)({},o),{},{name:t||""}))):(e.debouncedSearch.cancel(),e.debouncedFetchList(Object(c.a)({},o)))}},e.sortItems=function(){var t=e.state.sortType;return[{name:Iae[Aae.HoursRemaining],classNames:t===Aae.HoursRemaining?"active":"",onClick:function(){return e.setState({sortType:Aae.HoursRemaining})}},{name:Iae[Aae.HoursUsed],classNames:t===Aae.HoursUsed?"active":"",onClick:function(){return e.setState({sortType:Aae.HoursUsed})}},{name:Iae[Aae.ByName],classNames:t===Aae.ByName?"active":"",onClick:function(){return e.setState({sortType:Aae.ByName})}},{name:Iae[Aae.PrimaryLocation],classNames:t===Aae.PrimaryLocation?"active":"",onClick:function(){return e.setState({sortType:Aae.PrimaryLocation})}}]},e.userRolesItems=function(){var t=e.props.userRoles.data,n=e.state.sortTypeByUserRole,r={name:"All",classNames:"all"===n?"active":"",onClick:function(){e.setState({sortTypeByUserRole:"all",sortTypeByUserRoleName:"All"})}},a=t?t.map((function(t){return{name:t.display_name,classNames:n===t.name?"active":"",onClick:function(){e.setState({sortTypeByUserRole:t.name,sortTypeByUserRoleName:t.display_name})}}})):[];return[].concat(Object(Dm.a)(!t||t&&!t.length?[r]:[r,{type:"divider"}]),Object(Dm.a)(a))},e.getCrewRole=function(){var t=e.props.userRoles.data;return t?t.find((function(e){return"crew"===e.name.toLowerCase()})):void 0},e.sortStaff=function(){var t=e.props,n=t.searchStaff.data,r=t.getStaffList.data,a=t.locationArea,o=e.state,i=o.sortType,c=o.search?n:r,s=[],l=[];return c&&c.forEach((function(e){e.working_hours_per_week&&e.date_hours>=e.working_hours_per_week/5?l.push(e):s.push(e)})),i===Aae.PrimaryLocation&&(s=s.filter((function(e){return e.primary_location.id===a.id})),l=l.filter((function(e){return e.primary_location.id===a.id}))),[Aae.HoursRemaining,Aae.PrimaryLocation].includes(i)&&(s=Object(m.orderBy)(s,[function(e){return(e.working_hours_per_week||40)-e.week_hours}],["desc"]),l=Object(m.orderBy)(l,[function(e){return(e.working_hours_per_week||40)-e.week_hours}],["desc"])),i===Aae.HoursUsed&&(s=Object(m.orderBy)(s,["week_hours"],["desc"]),l=Object(m.orderBy)(l,["week_hours"],["desc"])),i===Aae.ByName&&(s=Object(m.orderBy)(s,[function(e){return Yf(e).name}],["asc"]),l=Object(m.orderBy)(l,[function(e){return Yf(e).name}],["asc"])),{canBeBooked:e.sortByUserRole(s),booked:e.sortByUserRole(l)}},e.sortByUserRole=function(t){var n=e.state.sortTypeByUserRole;return t.filter((function(e){return"all"===n||(e.roles&&e.roles.map((function(e){return e.name}))||[]).includes(n)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.userRoles,r=this.getCrewRole();t(iS(L1,F1,V1,Object(Um.a)(Fm.a.mark((function e(){var t;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE.getRoles();case 2:return t=e.sent,e.abrupt("return",Object(m.orderBy)(t.data,["display_name"],["asc"]));case 4:case"end":return e.stop()}}),e)}))))),this.onSearchValueChange(this.state.search),n.data&&r&&this.setState({sortTypeByUserRoleName:r.display_name,sortTypeByUserRole:r.name})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.locationArea,r=t.date,a=t.userRoles;if((n&&n.id!==(e.locationArea&&e.locationArea.id)||r&&r.unix()!==(e.date&&e.date.unix()))&&this.onSearchValueChange(this.state.search),a.data&&(!e.userRoles.data||e.userRoles.data&&!e.userRoles.data.length)){var o=this.getCrewRole();o&&this.setState({sortTypeByUserRoleName:o.display_name,sortTypeByUserRole:o.name})}}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this.props,t=e.searchStaff.loading,n=e.getStaffList.loading,r=e.userRoles.loading,o=this.state,i=o.sortType,c=o.sortTypeByUserRoleName,s=this.sortStaff();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(FS,{padding:"".concat(sae," ").concat(uae," ").concat(pae," ").concat(dae),className:"flex-shrink-0",overflow:"visible",children:[Object(a.jsx)(ES,{loading:t||n,onSearchValueChange:this.onSearchValueChange,placeholder:"Search..."}),Object(a.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(a.jsxs)(Tae,{className:"position-relative",style:{marginRight:"10px"},children:[r&&Object(a.jsx)(av,{size:14,color:y.gray1,zIndex:2}),Object(a.jsx)(gae,{items:this.userRolesItems(),selectedName:c})]}),Object(a.jsx)(gae,{items:this.sortItems(),selectedName:Iae[i]})]})]}),Object(a.jsxs)(uC,{className:"d-flex flex-column flex-grow-1 position-relative",children:[t&&Object(a.jsx)(QC,{color:y.gray1,zIndex:3}),Object(a.jsxs)(FS,{padding:"0 ".concat(uae," ").concat(lae," ").concat(dae),overflow:"visible",children:[s.canBeBooked.map((function(e){return Object(a.jsx)(Nae,{staffMember:e},e.id)})),s.booked.length>0&&Object(a.jsx)(fae,{children:"Booked"}),s.booked.map((function(e){return Object(a.jsx)(Nae,{staffMember:e,booked:!0},e.id)}))]})]})]})}}]),n}(p.PureComponent),Dae=Object(LO.compose)(Object(b.b)((function(e){return{userRoles:e.userRoles}})),Mm({getStaffList:{fetch:pz.getStaffList},searchStaff:{fetch:pz.searchStaff}}))(Rae),Mae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.vehicle;return Object(a.jsx)(Yre,{children:Object(a.jsxs)(FS,{fontSize:Vf.smaller,className:"d-flex align-items-center justify-content-between",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(FS,{weight:Bf.bold,margin:"0 10px 0 0",color:e.is_booked?y.gray4:y.black1,children:e.registration}),e.rent_starts_at&&Object(a.jsx)(NC,{tag:{name:"RENTAL",color:y.purple1},mode:"outlined"})]}),Object(a.jsx)(FS,{color:y.gray4,children:e.type.toUpperCase()})]})})}}]),n}(p.PureComponent),Pae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.vehicle,n=e.connectDragSource;return Object(a.jsx)(Cw.Consumer,{children:function(e){return e.has(Dw.OPERATIONS_RUNS_MANAGE)&&!t.is_booked?n(Object(a.jsx)("div",{children:Object(a.jsx)(Mae,{vehicle:t})})):Object(a.jsx)(Mae,{vehicle:t})}})}}]),n}(p.PureComponent),Lae=Object(Jte.DragSource)(vne.VEHICLE,{beginDrag:function(e){return e.vehicle}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Pae),Fae="ModalRentalCarsForm",Uae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).validateStartDate=function(e,t){if(qf.a.isMoment(t.rent_ends_at)&&qf.a.isMoment(e)&&e.isAfter(t.rent_ends_at))return"Start date cannot be after end date"},e.validateEndDate=function(e,t){if(qf.a.isMoment(t.rent_starts_at)&&qf.a.isMoment(e)&&e.isBefore(t.rent_starts_at))return"End date cannot be before start date"},e.getOptionLabel=function(e){return e.name},e.getOptionValue=function(e){return e.id},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:return o(),t.abrupt("return",!0);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",Mg(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.locations,r=t.initialValues;return Object(a.jsxs)("form",{id:Fae,onSubmit:e.props.handleSubmit(e.onSubmit),children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"make",label:"Car Brand",component:ZO,validate:uv})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"model",label:"Car Model",component:ZO,validate:uv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"registration",label:"Reg. Number",component:ZO,validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"type",label:"Car Type",component:ZO,validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"location_id",label:"Location",component:Kv,options:n,validate:uv,getOptionLabel:e.getOptionLabel,getOptionValue:e.getOptionValue,disabled:!!r.location_id})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"rent_starts_at",label:"Rental Start Date",component:Cy,validate:[uv,dv,e.validateStartDate],futureEnabled:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"rent_ends_at",label:"Rental End Date",component:Cy,validate:[uv,dv,e.validateEndDate],futureEnabled:!0})})]})]})},e.renderFooter=function(){e.props.invalid;return Object(a.jsx)(Cg,{className:"btn",type:"submit",form:Fae,children:"Add"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Vae=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:Fae}))(Uae),Bae=function(e){return Object(c.a)(Object(c.a)({},e),{},{location_id:e.location_id.id,rent_starts_at:e.rent_starts_at.format(Mj),rent_ends_at:e.rent_ends_at.format(Mj)})};function Jae(e){return function(t){return h.a.memo((function(n){return Object(a.jsx)(e.Consumer,{children:function(e){return Object(a.jsx)(t,Object(c.a)(Object(c.a)({},n),{},{currentContext:e}))}})}))}}var zae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showRentalCarsModal:!1},e.fetchVehiclesWithContext=function(t){var n=e.props,r=n.locationArea,a=n.loadVehicles.fetch,o=n.date;t&&t.has(Dw.OPERATIONS_VEHICLES_VIEW)&&r&&o&&a(r.id,qj(o))},e.eventListeners=[uy.listen(Kg.VehicleAssignedToTask,(function(){return e.fetchVehiclesWithContext(e.props.currentContext)}))],e.sortVehicles=function(){var t=e.props.loadVehicles.data,n=t?t.filter((function(e){return!e.latest_status.type.makes_vehicle_unavailable})):[],r=[],a=[];return n.forEach((function(e){e.is_booked?r.push(e):a.push(e)})),{available:a,booked:r}},e.showRentalCarsModal=function(){e.setState({showRentalCarsModal:!0})},e.hideRentalCarsModal=function(){e.setState({showRentalCarsModal:!1})},e.onRentalCarSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Q5.createVehicle(Bae(n));case 2:e.fetchVehiclesWithContext(e.props.currentContext);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchVehiclesWithContext(this.props.currentContext)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.locationArea,r=t.date,a=t.currentContext;(n&&n.id!==(e.locationArea&&e.locationArea.id)||r&&r.unix()!==(e.date&&e.date.unix()))&&this.fetchVehiclesWithContext(a)}},{key:"componentWillUnmount",value:function(){this.eventListeners.map((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.locationArea,r=t.loadVehicles.loading,o=this.state.showRentalCarsModal,i=this.sortVehicles();return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)(Vae,{isOpen:o,onClose:e.hideRentalCarsModal,title:"Add Rental Car",initialValues:{location_id:n},onSubmit:e.onRentalCarSubmit}),r&&Object(a.jsx)(av,{color:y.gray1,zIndex:2,size:40}),Object(a.jsx)(FS,{padding:"".concat(sae," ").concat(uae," 0 ").concat(dae),className:"flex-shrink-0",overflow:"visible",children:Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)(PS,{noDecoration:!0,onClick:e.showRentalCarsModal,children:"Add rental"})})}),Object(a.jsx)(uC,{className:"d-flex flex-column flex-grow-1",children:Object(a.jsxs)(FS,{padding:"".concat(sae," ").concat(uae," ").concat(lae," ").concat(dae),overflow:"visible",children:[i.available.map((function(e){return Object(a.jsx)(Lae,{vehicle:e},e.id)})),i.booked.length>0&&Object(a.jsx)(fae,{children:"Booked"}),i.booked.map((function(e){return Object(a.jsx)(Lae,{vehicle:e},e.id)}))]})})]})}})}}]),n}(p.PureComponent),qae=Object(LO.compose)(Mm({loadVehicles:{fetch:Q5.searchVehicles}}),Jae(Cw))(zae),Wae=BS.ColoredDiv,Hae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.onSearchValueChange=function(t){var n=e.props.locationArea;e.setState({search:t}),n&&e.debouncedSearch({location_id:n.id,term:t,adhoc_task:1})},e.debouncedSearch=Object(m.debounce)(e.props.searchTasks.fetch,500),e.sortTasks=function(t){var n=e.props.date,r=null===n||void 0===n?void 0:n.format(Dj),a=t.filter((function(e){var t;return null===(t=e.assigned_slots)||void 0===t?void 0:t.length})),o=t.filter((function(e){var t;return!(null===(t=e.assigned_slots)||void 0===t?void 0:t.length)})),i=a.filter((function(e){return j()(e.assigned_slots).some((function(e){var t;return(null===(t=e.run)||void 0===t?void 0:t.date)===r}))})),c=[],s=[];return o.forEach((function(e){e.type.can_be_scheduled&&(e.snoozed_until?s.push(e):c.push(e))})),{scheduled:i,toSchedule:c,snoozed:s}},e.showModal=function(t,n){e.setState({modal:t,modalData:n})},e.hideModal=function(){e.setState({modal:void 0,modalData:void 0})},e.renderModal=function(){var t,n=e.state,r=n.modal,o=n.modalData,i=e.props,s=i.locationArea,l=i.taskTypes;return"task"===r?Object(a.jsx)(Iz,Object(c.a)({locationId:null===s||void 0===s?void 0:s.id,taskTypes:(null===(t=l.data)||void 0===t?void 0:t.data)||[],isOpen:!0,doSave:!0,doAssign:!1,onClose:e.hideModal},o)):null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.onSearchValueChange(),uy.listen(Kg.TaskWasAddedToRun,this.onSearchValueChange),uy.listen(Kg.TaskWasRemovedFromRun,this.onSearchValueChange),uy.listen(Kg.TaskWasSnoozed,this.onSearchValueChange),uy.listen(Kg.TaskWasUnsnoozed,this.onSearchValueChange),uy.listen(Kg.TaskWasUpdated,this.onSearchValueChange),this.props.taskTypes.fetch()}},{key:"componentWillUnmount",value:function(){uy.removeListener(Kg.TaskWasAddedToRun,this.onSearchValueChange),uy.removeListener(Kg.TaskWasRemovedFromRun,this.onSearchValueChange),uy.removeListener(Kg.TaskWasSnoozed,this.onSearchValueChange),uy.removeListener(Kg.TaskWasUnsnoozed,this.onSearchValueChange),uy.removeListener(Kg.TaskWasUpdated,this.onSearchValueChange)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locationArea;t&&t.id!==(e.locationArea&&e.locationArea.id)&&(this.setState({search:""}),this.onSearchValueChange(""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchTasks,r=n.loading,o=n.data,i=t.locationArea,c=t.date,s=this.state.search,l=o?o.data:[],u=this.sortTasks(l);return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)(Wae,{padding:"".concat(sae," ").concat(uae," ").concat(pae," ").concat(dae),className:"flex-shrink-0",overflow:"visible",children:[Object(a.jsx)(ES,{loading:r,onSearchValueChange:this.onSearchValueChange,placeholder:"Search...",value:s}),Object(a.jsx)("div",{className:"d-flex justify-content-end mt-3",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){e.showModal("task")},children:"Create new adhoc task"})})]}),Object(a.jsxs)(uC,{className:"d-flex flex-column flex-grow-1 position-relative",children:[r&&Object(a.jsx)(QC,{color:y.gray1,zIndex:2}),Object(a.jsxs)(Wae,{padding:"0 ".concat(uae," ").concat(lae," ").concat(dae),overflow:"visible",children:[u.toSchedule.length>0&&Object(a.jsx)(fae,{children:"To Schedule"}),u.toSchedule.map((function(t){return Object(a.jsx)(cae,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)})),u.scheduled.length>0&&Object(a.jsx)(fae,{children:"Scheduled"}),u.scheduled.map((function(t){return Object(a.jsx)(cae,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i,date:c?qf()(c.format(Dj)):qf()()},t.id)})),u.snoozed.length>0&&Object(a.jsx)(fae,{children:"Snoozed"}),u.snoozed.map((function(t){return Object(a.jsx)(cae,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)}))]})]})]})}}]),n}(p.PureComponent),Gae=Mm({searchTasks:{fetch:pJ.searchTasks},taskTypes:{fetch:pJ.getTaskTypes}})(Hae);function Yae(){var e=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  flex-grow: 1;\n  flex-direction: column;\n  overflow: auto;\n"]);return Yae=function(){return e},e}function Qae(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-around;\n  height: 45px;\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return Qae=function(){return e},e}var Kae,Zae=x.default.div(Qae(),y.white,y.gray2),Xae=x.default.div(Yae());!function(e){e.Jobs="jobs",e.Tasks="tasks",e.Staff="staff",e.Vehicles="vehicles"}(Kae||(Kae={}));var $ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(r=t.call.apply(t,[this].concat(o))).getTabNameFromUrl=function(){var e=r.props.match.params.section;return e.charAt(0).toUpperCase()+e.slice(1)},r.state=(e={activeTabId:Kae[r.getTabNameFromUrl()]},Object(k.a)(e,Kae.Jobs,!1),Object(k.a)(e,Kae.Staff,!1),Object(k.a)(e,Kae.Vehicles,!1),Object(k.a)(e,Kae.Tasks,!1),e),r.getTabs=function(e){return[{name:"Jobs",id:Kae.Jobs,onClick:function(){r.props.history.push("/operations/schedule/".concat(Kae.Jobs)),r.setState(Object(k.a)({activeTabId:Kae.Jobs},Kae.Jobs,!0))},disabled:!e.has(Dw.OPERATIONS_TASKS_VIEW)},{name:"Adhoc Tasks",id:Kae.Tasks,onClick:function(){r.props.history.push("/operations/schedule/".concat(Kae.Tasks)),r.setState(Object(k.a)({activeTabId:Kae.Tasks},Kae.Tasks,!0))},disabled:!e.has(Dw.OPERATIONS_TASKS_VIEW)},{name:"Staff",id:Kae.Staff,onClick:function(){r.props.history.push("/operations/schedule/".concat(Kae.Staff)),r.setState(Object(k.a)({activeTabId:Kae.Staff},Kae.Staff,!0))},disabled:!e.has(Dw.OPERATIONS_STAFF_VIEW)},{name:"Vehicles",id:Kae.Vehicles,onClick:function(){r.props.history.push("/operations/schedule/".concat(Kae.Vehicles)),r.setState(Object(k.a)({activeTabId:Kae.Vehicles},Kae.Vehicles,!0))},disabled:!e.has(Dw.OPERATIONS_VEHICLES_VIEW)}]},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState(Object(k.a)({},Kae[this.getTabNameFromUrl()],!0))}},{key:"render",value:function(){var e=this,t=this.state.activeTabId,n=this.props,r=n.locationArea,o=n.date,i=n.ready;return Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsxs)(Im,{width:364,className:"h-100",noExpand:!0,children:[!i&&Object(a.jsx)(QC,{color:y.white,opacity:.7,zIndex:100}),Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right",id:"operations-sidebar-tooltip"}),Object(a.jsx)(Zae,{children:Object(a.jsx)(yz,{selectedTabId:t,items:e.getTabs(n)})}),Object(a.jsxs)(Xae,{style:{display:t===Kae.Jobs?"flex":"none"},children:[!n.has(Dw.OPERATIONS_TASKS_VIEW)&&Object(a.jsx)(QC,{color:y.gray1}),e.state[Kae.Jobs]&&Object(a.jsx)(kae,{locationArea:r,date:o})]}),Object(a.jsxs)(Xae,{style:{display:t===Kae.Tasks?"flex":"none"},children:[!n.has(Dw.OPERATIONS_TASKS_VIEW)&&Object(a.jsx)(QC,{color:y.gray1}),e.state[Kae.Tasks]&&Object(a.jsx)(Gae,{locationArea:r,date:o})]}),Object(a.jsxs)(Xae,{style:{display:t===Kae.Staff?"flex":"none"},children:[!n.has(Dw.OPERATIONS_STAFF_VIEW)&&Object(a.jsx)(QC,{color:y.gray1}),e.state[Kae.Staff]&&Object(a.jsx)(Dae,{locationArea:r,date:o})]}),Object(a.jsxs)(Xae,{style:{display:t===Kae.Vehicles?"flex":"none"},children:[!n.has(Dw.OPERATIONS_VEHICLES_VIEW)&&Object(a.jsx)(QC,{color:y.gray1}),e.state[Kae.Vehicles]&&Object(a.jsx)(qae,{locationArea:r,date:o})]})]})}})}}]),n}(p.PureComponent),eoe=Object(LO.compose)(v.g)($ae);function toe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n\n  :last-child {\n    border-right: 0;\n  }\n"]);return toe=function(){return e},e}function noe(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return noe=function(){return e},e}function roe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: ","px;\n  flex-shrink: 0;\n  background: ",";\n  color: ",";\n"]);return roe=function(){return e},e}var aoe=x.default.div(roe(),50,y.blue6,y.white),ooe=x.default.div(noe()),ioe=x.default.div(toe(),y.white),coe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.children;return Object(a.jsxs)(aoe,{className:"print-hide",children:[!!t&&Object(a.jsx)(ooe,{children:Object(a.jsx)(ioe,{children:t})}),n]})}}]),n}(h.a.PureComponent);function soe(){var e=Object(f.a)(["\n  .schedule-print-divider {\n    margin: 20px 0;\n    width: 100%;\n    border-top: 1px solid gainsboro;\n  }\n\n  .schedule-print-divider:last-of-type {\n    display: none;\n  }\n\n  .schedule-print-table .task-note {\n    color: gray;\n    font-style: italic;\n    margin-top: 3px;\n  }\n"]);return soe=function(){return e},e}function loe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return loe=function(){return e},e}function uoe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n\n  :last-child {\n    border-right: 0;\n  }\n"]);return uoe=function(){return e},e}function doe(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return doe=function(){return e},e}var poe=x.default.div(doe()),hoe=x.default.div(uoe(),y.white),boe=Object(x.default)(J3)(loe()),foe=Object(x.css)(soe()),moe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={date:qf()(),location:e.props.activeLocation},e.initLocation=function(){var t=e.props.locations;t.length&&e.onLocationChange(e.state.location||e.findPrimaryLocation()||t[0])},e.findPrimaryLocation=function(){return e.props.locations.find((function(e){return e.primary}))},e.dateTriggerRender=function(){var t=e.state.date;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[t.format("D MMMM YYYY"),Object(a.jsx)(J3,{style:{marginLeft:"10px"},color:y.white,name:Ef.Calendar})]})},e.timePickerRender=function(t){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(by.a,{input:!1,timeFormat:!1,onChange:e.onDateChange})})},e.onDateChange=function(t){var n=e.props.onDateChange;n&&n(t),e.setState({date:t})},e.locationsTriggerRender=function(){var t=e.state.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(J3,{style:{marginLeft:"20px"},color:y.white,name:Ef.ArrowDown})]})},e.locationsItems=function(){var t=e.props.locations,n=e.state.location;return t.map((function(t){return{name:t.name,classNames:t.id===(n||{}).id?"active":"",onClick:function(){return e.onLocationChange(t)}}}))},e.onLocationChange=function(t){var n=e.props.onLocationChange;n&&n(t),e.setState({location:t})},e.prevDate=function(){var t=e.state.date,n=qf()(t).subtract(1,"d"),r=e.props.onDateChange;r&&r(n),e.setState({date:n})},e.nextDate=function(){var t=e.state.date,n=qf()(t).add(1,"d"),r=e.props.onDateChange;r&&r(n),e.setState({date:n})},e.print=function(){var t=e.props.runs,n=e.state,r=n.date,a=n.location;t.filter((function(e){return e.id>0})).length&&r&&a&&JV()({printable:"print-runs",type:"html",style:foe.toString()})},e.showTemplatesSettings=function(){e.props.history.push("/operations/schedule/config/runs",{location:e.state.location})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initLocation(),this.onDateChange(qf()())}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;0===e.locations.length&&t.length&&this.initLocation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.locationsLoading,o=t.locations,i=t.onMapIconClick,c=t.showMap,s=t.runs,l=this.state.location;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(coe,{title:n,children:Object(a.jsxs)(poe,{children:[Object(a.jsxs)(hoe,{children:[Object(a.jsx)(yw,{trigger:function(){return e.dateTriggerRender()},renderInternal:e.timePickerRender}),Object(a.jsx)(boe,{onClick:e.prevDate,style:{marginLeft:"30px"},color:y.white,name:Ef.ArrowLeft}),Object(a.jsx)(boe,{onClick:e.nextDate,style:{transform:"rotateZ(180deg)",marginLeft:"10px"},color:y.white,name:Ef.ArrowLeft})]}),Object(a.jsxs)(hoe,{children:[r&&Object(a.jsx)(av,{size:30,color:y.blue6}),!o||o&&0===o.length?Object(a.jsx)("div",{children:"No locations"}):Object(a.jsx)(yw,{trigger:function(){return e.locationsTriggerRender()},items:e.locationsItems()})]}),Object(a.jsx)(hoe,{children:Object(a.jsx)(J3,{style:{cursor:"pointer",opacity:l?1:.5},color:y.white,onClick:i,name:c?Ef.LayoutBullets:Ef.LocationPin})}),Object(a.jsx)(hoe,{children:Object(a.jsx)(J3,{style:{cursor:"pointer",opacity:s.filter((function(e){return e.id>0})).length>0?1:.5},color:y.white,name:Ef.Printer,onClick:e.print})}),t.has(Dw.OPERATIONS_RUNS_TEMPLATES_MANAGE)&&Object(a.jsx)(hoe,{children:Object(a.jsx)(J3,{style:{cursor:"pointer",opacity:l?1:.5,filter:"brightness(2)"},color:y.white,name:Ef.Setting,onClick:e.showTemplatesSettings})})]})})}})}}]),n}(h.a.PureComponent),joe=Object(v.g)(moe);function voe(){var e=Object(f.a)(["\n  overflow: hidden auto;\n  border: 1px solid ",";\n  &.invalid{\n    border-color: ",";\n    border-width: 2px;\n  }\n"]);return voe=function(){return e},e}function Ooe(){var e=Object(f.a)(["\n  display: flex;\n  height: 50px;\n"]);return Ooe=function(){return e},e}var goe=x.default.div(Ooe()),xoe=x.default.div(voe(),y.gray2,y.red1),yoe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,activeTabId:bre.Details,detailsValues:{},staffValues:{},vehiclesValues:{}},e.tabs=[{name:"Details",id:bre.Details,onClick:function(){return e.setState({activeTabId:bre.Details})}},{name:"Staff",id:bre.Staff,onClick:function(){return e.setState({activeTabId:bre.Staff})}},{name:"Vehicles",id:bre.Vehicles,onClick:function(){return e.setState({activeTabId:bre.Vehicles})}}],e.onDetailsSubmit=function(t){e.setState({detailsValues:t})},e.onStaffSubmit=function(t){e.setState({staffValues:t})},e.onVehiclesSubmit=function(t){e.setState({vehiclesValues:t})},e.submitCombine=Object(Um.a)(Fm.a.mark((function t(){var r,a,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.template,i=r.run,c=r.id,e.setState({loading:!0}),t.prev=2,t.next=5,a(Object(xv.c)(Gne+c));case 5:return t.next=7,a(Object(xv.c)(Xne+c));case 7:return t.next=9,a(Object(xv.c)(ore+c));case 9:return s=e.state,l=s.detailsValues,u=s.staffValues,d=s.vehiclesValues,t.next=12,n._submitCombine(o,i,[l,u,d]);case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,,12,15]])}))),e.removeRun=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.template,o=n.run,i=n.onRemove,c=n.dispatch,t.next=3,c(Sw("Confirm","Remove Run!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove run ",Object(a.jsx)("strong",{children:o.name}),"?"]})));case 3:if(!t.sent){t.next=11;break}if(e.setState({loading:!0}),!o.id){t.next=9;break}return t.next=9,pz.removeTemplatedRun(r.id,o.id);case 9:null===i||void 0===i||i(o),e.setState({loading:!1});case 11:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.loading,n=e.activeTabId,r=this.props,o=r.location,i=r.template,s=r.run,l=r.id,u=r.vehicles,d=(0,r.validateForm)(Gne+l),p=Object(c.a)({date:"1800-01-01",location_id:o.id},s);return Object(a.jsxs)("div",{className:"d-flex flex-column h-100 position-relative",children:[t&&Object(a.jsx)(av,{size:40,color:y.white,zIndex:80}),Object(a.jsx)(goe,{children:Object(a.jsx)(yz,{selectedTabId:n,items:this.tabs})}),Object(a.jsx)(xoe,{className:"p-3 d-flex flex-column h-100 ".concat(d?"":"invalid"),children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(n===bre.Details?"d-block":"d-none"),children:Object(a.jsx)(Qne,{template:i,form:Gne+l,onSubmit:this.onDetailsSubmit,initialValues:{name:s.name}},l)}),Object(a.jsx)("div",{className:"".concat(n===bre.Staff?"d-block":"d-none"),children:Object(a.jsx)(ere,{template:i,run:p,form:Xne+l,onSubmit:this.onStaffSubmit},l)}),Object(a.jsx)("div",{className:"".concat(n===bre.Vehicles?"d-block":"d-none"),children:Object(a.jsx)(cre,{template:i,run:p,vehicles:u,form:ore+l,onSubmit:this.onVehiclesSubmit},l)})]})}),Object(a.jsx)("div",{className:"mt-2",children:Object(a.jsx)(FS,{className:"d-inline-block",children:Object(a.jsx)(PS,{color:y.red1,colorOnHover:y.red1,onClick:this.removeRun,children:"Remove Run"})})})]})}}]),n}(p.Component);yoe._submitCombine=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a,o,i,c,s;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(w.a)(r,3),o=a[0],i=a[1],c=a[2],s=[],n.id){e.next=8;break}return e.next=5,pz.createTemplatedRun(t.id,{location_id:n.location_id,name:o.name});case 5:n=e.sent,e.next=9;break;case 8:o.name!==n.name&&s.push(pz.updateTemplatedRun(t.id,n.id,o));case 9:return s.push(yoe.onAssignUsers(t,n,i)),s.push(yoe.onAssignVehicles(t,n,c)),e.next=13,Promise.all(s);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),yoe.onAssignUsers=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a,o,i,c,s;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(n.assigned_users||[]).map((function(e){return e.id})),o=(r.selectedUsers||[]).map((function(e){return e.id})),i=Object(m.intersection)(a,o),c=Object(m.difference)(o,i),s=Object(m.difference)(a,i),e.next=7,Promise.all([Promise.all(c.map((function(e){return pz.assignStaffToTemplatedRun(t.id,n.id,e)}))),Promise.all(s.map((function(e){return pz.removeStaffFromTemplatedRun(t.id,n.id,e)})))]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),yoe.onAssignVehicles=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n,r){var a,o,i,c,s;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(n.assigned_vehicles||[]).map((function(e){return e.id})),o=(r.selectedVehicles||[]).map((function(e){return e.id})),i=Object(m.intersection)(a,o),c=Object(m.difference)(o,i),s=Object(m.difference)(a,i),e.next=7,Promise.all([Promise.all(c.map((function(e){return pz.assignVehicleToTemplatedRun(t.id,n.id,e)}))),Promise.all(s.map((function(e){return pz.removeVehicleFromTemplatedRun(t.id,n.id,e)})))]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var woe=Object(LO.compose)(Object(b.b)((function(e){return{validateForm:function(t){return Object(GA.a)(t)(e)}}})))(yoe);function _oe(){var e=Object(f.a)(["\n  flex: 0 0 33.333333%;\n  max-width: 33.333333%\n"]);return _oe=function(){return e},e}function koe(){var e=Object(f.a)(["\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return koe=function(){return e},e}function Soe(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return Soe=function(){return e},e}function Coe(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return Coe=function(){return e},e}var Noe=x.default.div(Coe()),Eoe=x.default.div(Soe()),Aoe=x.default.div(koe(),y.gray2,y.gray2),Toe=x.default.div(_oe()),Ioe="runs_def_tpl",Roe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={template:null,runs:[],vehicles:[],loading:!1},e.loadTemplates=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.templates.fetch({location_id:e.props.location.id,name:Ioe});case 3:return n=t.sent,t.abrupt("return",n||[]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.createTemplate=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,pz.createRunTemplate({location_id:e.props.location.id,name:Ioe});case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.prepareTemplate=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTemplates();case 2:if(!(null===(r=t.sent)||void 0===r?void 0:r.length)){t.next=7;break}n=r[0],t.next=10;break;case 7:return t.next=9,e.createTemplate();case 9:n=t.sent;case 10:return e.setState({template:n}),t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)}))),e.loadRuns=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=n,t.t0){t.next=6;break}return t.next=5,e.prepareTemplate();case 5:t.t0=t.sent;case 6:if(!(r=t.t0)){t.next=13;break}return t.next=10,e.props.runs.fetch(r.id);case 10:o=t.sent,(null===(a=o)||void 0===a?void 0:a.length)||(o=e.defaultRuns),e.setState({runs:o});case 13:t.next=17;break;case 15:t.prev=15,t.t1=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),e.loadVehicles=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.location,t.next=3,Q5.searchVehicles(n.id);case 3:r=t.sent,e.setState({vehicles:r});case 5:case"end":return t.stop()}}),t)}))),e.loadConfigData=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.location){t.next=5;break}return e.setState({loading:!0}),t.next=4,Promise.all([e.loadRuns(),e.loadVehicles()]);case 4:e.setState({loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.setRawTemplates=function(){var t,n=parseInt((null===(t=e.count.current)||void 0===t?void 0:t.value)||"");if(!isNaN(n)&&n>0){for(var r,a,o=e.state.runs,c=o.length,s=e.props.location,l=0;l<n;l++){a=0;do{r="".concat(s.code," Run ").concat(o.length+1+a++)}while(j.a.find(o,{name:r}));o.push({tmpId:"t-"+(Date.now()+o.length+1),location_id:s.id,name:r})}e.setState({runs:o}),setTimeout((function(){var t,n=i.a.findDOMNode(Object(jG.a)(e));null===n||void 0===n||null===(t=n.getElementsByClassName("run-wrapper")[c])||void 0===t||t.scrollIntoView()}))}},e.saveAllTemplatedRuns=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.template,a=n.runs,e.setState({loading:!0}),t.prev=2,t.next=5,Promise.all(a.map((function(t){return e.validateTemplatedRun(r,t)})));case 5:return t.next=7,e.validateUniqRuns();case 7:return t.prev=7,t.next=10,Promise.all(a.map((function(t){return e.saveTemplatedRun(r,t)})));case 10:return t.next=12,e.loadRuns(r);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(2),Qm(Vm.Danger,t.t1.message);case 21:e.setState({loading:!1});case 22:case"end":return t.stop()}}),t,null,[[2,18],[7,14]])}))),e.saveTemplatedRun=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.props,o=a.validateForm,i=a.getFormValues,c=r.id||r.tmpId,!o(Gne+c)){t.next=9;break}return s=i(Gne+c),l=i(Xne+c),u=i(ore+c),t.next=9,yoe._submitCombine(n,r,[s,l,u]);case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}(),e.validateTemplatedRun=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,o=a.dispatch,i=a.validateForm,c=r.id||r.tmpId,!i(Gne+c)){t.next=6;break}return t.abrupt("return",!0);case 6:o(Object(xv.c)(Gne+c));case 7:throw Error("Run name is required");case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.validateUniqRuns=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.runs,r=e.props.getFormValues,a=n.map((function(e){return r(Gne+(e.id||e.tmpId))})).map((function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{name:null===(t=e.name)||void 0===t?void 0:t.trim().toLowerCase()})})),j.a.uniqBy(a,"name").length===a.length){t.next=6;break}throw Error("Runs name must be unique");case 6:if(o=j.a.flatten(n.map((function(e){return r(ore+(e.id||e.tmpId)).selectedVehicles}))),j.a.uniqBy(o,"id").length===o.length){t.next=10;break}throw Error("Same vehicle cannot be assigned to multiple runs");case 10:case"end":return t.stop()}}),t)}))),e.onRunRemove=function(t,n){return function(){var t=e.state.runs;t.splice(n,1),e.setState({runs:t})}},e.close=function(){var t,n;null===(t=(n=e.props).onClose)||void 0===t||t.call(n)},e.count=h.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadConfigData()}},{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.location)||void 0===t?void 0:t.id)!==(null===(n=this.props.location)||void 0===n?void 0:n.id)&&this.loadConfigData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.runs.loading,r=t.location,o=this.state,i=o.template,c=o.runs,s=o.vehicles;return Object(a.jsxs)(Noe,{className:"d-flex flex-column h-100 position-relative",children:[(n||this.state.loading)&&Object(a.jsx)(av,{size:40,color:y.white,zIndex:110}),Object(a.jsxs)(Aoe,{className:"d-flex align-items-center px-5 py-2",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsxs)("div",{className:"mr-3",children:["Create ",Object(a.jsx)("strong",{children:c.length})," run(s) each day."]}),Object(a.jsx)("div",{className:"ml-5 mr-3",children:"Add"}),Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)("input",{className:"form-control",ref:this.count,type:"number",min:1,max:50,defaultValue:1,onKeyPress:function(t){/enter/i.test(t.key)&&setTimeout(e.setRawTemplates,100)}})}),Object(a.jsx)("div",{className:"mr-3",children:"more run(s)"}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-info",onClick:this.setRawTemplates,children:"Add"})})]}),Object(a.jsxs)("div",{className:"d-flex flex-grow-1 align-items-center justify-content-end",children:[Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-dark mr-3",onClick:this.close,children:"Close"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.saveAllTemplatedRuns,disabled:!c.length,children:"Save All"})})]})]}),Object(a.jsx)(Eoe,{className:"d-flex h-100 px-5 py-3",children:null===c||void 0===c?void 0:c.map((function(t,n){return Object(a.jsx)(Toe,{className:"h-100 run-wrapper",children:Object(a.jsx)("div",{className:"mr-3 h-100",children:Object(a.jsx)(woe,{location:r,template:i,run:t,vehicles:s,id:t.id||t.tmpId,onRemove:e.onRunRemove(t,n)})})},t.id||t.tmpId)}))})]})}},{key:"defaultRuns",get:function(){var e=this.props.location;return[{tmpId:"t-"+(Date.now()+1),name:"".concat(e.code," Run 1"),location_id:e.id}]}}]),n}(p.Component),Doe=Object(LO.compose)(Object(b.b)((function(e){return{validateForm:function(t){return Object(GA.a)(t)(e)},getFormValues:function(t){return Object(eM.a)(t)(e)}}})),Mm({templates:{fetch:pz.getRunsTemplates},runs:{fetch:pz.getTemplatedRuns}}))(Roe);function Moe(){var e=Object(f.a)(["\n  height: 100%;\n  overflow: auto;\n"]);return Moe=function(){return e},e}var Poe=x.default.div(Moe()),Loe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(r=t.call.apply(t,[this].concat(i))).state={date:null,showMap:!1,location:null===(e=r.props.location.state)||void 0===e?void 0:e.location,loading:!1,showTaskSettingsModal:!1,addTaskToRunConfig:{},runsTemplate:void 0,templatedRuns:void 0},r.detectTimeConflictForStaff=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var a,o,i,c;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.a.flatten(j.a.map(r.props.runs.data,"assigned_slots")),o=t.assigned_users.concat(n.assigned_users||[]),i={},j.a.forEach(o,(function(e){c=j.a.filter(a,(function(t){return j.a.find(t.assigned_users,{id:e.id})})),j.a.forEach(c,(function(t){qf.a.max(qf()(t.starts_at),qf()(n.starts_at))<qf.a.min(qf()(t.ends_at),qf()(n.ends_at))&&(i[e.id]={user:e,task:t})}))})),e.abrupt("return",!j.a.isEmpty(i)&&j.a.values(i));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.createRunsFromTemplate=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,a,o,i,s;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=r.props.runs,!t.job_run_template_id){e.next=12;break}return e.next=5,pz.createRunsFromTemplate(t.job_run_template_id,{date:t.date,run_id:t._id});case 5:a=e.sent.map((function(e){return Object(c.a)(Object(c.a)({},{assigned_users:[],assigned_vehicles:[],assigned_slots:[]}),e)})),(o=a.find((function(e){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=t.name)||void 0===r?void 0:r.toLowerCase())})))&&(t.id=o.id,delete t.job_run_template_id),n.data||(n.data=[]),a.forEach((function(e){var t=n.data.findIndex((function(t){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=t.name)||void 0===r?void 0:r.toLowerCase())}));t>-1?n.data[t]=e:n.data.push(e)})),e.next=18;break;case 12:if(t.id&&!(t.id<1)){e.next=18;break}return e.next=15,pz.createRun(t);case 15:i=e.sent,t.id=i.id,t.job_run_template_id&&delete t.job_run_template_id;case 18:return setTimeout((function(){uy.emit(Kg.RunsCreatedFromTemplate,t)}),1),e.abrupt("return",t);case 22:return e.prev=22,e.t0=e.catch(0),uy.emit(Kg.RunsCreatedFromTemplate,null),(null===e.t0||void 0===e.t0?void 0:e.t0.status_code)===Dg&&(s=j.a.first(j.a.flatten(j.a.values(e.t0.fields))),Qm(Vm.Danger,s)),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),r.addEmptyRun=Object(Um.a)(Fm.a.mark((function e(){var t,n,a,o,i,c,s;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.props.runs,n=r.state,a=n.date,o=n.location,t.data||(t.data=[]),c=0;do{i="".concat(o.code," Run ").concat(t.data.length+1+c++)}while(j.a.find(t.data,{name:i}));return s={id:0,name:i,date:qf()(a).format(Dj),location_id:o.id,assigned_slots:[],assigned_vehicles:[],assigned_users:[]},t.data.push(s),setTimeout((function(){r.forceUpdate()}),1),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),r.removeEmptyRun=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,a;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props.runs,-1!==(a=n.data.indexOf(t))&&(n.data.splice(a,1),setTimeout((function(){r.forceUpdate()}),1)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadRuns=Object(Um.a)(Fm.a.mark((function e(){var t,n,a,o,i,c,s,l,u,d,p,h,b,f;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.date,a=t.location,r.setState({loading:!0}),o=r.props.dispatch,!n||!a){e.next=32;break}return e.next=6,o(h0({date:n.format(Mj),location_id:a.id}));case 6:if((i=r.props.runs).loading||!i||!i.data){e.next=32;break}if(s=r.state,l=s.runsTemplate,u=s.templatedRuns,void 0!==l){e.next=15;break}return e.next=12,pz.getRunsTemplates({location_id:a.id,name:Ioe});case 12:1===(null===(d=e.sent)||void 0===d?void 0:d.length)?l=d[0]:(l=null,u=[]),r.setState({runsTemplate:l,templatedRuns:u});case 15:if(!l||void 0!==u){e.next=20;break}return e.next=18,pz.getTemplatedRuns(l.id);case 18:u=e.sent,r.setState({templatedRuns:u});case 20:if(!(null===(c=u)||void 0===c?void 0:c.length)){e.next=27;break}b=null===(p=u)||void 0===p?void 0:p.map((function(e,t){return(h=j.a.find(i.data,{name:e.name}))?h:(e._id=e._id||e.id,e.id=-1*t-1,e.date=qf()(n).format(Dj),e.assigned_slots=[],e.location_id=a.id,e)})),f=Object(m.differenceBy)(i.data||[],b||[],"name"),i.data=b.concat(f),r.forceUpdate(),e.next=32;break;case 27:if(0!==i.data.length){e.next=32;break}return e.next=30,r.addEmptyRun();case 30:e.sent.id=-1;case 32:r.setState({loading:!1});case 33:case"end":return e.stop()}}),e)}))),r.debouncedLoadRuns=Object(m.debounce)(r.loadRuns,100),r.eventListeners=[uy.listen(Kg.TaskWasAddedToRun,r.debouncedLoadRuns),uy.listen(Kg.TaskWasRemovedFromRun,r.debouncedLoadRuns),uy.listen(Kg.TaskWasUpdated,r.debouncedLoadRuns),uy.listen(Kg.CreateRunsFromTemplate,r.createRunsFromTemplate),uy.listen(Kg.EmptyRunRemoved,r.removeEmptyRun)],r.onDateChange=function(e){r.setState({date:e}),r.debouncedLoadRuns()},r.onLocationChange=function(e){r.setState({location:e,runsTemplate:void 0,templatedRuns:void 0}),r.debouncedLoadRuns()},r.toggleShowMap=function(){var e=r.state,t=e.location,n=e.showMap;t&&r.setState({showMap:!n})},r.addNewRun=Object(Um.a)(Fm.a.mark((function e(){var t,n,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.runs,n=r.state,a=n.date,o=n.location,!a||!o){e.next=12;break}return r.setState({loading:!0}),e.prev=4,e.next=7,pz.createRun({location_id:o.id,date:a.format(Dj),name:"Run ".concat(t.data?t.data.length+1:1)});case 7:return e.next=9,r.loadRuns();case 9:return e.prev=9,r.setState({loading:!1}),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[4,,9,12]])}))),r.openTaskSettingModal=function(e){r.setState({showTaskSettingsModal:!0,addTaskToRunConfig:e})},r.closeTaskSettingModal=function(){r.setState({showTaskSettingsModal:!1})},r.onAddTaskToRun=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,o,i,c,s,l,u,d,p,h;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.state,o=n.addTaskToRunConfig,i=o.runId,c=o.task,s=o.assigned_slot,l=n.location,u=r.props.runs.data.find((function(e){return+e.id===+i})),e.next=4,r.createRunsFromTemplate(u);case 4:if(d=e.sent.id,!l){e.next=13;break}return e.next=8,r.detectTimeConflictForStaff(u,t);case 8:p=e.sent,h=!p,Object(Um.a)(Fm.a.mark((function e(){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=4;break}return e.next=3,r.props.dispatch(Sw("Confirm","Assign Staff to Task",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:[1===p.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:p[0].user.full_name})," is"]}):Object(a.jsx)(a.Fragment,{children:"Following staff members are"})," already booked between ",t.starts_at.format(Fj)," to ",t.ends_at.format(Fj),"."]}),p.length>1&&Object(a.jsx)("p",{children:p.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:e.user.full_name})})}))}),Object(a.jsx)("p",{children:"Are you sure you want to proceed?"})]})));case 3:h=e.sent;case 4:if(!h){e.next=19;break}if(n={starts_at:Wj(t.starts_at,!0),ends_at:Wj(t.ends_at,!0),is_confirmed:t.is_confirmed,scheduling_note:t.scheduling_note},!s){e.next=16;break}if(s.job_run_id===+d){e.next=12;break}return e.next=10,pJ.moveTaskSlotToRun(+d,s.id,n);case 10:e.next=14;break;case 12:return e.next=14,pJ.updateTaskSlotToRun(+d,s.id,n);case 14:e.next=18;break;case 16:return e.next=18,pJ.addTaskSlotToRun(+d,c.id,n);case 18:uy.emit(Kg.TaskWasAddedToRun);case 19:case"end":return e.stop()}}),e)})))(),e.next=14;break;case 13:uy.emit(Kg.TaskWasAddedToRun);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.renderPrintVersion=function(){var e=r.props.runs,t=r.state,n=t.location,o=t.date,i=n,c=o;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h3",{children:["Schedule for ",i&&i.name,", ",c&&c.format(Pj)]}),e.data&&e.data.filter((function(e){return e.id>0})).map((function(t,n){var r;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:t.name}),Object(a.jsxs)("div",{children:["Assigned staff: ",t.assigned_users.map((function(e){return Yf(e).name})).join(", ")]}),Object(a.jsxs)("div",{children:["Assigned vehicles:"," ",t.assigned_vehicles.map((function(e){return"".concat(e.make," ").concat(e.model," (").concat(e.type,", ").concat(e.registration,")")})).join(", ")]}),(null===(r=t.assigned_slots)||void 0===r?void 0:r.length)>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("table",{className:"schedule-print-table",children:Object(a.jsx)("tbody",{children:t.assigned_slots.sort((function(e,t){return qf()(e.starts_at).isAfter(qf()(t.starts_at))?1:-1})).map((function(e,n){var r=e.job_task,o=Object(Rm.a)(e,["job_task"]);return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"task-number",children:["#",n+1,"\xa0\xa0\xa0"]}),Object(a.jsxs)("td",{children:[r.job&&Object(a.jsxs)(a.Fragment,{children:[r.job.site_address&&r.job.site_address.full_address,Object(a.jsxs)("div",{children:[r.type.name,", #",r.job.id,i&&"-".concat(i.code)]})]}),Object(a.jsxs)("div",{children:[qf()(o.starts_at).format(Fj),"\xa0-\xa0",qf()(o.ends_at).format(Fj)]}),r.internal_note&&Object(a.jsx)("div",{className:"task-note",children:r.internal_note}),o.scheduling_note&&Object(a.jsx)("div",{className:"task-note",children:o.scheduling_note}),n<t.assigned_slots.length-1&&Object(a.jsx)("br",{})]})]},o.id)}))})})]})]}),n<e.data.length-1&&Object(a.jsx)("div",{className:"schedule-print-divider"})]},t.id)}))]})},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){um.status("Schedule")}},{key:"componentWillUnmount",value:function(){um.reset(),this.props.dispatch({type:u0}),this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.runs,o=this.state,i=o.showMap,c=o.loading,s=o.templatedRuns,l=o.location,u=o.date,d=o.showTaskSettingsModal,p=o.addTaskToRunConfig;return Object(a.jsx)(Cw.Consumer,{children:function(t){var o;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{style:{position:"absolute",right:"100%",display:"none"},children:Object(a.jsx)("div",{id:"print-runs",children:e.renderPrintVersion()})}),d&&l&&Object(a.jsx)(Iz,{addTaskToRunConfig:p,isOpen:d,onClose:e.closeTaskSettingModal,edit:!1,taskTypes:[],onSave:e.onAddTaskToRun,task:p.task,mode:Cz.ADD_TASK_TO_RUN,isSchedulingActive:!0,doSave:!1,doAssign:!1}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(joe,{title:"Schedule",locations:n,activeLocation:l,locationsLoading:!1,onMapIconClick:e.toggleShowMap,showMap:i,onDateChange:e.onDateChange,onLocationChange:e.onLocationChange,runs:r.loading?[]:r.data||[]}),Object(a.jsx)(Poe,{className:"d-flex flex-row align-items-stretch flex-grow-1 position-relative",children:i&&l?Object(a.jsx)(fne,{runs:r.data||[],loadingRuns:r.loading,location:l,date:u}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(eoe,{locationArea:l,date:u,ready:r.ready}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(!l||!u)&&Object(a.jsx)(QC,{zIndex:110}),(r.loading||c||void 0===s)&&Object(a.jsx)(av,{size:40,color:y.white,zIndex:110}),Object(a.jsx)("div",{className:"h-100 w-100 position-absolute",children:Object(a.jsx)(Wre,{createNewRun:e.addEmptyRun,loadRuns:e.loadRuns,runs:r.data||[],openModal:e.openTaskSettingModal,location:l,date:u},null===(o=r.data)||void 0===o?void 0:o.length)})]})]})})]})]})}})}}]),n}(p.PureComponent),Foe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{locations:e.user.locations,runs:e.runsFromLocation}})),Object(Jte.DragDropContext)(qte.a))(Loe),Uoe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.jobId;return Object(a.jsx)(Uf.b,{to:"/job/".concat(e,"/details"),children:Object(a.jsx)("button",{className:"btn btn-outline-primary",children:"View Job"})})}}]),n}(p.PureComponent),Voe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params.id;return Object(a.jsx)("div",{children:Object(a.jsx)(Uoe,{jobId:parseInt(e)})})}},{key:"renderContentPage",value:function(){return Object(a.jsx)(hC,{children:"UsageAndActualsCrewReportPage"})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Boe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob}})))(Voe);function Joe(){var e=Object(f.a)(["\n  thead {\n    tr {\n      th {\n        border-bottom: 1px solid ",";\n        &:first-child {\n          color: ",";\n        }\n      }\n    }\n  }\n\n  tbody {\n    tr {\n      border-top: 1px solid ",";\n    }\n  }\n"]);return Joe=function(){return e},e}var zoe=Object(x.default)(uF)(Joe(),y.gray2,y.black1,y.gray2);function qoe(){var e=Object(f.a)(["\n  margin-left: 10px;\n  padding-top: 3px;\n"]);return qoe=function(){return e},e}function Woe(){var e=Object(f.a)(["\n  border: 1px "," solid;\n  border-radius: 4px;\n  color: ",";\n  background-color: ",";\n  padding: 5px 7px 3px 7px;\n  font-size: ",";\n  font-weight: ",";\n"]);return Woe=function(){return e},e}var Hoe=x.default.span(Woe(),y.blue1,y.blue1,y.white,Vf.smaller,Bf.medium),Goe=x.default.span(qoe()),Yoe="EquipmentCustomForm",Qoe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={endDateDisabled:!1},e.loadOptions=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={term:n,job_id:e.props.jobId},t.next=3,dH.searchEquipment(r);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchJobs=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ly.searchJobs(t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadOptions=_v()(e.loadOptions,500),e.debouncedSearchJobs=_v()(e.searchJobs,500),e.onSelectEquipment=function(t){(0,e.props.change)("unit_cost_to_me",t.category.default_buy_cost_per_interval)},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.onSubmit,o=r.afterSubmit,i=r.initialValues,c=r.jobId,!a){t.next=3;break}return t.abrupt("return",a(n));case 3:if(t.prev=3,!c){t.next=17;break}if(!n.id){t.next=14;break}if(!n.ended_at||!n.ended_at.isValid()||qf()(i.ended_at).isSame(n.ended_at)){t.next=9;break}return t.next=9,ly.updateJobEquipmentFinishUsing(c,n.id,Wj(n.ended_at,!0));case 9:if(i.intervals_count_override===n.intervals_count_override){t.next=12;break}return t.next=12,ly.updateJobEquipmentOverride(c,n.id,n.intervals_count_override);case 12:t.next=17;break;case 14:return s=n.equipment.id,t.next=17,ly.addEquipmentToJob(c,{equipment_id:s,started_at:Wj(n.started_at,!0)||void 0,ended_at:Wj(n.ended_at,!0)||void 0});case 17:null===o||void 0===o||o(),t.next=23;break;case 20:return t.prev=20,t.t0=t.catch(3),t.abrupt("return",Mg(t.t0));case 23:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.edit,n=e.endedAt,r=e.change;t&&n&&n.isValid()&&this.setState({endDateDisabled:!0}),t||r("started_at",qf()())}},{key:"formatTotalAmount",value:function(e,t){return t?Kf(e):"--"}},{key:"formatFormPrice",value:function(e){return Kf(e)}},{key:"renderEquipmentOption",value:function(e){return Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsxs)(Hoe,{children:[e.barcode,"-",e.location?e.location.code:""]}),Object(a.jsx)(Goe,{children:e.model})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.edit,o=t.endedAt,i=t.jobId,c=t.submitting,s=t.hideEquipmentField;return Object(a.jsxs)("form",{onSubmit:n(this.onSubmit),autoComplete:"off",id:Yoe,children:[c&&Object(a.jsx)(av,{size:40,color:y.white}),!s&&Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col",children:[i&&Object(a.jsx)(yv.a,{name:"equipment",validate:uv,component:rO,getOptionValue:function(e){return e.id},getOptionLabel:this.renderEquipmentOption,placeholder:"Enter barcode or name of equipment",loadOptions:this.debouncedLoadOptions,label:"Equipment Item",onChange:this.onSelectEquipment,disabled:r}),!i&&Object(a.jsx)(yv.a,{name:"job",validate:uv,component:rO,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return ly.getJobName(e)},placeholder:"Search job...",loadOptions:this.debouncedSearchJobs,label:"Job"})]})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"unit_cost_to_me",disabled:!0,component:ZO,label:"Unit Cost to Me",format:this.formatFormPrice})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"unit_price_to_charge",disabled:!0,component:ZO,label:"Unit Price to Charge",format:this.formatFormPrice})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"total_amount",disabled:!0,component:ZO,label:"Total Amount",format:function(t){return e.formatTotalAmount(t,!!r)}})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"started_at",validate:uv,component:Cy,showTime:!0,label:"Start Date",disabled:r})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"ended_at",component:Cy,showTime:!0,label:"End Date",disabled:this.state.endDateDisabled})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"intervals_count_override",validate:[mv],component:ZO,type:"number",min:0,label:"Period on site",disabled:!(o&&o.isValid())||!r})})]})]})}}]),n}(p.PureComponent),Koe=Object(LO.compose)(Object(Gj.a)({form:Yoe,enableReinitialize:!0}),Object(UO.a)({endedAt:"ended_at"}))(Qoe),Zoe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e.renderBody=function(){var t=e.props,n=t.equipment,r=t.jobId;return Object(a.jsx)(Koe,{onSubmit:e.sendCustomData,edit:!!n,initialValues:n&&_W(n),jobId:r})},e.sendCustomData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.jobId,o=r.onClose,i=r.equipment,c=r.dispatch,e.setState({loading:!0}),t.prev=2,!i){t.next=12;break}if(!n.ended_at||!n.ended_at.isValid()||qf()(i.ended_at).isSame(n.ended_at)){t.next=7;break}return t.next=7,ly.updateJobEquipmentFinishUsing(a,i.id,n.ended_at.utc().format(Mj));case 7:if(i.intervals_count_override===n.intervals_count_override){t.next=10;break}return t.next=10,ly.updateJobEquipmentOverride(a,i.id,n.intervals_count_override);case 10:t.next=16;break;case 12:return s=n.equipment.id,t.next=15,ly.addEquipmentToJob(a,{equipment_id:s,started_at:n.started_at&&n.started_at.utc().format(Mj),ended_at:n.ended_at&&n.ended_at.utc().format(Mj)});case 15:c(RH(a));case 16:c(TH(a));case 17:return t.prev=17,o(),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[2,,17,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"renderFooter",value:function(){var e=this.props.equipment;return Object(a.jsx)(Cg,{className:"btn btn-primary",form:Yoe,children:e?"Save":"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.equipment;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:r?"Edit Equipment":"Add Equipment",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function Xoe(){var e=Object(f.a)(["\n  color: ",";\n  font-size: ",";\n"]);return Xoe=function(){return e},e}function $oe(){var e=Object(f.a)(["\n  padding-right: 50px !important;\n"]);return $oe=function(){return e},e}function eie(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return eie=function(){return e},e}function tie(){var e=Object(f.a)(["\n  vertical-align: top;\n"]);return tie=function(){return e},e}var nie,rie=Object(x.default)(NC)(tie()),aie=x.default.div(eie()),oie=x.default.td($oe()),iie=x.default.span(Xoe(),y.gray5,Vf.smaller),cie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1,showEditModal:!1,equipmentForEditing:void 0},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.onCustomAdd=function(){e.setState({equipmentForEditing:void 0}),e.onOpenModal()},e.deleteEquipmentFromJob=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(Sw("Confirm","Delete Equipment: ".concat(n.equipment.model," ?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,ly.deleteJobEquipment(parseInt(o),n.id);case 7:e.loadEquipments();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editEquipment=function(t){e.setState({equipmentForEditing:t}),e.onOpenModal()},e.markAsUsed=function(t){var n=0==t.in_report_used_count?1:0,r={modal:"job_equipment",id:t.id,in_report_used_count:n};e.PostMarkasUsed(r,t.job_id)},e.PostMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadEquipments(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.equipmentMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_EQUIPMENT_UPDATE)&&t.has(Dw.JOBS_USAGE_EQUIPMENT_MANAGE),o=t.has(Dw.JOBS_USAGE_EQUIPMENT_DELETE)&&t.has(Dw.JOBS_USAGE_EQUIPMENT_MANAGE);return[{name:"Edit item",disabled:!a||r,onClick:function(){return e.editEquipment(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!a||r,onClick:function(){return e.markAsUsed(n)}},{type:"divider"},{name:"Delete",disabled:!o||r,onClick:function(){return e.deleteEquipmentFromJob(n)}}]},e.renderMarkAsRead=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(J3,{name:Ef.Check,color:y.green0})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadEquipments()}},{key:"loadEquipments",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.id;t(TH(parseInt(n))),t(RH(parseInt(n)))}},{key:"renderOnSiteTag",value:function(e){var t=e.ended_at?"":"on-site";return Object(a.jsx)(rie,{tag:{name:t,color:y.orange1}})}},{key:"renderOnSiteLabel",value:function(e){var t=e.ended_at?e.ended_at:new Date,n="";if("each"===e.interval)n="Each";else{var r=qf()(t).diff(qf()(e.started_at),e.interval),o=r>1?e.interval+"s":e.interval;n=r||r>=0?"".concat(r+1," ").concat(o," onsite"):""}var i=e.ended_at?"".concat(qf()(e.started_at).format("DD MMM")," - ").concat(qf()(e.ended_at).format("DD MMM")):"";return Object(a.jsx)(a.Fragment,{children:i?Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("span",{children:n}),Object(a.jsx)(iie,{children:i})]}):Object(a.jsx)("span",{children:n})})}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props.match.params.id;return Object(a.jsx)(Cw.Consumer,{children:function(n){var r=n.has(Dw.JOBS_USAGE_VIEW),o=n.has(Dw.JOBS_USAGE_EQUIPMENT_CREATE);return r?Object(a.jsx)("div",{children:Object(a.jsxs)(aie,{children:[Object(a.jsx)(Uoe,{jobId:parseInt(t)}),o&&Object(a.jsx)(Cg,{className:"btn",onClick:e.onCustomAdd,style:{marginLeft:"10px"},children:"Add Equipment"})]})}):null}})}},{key:"renderContentPage",value:function(){var e=this,t=this.props,n=t.job,r=t.currentJobEquipments,o=r.data,i=r.loading,c=t.job.loading,s=t.match.params.id,l=t.dispatch,u=this.state,d=u.showModal,p=u.equipmentForEditing,h=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(Zoe,{jobId:parseInt(s),dispatch:l,onClose:e.onCloseModal,isOpen:d,equipment:p}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[i&&!c&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(hC,{style:{minHeight:"100px"},children:o&&o.length>0&&Object(a.jsxs)(zoe,{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:7,children:"Equipment"})})}),Object(a.jsx)("tbody",{children:o&&o.map((function(n,r){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(oie,{style:{whiteSpace:"nowrap"},children:qf()(n.started_at).format(Pj)}),Object(a.jsx)(oie,{style:{width:"100%"},children:n.equipment.model}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap",paddingRight:"20px !important"},children:e.renderOnSiteTag(n)}),Object(a.jsx)(oie,{style:{whiteSpace:"nowrap"},children:e.renderOnSiteLabel(n)}),Object(a.jsx)(oie,{style:{whiteSpace:"nowrap"},children:Kf(n.total_charge)}),Object(a.jsx)(oie,{style:{whiteSpace:"nowrap"},children:n.in_report_used_count>0&&e.renderMarkAsRead(n)}),Object(a.jsx)("td",{children:Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:e.equipmentMenuItems(t,n,h),direction:"right"})})]},r)}))})]})})]})]})}})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),sie=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobEquipments:e.currentJobUsageAndActuals.equipments}})))(cie),lie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={quantity:e.props.quantity||0},e.changeQuantity=function(t){var n=e.props.onChange,r=Math.floor(+t.target.value);r!==e.state.quantity&&(r<0?e.setState({quantity:0}):(e.setState({quantity:r}),n&&n(r)))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.quantity;t!==e.quantity&&this.setState({quantity:t})}},{key:"render",value:function(){var e=this.props.disabled,t=this.state.quantity;return Object(a.jsx)("input",{className:"form-control",type:"number",min:"0",disabled:e,onChange:this.changeQuantity,style:{width:"70px"},value:t})}}]),n}(p.PureComponent),uie="MaterialCustomForm",die=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={addCustomTrigger:!1},e.loadOptions=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dH.searchMaterials(t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.toggleTrigger=function(){var t=e.props.change;e.setState({addCustomTrigger:!e.state.addCustomTrigger}),setTimeout((function(){e.state.addCustomTrigger?t("material",null):(t("name",null),t("measure_unit_id",null))}))},e.setTotalAmount=function(){setTimeout((function(){var t=e.props,n=t.sellCost,r=t.quantity,a=t.change,o=0;n&&(o=(o=n.split("$")[1])?parseInt(o,10):parseInt(n.toString(),10)),a("total_amount",Kf((o>0?o:0)*(r>0?r:0)))}))},e.onMaterialChange=function(t){var n=e.props.change;n("default_buy_cost_per_unit",Kf(t.default_buy_cost_per_unit)),n("default_sell_cost_per_unit",Kf(t.default_sell_cost_per_unit))},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.onSubmit,o=r.jobId,i=r.user,c=r.afterSubmit,!a){t.next=3;break}return t.abrupt("return",a(n));case 3:if(t.prev=3,!o){t.next=20;break}if(!n.id){t.next=11;break}return s=SW(n),t.next=9,ly.updateJobMaterial(o,n.id,s);case 9:t.next=20;break;case 11:if(n.material){t.next=17;break}return t.next=14,dH.createMaterial(Object.assign(n,{measure_unit_id:n.measure_unit_id.id}));case 14:l=t.sent.id,t.next=18;break;case 17:l=n.material.id;case 18:return t.next=20,ly.addMaterialToJob(o,{job_id:o,material_id:l,creator_id:i.id,used_at:Wj(n.used_at,!0),quantity_used:n.count});case 20:null===c||void 0===c||c(),t.next=26;break;case 23:return t.prev=23,t.t0=t.catch(3),t.abrupt("return",Mg(t.t0));case 26:case"end":return t.stop()}}),t,null,[[3,23]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.props.change;this.setTotalAmount(),e(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:x0}),e.prev=1,e.next=4,dH.getAllMeasureUnits();case 4:return n=e.sent.data,t({type:y0,payload:n}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),t({type:w0,payload:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),this.props.initialValues&&this.props.initialValues.default_buy_cost_per_unit&&t("default_buy_cost_per_unit",Kf(this.props.initialValues.default_buy_cost_per_unit)),this.props.initialValues&&this.props.initialValues.default_sell_cost_per_unit&&t("default_sell_cost_per_unit",Kf(this.props.initialValues.default_sell_cost_per_unit))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.measureUnits,r=n.data,o=n.loading,i=e.edit,c=e.hideMaterialField,s=this.state.addCustomTrigger;return Object(a.jsxs)("form",{onSubmit:t(this.onSubmit),autoComplete:"off",id:uie,children:[!c&&Object(a.jsxs)("div",{className:"row",children:[s?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",validate:s&&uv,component:ZO,label:"Material Name"})}),Object(a.jsxs)("div",{className:"col-3 position-relative",children:[o&&Object(a.jsx)(av,{size:30,color:y.white}),Object(a.jsx)(yv.a,{name:"measure_unit_id",validate:s&&uv,component:Kv,options:r||[],getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},label:"Measure Unit"})]})]}):Object(a.jsx)("div",{className:"col-9",children:Object(a.jsx)(yv.a,{name:"material",validate:!s&&uv,component:rO,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},placeholder:"Enter name of material",loadOptions:this.loadOptions,label:"Material Item",onChange:this.onMaterialChange,disabled:i})}),!i&&!1]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"default_buy_cost_per_unit",disabled:!0,validate:[uv,mv],component:ZO,min:0,step:.01,label:"Unit Cost to Me"})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"count",validate:[uv,mv],onChange:this.setTotalAmount,component:ZO,type:"number",min:0,label:"Quantity"})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"used_at",validate:uv,component:Cy,label:"Used At"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"default_sell_cost_per_unit",disabled:!0,validate:[uv,mv],component:ZO,min:0,step:.01,label:"Unit Price to Charge"})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"total_amount",disabled:!0,component:ZO,label:"Total Amount"})})]})]})}}]),n}(p.PureComponent),pie=Object(LO.compose)(Object(b.b)((function(e){return{measureUnits:e.measureUnits,user:e.user.me}})),Object(Gj.a)({form:uie,enableReinitialize:!1}),Object(UO.a)({sellCost:"default_sell_cost_per_unit",quantity:"count"}))(die),hie=n(546);!function(e){e[e.Quick=0]="Quick",e[e.Custom=1]="Custom"}(nie||(nie={}));var bie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={quickData:[],loading:!1},e.renderBody=function(){var t=e.props.material;return Object(a.jsx)(pie,{onSubmit:e.sendCustomData,edit:!!t,initialValues:t&&NW(t)||CW()})},e.sendCustomData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.jobId,o=r.userId,i=r.onClose,c=r.loadJobMaterialsList,s=r.material,l=r.dispatch,e.setState({loading:!0}),t.prev=2,!s){t.next=9;break}return u=SW(n),t.next=7,ly.updateJobMaterial(a,s.id,u);case 7:t.next=19;break;case 9:if(n.material){t.next=15;break}return t.next=12,dH.createMaterial(Object.assign(n,{measure_unit_id:n.measure_unit_id.id}));case 12:d=t.sent.id,t.next=16;break;case 15:d=n.material.id;case 16:return t.next=18,ly.addMaterialToJob(a,{job_id:a,material_id:d,creator_id:o,used_at:n.used_at.format(Mj),quantity_used:n.count});case 18:l(RH(a));case 19:c();case 20:return t.prev=20,i(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,,20,23]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"renderFooter",value:function(){var e=this.props,t=e.material,n=e.formIsInvalid;return Object(a.jsx)(Cg,{className:"btn btn-primary",form:uie,disabled:n,children:t?"Save":"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.material;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:r?"Edit Material":"Add Material",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent),fie=Object(LO.compose)(Object(b.b)((function(e){return{formIsInvalid:Object(hie.a)(uie)(e)}})))(bie);function mie(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return mie=function(){return e},e}function jie(){var e=Object(f.a)(["\n  padding-right: 50px !important;\n"]);return jie=function(){return e},e}var vie=x.default.td(jie()),Oie=x.default.div(mie()),gie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1,showEditModal:!1,type:nie.Quick,materialForEditing:void 0},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.onCustomAdd=function(){e.setState({type:nie.Custom,materialForEditing:void 0}),e.onOpenModal()},e.deleteMaterialFromJob=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(Sw("Confirm","Delete (".concat(n.material.name," - ").concat(n.quantity_used_override," ").concat(n.material.measure_unit.name,") ?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,ly.deleteJobMaterial(parseInt(o),n.id);case 7:e.loadMaterials();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editMaterial=function(t){e.setState({materialForEditing:t}),e.onOpenModal()},e.materialMenuItems=function(t,n,r){var a=n.creator_id===e.props.user.id,o=a?t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE):t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE)&&t.has(Dw.JOBS_USAGE_MATERIALS_MANAGE),i=a?t.has(Dw.JOBS_USAGE_MATERIALS_DELETE):t.has(Dw.JOBS_USAGE_MATERIALS_DELETE)&&t.has(Dw.JOBS_USAGE_MATERIALS_MANAGE);return[{name:"Edit item",disabled:!o||r,onClick:function(){return e.editMaterial(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!o||r,onClick:function(){return e.markAsUsed(n)}},{type:"divider"},{name:"Delete",disabled:!i||r,onClick:function(){return e.deleteMaterialFromJob(n)}}]},e.markAsUsed=function(t){var n=0==t.in_report_used_count?1:0,r={modal:"job_material",id:t.id,in_report_used_count:n};e.PostMarkasUsed(r,t.job_id)},e.PostMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadMaterials(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onChangeQuantity=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.debouncedQuantityUpdate(n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.updateQuantity=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.match.params.id,i=a.dispatch,t.next=3,ly.updateJobMaterial(parseInt(o),r,{quantity_used_override:n});case 3:i(IH(parseInt(o)));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedQuantityUpdate=Object(m.debounce)(e.updateQuantity,1e3),e.renderMarkAsRead=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(J3,{name:Ef.Check,color:y.green0})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadMaterials()}},{key:"loadMaterials",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.id;t(IH(parseInt(n))),t(RH(parseInt(n)))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return Object(a.jsx)(Cw.Consumer,{children:function(t){var n=t.has(Dw.JOBS_USAGE_VIEW),i=t.has(Dw.JOBS_USAGE_MATERIALS_CREATE)&&t.has(Dw.MANAGEMENT_MATERIALS);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(Oie,{children:[Object(a.jsx)(Uoe,{jobId:parseInt(r)}),i&&Object(a.jsx)(Cg,{className:"btn",disabled:o,onClick:e.onCustomAdd,style:{marginLeft:"10px"},children:"Add Material"})]})}):null}})}},{key:"renderContentPage",value:function(){var e=this,t=this.props,n=t.job,r=t.currentJobMaterials,o=r.data,i=r.loading,c=t.job.loading,s=t.user,l=t.dispatch,u=t.match.params.id,d=this.state,p=d.showModal,h=d.type,b=d.materialForEditing,f=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return Object(a.jsx)(Cw.Consumer,{children:function(t){var n=t.has(Dw.JOBS_USAGE_VIEW),r=t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE)&&!f&&t.has(Dw.JOBS_USAGE_MATERIALS_MANAGE);return n?Object(a.jsxs)(a.Fragment,{children:[p&&Object(a.jsx)(fie,{type:h,jobId:parseInt(u),userId:s.id,loadJobMaterialsList:function(){return l(IH(parseInt(u)))},onClose:e.onCloseModal,isOpen:p,material:b,dispatch:l}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[i&&!c&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(hC,{style:{minHeight:"100px"},children:o&&o.length>0&&Object(a.jsxs)(zoe,{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:5,children:"Materials"})})}),Object(a.jsx)("tbody",{children:o&&o.map((function(n,o){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(vie,{style:{whiteSpace:"nowrap"},children:qf()(n.used_at).format(Pj)}),Object(a.jsx)(vie,{style:{width:"100%"},children:n.material.name}),Object(a.jsx)(vie,{style:{whiteSpace:"nowrap"},children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[r?Object(a.jsx)(lie,{quantity:n.quantity_used_override,onChange:function(t){return e.onChangeQuantity(t,n.id)}}):n.quantity_used_override,Object(a.jsx)("span",{style:{marginLeft:"10px"},children:n.material.measure_unit.name})]})}),Object(a.jsx)(vie,{style:{whiteSpace:"nowrap"},children:Kf(n.amount_override)}),Object(a.jsx)(vie,{style:{whiteSpace:"nowrap"},children:n.in_report_used_count>0&&e.renderMarkAsRead(n)}),Object(a.jsx)("td",{children:Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:e.materialMenuItems(t,n,f),direction:"right"})})]},o)}))})]})})]})]}):null}})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),xie=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobMaterials:e.currentJobUsageAndActuals.materials,user:e.user.me}})))(gie),yie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).loadPurchaseOrders=function(t){(0,e.props.dispatch)(wX(t,{job_id:e.props.match.params.id}))},e.renderMarkAsRead=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(J3,{name:Ef.Check,color:y.green0})})},e.orderMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE);return[{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!a||r,onClick:function(){return e.markAsUsed(n)}}]},e.markAsUsed=function(t){var n,r=0==t.in_report_used_count?1:0,a={modal:"job_purchaseOrder",id:t.id,in_report_used_count:r};e.PostMarkasUsed(a,null===t||void 0===t||null===(n=t.job)||void 0===n?void 0:n.id)},e.PostMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(+r,n);case 3:e.loadPurchaseOrders(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(yX()),this.loadPurchaseOrders()}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:7,children:"No items found"})})}},{key:"renderRows",value:function(e){var t=this,n=this.props,r=n.purchaseOrders.data,o=n.job;if(!r)return null;var i=o.data&&o.data.latest_status.status===gj.Closed||!o.data;return r.data.map((function(n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{whiteSpace:"nowrap"},children:Object(a.jsx)($_.a,{format:Pj,children:n.date?n.date.toString():""})}),Object(a.jsx)("td",{style:{width:"100%"},children:n.reference}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap"},children:Object(a.jsxs)(Uf.b,{to:"/finance/purchase-orders/details/".concat(n.id),target:"_blank",children:["PO #",n.id]})}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap"},children:Kf(n.total_amount)}),Object(a.jsx)("td",{children:n.in_report_used_count>0&&t.renderMarkAsRead(n)}),Object(a.jsx)("td",{children:Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:t.orderMenuItems(e,n,i),direction:"right"})})]},n.id)}))}},{key:"render",value:function(){var e=this,t=this.props.purchaseOrders,n=t.data,r=t.loading,o=n&&n.data&&n.data.length>0;return Object(a.jsx)(Cw.Consumer,{children:function(t){return t.has(Dw.JOBS_USAGE_VIEW)?Object(a.jsxs)(a.Fragment,{children:[r&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)(zoe,{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{colSpan:7,children:"Purchase Orders"})})}),Object(a.jsx)("tbody",{children:o?e.renderRows(t):e.renderNodata()})]})]}):null}})}}]),n}(p.PureComponent),wie=Object(LO.compose)(v.g,Object(b.b)((function(e){return{purchaseOrders:e.purchaseOrders,job:e.currentJob}})))(yie),_ie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t=e.props,n=t.job;t.storages.fetch(n.id,{placement:1})},e.storageMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE)&&t.has(Dw.JOBS_USAGE_MATERIALS_MANAGE);return[{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!a||r,onClick:function(){return e.markAsUsed(n)}}]},e.PostMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:a=e.props,o=a.job,a.storages.fetch(o.id,{placement:1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"markAsUsed",value:function(e){var t=0===e.in_report_used_count?1:0,n={modal:"inventory_item_placements",id:e.id,in_report_used_count:t};this.PostMarkasUsed(n,e.inventory_item.job_id)}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:1,children:"No items found"})})}},{key:"renderRows",value:function(e){var t,n,r,o,i=this,c=this.props,s=c.storages,l=c.jobIsClosed;return(null===(t=s.data)||void 0===t?void 0:t.data)?(null===(n=s.data)||void 0===n?void 0:n.data.length)?(console.log(null===(r=s.data)||void 0===r?void 0:r.data),null===(o=s.data)||void 0===o?void 0:o.data.map((function(t,n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.inventory_item.name}),Object(a.jsxs)("td",{children:[t.space.name," (",t.space.location.code,")"]}),Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:t.started_at})}),Object(a.jsx)("td",{children:V8.getPlacementDuration(t)}),Object(a.jsx)("td",{children:Kf(V8.getPlacementCost(t))}),Object(a.jsx)("td",{children:Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:i.storageMenuItems(e,t,l),direction:"right"})})]},n)}))):this.renderNodata():null}},{key:"render",value:function(){var e=this;return Object(a.jsx)(Cw.Consumer,{children:function(t){return t.has(Dw.JOBS_USAGE_VIEW)?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(zoe,{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{children:"Storage Items"})})}),Object(a.jsx)("tbody",{children:e.renderRows(t)})]})}):null}})}}]),n}(p.PureComponent),kie=Object(LO.compose)(Mm({storages:{fetch:dH.getJobStorageItems}}))(_ie),Sie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,showEditModal:!1,type:nie.Quick},e}return Object(l.a)(n,[{key:"renderAdditionalHeaderLayout",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(xN,{children:Object(a.jsx)(Uoe,{jobId:parseInt(this.props.match.params.id)})})})}},{key:"renderContentPage",value:function(){var e=this.props.job,t=e.data&&e.data.latest_status.status===gj.Closed||!e.data;return Object(a.jsx)(hC,{children:(null===e||void 0===e?void 0:e.data)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)(wie,{jobIsClosed:t})}),Object(a.jsx)(kie,{jobIsClosed:t,job:e.data})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(av,{size:40,color:y.white})})})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Cie=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob}})))(Sie),Nie=n(204),Eie=n(587);n(949);function Aie(){var e=Object(f.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  height: 100px;\n"]);return Aie=function(){return e},e}x.default.div(Aie(),y.gray1,y.gray2);var Tie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).labelContent=function(e){return Kf(e.value,!0)},e.gaugeRenderer=function(e,t){return Object(a.jsxs)("h3",{style:{color:t},children:[Math.round(e),"%"]})},e.gaugeStyles={display:"block",height:"100px",width:"100px"},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.summary,t=e.total_budget,n=e.remaining,r=e.gross_profit,o=e.labour_used,i=e.equipment_used,c=e.materials_used,s=e.po_and_other_used;return Object(a.jsxs)("div",{className:"container d-flex flex-column",children:[Object(a.jsx)("div",{className:"card card-primary",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"mr-5",children:Object(a.jsx)(J3,{name:Ef.Chart,color:y.blue5,fill:!0,size:50})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)("h3",{className:"mb-3",children:Object(a.jsx)("strong",{children:Kf(t,!0)})}),Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{className:"text-gray",children:"TOTAL BUDGET"})})]})]})})}),Object(a.jsxs)("div",{className:"d-flex my-5",children:[Object(a.jsx)("div",{className:"card flex-grow-1",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)("strong",{className:"text-gray",children:"USED"})}),Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:Kf(i+o+c+s,!0)})})]}),Object(a.jsx)("div",{className:"d-flex flex-grow-1 align-items-end justify-content-end ",children:Object(a.jsx)(J3,{name:Ef.Chart,color:y.green4,fill:!0,size:50})})]})})}),Object(a.jsx)("div",{className:"card flex-grow-1 mx-5",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)("strong",{className:"text-gray",children:"REMAINING"})}),Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:Kf(n,!0)})})]}),Object(a.jsx)("div",{className:"d-flex flex-grow-1 align-items-end justify-content-end ",children:Object(a.jsx)(J3,{name:Ef.Chart,color:y.purple2,fill:!0,size:50})})]})})}),Object(a.jsx)("div",{className:"card flex-grow-1",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)("strong",{className:"text-gray",children:"ACTUAL GROSS PROFIT"})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end",children:Object(a.jsx)(Eie.a,{style:this.gaugeStyles,value:r,centerRender:this.gaugeRenderer})})]})})})]}),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{className:"text-gray",children:"USAGE"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(Nie.a,{transitions:!1,children:[Object(a.jsx)(Nie.c,{children:Object(a.jsx)(Nie.d,{type:"donut",data:[{kind:"Time",amount:o},{kind:"Equipment",amount:i},{kind:"Materials",amount:c},{kind:"PO's and Others",amount:s}],categoryField:"kind",field:"amount",children:Object(a.jsx)(Nie.e,{color:"#fff",background:"none",content:this.labelContent})})}),Object(a.jsx)(Nie.b,{position:"right",orientation:"vertical"})]})})]})})]})}}]),n}(p.PureComponent);function Iie(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Iie=function(){return e},e}var Rie,Die,Mie=x.default.div(Iie()),Pie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.onAddReport=function(){var t=e.props.match.params.id;e.props.history.push("/usage-and-actuals/".concat(t,"/newReport"))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0,modalData:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.job;switch(n){case"new_invoice":return Object(a.jsx)(Q8,{isOpen:!0,onClose:e.hideModal,job:o.data,data:r})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id;(0,e.dispatch)(AH(parseInt(t)))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cw.Consumer,{children:function(t){var n=t.has(Dw.JOBS_USAGE_VIEW),i=t.has(Dw.ASSESSMENT_REPORTS_MANAGE);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(Mie,{children:[Object(a.jsx)(Uoe,{jobId:parseInt(r)}),Object(a.jsxs)(QG.e,{className:"ml-2",children:[Object(a.jsx)(QG.h,{caret:!0,color:"primary",className:"position-relative",children:"Create Invoice"}),Object(a.jsx)(QG.g,{basic:!0,right:!0,children:Object(a.jsx)(QG.f,{onClick:e.showModal("new_invoice",{actuals:!0,expenses:!0}),children:"Actuals and Expenses"})})]}),i&&Object(a.jsx)("button",{className:"btn btn-info ml-2",disabled:o,onClick:e.onAddReport,children:"New Report / Quote"})]})}):null}})]})}},{key:"renderContentPage",value:function(){var e=this.props.currentJobUsageSummary,t=e.data,n=e.loading;return Object(a.jsxs)(a.Fragment,{children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(hC,{className:"p-4",children:t&&Object(a.jsx)(Tie,{summary:t.data})})]})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Lie=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary}})))(Pie);!function(e){e.NEW="NEW",e.APPROVED="APPROVED",e.DECLINED="DECLINED"}(Die||(Die={}));var Fie=(Rie={},Object(k.a)(Rie,Die.NEW,"Pending Approval"),Object(k.a)(Rie,Die.APPROVED,"Approved"),Object(k.a)(Rie,Die.DECLINED,"Declined"),Rie),Uie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderBodyRows",value:function(){var e=this.props,t=e.columnsDefinition;return e.dataSource.map((function(e){return Object(a.jsx)("tr",{children:t.map((function(t){return Object(a.jsx)(j8,{width:t.width,hidden:t.hidden,align:t.type,children:t.cell(e)},t.id)}))},e.id)}))}},{key:"renderNodata",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:e.length,children:"No items found"})})}},{key:"renderTHead",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:e.map((function(e){return Object(a.jsx)(w8,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})})}},{key:"renderTBody",value:function(){var e=this.props.dataSource;return Object(a.jsx)("tbody",{children:e&&e.length>0?this.renderBodyRows():this.renderNodata()})}},{key:"render",value:function(){var e=this.props.useCustomStyle;return Object(a.jsx)(a.Fragment,{children:e?Object(a.jsxs)(a.Fragment,{children:[this.renderTHead(),this.renderTBody()]}):Object(a.jsxs)("table",{className:"table",children:[this.renderTHead(),this.renderTBody()]})})}}]),n}(p.PureComponent);function Vie(){var e=Object(f.a)(["\n  display: ",";\n"]);return Vie=function(){return e},e}var Bie=x.default.div(Vie(),(function(e){return e.hidden?"none":"flex"})),Jie="ModalLabourForm",zie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.next=3,a(n);case 3:o();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadUsers=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=_v()(e.loadUsers,1e3),e.getWorkerOptionLabel=function(e){return Yf(e).name},e.getWorkerOptionValue=function(e){return e.id},e.getLabourTypeOptionLabel=function(e){return e.name},e.getLabourTypeOptionValue=function(e){return e.id},e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.loadTypes,o=r.data,i=r.loading,c=t.isEdit,s=t.isMultiEdit;return Object(a.jsxs)("form",{id:Jie,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"started_at_date",label:"Date",validate:uv,component:Cy})})}),Object(a.jsxs)(Bie,{hidden:c&&s,className:"row",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"user",label:"Worker",component:rO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getWorkerOptionLabel,getOptionValue:e.getWorkerOptionValue,validate:s?void 0:uv,isClearable:!0,placeholder:"Start typing to search...",disabled:c})}),Object(a.jsxs)("div",{className:"col-6",children:[i&&Object(a.jsx)(av,{size:20,color:y.white}),Object(a.jsx)(yv.a,{name:"labour_type",label:"Crew Type",component:Kv,options:(null===o||void 0===o?void 0:o.data)||[],validate:s?void 0:uv,getOptionLabel:e.getLabourTypeOptionLabel,getOptionValue:e.getLabourTypeOptionValue,disabled:c})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"started_at_override",label:"Start Time",component:Cy,showTime:!0,dateFormat:!1,viewMode:"time",validate:uv,iconName:Ef.Clock,timeFormat:Fj})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"ended_at_override",label:"End Time",component:Cy,showTime:!0,dateFormat:!1,viewMode:"time",iconName:Ef.Clock,validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"break",label:"Break",component:Cy,showTime:!0,dateFormat:!1,viewMode:"time",timeFormat:"HH:mm",iconName:Ef.Clock})})]})]})},e.renderFooter=function(){var t=e.props.invalid;return Object(a.jsx)(Cg,{className:"btn",type:"submit",disabled:t,form:Jie,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadTypes.fetch()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),qie=Object(LO.compose)(Object(Gj.a)({form:Jie}),Mm({loadTypes:{fetch:dH.getLabourTypes}}))(zie);function Wie(e,t,n){var r=qf()(e).startOf("day"),a=qf()(t),o=qf()(n);return{started:r.add(a.hour(),"hour").add(a.minute(),"minute"),ended:(r=qf()(e).startOf("day")).add(o.hour(),"hour").add(o.minute(),"minute")}}var Hie=function(e){var t=Wie(e.started_at_date,e.started_at_override,e.ended_at_override);return{job_id:e.job_id,labour_type_id:e.labour_type.id,worker_id:e.user.id,creator_id:e.creator_id,started_at:t.started.format(Mj),ended_at:t.ended.format(Mj),break:e.break&&cm(e.break)}},Gie=function(e){var t=Wie(e.started_at_date,e.started_at_override,e.ended_at_override);return{started_at_override:t.started.format(Mj),ended_at_override:t.ended&&t.ended.format(Mj),break:e.break?cm(e.break):0}},Yie=function(e){return Object(c.a)(Object(c.a)({},e),{},{started_at_date:qf()(e.started_at_override),started_at_override:qf()(e.started_at_override).utcOffset(0),ended_at_override:e.ended_at_override&&qf()(e.ended_at_override).utcOffset(0),user:e.worker,break:e.break&&im(e.break)})};function Qie(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  font-weight: ",";\n"]);return Qie=function(){return e},e}function Kie(){var e=Object(f.a)(["\n  border-radius: 5px;\n  background: ",";\n  height: 45px;\n  width: 200px;\n  position: absolute;\n  top: 10px;\n  left: 50%;\n  margin-left: -100px;\n  display: "," !important;\n"]);return Kie=function(){return e},e}var Zie=x.default.div(Kie(),y.menu,(function(e){return e.hidden?"none":"flex"})),Xie=x.default.div(Qie(),y.white,Bf.bold),$ie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.hidden,r=e.onDeleteSelected;e.onEditSelected;return Object(a.jsxs)(Zie,{className:"d-flex flex-row align-content-center",hidden:n,children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"delete-all-tooltip",effect:"solid"}),Object(a.jsxs)(Xie,{className:"mr-auto align-self-center",children:[t," selected "]}),Object(a.jsx)(cw,{className:"align-self-center","data-tip":"Delete selected Labour records","data-for":"delete-all-tooltip",color:y.gray4,disabled:0===t,children:Object(a.jsx)(Ff,{name:Ef.Trash,onClick:r})})]})}}]),n}(p.PureComponent);function ece(){var e=Object(f.a)(["\n  display: block;\n"]);return ece=function(){return e},e}function tce(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return tce=function(){return e},e}function nce(){var e=Object(f.a)(["\n  position: absolute;\n  right: 12px;\n  top: 8px;\n  cursor: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return nce=function(){return e},e}function rce(){var e=Object(f.a)(["\n  position: relative;\n\n  input {\n    ",";\n    padding-right: 40px;\n  }\n"]);return rce=function(){return e},e}function ace(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return ace=function(){return e},e}function oce(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return oce=function(){return e},e}function ice(){var e=Object(f.a)(["\n  color: ",";\n"]);return ice=function(){return e},e}var cce,sce=x.default.label(ice(),y.gray4),lce=x.default.input(oce(),y.gray1),uce=x.default.span(ace(),y.gray1),dce=(x.default.div(rce(),GO),Object(x.default)(Kj(["disabled"])(Ff))(nce(),(function(e){return e.disabled?"unset":"pointer"}),y.gray4,(function(e){return e.disabled?y.gray4:y.gray5})),Object(x.default)(Kj(["disabled"])(Ff))(tce(),y.gray4,(function(e){return e.disabled?y.gray4:y.gray5}))),pce=(x.default.div(ece()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:e.props.value},e.picker=p.createRef(),e.isValidDate=function(t){if(!e.props.futureEnabled){var n=qf()();return qf()(t).isBefore(n)}return!0},e.renderInput=function(t,n){var r=e.props,o=r.iconName,i=r.dateFormat,s=r.timeFormat,l=r.showTime,u=r.disabled,d=!1===i&&(l||s),p="";!1!==i?(p=Pj,(l||s)&&(p+=" "+(s||Fj))):p=s||Fj;var h=e.state.value||"";return qf.a.isMoment(h)&&(h=h.format(p)),Object(a.jsxs)("div",{className:"input-group",onClick:n,children:[Object(a.jsx)(lce,Object(c.a)(Object(c.a)({},t),{},{value:h,onChange:function(n){e.setState({value:n.target.value}),t.onChange(n)}})),!1!==o&&Object(a.jsx)("span",{className:"input-group-append",children:Object(a.jsx)(uce,{className:"input-group-text px-2",children:Object(a.jsx)(dce,{name:o||(d?Ef.Clock:Ef.Calendar),size:18,disabled:u})})})]})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.state.value&&this.props.value&&e.value===this.props.value||this.setState({value:this.props.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isValidDate,r=t.dateFormat,o=t.showTime,i=t.timeFormat,c=t.label,s=t.labelClassName,l=t.className,u=t.viewDate,d=t.defaultDate,p=t.closeOnSelect,h={placeholder:this.props.placeholder,className:g()("form-control"),disabled:this.props.disabled},b=this.props.onChange;return Object(a.jsxs)("div",{className:l,children:[c&&Object(a.jsx)(sce,{className:s,children:c}),Object(a.jsx)("div",{className:this.props.valueClassName,children:Object(a.jsx)(by.a,{ref:this.picker,inputProps:h,dateFormat:!1!==r&&Pj,timeFormat:!(!o&&!i)&&(i||Fj),isValidDate:n||this.isValidDate,initialViewDate:u,initialValue:d,closeOnSelect:!1!==p&&!(o||i),value:this.state.value,renderInput:this.renderInput,onChange:function(t){t&&!qf.a.isMoment(t)||b(t),e.setState({value:t})}})})]})}}]),n}(p.PureComponent));!function(e){e[e.EndDate=0]="EndDate",e[e.StartDate=1]="StartDate"}(cce||(cce={}));var hce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showLabourModal:!1,item:void 0,allSelected:!1,isMultiEdit:!1},e.labourColumns=function(){return[{id:"multiselectColumn",header:Object(a.jsx)(PJ,{size:15,value:e.state.allSelected,onChange:e.selectAll}),width:"5%",type:mte.Text,hidden:e.props.hideMultiselect,cell:function(t){return Object(a.jsx)(PJ,{size:15,value:e.labourIsSelected(+t.id),onChange:function(){return e.toggleSelection(t)}})}},{id:"item",header:Object(a.jsx)(_te,{children:"Labour"}),width:"10%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:qf()(e.started_at_override).utcOffset(0).format(Pj)})}},{id:"worker",width:"15%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.worker.full_name})}},{id:"labour_type_name",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.labour_type.name})}},{id:"period",width:"230px",type:mte.Text,cell:function(t){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(pce,{dateFormat:!1,timeFormat:Fj,onChange:function(n){return e.onDateChange(n,cce.StartDate,t)},value:qf()(t.started_at_override).utcOffset(0),iconName:!1}),Object(a.jsx)("span",{style:{marginLeft:"10px",marginRight:"10px"},children:"to"}),Object(a.jsx)(pce,{dateFormat:!1,timeFormat:Fj,onChange:function(n){return e.onDateChange(n,cce.EndDate,t)},value:qf()(t.ended_at_override).utcOffset(0),iconName:!1})]})}},{id:"break",width:"90px",type:mte.Text,cell:function(t){return Object(a.jsx)(pce,{dateFormat:!1,timeFormat:"HH:mm",onChange:function(n){return e.onChangeBreak(n,t)},value:im(t.break),iconName:!1})}},{id:"first_tier_time_amount",header:"1.0x",width:"5%",type:mte.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:om(e.first_tier_time_amount)})}},{id:"second_tier_time_amount",header:"1.5x",width:"5%",type:mte.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:om(e.second_tier_time_amount)})}},{id:"third_tier_time_amount",header:"2.0x",width:"5%",type:mte.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:om(e.third_tier_time_amount)})}},{id:"fourth_tier_time_amount",header:"2.5x",width:"5%",type:mte.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:om(e.fourth_tier_time_amount)})}},{id:"total_hrs",header:"Total Hrs",width:"7%",type:mte.Numeric,cell:function(e){return Object(a.jsx)(_te,{children:om(e.first_tier_time_amount+e.second_tier_time_amount+e.third_tier_time_amount+e.fourth_tier_time_amount)})}},{id:"total_amount",header:"Total Cost",width:"10%",type:mte.Numeric,cell:function(e){return Object(a.jsx)(_te,{children:Kf(e.calculated_total_amount)})}},{id:"status",header:"Status",width:"10%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:Fie[e.status]})}},{id:"menu",width:"5%",type:mte.Numeric,cell:function(t){return Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.onDateChange=function(t,n,r){switch(e.debouncedDateUpdate(t,n,r.id),n){case cce.StartDate:r.started_at_override=qf()(t).toISOString();break;case cce.EndDate:r.ended_at_override=qf()(t).toISOString()}},e.updateDate=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r,a){var o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.props.jobId,i=qf()(n),t.t0=r,t.next=t.t0===cce.StartDate?5:t.t0===cce.EndDate?8:11;break;case 5:return t.next=7,vW.updateJobLabour(o,a,{started_at_override:qf()(i).format(Mj)});case 7:return t.abrupt("break",11);case 8:return t.next=10,vW.updateJobLabour(o,a,{ended_at_override:qf()(i).format(Mj)});case 10:return t.abrupt("break",11);case 11:e.loadLabour();case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.debouncedDateUpdate=Object(m.debounce)(e.updateDate,1e3),e.onChangeBreak=function(t,n){var r=cm(t);e.debouncedBreakUpdate(r,n.id),n.break=r},e.updateBreak=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.jobId,t.next=3,vW.updateJobLabour(a,r,{break:n});case 3:e.loadLabour();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedBreakUpdate=Object(m.debounce)(e.updateBreak,1e3),e.tableMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_LABOUR_MANAGE),o=n.client,i=n.status,c=[{name:"View / Edit",disabled:!a||r,onClick:function(){return e.editTableItem(n)}}];return"MOBILE"===o&&(i!==Die.APPROVED&&c.push({name:"Approve",disabled:!a||r,onClick:function(){return e.updateStatus(n,Die.APPROVED)}}),i!==Die.DECLINED&&c.push({name:"Decline",disabled:!a||r,onClick:function(){return e.updateStatus(n,Die.DECLINED)}})),c.push({name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:n.status!==Die.APPROVED||r,onClick:e.markAsUsed(n)}),c.push({type:"divider"}),c.push({name:"Delete",disabled:!a||r,onClick:function(){return e.deleteItem(n)}}),c},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_labour",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadLabour(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.showLabourModal=function(){return e.setState({showLabourModal:!0,isMultiEdit:!1})},e.hideLabourModal=function(){e.setState({showLabourModal:!1}),e.props.hideAddLabour()},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l,u,d,p;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.userId,o=r.addNewLabour,i=r.jobId,s=r.updateLabourCounters,l=r.selectedLabourIds,u=e.state.isMultiEdit,e.setState({loading:!0}),!o){t.next=11;break}return t.next=6,dH.createJobLabour(Object(c.a)(Object(c.a)({},Hie(n)),{},{client:"WEB",job_id:i,creator_id:a}));case 6:s(),e.loadLabour(),e.setState({loading:!1}),t.next=14;break;case 11:d=Gie(n),p=u?l:[n.id],Promise.all(p.map((function(e){return dH.updateJobLabour(i,+e,d)}))).finally((function(){e.loadLabour(),e.setState({loading:!1})}));case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAll=function(){var t=e.props.currentJobLabours;e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&t.data&&t.data.data.length?e.props.dispatch(FH(t.data.data)):e.props.dispatch(PH())}))},e.toggleSelection=function(t){e.props.dispatch(LH(t))},e.labourIsSelected=function(t){var n=e.props.selectedLabourIds;return!!n&&n.includes(t)},e.onDeleteSelected=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!((i=n.selectedLabourIds).length>0)){t.next=15;break}return t.next=4,a(Sw("Confirm","Delete selected Labour items?"));case 4:if(!t.sent){t.next=14;break}e.setState({loading:!0}),i.forEach(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,vW.deleteJobLabour(r,+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.setState({loading:!1}),e.loadLabour(),o(),e.props.dispatch(PH()),t.next=15;break;case 14:return t.abrupt("return",Promise.resolve());case 15:case"end":return t.stop()}}),t)}))),e.onEditSelected=function(){e.props.selectedLabourIds.length>0&&e.setState({showLabourModal:!0,isMultiEdit:!0})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLabour()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.selectedLabourIds,n=e.currentJobLabours;n.data&&t.length<n.data.data.length?this.setState({allSelected:!1}):this.setState({allSelected:!0})}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showLabourModal()}},{key:"deleteItem",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(Sw("Confirm","Delete Labour for ".concat(t.worker.full_name," at ").concat(qf()(t.started_at_override).format(Pj),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,vW.deleteJobLabour(r,t.id);case 9:this.setState({loading:!1}),this.loadLabour(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateStatus",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var r,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.jobId,r.dispatch,o=r.updateLabourCounters,!t.id){e.next=8;break}return this.setState({loading:!0}),e.next=5,vW.updateJobLabourStatus(a,t.id,n);case 5:this.setState({loading:!1}),this.loadLabour(),o();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadLabour",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return iS(kH.load,kH.loadComplete,kH.error,(function(){return dH.getJobLabours(e,{page:t})}))}(n,e))}},{key:"render",value:function(){var e=this.props,t=e.currentJobLabours,n=e.addNewLabour,r=e.selectedLabourIds,o=e.hideMultiselect,i=this.state,c=i.loading,s=i.showLabourModal,l=i.item,u=i.isMultiEdit,d=t.data,p=d&&d.data?d.data:[],h=t.loading||c,b=s||n,f=n||u;return Object(a.jsxs)(a.Fragment,{children:[b&&Object(a.jsx)(qie,{isOpen:b,onClose:this.hideLabourModal,initialValues:f?{}:Yie(l||{}),onSubmit:this.onSubmit,title:n?"Add Labour":u?"Edit selected Labour records":"Edit Labour",isEdit:!n,isMultiEdit:u}),h&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)($ie,{hidden:o,onDeleteSelected:this.onDeleteSelected,onEditSelected:this.onEditSelected,selected:r.length}),Object(a.jsx)(zoe,{className:"table",children:Object(a.jsx)(Uie,{dataSource:p,columnsDefinition:this.labourColumns(),useCustomStyle:!0})}),d&&d.pagination&&d.pagination.last_page>1&&Object(a.jsx)(AS,{pagination:d.pagination,onChange:this.loadLabour})]})}}]),n}(p.PureComponent),bce=Object(LO.compose)(Object(b.b)((function(e){return{userId:NP(e),currentJobLabours:e.currentJobUsageAndActuals.labours,selectedLabourIds:e.currentJobUsageAndActuals.selectedLabourIds}})))(hce),fce="ModalAllowanceForm",mce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:o(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.loadTypes,o=r.data,i=r.loading,c=t.amount,s=t.allowanceType,l=t.isEdit;return Object(a.jsxs)("form",{id:fce,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"user",label:"Recipient",component:rO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getRecipientOptionLabel,getOptionValue:e.getRecipientOptionValue,validate:uv,isClearable:!0,placeholder:"Start typing to search...",disabled:l})}),Object(a.jsxs)("div",{className:"col-5 position-relative",children:[i&&Object(a.jsx)(av,{size:20,color:y.white}),Object(a.jsx)(yv.a,{name:"allowance_type",label:"Allowance Type",component:Kv,getOptionLabel:e.getAllowanceTypeOptionLabel,getOptionValue:e.getAllowanceTypeOptionValue,validate:uv,options:o||[],disabled:l})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"date_given",label:"Date",component:Cy,validate:uv,futureEnabled:!0})}),Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(yv.a,{name:"amount",label:"Amount ".concat(s?"(".concat(s.charging_interval.toLowerCase(),")"):"",": ").concat(Kf((c||0)*(s&&s.charge_rate_per_interval||0))),component:ZO,type:"number",validate:uv})})]})]})},e.loadUsers=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=_v()(e.loadUsers,1e3),e.getRecipientOptionLabel=function(e){return Yf(e).name},e.getRecipientOptionValue=function(e){return e.id},e.getAllowanceTypeOptionLabel=function(e){return e.name},e.getAllowanceTypeOptionValue=function(e){return e.id},e.renderFooter=function(){var t=e.props.invalid;return Object(a.jsx)(Cg,{className:"btn",type:"submit",disabled:t,form:fce,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadTypes.fetch()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),jce=Object(LO.compose)(Object(Gj.a)({form:fce}),Object(UO.a)({amount:"amount",allowanceType:"allowance_type"}),Mm({loadTypes:{fetch:dH.getAllowanceTypes}}))(mce),vce=function(e){return Object(c.a)(Object(c.a)({},e),{},{user_id:e.user.id,allowance_type_id:e.allowance_type.id,date_given:e.date_given.format(Dj)})},Oce=function(e){return Object(c.a)(Object(c.a)({},e),{},{date_given:qf()(e.date_given)})},gce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showAllowanceModal:!1,item:void 0},e.allowancesColumns=function(){return[{id:"item",header:"Allowances",width:"10%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:qf()(e.date_given).format(Pj)})}},{id:"user",width:"35%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.user.full_name})}},{id:"type",width:"25%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.allowance_type.name})}},{id:"amount",width:"15%",type:mte.Text,cell:function(t){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(lie,{quantity:t.amount,onChange:function(n){return e.onChangeQuantity(n,t.id)}}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:t.allowance_type.charging_interval})]})}},{id:"total_amount",width:"10%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:Kf(e.total_amount)})}},{id:"menu",width:"5%",type:mte.Numeric,cell:function(t){return Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.onChangeQuantity=function(t,n){e.debouncedQuantityUpdate(t,n)},e.updateQuantity=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.jobId,t.next=3,dH.updateAllowance({id:r,job_id:a,amount:n});case 3:e.loadAllowance();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedQuantityUpdate=Object(m.debounce)(e.updateQuantity,1e3),e.showAllowanceModal=function(){return e.setState({showAllowanceModal:!0})},e.hideAllowanceModal=function(){e.setState({showAllowanceModal:!1}),e.props.hideAddAllowance()},e.tableMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_ALLOWANCES_MANAGE),o=t.has(Dw.JOBS_USAGE_ALLOWANCES_APPROVE);return[{name:"View / Edit",disabled:!a||r,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!o||r,onClick:function(){return e.approveAllowance(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!n.approved_at||r,onClick:e.markAsUsed(n)},{type:"divider"},{name:"Delete",disabled:!a||r,onClick:function(){return e.deleteItem(n)}}]},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_allowance",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadAllowance(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.approveAllowance=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!n.id){t.next=14;break}return t.next=4,r(Sw("Confirm"," Approve Allowance for ".concat(n.user.full_name," at ").concat(qf()(n.date_given).format(Pj),"?")));case 4:if(!t.sent){t.next=13;break}return e.setState({loading:!0}),t.next=9,dH.approveAllowance(n);case 9:e.setState({loading:!1}),e.loadAllowance(),t.next=14;break;case 13:return t.abrupt("return",Promise.resolve());case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.jobId,o=r.userId,i=r.addNewAllowance,s=r.updateLabourCounters,!i){t.next=8;break}return t.next=4,dH.createAllowance(Object(c.a)(Object(c.a)({},vce(n)),{},{job_id:a,creator_id:o}));case 4:e.loadAllowance(),s(),t.next=12;break;case 8:return l=vce(n),t.next=11,dH.updateAllowance(l);case 11:e.loadAllowance();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadAllowance()}},{key:"loadAllowance",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return iS(fH.load,fH.loadComplete,fH.error,(function(){return dH.getJobAllowances(e,{page:t})}))}(n,e))}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showAllowanceModal()}},{key:"deleteItem",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(Sw("Confirm","Delete Allowance for ".concat(t.user.full_name," at ").concat(qf()(t.date_given).format(Pj),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,dH.deleteJobAllowance(r,t.id);case 9:this.setState({loading:!1}),this.loadAllowance(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.currentJobAllowances,n=e.addNewAllowance,r=this.state,o=r.loading,i=r.showAllowanceModal,c=r.item,s=t.data,l=s&&s.data?s.data:[],u=t.loading||o,d=i||n;return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(jce,{isOpen:d,onClose:this.hideAllowanceModal,initialValues:n?{}:Oce(c||{}),onSubmit:this.onSubmit,title:n?"Add Allowance":"Edit Allowance",isEdit:!n}),u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(zoe,{className:"table",children:Object(a.jsx)(Uie,{dataSource:l,columnsDefinition:this.allowancesColumns(),useCustomStyle:!0})}),s&&s.pagination&&s.pagination.last_page>1&&Object(a.jsx)(AS,{pagination:s.pagination,onChange:this.loadAllowance})]})}}]),n}(p.PureComponent),xce=Object(LO.compose)(Object(b.b)((function(e){return{userId:NP(e),currentJobAllowances:e.currentJobUsageAndActuals.labourAllowances}})))(gce),yce="ModalReimbursementForm",wce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={fileLoading:!1,file:void 0},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:o(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n.target.files.length>0)){t.next=8;break}return e.setState({fileLoading:!0}),t.next=4,p_.postDocument(n.target.files[0]);case 4:r=t.sent,a=r.data,e.setState({file:a,fileLoading:!1}),e.props.change("document_id",a.id);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadUsers=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=_v()(e.loadUsers,1e3),e.getRecipientOptionLabel=function(e){return Yf(e).name},e.getRecipientOptionValue=function(e){return e.id},e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.totalAmount,o=t.isEdit,i=e.state,c=i.file,s=i.fileLoading;return Object(a.jsxs)("form",{id:yce,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"user",label:"Recipient",component:rO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getRecipientOptionLabel,getOptionValue:e.getRecipientOptionValue,validate:uv,isClearable:!0,placeholder:"Start typing to search...",disabled:o})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"date_of_expense",label:"Date of Expense",component:Cy,validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"total_amount",label:"Total Amount: ".concat(Kf(r||0)),component:ZO,type:"number",validate:uv})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"description",label:"Description",component:SJ,validate:uv})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(yv.a,{name:"is_chargeable",label:"Chargeable",component:LJ,direction:wJ.horizontal})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-auto",children:[s&&Object(a.jsx)(av,{size:16,color:y.white}),c?Object(a.jsx)(FS,{onClick:e.onUploadLinkClick,fontSize:Vf.smaller,color:y.blue4,style:{cursor:"pointer"},children:c.file_name}):Object(a.jsx)(PS,{noDecoration:!0,onClick:e.onUploadLinkClick,children:"Add file"})]})}),Object(a.jsx)("input",{type:"file",accept:jB,multiple:!0,hidden:!0,onChange:e.onFileInputChange,ref:e.inputRef})]})},e.renderFooter=function(){var t=e.props,n=t.invalid,r=t.docId;return Object(a.jsx)(Cg,{className:"btn",type:"submit",disabled:n||!r,form:yce,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(t=this.props.docId)){e.next=8;break}return this.setState({fileLoading:!0}),e.next=5,p_.getDocumentInfo(t);case 5:n=e.sent,r=n.data,this.setState({fileLoading:!1,file:r});case 8:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),_ce=Object(LO.compose)(Object(Gj.a)({form:yce}),Object(UO.a)({totalAmount:"total_amount",docId:"document_id"}))(wce),kce=function(e){return Object(c.a)(Object(c.a)({},e),{},{user_id:e.user.id,date_of_expense:e.date_of_expense.format(Dj),is_chargeable:!!e.is_chargeable&&e.is_chargeable})},Sce=function(e){return Object(c.a)(Object(c.a)({},e),{},{date_of_expense:qf()(e.date_of_expense)})};function Cce(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return Cce=function(){return e},e}var Nce=x.default.div(Cce(),y.blue4,Vf.smaller),Ece=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showReimbursementModal:!1,item:void 0},e.showReimbursementModal=function(){return e.setState({showReimbursementModal:!0})},e.hideReimbursementModal=function(){e.setState({showReimbursementModal:!1}),e.props.hideAddReimbursement()},e.reimbursementsColumns=function(){return[{id:"item",header:"Reimbursements",width:"10%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:qf()(e.date_of_expense).format(Pj)})}},{id:"user",width:"15%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.user.full_name})}},{id:"approve",width:"10%",type:mte.Text,cell:function(t){return e.pendingRender(t.approved_at?qf()(t.approved_at):null)}},{id:"description",width:"35%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.description})}},{id:"amount",width:"15%",type:mte.Text,cell:function(t){return Object(a.jsx)(Nce,{onClick:function(){return e.viewAttachmentRender(t.document_id)},children:"View attachment"})}},{id:"total_amount",width:"10%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:Kf(e.total_amount)})}},{id:"menu",width:"5%",type:mte.Numeric,cell:function(t){return Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.tableMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_REIMBURSEMENTS_MANAGE),o=t.has(Dw.JOBS_USAGE_REIMBURSEMENTS_APPROVE);return[{name:"View / Edit",disabled:!a||r,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!o||r,onClick:function(){return e.approveReimbursement(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!n.approved_at||r,onClick:e.markAsUsed(n)},{type:"divider"},{name:"Delete",disabled:!a||r,onClick:function(){return e.deleteItem(n)}}]},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_reimbursement",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadReimbursement(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.approveReimbursement=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!n.id){t.next=14;break}return t.next=4,r(Sw("Confirm","Approve Reimbursement for ".concat(n.user.full_name," at ").concat(qf()(n.date_of_expense).format(Pj),"?")));case 4:if(!t.sent){t.next=13;break}return e.setState({loading:!0}),t.next=9,dH.approveReimbursement(n);case 9:e.setState({loading:!1}),e.loadReimbursement(),t.next=14;break;case 13:return t.abrupt("return",Promise.resolve());case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.addNewReimbursement,o=r.jobId,i=r.userId,s=r.updateLabourCounters,!a){t.next=7;break}return t.next=4,dH.createReimbursement(Object(c.a)(Object(c.a)({},kce(n)),{},{job_id:o,creator_id:i}));case 4:s(),t.next=10;break;case 7:return l=kce(n),t.next=10,dH.updateReimbursement(l);case 10:e.loadReimbursement();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadReimbursement()}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showReimbursementModal()}},{key:"deleteItem",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(Sw("Confirm","Delete Reimbursement for ".concat(t.user.full_name," at ").concat(qf()(t.date_of_expense).format(Pj),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,dH.deleteJobReimbursement(r,t.id);case 9:this.setState({loading:!1}),this.loadReimbursement(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadReimbursement",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return iS(xH.load,xH.loadComplete,xH.error,(function(){return dH.getJobReimbursements(e,{page:t})}))}(n,e))}},{key:"viewAttachmentRender",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r=this;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,p_.getDocumentInfo(t);case 3:n=e.sent,p_.downloadDocument(t,n.data?n.data.file_name:"attachment").finally((function(){r.setState({loading:!1})}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"pendingRender",value:function(e){return e&&e.isValid()?Object(a.jsx)("div",{children:"\xa0"}):Object(a.jsx)(NC,{tag:{name:"PENDING",color:y.gray6}})}},{key:"render",value:function(){var e=this.props,t=e.currentJobReimbursements,n=e.addNewReimbursement,r=this.state,o=r.loading,i=r.showReimbursementModal,c=r.item,s=t.data,l=s&&s.data?s.data:[],u=t.loading||o,d=i||n;return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(_ce,{isOpen:d,onClose:this.hideReimbursementModal,title:n?"Add Reimbursement":"Edit Reimbursement",initialValues:n?{}:Sce(c||{}),onSubmit:this.onSubmit,isEdit:!n}),u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(zoe,{className:"table",children:Object(a.jsx)(Uie,{dataSource:l,columnsDefinition:this.reimbursementsColumns(),useCustomStyle:!0})}),s&&s.pagination&&s.pagination.last_page>1&&Object(a.jsx)(AS,{pagination:s.pagination,onChange:this.loadReimbursement})]})}}]),n}(p.PureComponent),Ace=Object(LO.compose)(Object(b.b)((function(e){return{userId:NP(e),currentJobReimbursements:e.currentJobUsageAndActuals.labourReimbursements}})))(Ece),Tce="ModalLahaForm",Ice=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:o(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.loadCompensations,o=r.data,i=r.loading,c=t.isEdit;return Object(a.jsxs)("form",{id:Tce,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"user",label:"Recipient",component:rO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getRecipientOptionLabel,getOptionValue:e.getRecipientOptionValue,validate:uv,isClearable:!0,placeholder:"Start typing to search...",disabled:c})}),Object(a.jsxs)("div",{className:"col-5 position-relative",children:[i&&Object(a.jsx)(av,{size:20,color:y.white}),Object(a.jsx)(yv.a,{name:"laha_compensation",label:"Compensation Type",component:Kv,getOptionLabel:e.getCompensationOptionLabel,getOptionValue:e.getCompensationOptionValue,validate:uv,options:o||[],disabled:c})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"date_started",label:"Date Started",component:Cy,validate:uv,futureEnabled:!0})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"days",label:"Days",component:ZO,validate:uv,step:1,type:"number"})})]})]})},e.loadUsers=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,uE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=_v()(e.loadUsers,1e3),e.getRecipientOptionLabel=function(e){return Yf(e).name},e.getRecipientOptionValue=function(e){return e.id},e.getCompensationOptionLabel=function(e){return e.rate_per_day.toString()},e.getCompensationOptionValue=function(e){return e.id},e.renderFooter=function(){var t=e.props.invalid;return Object(a.jsx)(Cg,{className:"btn",type:"submit",disabled:t,form:Tce,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadCompensations.fetch()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Rce=Object(LO.compose)(Object(Gj.a)({form:Tce}),Mm({loadCompensations:{fetch:dH.getLahaCompensations}}))(Ice),Dce=function(e){return Object(c.a)(Object(c.a)({},e),{},{user_id:e.user.id,laha_compensation_id:e.laha_compensation.id,date_started:e.date_started.format(Dj)})},Mce=function(e){return Object(c.a)(Object(c.a)({},e),{},{date_started:qf()(e.date_started)})},Pce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showLahaModal:!1,item:void 0},e.showLahaModal=function(){return e.setState({showLahaModal:!0})},e.hideLahaModal=function(){e.setState({showLahaModal:!1}),e.props.hideAddLaha()},e.lahaColumns=function(){return[{id:"item",header:"LAHA",width:"10%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:qf()(e.date_started).format(Pj)})}},{id:"user",width:"50%",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.user.full_name})}},{id:"approve",width:"10%",type:mte.Text,cell:function(t){return e.pendingRender(t.approved_at?qf()(t.approved_at):null)}},{id:"amount",width:"15%",type:mte.Text,cell:function(t){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(lie,{quantity:t.days,onChange:function(n){return e.onChangeQuantity(n,t.id)}}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:"days"})]})}},{id:"total_amount",width:"10%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:Kf(e.total_amount)})}},{id:"menu",width:"5%",type:mte.Numeric,cell:function(t){return Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.tableMenuItems=function(t,n,r){var a=t.has(Dw.JOBS_USAGE_LAHA_MANAGE),o=t.has(Dw.JOBS_USAGE_LAHA_APPROVE);return[{name:"View / Edit",disabled:!a||r,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!o||r,onClick:function(){return e.approveLaha(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!n.approved_at||r,onClick:e.markAsUsed(n)},{type:"divider"},{name:"Delete",disabled:!a||r,onClick:function(){return e.deleteItem(n)}}]},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_laha_compensation",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadLaha(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.approveLaha=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!n.id){t.next=14;break}return t.next=4,r(Sw("Confirm","Approve LAHA for ".concat(n.user.full_name," at ").concat(qf()(n.date_started).format(Pj),"?")));case 4:if(!t.sent){t.next=13;break}return e.setState({loading:!0}),t.next=9,dH.approveLaha(n);case 9:e.setState({loading:!1}),e.loadLaha(),t.next=14;break;case 13:return t.abrupt("return",Promise.resolve());case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeQuantity=function(t,n){e.debouncedQuantityUpdate(t,n)},e.updateQuantity=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.jobId,t.next=3,dH.updateJobLaha({job_id:a,id:r,days:n});case 3:e.loadLaha();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedQuantityUpdate=Object(m.debounce)(e.updateQuantity,1e3),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.addNewLaha,o=r.jobId,i=r.userId,s=r.updateLabourCounters,!a){t.next=7;break}return t.next=4,dH.createLaha(Object(c.a)(Object(c.a)({},Dce(n)),{},{job_id:o,creator_id:i}));case 4:s(),t.next=10;break;case 7:return l=Dce(n),t.next=10,dH.updateJobLaha(l);case 10:e.loadLaha();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLaha()}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showLahaModal()}},{key:"deleteItem",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(Sw("Confirm","Delete LAHA for ".concat(t.user.full_name," at ").concat(qf()(t.date_started).format(Pj),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,dH.deleteJobLaha(r,t.id);case 9:this.setState({loading:!1}),this.loadLaha(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLaha",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return iS(wH.load,wH.loadComplete,wH.error,(function(){return dH.getJobLahas(e,{page:t})}))}(n,e))}},{key:"pendingRender",value:function(e){return e&&e.isValid()?Object(a.jsx)("div",{children:"\xa0"}):Object(a.jsx)(NC,{tag:{name:"PENDING",color:y.gray6}})}},{key:"render",value:function(){var e=this.props,t=e.currentJobLahas,n=e.addNewLaha,r=this.state,o=r.loading,i=r.showLahaModal,c=r.item,s=t.data,l=s&&s.data?s.data:[],u=t.loading||o,d=i||n;return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(Rce,{isOpen:d,onClose:this.hideLahaModal,onSubmit:this.onSubmit,title:n?"Add LAHA":"Edit LAHA",initialValues:n?{}:Mce(c||{}),isEdit:!n}),u&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(zoe,{className:"table",children:Object(a.jsx)(Uie,{dataSource:l,columnsDefinition:this.lahaColumns(),useCustomStyle:!0})}),s&&s.pagination&&s.pagination.last_page>1&&Object(a.jsx)(AS,{pagination:s.pagination,onChange:this.loadLaha})]})}}]),n}(p.PureComponent),Lce=Object(LO.compose)(Object(b.b)((function(e){return{userId:NP(e),currentJobLahas:e.currentJobUsageAndActuals.labourLahas}})))(Pce);function Fce(){var e=Object(f.a)(["\n  margin-bottom: 16px;\n"]);return Fce=function(){return e},e}var Uce=x.default.div(Fce()),Vce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hideRates:!0,hideMultiselect:!0,showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1},e.labourMainMenuItems=function(t,n){var r=t.has(Dw.JOBS_USAGE_LABOUR_MANAGE),a=t.has(Dw.JOBS_USAGE_ALLOWANCES_MANAGE),o=t.has(Dw.JOBS_USAGE_REIMBURSEMENTS_MANAGE),i=t.has(Dw.JOBS_USAGE_LAHA_MANAGE);return[{name:"Add Labour",disabled:!r||n,onClick:e.showAddLabourModal},{type:"divider"},{name:"Add Allowance",disabled:!a||n,onClick:e.showAddAllowanceModal},{name:"Add Reimbursement",disabled:!o||n,onClick:e.showAddReimbursementModal},{name:"Add LAHA",disabled:!i||n,onClick:e.showAddLahaModal}]},e.toggleRateView=function(){e.setState({hideRates:!e.state.hideRates})},e.toggleMultiselectView=function(){e.setState({hideMultiselect:!e.state.hideMultiselect,hideRates:!!e.state.hideMultiselect||e.state.hideRates})},e.showAddAllowanceModal=function(){return e.setState({showAddAllowanceModal:!0})},e.hideAddAllowanceModal=function(){return e.setState({showAddAllowanceModal:!1})},e.showAddLabourModal=function(){return e.setState({showAddLabourModal:!0})},e.hideAddLabourModal=function(){return e.setState({showAddLabourModal:!1})},e.showAddReimbursementModal=function(){return e.setState({showAddReimbursementModal:!0})},e.hideAddReimbursementModal=function(){return e.setState({showAddReimbursementModal:!1})},e.showAddLahaModal=function(){return e.setState({showAddLahaModal:!0})},e.hideAddLahaModal=function(){return e.setState({showAddLahaModal:!1})},e.jobIsClosed=function(){var t=e.props.job;return t.data&&t.data.latest_status.status===gj.Closed||!t.data},e.updateLabourCounters=function(){var t=e.props,n=t.dispatch,r=t.match.params.id;n(RH(parseInt(r)))},e}return Object(l.a)(n,[{key:"componentWillMount",value:function(){this.updateLabourCounters()}},{key:"mainButtonRender",value:function(){return Object(a.jsxs)(Cg,{className:"btn",style:{marginLeft:"10px"},children:["Add ",Object(a.jsx)(J3,{style:{marginLeft:"10px"},size:16,color:y.white,name:Ef.ArrowDown})]})}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props.match.params.id,n=this.jobIsClosed();return Object(a.jsx)(Cw.Consumer,{children:function(r){var o=r.has(Dw.JOBS_USAGE_VIEW),i=r.has(Dw.JOBS_USAGE_EQUIPMENT_CREATE);return o?Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"view-rates-tooltip",effect:"solid",place:"bottom"}),Object(a.jsx)(cw,{"data-tip":"Show/Hide rate columns","data-for":"view-rates-tooltip",className:"align-self-center",children:Object(a.jsx)(Ff,{name:Ef.View,size:30,onClick:e.toggleRateView})}),Object(a.jsx)(Jf.a,{className:"overlapping",id:"view-multiselect",effect:"solid",place:"bottom"}),Object(a.jsx)(cw,{"data-tip":"Show/Hide multiselect column","data-for":"view-multiselect",className:"align-self-center",children:Object(a.jsx)(Ff,{name:Ef.BulletList,size:20,onClick:e.toggleMultiselectView})}),Object(a.jsx)(Uoe,{jobId:parseInt(t)}),i&&Object(a.jsx)(yw,{direction:"right",items:e.labourMainMenuItems(r,n),trigger:e.mainButtonRender})]}):null}})}},{key:"renderContentPage",value:function(){var e=this.props.match.params.id,t=this.state,n=t.hideRates,r=t.hideMultiselect,o=t.showAddLabourModal,i=t.showAddAllowanceModal,c=t.showAddReimbursementModal,s=t.showAddLahaModal,l=this.jobIsClosed();return Object(a.jsxs)(hC,{className:"d-flex flex-column align-items-start",style:{minHeight:"95%"},children:[Object(a.jsx)("div",{className:"mb-auto w-100",children:Object(a.jsx)(bce,{jobId:parseInt(e),jobIsClosed:l,hideRates:n,hideMultiselect:r,addNewLabour:o,hideAddLabour:this.hideAddLabourModal,updateLabourCounters:this.updateLabourCounters})}),Object(a.jsx)(Uce,{className:"w-100",children:Object(a.jsx)(xce,{jobId:parseInt(e),jobIsClosed:l,addNewAllowance:i,hideAddAllowance:this.hideAddAllowanceModal,updateLabourCounters:this.updateLabourCounters})}),Object(a.jsx)(Uce,{className:"w-100",children:Object(a.jsx)(Ace,{jobId:parseInt(e),jobIsClosed:l,addNewReimbursement:c,hideAddReimbursement:this.hideAddReimbursementModal,updateLabourCounters:this.updateLabourCounters})}),Object(a.jsx)(Uce,{className:"w-100",children:Object(a.jsx)(Lce,{jobId:parseInt(e),jobIsClosed:l,addNewLaha:s,hideAddLaha:this.hideAddLahaModal,updateLabourCounters:this.updateLabourCounters})})]})}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})})}}]),n}(p.Component),Bce=Object(LO.compose)(v.g,Object(b.b)((function(e){return{userId:NP(e),job:e.currentJob}})))(Vce),Jce=n(578);function zce(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  font-weight: lighter;\n  border-color: ",";\n  box-shadow: 0 0 0 !important;\n\n  &:hover,\n  &:active {\n    background: "," !important;\n    border-color: "," !important;\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    background: ",";\n    color: ",";\n    border-color: ",";\n  }\n"]);return zce=function(){return e},e}var qce=x.default.button(zce(),y.white,y.blue2,y.blue2,y.blue0,y.blue3,y.white,y.blue2,y.blue2);function Wce(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  width: ","px;\n  position: relative;\n"]);return Wce=function(){return e},e}function Hce(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  width: ","px;\n  position: relative;\n"]);return Hce=function(){return e},e}function Gce(){var e=Object(f.a)(["\n  margin: 5px 0 30px 0;\n  font-weight: 400;\n"]);return Gce=function(){return e},e}function Yce(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Yce=function(){return e},e}function Qce(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return Qce=function(){return e},e}var Kce=x.default.div(Qce()),Zce=x.default.div(Yce()),Xce=x.default.h2(Gce()),$ce=x.default.nav(Hce(),y.white,320),ese=x.default.nav(Wce(),y.white,240),tse={},nse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1,tableData:[],isLoading:!1},e.getNewImports=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,e.setState({isLoading:!0}),t.prev=2,t.next=5,dH.getAllImportModal(parseInt(n),"new");case 5:r=t.sent,a=Object(Dm.a)(e.state.tableData),r&&(r.length>0&&r.map((function(e,t){switch(e.modal){case"job_labour":a.push({id:0,value:"Labour",data:e.data});break;case"job_equipment":a.push({id:1,value:"Equipment",data:e.data});break;case"job_material":a.push({id:2,value:"Materials",data:e.data});break;case"job_purchaseOrder":a.push({id:3,value:"Purchase Orders",data:e.data});break;case"job_storage":a.push({id:4,value:"Storage",data:e.data});break;case"job_allowance":a.push({id:5,value:"Allowances",data:e.data});break;case"job_reimbursement":a.push({id:6,value:"Reimbursements",data:e.data});break;case"job_laha_compensation":a.push({id:7,value:"LAHA",data:e.data})}})),e.setState({tableData:a,isLoading:!1})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),Qm(Vm.Danger,"This status can't be applied"),e.setState({isLoading:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.labourMainMenuItems=function(t){var n=e.props.job,r=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return[{name:"Individual line items",onClick:function(){return e.individualItems("individual")}},{type:"divider"},{name:"Combine into sections",disabled:!t.has(Dw.ASSESSMENT_REPORTS_MANAGE)||r,onClick:function(){return e.individualItems("combine")}}]},e.individualItems=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.tableData,a=[],r.map((function(e){e.data.map((function(t){if(1===t.in_report_used_count)switch(e.value){case"Labour":a.push({modal:"job_labour",ids:t.id});break;case"Equipment":a.push({modal:"job_equipment",ids:t.id});break;case"Materials":a.push({modal:"job_material",ids:t.id});break;case"Purchase Orders":a.push({modal:"job_purchaseOrder",ids:t.id});break;case"Storage":a.push({modal:"job_storage",ids:t.id});break;case"Allowances":a.push({modal:"job_allowance",ids:t.id});break;case"Reimbursements":a.push({modal:"job_reimbursement",ids:t.id});break;case"LAHA":a.push({modal:"job_laha_compensation",ids:t.id})}}))})),o=[{modal:"job_labour",ids:""},{modal:"job_equipment",ids:""},{modal:"job_material",ids:""},{modal:"job_purchaseOrder",ids:""},{modal:"job_storage",ids:""},{modal:"job_allowance",ids:""},{modal:"job_reimbursement",ids:""},{modal:"job_laha_compensation",ids:""}],a.map((function(e){o.map((function(t){if(e.modal===t.modal)if(0===t.ids.length)t.ids=e.ids;else{var n=[];n.push(e.ids),n.push(2),t.ids=n.join(",")}}))})),i=e.props.match.params.id,t.prev=6,c={date:new Date,savetype:n,value:o},t.next=10,dH.newReportCreate(parseInt(i),c);case 10:e.props.history.push("/usage-and-actuals/".concat(i,"/buildCosting")),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),Qm(Vm.Danger,"This status can't be applied");case 16:case"end":return t.stop()}}),t,null,[[6,13]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBuildCosting=function(){var t=e.props.match.params.id;e.props.history.push("/usage-and-actuals/".concat(t,"/buildCosting"))},e.renderBuildDocument=function(){var t=e.props.match.params.id;e.props.history.push("/usage-and-actuals/".concat(t,"/buildDocument"))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;ly.findById(e).then((function(e){tse=e})),this.getNewImports()}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.selectedItems.data.selectedItems.data!==this.props.selectedItems.data.selectedItems.data){var n=Object(Dm.a)(this.state.tableData);n.map((function(e,n){e.value===t.props.selectedItems.data.selectedItems.type&&(e.data=t.props.selectedItems.data.selectedItems.data)})),this.setState({tableData:n})}}},{key:"mainButtonRender",value:function(){return Object(a.jsxs)(Cg,{className:"btn",style:{marginLeft:"10px"},children:["Create"," ",Object(a.jsx)(J3,{style:{marginLeft:"10px"},size:16,color:y.white,name:Ef.ArrowDown})]})}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props.match.params.id;return Object(a.jsx)(Cw.Consumer,{children:function(n){var r=n.has(Dw.JOBS_USAGE_VIEW),o=n.has(Dw.ASSESSMENT_REPORTS_MANAGE);return r?Object(a.jsx)("div",{children:Object(a.jsxs)(Zce,{children:[Object(a.jsx)(Uf.b,{to:"/usage-and-actuals/".concat(t,"/summary"),children:Object(a.jsx)(qce,{className:"btn",children:"Cancle"})}),o&&Object(a.jsx)(yw,{direction:"right",items:e.labourMainMenuItems(n),trigger:e.mainButtonRender})]})}):null}})}},{key:"getMenuItems",value:function(){return[]}},{key:"render",value:function(){var e=this.props.customHeaderTitle,t=tse,n=t?ly.getJobAddress(t):"",r=t&&ly.getJobName(t);return r&&(n+=" | ".concat(r)),Object(Jce.a)(this.props.match),Object(a.jsxs)(Kce,{className:"d-flex flex-column",children:[this.state.isLoading&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(Kq,{customHeaderTitle:e,siteAddress:n,additionalHeaderLayout:this.renderAdditionalHeaderLayout()}),Object(a.jsxs)("div",{className:"d-flex h-100",children:[Object(a.jsx)($ce,{}),Object(a.jsx)(uC,{className:"h-100 w-100",children:Object(a.jsxs)(hC,{className:"d-flex flex-row",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(Xce,{children:"Import Existing Actuals"}),Object(a.jsx)("div",{className:"mb-auto w-100",children:0!==this.state.tableData.length&&this.state.tableData.map((function(e,t){return null}))})]}),Object(a.jsx)(ese,{})]})})]})]})}}]),n}(p.PureComponent),rse=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,selectedItems:e.document}})))(nse);function ase(){var e=Object(f.a)(["\n  font-size: ",";\n  display: ",";\n"]);return ase=function(){return e},e}function ose(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n"]);return ose=function(){return e},e}function ise(){var e=Object(f.a)(["\n  float: right;\n  cursor: pointer;\n  margin-top: -3px;\n  margin-right: -8px;\n"]);return ise=function(){return e},e}function cse(){var e=Object(f.a)(["\n  width: 280px;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 4px;\n  border-color: ",";\n  background: ",";\n  margin: 10px auto;\n  padding: 12px;\n  padding-right: 20px;\n  position: relative;\n  overflow: ",";\n  position: relative;\n"]);return cse=function(){return e},e}var sse=Object(x.default)(Kj(["collapsed","overflow"])("div"))(cse(),(function(e){return e.collapsed?"transparent":y.gray2}),(function(e){return e.collapsed?"transparent":y.white}),(function(e){return e.overflow?e.overflow:"hidden"})),lse=x.default.div(ise()),use=x.default.div(ose(),Bf.bold),dse=Object(x.default)(Kj(["collapsed"])("div"))(ase(),Vf.smaller,(function(e){return e.collapsed?"none":"block"})),pse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state=void 0,r.toggleCollapsed=function(){r.setState({collapsed:!r.state.collapsed})},r.state={collapsed:e.defaultCollapsed||!1,overflow:e.overflow||"hidden"},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.loading,t=this.state,r=t.collapsed,o=t.overflow;return Object(a.jsxs)(sse,{collapsed:r,overflow:o,children:[e&&Object(a.jsx)(av,{size:30,color:r?y.gray1:y.white}),this.props.collapsable&&Object(a.jsx)(lse,{onClick:this.toggleCollapsed,children:Object(a.jsx)(Ff,{name:this.collapseIconName,size:n.iconSize})}),this.props.hasMenu&&Object(a.jsx)(lse,{children:Object(a.jsx)(Ff,{name:Ef.MenuVertical,size:n.iconSize})}),Object(a.jsx)(use,{children:this.props.caption}),Object(a.jsx)(dse,{collapsed:this.state.collapsed,children:this.props.children})]})}},{key:"collapseIconName",get:function(){return this.state.collapsed?Ef.ArrowDown:Ef.ArrowUp}}]),n}(p.PureComponent);pse.iconSize=16;var hse,bse=pse;function fse(){var e=Object(f.a)(["\n  line-height: 1.5;\n  font-weight: ",";\n"]);return fse=function(){return e},e}function mse(){var e=Object(f.a)(["\n  .financiels-reference-value {\n    margin-right: 10px;\n  }\n"]);return mse=function(){return e},e}function jse(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 10px;\n"]);return jse=function(){return e},e}function vse(){var e=Object(f.a)(["\n  display: flex;\n  .financiels-reference-label {\n    flex-basis: 60%;\n  }\n"]);return vse=function(){return e},e}var Ose,gse=x.default.div(vse()),xse=x.default.div(jse()),yse=x.default.div(mse()),wse=Object(x.default)(gse)(fse(),Bf.bold);!function(e){e.room="room",e.Total="Total",e.Affected="Affected",e.Type="Type"}(Ose||(Ose={}));var _se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={areasData:[]},e.topValues=[Ose.Total,Ose.Affected,Ose.Type],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.financials,t=Object(Dm.a)(this.state.areasData);e.length>0&&(e.map((function(e){var n;t.push({label:e.name,value:"",total:null!==e.total_sqm?e.total_sqm:"",affected:null!==e.affected_sqm?e.affected_sqm:"",Type:null===e||void 0===e||null===(n=e.flooring_type)||void 0===n?void 0:n.name})})),this.setState({areasData:t}))}},{key:"componentDidUpdate",value:function(e){if(e.financials!==this.props.financials){var t=this.props.financials,n=Object(Dm.a)(this.state.areasData);t.length>0&&(t.map((function(e){var t;n.push({label:e.name,value:"",total:null!==e.total_sqm?e.total_sqm:"",affected:null!==e.affected_sqm?e.affected_sqm:"",Type:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.name})})),this.setState({areasData:n}))}}},{key:"renderLabelAndValue",value:function(e,t){var r=n.fields[e],o=r.label,i=r.key,c=r.percents;"room"===i&&(o=t.label);var s="";return"Total"===i?s=t.total:"Affected"===i?s=t.affected:"Type"===i&&(s=t.Type),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",children:o}),s&&Object(a.jsx)(yse,{children:this.formatValue(s,c)})]})}},{key:"formatValue",value:function(e,t){return t?"".concat(e):""}},{key:"renderRows",value:function(e,t){var n=this;return e.map((function(e){return Object(a.jsx)(gse,{children:n.renderLabelAndValue(e,t)},"fnc-".concat(e))}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(bse,{caption:"Areas",collapsable:!0,defaultCollapsed:!0,children:this.state.areasData.length>0&&this.state.areasData.map((function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)(wse,{children:e.renderLabelAndValue(Ose.room,t)}),e.renderRows(e.topValues,t),Object(a.jsx)(xse,{})]},n)}))})}}]),n}(p.PureComponent);_se.fields=(hse={},Object(k.a)(hse,Ose.room,{label:"",key:"room",percents:!0}),Object(k.a)(hse,Ose.Total,{label:"Total:",key:"Total",percents:!0}),Object(k.a)(hse,Ose.Affected,{label:"Affected:",key:"Affected",percents:!0}),Object(k.a)(hse,Ose.Type,{label:"Type:",key:"Type",percents:!0}),hse);var kse,Sse=_se;function Cse(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 15px 0 10px;\n  height: 1px;\n  border-top: 1px solid ",";\n"]);return Cse=function(){return e},e}function Nse(){var e=Object(f.a)(["\n  line-height: 1.5;\n  font-weight: ",";\n"]);return Nse=function(){return e},e}function Ese(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 10px;\n"]);return Ese=function(){return e},e}function Ase(){var e=Object(f.a)(["\n  display: flex;\n  .financiels-reference-label {\n    width: 90px;\n    min-width: 90px;\n  }\n"]);return Ase=function(){return e},e}var Tse,Ise=x.default.div(Ase()),Rse=x.default.div(Ese()),Dse=Object(x.default)(Ise)(Nse(),Bf.bold),Mse=x.default.div(Cse(),y.gray2);!function(e){e.room="room",e.Total="Total",e.Affected="Affected",e.Type="Type"}(Tse||(Tse={}));var Pse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={areasData:[],totalData:[]},e.topValues=[Tse.Total,Tse.Affected],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.financials,t=Object(Dm.a)(this.state.areasData),n=Object(Dm.a)(this.state.totalData);if(e.length>0){var r=0,a=0;e.map((function(e){var o;null!==e.total_sqm&&(r+=e.total_sqm),null!==e.affected_sqm&&(a+=e.affected_sqm),t.push({label:e.name,value:"",total:null!==e.total_sqm?e.total_sqm:0,affected:null!==e.affected_sqm?e.affected_sqm:0,Type:null===e||void 0===e||null===(o=e.flooring_type)||void 0===o?void 0:o.name}),n.push({label:"total",value:"",total:r,affected:a,affectedTwo:"4 sqm NR"})})),this.setState({areasData:t,totalData:n})}}},{key:"componentDidUpdate",value:function(e){if(e.financials!==this.props.financials){var t=this.props.financials,n=Object(Dm.a)(this.state.areasData);t.length>0&&(t.map((function(e){var t;n.push({label:e.name,value:"",total:null!==e.total_sqm?e.total_sqm:"",affected:null!==e.affected_sqm?e.affected_sqm:"",Type:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.name})})),this.setState({areasData:n}))}}},{key:"renderLabelAndValue",value:function(e,t){var r=n.fields[e],o=r.label,i=r.key,c=r.percents;"room"===i&&(o=t.label);var s="",l="";return"Total"===i?(s=t.total,l=""):"Affected"===i&&(s=t.affected,l=t.affectedTwo),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",style:"total"===t.label?{fontWeight:700}:{},children:o}),s&&Object(a.jsx)("div",{className:"financiels-reference-value",style:"total"===t.label?{width:"90px",fontWeight:700}:{width:"90px"},children:this.formatValue(s,c)}),l&&Object(a.jsx)("div",{className:"financiels-reference-value",style:"total"===t.label?{width:"90px",fontWeight:700}:{width:"90px"},children:this.formatValue(l,c)})]})}},{key:"formatValue",value:function(e,t){return t?"".concat(e):""}},{key:"renderRows",value:function(e,t){var n=this;return e.map((function(e){return Object(a.jsx)(Ise,{children:n.renderLabelAndValue(e,t)},"fnc-".concat(e))}))}},{key:"render",value:function(){var e=this;return Object(a.jsxs)(bse,{caption:"Area Summary",collapsable:!0,defaultCollapsed:!0,children:[this.state.areasData.length>0&&this.state.areasData.map((function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Dse,{children:e.renderLabelAndValue(Tse.room,t)}),e.renderRows(e.topValues,t),Object(a.jsx)(Rse,{})]},n)})),Object(a.jsx)(Mse,{}),this.state.totalData.length>0&&this.state.totalData.map((function(t,n){return e.renderRows(e.topValues,t)}))]})}}]),n}(p.PureComponent);Pse.fields=(kse={},Object(k.a)(kse,Tse.room,{label:"",key:"room",percents:!0}),Object(k.a)(kse,Tse.Total,{label:"Total:",key:"Total",percents:!0}),Object(k.a)(kse,Tse.Affected,{label:"Affected:",key:"Affected",percents:!0}),Object(k.a)(kse,Tse.Type,{label:"Type:",key:"Type",percents:!0}),kse);var Lse=Pse;function Fse(){var e=Object(f.a)(["\n  :hover {\n    background-color: ",";\n  }\n"]);return Fse=function(){return e},e}var Use=x.default.tr(Fse(),y.gray1),Vse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={itemSelected:e.props.dataSource},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(t,n){for(var r=e.state.itemSelected.slice(),a=-1,o=-1,i=0;i<r.length;i++)"cost_".concat(r[i].id)===t.id&&(a=i),"cost_".concat(r[i].id)===n.id&&(o=i);if(-1!=a&&-1!=o){var s=r[a],l=(s.fromId,Object(Rm.a)(s,["fromId"])),u=r[o],d=(u.toId,Object(Rm.a)(u,["toId"]));r[a]=Object(c.a)({id:t.id},d),r[o]=Object(c.a)({id:n.id},l),e.setState({itemSelected:r},(function(){e.props.updatedData(e.state.itemSelected)}))}},e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContent")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){e.dataSource!==this.props.dataSource&&this.setState({itemSelected:this.props.dataSource})}},{key:"renderBodyRows",value:function(){var e=this,t=this.props,n=t.columnsDefinition;return t.dataSource.map((function(t){return Object(a.jsx)(Use,{id:"cost_".concat(t.id),children:n.map((function(n){return Object(a.jsx)(j8,{width:n.width,hidden:n.hidden,align:n.type,onDragOver:function(n){return e.onDragOver(n,"cost_".concat(t.id))},onDrop:function(n){return e.onDrop(n,"cost_".concat(t.id))},children:n.cell(t)},n.id)}))},t.id)}))}},{key:"renderNodata",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:e.length,children:"No items found"})})}},{key:"renderTHead",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:e.map((function(e){return Object(a.jsx)(w8,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})})}},{key:"renderTBody",value:function(){var e=this.props.dataSource;return Object(a.jsx)("tbody",{children:e&&e.length>0?this.renderBodyRows():this.renderNodata()})}},{key:"render",value:function(){var e=this.props.useCustomStyle;return Object(a.jsx)(a.Fragment,{children:e?Object(a.jsxs)(a.Fragment,{children:[this.renderTHead(),this.renderTBody()]}):Object(a.jsxs)("table",{className:"table",children:[this.renderTHead(),this.renderTBody()]})})}}]),n}(p.PureComponent);function Bse(){var e=Object(f.a)(["\n  font-weight: 600;\n"]);return Bse=function(){return e},e}function Jse(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return Jse=function(){return e},e}function zse(){var e=Object(f.a)(["\n  width: 300px;\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return zse=function(){return e},e}function qse(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return qse=function(){return e},e}function Wse(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n"]);return Wse=function(){return e},e}function Hse(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return Hse=function(){return e},e}function Gse(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return Gse=function(){return e},e}function Yse(){var e=Object(f.a)(["\n  // border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Yse=function(){return e},e}function Qse(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return Qse=function(){return e},e}function Kse(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return Kse=function(){return e},e}var Zse=x.default.span(Kse(),y.gray3),Xse=x.default.th(Qse(),y.gray2),$se=x.default.td(Yse(),y.gray2),ele=x.default.tr(Gse(),y.blue0),tle=x.default.table(Hse()),nle=x.default.tbody(Wse(),y.gray2),rle=x.default.input(qse(),y.gray2,y.gray4),ale=Object(x.default)(m7.a)(zse()),ole=x.default.div(Jse()),ile=x.default.span(Bse()),cle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[{id:0,label:"No. of crew:",v1:0,v2:0,v3:0,v4:0},{id:1,label:"Hours per day:",v1:0,v2:0,v3:0,v4:0},{id:2,label:"Days:",v1:0,v2:0,v3:0,v4:0}],totalV1:0,totalV2:0,totalV3:0,totalV4:0,labourType:[],selectedLabour:{}},e.getLabourType=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.getLabourTypes();case 3:(n=t.sent.data)&&(r=Object(Dm.a)(e.state.labourType),n.map((function(e){r.push({value:e.id,label:e.name,first_tier_hourly_rate:e.first_tier_hourly_rate,second_tier_hourly_rate:e.second_tier_hourly_rate,third_tier_hourly_rate:e.third_tier_hourly_rate,fourth_tier_hourly_rate:e.fourth_tier_hourly_rate})})),e.setState({labourType:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleChangeV1=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.v1=r)})),e.setState({tableData:a})},e.handleChangeV2=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.v2=r)})),e.setState({tableData:a})},e.handleChangeV3=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.v3=r)})),e.setState({tableData:a})},e.handleChangeV4=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.v4=r)})),e.setState({tableData:a})},e.getValueV1=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v1)}));var r=n.reduce((function(e,t){return e*t}));return e.setState({totalV1:r}),r.toFixed(2)},e.getValueV2=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v2)}));var r=n.reduce((function(e,t){return e*t}));return e.setState({totalV2:r}),r.toFixed(2)},e.getValueV3=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v3)}));var r=n.reduce((function(e,t){return e*t}));return e.setState({totalV3:r}),r.toFixed(2)},e.getValueV4=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v4)}));var r=n.reduce((function(e,t){return e*t}));return e.setState({totalV4:r}),r.toFixed(2)},e.handleLabourType=function(t){e.setState({selectedLabour:t})},e.handleAddLabour=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.totalV1,a=n.totalV2,o=n.totalV3,i=n.totalV4,c=n.selectedLabour,s=[],void 0===c.value){t.next=14;break}return r>0&&s.push({name:"".concat(c.label," @1.0"),unitCost:c.first_tier_hourly_rate,quantity:r}),a>0&&s.push({name:"".concat(c.label," @1.5"),unitCost:c.second_tier_hourly_rate,quantity:r}),o>0&&s.push({name:"".concat(c.label," @2.0"),unitCost:c.third_tier_hourly_rate,quantity:r}),i>0&&s.push({name:"".concat(c.label," @2.5"),unitCost:c.fourth_tier_hourly_rate,quantity:r}),l=e.props.reportId,u=[],s.map((function(t){u.push(dH.costItemCreate(l,{assessment_report_costing_stage_id:e.props.costingTableId,gs_code_id:1,description:t.name,quantity:parseInt(t.quantity),unit_cost:t.unitCost,discount:0,markup:0,tax_rate_id:1,position:0}))})),t.next=12,Promise.all(u).then((function(t){t&&(e.props.dispatch(H5(l)),e.props.onClose())}));case 12:t.next=15;break;case 14:Qm(Vm.Danger,"Select Labour Type");case 15:case"end":return t.stop()}}),t)}))),e.renderBody=function(){return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(tle,{children:[Object(a.jsxs)("thead",{children:[Object(a.jsxs)(ele,{children:[Object(a.jsx)($se,{children:Object(a.jsx)(Zse,{children:"Labour Type:"})}),Object(a.jsx)($se,{colSpan:1}),Object(a.jsx)($se,{colSpan:4,children:Object(a.jsx)(ale,{options:e.state.labourType,onChange:e.handleLabourType})})]}),Object(a.jsxs)(ele,{children:[Object(a.jsx)(Xse,{colSpan:2}),Object(a.jsx)(Xse,{children:Object(a.jsx)(Zse,{children:"Normal 1.0x"})}),Object(a.jsx)(Xse,{children:Object(a.jsx)(Zse,{children:"1.5x"})}),Object(a.jsx)(Xse,{children:Object(a.jsx)(Zse,{children:"2.0x"})}),Object(a.jsx)(Xse,{children:Object(a.jsx)(Zse,{children:"2.5x"})})]})]}),Object(a.jsx)(nle,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(ele,{children:[Object(a.jsx)($se,{children:Object(a.jsx)(Zse,{children:t.label})}),Object(a.jsx)($se,{colSpan:1}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",value:t.v1,min:0,onChange:function(t){return e.handleChangeV1(t,n)}})}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",value:t.v2,min:0,onChange:function(t){return e.handleChangeV2(t,n)}})}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",value:t.v3,min:0,onChange:function(t){return e.handleChangeV3(t,n)}})}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",value:t.v4,min:0,onChange:function(t){return e.handleChangeV4(t,n)}})})]},n)}))}),Object(a.jsx)(nle,{children:Object(a.jsxs)(ele,{children:[Object(a.jsx)($se,{children:Object(a.jsx)(Zse,{children:"TOTALS:"})}),Object(a.jsx)($se,{colSpan:1}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",min:0,value:e.getValueV1()})}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",min:0,value:e.getValueV2()})}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",min:0,value:e.getValueV3()})}),Object(a.jsx)($se,{children:Object(a.jsx)(rle,{type:"number",min:0,value:e.getValueV4()})})]})})]})}),Object(a.jsxs)(ole,{children:[Object(a.jsx)(ile,{style:{marginRight:"40px"},children:"Total:"}),Object(a.jsxs)(ile,{children:[e.getCrewNumber()," crew for ",e.getTotalHours()," hours"]})]})]})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn",onClick:e.handleAddLabour,children:"Add"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getLabourType()}},{key:"getCrewNumber",value:function(){var e;return this.state.tableData.map((function(t){0===t.id&&(e=parseInt(t.v1)+parseInt(t.v2)+parseInt(t.v3)+parseInt(t.v4))})),e}},{key:"getTotalHours",value:function(){var e=this.state;return(e.totalV1+e.totalV2+e.totalV3+e.totalV4).toFixed(2)}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),sle=Object(b.b)(null)(cle);function lle(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return lle=function(){return e},e}function ule(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return ule=function(){return e},e}function dle(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return dle=function(){return e},e}function ple(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return ple=function(){return e},e}function hle(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return hle=function(){return e},e}function ble(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return ble=function(){return e},e}function fle(){var e=Object(f.a)(["\n  margin-left: 10px;\n"]);return fle=function(){return e},e}function mle(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return mle=function(){return e},e}var jle=x.default.span(mle(),y.gray3),vle=x.default.span(fle()),Ole=x.default.th(ble(),y.gray2),gle=x.default.td(hle(),y.gray2),xle=x.default.tr(ple(),y.blue0),yle=x.default.table(dle()),wle=x.default.tbody(ule(),y.gray2),_le=x.default.input(lle(),y.gray2,y.gray4),kle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[]},e.loadEquipments=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.getEquipmentCategories();case 3:n=t.sent.data,r=Object(Dm.a)(e.state.tableData),n&&(n.length>0&&n.map((function(e){r.push({id:e.id,label:e.name,quantity:0,daysOnSite:0,charging_intervals:e.charging_intervals})})),e.setState({tableData:r})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.handleChangeQuantity=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.quantity=r)})),e.setState({tableData:a})},e.handleChangeDaysOnSite=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.daysOnSite=r)})),e.setState({tableData:a})},e.handleAddData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Dm.a)(e.state.tableData),r=[],n.map((function(e){parseInt(e.quantity)>0&&parseInt(e.daysOnSite)>0&&r.push(e)})),a=e.props.reportId,o=[],r.map((function(t){var n=0;n=t.charging_intervals.length>0?t.charging_intervals[0].charging_rate_per_interval:0,o.push(dH.costItemCreate(a,{assessment_report_costing_stage_id:e.props.costingTableId,gs_code_id:1,description:t.label,quantity:parseInt(t.quantity),unit_cost:n,discount:0,markup:0,tax_rate_id:1,position:0}))})),t.next=8,Promise.all(o).then((function(t){t&&(e.props.dispatch(H5(a)),e.props.onClose())}));case 8:case"end":return t.stop()}}),t)}))),e.renderBody=function(){return Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(yle,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(xle,{children:[Object(a.jsx)(Ole,{colSpan:4}),Object(a.jsx)(Ole,{children:Object(a.jsx)(jle,{children:"Quantity"})}),Object(a.jsx)(Ole,{children:Object(a.jsx)(jle,{children:"Days On-site"})})]})}),Object(a.jsx)(wle,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(xle,{children:[Object(a.jsx)(gle,{colSpan:4,children:Object(a.jsx)(vle,{children:t.label})}),Object(a.jsx)(gle,{children:Object(a.jsx)(_le,{type:"number",value:t.quantity,min:0,onChange:function(n){return e.handleChangeQuantity(n,t.id)}})}),Object(a.jsx)(gle,{children:Object(a.jsx)(_le,{type:"number",value:t.daysOnSite,min:0,onChange:function(n){return e.handleChangeDaysOnSite(n,t.id)}})})]},n)}))})]})})})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn",onClick:e.handleAddData,children:"Add"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadEquipments()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Sle=Object(b.b)((function(e){return{currentJobEquipments:e.currentJobUsageAndActuals.equipments}}))(kle);function Cle(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Cle=function(){return e},e}function Nle(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return Nle=function(){return e},e}function Ele(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return Ele=function(){return e},e}function Ale(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return Ale=function(){return e},e}function Tle(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Tle=function(){return e},e}function Ile(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return Ile=function(){return e},e}function Rle(){var e=Object(f.a)(["\n  margin-left: 10px;\n"]);return Rle=function(){return e},e}function Dle(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return Dle=function(){return e},e}var Mle=x.default.span(Dle(),y.gray3),Ple=x.default.span(Rle()),Lle=x.default.th(Ile(),y.gray2),Fle=x.default.td(Tle(),y.gray2),Ule=x.default.tr(Ale(),y.blue0),Vle=x.default.table(Ele()),Ble=x.default.tbody(Nle(),y.gray2),Jle=x.default.input(Cle(),y.gray2,y.gray4),zle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[]},e.loadMaterials=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.getAllMaterials();case 3:n=t.sent.data,r=Object(Dm.a)(e.state.tableData),n&&(n.length>0&&n.map((function(e){r.push({id:e.id,label:e.name,quantity:0,unitType:e.measure_unit.name,unitCost:e.default_sell_cost_per_unit})})),e.setState({tableData:r})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])}))),e.handleChangeQuantity=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.quantity=r)})),e.setState({tableData:a})},e.handleAddMaterial=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object(Dm.a)(e.state.tableData),r=[],n.map((function(e){parseInt(e.quantity)>0&&r.push(e)})),a=e.props.reportId,o=[],r.map((function(t){o.push(dH.costItemCreate(a,{assessment_report_costing_stage_id:e.props.costingTableId,gs_code_id:1,description:t.label,quantity:parseInt(t.quantity),unit_cost:t.unitCost,discount:0,markup:0,tax_rate_id:1,position:0}))})),t.next=8,Promise.all(o).then((function(t){t&&(e.props.dispatch(H5(a)),e.props.onClose())}));case 8:case"end":return t.stop()}}),t)}))),e.renderBody=function(){return Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(Vle,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(Ule,{children:[Object(a.jsx)(Lle,{colSpan:4}),Object(a.jsx)(Lle,{children:Object(a.jsx)(Mle,{children:"Quantity"})}),Object(a.jsx)(Lle,{children:Object(a.jsx)(Mle,{})})]})}),Object(a.jsx)(Ble,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(Ule,{children:[Object(a.jsx)(Fle,{colSpan:4,children:Object(a.jsx)(Ple,{children:t.label})}),Object(a.jsx)(Fle,{children:Object(a.jsx)(Jle,{type:"number",min:0,onChange:function(n){return e.handleChangeQuantity(n,t.id)}})}),Object(a.jsx)(Fle,{children:Object(a.jsx)(Ple,{children:t.unitType})})]},n)}))})]})})})},e.renderFooter=function(){return Object(a.jsx)(Cg,{onClick:e.handleAddMaterial,className:"btn",children:"Add"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadMaterials()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),qle=Object(b.b)((function(e){return{currentJobMaterials:e.currentJobUsageAndActuals.materials}}))(zle);function Wle(){var e=Object(f.a)(["\n  display: flex;\n  color: ",";\n"]);return Wle=function(){return e},e}function Hle(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return Hle=function(){return e},e}function Gle(){var e=Object(f.a)(["\n  justify-content: space-between;\n  display: flex;\n  margin: 10px;\n"]);return Gle=function(){return e},e}function Yle(){var e=Object(f.a)(["\n  justify-content: space-between;\n  display: flex;\n  margin: 10px;\n"]);return Yle=function(){return e},e}function Qle(){var e=Object(f.a)([""]);return Qle=function(){return e},e}function Kle(){var e=Object(f.a)(["\n  padding-right: 60px;\n  width: 30%;\n"]);return Kle=function(){return e},e}function Zle(){var e=Object(f.a)(["\n  width: 100%;\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Zle=function(){return e},e}function Xle(){var e=Object(f.a)(["\n    width: ",";\n    padding: 10px;\n    border: 1px solid ",";\n    border-radius: 6px;\n    margin: 10px 0px 10px 0px;\n    : disabled {\n        color: ","\n        cursor: not-allowed;\n    }\n    : focus {\n        color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);\n  }\n"]);return Xle=function(){return e},e}function $le(){var e=Object(f.a)(["\n  min-width: 20px;\n  margin: 10px 0px 10px 0px;\n  fill: ",";\n"]);return $le=function(){return e},e}function eue(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 600;\n  font-size: 24px;\n"]);return eue=function(){return e},e}function tue(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return tue=function(){return e},e}function nue(){var e=Object(f.a)(["\n  color: ",";\n"]);return nue=function(){return e},e}var rue=x.default.span(nue(),y.gray4),aue=x.default.span(tue(),y.black0),oue=x.default.span(eue(),y.black0),iue=Object(x.default)(Ff)($le(),y.gray3),cue=x.default.input(Xle(),(function(e){return e.width}),y.gray2,y.gray4),sue=Object(x.default)(m7.a)(Zle()),lue=x.default.div(Kle()),uue=x.default.div(Qle()),due=x.default.div(Yle()),pue=x.default.div(Gle()),hue=x.default.div(Hle(),y.gray2),bue=x.default.span(Wle(),y.red1),fue=function(e){if(["",null,void 0].includes(e))return"This field is required"},mue=[{value:"labour",label:"Add Labour"},{value:"equipment",label:"Add Equipment"},{value:"materials",label:"Add Materials"}],jue=function(e,t){var n={};return t.map((function(t){t.value===e.tax_rate_id&&(n=t)})),n},vue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,itemSelected:[],id:"",errorDescription:"",isModalOpen:!1,isModalOpenEquipment:!1,isModalOpenMaterials:!1,subTotal:0,texRatesOption:[],calculatedTax:0,total:0,assessment_report_costing_stage_id:0},e.getSetReportCoastingStage=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,pW.assessmentReportCoastingSatges(e.props.reportId);case 2:(n=t.sent)&&n.length>0&&e.setState({assessment_report_costing_stage_id:n[n.length-1].id});case 4:case"end":return t.stop()}}),t)}))),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContent",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.getTexRates=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,KX.getTaxRates();case 3:(n=t.sent)&&(r=[],n.length>0&&n.map((function(e){return r.push({value:e.id,label:e.name,rate:e.rate}),e})),e.setState({texRatesOption:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleChangeDescription=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.itemSelected),o=void 0;a.length>0&&a.map((function(e){n===e.id&&(e.description=r,o=fue(r),e.errorDesc=void 0!==o?{error:o,id:n}:"")})),e.setState({itemSelected:a})},e.handleOnBlurChangeDescription=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,o=Object(Dm.a)(e.state.itemSelected),i=void 0,o.length>0&&o.map((function(e){r.id===e.id&&(e.description=a,i=fue(a),e.errorDesc=void 0!==i?{error:i,id:r.id}:"")})),e.setState({itemSelected:o}),t.prev=5,c=r.assessment_report_id,s={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:a,quantity:r.quantity,unit_cost:r.unit_cost,discount:r.discount,markup:r.markup,tax_rate_id:r.tax_rate_id},t.next=10,dH.costItemListUpdate(c,r.id,s);case 10:t.sent&&e.props.dispatch(H5(c)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),Qm(Vm.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleChangeQuantity=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.itemSelected);a.map((function(e){return n.id===e.id&&(e.quantity=r),e})),e.setState({itemSelected:a})},e.handleOnBlurQuantity=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,(o=Object(Dm.a)(e.state.itemSelected)).map((function(e){return r.id===e.id&&(e.quantity=a),e})),e.setState({itemSelected:o}),t.prev=4,i=r.assessment_report_id,c={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:r.description,quantity:a,unit_cost:r.unit_cost,discount:r.discount,markup:r.markup,tax_rate_id:r.tax_rate_id},t.next=9,dH.costItemListUpdate(i,r.id,c);case 9:t.sent&&e.props.dispatch(H5(i)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleChangeUnitPrice=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.itemSelected);a.length>0&&a.map((function(e){return n.id===e.id&&(e.unit_cost=r),e})),e.setState({itemSelected:a})},e.handleOnBlurUnitPrice=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,(o=Object(Dm.a)(e.state.itemSelected)).length>0&&o.map((function(e){return r.id===e.id&&(e.unit_cost=a),e})),e.setState({itemSelected:o}),t.prev=4,i=r.assessment_report_id,c={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:r.description,quantity:r.quantity,unit_cost:a,discount:r.discount,markup:r.markup,tax_rate_id:r.tax_rate_id},t.next=9,dH.costItemListUpdate(i,r.id,c);case 9:t.sent&&e.props.dispatch(H5(i)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.getSubTotal=function(){var t=e.state.itemSelected,n=[];t.length>0&&t.map((function(e){""!==e.quantity&&""!==e.unit_cost&&n.push(e.quantity*e.unit_cost)}));var r=n.reduce((function(e,t){return e+t}),0);return e.setState({subTotal:r}),r.toFixed(2)},e.getTotal=function(){var t=e.state;return(t.subTotal+t.calculatedTax).toFixed(2)},e.getCalculatedTax=function(){var t=e.state,n=t.texRatesOption,r=t.itemSelected,a=new Array,o=0;return a=n.map((function(e){return Array[e.value]=e.rate})),r.map((function(e){0!==a[e.tax_rate_id-1]&&(o+=e.quantity*e.unit_cost*a[e.tax_rate_id-1])})),e.setState({calculatedTax:o}),o.toFixed(2)},e.getTotalValue=function(e){return""!==e.quantity&&""!==e.unit_cost?(e.quantity*e.unit_cost).toFixed(2):0},e.handleTexChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(Dm.a)(e.state.itemSelected)).length>0&&a.map((function(e){return r.id===e.id&&(e.tax_rate_id=n.value),e})),e.setState({itemSelected:a}),t.prev=3,o=r.assessment_report_id,i={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:r.description,quantity:r.quantity,unit_cost:r.unit_cost,discount:r.discount,markup:r.markup,tax_rate_id:n.value},t.next=8,dH.costItemListUpdate(o,r.id,i);case 8:t.sent&&e.props.dispatch(H5(o)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e,n){return t.apply(this,arguments)}}(),e.labourColumns=function(){return[{id:"item",width:"5%",type:mte.Text,cell:function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:"#",onDragStart:function(n){return e.onDragStart(n,"cost_".concat(t.id))},draggable:!0,children:Object(a.jsx)(iue,{name:Ef.MenuDrag})})," "]})}},{id:"Description",width:"25%",header:Object(a.jsx)(rue,{children:"Description"}),type:mte.Text,cell:function(t){return Object(a.jsxs)("div",{children:[Object(a.jsx)(cue,{type:"text",width:"100%",value:t.description,onChange:function(n){return e.handleChangeDescription(n,t.id)},onBlur:function(n){return e.handleOnBlurChangeDescription(n,t)}}),Object(a.jsx)(bue,{children:t.errorDesc&&t.id===t.errorDesc.id?t.errorDesc.error:""})]})}},{id:"quantity",width:"10%",header:Object(a.jsx)(rue,{children:"quantity"}),type:mte.Text,cell:function(t){return 0===parseInt(t.quantity)?Object(a.jsx)(cue,{type:"number",width:"100%",disabled:!0,value:t.quantity}):Object(a.jsx)(cue,{type:"number",width:"100%",value:t.quantity,min:0,onChange:function(n){return e.handleChangeQuantity(n,t)},onBlur:function(n){return e.handleOnBlurQuantity(n,t)}})}},{id:"UnitPrice",width:"10%",header:Object(a.jsx)(rue,{children:"Unit Price"}),type:mte.Text,cell:function(t){return 0===parseInt(t.quantity)?Object(a.jsx)(cue,{type:"number",width:"100%",disabled:!0,value:parseFloat(t.unit_cost)}):Object(a.jsx)(cue,{type:"number",width:"100%",min:0,value:parseFloat(t.unit_cost),onChange:function(n){return e.handleChangeUnitPrice(n,t)},onBlur:function(n){return e.handleOnBlurUnitPrice(n,t)}})}},{id:"Discount",width:"10%",header:Object(a.jsx)(rue,{children:"Discount %"}),type:mte.Text,cell:function(e){return 0===parseInt(e.quantity)?Object(a.jsx)("div",{}):Object(a.jsx)(cue,{value:"".concat(e.discount,"%"),width:"100%",min:0,placeholder:"Discount %",disabled:!0})}},{id:"Markup",width:"10%",header:Object(a.jsx)(rue,{children:"Markup %"}),type:mte.Text,cell:function(e){return 0===parseInt(e.quantity)?Object(a.jsx)("div",{}):Object(a.jsx)(cue,{value:"".concat(e.markup,"%"),type:"text",width:"100%",min:0,placeholder:"Markup %",disabled:!0})}},{id:"Tax",width:"20%",header:Object(a.jsx)(rue,{children:"Tax %"}),type:mte.Text,cell:function(t){return 0===parseInt(t.quantity)?Object(a.jsx)("div",{}):Object(a.jsx)(sue,{value:jue(t,e.state.texRatesOption),onChange:function(n){return e.handleTexChange(n,t)},options:e.state.texRatesOption.length>0?e.state.texRatesOption:[]})}},{id:"AmountEx",width:"10%",header:Object(a.jsx)(rue,{children:"Amount Ex"}),type:mte.Text,cell:function(e){return 0===parseInt(e.unit_cost)?Object(a.jsx)("div",{}):Object(a.jsxs)(aue,{children:["$ ",e.net_total.toFixed(2)]})}},{id:"Btn",width:"5%",header:Object(a.jsx)(rue,{}),type:mte.Text,cell:function(t){return Object(a.jsx)(Cw.Consumer,{children:function(n){var r=e.tableMenuItems(n,t,e.props.jobIsClosed);return Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:r,direction:"right"})}})}}]},e.tableMenuItems=function(t,n,r){return[{name:"Delete",disabled:!t.has(Dw.ASSESSMENT_REPORTS_MANAGE)||!r,onClick:function(){var t=Object(Um.a)(Fm.a.mark((function t(){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(Sw("Confirm","Are you sure you want to delete?"));case 3:t.sent&&(dH.costItemDelete(n.assessment_report_id,n.id),setTimeout((function(){e.props.dispatch(H5(n.assessment_report_id))}),500));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]},e.handleSelectOption=function(t){"labour"===t.value?e.setState({isModalOpen:!0}):"equipment"===t.value?e.setState({isModalOpenEquipment:!0}):"materials"===t.value&&e.setState({isModalOpenMaterials:!0})},e.closeModalLabourCalculation=function(){e.setState({isModalOpen:!1})},e.closeModalAddEquipment=function(){e.setState({isModalOpenEquipment:!1})},e.closeModalAddMaterial=function(){e.setState({isModalOpenMaterials:!1})},e.onSubmitLabourCalculation=function(){},e.handleUpdatedData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({itemSelected:n}),r=[],n.length>0&&n.map((function(e,t){r.push({assessment_report_cost_item_id:e.id,position:t})})),!(r.length>0)){t.next=12;break}return t.prev=4,t.next=7,dH.costItemPositionUpdate(e.state.itemSelected[0].assessment_report_id,r);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[4,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getTexRates(),this.getSetReportCoastingStage()}},{key:"componentDidUpdate",value:function(e){if(e.costListRes!==this.props.costListRes&&this.props.costListRes.data.costListRes){var t=this.props.costListRes.data;this.setState({itemSelected:t.costListRes.items,subTotal:t.costListRes.sub_total,calculatedTax:t.costListRes.tax,total:t.costListRes.total})}}},{key:"render",value:function(){var e=this.state,t=e.isModalOpen,n=e.isModalOpenEquipment,r=e.isModalOpenMaterials;return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)(zoe,{className:"table table-drag",children:Object(a.jsx)(Vse,{dataSource:this.state.itemSelected,columnsDefinition:this.labourColumns(),useCustomStyle:!0,updatedData:this.handleUpdatedData})})}),Object(a.jsxs)("div",{className:"d-flex flex-row  min-100",style:{justifyContent:"space-between"},children:[Object(a.jsx)("div",{style:{width:"150px"},children:Object(a.jsx)(sue,{options:mue,onChange:this.handleSelectOption})}),Object(a.jsx)(lue,{children:Object(a.jsxs)(uue,{children:[Object(a.jsxs)(due,{children:[Object(a.jsx)("span",{children:"Sub-total"}),Object(a.jsxs)("span",{children:["$ ",void 0!==this.state.subTotal?this.state.subTotal.toFixed(2):0]})]}),Object(a.jsxs)(pue,{children:[Object(a.jsx)("span",{children:"Tax"}),Object(a.jsxs)("span",{children:["$ ",void 0!==this.state.calculatedTax?this.state.calculatedTax.toFixed(2):0]})]}),Object(a.jsx)(hue,{}),Object(a.jsxs)(pue,{children:[Object(a.jsx)("span",{children:"Total"}),Object(a.jsxs)(oue,{children:["$ ",void 0!==this.state.total?this.state.total.toFixed(2):0]})]})]})})]}),Object(a.jsx)(sle,{isOpen:t,onClose:this.closeModalLabourCalculation,onSubmit:this.onSubmitLabourCalculation,title:"Quick Labour Calculation",isEdit:!1,reportId:this.props.reportId,costingTableId:this.state.assessment_report_costing_stage_id}),Object(a.jsx)(Sle,{isOpen:n,onClose:this.closeModalAddEquipment,onSubmit:this.onSubmitLabourCalculation,title:"Add Equipment",isEdit:!1,jobId:this.props.jobId,reportId:this.props.reportId,costingTableId:this.state.assessment_report_costing_stage_id}),Object(a.jsx)(qle,{isOpen:r,onClose:this.closeModalAddMaterial,onSubmit:this.onSubmitLabourCalculation,title:"Add Materials",isEdit:!1,jobId:this.props.jobId,reportId:this.props.reportId,costingTableId:this.state.assessment_report_costing_stage_id})]})}}]),n}(p.PureComponent),Oue=Object(b.b)((function(e){return{currentJobLabours:e.currentJobUsageAndActuals.labours,selectedLabourIds:e.currentJobUsageAndActuals.selectedLabourIds,costListRes:e.document}}))(vue);function gue(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  margin-right: 10px;\n  align-self: center;\n"]);return gue=function(){return e},e}function xue(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n"]);return xue=function(){return e},e}function yue(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return yue=function(){return e},e}var wue=x.default.div(yue()),_ue=x.default.div(xue(),Bf.medium,Vf.medium,y.yellow),kue=Object(x.default)(NC)(gue(),Vf.normal),Sue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={activeStatus:"",statusButtonDisabled:!1,draft:!1,pending_client_approval:!1,client_approved:!1,client_cancelled:!1,cancelled:!1,total:""},e.getLatestStatus=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params,r=n.reportId,a=n.id,t.prev=1,t.next=4,dH.assessmentReportsGetStatusAndTotal(parseInt(a),parseInt(r));case 4:o=t.sent,e.setState({activeStatus:o.status,total:o.total},(function(){switch(e.state.activeStatus){case"draft":e.setState({draft:!0,pending_client_approval:!1,client_approved:!1,client_cancelled:!0,cancelled:!1});break;case"pending_client_approval":e.setState({draft:!0,pending_client_approval:!0,client_approved:!1,client_cancelled:!1,cancelled:!1});break;case"client_approved":e.setState({draft:!0,pending_client_approval:!0,client_approved:!0,client_cancelled:!1,cancelled:!1});break;case"client_cancelled":e.setState({draft:!1,pending_client_approval:!0,client_approved:!0,client_cancelled:!0,cancelled:!1});break;case"cancelled":e.setState({draft:!1,pending_client_approval:!0,client_approved:!0,client_cancelled:!0,cancelled:!0})}})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Qm(Vm.Danger,"Server Error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.handleChangeStatus=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,a=r.id,o=r.reportId,t.prev=1,i={status:n},t.next=5,dH.assessmentReportStatusUpdate(parseInt(a),parseInt(o),i);case 5:e.getLatestStatus(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Qm(Vm.Danger,"Server Error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.MainMenuItems=function(t,n){var r=e.props.match.params,a=r.id,o=r.reportId,i=e.state,c=i.draft,s=i.pending_client_approval,l=i.client_approved,u=i.client_cancelled,d=i.cancelled,p=t.has(Dw.ASSESSMENT_REPORTS_MANAGE);return[{name:"Edit",disabled:!p,onClick:function(){e.props.history.push("/usage-and-actuals/".concat(a,"/buildDocument/").concat(o))}},{name:"Draft",onClick:function(){e.handleChangeStatus("draft")},disabled:c||!p},{name:"Pending Client Approval",onClick:function(){e.handleChangeStatus("pending_client_approval")},disabled:s||!p},{name:"Client Approved",onClick:function(){e.handleChangeStatus("client_approved")},disabled:l||!p},{name:"Client Declined",onClick:function(){e.handleChangeStatus("client_cancelled")},disabled:u||!p},{name:"Cancelled",onClick:function(){e.handleChangeStatus("cancelled")},disabled:d||!p},{type:"divider"},{name:"Duplicate to new...",onClick:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dH.assessmentReportDuplicate(parseInt(a),parseInt(o));case 3:Qm(Vm.Success,"Duplicate to new report created..."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{type:"divider"},{name:"Print",onClick:function(){window.print()}},{type:"divider"},{name:"Delete",onClick:function(){var t=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.assessmentReportDelete(parseInt(a),parseInt(o));case 3:e.props.history.push("/usage-and-actuals/".concat(a,"/summary")),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}()}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getLatestStatus()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return Object(a.jsx)(Cw.Consumer,{children:function(t){var n=t.has(Dw.JOBS_USAGE_VIEW),i=t.has(Dw.ASSESSMENT_REPORTS_MANAGE);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(wue,{children:[Object(a.jsxs)(_ue,{children:["TOTAL $ ",e.state.total||0]}),Object(a.jsx)(kue,{tag:{name:e.state.activeStatus.toUpperCase(),color:y.yellow}}),Object(a.jsx)(Uoe,{jobId:parseInt(r)}),i&&Object(a.jsx)(yw,{direction:"right",items:e.MainMenuItems(t,o),trigger:e.mainButtonRender})]})}):null}})}},{key:"mainButtonRender",value:function(){return Object(a.jsxs)(Cg,{className:"btn",style:{marginLeft:"10px"},children:["Add ",Object(a.jsx)(J3,{style:{marginLeft:"10px"},size:16,color:y.white,name:Ef.ArrowDown})]})}},{key:"render",value:function(){var e=this.props,t=e.customHeaderTitle,n=e.jobTitle;return Object(a.jsx)(Kq,{customHeaderTitle:t,siteAddress:n,additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Cue=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters}})))(Sue);function Nue(){var e=Object(f.a)(["\n  padding: 10px;\n  cursor: pointer;\n"]);return Nue=function(){return e},e}function Eue(){var e=Object(f.a)(["\n  flex: 1;\n  align-items: flex-end;\n  justify-content: flex-end;\n  display: flex;\n"]);return Eue=function(){return e},e}function Aue(){var e=Object(f.a)(["\n  flex: 3;\n  align-items: flex-start;\n  justify-content: flex-start;\n  display: flex;\n"]);return Aue=function(){return e},e}function Tue(){var e=Object(f.a)(["\n  flex: 1;\n  display: flex;\n  border: 1px solid ",";\n  border-collapse: collapse;\n  margin-top: -1px;\n  background-color: ",";\n  cursor: pointer;\n"]);return Tue=function(){return e},e}function Iue(){var e=Object(f.a)(["\n  flex: 1;\n  display: flex;\n  border: 1px solid ",";\n  border-collapse: collapse;\n  margin-top: -1px;\n  cursor: pointer;\n"]);return Iue=function(){return e},e}function Rue(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return Rue=function(){return e},e}var Due=x.default.div(Rue()),Mue=x.default.div(Iue(),y.gray2),Pue=x.default.div(Tue(),y.gray2,y.blue0),Lue=x.default.div(Aue()),Fue=x.default.div(Eue()),Uue=x.default.span(Nue()),Vue=[{id:0,info:"Marie Claire, 121 Curlewis Street, Melbourne East VIC",status:"#1001567-MEL"},{id:1,info:"MIMA, 61/127 Collins Street, Melbourne VIC",status:"#1001551-MEL"},{id:2,info:"Bendigo Bakery, 27 Main Road, Bendigo VIC",status:"#1001541-BEN"}],Bue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,selectedRowId:""},e.searchByName=function(){},e.rowSelected=function(t){e.setState({selectedRowId:t.id})},e.renderBody=function(){var t=e.state.loading;return Object(a.jsxs)("div",{children:[Object(a.jsx)(ES,{searchIcon:!0,loading:t,placeholder:"Search...",onSearchValueChange:e.searchByName,mode:"typeGray"}),Object(a.jsx)(Due,{children:Vue.map((function(t,n){return e.state.selectedRowId===t.id?Object(a.jsxs)(Pue,{onClick:function(){return e.rowSelected(t)},children:[Object(a.jsx)(Lue,{children:Object(a.jsx)(Uue,{children:t.info})}),Object(a.jsx)(Fue,{children:Object(a.jsx)(Uue,{children:t.status})})]},n):Object(a.jsxs)(Mue,{onClick:function(){return e.rowSelected(t)},children:[Object(a.jsx)(Lue,{children:Object(a.jsx)(Uue,{children:t.info})}),Object(a.jsx)(Fue,{children:Object(a.jsx)(Uue,{children:t.status})})]},n)}))})]})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",form:"CopyToClip",children:"OK"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,body:this.renderBody(),title:"Copy Report to Job",footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function Jue(){var e=Object(f.a)(["\n  padding: 6px 10px 6px 10px;\n  flex: 1;\n"]);return Jue=function(){return e},e}function zue(){var e=Object(f.a)(["\n  padding: 6px 10px 6px 10px;\n  background-color: white;\n  border-radius: 4px;\n  border: 1px solid ",";\n"]);return zue=function(){return e},e}function que(){var e=Object(f.a)(["\n  flex: 1;\n"]);return que=function(){return e},e}function Wue(){var e=Object(f.a)(["\n  flex: 6;\n"]);return Wue=function(){return e},e}function Hue(){var e=Object(f.a)(["\n  margin: 20px 0px 0 0;\n  display: flex;\n"]);return Hue=function(){return e},e}var Gue,Yue=x.default.div(Hue()),Que=x.default.div(Wue()),Kue=x.default.div(que()),Zue=x.default.button(zue(),y.gray2),Xue=x.default.span(Jue()),$ue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,isCopied:!1,link:"You can copy this text"},e.onLocalClick=function(t){t.preventDefault(),Gue.select();var n=Gue.value;n=document.execCommand("copy"),e.setState({isCopied:n})},e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:"Your link has been copied to the clipboard. Use this link to send the report to customers or insurers and allow them to approve the costings."})}),Object(a.jsxs)(Yue,{children:[Object(a.jsx)(Que,{children:Object(a.jsx)("input",{style:{width:"97%",padding:"6px 10px 6px 10px",borderRadius:"4px",border:"1px solid ".concat(y.gray2)},type:"text",ref:function(e){return Gue=e},value:e.state.link,readOnly:!0})}),Object(a.jsx)(Kue,{children:Object(a.jsx)(Zue,{onClick:function(t){return e.onLocalClick(t)},children:"Copy"})}),Object(a.jsx)(Xue,{children:e.state.isCopied?"Copied!":""})]})]})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",form:"CopyToClip",onClick:e.props.onClose,children:"OK"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){!0===e.props.isOpen&&(Gue.select(),document.execCommand("copy"))}),1e3)}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,body:this.renderBody(),title:"Get Link",footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function ede(){var e=Object(f.a)(["\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545;\n  display: block;\n"]);return ede=function(){return e},e}function tde(){var e=Object(f.a)(["\n  width: 350px;\n  border: 1px solid lightgrey;\n  border-radius: 4px;\n  height: 40px;\n  padding: 10px;\n"]);return tde=function(){return e},e}function nde(){var e=Object(f.a)(["\n  width: 30%;\n  margin: 0px 0px 0px 20px;\n"]);return nde=function(){return e},e}function rde(){var e=Object(f.a)(["\n  margin: 20px 0px 15px 20px;\n  color: ",";\n"]);return rde=function(){return e},e}function ade(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return ade=function(){return e},e}var ode=x.default.div(ade()),ide=x.default.h5(rde(),y.gray4),cde=x.default.div(nde()),sde=x.default.input(tde()),lde=x.default.span(ede()),ude={},dde=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hideRates:!0,hideMultiselect:!1,showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1,reportName:"",errorReportName:"",showCopyToClipModal:!1,showCopyToLinkModal:!1,costListItems:[],assessmentReport:{},areasSummary:[]},e.getAreas=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.prev=1,t.next=4,dH.getAreas(parseInt(n));case 4:(r=t.sent)&&e.setState({areasSummary:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Qm(Vm.Danger,"This status can't be applied");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.handleReportName=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value),(function(){e.setState({errorReportName:""})}))},e.handleModalForCopyToJob=function(t){!0===t&&e.setState({showCopyToClipModal:!0})},e.onCloseModal=function(){e.setState({showCopyToClipModal:!1})},e.handleCopyToLink=function(t){!0===t&&e.setState({showCopyToLinkModal:!0})},e.onCloseCopyToLinkModal=function(){e.setState({showCopyToLinkModal:!1})},e.onBlurHandleReport=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target,a=r.value,o=r.name,i=e.props.match.params,c=i.id,s=i.reportId,e.setState(Object(k.a)({},o,a)),l=e.state,u=l.reportName,d=l.assessmentReport,""!==u&&void 0!==u&&null!==u){t.next=8;break}e.setState({errorReportName:"This field is required"}),t.next=19;break;case 8:if(e.setState({errorReportName:""}),!c||!s){t.next=19;break}return t.prev=10,p={subheading:d.subheading,heading:u},t.next=14,dH.assessmentReportHeading(parseInt(c),parseInt(s),p);case 14:t.next=19;break;case 16:t.prev=16,t.t0=t.catch(10),Qm(Vm.Danger,"This status can't be applied");case 19:case"end":return t.stop()}}),t,null,[[10,16]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id,n=e.reportId;ly.findById(t).then((function(e){ude=e})),this.getAreas(),this.props.dispatch(H5(parseInt(n))),this.props.dispatch(Y5(!0)),this.props.dispatch(G5(parseInt(t),parseInt(n))),this.props.dispatch(Y5(!1))}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.costListRes!==this.props.costListRes&&this.props.costListRes.data.costListRes){var n=this.props.costListRes.data;this.setState({costListItems:n.costListRes.items})}if(e.arReport!==this.props.arReport&&this.props.arReport.data.arReport){var r=this.props.arReport.data;this.setState({assessmentReport:r.arReport},(function(){var e=t.state.assessmentReport;null===e.heading?t.setState({reportName:"Assessment Report"}):t.setState({reportName:e.heading})}))}}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){var e=this,t=this.props.match.params,n=t.id,r=t.reportId;return[{path:"/usage-and-actuals/".concat(n,"/buildCosting/").concat(r),label:"Build Costings",icon:Ef.CashFileIcon,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildCosting/").concat(r)),type:"costing"},{path:"/usage-and-actuals/".concat(n,"/buildDocument/").concat(r),label:"Build Document",icon:Ef.FileEdit,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildDocument/").concat(r)),type:"costing"}].map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"render",value:function(){var e=ude,t=e?ly.getJobAddress(e):"",n=e&&ly.getJobName(e);n&&(t+=" | ".concat(n));var r=this.props,o=r.job,i=r.match.params,c=i.id,s=i.reportId,l=this.state,u=l.showCopyToClipModal,d=l.showCopyToLinkModal,p=o.data&&o.data.latest_status.status===gj.Closed||!o.data;return Object(a.jsxs)(ode,{className:"d-flex flex-column",children:[!0===this.props.isArLoad.data.isArLoad||!0===this.props.isCostListLoad.data.isCostListLoad&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(Cue,{jobTitle:t,modalForCopyToJOB:this.handleModalForCopyToJob,modalForCopyLink:this.handleCopyToLink}),Object(a.jsxs)(uC,{className:"h-100 d-flex flex-rovaluew min-100",children:[Object(a.jsxs)(Im,{children:[this.getMenuItems().map((function(e){return Object(a.jsx)(ym,{item:e},e.path)})),Object(a.jsx)(Sse,{financials:this.state.areasSummary}),Object(a.jsx)(Lse,{financials:this.state.areasSummary})]}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(ide,{children:"Name"}),Object(a.jsxs)(cde,{children:[Object(a.jsx)(sde,{type:"text",name:"reportName",value:this.state.reportName||"",onChange:this.handleReportName,onBlur:this.onBlurHandleReport}),Object(a.jsx)(lde,{children:this.state.errorReportName})]}),Object(a.jsx)("div",{className:"mb-auto w-100",style:{padding:"20px"},children:Object(a.jsx)(Oue,{jobId:parseInt(c),jobIsClosed:p,tableType:"test",tableId:1,costItemList:this.state.costListItems,reportId:parseInt(s)},1)})]})]}),u&&Object(a.jsx)(Bue,{onClose:this.onCloseModal,isOpen:u}),d&&Object(a.jsx)($ue,{onClose:this.onCloseCopyToLinkModal,isOpen:d})]})}}]),n}(p.PureComponent),pde=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters,isCostListLoad:e.document,costListRes:e.document,isArLoad:e.document,arReport:e.document}})))(dde),hde=n(145);function bde(){var e=Object(f.a)(["\n  ","\n  color: ",";\n  font-weight: ",";\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n"]);return bde=function(){return e},e}function fde(){var e=Object(f.a)(["\n  line-height: 0;\n  background: ",";\n  color: ",";\n  font-weight: normal;\n  margin-left: 12px;\n  margin-right: 12px;\n  margin-bottom: 10px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n  :hover path,\n  :hover circle {\n    stroke: ",";\n  }\n  :hover {\n    color: ",";\n  }\n"]);return fde=function(){return e},e}function mde(){var e=Object(f.a)(["\n  fill: transparent;\n  min-width: 20px;\n"]);return mde=function(){return e},e}function jde(){var e=Object(f.a)(["\n  padding-left: ","px;\n  line-height: 1rem;\n"]);return jde=function(){return e},e}var vde=x.default.div(jde(),(function(e){return e.havePadding?26:0})),Ode=Object(x.default)(Ff)(mde()),gde=Object(x.css)(fde(),y.white,y.black0,y.black0,y.blue4,y.blue4),xde=x.default.div(bde(),gde,y.black0,Bf.normal,y.black0),yde=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.item,t=e.icon,n=e.label,r=e.id,o=t||0===t?Object(a.jsx)(Ode,{name:t}):null;return Object(a.jsx)(hde.c,{droppableId:"ITEMS",isDropDisabled:!0,children:function(e,i){return Object(a.jsxs)("div",Object(c.a)(Object(c.a)({ref:e.innerRef},e.droppableProps),{},{children:[Object(a.jsx)(hde.b,{draggableId:r.toString(),index:parseInt(r),children:function(e,i){return Object(a.jsx)("div",Object(c.a)(Object(c.a)(Object(c.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(a.jsx)(xde,{id:r,children:Object(a.jsx)("div",{style:{padding:"13px 26px"},className:"nav-link",children:Object(a.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[o,Object(a.jsx)(p.Fragment,{children:Object(a.jsx)(vde,{havePadding:!!t||0===t,children:n})})]})})})}))}},r),Object(a.jsx)("div",{style:{display:"none"},children:e.placeholder})]}))}})}}]),n}(p.Component),wde=n(203);function _de(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return _de=function(){return e},e}function kde(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return kde=function(){return e},e}function Sde(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Sde=function(){return e},e}function Cde(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Cde=function(){return e},e}var Nde=x.default.h4(Cde(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ede=x.default.h4(Sde(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ade=x.default.h4(kde(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Tde=x.default.h4(_de(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ide=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(Ade,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(Ede,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(Tde,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(Nde,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(Nde,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),Rde=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(Ide),Dde=n(99);function Mde(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return Mde=function(){return e},e}function Pde(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return Pde=function(){return e},e}function Lde(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return Lde=function(){return e},e}function Fde(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Fde=function(){return e},e}function Ude(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Ude=function(){return e},e}function Vde(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Vde=function(){return e},e}function Bde(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Bde=function(){return e},e}function Jde(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Jde=function(){return e},e}var zde=x.default.input(Jde()),qde=Object(x.default)(m7.a)(Bde()),Wde=x.default.div(Vde()),Hde=x.default.div(Ude()),Gde=x.default.div(Fde()),Yde=x.default.div(Lde(),(function(e){return e.color})),Qde=x.default.div(Pde()),Kde=x.default.input(Mde()),Zde=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],Xde=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0},e.handleHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(U5(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleTextArea=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({description:r},(function(){e.props.dispatch(z5(e.state.description))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:o,text:r},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(F5(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(zde,{value:e.state.heading.headingText,onChange:e.handleHeading}),Object(a.jsxs)(Wde,{children:[Object(a.jsx)(qde,{options:Zde,onChange:e.handleFontStyle,defaultValue:Zde[0]}),Object(a.jsx)(Kde,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(Qde,{onClick:e.handleClick,children:Object(a.jsx)(Yde,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(Hde,{children:[Object(a.jsx)(Gde,{onClick:e.handleClose}),Object(a.jsx)(Dde.a,{color:e.state.color,onChange:e.handleChange})]}):null]})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(L5(a)),t.props.dispatch(U5(o)),t.props.dispatch(F5(i))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Heading:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),$de=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document}})))(Xde),epe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{}},e.onMouseEnter=function(){e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;e.details!==t&&this.setState({details:t})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{className:"hover-content",style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(Rde,{id:t,type:n,details:this.state.details})})})})}),Object(a.jsx)($de,{id:t,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),tpe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(epe);function npe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return npe=function(){return e},e}function rpe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return rpe=function(){return e},e}function ape(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return ape=function(){return e},e}function ope(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return ope=function(){return e},e}function ipe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return ipe=function(){return e},e}function cpe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return cpe=function(){return e},e}function spe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return spe=function(){return e},e}function lpe(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return lpe=function(){return e},e}var upe=x.default.input(lpe()),dpe=Object(x.default)(m7.a)(spe()),ppe=x.default.div(cpe()),hpe=x.default.div(ipe()),bpe=x.default.div(ope()),fpe=x.default.div(ape(),(function(e){return e.color})),mpe=x.default.div(rpe()),jpe=x.default.input(npe()),vpe=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],Ope=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0},e.handleHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(U5(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleTextArea=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({description:r},(function(){e.props.dispatch(z5(e.state.description))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:o,text:r},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(F5(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(upe,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(ppe,{children:[Object(a.jsx)(dpe,{options:vpe,onChange:e.handleFontStyle,defaultValue:vpe[0]}),Object(a.jsx)(jpe,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(mpe,{onClick:e.handleClick,children:Object(a.jsx)(fpe,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(hpe,{children:[Object(a.jsx)(bpe,{onClick:e.handleClose}),Object(a.jsx)(Dde.a,{color:e.state.color,onChange:e.handleChange})]}):null]})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(L5(a)),t.props.dispatch(U5(o)),t.props.dispatch(F5(i))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"SubHeading:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),gpe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document}})))(Ope);function xpe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return xpe=function(){return e},e}function ype(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return ype=function(){return e},e}function wpe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return wpe=function(){return e},e}function _pe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return _pe=function(){return e},e}var kpe=x.default.h4(_pe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Spe=x.default.h4(wpe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Cpe=x.default.h4(ype(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Npe=x.default.h4(xpe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Epe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==a&&this.props.id===a.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==n&&this.props.id===n.id&&this.setState({fontStyleData:n}),e.text.data.heading!==r&&this.props.id===r.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(Cpe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(Spe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(Npe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(kpe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(kpe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),Ape=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(Epe),Tpe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;e.details!==t&&this.setState({details:t})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(Ape,{id:t,type:n,details:this.state.details})})})})}),Object(a.jsx)(gpe,{id:t,isOpen:this.props.showModal,title:"SubHeading: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),Ipe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(Tpe);function Rpe(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return Rpe=function(){return e},e}function Dpe(){var e=Object(f.a)(["\n  display: block;\n  width: 100%;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.428571429;\n  color: #2a3b47;\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n  -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n  transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n"]);return Dpe=function(){return e},e}function Mpe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return Mpe=function(){return e},e}function Ppe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return Ppe=function(){return e},e}function Lpe(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return Lpe=function(){return e},e}function Fpe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Fpe=function(){return e},e}function Upe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Upe=function(){return e},e}function Vpe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Vpe=function(){return e},e}function Bpe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Bpe=function(){return e},e}function Jpe(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Jpe=function(){return e},e}var zpe=x.default.input(Jpe()),qpe=Object(x.default)(m7.a)(Bpe()),Wpe=x.default.div(Vpe()),Hpe=x.default.div(Upe()),Gpe=x.default.div(Fpe()),Ype=x.default.div(Lpe(),(function(e){return e.color})),Qpe=x.default.div(Ppe()),Kpe=x.default.input(Mpe()),Zpe=x.default.textarea(Dpe()),Xpe=x.default.div(Rpe()),$pe=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],ehe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0},e.handleHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(U5(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:e.state.description},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleTextArea=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,a=e.props.details,e.setState({description:r},(function(){var t={description:e.state.description,id:a.data.id};e.props.dispatch(z5(t))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurDescription=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,a=e.props.details,e.setState({description:r},(function(){var t={description:e.state.description,id:a.data.id};e.props.dispatch(z5(t))})),o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:o,text:r},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(F5(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:e.state.description},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(zpe,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(Wpe,{children:[Object(a.jsx)(qpe,{options:$pe,onChange:e.handleFontStyle,defaultValue:$pe[0]}),Object(a.jsx)(Kpe,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(Qpe,{onClick:e.handleClick,children:Object(a.jsx)(Ype,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(Hpe,{children:[Object(a.jsx)(Gpe,{onClick:e.handleClose}),Object(a.jsx)(Dde.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsx)(Xpe,{children:Object(a.jsx)(Zpe,{value:e.state.description,onChange:e.handleTextArea,onBlur:e.handleOnBlurDescription,placeholder:"Enter your text here...",rows:10})})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id},c={description:n.data.text,id:n.data.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style},description:n.data.text},(function(){t.props.dispatch(L5(a)),t.props.dispatch(U5(o)),t.props.dispatch(F5(i)),t.props.dispatch(z5(c))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Text:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),the=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document}})))(ehe);function nhe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return nhe=function(){return e},e}function rhe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return rhe=function(){return e},e}function ahe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return ahe=function(){return e},e}function ohe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return ohe=function(){return e},e}var ihe=x.default.h4(ohe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),che=x.default.h4(ahe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),she=x.default.h4(rhe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),lhe=x.default.h4(nhe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),uhe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(she,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(che,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(lhe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(ihe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(ihe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),dhe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(uhe),phe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{},description:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e});var t={description:e.data.text,id:e.data.id};this.setState({description:t})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;if(e.details!==t){this.setState({details:t});var n={description:t.data.text,id:t.data.id};this.setState({description:n})}e.description.data.description!==this.props.description.data.description&&this.props.details.data.id===this.props.description.data.description.id&&this.setState({description:this.props.description.data.description})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(dhe,{id:t,type:n,details:this.state.details}),Object(a.jsx)("p",{children:""!==this.state.description.description?this.state.description.description:"No Text Added"})]})})})}),Object(a.jsx)(the,{id:t,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),hhe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(phe);function bhe(){var e=Object(f.a)(["\n  border: 0px;\n  width: 100%;\n  :hover {\n    border-bottom: 1px dotted;\n  }\n  :focus {\n    border-bottom: 1px dotted;\n    outline: none;\n  }\n  :active {\n    border: 0px;\n  }\n"]);return bhe=function(){return e},e}function fhe(){var e=Object(f.a)(["\n  min-width: 20px;\n  fill: ",";\n"]);return fhe=function(){return e},e}function mhe(){var e=Object(f.a)(["\n  padding: 10px;\n"]);return mhe=function(){return e},e}function jhe(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n"]);return jhe=function(){return e},e}function vhe(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  width: 100%;\n"]);return vhe=function(){return e},e}function Ohe(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return Ohe=function(){return e},e}var ghe=x.default.div(Ohe()),xhe=x.default.table(vhe()),yhe=x.default.tr(jhe()),whe=x.default.td(mhe()),_he=Object(x.default)(Ff)(fhe(),y.gray3),khe=x.default.input(bhe()),She=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={listItems:[]},e.handleValue=function(t,n){var r=Object(Dm.a)(e.state.listItems);r.map((function(e){e.id===n.id&&(e.value=t.target.value)})),e.setState({listItems:r},(function(){e.props.dispatch(q5(e.state.listItems))}))},e.handleOnBlurValue=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,(c=Object(Dm.a)(e.state.listItems)).map((function(e){e.id===r.id&&(e.value=n.target.value)})),e.setState({listItems:c}),t.prev=6,s={text:n.target.value,position:r.position},t.next=10,dH.assessmentReportUpdateSingleItems(i,o,r.id,s);case 10:t.sent&&e.props.dispatch(q5(e.state.listItems)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),Qm(Vm.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleDeleteItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,c=e.state.listItems.filter((function(e){return e.id!==r})),e.setState({list:c}),t.prev=5,t.next=8,dH.assessmentReportDeleteSingleItems(i,o,r);case 8:e.props.dispatch(q5(c)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),Qm(Vm.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContentList",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,s,l,u,d,p,h,b,f,m;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=e.state.listItems.slice(),o=-1,i=-1,s=0;s<a.length;s++)"list_".concat(a[s].id)===n.id&&(o=s),"list_".concat(a[s].id)===r.id&&(i=s);if(-1==o||-1==i){t.next=23;break}return l=a[o],l.fromId,u=Object(Rm.a)(l,["fromId"]),d=a[i],d.toId,p=Object(Rm.a)(d,["toId"]),a[o]=Object(c.a)({id:n.id},p),a[i]=Object(c.a)({id:r.id},u),e.setState({listItems:a}),t.prev=10,h=a.map((function(e,t){return{text_block_id:e.id,position:t}})),b=e.props.details,f=b.data.assessment_report_id,m=b.data.id,t.next=17,dH.assessmentReportUpdatePositionItems(m,f,h);case 17:e.props.dispatch(q5(e.state.listItems)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),Qm(Vm.Danger,"Server Error");case 23:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContentList")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({listItems:this.props.numericList.data.numericList});var e=this.props.details;if(this.setState({details:e}),e){var t=Object(Dm.a)(this.state.listItems);e.data.items.length>0&&e.data.items.map((function(e,n){t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItems:t})}}},{key:"componentDidUpdate",value:function(e){e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItems:this.props.numericList.data.numericList}):1===this.state.listItems.length&&this.setState({listItems:[]}));var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(Dm.a)(this.state.listItems);t.data.items.length>0&&t.data.items.map((function(e,t){n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItems:n})}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(ghe,{children:Object(a.jsx)(xhe,{children:Object(a.jsx)("tbody",{children:this.state.listItems.length>0&&this.state.listItems.map((function(t,n){return Object(a.jsxs)(yhe,{onDragOver:function(n){return e.onDragOver(n,"list_".concat(t.id))},onDrop:function(n){return e.onDrop(n,"list_".concat(t.id))},id:"list_".concat(t.id),children:[Object(a.jsx)(whe,{style:{width:"90%"},children:Object(a.jsx)(khe,{type:"text",value:t.value,onChange:function(n){return e.handleValue(n,t)},onBlur:function(n){return e.handleOnBlurValue(n,t)}})}),Object(a.jsxs)(whe,{children:[" ",Object(a.jsxs)("a",{href:"#",onDragStart:function(n){return e.onDragStart(n,"list_".concat(t.id))},draggable:!0,children:[" ",Object(a.jsx)(_he,{name:Ef.MenuDrag})]})]}),Object(a.jsx)(whe,{children:Object(a.jsx)(_he,{name:Ef.Trash,onClick:function(n){return e.handleDeleteItem(n,t.id)}})})]},t.id)}))})})})}}]),n}(p.PureComponent),Che=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,numericList:e.document}})))(She);function Nhe(){var e=Object(f.a)(["\n  width: 5px;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: rgb(237, 248, 225);\n  display: list-item;\n  padding: 10px 0px 10px 5px;\n"]);return Nhe=function(){return e},e}function Ehe(){var e=Object(f.a)(["\n  width: 5px;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: ",";\n  display: list-item;\n  padding: 10px 0px 10px 5px;\n"]);return Ehe=function(){return e},e}function Ahe(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n"]);return Ahe=function(){return e},e}function The(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n"]);return The=function(){return e},e}function Ihe(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  display: flex;\n"]);return Ihe=function(){return e},e}function Rhe(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return Rhe=function(){return e},e}function Dhe(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return Dhe=function(){return e},e}function Mhe(){var e=Object(f.a)(["\n  color: ",";\n  margin-right: 10px;\n"]);return Mhe=function(){return e},e}function Phe(){var e=Object(f.a)(["\n  max-height: calc(80vh - 210px);\n  overflow-y: auto;\n  padding: 15px;\n"]);return Phe=function(){return e},e}function Lhe(){var e=Object(f.a)(["\n  width: 150px;\n  :focus  {\n    border-top: 1px solid lightgray;\n    border-bottom: 1px solid lightgray;\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Lhe=function(){return e},e}function Fhe(){var e=Object(f.a)(["\n  display: flex;\n"]);return Fhe=function(){return e},e}function Uhe(){var e=Object(f.a)(["\n  width: 80%;\n  padding: 6px;\n  border: 0px solid lightgray;\n  border-radius: 4px;\n  border-top: 1px solid lightgray;\n  border-left: 1px solid lightgray;\n  border-bottom: 1px solid lightgray;\n"]);return Uhe=function(){return e},e}var Vhe=x.default.input(Uhe()),Bhe=x.default.div(Fhe()),Jhe=Object(x.default)(m7.a)(Lhe()),zhe=x.default.div(Phe()),qhe=x.default.a(Mhe(),y.blue2),Whe=x.default.div(Dhe()),Hhe=x.default.div(Rhe()),Ghe=x.default.div(Ihe()),Yhe=x.default.label(The(),(function(e){return"blue"===e.color?y.blue0:y.white})),Qhe=x.default.label(Ahe(),(function(e){return"blue"===e.color?"rgb(237, 248, 225)":y.white})),Khe=x.default.div(Ehe(),y.blue0),Zhe=x.default.div(Nhe()),Xhe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",itemList:[],serviceOption:[],searchTerm:"",selectedService:{},listItemsModal:[]},e.getServiceOption=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.addScopeOfWorkServiceList();case 3:(n=t.sent)&&(r=Object(Dm.a)(e.state.serviceOption),n.length>0&&n.map((function(e){r.push({value:e.id,label:e.name})})),e.setState({serviceOption:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getWorkList=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.addScopeOfWorkList();case 3:(n=t.sent)&&(r=Object(Dm.a)(e.state.itemList),n.length>0&&n.map((function(e){r.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getWorkCategory=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dH.addScopeOfWorkCategory();case 3:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.handleSelectItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=Object(Dm.a)(e.state.itemList)).map((function(e){e.id===r&&(!1===e.selected?e.selected=!0:e.selected=!1)})),e.setState({itemList:a});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleService=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedService:n}),t.prev=1,r=e.state.searchTerm,"",a=n.value,t.next=7,dH.addScopeOfWorkListFilter(r,"",a);case 7:(o=t.sent)&&(o.length>0?e.setState({itemList:[]},(function(){var t=[];o.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),Qm(Vm.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSearchTerm=function(t){var n=t.target.value;e.setState({searchTerm:n})},e.handleOnBlurSearchTerm=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({searchTerm:r}),t.prev=2,a=r,"",o=void 0!==e.state.selectedService.id?e.state.selectedService.id:"",t.next=8,dH.addScopeOfWorkListFilter(a,"",o);case 8:(i=t.sent)&&(i.length>0?e.setState({itemList:[]},(function(){var t=[];i.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),Qm(Vm.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)(zhe,{children:[Object(a.jsxs)(Bhe,{children:[Object(a.jsx)(Vhe,{type:"text",placeholder:"Search by item... ",value:e.state.searchTerm,onChange:e.handleSearchTerm,onBlur:e.handleOnBlurSearchTerm}),Object(a.jsx)(Jhe,{onChange:e.handleService,options:e.state.serviceOption})]}),Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(qhe,{href:"#",children:"Contents"}),Object(a.jsx)(qhe,{href:"#",children:"Structure"})]}),Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Whe,{children:Object(a.jsx)(Yhe,{color:"black",children:"Contents"})}),e.state.itemList.length>0&&e.state.itemList.map((function(t){return"Contents"===t.type?Object(a.jsxs)(Ghe,{children:[Object(a.jsx)(Khe,{}),Object(a.jsx)(Yhe,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})]},t.id):null}))]}),Object(a.jsx)(Hhe,{children:Object(a.jsx)(Yhe,{color:"black",children:"Structure"})}),e.state.itemList.map((function(t,n){return"Structure"===t.type?Object(a.jsxs)(Ghe,{children:[Object(a.jsx)(Zhe,{}),Object(a.jsx)(Qhe,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})]},n):null}))]})]})},e.addItem=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(n=Object(Dm.a)(e.state.itemList)).length>0&&n.filter((function(e){return!0===e.selected}))||[],e.props.addNewItem(n),e.props.onClose();case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getServiceOption(),this.getWorkList(),this.getWorkCategory(),this.setState({listItemsModal:this.props.numericList.data.numericList})}},{key:"componentDidUpdate",value:function(e){e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItemsModal:this.props.numericList.data.numericList}):1===this.state.listItemsModal.length&&this.setState({listItemsModal:[]}))}},{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",onClick:this.addItem,children:"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Add Scope of Works",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(h.a.PureComponent),$he=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,numericList:e.document}})))(Xhe);function ebe(){var e=Object(f.a)(["\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n  display: inline-block;\n  margin-bottom: 0;\n  font-weight: normal;\n  text-align: center;\n  vertical-align: middle;\n  touch-action: manipulation;\n  cursor: pointer;\n  background-image: none;\n  white-space: nowrap;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.428571429;\n  border-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  margin-right: 10px;\n"]);return ebe=function(){return e},e}function tbe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n  justify-content: flex-end;\n"]);return tbe=function(){return e},e}function nbe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return nbe=function(){return e},e}function rbe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return rbe=function(){return e},e}function abe(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return abe=function(){return e},e}function obe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return obe=function(){return e},e}function ibe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return ibe=function(){return e},e}function cbe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return cbe=function(){return e},e}function sbe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return sbe=function(){return e},e}function lbe(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return lbe=function(){return e},e}var ube=x.default.input(lbe()),dbe=Object(x.default)(m7.a)(sbe()),pbe=x.default.div(cbe()),hbe=x.default.div(ibe()),bbe=x.default.div(obe()),fbe=x.default.div(abe(),(function(e){return e.color})),mbe=x.default.div(rbe()),jbe=x.default.input(nbe()),vbe=x.default.div(tbe()),Obe=x.default.button(ebe()),gbe=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],xbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},listItems:[],displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0,showScopeModal:!1},e.handleHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(U5(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(F5(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleAddItem=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.details,r=n.data.assessment_report_id,a=n.data.id,t.prev=3,o={text:"Number Item",position:0},t.next=7,dH.assessmentReportAddSingleItems(a,r,o);case 7:(i=t.sent)&&((c=Object(Dm.a)(e.state.listItems)).push({id:i.id,value:i.text,position:i.position,arId:a}),e.setState({listItems:c},(function(){e.props.dispatch(q5(e.state.listItems))}))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.handleAddScopeModal=function(){e.setState({showScopeModal:!0})},e.handleCloseScopeModal=function(){e.setState({showScopeModal:!1})},e.handleNewItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.details,a=r.data.assessment_report_id,o=r.data.id,t.prev=3,i=[],n.length>0&&n.map((function(e){i.push({assessment_report_section_id:a,position:0,text:e.value})})),t.next=8,dH.assessmentReportAddBulkItems(o,a,i);case 8:(c=t.sent)&&(s=Object(Dm.a)(e.state.listItems),c.map((function(e){s.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),e.setState({listItems:s},(function(){e.props.dispatch(q5(e.state.listItems))}))),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error"),e.props.onClose();case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ube,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(pbe,{children:[Object(a.jsx)(dbe,{options:gbe,onChange:e.handleFontStyle,defaultValue:gbe[0]}),Object(a.jsx)(jbe,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(mbe,{onClick:e.handleClick,children:Object(a.jsx)(fbe,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(hbe,{children:[Object(a.jsx)(bbe,{onClick:e.handleClose}),Object(a.jsx)(Dde.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsxs)(vbe,{children:[Object(a.jsx)(Obe,{onClick:e.handleAddScopeModal,children:"Add Scope of Works"}),Object(a.jsx)(Obe,{onClick:e.handleAddItem,children:"Add Item"})]}),Object(a.jsx)(Che,{details:e.props.details}),Object(a.jsx)($he,{addNewItem:e.handleNewItem,id:e.props.id,isOpen:e.state.showScopeModal,onClose:e.handleCloseScopeModal,details:e.props.details})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItems:this.props.numericList.data.numericList}):1===this.state.listItems.length&&this.setState({listItems:[]})),e.details!==n&&n){var r=Object(Dm.a)(this.state.listItems);n.data.items.length>0&&n.data.items.map((function(e,t){r.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItems:r});var a=n.data.heading_color.toString(16);a="#".concat(a);var o={headingText:n.data.heading,id:this.props.id},i={color:a,id:this.props.id},c={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:o,color:a,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(L5(o)),t.props.dispatch(U5(i)),t.props.dispatch(F5(c))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Numerical List:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),ybe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,numericList:e.document}})))(xbe);function wbe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return wbe=function(){return e},e}function _be(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return _be=function(){return e},e}function kbe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return kbe=function(){return e},e}function Sbe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Sbe=function(){return e},e}var Cbe=x.default.h4(Sbe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Nbe=x.default.h4(kbe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ebe=x.default.h4(_be(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Abe=x.default.h4(wbe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Tbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(Ebe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(Nbe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(Abe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(Cbe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(Cbe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),Ibe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(Tbe),Rbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,listItem:[],details:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;if(this.setState({details:e}),e){var t=Object(Dm.a)(this.state.listItem);e.data.items.length>0&&e.data.items.map((function(e,n){t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItem:t})}}},{key:"componentDidUpdate",value:function(e){e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItem:this.props.numericList.data.numericList}):1===this.state.listItem.length&&this.setState({listItem:[]}));var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(Dm.a)(this.state.listItem);t.data.items.length>0&&t.data.items.map((function(e,t){n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItem:n})}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Ibe,{id:t,type:n,details:this.state.details}),Object(a.jsx)("ol",{children:this.state.listItem.length>0&&this.state.listItem.map((function(e){return Object(a.jsx)("li",{children:e.value},e.id)}))})]})})})}),Object(a.jsx)(ybe,{id:t,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),Dbe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document,numericList:e.document}})))(Rbe);function Mbe(){var e=Object(f.a)(["\n  border: 0px;\n  width: 100%;\n  :hover {\n    border-bottom: 1px dotted;\n  }\n  :focus {\n    border-bottom: 1px dotted;\n    outline: none;\n  }\n  :active {\n    border: 0px;\n  }\n"]);return Mbe=function(){return e},e}function Pbe(){var e=Object(f.a)(["\n  min-width: 20px;\n  fill: ",";\n"]);return Pbe=function(){return e},e}function Lbe(){var e=Object(f.a)(["\n  padding: 10px;\n"]);return Lbe=function(){return e},e}function Fbe(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  background-color: #ddd;\n"]);return Fbe=function(){return e},e}function Ube(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  width: 100%;\n"]);return Ube=function(){return e},e}function Vbe(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return Vbe=function(){return e},e}var Bbe=x.default.div(Vbe()),Jbe=x.default.table(Ube()),zbe=x.default.tr(Fbe()),qbe=x.default.td(Lbe()),Wbe=Object(x.default)(Ff)(Pbe(),y.gray3),Hbe=x.default.input(Mbe()),Gbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={list:[]},e.handleValue=function(t,n){var r=Object(Dm.a)(e.state.list);r.map((function(e){e.id===n.id&&(e.value=t.target.value)})),e.setState({list:r},(function(){e.props.dispatch(W5(e.state.list))}))},e.handleOnBlurValue=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,(c=Object(Dm.a)(e.state.list)).map((function(e){e.id===r.id&&(e.value=n.target.value)})),e.setState({list:c}),t.prev=6,s={text:n.target.value,position:r.position},t.next=10,dH.assessmentReportUpdateSingleItems(i,o,r.id,s);case 10:t.sent&&e.props.dispatch(W5(e.state.list)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),Qm(Vm.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleDeleteItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,c=e.state.list.filter((function(e){return e.id!==r})),e.setState({list:c}),t.prev=5,t.next=8,dH.assessmentReportDeleteSingleItems(i,o,r);case 8:e.props.dispatch(W5(c)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(5),Qm(Vm.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[5,11]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContentList",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,s,l,u,d,p,h,b,f,m;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=e.state.list.slice(),o=-1,i=-1,s=0;s<a.length;s++)"list_".concat(a[s].id)===n.id&&(o=s),"list_".concat(a[s].id)===r.id&&(i=s);if(-1==o||-1==i){t.next=23;break}return l=a[o],l.fromId,u=Object(Rm.a)(l,["fromId"]),d=a[i],d.toId,p=Object(Rm.a)(d,["toId"]),a[o]=Object(c.a)({id:n.id},p),a[i]=Object(c.a)({id:r.id},u),e.setState({list:a},(function(){e.props.dispatch(W5(e.state.list))})),t.prev=10,h=a.map((function(e,t){return{text_block_id:e.id,position:t}})),b=e.props.details,f=b.data.assessment_report_id,m=b.data.id,t.next=17,dH.assessmentReportUpdatePositionItems(m,f,h);case 17:e.props.dispatch(W5(e.state.list)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),Qm(Vm.Danger,"Server Error");case 23:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContentList")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({list:this.props.bulletList.data.bulletList});var e=this.props.details;if(e){var t=Object(Dm.a)(this.state.list);e.data.items.length>0&&e.data.items.map((function(e,n){return t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({list:t},(function(){}))}}},{key:"componentDidUpdate",value:function(e){e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&this.props.bulletList.data.bulletList.length>0&&this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({list:this.props.bulletList.data.bulletList});var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(Dm.a)(this.state.list);t.data.items.length>0&&t.data.items.map((function(e,t){return n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({list:n},(function(){}))}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(Bbe,{children:Object(a.jsx)(Jbe,{className:"drag-table-pop",children:Object(a.jsx)("tbody",{className:"drag-tbody-pop",children:this.state.list.length>0&&this.state.list.map((function(t,n){return Object(a.jsxs)(zbe,{onDragOver:function(n){return e.onDragOver(n,"list_".concat(t.id))},onDrop:function(n){return e.onDrop(n,"list_".concat(t.id))},id:"list_".concat(t.id),children:[Object(a.jsx)(qbe,{style:{width:"90%"},children:Object(a.jsx)(Hbe,{type:"text",value:t.value,onChange:function(n){return e.handleValue(n,t)},onBlur:function(n){return e.handleOnBlurValue(n,t)}})}),Object(a.jsxs)(qbe,{children:[" ",Object(a.jsxs)("a",{href:"#",onDragStart:function(n){return e.onDragStart(n,"list_".concat(t.id))},draggable:!0,children:[" ",Object(a.jsx)(Wbe,{name:Ef.MenuDrag})]})]}),Object(a.jsx)(qbe,{children:Object(a.jsx)(Wbe,{name:Ef.Trash,onClick:function(n){return e.handleDeleteItem(n,t.id)}})})]},t.id)}))})})})}}]),n}(p.PureComponent),Ybe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,bulletList:e.document}})))(Gbe);function Qbe(){var e=Object(f.a)(["\n  width: 5px;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: rgb(237, 248, 225);\n  display: list-item;\n  padding: 10px 0px 10px 5px;\n"]);return Qbe=function(){return e},e}function Kbe(){var e=Object(f.a)(["\n  width: 5px;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: ",";\n  display: list-item;\n  padding: 10px 0px 10px 5px;\n"]);return Kbe=function(){return e},e}function Zbe(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n"]);return Zbe=function(){return e},e}function Xbe(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n"]);return Xbe=function(){return e},e}function $be(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  display: flex;\n"]);return $be=function(){return e},e}function efe(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return efe=function(){return e},e}function tfe(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return tfe=function(){return e},e}function nfe(){var e=Object(f.a)(["\n  color: ",";\n  margin-right: 10px;\n"]);return nfe=function(){return e},e}function rfe(){var e=Object(f.a)(["\n  max-height: calc(80vh - 210px);\n  overflow-y: auto;\n  padding: 15px;\n"]);return rfe=function(){return e},e}function afe(){var e=Object(f.a)(["\n  width: 150px;\n  :focus  {\n    border-top: 1px solid lightgray;\n    border-bottom: 1px solid lightgray;\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return afe=function(){return e},e}function ofe(){var e=Object(f.a)(["\n  display: flex;\n"]);return ofe=function(){return e},e}function ife(){var e=Object(f.a)(["\n  width: 80%;\n  padding: 6px;\n  border: 0px solid lightgray;\n  border-radius: 4px;\n  border-top: 1px solid lightgray;\n  border-left: 1px solid lightgray;\n  border-bottom: 1px solid lightgray;\n"]);return ife=function(){return e},e}var cfe=x.default.input(ife()),sfe=x.default.div(ofe()),lfe=Object(x.default)(m7.a)(afe()),ufe=x.default.div(rfe()),dfe=x.default.a(nfe(),y.blue2),pfe=x.default.div(tfe()),hfe=x.default.div(efe()),bfe=x.default.div($be()),ffe=x.default.label(Xbe(),(function(e){return"blue"===e.color?y.blue0:y.white})),mfe=x.default.label(Zbe(),(function(e){return"blue"===e.color?"rgb(237, 248, 225)":y.white})),jfe=x.default.div(Kbe(),y.blue0),vfe=x.default.div(Qbe()),Ofe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",itemList:[],serviceOption:[],searchTerm:"",selectedService:{},modalItemList:[]},e.getServiceOption=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.addScopeOfWorkServiceList();case 3:(n=t.sent)&&(r=Object(Dm.a)(e.state.serviceOption),n.length>0&&n.map((function(e){r.push({value:e.id,label:e.name})})),e.setState({serviceOption:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getWorkList=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.addScopeOfWorkList();case 3:(n=t.sent)&&(r=Object(Dm.a)(e.state.itemList),n.length>0&&n.map((function(e){r.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getWorkCategory=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,dH.addScopeOfWorkCategory();case 3:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Qm(Vm.Danger,"Server Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.handleSelectItem=function(t,n){var r=Object(Dm.a)(e.state.itemList);r.map((function(e){e.id===n&&(!1===e.selected?e.selected=!0:e.selected=!1)})),e.setState({itemList:r})},e.handleSearchTerm=function(t){var n=t.target.value;e.setState({searchTerm:n})},e.handleOnBlurSearchTerm=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({searchTerm:r}),t.prev=2,a=r,"",o=void 0!==e.state.selectedService.id?e.state.selectedService.id:"",t.next=8,dH.addScopeOfWorkListFilter(a,"",o);case 8:(i=t.sent)&&(i.length>0?e.setState({itemList:[]},(function(){var t=[];i.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),Qm(Vm.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.handleService=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedService:n}),t.prev=1,r=e.state.searchTerm,"",a=n.value,t.next=7,dH.addScopeOfWorkListFilter(r,"",a);case 7:(o=t.sent)&&(o.length>0?e.setState({itemList:[]},(function(){var t=[];o.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),Qm(Vm.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)(ufe,{children:[Object(a.jsxs)(sfe,{children:[Object(a.jsx)(cfe,{type:"text",placeholder:"Search by item... ",value:e.state.searchTerm,onChange:e.handleSearchTerm,onBlur:e.handleOnBlurSearchTerm}),Object(a.jsx)(lfe,{onChange:e.handleService,options:e.state.serviceOption})]}),Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(dfe,{href:"#",children:"Contents"}),Object(a.jsx)(dfe,{href:"#",children:"Structure"})]}),Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(pfe,{children:Object(a.jsx)(ffe,{color:"black",children:"Contents"})}),e.state.itemList.map((function(t){return"Contents"===t.type?Object(a.jsxs)(bfe,{children:[Object(a.jsx)(jfe,{}),Object(a.jsx)(ffe,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})]},t.id):null}))]}),Object(a.jsx)(hfe,{children:Object(a.jsx)(ffe,{color:"black",children:"Structure"})}),e.state.itemList.map((function(t){return"Structure"===t.type?Object(a.jsxs)(bfe,{children:[Object(a.jsx)(vfe,{}),Object(a.jsx)(mfe,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})]},t.id):null}))]})]})},e.addItem=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(n=Object(Dm.a)(e.state.itemList)).length>0&&n.filter((function(e){return!0===e.selected}))||[],e.props.addNewItem(n),e.props.onClose();case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getServiceOption(),this.getWorkList(),this.getWorkCategory(),this.setState({modalItemList:this.props.bulletList.data.bulletList})}},{key:"componentDidUpdate",value:function(e){e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&this.props.bulletList.data.bulletList.length>0&&this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({modalItemList:this.props.bulletList.data.bulletList})}},{key:"renderFooter",value:function(){return Object(a.jsx)(Cg,{className:"btn btn-primary",onClick:this.addItem,children:"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Add Scope of Works",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(h.a.PureComponent),gfe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,bulletList:e.document}})))(Ofe);function xfe(){var e=Object(f.a)(["\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n  display: inline-block;\n  margin-bottom: 0;\n  font-weight: normal;\n  text-align: center;\n  vertical-align: middle;\n  touch-action: manipulation;\n  cursor: pointer;\n  background-image: none;\n  white-space: nowrap;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.428571429;\n  border-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  margin-right: 10px;\n"]);return xfe=function(){return e},e}function yfe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n  justify-content: flex-end;\n"]);return yfe=function(){return e},e}function wfe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return wfe=function(){return e},e}function _fe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return _fe=function(){return e},e}function kfe(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return kfe=function(){return e},e}function Sfe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Sfe=function(){return e},e}function Cfe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Cfe=function(){return e},e}function Nfe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Nfe=function(){return e},e}function Efe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Efe=function(){return e},e}function Afe(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Afe=function(){return e},e}var Tfe=x.default.input(Afe()),Ife=Object(x.default)(m7.a)(Efe()),Rfe=x.default.div(Nfe()),Dfe=x.default.div(Cfe()),Mfe=x.default.div(Sfe()),Pfe=x.default.div(kfe(),(function(e){return e.color})),Lfe=x.default.div(_fe()),Ffe=x.default.input(wfe()),Ufe=x.default.div(yfe()),Vfe=x.default.button(xfe()),Bfe=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],Jfe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},itemList:[],displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0,showScopeModal:!1},e.handleHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(V5(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(V5(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(J5(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:r.data.text},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(B5(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleAddItem=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.details,r=n.data.assessment_report_id,a=n.data.id,t.prev=3,o={text:"Bullet Item",position:0},t.next=7,dH.assessmentReportAddSingleItems(a,r,o);case 7:(i=t.sent)&&((c=Object(Dm.a)(e.state.itemList)).push({id:i.id,value:i.text,position:i.position,arId:a}),e.setState({itemList:c},(function(){e.props.dispatch(W5(e.state.itemList))}))),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.handleAddScopeModal=function(){e.setState({showScopeModal:!0})},e.handleCloseScopeModal=function(){e.setState({showScopeModal:!1})},e.handleNewItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.details,a=r.data.assessment_report_id,o=r.data.id,t.prev=3,i=[],n.length>0&&n.map((function(e){i.push({assessment_report_section_id:a,position:0,text:e.value})})),t.next=8,dH.assessmentReportAddBulkItems(o,a,i);case 8:(c=t.sent)&&(s=Object(Dm.a)(e.state.itemList),c.map((function(e){s.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),e.setState({itemList:s},(function(){e.props.dispatch(W5(e.state.itemList))}))),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error"),e.props.onClose();case 16:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Tfe,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(Rfe,{children:[Object(a.jsx)(Ife,{options:Bfe,onChange:e.handleFontStyle,defaultValue:Bfe[0]}),Object(a.jsx)(Ffe,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(Lfe,{onClick:e.handleClick,children:Object(a.jsx)(Pfe,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(Dfe,{children:[Object(a.jsx)(Mfe,{onClick:e.handleClose}),Object(a.jsx)(Dde.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsxs)(Ufe,{children:[Object(a.jsx)(Vfe,{onClick:e.handleAddScopeModal,children:"Add Scope of Works"}),Object(a.jsx)(Vfe,{onClick:e.handleAddItem,children:"Add Item"})]}),Object(a.jsx)(Ybe,{details:e.props.details}),Object(a.jsx)(gfe,{addNewItem:e.handleNewItem,id:e.props.id,isOpen:e.state.showScopeModal,onClose:e.handleCloseScopeModal,details:e.props.details})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this;e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&this.props.bulletList.data.bulletList.length>0&&this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({itemList:this.props.bulletList.data.bulletList});var n=this.props.details;if(e.details!==n&&n){var r=Object(Dm.a)(this.state.itemList);n.data.items.length>0&&n.data.items.map((function(e,t){return r.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({itemList:r},(function(){}));var a=n.data.heading_color.toString(16);a="#".concat(a);var o={headingText:n.data.heading,id:this.props.id},i={color:a,id:this.props.id},c={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:o,color:a,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(V5(o)),t.props.dispatch(J5(i)),t.props.dispatch(B5(c))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Bullet List:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),zfe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,bulletList:e.document}})))(Jfe);function qfe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return qfe=function(){return e},e}function Wfe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return Wfe=function(){return e},e}function Hfe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Hfe=function(){return e},e}function Gfe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Gfe=function(){return e},e}var Yfe=x.default.h4(Gfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Qfe=x.default.h4(Hfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Kfe=x.default.h4(Wfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Zfe=x.default.h4(qfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Xfe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{},details:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.heading,c=r.fontColorData;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(Kfe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(Qfe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(Zfe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(Yfe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Image"}):Object(a.jsx)(Yfe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."})})}}]),n}(p.Component),$fe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(Xfe),eme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,itemList:[],details:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;if(this.setState({details:e}),e&&e.id===this.props.id){var t=Object(Dm.a)(this.state.itemList);e.data.items.length>0&&e.data.items.map((function(e,n){t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({itemList:t})}}},{key:"componentDidUpdate",value:function(e){e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&(this.props.bulletList.data.bulletList.length>0?this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({itemList:this.props.bulletList.data.bulletList}):1===this.state.itemList.length&&this.setState({itemList:[]}));var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(Dm.a)(this.state.itemList);t.data.items.length>0&&t.data.items.map((function(e,t){return n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({itemList:n})}}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)($fe,{id:t,type:n,details:this.state.details}),Object(a.jsx)("ul",{children:this.state.itemList.length>0&&this.state.itemList.map((function(e){return Object(a.jsx)("li",{children:e.value},e.id)}))})]})})})}),Object(a.jsx)(zfe,{id:t,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),tme=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document,bulletList:e.document}})))(eme),nme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,hover:!1},e.onMouseLeave=function(){e.setState({hover:!1})},e.onMouseEnter=function(){e.setState({hover:!0})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{className:"break-page",style:{flex:1},children:Object(a.jsx)("div",{className:"hover-content-overlay",children:"\u2014 \u2014 PAGE BREAK \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014"})})})})})})}}]),n}(p.PureComponent),rme=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(nme),ame=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1},e.onMouseEnter=function(){e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{className:"hr-lines",style:{flex:"0 0 calc(100% - 30px)"},children:Object(a.jsx)("hr",{})})})})})})}}]),n}(p.PureComponent),ome=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(ame);function ime(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return ime=function(){return e},e}function cme(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return cme=function(){return e},e}function sme(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return sme=function(){return e},e}function lme(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return lme=function(){return e},e}var ume=x.default.h4(lme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),dme=x.default.h4(sme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),pme=x.default.h4(cme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),hme=x.default.h4(ime(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),bme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==a&&this.props.id===a.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==n&&this.props.id===n.id&&this.setState({fontStyleData:n}),e.text.data.heading!==r&&this.props.id===r.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(pme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(dme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(hme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(ume,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(ume,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),fme=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(bme);function mme(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return mme=function(){return e},e}function jme(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return jme=function(){return e},e}function vme(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return vme=function(){return e},e}function Ome(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return Ome=function(){return e},e}function gme(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return gme=function(){return e},e}function xme(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return xme=function(){return e},e}function yme(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return yme=function(){return e},e}function wme(){var e=Object(f.a)(["\n  width: 50%;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return wme=function(){return e},e}function _me(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return _me=function(){return e},e}function kme(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return kme=function(){return e},e}var Sme=x.default.input(kme()),Cme=Object(x.default)(m7.a)(_me()),Nme=Object(x.default)(m7.a)(wme()),Eme=x.default.div(yme()),Ame=x.default.div(xme()),Tme=x.default.div(gme()),Ime=x.default.div(Ome(),(function(e){return e.color})),Rme=x.default.div(vme()),Dme=x.default.input(jme()),Mme=x.default.div(mme()),Pme=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],Lme=[{value:"half",label:"Fit image to half-page width"},{value:"full",label:"Fit image to page width"}],Fme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0,selectedView:void 0},e.handleHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(L5(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,dH.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(U5(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(F5(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,dH.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Qm(Vm.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleImageView=function(t){e.setState({selectedView:t},(function(){e.props.selectedImageView(t)}))},e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Sme,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(Eme,{children:[Object(a.jsx)(Cme,{options:Pme,onChange:e.handleFontStyle,defaultValue:Pme[0]}),Object(a.jsx)(Dme,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(Rme,{onClick:e.handleClick,children:Object(a.jsx)(Ime,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(Ame,{children:[Object(a.jsx)(Tme,{onClick:e.handleClose}),Object(a.jsx)(Dde.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsx)(Mme,{children:Object(a.jsx)(Nme,{options:Lme,value:e.state.selectedView,onChange:e.handleImageView})})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(L5(a)),t.props.dispatch(U5(o)),t.props.dispatch(F5(i))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Image:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Ume=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document}})))(Fme);function Vme(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Vme=function(){return e},e}function Bme(){var e=Object(f.a)(["\n  padding: 50px;\n  align-self: center;\n"]);return Bme=function(){return e},e}function Jme(){var e=Object(f.a)(["\n  margin-left: 5px;\n  color: ",";\n"]);return Jme=function(){return e},e}function zme(){var e=Object(f.a)(["\n  width: ",";\n  border: 0px;\n  :hover  {\n    border-bottom: 1px dashed ",";\n  }\n"]);return zme=function(){return e},e}function qme(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return qme=function(){return e},e}var Wme=x.default.div(qme(),(function(e){return e.width})),Hme=x.default.input(zme(),(function(e){return e.width}),y.black0),Gme=x.default.label(Jme(),y.gray3),Yme=x.default.div(Bme()),Qme=x.default.div(Vme()),Kme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hover:!1,uploadedImage:"",loading:!1,fullImage:!1,details:{},description:"",photo_id:0,width:0,imageId:0},e.handleDelete=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.details,a=n.dispatch,o=n.match.params.id,t.prev=1,t.next=4,a(Sw("Confirm","Are you sure you want remove this image."));case 4:if(i=t.sent,c=r.data.assessment_report_id,s=r.data.id,l=e.state.imageId,!i){t.next=14;break}return e.props.dispatch(Y5(!0)),t.next=12,dH.assessmentReportDeleteImage(c,s,l);case 12:e.props.dispatch(G5(parseInt(o),c)),e.props.dispatch(Y5(!1));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 20:case"end":return t.stop()}}),t,null,[[1,16]])}))),e.onDragOver=function(e){e.preventDefault()},e.handleDrop=function(t){t.preventDefault(),e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files)},e.inputRef=p.createRef(),e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.target.files))},e.uploadPhotos=function(t){var n,r=["png","jpeg","jpg"],o=[],i=Object(pV.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value,s=(c.name.split(".").pop()||"").toLowerCase();if(r.includes(s)){var l=new FormData;l.append("file",c),o.push(VV.uploadPhoto(l).then((function(t){var n=e.props.details.data.assessment_report_id,r=e.props.details.data.id,a={photo_id:t.data.id,desired_width:t.data.width,caption:e.state.description};e.setState({uploadedImage:t.data.url,loading:!1,photo_id:t.data.id,width:t.data.width}),dH.assessmentReportAttachImage(r,n,a).then((function(t){t&&e.setState({photo_id:t.photo_id,width:t.desired_width,imageId:t.id})}))})))}else Qm(Vm.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",s]})," is not supported!"]}));e.setState({loading:!1})}}catch(u){i.e(u)}finally{i.f()}},e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.handleImageView=function(t){"full"===t.value?e.setState({fullImage:!0}):e.setState({fullImage:!1})},e.handleImageDescription=function(t){var n=t.target.value;e.setState({description:n})},e.handleOnBlurDescription=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target.value,a=e.state,o=a.photo_id,i=a.width,c=a.imageId,e.setState({description:r}),0===o){t.next=15;break}return t.prev=4,s=e.props.details.data.assessment_report_id,l=e.props.details.data.id,u={photo_id:o,desired_width:i,caption:r},t.next=10,dH.assessmentReportUpdateImage(l,s,c,u);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),Qm(Vm.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.details;this.setState({details:t},(function(){t.data.items&&e.setState({photo_id:t.data.items.photo_id,description:null!==t.data.items.caption?t.data.items.caption:"",width:t.data.items.desired_width,uploadedImage:t.data.items.photo.url,imageId:t.data.items.id})}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;e.details!==n&&this.setState({details:n},(function(){n.data.items&&t.setState({photo_id:n.data.items.photo_id,description:null!==n.data.items.caption?n.data.items.caption:"",width:n.data.items.desired_width,uploadedImage:n.data.items.photo.url,imageId:n.data.items.id})}))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(fme,{id:t,type:n,details:this.state.details}),Object(a.jsxs)("div",{className:"image-div",children:[Object(a.jsx)("input",{type:"file",accept:"image/jpeg,image/png",multiple:!0,hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef}),this.state.uploadedImage&&""!==this.state.uploadedImage?Object(a.jsx)(Wme,{width:!0===this.state.fullImage?"90%":"50%",children:Object(a.jsxs)(Qme,{style:{position:"absolute"},children:[this.state.loading&&Object(a.jsx)(av,{size:40}),Object(a.jsx)("img",{src:this.state.uploadedImage,style:{objectFit:"contain"}})]})}):Object(a.jsx)(Wme,{width:!0===this.state.fullImage?"90%":"50%",onClick:this.onUploadLinkClick,onDragOver:this.onDragOver,onDrop:this.handleDrop,className:"print-hide",children:Object(a.jsxs)(Yme,{children:[Object(a.jsx)(IN,{name:Ef.Photos}),Object(a.jsx)(Gme,{children:"Click to add photo"})]})}),Object(a.jsx)(Hme,{width:!0===this.state.fullImage?"90%":"40%",type:"text",className:"img-desc",placeholder:"Add photo description here...",value:this.state.description,onChange:this.handleImageDescription,onBlur:this.handleOnBlurDescription}),this.state.uploadedImage&&""!==this.state.uploadedImage?Object(a.jsx)("div",{className:"print-hide",style:{display:"inline-block"},children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:this.handleDelete})}):null]})]})})})}),Object(a.jsx)(Ume,{id:t,isOpen:this.props.showModal,title:"Image: Enter heading here...",onClose:this.props.handleModal,selectedImageView:this.handleImageView,details:this.state.details})]})}}]),n}(p.PureComponent),Zme=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(Kme);function Xme(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return Xme=function(){return e},e}function $me(){var e=Object(f.a)(["\n  width: 33.33%;\n  height: 200px;\n  display: inline-block;\n  margin-bottom: 10px;\n  padding: 10px;\n  position: relative;\n  opacity: ",";\n"]);return $me=function(){return e},e}function eje(){var e=Object(f.a)(["\n  overflow: auto;\n  flex-direction: row;\n  height: 400px;\n"]);return eje=function(){return e},e}var tje=x.default.div(eje()),nje=x.default.div($me(),(function(e){return e.opacity})),rje=x.default.a(Xme()),aje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobPhotos:[],selectedAll:!1},e.handleImageSelect=function(t){var n=Object(Dm.a)(e.state.jobPhotos);n.map((function(e){return e.id===t&&(e.selected=!e.selected),e})),e.setState({jobPhotos:n})},e.handleSelectAll=function(){var t=Object(Dm.a)(e.state.jobPhotos);t.map((function(t){t.selected=!e.state.selectedAll})),e.setState({jobPhotos:t,selectedAll:!e.state.selectedAll})},e.renderBody=function(){var t=e.state.jobPhotos;return Object(a.jsxs)("div",{children:[Object(a.jsx)(rje,{href:"#",onClick:e.handleSelectAll,children:"Tick / un-tick all"}),Object(a.jsx)(tje,{children:t.length>0&&t.map((function(t,n){return Object(a.jsxs)(nje,{opacity:t.selected?"1":"0.5",onClick:function(){return e.handleImageSelect(t.id)},children:[Object(a.jsx)("img",{src:t.url,className:"img-fit"}),t.selected&&Object(a.jsx)("span",{className:"icon-div",children:Object(a.jsx)(Ff,{className:"svg-icon-center",name:Ef.Checked})})]},n)}))})]})},e.addSelectedPhotos=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.state.jobPhotos,r=e.props.details,a=[],n.map((function(e){!0===e.selected&&a.push(e.id)})),o=r.data.assessment_report_id,i=r.data.id,c="",s=0;s<a.length;s++)s===a.length-1?c+=a[s]:c=c+a[s]+",";if(!(a.length>0)){t.next=23;break}return t.prev=9,e.props.dispatch(Y5(!0)),t.next=13,dH.assessmentReportAddPhotosFromJob(i,o,{job_photo_ids:c});case 13:e.props.dispatch(G5(parseInt(e.props.match.params.id),o)),e.props.dispatch(Y5(!1)),e.props.onClose(),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(9),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1)),e.props.onClose();case 23:case"end":return t.stop()}}),t,null,[[9,18]])}))),e.renderFooter=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(Cg,{type:"submit",className:"btn btn-primary",onClick:e.addSelectedPhotos,children:"Add"})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,ly.getJobPhotos(this.props.match.params.id);case 3:(n=e.sent)&&(n.data.length>0&&n.data.map((function(e){return t.push({id:e.id,url:e.url,selected:!1}),e})),this.setState({jobPhotos:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"Add Photos",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),oje=Object(LO.compose)(v.g,Object(b.b)((function(e){return{}})))(aje);function ije(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-size: 18px;\n"]);return ije=function(){return e},e}function cje(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return cje=function(){return e},e}function sje(){var e=Object(f.a)(["\n  padding: 50px;\n  align-self: center;\n"]);return sje=function(){return e},e}function lje(){var e=Object(f.a)(["\n  margin-left: 5px;\n  color: ",";\n"]);return lje=function(){return e},e}function uje(){var e=Object(f.a)(["\n  width: ",";\n  border: 0px;\n  margin-right: 6%;\n  :hover  {\n    border-bottom: 1px dashed ",";\n  }\n"]);return uje=function(){return e},e}function dje(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return dje=function(){return e},e}var pje=x.default.div(dje(),(function(e){return e.width})),hje=x.default.input(uje(),(function(e){return e.width}),y.black0),bje=x.default.label(lje(),y.gray3),fje=x.default.div(sje()),mje=x.default.div(cje()),jje=x.default.h4(ije()),vje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hover:!1,uploadedImage:[],loading:!1,fullImage:!1,selectedImage:"",newImageDesc:""},e.handleDelete=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.details,i=a.dispatch,c=a.match.params.id,t.prev=1,t.next=4,i(Sw("Confirm","Are you sure you want remove this image."));case 4:if(s=t.sent,l=o.data.assessment_report_id,u=o.data.id,d=r.imageId,!s){t.next=14;break}return e.props.dispatch(Y5(!0)),t.next=12,dH.assessmentReportDeletePhotos(l,u,d);case 12:e.props.dispatch(G5(parseInt(c),parseInt(l))),e.props.dispatch(Y5(!1));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 20:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleRotate=function(t,n){var r=Object(Dm.a)(e.state.uploadedImage);r.map((function(e){return e.photo_id===n&&(e.rotateDegrees=e.rotateDegrees+1),e})),e.setState({uploadedImage:r},(function(){VV.rotatePhoto(n,{degree:"-90",level:1}).then((function(){var t=e.props.match.params,n=t.id,r=t.reportId;e.props.dispatch(Y5(!0)),e.props.dispatch(G5(parseInt(n),parseInt(r))),e.props.dispatch(Y5(!1))}))}))},e.handleDescriptionChange=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.uploadedImage);a.map((function(e){return e.imageId===n.imageId&&(e.description=r),n})),e.setState({uploadedImage:a})},e.handleOnBlurDescriptionChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s,l,u,d,p;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,o=Object(Dm.a)(e.state.uploadedImage),i=e.props,c=i.details,s=i.match.params.id,l=c.data.assessment_report_id,u=c.data.id,d=r.imageId,o.map((function(e){return e.imageId===r.imageId&&(e.description=a),r})),e.setState({uploadedImage:o}),t.prev=8,p={photo_id:r.photo_id,desired_width:r.width,position:r.position,caption:a,rotateDegrees:0},e.props.dispatch(Y5(!0)),t.next=13,dH.assessmentReportUpdatePhotos(u,l,d,p);case 13:e.props.dispatch(G5(parseInt(s),l)),e.props.dispatch(Y5(!1)),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(8),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 21:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleNewImageDesc=function(t){var n=t.target.value;e.setState({newImageDesc:n})},e.onDragOver=function(e){e.preventDefault()},e.handleDrop=function(t){t.preventDefault(),e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files)},e.inputRef=p.createRef(),e.onFileInputChange=function(t){t.target.files.length>0&&e.setState({loading:!0,selectedImage:t.target.files},(function(){e.uploadPhotos(e.state.selectedImage)}))},e.uploadPhotos=function(t){var n=["png","jpeg","jpg"],r=Array.from(t),o=Object(Dm.a)(e.state.uploadedImage);r.length>0&&r.forEach((function(t,r){var i=(t.name.split(".").pop()||"").toLowerCase();if(n.includes(i)){var c=new FormData;c.append("file",t),[].push(VV.uploadPhoto(c).then((function(t){var n=e.props.details.data.assessment_report_id,a=e.props.details.data.id,i={photo_id:t.data.id,desired_width:t.data.width,position:r};dH.assessmentReportAttachPhotos(a,n,i).then((function(n){o.push({imageId:n.id,position:n.position,photo_id:n.photo_id,imageUrl:t.data.url,description:e.state.newImageDesc,rotateDegrees:0}),e.setState({uploadedImage:o,loading:!1,newImageDesc:""})}))})))}else Qm(Vm.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",i]})," is not supported!"]}))}))},e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.details,n=Object(Dm.a)(this.state.uploadedImage),t&&(t.data.items.length>0&&t.data.items.map((function(e){n.push({imageId:e.id,position:e.position,photo_id:e.photo_id,imageUrl:e.photo.url,description:e.caption,rotateDegrees:0})})),this.setState({uploadedImage:n}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.props.details;if(e.details!==t){var n=Object(Dm.a)(this.state.uploadedImage);t&&(t.data.items.length>0&&t.data.items.map((function(e){n.push({imageId:e.id,position:e.position,photo_id:e.photo_id,imageUrl:e.photo.url,description:e.caption,rotateDegrees:0})})),this.setState({uploadedImage:n}))}}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(wN,{children:Object(a.jsxs)(CN,{children:[this.state.loading&&Object(a.jsx)(av,{zIndex:999,size:40}),Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(jje,{children:"Photos"}),Object(a.jsxs)("div",{className:"image-div",style:{display:"flex",flexWrap:"wrap",marginLeft:"-15px"},children:[Object(a.jsx)("input",{type:"file",accept:"image/jpeg,image/png",hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef}),this.state.uploadedImage.length>0&&this.state.uploadedImage.map((function(t,n){return Object(a.jsxs)("div",{className:"grid-box2",children:[Object(a.jsx)("div",{children:Object(a.jsx)(pje,{width:"100%",children:Object(a.jsx)(mje,{style:{position:"absolute"},children:Object(a.jsx)("img",{src:"".concat(t.imageUrl,"?").concat(Math.random()),className:"object-fit"})})})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(hje,{width:"85%",className:"img-desc",type:"text",value:null!==t.description?t.description:"",onChange:function(n){return e.handleDescriptionChange(n,t)},onBlur:function(n){return e.handleOnBlurDescriptionChange(n,t)},placeholder:"Add photo description here..."}),e.state.uploadedImage.length>0?Object(a.jsxs)("div",{className:"print-hide",style:{display:"inline-block"},children:[Object(a.jsx)(TN,{style:{marginRight:"5px"},name:Ef.Rotate,onClick:function(n){return e.handleRotate(n,t.photo_id)}}),Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(n){return e.handleDelete(n,t)}})]}):null]})]},n)})),Object(a.jsxs)("div",{className:"grid-box2 img-grid-box",children:[Object(a.jsx)(pje,{width:(this.state.fullImage,"100%"),onClick:this.onUploadLinkClick,onDragOver:this.onDragOver,onDrop:this.handleDrop,children:Object(a.jsxs)(fje,{children:[Object(a.jsx)(IN,{name:Ef.Photos}),Object(a.jsx)(bje,{children:"Click to add photo"})]})}),Object(a.jsx)("div",{className:"full-grid",children:Object(a.jsx)(hje,{width:!0===this.state.fullImage?"90%":"40%",type:"text",className:"img-desc",value:this.state.newImageDesc,onChange:this.handleNewImageDesc,placeholder:"Add photo description here..."})})]})]})]})})]})}),Object(a.jsx)(oje,{id:this.props.id,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.props.details})]})}}]),n}(p.PureComponent),Oje=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(vje);function gje(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-size: 18px;\n"]);return gje=function(){return e},e}function xje(){var e=Object(f.a)(["\n  padding-left: 12px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 18px;\n  text-align: right;\n  padding-right: 50px;\n  width: 16%;\n  :hover {\n    background-color: "," !important;\n  }\n"]);return xje=function(){return e},e}function yje(){var e=Object(f.a)(["\n  padding-left: 12px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 18px;\n  :hover {\n    background-color: "," !important;\n  }\n"]);return yje=function(){return e},e}function wje(){var e=Object(f.a)(["\n  padding-left: 12px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 18px;\n  text-align: right;\n  padding-right: 50px;\n  width: 16%;\n"]);return wje=function(){return e},e}function _je(){var e=Object(f.a)(["\n  padding-left: 12px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 18px;\n"]);return _je=function(){return e},e}function kje(){var e=Object(f.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  text-align: right;\n  :hover {\n    background-color: "," !important;\n  }\n"]);return kje=function(){return e},e}function Sje(){var e=Object(f.a)(["\n  :hover {\n    background-color: ",";\n  }\n  border: 1px solid ",";\n"]);return Sje=function(){return e},e}function Cje(){var e=Object(f.a)(["\n  width: 95%;\n  border: 1px solid ",";\n"]);return Cje=function(){return e},e}var Nje=x.default.table(Cje(),y.gray2),Eje=x.default.tr(Sje(),y.gray1,y.gray2),Aje=x.default.tr(kje(),y.gray1,y.gray2,y.gray1),Tje=x.default.td(_je()),Ije=x.default.td(wje()),Rje=x.default.td(yje(),y.gray1),Dje=x.default.td(xje(),y.gray1),Mje=x.default.h4(gje()),Pje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={openSetting:!1,showOnlyTotal:!1,showRows:!0,hover:!1,itemSelected:[],subTotal:0,calculatedTax:0,total:0},e.getTotal=function(){return(e.state.subTotal+12.21).toFixed(2)},e.getSubTotal=function(){var t=e.state.itemSelected,n=[];t&&t.length>0&&t.map((function(e){""!==e.quantity&&""!==e.unit_cost&&n.push(e.quantity*e.unit_cost)}));var r=n.reduce((function(e,t){return e+t}),0);return e.setState({subTotal:r}),r.toFixed(2)},e.renderBodyRows=function(){var t=e.state.itemSelected;return t.length>0&&t.map((function(e){return Object(a.jsxs)(Eje,{className:"tr-hover",id:e.id,children:[Object(a.jsx)(Tje,{children:e.description}),Object(a.jsx)(Ije,{children:(e.unit_cost*e.quantity).toFixed(2)})]},e.id)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.reportId;this.props.dispatch(H5(parseInt(e)))}},{key:"componentDidUpdate",value:function(e){if(e.costListRes!==this.props.costListRes&&this.props.costListRes.data.costListRes){var t=this.props.costListRes.data.costListRes;t&&t.items&&this.setState({itemSelected:t.items,subTotal:t.subTotal,calculatedTax:t.tax,total:t.total})}}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Mje,{children:"Cost"}),Object(a.jsx)(Nje,{children:Object(a.jsxs)("tbody",{children:[this.props.showRows&&this.renderBodyRows(),Object(a.jsxs)(Aje,{children:[Object(a.jsx)(Rje,{children:"Total(ex. tax):"}),Object(a.jsxs)(Dje,{children:["$ ",this.state.subTotal||0]})]},"sub-total"),Object(a.jsxs)(Aje,{children:[Object(a.jsx)(Rje,{children:"GST:"}),Object(a.jsxs)(Dje,{children:["$ ",this.state.calculatedTax||0]})]},"gst"),Object(a.jsxs)(Aje,{children:[Object(a.jsx)(Rje,{children:"Total:"}),Object(a.jsxs)(Dje,{children:["$ ",this.state.total||0]})]},"total")]})})]})})})})})}}]),n}(p.PureComponent),Lje=Object(LO.compose)(v.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,costListRes:e.document}})))(Pje),Fje=n(1057),Uje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={items:[],hover:!1,showOnlyTotal:!1,showRows:!0,errorReportName:"",assessmentReport:{},hoverHeading:!1,hoverSubHeading:!1,hoverText:!1,hoverBullet:!1,hoverNumber:!1,hoverImage:!1,hoverPhoto:!1,hoverBreak:!1,hoverSpacer:!1},e.onMouseEnter=function(t){var n=Object(Dm.a)(e.state.items);n.length>0&&n.map((function(e){e.id===t.id&&(e.hover=!0)})),e.setState({items:n})},e.onMouseLeave=function(t){var n=Object(Dm.a)(e.state.items);n.length>0&&n.map((function(e){e.id===t.id&&(e.hover=!1)})),e.setState({items:n})},e.handleModal=function(t){var n=Object(Dm.a)(e.state.items);n.map((function(e){e.id===t&&(e.showModal=!e.showModal)})),e.setState({items:n},(function(){e.props.updatedList(e.state.items)}))},e.handleDeleteSection=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(Sw("Confirm","Are you sure you want to remove this section? You will not be able to restore any data you have entered."));case 3:if(!t.sent){t.next=19;break}return t.prev=5,e.props.dispatch(Y5(!0)),i=n.data.id,c=n.data.assessment_report_id,t.next=11,dH.assessmentReportSectionDelete(c,i);case 11:e.props.dispatch(G5(parseInt(o),c)),e.props.dispatch(Y5(!1)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(5),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 19:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e.getRestMenuItems=function(){var t=[];return t.push({name:"Itemised",onClick:e.handleShowRow}),t.push({name:"Total amount only",onClick:e.handleShowOnlyTotal}),2===t.length&&t.splice(1,0,{type:"divider"}),t},e.handleShowRow=function(){e.setState({showRows:!0})},e.handleShowOnlyTotal=function(){e.setState({showOnlyTotal:!0,showRows:!1})},e.handleDuplicateSection=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.props.dispatch(Y5(!0)),r=n.data.id,a=n.data.assessment_report_id,t.next=6,dH.assessmentReportSectionDuplicate(a,r);case 6:e.props.dispatch(G5(r,a)),e.props.dispatch(Y5(!1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({items:this.props.list})}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.list!==this.props.list&&this.setState({items:this.props.list}),e.arReport.data.arReport!==this.props.arReport.data.arReport&&this.props.arReport.data.arReport){var n=this.props.arReport.data;this.setState({assessmentReport:n.arReport},(function(){var e=t.state.assessmentReport;e&&(null===e.heading?t.setState({reportHeading:"Assessment Report"}):t.setState({reportHeading:e.heading}),null===e.subheading?t.setState({reportSubHeading:"SubHeading - Assessment Report"}):t.setState({reportSubHeading:e.subheading}),t.setState({items:[]},(function(){var n=Object(Dm.a)(t.state.items);e.sections&&e.sections.map((function(e){$je.map((function(t,r){e.type===t.content&&n.push({id:Object(Fje.a)(),label:t.content,icon:t.icon,content:t.content,showModal:!1,data:e,hover:!1})}))})),t.setState({items:n})})))}))}}},{key:"render",value:function(){var e=this,t=this.getRestMenuItems();return Object(a.jsx)(wde.Flex,{justifyContent:"space-between",style:{height:"100%"},children:Object(a.jsx)(wde.Flex,{style:{width:"100%",height:"100%"},flexDirection:"column",children:Object(a.jsx)(hde.c,{droppableId:"droppable",children:function(n,r){return Object(a.jsxs)("div",Object(c.a)(Object(c.a)({ref:n.innerRef},n.droppableProps),{},{style:(o=r.isDraggingOver,{background:o?"lightgray":"white",padding:8,width:"100%",height:"100%",minHeight:"100vh",pointerEvents:o?"none":""}),children:[e.state.items.map((function(n,r){return Object(a.jsx)(hde.b,{draggableId:n.id,index:r,children:function(r,o){return Object(a.jsx)("div",Object(c.a)(Object(c.a)({ref:r.innerRef},r.draggableProps),{},{children:Object(a.jsxs)("div",{children:["heading"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(tpe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"subheading"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Ipe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"text"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(hhe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"bullet_list"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(tme,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"number_list"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Dbe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"page_break"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div break-page",children:[Object(a.jsx)("div",{className:"break-page",style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(rme,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)}},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"spacer"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(ome,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)}},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"costs"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Lje,{id:n.id,type:n.content,showModal:n.showModal,showOnlyTotal:e.state.showOnlyTotal,showRows:e.state.showRows,handleModal:function(){return e.handleModal(n.id)}},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{className:"dropdown-icon",children:Object(a.jsx)(yw,{items:t,noMargin:!0,direction:"right",iconName:Ef.Setting})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"image"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Zme,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"photos"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Oje,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},r.dragHandleProps),{},{children:Object(a.jsx)(EN,{name:Ef.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(EN,{name:Ef.Add,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(AN,{name:Ef.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(TN,{name:Ef.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]})]})}))}},n.id)})),n.placeholder]}));var o}})})})}}]),n}(p.PureComponent),Vje=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(Uje),Bje=n.p+"static/media/steamatic_logo.e9103918.png";function Jje(){var e=Object(f.a)(["\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545;\n  display: block;\n  margin-left: 30px;\n"]);return Jje=function(){return e},e}function zje(){var e=Object(f.a)(["\n  border: 0px;\n  margin: 30px 30px 0px 30px;\n  width: 80%;\n  border-bottom: 1px solid lightgray;\n  font-size: 2rem;\n"]);return zje=function(){return e},e}function qje(){var e=Object(f.a)(["\n  @media print {\n    width: auto;\n    height: auto !important;\n    overflow-y: visible;\n  }\n"]);return qje=function(){return e},e}function Wje(){var e=Object(f.a)(["\n  background-color: #f9fafa;\n  overflow-y: auto;\n"]);return Wje=function(){return e},e}var Hje={},Gje=x.default.div(Wje()),Yje=x.default.div(qje()),Qje=x.default.input(zje()),Kje=x.default.span(Jje()),Zje=function(e,t,n){var r=e,a=r.splice(t,1),o=Object(w.a)(a,1)[0];return r.splice(n,0,o),r},Xje=function(e,t,n,r){var a=e,o=t,i=a.splice(n.index,1),c=Object(w.a)(i,1)[0];o.splice(r.index,0,c);var s={};return s[n.droppableId]=a,s[r.droppableId]=o,s},$je=[{id:"0",label:"Heading",icon:Ef.Heading,content:"heading",showModal:!0,data:{},hover:!1},{id:"1",label:"Sub-heading",icon:Ef.Heading,content:"subheading",showModal:!0,data:{},hover:!1},{id:"2",label:"Text",icon:Ef.Text,content:"text",showModal:!0,data:{},hover:!1},{id:"3",label:"Bullet list",icon:Ef.BulletList,content:"bullet_list",showModal:!0,showDeleteModal:!1,data:{},hover:!1},{id:"4",label:"Numeric list",icon:Ef.NumberList,content:"number_list",showModal:!1,data:{},hover:!1},{id:"5",label:"Image",icon:Ef.Images,content:"image",showModal:!0,data:{},hover:!1},{id:"6",label:"Photos",icon:Ef.Photos,content:"photos",showModal:!0,data:{},hover:!1},{id:"7",label:"spacer",icon:Ef.Spacer,content:"spacer",showModal:!0,data:{},hover:!1},{id:"8",label:"Page break",icon:Ef.Spacer,content:"page_break",showModal:!0,data:{},hover:!1},{id:"9",label:"Costings",icon:Ef.Costing,content:"costs",showModal:!0,data:{},hover:!1}],eve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hideRates:!0,hideMultiselect:!1,showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1,reportHeading:"",errorReportHeading:"",reportSubHeading:"",errorReportSubHeading:"",droppable:[],list:[],assessmentReport:{},hoverHeading:!1,hoverSubHeading:!1,oldList:[]},e.handleModalForCopyToJob=function(e){},e.handleCopyToLink=function(e){},e.onDragEnd=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.match.params,a=r.id,o=r.reportId,i=n.source,c=n.destination){t.next=4;break}return t.abrupt("return");case 4:t.t0=i.droppableId,t.next=t.t0===c.droppableId?7:"ITEMS"===t.t0?26:42;break;case 7:return s=[],s=Zje(e.state.list,i.index,c.index),e.setState({list:s}),l=[],s.map((function(e,t){l.push({assessment_report_section_id:e.data.id,position:t})})),t.prev=12,e.props.dispatch(Y5(!0)),t.next=16,dH.assessmentReportSectionPositionUpdate(parseInt(o),l);case 16:e.setState({list:[]}),e.props.dispatch(G5(parseInt(a),parseInt(o))),e.props.dispatch(Y5(!1)),t.next=25;break;case 21:t.prev=21,t.t1=t.catch(12),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 25:return t.abrupt("break",44);case 26:return u=$je[i.index],t.prev=28,e.props.dispatch(Y5(!0)),d={position:c.index,type:u.content,heading:"Enter Heading here...",heading_style:"regular",heading_color:0,text:""},t.next=33,dH.assessmentReportSectionCreate(parseInt(o),d);case 33:e.props.dispatch(G5(parseInt(a),parseInt(o))),e.props.dispatch(Y5(!1)),t.next=41;break;case 37:t.prev=37,t.t2=t.catch(28),Qm(Vm.Danger,"Server Error"),e.props.dispatch(Y5(!1));case 41:return t.abrupt("break",44);case 42:return e.setState(Xje(e.state.list,e.state.list,i,c)),t.abrupt("break",44);case 44:case"end":return t.stop()}}),t,null,[[12,21],[28,37]])})));return function(e){return t.apply(this,arguments)}}(),e.handleListUpdate=function(t){e.setState({list:t})},e.onMouseEnter=function(t){"heading"===t?e.setState({hoverHeading:!0}):"subHeading"===t&&e.setState({hoverSubHeading:!0})},e.handleBlurReportHeading=function(t){var n=t.target,r=n.value,a=n.name;e.setState(Object(k.a)({},a,r));var o=e.state,i=o.reportHeading,c=o.reportSubHeading;"reportHeading"===a?""===i||void 0===i||null===i?e.setState({errorReportHeading:"This field is required"}):(e.setState({errorReportHeading:""}),e.setState({hoverHeading:!1}),e.updateHeadingSubHeading()):"reportSubHeading"===a&&(""===c||void 0===c||null===c?e.setState({errorReportSubHeading:"This field is required"}):(e.setState({errorReportSubHeading:""}),e.setState({hoverSubHeading:!1}),e.updateHeadingSubHeading()))},e.updateHeadingSubHeading=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.match.params,r=n.id,a=n.reportId,o=e.state,i=o.reportHeading,c=o.reportSubHeading,!r||!a){t.next=16;break}return t.prev=3,e.props.dispatch(Y5(!0)),s={subheading:c,heading:i},t.next=8,dH.assessmentReportHeading(parseInt(r),parseInt(a),s);case 8:e.props.dispatch(G5(parseInt(r),parseInt(a))),e.props.dispatch(Y5(!1)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),Qm(Vm.Danger,"This status can't be applied"),e.props.dispatch(Y5(!1));case 16:case"end":return t.stop()}}),t,null,[[3,12]])}))),e.handleReportHeading=function(t){var n=t.target,r=n.value,a=n.name;e.setState(Object(k.a)({},a,r))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params,t=e.id,n=e.reportId;ly.findById(t).then((function(e){Hje=e})),this.props.dispatch(Y5(!0)),this.props.dispatch(G5(parseInt(t),parseInt(n)))}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.arReport.data.arReport!==this.props.arReport.data.arReport&&this.props.arReport.data.arReport){var n=this.props.arReport.data;this.props.dispatch(Y5(!1)),this.setState({assessmentReport:n.arReport},(function(){var e=t.state.assessmentReport;if(e){null===e.heading?t.setState({reportHeading:"Assessment Report"}):t.setState({reportHeading:e.heading}),null===e.subheading?t.setState({reportSubHeading:"SubHeading - Assessment Report"}):t.setState({reportSubHeading:e.subheading});var n=Object(Dm.a)(t.state.list);e.sections&&e.sections.map((function(e){$je.map((function(t,r){e.type===t.content&&n.push({id:Object(Fje.a)(),label:t.content,icon:t.icon,content:t.content,showModal:!1,showDeleteModal:!1,data:e,hover:!1})}))})),t.setState({list:n})}}))}}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){var e=this,t=this.props.match.params,n=t.id,r=t.reportId;return[{path:"/usage-and-actuals/".concat(n,"/buildCosting/").concat(r),label:"Build Costings",icon:Ef.CashFileIcon,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildCosting/").concat(r)),type:"costing"},{path:"/usage-and-actuals/".concat(n,"/buildDocument/").concat(r),label:"Build Document",icon:Ef.FileEdit,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildDocument/").concat(r)),type:"costing"}].map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"getItems",value:function(){var e=this;return $je.map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"render",value:function(){var e=this,t=Hje,n=t?ly.getJobAddress(t):"",r=t&&ly.getJobName(t);r&&(n+=" | ".concat(r));var o=this.state,i=o.reportHeading,c=o.errorReportHeading,s=o.reportSubHeading,l=o.errorReportSubHeading,u=o.assessmentReport;return Object(a.jsxs)(gN,{className:"d-flex flex-column",children:[!0===this.props.isArLoad.data.isArLoad&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(Cue,{jobTitle:n,modalForCopyToJOB:this.handleModalForCopyToJob,modalForCopyLink:this.handleCopyToLink}),Object(a.jsx)(Gje,{children:Object(a.jsx)(hde.a,{onDragEnd:this.onDragEnd,children:Object(a.jsxs)(Yje,{className:"d-flex",children:[Object(a.jsxs)(Im,{noExpand:!0,children:[this.getMenuItems().map((function(e){return Object(a.jsx)(ym,{item:e},e.path)})),Object(a.jsx)(Jk,{children:"ITEMS"}),this.getItems().map((function(e,t){return Object(a.jsx)(yde,{item:e},t)}))]}),Object(a.jsxs)("div",{className:"w-100 h-100",style:{backgroundColor:y.gray7},children:[Object(a.jsxs)("div",{className:"top-banner-hidden",children:[Object(a.jsx)("div",{className:"logo-div",children:Object(a.jsx)("img",{src:Bje,className:"logo-img"})}),Object(a.jsxs)("div",{className:"details-banner",children:[Object(a.jsx)("h2",{className:"thin-title",children:null!==u.heading?u.heading:"Assessment Report"}),Object(a.jsxs)("div",{className:"inner-details-banner",children:[Object(a.jsxs)("p",{className:"font-size-16 ng-binding",children:["Date: ",u.date]}),Object(a.jsxs)("p",{className:"font-size-16 ng-binding",children:["Claim No. ",u.job&&u.job.claim_number]}),Object(a.jsxs)("p",{className:"font-size-16 ng-binding",children:["Steamatic Ref. ",u.job&&u.job.reference_number]})]})]})]}),Object(a.jsxs)(yN,{children:[Object(a.jsxs)(wN,{children:[Object(a.jsx)(NN,{children:this.state.hoverHeading?Object(a.jsxs)("div",{children:[Object(a.jsx)(Qje,{type:"text",name:"reportHeading",value:i,onChange:this.handleReportHeading,onBlur:this.handleBlurReportHeading}),Object(a.jsx)(Kje,{children:c})," "]}):Object(a.jsx)(_N,{onClick:function(){return e.onMouseEnter("heading")},className:"assessment-heading mt-4",children:i||"Assessment Report"})}),Object(a.jsx)(NN,{children:this.state.hoverSubHeading?Object(a.jsxs)("div",{children:[Object(a.jsx)(Qje,{type:"text",name:"reportSubHeading",value:s,onChange:this.handleReportHeading,onBlur:this.handleBlurReportHeading}),Object(a.jsx)(Kje,{children:l})]}):Object(a.jsx)(kN,{onClick:function(){return e.onMouseEnter("subHeading")},className:"assessment-heading",children:this.state.assessmentReport.subheading||"Assessment Report - Sub Heading"})})]}),Object(a.jsx)(SN,{children:Object(a.jsx)(Vje,{list:this.state.list,updatedList:this.handleListUpdate})})]})]})]})})})]})}}]),n}(p.PureComponent),tve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters,isArLoad:e.document,arReport:e.document}})))(eve);function nve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return nve=function(){return e},e}var rve=x.default.h4(nve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),ave=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(rve,{color:"#000000",type:"bold",children:"Enter your text here..."})})})})})})})}}]),n}(p.PureComponent),ove=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(ave);function ive(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return ive=function(){return e},e}var cve=x.default.h4(ive(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),sve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(cve,{color:"#000000",type:"heading",children:"Enter your text here..."})})})})})})})}}]),n}(p.PureComponent),lve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(sve);function uve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return uve=function(){return e},e}var dve=x.default.h4(uve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),pve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(dve,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsx)("p",{children:"No Text Added"})]})})})})})})}}]),n}(p.PureComponent),hve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(pve);function bve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return bve=function(){return e},e}var fve=x.default.h4(bve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),mve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(fve,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:"Bullet List"})})]})})})})})})}}]),n}(p.PureComponent),jve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(mve);function vve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return vve=function(){return e},e}var Ove=x.default.h4(vve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),gve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Ove,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsx)("ol",{children:Object(a.jsx)("li",{children:"Number List"})})]})})})})})})}}]),n}(p.PureComponent),xve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(gve),yve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{className:"hr-lines",style:{flex:"0 0 calc(100% - 30px)"},children:Object(a.jsx)("hr",{})})})})})})}}]),n}(p.PureComponent),wve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(yve),_ve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{className:"break-page",style:{flex:1},children:Object(a.jsx)("div",{className:"hover-content-overlay",children:"\u2014 \u2014 PAGE BREAK \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014"})})})})})}}]),n}(p.PureComponent),kve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(_ve);function Sve(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Sve=function(){return e},e}function Cve(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return Cve=function(){return e},e}function Nve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return Nve=function(){return e},e}var Eve=x.default.h4(Nve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ave=x.default.div(Cve(),(function(e){return e.width})),Tve=x.default.div(Sve()),Ive=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Eve,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsxs)("div",{className:"image-div",children:[Object(a.jsx)(Ave,{width:"90%",children:Object(a.jsx)(Tve,{style:{position:"absolute"},children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg",style:{objectFit:"contain"}})})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Add photo description here.."})})]})]})})})})})})}}]),n}(p.PureComponent),Rve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(Ive);function Dve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-size: 18px;\n"]);return Dve=function(){return e},e}function Mve(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Mve=function(){return e},e}function Pve(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return Pve=function(){return e},e}var Lve=x.default.div(Pve(),(function(e){return e.width})),Fve=x.default.div(Mve()),Uve=x.default.h4(Dve()),Vve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(wN,{children:Object(a.jsx)(CN,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Uve,{children:"Photos"}),Object(a.jsxs)("div",{className:"image-div",style:{display:"flex",flexWrap:"wrap",marginLeft:"-15px"},children:[Object(a.jsxs)("div",{className:"grid-box2",children:[Object(a.jsx)("div",{children:Object(a.jsx)(Lve,{width:"100%",children:Object(a.jsx)(Fve,{style:{transform:"rotateZ(".concat(90,"deg)"),position:"absolute"},children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg",className:"object-fit"})})})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Add photo description here.."})})]}),Object(a.jsxs)("div",{className:"grid-box2",children:[Object(a.jsx)("div",{children:Object(a.jsx)(Lve,{width:"100%",children:Object(a.jsx)(Fve,{style:{transform:"rotateZ(".concat(0,"deg)"),position:"absolute"},children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg",className:"object-fit"})})})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Add photo description here.."})})]})]})]})})})})})})}}]),n}(p.PureComponent),Bve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(Vve),Jve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(wde.Flex,{justifyContent:"space-between",style:{height:"100%"},children:Object(a.jsxs)(wde.Flex,{style:{width:"100%",height:"100%"},flexDirection:"column",children:[Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(kve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(ove,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(lve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(hve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(jve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(xve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(wve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(kve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Rve,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Bve,{})})})]})})})}}]),n}(p.PureComponent),zve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(Jve),qve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(gN,{className:"d-flex flex-column",children:Object(a.jsx)("div",{className:"w-100 h-100",style:{backgroundColor:y.gray7},children:Object(a.jsx)("div",{className:"container-center",children:Object(a.jsx)("div",{className:"container-width",children:Object(a.jsxs)(yN,{children:[Object(a.jsx)("div",{className:"page-break-after",children:Object(a.jsxs)("div",{className:"top-banner-hidden",children:[Object(a.jsx)("div",{className:"logo-div",children:Object(a.jsx)("img",{src:Bje,className:"logo-img"})}),Object(a.jsxs)("div",{className:"details-banner",children:[Object(a.jsx)("h2",{className:"thin-title",children:"Water Report"}),Object(a.jsxs)("h3",{className:"thin",children:["For",Object(a.jsx)("span",{className:"ng-binding",children:" Sedgwick"}),Object(a.jsx)("span",{className:"ng-binding ng-hide",children:" AAI Limited"})]}),Object(a.jsxs)("div",{className:"inner-details-banner",children:[Object(a.jsx)("p",{className:"font-size-16 ng-binding",children:"Date: 24 October 2019"}),Object(a.jsx)("p",{className:"font-size-16 ng-binding",children:"Claim No. E005366953"}),Object(a.jsx)("p",{className:"font-size-16 ng-binding",children:"Steamatic Ref. 1610071"})]})]})]})}),Object(a.jsx)("div",{className:"break-page",children:" "}),Object(a.jsx)(wN,{children:Object(a.jsxs)(NN,{children:[Object(a.jsx)(_N,{className:"assessment-heading mt-4",children:"Assessment Report"}),Object(a.jsx)(kN,{className:"assessment-heading",children:"Assessment Report - Sub Heading"}),Object(a.jsx)(SN,{children:Object(a.jsx)(zve,{})})]})})]})})})})})})}}]),n}(p.PureComponent),Wve=Object(LO.compose)(v.g,Object(b.b)((function(e){return{arReport:e.document}})))(qve);function Hve(){var e=Object(f.a)(["\n  border-bottom: 2px solid ",";\n  padding-bottom: 10px;\n"]);return Hve=function(){return e},e}function Gve(){var e=Object(f.a)(["\n  :not(:last-child){\n    margin-bottom: 20px;\n  }\n"]);return Gve=function(){return e},e}var Yve=x.default.div(Gve()),Qve=x.default.div(Hve(),y.gray2),Kve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.hazard;return Object(a.jsx)(Yve,{children:Object(a.jsxs)(QG.b,{children:[Object(a.jsx)(QG.d,{color:"red lighten-1",children:e.name}),Object(a.jsxs)(QG.c,{children:[Object(a.jsxs)(Qve,{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Risk"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)("strong",{children:"Control"})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Responsibility"})})]}),Object(a.jsxs)("div",{className:"row m-0 pt-2",children:[Object(a.jsx)("div",{className:"col-3",children:e.risks.join(", ")}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)("ul",{className:"pl-3",children:e.controls.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})}),Object(a.jsx)("div",{className:"col-3",children:e.responsibilities.join(", ")})]})]})]})})}}]),n}(p.PureComponent),Zve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:this.props.hazards.map((function(e,t){return Object(a.jsx)(Kve,{hazard:e},t)}))})}}]),n}(p.PureComponent);function Xve(){var e=Object(f.a)(["\n  img{\n    max-width: 250px;\n    max-height: 100px;\n  }\n"]);return Xve=function(){return e},e}var $ve=x.default.div(Xve()),eOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.signature,t=e.dataURL,n=e.signedBy,r=e.signedAt;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{className:"mr-3",children:"Name:"})," ",n.name]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{className:"mr-3",children:"Date:"})," ",r.format(Uj)]}),Object(a.jsx)("div",{children:Object(a.jsx)("strong",{className:"mr-3",children:"Signature:"})}),Object(a.jsx)($ve,{children:Object(a.jsx)("img",{src:t,alt:"Signature"})})]})}}]),n}(p.PureComponent),tOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadAssessment=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,assessment:void 0}),t.prev=1,t.next=4,ly.getRiskAssessmentDetail(e.props.job.id,e.props.id);case 4:n=t.sent,e.setState({assessment:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({assessment:null});case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadAssessment()}},{key:"componentDidUpdate",value:function(e){this.props.active&&(e.id!==this.props.id||void 0===this.state.assessment&&!this.state.loading)&&this.loadAssessment()}},{key:"render",value:function(){var e,t,n,r,o,i,c=this.state,s=c.loading,l=c.assessment,u=this.props,d=u.id,p=u.job,h=u.contacts;return Object(a.jsxs)("div",{children:[s&&Object(a.jsx)(av,{size:40}),null===l&&Object(a.jsx)(a.Fragment,{children:"No risk assessment found"}),l&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"print-only",children:[Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("img",{src:Bje,alt:"Steamatic Logo",className:"logo-img",height:60})}),Object(a.jsx)("div",{className:"text-danger text-center",children:"Delivering Solutions, Saving Property... Restoring Lives!"})]}),Object(a.jsx)("div",{className:"my-3 text-center",children:Object(a.jsx)("h2",{className:"text-uppercase",children:Object(a.jsx)("strong",{children:"Risk Assessment"})})})]}),Object(a.jsxs)("div",{className:"mb-3 print-border print-table",children:[Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Company:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:Jv.getContactName(p.company_location)||"N/A"})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Address:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:null===(e=p.company_location)||void 0===e||null===(t=e.addresses)||void 0===t?void 0:t[0].full_address})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Phone Number:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:(null===(n=p.company_location)||void 0===n?void 0:n.business_phone)||(null===(r=p.company_location)||void 0===r?void 0:r.mobile_phone)})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Risk Assessment Date:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:l.created_at.format(Uj)})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Risk Assessment ID:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:l.uid})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Inquiry Number:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:ly.getJobName(p)})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Customer Name:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:Jv.getContactName(ly.extractContact(Tj.CUSTOMER,h))})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Site Address:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:null===(o=p.site_address)||void 0===o?void 0:o.full_address})})]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(Zve,{hazards:l.hazards}),Object(a.jsx)("hr",{className:"my-5"}),Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Risk Assessment Completed By"})}),Object(a.jsx)(eOe,{signature:l.signature}),l.teamSignature.length&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{className:"my-5"}),Object(a.jsxs)("div",{className:"row",children:[(i=j.a.filter(l.teamSignature,{type:"employee"}),i.length?Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Signed By Steamatic Employees"})}),i.map((function(e,t){return Object(a.jsx)(eOe,{signature:e},t)}))]}):null),function(e){return e.length?Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Signed By Sub Contractor"})}),e.map((function(e,t){return Object(a.jsx)(eOe,{signature:e},t)}))]}):null}(j.a.filter(l.teamSignature,{type:"contractor"}))]})]})]})]})]},d)}}]),n}(p.PureComponent);function nOe(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return nOe=function(){return e},e}var rOe=x.default.div(nOe()),aOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.data||[],scrollable:"none"}},e.lastSelectedIndex=0,e.selectionChange=function(t){var n,r,a=e.state.gridState.data.find((function(e){return e===t.dataItem}));a&&(a.selected=!a.selected,e.setState({gridState:Object(c.a)({},e.state.gridState)}),null===(n=(r=e.props).onSelectionChange)||void 0===n||n.call(r,a,a.selected))},e.headerSelectionChange=function(t){var n,r,a=t.syntheticEvent.target.checked;e.state.gridState.data.forEach((function(e){e.selected=a})),e.setState({gridState:Object(c.a)({},e.state.gridState)}),null===(n=(r=e.props).onSelectionChange)||void 0===n||n.call(r,Object(Dm.a)(e.state.gridState.data),a)},e.viewDetail=function(t){return function(){e.props.history.push(e.props.pageUrl+"/view/"+t.id)}},e.ID=function(e){return Object(a.jsx)(oOe,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsxs)(a.Fragment,{children:["RA-",t.id]})}}))},e.Date=function(e){return Object(a.jsx)(oOe,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data,n=j.a.get(t,"created_at");return Object(a.jsx)(a.Fragment,{children:n?qf()(n).format(Uj):""})}}))},e.Actions=function(t){return Object(a.jsx)(oOe,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data;return Object(a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.viewDetail(n),children:"View Details"})})}}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){if(this.props.data!==this.state.gridState.data){var e=this.state.gridState;e.data=this.props.data,this.setState({gridState:Object(c.a)({},e)})}}},{key:"render",value:function(){return Object(a.jsx)(rOe,{className:"h-100",children:Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{onSelectionChange:this.selectionChange,onRowClick:this.selectionChange,onHeaderSelectionChange:this.headerSelectionChange,selectedField:this.state.gridState.data.length?"selected":void 0,children:[!!this.state.gridState.data.length&&Object(a.jsx)(rw.b,{field:"selected",width:"50px",headerSelectionValue:-1===this.state.gridState.data.findIndex((function(e){return!e.selected}))}),Object(a.jsx)(rw.b,{field:"created_at",title:"Completed At",width:"250px",cell:this.Date}),Object(a.jsx)(rw.b,{field:"id",title:"Risk Assessment Id",cell:this.ID}),Object(a.jsx)(rw.b,{field:"user.full_name",title:"Completed By"}),Object(a.jsx)(rw.b,{width:"110px",cell:this.Actions,sortable:!1})]}))})}}]),n}(p.PureComponent);function oOe(e){var t=e.Component,n=e.dataItem,r=e.field,o=e.cellProps;return Object(a.jsx)("td",Object(c.a)(Object(c.a)({},o),{},{children:Object(a.jsx)(t,{data:n,value:r?j.a.get(n,r):void 0})}))}var iOe=Object(LO.compose)(Object(b.b)(),v.g)(aOe),cOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selected:[]},e.loadRiskAssessments=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,ly.getRiskAssessments(e.props.job.id);case 4:n=t.sent,e.setState({assessments:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({assessments:[]});case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e.selectionChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.state.selected,r?j.a.isArray(n)?i=n:i.push(n):j.a.isArray(n)?i=[]:i.splice(i.findIndex((function(e){return e.id===n.id})),1),e.setState({selected:i}),null===(a=(o=e.props).onSelectionChange)||void 0===a||a.call(o,Object(Dm.a)(i));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadRiskAssessments()}},{key:"componentDidUpdate",value:function(){this.props.active&&(this.state.assessments||this.state.loading||this.loadRiskAssessments())}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.assessments;return Object(a.jsxs)("div",{children:[t&&Object(a.jsx)(av,{size:40}),n&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(iOe,Object(c.a)(Object(c.a)({},this.props),{},{data:n,onSelectionChange:this.selectionChange}))})]})}}]),n}(p.PureComponent);function sOe(){var e=Object(f.a)(["\n  text-align: right;\n  background: ",";\n"]);return sOe=function(){return e},e}function lOe(){var e=Object(f.a)(["\n  border: 1px solid ",";\n"]);return lOe=function(){return e},e}var uOe=x.default.div(lOe(),y.gray2),dOe=x.default.div(sOe(),y.blue0),pOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ly.sendRiskAssessmentEmail(e.props.job.id,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sendEmail(ox(n));case 3:Qm(Vm.Success,"Email sent successfully"),e.gotoAssessmentsList(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.emailOptionLabel=function(e){var t=Jv.getContactName(e);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"trim mr-2",children:e.email}),Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"trim",children:"<"}),t,Object(a.jsx)("span",{className:"trim",children:">"})]})]}):(null===e||void 0===e?void 0:e.email)?e.email:jv(null===e||void 0===e?void 0:e.value)?void 0:e.value},e.emailOptionValue=function(e,t){return(null===e||void 0===e?void 0:e.email)?e.email:jv(null===e||void 0===e?void 0:e.value)||null===e||void 0===e?void 0:e.value},e.gotoAssessmentsList=function(){e.props.history.replace(e.props.pageUrl+"/prev")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props.initialValues.assessments)||void 0===e?void 0:e.length)||this.gotoAssessmentsList()}},{key:"render",value:function(){var e,t=this.props,n=t.contacts,r=t.initialValues.assessments,o=t.handleSubmit,i=t.submitting;return Object(a.jsxs)(a.Fragment,{children:[i&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{onSubmit:o(this.onSubmit),children:[Object(a.jsx)("div",{className:"",children:Object(a.jsxs)("div",{className:"row ml-0",children:[Object(a.jsx)("div",{className:"",children:Object(a.jsx)("label",{htmlFor:"",className:"m-0 pt-2",children:"To: "})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"to",placeholder:"Select...",validate:uv,component:UM,options:(null===n||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel})})]})}),Object(a.jsxs)("div",{className:"row ml-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"",children:Object(a.jsx)("label",{htmlFor:"",className:"m-0 pt-2",children:"Cc: "})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"cc",placeholder:"Select...",component:UM,options:(null===n||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel})})]})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"",children:Object(a.jsx)("label",{htmlFor:"",className:"m-0 pt-2",children:"Bcc: "})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"bcc",placeholder:"Select...",component:UM,options:(null===n||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel})})]})})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"d-flex text-info",children:[Object(a.jsx)("div",{className:"mr-2",children:"Attachments:"}),Object(a.jsx)("div",{className:"flex-grow-1",children:null===r||void 0===r?void 0:r.map((function(e){return Object(a.jsxs)("span",{className:"mr-1 badge badge-danger p-2",children:[Object(a.jsx)("span",{className:"fa fa-file-pdf"})," RA-",e.id,".PDF"]},e.id)}))})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(uOe,{children:[Object(a.jsx)(yv.a,{name:"body",placeholder:"Enter body here...",component:pA,initialValue:null===(e=this.props.initialValues)||void 0===e?void 0:e.body,color:y.blue0,onSave:this.sendEmail,validate:fv,disableAttachments:!0,disableMentionControl:!0,disableTemplatesControl:!0,hideCheckIcon:!0}),Object(a.jsx)(dOe,{children:Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:this.props.submitting,style:{borderRadius:0,height:"40px"},children:"Send Email"})})]})})]})]})}}]),n}(p.PureComponent),hOe=sv({},(function(e,t){var n,r,a,o,i,c;return t.to=j.a.some(null===(n=e.to)||void 0===n||null===(r=n.map)||void 0===r?void 0:r.call(n,(function(e){return null===e||void 0===e?void 0:e.email})),jv)?"Invalid e-mail addresses":void 0,t.cc=j.a.some(null===(a=e.cc)||void 0===a||null===(o=a.map)||void 0===o?void 0:o.call(a,(function(e){return null===e||void 0===e?void 0:e.email})),jv)?"Invalid e-mail addresses":void 0,t.bcc=j.a.some(null===(i=e.bcc)||void 0===i||null===(c=i.map)||void 0===c?void 0:c.call(i,(function(e){return null===e||void 0===e?void 0:e.email})),jv)?"Invalid e-mail addresses":void 0,t})),bOe=Object(LO.compose)(Object(Gj.a)({form:"RISK_ASSESSMENTEmail_FORM",validate:hOe}),v.g)(pOe),fOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,prevData:[],currentAssessment:null},e.pageUrl=e.props.match.path.replace(/([^:]+)[^.]+/,"$1").replace(/\/$/,"")+"/"+e.props.match.params.id+"/risk-assessment",e.gotoEmailView=function(){e.props.history.push(e.pageUrl+"/share",{assessments:e.state.selectedItems})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(QR(this.props.match.params.id)),this.props.dispatch(zP(this.props.match.params.id))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params.id;return Object(a.jsx)("div",{children:Object(a.jsx)(Uoe,{jobId:parseInt(e)})})}},{key:"renderContentPage",value:function(){var e,t=this,n=this.props.match.params.tab||"current",r=this.props.job.data,o=this.props.contacts.data;return Object(a.jsx)("div",{className:"h-100 pt-4",children:Object(a.jsxs)("div",{className:"d-flex flex-column h-100",children:[Object(a.jsx)("div",{className:"px-5 print-hide",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:"Risk Assessment"})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end",children:"prev"===n&&!!(null===(e=this.state.selectedItems)||void 0===e?void 0:e.length)&&Object(a.jsx)("button",{className:"btn btn-outline-primary",onClick:this.gotoEmailView,children:"Send Risk Assessments As PDF"})})]})}),Object(a.jsxs)("div",{className:"d-flex flex-column h-100 flex-grow-1",style:{overflow:"auto"},children:[Object(a.jsxs)(QG.i,{className:"nav-tabs mt-2 mx-5 print-hide",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{exact:!0,className:"nav-link",to:this.pageUrl,role:"tab",children:"Current"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:this.pageUrl+"/prev",role:"tab",children:"Previous"})}),"view"===n&&Object(a.jsx)(QG.j,{children:Object(a.jsx)("span",{className:"nav-link active",role:"tab",children:"Previous Version Detail"})}),"share"===n&&Object(a.jsx)(QG.j,{children:Object(a.jsx)("span",{className:"nav-link active",role:"tab",children:"Share"})})]}),Object(a.jsxs)(QG.k,{activeItem:n,className:"position-relative px-5 d-flex flex-column h-100",children:[Object(a.jsx)(QG.l,{tabId:"current",role:"tabpanel",children:Object(a.jsx)("div",{className:"pt-3 pb-5",children:Object(a.jsx)(tOe,{active:"current"===n,job:r,contacts:o,id:0})})}),Object(a.jsx)(QG.l,{tabId:"prev",role:"tabpanel",children:Object(a.jsx)("div",{className:"py-3",children:Object(a.jsx)(cOe,{active:"prev"===n,job:r,pageUrl:this.pageUrl,onSelectionChange:function(e){t.setState({selectedItems:e})}})})}),Object(a.jsx)(QG.l,{tabId:"view",role:"tabpanel",children:Object(a.jsx)("div",{className:"pt-3 pb-5",children:this.props.match.params.assessmentId&&Object(a.jsx)(tOe,{active:!0,job:r,contacts:o,id:+this.props.match.params.assessmentId})})}),"share"===n&&Object(a.jsx)(QG.l,{tabId:"share",role:"tabpanel",children:Object(a.jsx)("div",{className:"pt-3 pb-5",children:Object(a.jsx)(bOe,{pageUrl:this.pageUrl,job:r,contacts:o,initialValues:{assessments:this.state.selectedItems}})})})]})]})]})})}},{key:"render",value:function(){return this.props.job.data&&this.props.contacts.data?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}):Object(a.jsx)(av,{size:40})}}]),n}(p.PureComponent),mOe=Object(LO.compose)(Object(b.b)((function(e){return{job:e.currentJob,contacts:e.currentJobContacts}})))(fOe),jOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).reportMenuItems=function(t,n,r){var a=t.has(Dw.ASSESSMENT_REPORTS_MANAGE);return[{name:"View / Edit",disabled:!a||r,onClick:function(){return e.editReport(n)}},{type:"divider"},{name:"Delete",disabled:!a||r,onClick:function(){return e.deleteReport(n)}}]},e}return Object(l.a)(n,[{key:"editReport",value:function(e){var t=this.props.jobId;this.props.history.push("/usage-and-actuals/".concat(t,"/buildCosting/").concat(e.id))}},{key:"deleteReport",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,r;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.dispatch,!t.id){e.next=20;break}return r=this.props.jobId,e.next=5,n(Sw("Confirm","Are you sure you want to delete this assessment report? While the text in this report will be deleted, the original data from the onsite jobs will remain."));case 5:if(!e.sent){e.next=19;break}return e.prev=7,e.next=10,dH.assessmentReportDelete(r,t.id);case 10:n(AH(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),Qm(Vm.Danger,"Server Error");case 16:case 19:return e.abrupt("return",Promise.resolve());case 20:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:5,children:"No items found"})})}},{key:"renderRows",value:function(e){var t=this,n=this.props,r=n.assessmentReportSummary,o=n.jobIsClosed;return r?r.map((function(n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(v8,{children:qf()(n.date).format(Pj)}),Object(a.jsx)(v8,{children:n.report}),Object(a.jsx)(O8,{children:n.total_amount}),Object(a.jsx)(O8,{children:n.status}),Object(a.jsx)(O8,{children:Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:t.reportMenuItems(e,n,o),direction:"right"})})]},n.id)})):null}},{key:"render",value:function(){var e=this,t=this.props.assessmentReportSummary;return Object(a.jsx)(Cw.Consumer,{children:function(n){return n.has(Dw.ASSESSMENT_REPORTS_VIEW)?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(uF,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(_8,{scope:"col",width:"15%",children:"Date"}),Object(a.jsx)(_8,{scope:"col",style:{whiteSpace:"nowrap"},children:"Report"}),Object(a.jsx)(k8,{scope:"col",width:"20%",children:"Total Amount"}),Object(a.jsx)(k8,{scope:"col",width:"20%",children:"Status"}),Object(a.jsx)(k8,{scope:"col",width:"5%",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:t&&t.length>0?e.renderRows(n):e.renderNodata()})]})}):null}})}}]),n}(p.PureComponent),vOe=Object(v.g)(Object(b.b)()(jOe));function OOe(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return OOe=function(){return e},e}var gOe=x.default.div(OOe()),xOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onAddReport=function(){var t=e.props.match.params.id;e.props.history.push("/usage-and-actuals/".concat(t,"/newReport"))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id;(0,e.dispatch)(AH(parseInt(t)))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===gj.Closed||!n.data;return Object(a.jsx)(Cw.Consumer,{children:function(t){var n=t.has(Dw.JOBS_USAGE_VIEW),i=t.has(Dw.ASSESSMENT_REPORTS_MANAGE);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(gOe,{children:[Object(a.jsx)(Uoe,{jobId:parseInt(r)}),i&&Object(a.jsx)(Cg,{className:"btn",disabled:o,onClick:e.onAddReport,style:{marginLeft:"10px"},children:"New Report / Quote"})]})}):null}})}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,n=e.currentJobUsageSummary,r=n.data,o=n.loading,i=t.data&&t.data.latest_status.status===gj.Closed||!t.data,c=r&&r.data?r.data.assessment_reports:[],s=t.data&&null!==t.data.id?t.data.id:0;return Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(hC,{className:"p-4",children:Object(a.jsx)(vOe,{jobIsClosed:i,assessmentReportSummary:c,jobId:s})})]})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),yOe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary}})))(xOe);function wOe(){var e=Object(f.a)(["\n  margin-left: 10px;\n  padding-top: 3px;\n"]);return wOe=function(){return e},e}function _Oe(){var e=Object(f.a)(["\n  border: 1px "," solid;\n  border-radius: 4px;\n  color: ",";\n  background-color: ",";\n  padding: 5px 7px 3px 7px;\n  font-size: ",";\n  font-weight: ",";\n"]);return _Oe=function(){return e},e}x.default.span(_Oe(),y.blue1,y.blue1,y.white,Vf.smaller,Bf.medium),x.default.span(wOe());var kOe="CustomExpenseForm",SOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadOptions=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={term:n,job_id:e.props.jobId},t.next=3,dH.searchExpenses(r);case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(c.a)({},n),qf.a.isMoment(r.used_at)&&(r.used_at=Wj(r.used_at,!0)),!e.props.onSubmit){t.next=4;break}return t.abrupt("return",e.props.onSubmit(r));case 4:if(t.prev=4,!r.id){t.next=11;break}return t.next=8,ly.updateCustomExpense(e.props.jobId,r.id,r);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,ly.addCustomExpense(e.props.jobId,r);case 13:t.t0=t.sent;case 14:return i=t.t0,null===(a=(o=e.props).afterSubmit)||void 0===a||a.call(o),uy.emit(r.id?Kg.CustomExpenseUpdated:Kg.CustomExpenseCreated,i),t.abrupt("return",i);case 20:return t.prev=20,t.t1=t.catch(4),t.abrupt("return",Mg(t.t1));case 23:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.hideNameField,r=(e.jobId,e.submitting);return Object(a.jsxs)("form",{onSubmit:t(this.onSubmit),autoComplete:"off",id:kOe,children:[r&&Object(a.jsx)(av,{size:40,color:y.white}),!n&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,label:"Expense Name",validate:uv})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"default_buy_cost_per_unit",component:ZO,currency:!0,label:"Unit Cost to Me",validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"quantity",component:ZO,type:"number",label:"Quantity",validate:uv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"used_at",component:Cy,label:"Used At",validate:uv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"default_sell_cost_per_unit",component:ZO,label:"Unit Price to Charge",currency:!0,validate:uv})}),Object(a.jsx)("div",{className:"col-4"})]})]})}}]),n}(p.PureComponent),COe=Object(LO.compose)(Object(Gj.a)({form:kOe,enableReinitialize:!0}))(SOe),NOe=n(583),EOe=n.n(NOe),AOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selectStyles=e.props.customStyles?Object(c.a)(Object(c.a)({},Wv),e.props.customStyles):Object(c.a)(Object(c.a)({},Wv),{},{control:function(t,n){return Object(c.a)(Object(c.a)({},t),{},{minHeight:"auto",maxHeight:e.props.isMulti?"inherit":33.5,background:y.white,boxShadow:n.isFocused?"0 0 0 0.2rem ".concat(y.bootstrap.boxShadow):"none",borderColor:n.isFocused?"transparent":y.gray2,":hover":{borderColor:n.isFocused?"transparent":y.gray2}})},dropdownIndicator:function(t){return Object(c.a)(Object(c.a)({},t),{},{padding:3,display:e.props.isDisabled?"none":t.display})}},e.props.additionalStyles),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(Zv.a,Object(c.a)(Object(c.a)({},this.props),{},{styles:this.selectStyles}))}}]),n}(p.PureComponent);function TOe(){var e=Object(f.a)(["\n  color: #5d5d5d;\n  padding: 21px 0;\n  border-bottom: 1px solid #d3dbde;\n  border-left: 4px solid #f5aa00;\n\n  .avatar {\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    margin-left: 24px;\n    border-radius: 4px;\n    overflow: hidden;\n    background-color: #71ba90;\n    background-size: cover;\n    text-align: center;\n    font-size: 130%;\n    font-weight: 700;\n    color: white;\n  }\n\n  .title3 {\n    margin-left: 24px;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    font-size: 1.1rem;\n    font-weight: 500;\n    .title {\n      font-weight: 700;\n    }\n    .action {\n      padding-left: 10px;\n      color: #f5aa00;\n    }\n  }\n\n  .date {\n    width: 160px;\n    font-size: 0.85rem;\n    margin-right: 21px;\n  }\n\n  .cus1 {\n    margin-left: 88px;\n  }\n"]);return TOe=function(){return e},e}function IOe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-left: 4px solid ",";\n  font-size: 14px;\n  border-top: 1px solid #d3dbde;\n  border-bottom: 1px solid #d3dbde;\n  background: #fafafa;\n  color: #5d5d5d;\n  padding-top: 14px;\n  padding-bottom: 14px;\n  padding-left: 88px;\n  margin-top: -1px;\n  span {\n    font-weight: bold;\n  }\n  .date {\n    font-size: 12px;\n    margin-right: 21px;\n    width: 160px;\n  }\n"]);return IOe=function(){return e},e}function ROe(){var e=Object(f.a)([""]);return ROe=function(){return e},e}function DOe(){var e=Object(f.a)(["\n  margin: 30px 0px;\n  border-top: 1px solid #d3dbde;\n"]);return DOe=function(){return e},e}function MOe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  border-color: #42a6e6;\n  box-shadow: 0 0 0 !important;\n\n  padding: 5px 12px;\n  color: #3498db;\n  cursor: pointer;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  margin: 0 10px;\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]);return MOe=function(){return e},e}function POe(){var e=Object(f.a)(["\n  background-color: #f5aa00;\n  border-radius: 3px;\n  padding: 2px 10px;\n  color: white;\n  margin-right: 10px;\n  font-size: 16px;\n"]);return POe=function(){return e},e}function LOe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return LOe=function(){return e},e}function FOe(){var e=Object(f.a)(["\n  background-color: #3498db;\n  padding: 3px 12px 8px 12px;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return FOe=function(){return e},e}function UOe(){var e=Object(f.a)(["\n  width: 48%;\n  margin-bottom: 15px;\n  margin-right: 15px;\n  &.half {\n    width: 22%;\n  }\n"]);return UOe=function(){return e},e}function VOe(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return VOe=function(){return e},e}function BOe(){var e=Object(f.a)(["\n  font-size: 14px;\n  color: #95989a;\n  margin-bottom: 7px;\n"]);return BOe=function(){return e},e}function JOe(){var e=Object(f.a)(["\n  font-size: 20px;\n  color: #1d1d1d;\n  margin-bottom: 30px;\n  &.tasks {\n    margin: 0;\n  }\n  &.tasks-body {\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n"]);return JOe=function(){return e},e}function zOe(){var e=Object(f.a)(["\n  display: flex;\n"]);return zOe=function(){return e},e}function qOe(){var e=Object(f.a)([""]);return qOe=function(){return e},e}function WOe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return WOe=function(){return e},e}function HOe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return HOe=function(){return e},e}function GOe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return GOe=function(){return e},e}function YOe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return YOe=function(){return e},e}var QOe=[{value:"In-Progress",label:"In-Progress"},{value:"Restorable",label:"Restorable"},{value:"Non-Restorable",label:"Non-Restorable"},{value:"Awaiting Disposal Authority",label:"Awaiting Disposal Authority"},{value:"Ready For Return",label:"Ready For Return"},{value:"Ready To Dispose",label:"Ready To Dispose"},{value:"Disposed",label:"Disposed"},{value:"Client Picked Up",label:"Client Picked Up"}],KOe=(x.default.div(YOe()),x.default.div(GOe()),x.default.div(HOe()),x.default.div(WOe()),x.default.div(qOe())),ZOe=x.default.div(zOe()),XOe=x.default.div(JOe()),$Oe=x.default.div(BOe()),ege=x.default.input(VOe()),tge=x.default.div(UOe()),nge=(Object(x.default)(yw)(FOe()),Object(x.default)(FS)(LOe())),rge=(x.default.div(POe()),x.default.button(MOe()),x.default.div(DOe())),age=x.default.div(ROe()),oge=Object(x.default)(Kj(["color"])("div"))(IOe(),(function(e){return e.color||"#959595"})),ige=x.default.div(TOe()),cge={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{flexBasis:"150px",height:"33.5px",border:"none",fontWeight:"lighter",fontSize:"1rem",borderRadius:"0.25rem",boxShadow:"0 0 0 !important",lineHeight:"1.5rem",paddingTop:0})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{background:y.gray1,color:y.black0})},control:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",boxShadow:"none",background:y.gray1,color:y.black0,minHeight:"auto",maxHeight:"33.5px !important"})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:"#A3A3A3",padding:"6px"})}},sge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,data:{},inventory:{},standardTypes:[],history:[],showNoteForm:!1,users:[],showScan:!1,spaces:[],todoGroups:[],todos:[]},e.eventListeners=[uy.listen(Kg.WarehousingInventoryItemNoteAdded,(function(){e.loadNotes()}))],e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=Number(e.props.match.params.inventory_id),r=Number(e.props.match.params.item_id),t.next=5,Promise.all([d2.getInventoryItem(r),d2.getInventoryInfo(n)]);case 5:return a=t.sent,o=Object(w.a)(a,2),i=o[0],c=o[1],e.setState({data:i.data}),t.next=12,Promise.all([d2.getItemStandardTypes(),Promise.resolve(),d2.getSpaces()]);case 12:s=t.sent,e.setState({inventory:c.data,standardTypes:s[0].data,spaces:s[2].data,loading:!1}),e.loadToDoGroups(),e.loadToDos(i.data),e.loadNotes(i.data);case 17:case"end":return t.stop()}}),t)}))),e.loadToDoGroups=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,N2.getToDoGroups();case 2:n=t.sent.data,e.setState({todoGroups:n});case 4:case"end":return t.stop()}}),t)}))),e.loadToDos=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n||(n=e.state.data),!n){t.next=7;break}return e.setState({loading:!0}),t.next=5,d2.getItemToDoList(n.id);case 5:r=t.sent.data,e.setState({todos:r,loading:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadNotes=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n||(n=e.state.data),!n){t.next=15;break}return e.setState({loading:!0}),t.next=5,d2.getInventoryItemNotes(n.id);case 5:return r=t.sent.data,t.next=8,d2.getInventoryItemPlacements(n.id);case 8:a=t.sent.data,o=n.statuses||[],i=r.map((function(e){var t,n=e.note;return{date:qf()(n.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:n.created_at,type:"note",value:n.note_resolved,user:n.user,userName:(null===(t=n.user)||void 0===t?void 0:t.full_name)||""}})),o.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})).forEach((function(e,t){var n;i.push({date:qf()(e.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:e.created_at,type:t===o.length-1?"created":"status",value:e.status,user:e.user,userName:(null===(n=e.user)||void 0===n?void 0:n.full_name)||""})})),a.forEach((function(e,t){var n,r,a;i.push({date:qf()(e.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:e.created_at,placement:{space:e.space&&e.space.id!==s?e.space:null,container:e.container&&e.container.id!==c?e.container:null},type:"placement",user:e.user,userName:(null===(n=e.user)||void 0===n?void 0:n.full_name)||""}),s=null===(r=e.space)||void 0===r?void 0:r.id,c=null===(a=e.container)||void 0===a?void 0:a.id})),i.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")})),e.setState({history:i,loading:!1});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showScanModal=function(){e.setState({showScan:!0})},e.parseNote=function(e){return em($f(e))},e.markStatus=function(t){return function(){var n=e.state.data,r=n?n.current_status:"";d2.markInventoryItemStatus(r.inventory_item_id,r.user_id,t).then((function(t){var r=Object.assign({},n),a=n&&n.current_status;a=t.data.inventory_item.current_status,r.current_status=a,e.setState({data:r})}))}},e.removeInventoryItem=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.dispatch,e.state.inventory,r=e.props.match.params,a=r.type,o=r.inventory_id,i=r.item_id,t.next=5,n(Sw("Confirm","Delete inventory item?"));case 5:if(!t.sent){t.next=12;break}return c=Number(i),d2.removeInventoryItem(c).then((function(){e.props.history.push("/operations/warehousing/inventories/".concat(a,"/").concat(o,"/items"))})),t.abrupt("return",null);case 12:return t.abrupt("return",Promise.reject(!0));case 13:case"end":return t.stop()}}),t)}))),e.getItems1=function(){var t=[];return QOe.forEach((function(n){t.push({name:n.label,onClick:e.markStatus(n.label)})})),t.push({type:"divider"}),t=t.concat([{name:"Delete",onClick:e.removeInventoryItem}]),[{name:"Add note",onClick:function(){return e.setState({showNoteForm:!0})}},{type:"divider"},{name:"Print",onClick:function(){}},{type:"divider"}].concat(t)},e.renderTrigger1=function(){return Object(a.jsxs)(nge,{className:"d-flex align-items-center",margin:"5px 0 0 0",children:[Object(a.jsx)(FS,{color:y.white,margin:"0 5px 0 0",children:"Options"}),Object(a.jsx)(J3,{name:Ef.ArrowDown,color:y.white,size:16})]})},e.updateInfo=function(t){return function(n){var r=e.state,a=r.data,o=r.inventory;if(a){var i=Object.assign({},a);if("standard"===t)i.standard_type=n,i.assessment_fee=null===n||void 0===n?void 0:n.assessment_fee,i.estimated_replacement_cost=null===n||void 0===n?void 0:n.estimated_replacement_cost,i.restoration_hours=(null===n||void 0===n?void 0:n.restoration_hours)+"",i.restoration_cost=null===n||void 0===n?void 0:n.restoration_cost;else if("hour"===t)i.restoration_hours=n.value;else{if("$"===n.target.value)return;if(i[t]=n.target.value.replace(/\$/g,"").replace(/ /g,""),isNaN(Number(i[t].charAt(i[t].length-1)))&&"."!==i[t].charAt(i[t].length-1))return;if(-1!==i[t].indexOf(".")&&i[t].split(".")[1].length>2)return}e.setState({data:i});var c=i?i.id:"",s=o?o.id:"",l=i?i.job_id:"",u=i?i.identifier:"",d=i?i.name:"",p=i?i.quantity:"",h=i?i.condition:"",b=i?i.serial_number:"",f=i?i.model:"",m=i?i.customer_location:"",j=i?i.standard_type:{},v=i?i.assessment_fee:"",O=i?i.estimated_replacement_cost:"",g=i?i.restoration_hours:"",x=i?i.restoration_cost:"",y=j?j.id:"",w={inventory_id:s||"",job_id:l||"",identifier:u||"",name:d||"",quantity:p||"",condition:h||"",serial_number:b||"",model:f||"",customer_location:m||"",assessment_fee:Number(v)||0,estimated_replacement_cost:Number(O)||0,restoration_cost:Number(x)||0,restoration_hours:g||"",inventory_item_standard_type_id:y||""};d2.updateInventoryItem(c,w)}}},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Number(e.props.match.params.item_id),d2.addNoteToInventoryItem(n.id,r).then((function(t){var n=e.state.history,r=e.state.users,a=t.data.note,o="";r.forEach((function(e){e.id===a.user_id&&(o=e.full_name)})),n.unshift({date:qf()(a.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:a.created_at,type:"note",value:a.note,userName:o}),e.setState({history:n,showNoteForm:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.cancelNote=function(){e.setState({showNoteForm:!1})},e.changeLocation=function(t){var n=e.state.data,r=Object.assign({},n);r.placement.space=t,e.setState({data:r})},e.addTodo=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),r=e.state.data,n.next=4,d2.addTodoGroupToInventoryItem(r.id,{to_do_group_id:t.id});case 4:return n.next=6,e.loadToDos();case 6:e.setState({loading:!1});case 7:case"end":return n.stop()}}),n)})))},e.toggleToDoItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),n.prev=1,n.next=4,d2[t.completed_at?"markToDoItemAsInComplete":"markToDoItemAsCompleted"](t.id);case 4:n.sent,t.completed_at=t.completed_at?null:new Date,e.setState({todos:Object(Dm.a)(e.state.todos)});case 7:return n.prev=7,e.setState({loading:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[1,,7,10]])})))},e.deleteToDoItem=function(t,n,r){return Object(Um.a)(Fm.a.mark((function o(){var i;return Fm.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=e.props.dispatch,o.next=3,i(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove to do item ",Object(a.jsx)("strong",{children:n.item.name})," from group ",Object(a.jsx)("strong",{children:t.to_do_group.name}),"?"]})));case 3:if(!o.sent){o.next=14;break}return e.setState({loading:!0}),o.prev=6,o.next=9,d2.deleteToDoItem(n.id);case 9:t.to_do_items.splice(r,1),e.setState({todos:Object(Dm.a)(e.state.todos)});case 11:return o.prev=11,e.setState({loading:!1}),o.finish(11);case 14:case"end":return o.stop()}}),o,null,[[6,,11,14]])})))},e.loadStandardItems=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,N2.getStandardItems({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadStandardItems=_v()(e.loadStandardItems,500),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=t.item_id,o=e.match.params,i=o.type,c=o.inventory_id,s=o.item_id;n===i&&r===c&&a===s||this.loadData()}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getStandardOptions",value:function(){var e=this.state.standardTypes,t=[];return e.forEach((function(e){t.push({value:e.id,label:e.name})})),t}},{key:"renderHistory",value:function(){var e=this,t=this.state.history,n=[];return t.forEach((function(t){var r;("created"===t.type&&n.push(Object(a.jsxs)(oge,{children:[Object(a.jsxs)("div",{children:["Inventory item created by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]})),"status"===t.type&&n.push(Object(a.jsxs)(oge,{children:[Object(a.jsxs)("div",{children:["Status changed to ",Object(a.jsx)("span",{children:t.value})," by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]})),"placement"===t.type&&(t.placement.space&&n.push(Object(a.jsxs)(oge,{children:[Object(a.jsxs)("div",{children:["Inventory item assigned to location ",Object(a.jsxs)("span",{children:["`",t.placement.space.name,"`"]})," by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]})),t.placement.container&&n.push(Object(a.jsxs)(oge,{children:[Object(a.jsxs)("div",{children:["Inventory item assigned to pallet ",Object(a.jsxs)("span",{children:["`",t.placement.container.label,"`"]})," by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]}))),"note"===t.type)&&n.push(Object(a.jsxs)(ige,{className:"d-flex flex-row align-items-end",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{className:"flex-shrink-0 avatar",children:null===(r=Yf(t.user))||void 0===r?void 0:r.initials}),Object(a.jsxs)("div",{className:"flex-grow-1 title3",children:[Object(a.jsx)("span",{className:"title",children:t.userName}),Object(a.jsx)("div",{className:"action",children:"added a note"})]}),Object(a.jsx)("div",{className:"date",children:t.date})]}),Object(a.jsx)("div",{className:"flex-column cus1",children:Object(a.jsxs)("div",{className:"",children:[t.value&&Object(a.jsx)("div",{children:EOe()(e.parseNote(t.value))}),Object(a.jsx)("br",{})]})})]}),Object(a.jsx)("div",{className:"flex-shrink-0 align-self-start"})]}))})),n}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.data,o=t.inventory,i=(t.showNoteForm,t.showScan,t.spaces,t.todoGroups),c=t.todos,s=r?r.standard_type:{},l=r?"$ ".concat(r.assessment_fee||""):"",u=r?"$ ".concat(r.estimated_replacement_cost||""):"",d=r?r.restoration_hours:"",p=r?"$ ".concat(r.restoration_cost||""):"",h=(r&&r.id,o&&o.address,o&&o.job_number,r&&r.job_id,r?r.current_status:null),b=(h&&h.status,d||""),f=s;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:Object(a.jsx)("div",{className:"d-flex flex-row align-items-stretch",children:Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)(uC,{className:"h-100",children:[Object(a.jsxs)(KOe,{className:"print-hide",children:[Object(a.jsx)(XOe,{children:"Restorable Assessment"}),Object(a.jsxs)(ZOe,{children:[Object(a.jsxs)(tge,{children:[Object(a.jsx)($Oe,{children:"Standard Item"}),Object(a.jsx)(AOe,{value:f,loadOptions:e.debouncedLoadStandardItems,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:e.updateInfo("standard"),customStyles:cge})]}),Object(a.jsxs)(tge,{className:"half",children:[Object(a.jsx)($Oe,{children:"Restoration Hour"}),Object(a.jsx)(ege,{value:b,onChange:e.updateInfo("hour")})]}),Object(a.jsxs)(tge,{className:"half",children:[Object(a.jsx)($Oe,{children:"Restoration Cost"}),Object(a.jsx)(ege,{value:p,onChange:e.updateInfo("restoration_cost")})]})]}),Object(a.jsxs)(ZOe,{children:[Object(a.jsxs)(tge,{className:"half",children:[Object(a.jsx)($Oe,{children:"Assessment Fee"}),Object(a.jsx)(ege,{value:l,onChange:e.updateInfo("assessment_fee")})]}),Object(a.jsxs)(tge,{className:"half",children:[Object(a.jsx)($Oe,{children:"Estimated Replacement Cost"}),Object(a.jsx)(ege,{value:u,onChange:e.updateInfo("estimated_replacement_cost")})]})]})]}),i.length>0&&Object(a.jsxs)(age,{children:[Object(a.jsx)("hr",{className:"print-hide"}),Object(a.jsx)("div",{className:"py-3 print-hide",children:Object(a.jsxs)(QG.e,{children:[Object(a.jsx)(QG.h,{caret:!0,color:"primary",className:"position-relative",children:"Add To-Do"}),Object(a.jsx)(QG.g,{basic:!0,right:!0,children:null===i||void 0===i?void 0:i.map((function(t){return Object(a.jsx)(QG.f,{onClick:e.addTodo(t),children:t.name},t.id)}))})]})}),c.length>0&&c.map((function(t){var n;return t.to_do_items.length>0&&Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:(null===(n=t.to_do_group)||void 0===n?void 0:n.name)||"ToDo Group "+t.id})}),Object(a.jsx)("div",{className:"pl-3",children:t.to_do_items.map((function(n,r){var o;return Object(a.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[Object(a.jsx)(PJ,{value:n.completed_at?n.id:void 0,onChange:e.toggleToDoItem(n),size:15}),Object(a.jsx)(XOe,{className:"tasks-body mx-3 mb-0",children:(null===(o=n.item)||void 0===o?void 0:o.name)||"ToDo Item "+n.id}),Object(a.jsx)(Ff,{name:Ef.Delete,size:14,className:"cursor-pointer",onClick:e.deleteToDoItem(t,n,r)})]},n.id)}))})]},t.id)}))]}),Object(a.jsx)(rge,{className:"print-hide",children:e.renderHistory()})]})]})})})}})}}]),n}(h.a.PureComponent),lge=Object(LO.compose)(Object(b.b)(),v.g)(sge),uge=n(584);function dge(){var e=Object(f.a)(["\n  >div>div{max-height: initial;}\n  .form-control{height:initial;}\n  .fcc__value-container .trim{display: none;}\n"]);return dge=function(){return e},e}var pge=x.default.div(dge()),hge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selectStyles=e.props.customStyles?Object(c.a)(Object(c.a)({},Wv),e.props.customStyles):Object(c.a)(Object(c.a)({},Wv),{},{control:function(t,n){return Object(c.a)(Object(c.a)({},t),{},{minHeight:"auto",maxHeight:e.props.isMulti?"inherit":33.5,background:y.white,boxShadow:n.isFocused?"0 0 0 0.2rem ".concat(y.bootstrap.boxShadow):"none",borderColor:n.isFocused?"transparent":y.gray2,":hover":{borderColor:n.isFocused?"transparent":y.gray2}})},dropdownIndicator:function(t){return Object(c.a)(Object(c.a)({},t),{},{padding:3,display:e.props.isDisabled?"none":t.display})}},e.props.additionalStyles),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(pge,{children:Object(a.jsx)(uge.a,Object(c.a)(Object(c.a)({},this.props),{},{styles:this.selectStyles,classNamePrefix:"fcc"}))})}}]),n}(p.PureComponent);function bge(){var e=Object(f.a)(["\n  margin-left: 10px;\n  padding-top: 3px;\n"]);return bge=function(){return e},e}function fge(){var e=Object(f.a)(["\n  border: 1px "," solid;\n  border-radius: 4px;\n  color: ",";\n  background-color: ",";\n  padding: 5px 7px 3px 7px;\n  font-size: ",";\n  font-weight: ",";\n"]);return fge=function(){return e},e}var mge=x.default.span(fge(),y.blue1,y.blue1,y.white,Vf.smaller,Bf.medium),jge=x.default.span(bge()),vge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e.loadOptions=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={term:n,job_id:e.props.jobId},t.next=3,dH.searchExpenses(r);case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadOptions=_v()(e.loadOptions,500),e.onSelectExpense=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(c.a)({},n),e.setState({loading:!0}),t.prev=2,t.t0=null===r||void 0===r?void 0:r.type,t.next="EQUIP"===t.t0?6:"MAT"===t.t0?10:14;break;case 6:return t.next=8,dH.getEquipmentInfo(r.id);case 8:return r.equipment=t.sent,t.abrupt("break",14);case 10:return t.next=12,dH.getMaterial(r.id);case 12:return r.material=t.sent,t.abrupt("break",14);case 14:e.setState({expense:r}),t.next=20;break;case 17:t.prev=17,t.t1=t.catch(2),e.setState({expense:void 0});case 20:return t.prev=20,e.setState({loading:!1}),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,17,20,23]])})));return function(e){return t.apply(this,arguments)}}(),e.afterSubmit=function(){var t=e.props,n=t.jobId,r=t.onClose,a=t.dispatch,o=t.afterSubmit;null===o||void 0===o||o(),a(RH(n)),r()},e.renderBody=function(){var t=e.props,n=t.jobId,r=t.expense,o=e.state.expense;return Object(a.jsxs)(a.Fragment,{children:[!r&&Object(a.jsx)("div",{className:"row mb-3",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)(ZF,{children:"Expense Name"}),Object(a.jsx)(hge,{getOptionValue:function(e){return e.id||Date.now()},getOptionLabel:e.renderExpenseOption,placeholder:"Name or choose an item...",loadOptions:e.debouncedLoadOptions,onChange:e.onSelectExpense,customStyles:cge})]})}),o?o.equipment?Object(a.jsx)(Koe,{jobId:n,hideEquipmentField:!0,initialValues:{equipment:o.equipment},afterSubmit:e.afterSubmit}):o.material?Object(a.jsx)(pie,{jobId:n,hideMaterialField:!0,initialValues:{material:o.material,default_buy_cost_per_unit:o.material.default_buy_cost_per_unit,default_sell_cost_per_unit:o.material.default_sell_cost_per_unit},afterSubmit:e.afterSubmit}):Object(a.jsx)(COe,{jobId:n,hideNameField:!0,initialValues:{name:o.value},afterSubmit:e.afterSubmit}):r?Object(a.jsx)(COe,{jobId:n,initialValues:Object(c.a)(Object(c.a)({},r),{},{used_at:qf()(r.used_at)}),afterSubmit:e.afterSubmit}):null]})},e}return Object(l.a)(n,[{key:"renderExpenseOption",value:function(e){return(null===e||void 0===e?void 0:e.id)?Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)(mge,{children:e.type}),Object(a.jsx)(jge,{children:e.name})]}):(null===e||void 0===e?void 0:e.value)?Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"trim",children:' Create custom expense "'}),e.value,Object(a.jsx)("span",{className:"trim",children:'"'})]}):void 0}},{key:"renderFooter",value:function(){var e=this.props.expense,t=this.state.expense,n=kOe;if((null===t||void 0===t?void 0:t.equipment)?n=Yoe:(null===t||void 0===t?void 0:t.material)&&(n=uie),t||e)return Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",form:n,children:"Save"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.expense,o=this.state.loading;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:r?"Edit Expense":"Add Expense",body:this.renderBody(),footer:this.renderFooter(),bodyClass:"position-static",loading:o})})}}]),n}(p.PureComponent),Oge=Object(LO.compose)(Object(b.b)())(vge),gge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,showEditModal:!1,type:nie.Quick,expenseForEditing:void 0},e.eventListeners=[uy.listen(Kg.CustomExpenseCreated,(function(){return e.loadExpenses()})),uy.listen(Kg.CustomExpenseUpdated,(function(){return e.loadExpenses()})),uy.listen(Kg.CustomExpenseDeleted,(function(){return e.loadExpenses()}))],e.componentDidMount=function(){e.loadExpenses()},e.loadExpenses=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.expenses,o=r.match.params.id,a.fetch(o,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editExpense=function(t){e.setState({expenseForEditing:t}),e.onOpenModal()},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.deleteExpenseFromJob=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(Sw("Confirm","Delete (".concat(n.name," - ").concat(n.quantity,") ?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,ly.deleteCustomExpense(parseInt(o),n.id);case 7:uy.emit(Kg.CustomExpenseDeleted,n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.storageMenuItems=function(t,n,r){var a=n.creator_id===e.props.user.id,o=a?t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE):t.has(Dw.JOBS_USAGE_MATERIALS_UPDATE)&&t.has(Dw.JOBS_USAGE_MATERIALS_MANAGE),i=a?t.has(Dw.JOBS_USAGE_MATERIALS_DELETE):t.has(Dw.JOBS_USAGE_MATERIALS_DELETE)&&t.has(Dw.JOBS_USAGE_MATERIALS_MANAGE);return[{name:"Edit item",disabled:!o||r,onClick:function(){return e.editExpense(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!o||r,onClick:function(){return e.markAsUsed(n)}},{type:"divider"},{name:"Delete",disabled:!i||r,onClick:function(){return e.deleteExpenseFromJob(n)}}]},e.PostMarkasUsed=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dH.setMarkAsUsed(r,n);case 3:e.loadExpenses(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Qm(Vm.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"markAsUsed",value:function(e){var t=0==e.in_report_used_count?1:0,n={modal:"job_custom_expenses",id:e.id,in_report_used_count:t};this.PostMarkasUsed(n,e.job_id)}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:5,children:"No items found"})})}},{key:"renderRows",value:function(e){var t,n,r,o=this,i=this.props,c=i.expenses,s=i.jobIsClosed;return(null===(t=c.data)||void 0===t?void 0:t.data)?(null===(n=c.data)||void 0===n?void 0:n.data.length)?null===(r=c.data)||void 0===r?void 0:r.data.map((function(t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.name}),Object(a.jsx)("td",{children:t.quantity}),Object(a.jsx)("td",{children:Object(a.jsx)($_.a,{format:Pj,children:t.used_at})}),Object(a.jsx)("td",{children:Kf(t.amount)}),Object(a.jsx)("td",{children:Object(a.jsx)(yw,{noMargin:!0,iconName:Ef.MenuVertical,items:o.storageMenuItems(e,t,s),direction:"right"})})]},t.id)})):this.renderNodata():null}},{key:"render",value:function(){var e=this,t=this.props,n=t.expenses,r=t.match.params.id,o=this.state,i=o.showModal,c=(o.type,o.expenseForEditing),s=n.loading;return Object(a.jsx)(Cw.Consumer,{children:function(t){return t.has(Dw.JOBS_USAGE_VIEW)?Object(a.jsxs)(a.Fragment,{children:[i&&Object(a.jsx)(Oge,{jobId:parseInt(r),onClose:e.onCloseModal,isOpen:i,expense:c}),s&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)(zoe,{children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)("th",{children:"Custom Expenses"})})}),Object(a.jsx)("tbody",{children:e.renderRows(t)})]})]}):null}})}}]),n}(p.PureComponent),xge=Object(LO.compose)(Object(b.b)((function(e){return{job:e.currentJob,user:e.user.me}})),v.g,Mm({expenses:{fetch:ly.getCustomExpenses}}))(gge),yge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,showEditModal:!1,type:nie.Quick},e.onCustomExpenseAdd=function(){e.setState({type:nie.Custom}),e.onOpenModal()},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"renderAdditionalHeaderLayout",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)(xN,{children:[Object(a.jsx)(Uoe,{jobId:parseInt(this.props.match.params.id)}),Object(a.jsx)(Cg,{className:"btn",onClick:this.onCustomExpenseAdd,style:{marginLeft:"10px"},children:"Add Expense"})]})})}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,n=(e.dispatch,t.data&&t.data.latest_status.status===gj.Closed||!t.data);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(hC,{children:Object(a.jsx)(xge,{jobIsClosed:n})}),this.state.showModal&&Object(a.jsx)(Oge,{jobId:t.data.id,onClose:this.onCloseModal,isOpen:this.state.showModal})]})}},{key:"render",value:function(){return Object(a.jsx)(HH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),wge=Object(LO.compose)(v.g,Object(b.b)((function(e){return{job:e.currentJob}})))(yge),_ge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match;return Object(a.jsxs)(v.d,{children:[Object(a.jsx)(AI,{path:"".concat(e.path,"/summary"),component:Lie,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/report"),component:yOe,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/newReport"),component:rse,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/buildCosting/:reportId"),component:pde,permission:Dw.ASSESSMENT_REPORTS_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/buildDocument/:reportId"),component:tve,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/printDocument/:reportId"),component:Wve,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/labour"),component:Bce,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/equipment"),component:sie,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"".concat(e.path,"/materials"),component:xie,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(v.b,{path:"".concat(e.path,"/purchase-order"),component:Cie}),Object(a.jsx)(v.b,{path:"".concat(e.path,"/others"),component:wge}),Object(a.jsx)(v.b,{path:"".concat(e.path,"/pre-start-check"),component:FQ}),Object(a.jsx)(v.b,{path:"".concat(e.path,"/crew-report"),component:Boe}),Object(a.jsx)(v.b,{path:"".concat(e.path,"/risk-assessment/:tab?/:assessmentId?"),component:mOe}),Object(a.jsx)(v.a,{to:"".concat(e.url,"/summary")})]})}}]),n}(p.PureComponent),kge=Object(LO.compose)(v.g)(_ge),Sge=[{path:"/manage/contract",icon:Ef.FileEdit,label:"Contract",type:"contract"},{path:"/manage/location",icon:Ef.LocationPin,label:"Locations",type:"location"},{path:"/manage/lme/labour-type",icon:Ef.FileCash,label:"Labour, Materials, Equipment",type:"lme",menu:[{path:"/manage/lme/labour-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Labour Type"})},{path:"/manage/lme/equipment-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Equipment Category"})},{path:"/manage/lme/equipment",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Equipment"})},{path:"/manage/lme/material",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Materials"})}]},{path:"/manage/gscode",icon:Ef.CheckIcon,label:"GS Code",type:"gscode"},{path:"/manage/tag",icon:Ef.Tags,label:"Tags",type:"tag"},{path:"/manage/user",icon:Ef.People,label:"User",type:"user"},{path:"/manage/vehicle",icon:Ef.Truck,label:"Vehicle",type:"vehicle"},{path:"/manage/warehousing",icon:Ef.ShipmentUpload,label:"Warehousing",type:"warehousing",menu:[{path:"/manage/warehousing/space-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Space Types"})},{path:"/manage/warehousing/container-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Container Types"})},{path:"/manage/warehousing/standard-item",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Standard Items"})}]}];var Cge=Object(v.g)((function(e){var t=e.activeSection,n=Object(Rm.a)(e,["activeSection"]);function r(e){var t=n.location.pathname;return!!Object(v.f)(t,{path:e})}return Object(p.useEffect)((function(){var e=Sge.find((function(e){return e.type===t}));return e&&um.status("Manage - "+e.label),function(){um.reset()}}),[t]),Object(a.jsx)(Im,{children:Object(a.jsx)("div",{children:Sge.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ym,{item:Object(c.a)(Object(c.a)({},e),{},{isActive:t===e.type&&r(e.path)})},e.path),t===e.type&&e.menu&&e.menu.map((function(e){return Object(a.jsx)(ym,{item:Object(c.a)(Object(c.a)({},e),{},{isActive:r(e.path)})},e.path)}))]})}))})})}));function Nge(){var e=Object(f.a)(["\n  border: 1px solid ",";\n\n  thead th {\n    font-weight: ",";\n    color: ",";\n    padding: 5px;\n    padding-left: 20px;\n    height: 50px;\n    line-height: 20px;\n    vertical-align: middle;\n  }\n\n  td {\n    vertical-align: middle;\n    padding-left: 20px;\n    &:last-child {\n      padding-right: 10px;\n      padding-bottom: 7px;\n      cursor: pointer;\n    }\n  }\n\n  tbody tr:nth-of-type(odd) {\n    background: ",";\n  }\n  tbody .no-item {\n    height: 42px;\n    color: ",";\n    text-align: center;\n  }\n  .form-control {\n    background: white;\n    border: 1px solid ",";\n  }\n"]);return Nge=function(){return e},e}var Ege=x.default.table(Nge(),y.gray2,Bf.normal,y.gray4,y.white,y.gray4,y.gray2),Age=function(e){return Object(a.jsx)(Ege,{className:"table table-sm table-striped",children:e.children})};function Tge(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Tge=function(){return e},e}function Ige(){var e=Object(f.a)(["\n  position: absolute;\n  margin: 45px 0px 0px 0px;\n  z-index: 99;\n"]);return Ige=function(){return e},e}function Rge(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n  height: 25px;\n  margin: 5px 0px 6px -45px;\n  position: relative;\n"]);return Rge=function(){return e},e}function Dge(){var e=Object(f.a)(["\n  width: 25px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return Dge=function(){return e},e}function Mge(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return Mge=function(){return e},e}function Pge(){var e=Object(f.a)(["\n  display: flex;\n"]);return Pge=function(){return e},e}function Lge(){var e=Object(f.a)(["\n  justify-content: flex-end;\n  display: flex;\n"]);return Lge=function(){return e},e}function Fge(){var e=Object(f.a)(["\n  width: 100%,\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Fge=function(){return e},e}function Uge(){var e=Object(f.a)(["\n  width: 100%,\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Uge=function(){return e},e}function Vge(){var e=Object(f.a)(["\n    width: ",";\n    padding: 10px;\n    border: 1px solid ",";\n    border-radius: 6px;\n    margin: 10px 0px 10px 0px;\n    : disabled {\n        color: ","\n        cursor: not-allowed;\n    }\n    : focus {\n        color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);\n  }\n"]);return Vge=function(){return e},e}function Bge(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 400;\n"]);return Bge=function(){return e},e}function Jge(){var e=Object(f.a)(["\n  margin-top: 20px;\n"]);return Jge=function(){return e},e}function zge(){var e=Object(f.a)(["\n  margin-top: 20px;\n"]);return zge=function(){return e},e}function qge(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return qge=function(){return e},e}var Wge=x.default.div(qge()),Hge=x.default.div(zge()),Gge=x.default.div(Jge()),Yge=x.default.span(Bge(),y.gray4),Qge=x.default.input(Vge(),(function(e){return e.width}),y.gray2,y.gray4),Kge=Object(x.default)(m7.a)(Uge()),Zge=Object(x.default)(m7.a)(Fge()),Xge=x.default.div(Lge()),$ge=x.default.div(Pge()),exe=x.default.input(Mge()),txe=x.default.div(Dge(),(function(e){return e.color})),nxe=x.default.div(Rge()),rxe=x.default.div(Ige()),axe=x.default.div(Tge()),oxe=[{label:"Jobs",value:"job"},{label:"Credit Notes",value:"credit_note"},{label:"Purchase Orders",value:"purchase_order"},{label:"Invoices",value:"invoice"},{label:"Contacts ",value:"contact"}],ixe=[{label:"No",value:!1},{label:"Yes",value:!0}],cxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableItems:[],loading:!1},e.getTag=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,yC.getAllTags();case 4:n=t.sent,(r=Object(Dm.a)(n)).map((function(e){e.isModelOpen=!1,e.rowIsVisible=!1})),e.setState({tableItems:r,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),Qm(Vm.Danger,"This status can't be applied");case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.handleNewItem=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"#D3DBDE",n=parseInt("#D3DBDE".replace("#",""),16),(r=Object(Dm.a)(e.state.tableItems)).splice(0,0,{id:r.length+1,name:"",type:{label:"Jobs",value:"job"},is_alert:{label:"No",value:!1},color:n,rowIsVisible:!0}),e.setState({tableItems:r});case 5:case"end":return t.stop()}}),t)}))),e.handleOnBlurChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.rowIsVisible){t.next=18;break}return t.prev=1,a={name:r.name,type:r.type.value,is_alert:r.is_alert.value,color:r.color},t.next=5,yC.createNewTag(a);case 5:o=t.sent,i=oxe.find((function(e){return e.value===o.type})),c=ixe.find((function(e){return e.value===o.is_alert})),o.type=i,o.is_alert=c,o&&e.getTag(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),Qm(Vm.Danger,"name fiels is required");case 16:t.next=29;break;case 18:return t.prev=18,s={name:r.name},t.next=22,yC.updatedTag(r.id,s);case 22:t.sent&&e.getTag(),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(18),Qm(Vm.Danger,"Your record is not updated");case 29:case"end":return t.stop()}}),t,null,[[1,13],[18,26]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleChangeName=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableItems);a.map((function(e){return n.id===e.id&&(e.name=r),e})),e.setState({tableItems:a})},e.handleSelectOptionForAppliesTo=function(t,n){var r=Object(Dm.a)(e.state.tableItems);r.map(function(){var e=Object(Um.a)(Fm.a.mark((function e(r,a){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.id===n&&(r.type=t),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.setState({tableItems:r})},e.handleSelectOptionForIsAlert=function(t,n){var r=Object(Dm.a)(e.state.tableItems);r.map(function(){var r=Object(Um.a)(Fm.a.mark((function r(a,o){var i;return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.id!==n){r.next=14;break}if(a.is_alert=t,a.rowIsVisible){r.next=14;break}return r.prev=3,i={is_alert:t.value,color:a.color},r.next=7,yC.updatedTag(a.id,i);case 7:r.sent&&e.getTag(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),Qm(Vm.Danger,"Record is not updated");case 14:return r.abrupt("return",a);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})));return function(e,t){return r.apply(this,arguments)}}()),e.setState({tableItems:r})},e.handleDeleteItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(Sw("Confirm","Are you sure you want to delete this item? You will not be able to undo this action."));case 3:if(!t.sent){t.next=21;break}if(!n.rowIsVisible){t.next=11;break}(a=Object(Dm.a)(e.state.tableItems)).splice(0,1),e.setState({tableItems:a}),t.next=21;break;case 11:return t.prev=11,t.next=14,yC.deleteTag(n.id);case 14:void 0===t.sent&&e.getTag(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),Qm(Vm.Danger,"Your record is not deleted");case 21:case"end":return t.stop()}}),t,null,[[11,18]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(t){var n=Object(Dm.a)(e.state.tableItems);n.map((function(e,n){return e.id===t&&(e.isModelOpen=!0),e})),e.setState({tableItems:n})},e.handleChange=function(t,n){var r=Object(Dm.a)(e.state.tableItems);r.map(function(){var r=Object(Um.a)(Fm.a.mark((function r(a,o){var i,c;return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.id!==n){r.next=15;break}if(i=parseInt(t.hex.replace("#",""),16),a.color=i,a.rowIsVisible){r.next=15;break}return r.prev=4,c={is_alert:a.is_alert,color:i},r.next=8,yC.updatedTag(a.id,c);case 8:r.sent&&e.getTag(),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(4),Qm(Vm.Danger,"Record is not updated");case 15:return r.abrupt("return",a);case 16:case"end":return r.stop()}}),r,null,[[4,12]])})));return function(e,t){return r.apply(this,arguments)}}()),e.setState({tableItems:r})},e.handleClose=function(t){var n=Object(Dm.a)(e.state.tableItems);n.map((function(e,n){return e.id===t&&(e.isModelOpen=!1),e})),e.setState({tableItems:n})},e.tagsColumns=function(){return[{id:"name",header:Object(a.jsx)(Yge,{children:"Name"}),width:"30%",type:mte.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Qge,{type:"text",width:"100%",value:t.name,placeholder:"Untitled tag",onChange:function(n){return e.handleChangeName(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"appliesTo",header:Object(a.jsx)(Yge,{children:"Applies To"}),width:"15%",type:mte.Text,hidden:!1,cell:function(t){var n=oxe.find((function(e){return e.value===t.type}));return Object(a.jsx)("div",{children:Object(a.jsx)(Kge,{value:n,options:oxe,defaultValue:oxe[0],onChange:function(n){return e.handleSelectOptionForAppliesTo(n,t.id)}})})}},{id:"isAlert",header:Object(a.jsx)(Yge,{children:"Is Alert"}),width:"15%",type:mte.Text,hidden:!1,cell:function(t){var n=ixe.find((function(e){return e.value===t.is_alert}));return Object(a.jsx)("div",{children:Object(a.jsx)(Zge,{value:n,options:ixe,defaultValue:ixe[0],onChange:function(n){return e.handleSelectOptionForIsAlert(n,t.id)}})})}},{id:"colour",header:Object(a.jsx)(Yge,{children:"Colour"}),width:"10%",type:mte.Text,hidden:!1,cell:function(t){var n=t.color.toString(16);return n="#".concat(n),Object(a.jsxs)($ge,{children:[Object(a.jsx)(exe,{type:"text",value:n,readOnly:!0}),Object(a.jsx)(nxe,{onClick:function(){return e.handleClick(t.id)},children:Object(a.jsx)(txe,{color:n})}),t.isModelOpen?Object(a.jsxs)(rxe,{children:[Object(a.jsx)(axe,{onClick:function(){return e.handleClose(t.id)}}),Object(a.jsx)(Dde.a,{color:n,onChange:function(n){return e.handleChange(n,t.id)}})]}):null]})}},{id:"delete",header:Object(a.jsx)(Yge,{}),width:"30%",type:mte.Text,hidden:!1,cell:function(t){return Object(a.jsx)(Xge,{children:Object(a.jsx)(Ff,{name:Ef.Trash,onClick:function(){return e.handleDeleteItem(t)}})})}}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getTag()}},{key:"render",value:function(){return Object(a.jsxs)(Wge,{className:"d-flex flex-column",children:[!0===this.state.loading?Object(a.jsx)(av,{size:40,color:y.gray0}):null,Object(a.jsx)(Hge,{children:Object(a.jsx)(Cg,{onClick:this.handleNewItem,type:"submit",className:"btn btn-primary",children:"Add New"})}),Object(a.jsx)(Gge,{children:Object(a.jsx)(Age,{children:Object(a.jsx)(Uie,{useCustomStyle:!0,dataSource:this.state.tableItems,columnsDefinition:this.tagsColumns()})})})]})}}]),n}(h.a.PureComponent),sxe=Object(b.b)(null)(cxe);function lxe(){var e=Object(f.a)(["\n  color: "," !important;\n"]);return lxe=function(){return e},e}function uxe(){var e=Object(f.a)(["\n  overflow: hidden;\n"]);return uxe=function(){return e},e}function dxe(){var e=Object(f.a)(["\n  border: 1px solid ",";\n  padding: 10px;\n"]);return dxe=function(){return e},e}var pxe=x.default.div(dxe(),y.white1),hxe=x.default.div(uxe()),bxe=x.default.div(lxe(),y.gray4);function fxe(e){var t=e.photo,n=e.names,r=e.location;return Object(a.jsxs)(pxe,{className:"w-100 d-flex align-items-center f-row",children:[Object(a.jsx)(LS,{wh:50,backgroundUrl:t,margin:"0 10px 0 0",className:"flex-shrink-0",children:!t&&n.initials}),Object(a.jsxs)(hxe,{className:"d-flex flex-grow-1 flex-column",children:[Object(a.jsx)("div",{children:n.full_name}),Object(a.jsx)(bxe,{children:r})]})]})}var mxe=h.a.memo(fxe);function jxe(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: ","\n  opacity: 0.6;\n  z-index: 2;\n  point-events: none;\n"]);return jxe=function(){return e},e}var vxe=x.default.div(jxe(),y.gray1);function Oxe(){return Object(a.jsx)(vxe,{children:Object(a.jsx)(av,{size:40})})}function gxe(){var e=Object(f.a)(["\n  text-decoration: none !important;\n"]);return gxe=function(){return e},e}function xxe(){var e=Object(f.a)(["\n  font-size: ","\n  color: ","\n  margin: 0 ","\n"]);return xxe=function(){return e},e}function yxe(){var e=Object(f.a)(["\n  margin-bottom: 20px;\n"]);return yxe=function(){return e},e}function wxe(){var e=Object(f.a)(["\n  margin-left: ","\n  margin-right: ","\n  align-content: flex-start;\n"]);return wxe=function(){return e},e}function _xe(){var e=Object(f.a)(["\n  margin-left: ","\n  margin-right: ","\n  margin-bottom: 40px;\n  z-index: 3;\n"]);return _xe=function(){return e},e}var kxe="15px",Sxe=x.default.div(_xe(),kxe,kxe),Cxe=x.default.div(wxe(),kxe,kxe),Nxe=Object(x.default)(uC)(yxe()),Exe=x.default.div(xxe(),Vf.medium,y.blue6,kxe),Axe=Object(x.default)(Uf.b)(gxe()),Txe={per_page:XO.Huge},Ixe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currentUserList:[],isLoading:!1},e.inputRef=h.a.createRef(),e.currentRequest=void 0,e.searchUsers=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n&&n.trim(),t.prev=1,e.currentRequest&&e.currentRequest.abort(),e.setState({isLoading:!0}),r=n?uE.getSearchedUsers({name:a},Txe):uE.getUsersWithControl(Txe),e.currentRequest=r.controller,t.next=8,r.promise;case 8:o=t.sent,i=o.data,e.setState({isLoading:!1,currentUserList:i}),t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(1),"AbortError"!==t.t0.name){t.next=17;break}return t.abrupt("return");case 17:e.setState({isLoading:!1,currentUserList:[]}),Qm(Vm.Warning,"Users can not be loaded");case 19:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),e.redirectToSearch=function(t){var n=e.props,r=n.history,a=n.location,o=t.trim(),i=a.search.slice(1),s=Wm.a.parse(i,{ignoreQueryPrefix:!0});if(!o){var l=i.replace(/\b(user)=\b\w*\b(&?)/g,"");return r.push("/manage/user?".concat(l))}var u=Wm.a.stringify(Object(c.a)(Object(c.a)({},Object(m.omit)(s,["user"])),{},{user:o}));r.push("/manage/user?".concat(u))},e.debouncedSearch=Object(m.debounce)(e.redirectToSearch,500),e.handleChange=function(t){t.persist(),e.debouncedSearch(t.target.value)},e.handleAddUser=function(){e.props.history.push("/manage/addUser")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setInitialSearchValue()}},{key:"componentDidUpdate",value:function(e){var t=e.location.search,n=this.props.location.search;if(!Object(m.isEqual)(n,t)){var r=Wm.a.parse(n,{ignoreQueryPrefix:!0}).user;this.searchUsers(void 0==r?"":r)}}},{key:"componentWillUnmount",value:function(){this.currentRequest&&this.currentRequest.abort()}},{key:"setInitialSearchValue",value:function(){var e=Wm.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).user;this.inputRef.current.value=e||"",this.searchUsers(e)}},{key:"renderUserWrap",value:function(){var e=this.state.currentUserList;return e.length?e.map((function(e){return Object(a.jsx)(Nxe,{className:"col-md-6 col-xl-3",children:Object(a.jsx)(Axe,{to:"/manage/user/".concat(e.id),children:Object(a.jsx)(mxe,{photo:e.avatar_url,names:Yf(e)})})},e.id)})):Object(a.jsx)(Exe,{children:"Users not found"})}},{key:"render",value:function(){return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1",children:[Object(a.jsxs)(Sxe,{className:"d-flex",children:[Object(a.jsx)("div",{className:"col-md-4 col-xl-3",children:Object(a.jsx)("input",{type:"text",className:"form-control",ref:this.inputRef,onChange:this.handleChange,placeholder:"Search..."})}),Object(a.jsx)("div",{className:"col-md-4 col-xl-3",children:Object(a.jsx)(Cg,{onClick:this.handleAddUser,className:"btn",children:"New User"})})]}),Object(a.jsxs)(Cxe,{className:"d-flex flex-wrap flex-grow-1",children:[this.state.isLoading&&Object(a.jsx)(Oxe,{}),this.renderUserWrap()]})]})}}]),n}(h.a.PureComponent),Rxe=Object(LO.compose)(v.g,Object(b.b)(null))(Ixe);function Dxe(){var e=Object(f.a)(["\n    width: ",";\n    padding: 10px;\n    border: 1px solid ",";\n    border-radius: 6px;\n    margin: 10px 0px 10px 0px;\n    : disabled {\n        color: ",'\n        cursor: not-allowed;\n    }\n    : focus {\n        color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);\n    ::placeholder {\n      color: "#ffc107";\n    }\n  }\n']);return Dxe=function(){return e},e}function Mxe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 400;\n"]);return Mxe=function(){return e},e}function Pxe(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return Pxe=function(){return e},e}function Lxe(){var e=Object(f.a)(["\n  width: 320px;\n  margin: 0px 0px 11px 0;\n"]);return Lxe=function(){return e},e}function Fxe(){var e=Object(f.a)(["\n  width: ",";\n  :focus  {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Fxe=function(){return e},e}function Uxe(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return Uxe=function(){return e},e}var Vxe,Bxe=x.default.div(Uxe()),Jxe=Object(x.default)(m7.a)(Fxe(),(function(e){return e.width})),zxe=x.default.div(Lxe()),qxe=x.default.div(Pxe()),Wxe=[{value:"equipment",label:"Equipment "},{value:"materials",label:"Materials "},{value:"labour",label:"Labour "}],Hxe=x.default.span(Mxe(),y.gray4),Gxe=x.default.input(Dxe(),(function(e){return e.width}),y.gray2,y.gray4),Yxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedCategories:{},tableItems:[],insurerContractOption:[],selectedContractOptionValue:{},unitOption:[],loading:!1},e.getAllContracts=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,dH.getAllContracts();case 4:n=t.sent,e.setState({tableItems:n,loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Qm(Vm.Danger,"This status can't be applied");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getMaterialUnit=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,dH.getAllMeasureUnits();case 4:n=t.sent.data,e.setState({unitOption:n,loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Qm(Vm.Danger,"This status can't be applied");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getListInsurerContracts=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,dH.getListInsurerContracts();case 4:n=t.sent,(r=Object(Dm.a)(n)).map((function(e){return e.label=e.description,e.value=e.id,delete e.description,delete e.id,delete e.contact_id,delete e.contract_number,delete e.created_at,delete e.effect_date,delete e.termination_date,e})),e.setState({insurerContractOption:r,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),Qm(Vm.Danger,"This status can't be applied");case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.handleOnBlurChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={name:r.name,sell_cost_per_unit:r.sell_cost_per_unit,up_to_units:r.up_to_units,up_to_amount:r.up_to_amount},t.next=4,dH.Updatecontract(r.insurer_contract_id,r.material_id,a);case 4:t.sent&&e.getAllContracts(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Qm(Vm.Danger,"Record is not updated");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleSelectModelOption=function(t){e.setState({selectedCategories:t})},e.handleSelectContractOption=function(t){e.setState({selectedContractOptionValue:t})},e.handleChangeCustomMaterial=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.name=r),e})),e.setState({tableItems:a})},e.handleChangeSellCostPerUnit=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.sell_cost_per_unit=r),e})),e.setState({tableItems:a})},e.handleChangeSellUptoUnit=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.up_to_units=r),e})),e.setState({tableItems:a})},e.handleChangeSellUptoAmount=function(t,n){var r=t.target.value,a=Object(Dm.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.up_to_amount=r),e})),e.setState({tableItems:a})},e.contractColoumns=function(){return[{id:"contractMaterial",header:Object(a.jsx)(Hxe,{children:"Material"}),width:"20%",type:mte.Text,hidden:!1,cell:function(e){return Object(a.jsx)("div",{children:e.material.name})}},{id:"contractCustomMaterial",header:Object(a.jsx)(Hxe,{children:"Custom Material Name"}),width:"20%",type:mte.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Gxe,{type:"text",width:"100%",value:t.name,placeholder:t.name,onChange:function(n){return e.handleChangeCustomMaterial(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"contractUnit",header:Object(a.jsx)(Hxe,{children:"Unit"}),width:"10%",type:mte.Text,hidden:!1,cell:function(t){var n=e.state.unitOption.find((function(e){return e.id===t.material.measure_unit_id}));return Object(a.jsx)("div",{children:n.name})}},{id:"contractSellCost",header:Object(a.jsx)(Hxe,{children:"Sell Cost per Unit"}),width:"10%",type:mte.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Gxe,{type:"number",width:"100%",value:t.sell_cost_per_unit,placeholder:t.sell_cost_per_unit,onChange:function(n){return e.handleChangeSellCostPerUnit(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"contractSellupUnit",header:Object(a.jsx)(Hxe,{children:"Sell Up-to Units"}),width:"10%",type:mte.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Gxe,{type:"number",width:"100%",value:t.up_to_units,placeholder:t.up_to_units,onChange:function(n){return e.handleChangeSellUptoUnit(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"contractSellUpAmount",header:Object(a.jsx)(Hxe,{children:"Sell Up-to Amount"}),width:"10%",type:mte.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Gxe,{type:"number",width:"100%",value:t.up_to_amount,placeholder:t.up_to_amount,onChange:function(n){return e.handleChangeSellUptoAmount(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.getListInsurerContracts(),this.getMaterialUnit().then((function(){e.getAllContracts()}))}},{key:"render",value:function(){return Object(a.jsxs)(Bxe,{className:"d-flex flex-column",children:[!0===this.state.loading?Object(a.jsx)(av,{size:40,color:y.gray0}):null,!0===this.state.loading?Object(a.jsx)(av,{size:40,color:y.gray0}):Object(a.jsx)(zxe,{children:Object(a.jsx)(Jxe,{width:"420px",defaultValue:this.state.insurerContractOption[0],options:this.state.insurerContractOption,onChange:this.handleSelectContractOption})}),Object(a.jsx)(zxe,{children:Object(a.jsx)(Jxe,{width:"300px",options:Wxe,onChange:this.handleSelectModelOption})}),Object(a.jsx)(qxe,{children:Object(a.jsx)(Age,{children:Object(a.jsx)(Uie,{useCustomStyle:!0,dataSource:this.state.tableItems,columnsDefinition:this.contractColoumns()})})})]})}}]),n}(h.a.PureComponent),Qxe=sv({first_name:[uv],last_name:[uv],role:[uv],purchase_order_approve_limit:[pv],credit_note_approval_limit:[pv],invoice_approve_limit:[pv],working_hours_per_week:[pv]});function Kxe(){var e=Object(f.a)(["\n  color: ",";\n  padding: 2px 4px;\n  border-radius: 2px;\n  background: ",";\n  cursor: ",";\n\n  :hover {\n    color: ",";\n  }\n"]);return Kxe=function(){return e},e}function Zxe(){var e=Object(f.a)(["\n  position: relative;\n  overflow: hidden;\n\n  :hover::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: ",";\n    transition-duration: 0.3s;\n    opacity: 0.2;\n  }\n\n  > input {\n    cursor: pointer;\n    position: absolute;\n    visibility: hidden;\n    width: 100%;\n    height: 100%;\n  }\n"]);return Zxe=function(){return e},e}function Xxe(){var e=Object(f.a)(["\n  border-radius: 4px;\n  cursor: ",";\n  border: ",";\n"]);return Xxe=function(){return e},e}!function(e){e[e.b=1]="b",e[e.B=8]="B",e[e.kb=1024]="kb",e[e.kB=8192]="kB",e[e.mb=1048576]="mb",e[e.mB=8388608]="mB"}(Vxe||(Vxe={}));var $xe=x.default.label(Xxe(),(function(e){return!e.disabled&&"pointer"}),(function(e){return e.isHavingImage&&"1px solid ".concat(y.gray2)})),eye=Object(x.default)(LS)(Zxe(),y.blue6),tye=x.default.div(Kxe(),(function(e){return e.disabled?"".concat(y.gray4," !important"):"".concat(y.blue1)}),(function(e){return!e.disabled&&y.gray2}),(function(e){return!e.disabled&&"pointer"}),y.white);function nye(e){var t=e.size,n=void 0===t?60:t,r=e.initialUrl,o=e.handleSave,i=e.initials,c=e.disabled,s=e.allowDimension,l=void 0===s?300:s,u=e.allowSize,d=void 0===u?2:u,h=e.isNewUser,b=Object(p.useState)(null),f=Object(w.a)(b,2),m=f[0],j=f[1],v=Object(p.useState)(!1),O=Object(w.a)(v,2),g=O[0],x=O[1],y=Object(p.useState)(r),_=Object(w.a)(y,2),k=_[0],S=_[1];Object(p.useEffect)((function(){return function(){m&&k&&window.URL.revokeObjectURL(k)}}),[m]);var C=!(!k&&!m);return Object(a.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(a.jsx)($xe,{isHavingImage:C,disabled:c,children:Object(a.jsxs)(eye,{wh:n,fontSize:!0===h?"1em":"1.5em",backgroundUrl:k||"",children:[!C&&i,Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&function(e){var t=document.createElement("img"),n=window.URL.createObjectURL(e);return t.src=n,new Promise((function(r,a){t.onload=function(){return(t.naturalWidth>l||t.naturalWidth>l)&&(window.URL.revokeObjectURL(n),a("Resolution limit: ".concat(l,"x").concat(l,"px"))),e.size>d*Vxe.mB&&a("Image must be smaller than ".concat(d*Vxe.mB," byte")),Promise.resolve()}}))}(t).then((function(){j(t),x(!0),S(window.URL.createObjectURL(t))})).catch((function(e){return Qm(Vm.Warning,e)}))},disabled:c,accept:"image/*",title:"Avatar"})]})}),!c&&Object(a.jsx)(tye,{disabled:!g,onClick:function(){g&&o(m).then((function(){return x(!1)}))},children:!0===h?"Add":"Change"})]})}var rye,aye=h.a.memo(nye),oye=n(585),iye=n.n(oye);function cye(){var e=Object(f.a)(["\n  overflow: auto;\n  max-height: ",";\n  width: 100%;\n"]);return cye=function(){return e},e}!function(e){e.onFocus="onFocus",e.onBlur="onBlur"}(rye||(rye={}));var sye=x.default.div(cye(),(function(e){return"".concat(e.height,"px")})),lye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){return function(n){var r=e.props,a=r.input,o=a.onChange,i=a.value,c=r.onCheck;n.target.checked?(o([].concat(Object(Dm.a)(i),[t])),c&&c(t)):o(iye()(i,t))}},e.bindFieldEvents=function(t){var n=e.props.input,r=n[t],a=n.value;return r?function(){return r(a)}:function(){return null}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.meta,o=t.label,i=t.direction,c=void 0===i?wJ.horizontal:i,s=t.height,l=void 0===s?220:s,u=t.disabled,d=t.input.value,p=r.touched&&r.error;return Object(a.jsxs)("div",{className:"form-group",children:[o&&Object(a.jsx)(ZF,{children:o}),Object(a.jsx)(sye,{height:l,className:"checkbox-list-wrapper",children:n&&n.map((function(t,n){return Object(a.jsx)(PJ,{value:d.includes(t.id),disabled:t.disabled||u,unremovable:t.unremovable,label:t.label,propsForForm:{onChange:e.onChange(t.id),onBlur:e.bindFieldEvents(rye.onBlur),onFocus:e.bindFieldEvents(rye.onFocus)},direction:c},n)}))}),p&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:r.error})]})}}]),n}(p.PureComponent);function uye(){var e=Object(f.a)(["\n  max-width: 1140px;\n"]);return uye=function(){return e},e}function dye(){var e=Object(f.a)(["\n  padding: 20px;\n"]);return dye=function(){return e},e}function pye(){var e=Object(f.a)(["\n  margin-bottom: 20px;\n"]);return pye=function(){return e},e}function hye(){var e=Object(f.a)(["\n  margin-left: ",";\n  margin-right: ",";\n"]);return hye=function(){return e},e}function bye(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n  margin-left: 0;\n"]);return bye=function(){return e},e}var fye,mye="row col-lg-8",jye="row col-10",vye="15px",Oye=x.default.div(bye(),Bf.bold),gye=Object(x.default)(Qj)(hye(),vye,vye),xye=x.default.form(pye()),yye=x.default.div(dye()),wye=x.default.div(uye()),_ye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).companyLoadController=void 0,e.handleSubmit=function(t){return t.preventDefault(),e.props.handleSubmit(e.props.onSubmit)()},e.getOptionLabel=function(e){return function(t){return t[e]}},e.contactGetLabel=function(e){switch(e.contact_type){case ev.company:return e.legal_name;case ev.person:var t=e,n=t.last_name;return t.first_name+" "+n}},e.transformToCheckbox=function(t){var n=e.props.primaryLocation,r=n&&n.id;return{id:t.id,label:t.name,unremovable:!(!r||r!==t.id)}},e.loadContacts=function(t){e.companyLoadController&&e.companyLoadController.abort();var n=Jv.searchContactWC({term:t}),r=n.controller,a=n.promise;return e.companyLoadController=r,a.then((function(e){return e.data}))},e.debouncedLoadContact=_v()(e.loadContacts,700),e.handleChangeLocation=function(t){var n=e.props,r=n.change,a=n.primaryLocation,o=n.locationList;a||r("primary_location",o.find((function(e){return e.id===t})))},e.optionToValue=function(e){return e.id.toString()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.roleList,n=e.locationList,r=e.onDelete,o=e.changeAvatar,i=e.user,c=e.isCurrentUser,s=e.dirty,l=e.valid,u=e.isDisabledDeleting,d=e.isDisabledUpdating;return Object(a.jsx)(xye,{className:"w-100",onSubmit:this.handleSubmit,autoComplete:"off",children:Object(a.jsxs)(wye,{className:"row d-flex",children:[Object(a.jsx)(yye,{children:Object(a.jsx)(aye,{disabled:!c||d,handleSave:o,initialUrl:i.avatar&&i.avatar.url,initials:Yf(i).initials,isNewUser:!1})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{className:mye,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"first_name",label:"Firstname *",placeholder:"Firstname",component:ZO,disabled:d})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"last_name",label:"Surname *",placeholder:"Surname",component:ZO,disabled:d})})]}),Object(a.jsxs)("div",{className:mye,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"email",label:"Email",placeholder:"Email",component:ZO,disabled:d})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"contact",label:"Contact",placeholder:"Start typing contact",component:rO,loadOptions:this.debouncedLoadContact,isClearable:!0,getOptionValue:this.optionToValue,getOptionLabel:this.contactGetLabel,disabled:d})})]}),Object(a.jsx)(gye,{className:jye}),Object(a.jsx)(Oye,{className:mye,children:"Roles & Permissions"}),Object(a.jsxs)("div",{className:mye,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"user_roles",label:"Role *",placeholder:"Role",component:Kv,isClearable:!0,options:t,getOptionValue:this.optionToValue,getOptionLabel:this.getOptionLabel("display_name"),disabled:d})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"password",label:"Password",placeholder:"Password",component:ZO,type:"password",disabled:d})})]}),Object(a.jsxs)("div",{className:mye,children:[Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(yv.a,{name:"invoice_approve_limit",label:"Invoices",placeholder:"limit",component:ZO,currency:!0,disabled:d})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(yv.a,{name:"purchase_order_approve_limit",label:"Purchase Orders",placeholder:"limit",component:ZO,currency:!0,disabled:d})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(yv.a,{name:"credit_note_approval_limit",label:"Credit Notes",placeholder:"limit",component:ZO,currency:!0,disabled:d})})]}),Object(a.jsx)(Oye,{className:mye,children:"Location access"}),Object(a.jsx)("div",{className:mye,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"primary_location",label:"Primary location",placeholder:"Location",component:Kv,options:n,getOptionValue:this.optionToValue,getOptionLabel:this.getOptionLabel("name"),disabled:d})})}),Object(a.jsx)("div",{className:mye,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{component:lye,name:"add_location",onCheck:this.handleChangeLocation,list:n.map(this.transformToCheckbox),label:"Additional location",disabled:d})})}),Object(a.jsx)(gye,{className:jye}),Object(a.jsx)(Oye,{className:mye,children:"Human Resources"}),Object(a.jsx)("div",{className:mye,children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"working_hours_per_week",label:"Working hours per week",placeholder:"Hours",component:ZO,disabled:d})})}),Object(a.jsxs)("div",{className:mye,children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Cg,{className:"btn",type:"submit",disabled:d||!s||!l,children:"Save"})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(qce,{className:"btn",type:"button",onClick:r,disabled:u,children:"Delete"})})]})]})]})})}}]),n}(h.a.PureComponent),kye=Object(LO.compose)(Object(Gj.a)({form:"UserForm",validate:Qxe,enableReinitialize:!0}),Object(UO.a)({primaryLocation:"primary_location"}))(_ye),Sye=function(e){return{first_name:e.first_name&&e.first_name.trim(),last_name:e.last_name&&e.last_name.trim(),working_hours_per_week:+e.working_hours_per_week,purchase_order_approve_limit:+e.purchase_order_approve_limit,credit_note_approval_limit:+e.credit_note_approval_limit,invoice_approve_limit:+e.invoice_approve_limit}};!function(e){e.user="user",e.userRoles="userRoles",e.allRoles="allRoles",e.allLocations="allLocations",e.addingRoles="addingRoles",e.removeRoles="removeRoles"}(fye||(fye={}));var Cye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLoading:!0,isInitial:!0,user:void 0,userRoles:[],allLocations:[],allRoles:[]},e.activeRequestList={},e.removeRequest=function(t){e.activeRequestList[t]&&delete e.activeRequestList[t]},e.removeRequestChained=function(t){return function(n){return e.removeRequest(t),n}},e.isAllow=function(t){return e.props.currentContext.has(t)},e.setStateChained=function(t){return function(){return e.setState(t),Promise.resolve()}},e.requestFormData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match,e.activeRequestList={},r=[{fetch:uE.getUserWithControl(n.params.id),stateName:fye.user},{fetch:uE.getUserRoleWithControl(n.params.id),stateName:fye.userRoles},{fetch:uE.getRolesWithControl(),stateName:fye.allRoles},{fetch:sg.getLocationsWithController({per_page:XO.Huge}),stateName:fye.allLocations}],a=[],r.forEach((function(t){a.push(e.wrapControllerRequest(t.fetch,t.stateName).then((function(n){return e.setState(Object(k.a)({},t.stateName,n.data))})))})),t.abrupt("return",Promise.all(a));case 6:case"end":return t.stop()}}),t)}))),e.handleSave=function(t){return e.isAllowUpdateUser?(e.setState({isLoading:!0}),e.updateUserInfo(t).then(e.checkAndUpdateRole(t)).then(e.requestFormData).then(e.setStateChained({isLoading:!1})).catch((function(t){return"AbortError"===t.name?Promise.resolve():(e.setState({isLoading:!1}),Mg(t))}))):Qm(Vm.Warning,"You have not permission for updating user")},e.extendRequestByLocation=function(t){var n=t.formData,r=t.resultDiff,a=n.primary_location,o=n.add_location,i=Object(c.a)({},r);return!a||a.id===(e.primaryUserLocation&&e.primaryUserLocation.id)&&Object(m.isEqual)(o,e.additionalUserLocations.map((function(e){return e.id})))||(i=Object(c.a)(Object(c.a)({},r),{},{locations:o,primary_location_id:a.id})),Promise.resolve({formData:n,resultDiff:i})},e.extendRequestByContact=function(t){var n=t.formData,r=t.resultDiff,a=n.contact,o=Object(c.a)({},r);return(a&&a.id)!==e.state.user.contact_id&&(o=Object(c.a)(Object(c.a)({},o),{},{contact_id:a.id||null})),Promise.resolve({formData:n,resultDiff:o})},e.extendRequestByPassword=function(e){var t=e.formData,n=e.resultDiff,r=t.password&&t.password.trim(),a=Object(c.a)({},n);return r&&(a=Object(c.a)(Object(c.a)({},a),{},{password:r})),Promise.resolve({formData:t,resultDiff:a})},e.updateUserInfo=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.user,a=Object(m.pickBy)(Sye(n),(function(e,t){return!Object(m.isEqual)(r[t],e)})),t.next=4,Promise.resolve({formData:n,resultDiff:a}).then(e.extendRequestByLocation).then(e.extendRequestByContact).then(e.extendRequestByPassword);case 4:if(o=t.sent,i=o.resultDiff,!Object(m.isEmpty)(i)){t.next=8;break}return t.abrupt("return",Promise.resolve());case 8:return t.abrupt("return",uE.updateUserData(+e.props.match.params.id,i));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkAndUpdateRole=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.state.userRoles,a=e.props.match.params.id,o=r[0]&&r[0].id,(i=t.user_roles&&t.user_roles.id)!==o){n.next=6;break}return n.abrupt("return",Promise.resolve(t));case 6:if(!o){n.next=9;break}return n.next=9,e.wrapControllerRequest(uE.removeRoleFromUserWC(a,[o]),fye.removeRoles);case 9:if(!i){n.next=12;break}return n.next=12,e.wrapControllerRequest(uE.addRoleToUserWC(a,[i]),fye.addingRoles);case 12:case"end":return n.stop()}}),n)})))},e.updateUserInStore=function(){var t=e.props.dispatch,n=e.state.user;e.isCurrentUser&&n&&(t(yP(n)),t(CP()))},e.handleDelete=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAllowDeleteUser){t.next=2;break}return t.abrupt("return",Qm(Vm.Warning,"You have not permission for deleting user"));case 2:return n=e.props,r=n.history.replace,a=n.match.params.id,o=n.dispatch,t.next=5,o(Sw("Confirm","Are you sure to delete user ".concat(e.state.user.full_name||""," ?")));case 5:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:e.setState({isLoading:!0}),uE.deleteUser(+a).then((function(){return r("/manage/user")})).catch((function(t){e.setState({isLoading:!1}),Qm(Vm.Warning,"User have not been deleted")}));case 10:case"end":return t.stop()}}),t)}))),e.handleSetAvatar=function(t){return e.setState({isLoading:!0}),uE.setAvatar(t).then((function(){return e.props.dispatch(kP())})).catch((function(e){return Qm(Vm.Warning,"Avatar have not been changed")})).finally(e.setStateChained({isLoading:!1}))},e.filterUserLocation=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return e?t.primary:!t.primary}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),this.requestFormData().then(this.setStateChained({isInitial:!1,isLoading:!1})).catch((function(t){"AbortError"!==t.name&&(Qm(Vm.Warning,"The form is not fully loaded"),e.setState({isInitial:!1,isLoading:!1}))}))}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.activeRequestList).forEach((function(t){var n=e.activeRequestList[t];n&&n.abort()}))}},{key:"componentDidUpdate",value:function(e,t){t.user!==this.state.user&&this.updateUserInStore()}},{key:"wrapControllerRequest",value:function(e,t){var n=e.promise,r=e.controller;return r&&(this.activeRequestList[t]=r),n.then(this.removeRequestChained(t))}},{key:"renderForm",value:function(){var e=this.state,t=e.allRoles,n=e.user,r=e.allLocations;return Object(a.jsx)(kye,{onSubmit:this.handleSave,onDelete:this.handleDelete,isDisabledDeleting:!this.isAllowDeleteUser,isDisabledUpdating:!this.isAllowUpdateUser,changeAvatar:this.handleSetAvatar,initialValues:this.formInitialValues,user:n,isCurrentUser:this.isCurrentUser,roleList:t,locationList:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isInitial;return Object(a.jsxs)(h.a.Fragment,{children:[t&&Object(a.jsx)(Oxe,{}),!n&&this.renderForm()]})}},{key:"isAllowDeleteUser",get:function(){return this.isAllow(Dw.USERS_DELETE)}},{key:"isAllowUpdateUser",get:function(){return this.isAllow(Dw.USERS_UPDATE)}},{key:"isCurrentUser",get:function(){return+this.props.match.params.id===this.props.currentUserId}},{key:"primaryUserLocation",get:function(){return this.state.user.locations.find(this.filterUserLocation())}},{key:"additionalUserLocations",get:function(){return this.state.user.locations.filter(this.filterUserLocation(!1))}},{key:"formInitialValues",get:function(){var e=this.state,t=e.user,n=e.userRoles;return Object(c.a)(Object(c.a)({},t),{},{primary_location:this.primaryUserLocation,add_location:this.additionalUserLocations.map((function(e){return e.id})),user_roles:n&&n[0]})}}]),n}(h.a.PureComponent);var Nye=Object(LO.compose)(v.g,Jae(Cw),Object(b.b)((function(e){return{currentUserId:NP(e)}})))(Cye),Eye=sv({first_name:[uv],last_name:[uv],role:[uv],email:[uv,jv],password:[uv,function(e){return!e||/^(?=.*[A-Z])(?=.*[ !"#$%&\'()*+\,\-\.\/:;<=>?@[\]^_`{|}~\x5c])(?=.*[0-9])(?=.*[a-z]).{8,}$/i.test(e)?void 0:"Password must contain at least one uppercase, one lowercase, one digit and one special character."}],purchase_order_approve_limit:[pv],credit_note_approval_limit:[pv],invoice_approve_limit:[pv],working_hours_per_week:[pv]});function Aye(){var e=Object(f.a)(["\n  max-width: 1140px;\n"]);return Aye=function(){return e},e}function Tye(){var e=Object(f.a)(["\n  margin-left: ",";\n  margin-right: ",";\n"]);return Tye=function(){return e},e}function Iye(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n  margin-left: 0;\n"]);return Iye=function(){return e},e}function Rye(){var e=Object(f.a)(["\n  margin-bottom: 20px;\n"]);return Rye=function(){return e},e}var Dye,Mye=x.default.form(Rye()),Pye="row col-lg-8",Lye="row col-10",Fye="15px",Uye=x.default.div(Iye(),Bf.bold),Vye=Object(x.default)(Qj)(Tye(),Fye,Fye),Bye=x.default.div(Aye()),Jye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={rolelist:[],locationList:[]},e.getLocation=function(){sg.getLocationsWithController({per_page:XO.Huge}).promise.then((function(t){e.setState({locationList:t.data})}))},e.companyLoadController=void 0,e.optionToValue=function(e){return e.id.toString()},e.getOptionLabel=function(e){return function(t){return t[e]}},e.loadContacts=function(t){e.companyLoadController&&e.companyLoadController.abort();var n=Jv.searchContactWC({term:t}),r=n.controller,a=n.promise;return e.companyLoadController=r,a.then((function(e){return e.data}))},e.contactGetLabel=function(e){switch(e.contact_type){case ev.company:return e.legal_name;case ev.person:var t=e,n=t.last_name;return t.first_name+" "+n}},e.debouncedLoadContact=_v()(e.loadContacts,700),e.handleChangeLocation=function(t){var n=e.props,r=n.change,a=n.primaryLocation,o=e.state.locationList;a||r("primary_location",o.find((function(e){return e.id===t})))},e.transformToCheckbox=function(t){var n=e.props.primaryLocation,r=n&&n.id;return{id:t.id,label:t.name,unremovable:!(!r||r!==t.id)}},e.handleSubmit=function(t){return t.preventDefault(),e.props.handleSubmit(e.props.onSubmit)()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;uE.getRolesWithControl().promise.then((function(t){e.setState({rolelist:t.data})})),this.getLocation()}},{key:"render",value:function(){var e=this.state,t=e.rolelist,n=e.locationList,r=this.props,o=r.valid,i=r.dirty;return Object(a.jsx)(Mye,{className:"w-100",onSubmit:this.handleSubmit,autoComplete:"off",children:Object(a.jsx)(Bye,{className:"row d-flex",children:Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{className:Pye,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"first_name",label:"Firstname *",placeholder:"Firstname",component:ZO})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"last_name",label:"Surname *",placeholder:"Surname",component:ZO})})]}),Object(a.jsxs)("div",{className:Pye,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"email",label:"Email *",placeholder:"Email",component:ZO})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"contact",label:"Contact",placeholder:"Start typing contact",component:rO,loadOptions:this.debouncedLoadContact,isClearable:!0,getOptionValue:this.optionToValue,getOptionLabel:this.contactGetLabel})})]}),Object(a.jsx)(Vye,{className:Lye}),Object(a.jsx)(Uye,{className:Pye,children:"Roles & Permissions"}),Object(a.jsxs)("div",{className:Pye,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"user_roles",label:"Role *",placeholder:"Role",component:Kv,isClearable:!0,options:t&&t,getOptionValue:this.optionToValue,getOptionLabel:this.getOptionLabel("display_name")})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"password",label:"Password *",placeholder:"Password",component:ZO,type:"password"})})]}),Object(a.jsxs)("div",{className:Pye,children:[Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(yv.a,{name:"invoice_approve_limit",label:"Invoices *",placeholder:"limit",component:ZO,currency:!0})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(yv.a,{name:"purchase_order_approve_limit",label:"Purchase Orders *",placeholder:"limit",component:ZO,currency:!0})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(yv.a,{name:"credit_note_approval_limit",label:"Credit Notes *",placeholder:"limit",component:ZO,currency:!0})})]}),Object(a.jsx)(Uye,{className:Pye,children:"Location access"}),Object(a.jsx)("div",{className:Pye,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{name:"primary_location",label:"Primary location",placeholder:"Location",component:Kv,options:n,getOptionValue:this.optionToValue,getOptionLabel:this.getOptionLabel("name")})})}),Object(a.jsx)("div",{className:Pye,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(yv.a,{component:lye,name:"add_location",onCheck:this.handleChangeLocation,list:n.map(this.transformToCheckbox),label:"Additional location"})})}),Object(a.jsx)(Vye,{className:Lye}),Object(a.jsx)(Uye,{className:Pye,children:"Human Resources"}),Object(a.jsx)("div",{className:Pye,children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"working_hours_per_week",label:"Working hours per week *",placeholder:"Hours",component:ZO})})}),Object(a.jsx)("div",{className:Pye,children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Cg,{className:"btn",type:"submit",disabled:!i||!o,children:"Save"})})})]})})})}}]),n}(h.a.PureComponent),zye=Object(LO.compose)(Object(Gj.a)({form:"UserForm",validate:Eye,enableReinitialize:!0}),Object(UO.a)({primaryLocation:"primary_location"}))(Jye);!function(e){e.user="user",e.userRoles="userRoles",e.allRoles="allRoles",e.allLocations="allLocations",e.addingRoles="addingRoles",e.removeRoles="removeRoles"}(Dye||(Dye={}));var qye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLoading:!1,isInitial:!0,user:void 0,userRoles:[],allLocations:[],allRoles:[],userId:0},e.getLocation=function(){sg.getLocationsWithController({per_page:XO.Huge}).promise.then((function(t){e.setState({allLocations:t.data})}))},e.activeRequestList={},e.removeRequestChained=function(t){return function(n){return e.removeRequest(t),n}},e.removeRequest=function(t){e.activeRequestList[t]&&delete e.activeRequestList[t]},e.requestFormData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.userId,r=[{fetch:uE.getUserWithControl(n),stateName:Dye.user},{fetch:uE.getUserRoleWithControl(n),stateName:Dye.userRoles},{fetch:uE.getRolesWithControl(),stateName:Dye.allRoles},{fetch:sg.getLocationsWithController({per_page:XO.Huge}),stateName:Dye.allLocations}],a=[],r.forEach((function(t){a.push(e.wrapControllerRequest(t.fetch,t.stateName).then((function(n){return e.setState(Object(k.a)({},t.stateName,n.data))})))})),t.abrupt("return",Promise.all(a));case 5:case"end":return t.stop()}}),t)}))),e.setStateChained=function(t){return function(){return e.setState(t),Promise.resolve()}},e.isAllow=function(t){return e.props.currentContext.has(t)},e.checkAndUpdateRole=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state.userId,a=t.user_roles&&t.user_roles.id,n.next=4,e.wrapControllerRequest(uE.addRoleToUserWC(r,[a]),Dye.addingRoles);case 4:case"end":return n.stop()}}),n)})))},e.handleSubmit=function(t){return e.isAllowUpdateUser?(e.setState({isLoading:!0}),e.addNewUser(t).then((function(n){e.setState({userId:n.data.id},(function(){e.requestFormData().then(e.checkAndUpdateRole(t))}))})).then((function(){e.props.history.push("/manage/user")})).then(e.setStateChained({isLoading:!1})).catch((function(t){return"AbortError"===t.name?Promise.resolve():(e.setState({isLoading:!1}),Mg(t))}))):Qm(Vm.Warning,"You have not permission for updating user")},e.filterUserLocation=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return e?t.primary:!t.primary}},e.extendRequestByLocation=function(t){var n=t.formData,r=t.resultDiff,a=n.primary_location,o=n.add_location,i=Object(c.a)({},r);return!a||a.id===(e.primaryUserLocation&&e.primaryUserLocation.id)&&Object(m.isEqual)(o,e.additionalUserLocations.map((function(e){return e.id})))||(i=Object(c.a)(Object(c.a)({},r),{},{locations:o,primary_location_id:a.id})),Promise.resolve({formData:n,resultDiff:i})},e.extendRequestByContact=function(e){var t=e.formData,n=e.resultDiff,r=Object(c.a)({},n);return Promise.resolve({formData:t,resultDiff:r})},e.extendRequestByPassword=function(e){var t=e.formData,n=e.resultDiff,r=t.password&&t.password.trim(),a=Object(c.a)({},n);return r&&(a=Object(c.a)(Object(c.a)({},a),{},{password:r})),Promise.resolve({formData:t,resultDiff:a})},e.extendRequestByEmail=function(e){var t=e.formData,n=e.resultDiff,r=t.email&&t.email.trim(),a=Object(c.a)({},n);return r&&(a=Object(c.a)(Object(c.a)({},a),{},{email:r})),Promise.resolve({formData:t,resultDiff:a})},e.addNewUser=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(m.pickBy)(Sye(n)),t.next=3,Promise.resolve({formData:n,resultDiff:r}).then(e.extendRequestByLocation).then(e.extendRequestByContact).then(e.extendRequestByPassword).then(e.extendRequestByEmail);case 3:if(a=t.sent,o=a.resultDiff,!Object(m.isEmpty)(o)){t.next=7;break}return t.abrupt("return",Promise.resolve());case 7:return t.abrupt("return",uE.AddNewUser(o));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"wrapControllerRequest",value:function(e,t){var n=e.promise,r=e.controller;return r&&(this.activeRequestList[t]=r),n.then(this.removeRequestChained(t))}},{key:"renderForm",value:function(){return Object(a.jsx)(zye,{onSubmit:this.handleSubmit})}},{key:"render",value:function(){var e=this.state.isLoading;return Object(a.jsxs)(h.a.Fragment,{children:[e&&Object(a.jsx)(Oxe,{}),this.renderForm()]})}},{key:"isAllowUpdateUser",get:function(){return this.isAllow(Dw.USERS_UPDATE)}},{key:"primaryUserLocation",get:function(){return this.state.allLocations.find(this.filterUserLocation())}},{key:"additionalUserLocations",get:function(){return this.state.user.locations.filter(this.filterUserLocation(!1))}}]),n}(h.a.PureComponent),Wye=Object(LO.compose)(v.g,Jae(Cw),Object(b.b)(null))(qye);function Hye(){var e=Object(f.a)(["\n  transform: rotate(","deg);\n  cursor: pointer;\n  path,\n  circle,\n  line,\n  polyline,\n  polygon,\n  rect {\n    stroke: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle,\n  :hover polygon,\n  :hover rect,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return Hye=function(){return e},e}var Gye=Object(x.default)(Kj(["color","rotate"])(Ff))(Hye(),(function(e){return e.rotate}),(function(e){return e.color?e.color:y.black1}),y.blue4),Yye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={formOptions:[]},e.handleSubmit=function(){},e.renderVehicleList=function(t){var n=t.fields,r=n.getAll(),o=Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Car Brand"}),Object(a.jsx)(PL,{children:"Car Model"}),Object(a.jsx)(PL,{children:"Reg"}),Object(a.jsx)(PL,{children:"Car Type"}),Object(a.jsx)(PL,{children:"Out of Service"})]})}),Object(a.jsx)(LL,{children:n.map((function(t,n){return Object(a.jsxs)(UL,{className:"h-60",children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{type:"text",placeholder:"Enter brand",name:"".concat(t,".make"),"data-id":n,onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},validate:uv,component:ZO})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{type:"text",placeholder:"Enter model",name:"".concat(t,".model"),onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},component:ZO,validate:uv})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{type:"text",placeholder:"Enter Registeration",name:"".concat(t,".registration"),onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},component:ZO,validate:uv})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{type:"text",placeholder:"Enter Type",name:"".concat(t,".type"),onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},component:ZO,validate:uv})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{component:LJ,name:"".concat(t,".latest_status.type.makes_vehicle_unavailable"),onChange:function(t){return e.props.handleVehicleAvailability(t,r[n])}})}),Object(a.jsx)(FL,{className:"text-right",children:Object(a.jsx)(Gye,{name:Ef.Trash,size:20,rotate:0,color:y.black0,onClick:function(){return e.props.deleteItem(r[n])}})})]},"qn-row-".concat(n))}))})]})})});return Object(a.jsx)(a.Fragment,{children:o})},e.handleOptionChange=function(t){e.props.onFormSelectionChange(t)},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];this.props.locations.hasOwnProperty("data")&&(t=this.props.locations.data.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})));return this.props.vehcileFormDataList.filter((function(e){return null===e.rent_starts_at||""})),Object(a.jsx)(Cw.Consumer,{children:function(n){return Object(a.jsx)(mg,{children:Object(a.jsxs)("form",{onSubmit:e.handleSubmit,autoComplete:"off",children:[Object(a.jsx)("fieldset",{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"formOption",label:"",placeholder:"Location",component:Kv,options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(t){e.handleOptionChange(t)}})})})}),Object(a.jsx)("div",{className:"row m-b10",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Cg,{className:"btn",onClick:e.props.addNewItem,disabled:""===e.props.initialValues.formOption.id,children:"Add New"})})}),Object(a.jsx)(Hj.a,{name:"vehicleDataForm",component:e.renderVehicleList})]})})}})}}]),n}(h.a.PureComponent),Qye=Object(b.b)((function(e){return{userLocations:e.user.locations}}))(Object(LO.compose)(Object(Gj.a)({form:"VehcileForm",enableReinitialize:!0}))(Yye)),Kye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={formSelectedOption:{id:"",value:"",name:"Select Location"},isChanged:!1},e.onFormSelectionChange=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,e.setState({formSelectedOption:n}),t.next=4,r(e3(n.id));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(Sw("Confirm","Delete this item?",Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete vehicle ",n.type+" "+n.model,"? This action cannot be undone!."]})})})));case 3:if(!t.sent){t.next=9;break}return[],o=e.props.vehcileFormData.filter((function(e){return e.id!==n.id})),t.next=9,Q5.deleteVehcile(n.id).then((function(e){Qm(Vm.Success,"Vehicle deleted successfully"),r(t3(o))})).catch((function(e){Qm(Vm.Danger,e)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addNewItem=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.dispatch,a=[],a=Object.values(e.props.vehcileFormData),0,o=Math.max.apply(Math,Object(Dm.a)(Object.values(e.props.vehcileFormData).map((function(e){return e.id})))),i={id:o>0?o+1:1,location_id:e.state.formSelectedOption.id,type:"",make:"",model:"",registration:"",rent_starts_at:null,rent_ends_at:null,created_at:"",updated_at:"",deleted_at:null,latest_status:{}},a.push(i),r(t3(a)),n.preventDefault();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlurEvent=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(){return(i=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.hasOwnProperty("isError")){e.next=10;break}if(a.isError){e.next=10;break}if(""!==a.created_at){e.next=7;break}return e.next=5,Q5.createVehicle(a).then((function(e){r(e3(a.location_id)),Qm(Vm.Success,"Vehicle added successfully")})).catch((function(e){Qm(Vm.Danger,e)}));case 5:e.next=10;break;case 7:if(!t){e.next=10;break}return e.next=10,Q5.updateVehcile(a.id,a).then((function(e){Qm(Vm.Success,"Vehicle updated successfully")})).catch((function(e){Qm(Vm.Danger,e)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},r=e.props.dispatch,e.state.isChanged,{},a={},(a=e.props.vehcileFormData.find((function(e){return e.id===n.id}))).error_item_name="",a.isError=!1,""!==a.model&&""!==a.make&&""!==a.type&&""!==a.registeration)try{o(e.state.isChanged),e.state.isChanged&&e.setState({isChanged:!1})}catch(c){Qm(Vm.Danger,c)}return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleItemNameChangeEvent=function(t,n){var r=e.props.dispatch,a=j.a.cloneDeep(e.props.vehcileFormData),o={};Object.keys(a)&&(o=a.find((function(e){return e.id===n})),t.target.value!==o[t.target.name.split(".")[1]]&&e.setState({isChanged:!0}),o[t.target.name.split(".")[1]]=t.target.value,r(t3(a)))},e.handleVehicleAvailability=function(t,n){var r=e.props.dispatch,a={};function o(){return(o=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Q5.updateVehicleStatus(n.id,a).then((function(e){Qm(Vm.Success,"Vehicle status updated successfully"),r(e3(n.location_id))})).catch((function(e){Qm(Vm.Danger,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a=t?{status_type_id:"3"}:{status_type_id:"1"};try{!function(){o.apply(this,arguments)}()}catch(i){Qm(Vm.Danger,i)}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch;e(t3([])),e(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,sg.searchLocations();case 2:n=e.sent,t({type:Z5,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())}},{key:"render",value:function(){var e;return e={formOption:this.state.formSelectedOption,vehicleDataForm:this.props.vehcileFormData},Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(Qye,{deleteItem:this.deleteItem,addNewItem:this.addNewItem,vehcileFormDataList:this.props.vehcileFormData,onFormSelectionChange:this.onFormSelectionChange,formSelectedOption:this.state.formSelectedOption,locations:this.props.locations,onBlur:this.handleBlurEvent,onItemNameChange:this.handleItemNameChangeEvent,handleVehicleAvailability:this.handleVehicleAvailability,initialValues:e})})}}]),n}(h.a.PureComponent),Zye=Object(LO.compose)(Object(b.b)((function(e){return{vehcileFormData:e.vehcileFormOption.vehcileFormData,locations:e.vehcileFormOption.locations}})),v.g)(Kye),Xye="SETTINGS_WH_STORAGE_SPACE_TYPE",$ye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,N2.updateStorageSpaceType(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingStorageSpaceTypeUpdated,c),t.next=13;break;case 9:return t.next=11,N2.createStorageSpaceType(n);case 11:c=t.sent,uy.emit(Kg.WarehousingStorageSpaceTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:Xye,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,autoFocus:!0,validate:uv,itemProp:{autoFocus:!0}}),Object(a.jsx)(yv.a,{name:"is_chargeable",label:"Chargeable",direction:"horizontal",component:LJ})]})}}]),n}(p.PureComponent),ewe=Object(LO.compose)(Object(Gj.a)({form:Xye,initialValues:{is_chargeable:!1}}))($ye),twe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.WarehousingStorageSpaceTypeAdded,(function(){return e.props.spaceTypes.fetch()})),uy.listen(Kg.WarehousingStorageSpaceTypeRemoved,(function(){return e.props.spaceTypes.fetch()}))],e.componentDidMount=function(){e.props.spaceTypes.fetch()},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Storage Space Type",body:Object(a.jsx)(ewe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:Xye,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,N2.updateStorageSpaceType(t.id,r);case 4:a=n.sent,j.a.merge(t,a),n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 11:return n.prev=11,e.setState({working:!1}),n.finish(11);case 14:return n.abrupt("return",Promise.resolve());case 15:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})));return function(e){return n.apply(this,arguments)}}()},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t=this,n=this.props.spaceTypes,r=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(n.loading||r)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Space Types"})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Chargeable"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=n.data)||void 0===e?void 0:e.map((function(e){return Object(a.jsx)(awe,{form:"".concat(Xye,"_").concat(e.id),initialValues:e,item:e,onSubmit:t.onSubmit(e)},e.id)}))})]})})]})}}]),n}(p.PureComponent),nwe=Object(LO.compose)(Mm({spaceTypes:{fetch:N2.getStorageSpaceTypes}}))(twe),rwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete storage space type ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&N2.deleteStorageSpaceType(t.id).then((function(){uy.emit(Kg.WarehousingStorageSpaceTypeRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item);return console.log(t),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",autoFocus:!0,validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"is_chargeable",direction:"horizontal",component:LJ,wrapperClassName:"m-0",onChange:this.onFieldChange})}),Object(a.jsxs)(FL,{className:"text-right",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),t.is_chargeable&&Object(a.jsx)(Uf.c,{className:"mr-3",to:"/manage/warehousing/charges/".concat(t.id),children:Object(a.jsx)(Ff,{"data-tip":"View charging intervals","data-for":"grid_cell_tooltip",name:Ef.Costing,size:18})}),Object(a.jsx)(Uf.c,{to:"/manage/warehousing/spaces/".concat(t.id),children:Object(a.jsx)(Ff,{"data-tip":"View storage spaces","data-for":"grid_cell_tooltip",name:Ef.BulletList,size:18})}),Object(a.jsx)(Ff,{name:Ef.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(p.PureComponent),awe=Object(LO.compose)(Object(Gj.a)({form:Xye}))(rwe),owe="SETTINGS_WH_STORAGE_SPACE",iwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,N2.updateStorageSpace(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingStorageSpaceUpdated,c),t.next=13;break;case 9:return t.next=11,N2.createStorageSpace(n);case 11:c=t.sent,uy.emit(Kg.WarehousingStorageSpaceAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.storageType,n=e.locations,r=e.submitting,o=e.handleSubmit;return Object(a.jsxs)("form",{id:owe,onSubmit:o(this.onSubmit),children:[r&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsxs)("strong",{children:["Space Type: ",t.name]}),Object(a.jsxs)("span",{className:"badge badge-warning ml-2",children:[t.is_chargeable?"":"Not "," Chargeable"]})]}),Object(a.jsx)(yv.a,{name:"location",label:"Location",component:Kv,options:n,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},validate:uv}),Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,autoFocus:!0,validate:uv,itemProp:{autoFocus:!0}}),Object(a.jsx)(yv.a,{name:"identifier",label:"Identifier",component:ZO,validate:uv})]})}}]),n}(p.PureComponent),cwe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:owe,initialValues:{is_chargeable:!1}}))(iwe),swe=n(110),lwe=n.n(swe),uwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.toggleZoom=function(t){t.preventDefault(),t.stopPropagation();var n=e.state.zoomIn;e.setState({zoomIn:!n})},e.onOutsideClick=function(t){var n;(null===(n=e.wrapper.current)||void 0===n?void 0:n.contains(t.target))||e.state.zoomIn&&e.setState({zoomIn:!1})},e.wrapper=h.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.onOutsideClick,!0)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.onOutsideClick,!0)}},{key:"render",value:function(){var e,t=this.props,n=t.zoom,r=t.dir,o=(t.ref,Object(Rm.a)(t,["zoom","dir","ref"])),i=this.state.zoomIn;return i&&n&&(o.size=n),Object(a.jsx)("div",{className:"position-relative",ref:this.wrapper,children:Object(a.jsx)("div",{onClick:n?this.toggleZoom:void 0,style:i?(e={position:"absolute",top:0},Object(k.a)(e,"right"===r?"left":"right",0),Object(k.a)(e,"zIndex",1),Object(k.a)(e,"boxShadow","0 0 5px"),Object(k.a)(e,"background","#fff"),Object(k.a)(e,"padding","10px"),Object(k.a)(e,"borderTop","2px solid blue"),Object(k.a)(e,"width",n+20),Object(k.a)(e,"height",n+20),e):void 0,children:Object(a.jsx)(lwe.a,Object(c.a)({},o))})})}}]),n}(p.Component);function dwe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return dwe=function(){return e},e}var pwe=x.default.div(dwe(),y.black0),hwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.WarehousingStorageSpaceAdded,(function(){return e.loadSpaces()})),uy.listen(Kg.WarehousingStorageSpaceRemoved,(function(){return e.loadSpaces()}))],e.componentDidMount=function(){var t=e.props,n=t.storageType,r=t.match.params.type_id;n.fetch(r),e.loadSpaces()},e.loadSpaces=function(t){var n=e.props,r=n.spaces,a=n.match.params.type_id;r.fetch(Object(c.a)({inventory_storage_space_type_id:a},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Storage Space",body:Object(a.jsx)(cwe,Object(c.a)(Object(c.a)({},r),{},{storageType:e.props.storageType.data,afterSubmit:e.hideModal})),id:owe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,N2.updateStorageSpace(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadSpaces({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r,o=this,i=this.props,c=i.storageType,s=i.spaces,l=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex-grow-1 mb-5 print-hide",children:[this.renderModal(),(s.loading||l)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Spaces"})}),Object(a.jsx)("div",{children:c.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Space Type: ",c.data.name," ",Object(a.jsxs)("span",{className:"badge badge-warning",children:[c.data.is_chargeable?"":"Not "," Chargeable"]}),"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item",{initialValues:{inventory_storage_space_type:c.data}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"\xa0"}),Object(a.jsx)(PL,{children:"Location"}),Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Identifier"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=s.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(mwe,{form:"".concat(owe,"_").concat(e.id),initialValues:e,item:e,onSubmit:o.onSubmit(e)},e.id)}))})]}),s.data&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:s.data.pagination,onChange:this.handlePagination})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(pwe,{className:"d-flex flex-wrap",children:null===(n=s.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.name})}),Object(a.jsx)(lwe.a,{value:btoa(JSON.stringify({t:V3.space,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}}]),n}(p.PureComponent),bwe=Object(LO.compose)(Mm({storageType:{fetch:N2.getStorageSpaceType},spaces:{fetch:N2.getStorageSpaces}}))(hwe),fwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete storage space ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&N2.deleteStorageSpace(t.id).then((function(){uy.emit(Kg.WarehousingStorageSpaceRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.locations),n=e.item,r=!!t.find((function(e){return!n.location||e.id===n.location.id}));return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{children:Object(a.jsx)(uwe,{value:btoa(JSON.stringify({t:V3.space,id:n.id})),size:30,zoom:150,dir:"right",level:"Q"})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"location",component:Kv,options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:r?Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange}):n.name}),Object(a.jsx)(FL,{children:r?Object(a.jsx)(yv.a,{name:"identifier",component:ZO,className:"m-0",autoFocus:!0,validate:uv,onChange:this.onFieldChange}):n.identifier}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(n)})})]})})}}]),n}(p.PureComponent),mwe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:owe}))(fwe),jwe="SETTINGS_WH_STORAGE_CONTAINER_TYPE",vwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,N2.updateStorageContainerType(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingStorageContainerTypeUpdated,c),t.next=13;break;case 9:return t.next=11,N2.createStorageContainerType(n);case 11:c=t.sent,uy.emit(Kg.WarehousingStorageContainerTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:jwe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,itemProp:{autoFocus:!0},validate:uv})]})}}]),n}(p.PureComponent),Owe=Object(LO.compose)(Object(Gj.a)({form:jwe}))(vwe),gwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.WarehousingStorageContainerTypeAdded,(function(){return e.props.containerTypes.fetch()})),uy.listen(Kg.WarehousingStorageContainerTypeRemoved,(function(){return e.props.containerTypes.fetch()}))],e.componentDidMount=function(){e.props.containerTypes.fetch()},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Storage Container Type",body:Object(a.jsx)(Owe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:jwe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,N2.updateStorageContainerType(t.id,r);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 9:return n.prev=9,e.setState({working:!1}),n.finish(9);case 12:return n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}()},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t=this,n=this.props.containerTypes,r=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(n.loading||r)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Container Types"})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=n.data)||void 0===e?void 0:e.map((function(e){return Object(a.jsx)(wwe,{form:"".concat(jwe,"_").concat(e.id),initialValues:e,item:e,onSubmit:t.onSubmit(e)},e.id)}))})]})})]})}}]),n}(p.PureComponent),xwe=Object(LO.compose)(Mm({containerTypes:{fetch:N2.getStorageContainerTypes}}))(gwe),ywe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete container type ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&N2.deleteStorageContainerType(t.id).then((function(){uy.emit(Kg.WarehousingStorageContainerTypeRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",autoFocus:!0,validate:uv,onChange:this.onFieldChange})}),Object(a.jsxs)(FL,{className:"text-right",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),Object(a.jsx)(Uf.c,{to:"/manage/warehousing/container/".concat(t.id),children:Object(a.jsx)(Ff,{"data-tip":"View storage containers","data-for":"grid_cell_tooltip",name:Ef.BulletList,size:18})}),Object(a.jsx)(Ff,{name:Ef.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(p.PureComponent),wwe=Object(LO.compose)(Object(Gj.a)({form:jwe}))(ywe),_we="SETTINGS_WH_STORAGE_CONTAINER",kwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,N2.updateStorageContainer(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingStorageContainerUpdated,c),t.next=13;break;case 9:return t.next=11,N2.createStorageContainer(n);case 11:c=t.sent,uy.emit(Kg.WarehousingStorageContainerAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerType,n=(e.locations,e.submitting),r=e.handleSubmit;return Object(a.jsxs)("form",{id:_we,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsxs)("strong",{children:["Container Type: ",t.name]})}),Object(a.jsx)(yv.a,{name:"label",label:"Label",component:ZO,autoFocus:!0,validate:uv,itemProp:{autoFocus:!0}}),Object(a.jsx)(yv.a,{name:"is_default",label:"Default",direction:"horizontal",component:LJ})]})}}]),n}(p.PureComponent),Swe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:_we,initialValues:{is_default:!1}}))(kwe);function Cwe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return Cwe=function(){return e},e}var Nwe=x.default.div(Cwe(),y.black0),Ewe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.WarehousingStorageContainerAdded,(function(){return e.loadData()})),uy.listen(Kg.WarehousingStorageContainerRemoved,(function(){return e.loadData()}))],e.componentDidMount=function(){var t=e.props,n=t.containerType,r=t.match.params.type_id;n.fetch(r),e.loadData()},e.loadData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.containers,o=r.match.params.type_id,a.fetch(Object(c.a)({inventory_storage_container_type_id:o},n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Storage Container",body:Object(a.jsx)(Swe,Object(c.a)(Object(c.a)({},r),{},{containerType:e.props.containerType.data,afterSubmit:e.hideModal})),id:_we,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){var a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,N2.updateStorageContainer(t.id,r);case 4:if(a=n.sent,t.is_default||!a.is_default){n.next=10;break}return n.next=8,e.loadData();case 8:n.next=11;break;case 10:j.a.merge(t,a);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 16:return n.prev=16,e.setState({working:!1}),n.finish(16);case 19:return n.abrupt("return",Promise.resolve());case 20:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r,o=this,i=this.props,c=i.containerType,s=i.containers,l=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex-grow-1 mb-5 print-hide",children:[this.renderModal(),(s.loading||l)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Containers"})}),Object(a.jsx)("div",{children:c.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Container Type: ",c.data.name,"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item",{initialValues:{inventory_storage_container_type:c.data,is_default:!1}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"\xa0"}),Object(a.jsx)(PL,{children:"Label"}),Object(a.jsx)(PL,{children:"Default"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=s.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(Iwe,{form:"".concat(_we,"_").concat(e.id),initialValues:e,item:e,onSubmit:o.onSubmit(e)},e.id)}))})]}),s.data&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:s.data.pagination,onChange:this.handlePagination})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(Nwe,{className:"d-flex flex-wrap",children:null===(n=s.data)||void 0===n||null===(r=n.data)||void 0===r?void 0:r.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.label})}),Object(a.jsx)(lwe.a,{value:btoa(JSON.stringify({t:V3.container,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}}]),n}(p.PureComponent),Awe=Object(LO.compose)(Mm({containerType:{fetch:N2.getStorageContainerType},containers:{fetch:N2.getStorageContainers}}))(Ewe),Twe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete container ",Object(a.jsx)("strong",{children:t.label}),"?"]})})));case 3:n.sent&&N2.deleteStorageContainer(t.id).then((function(){uy.emit(Kg.WarehousingStorageContainerRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.locations,e.item);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{children:Object(a.jsx)(uwe,{value:btoa(JSON.stringify({t:V3.container,id:t.id})),size:30,zoom:150,dir:"right",level:"Q"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"label",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"is_default",direction:"horizontal",component:LJ,wrapperClassName:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),Iwe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:_we}))(Twe),Rwe="SETTINGS_WH_STANDARD_ITEM",Dwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,N2.updateStandardItem(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingStandardItemUpdated,c),t.next=13;break;case 9:return t.next=11,N2.createStandardItem(n);case 11:c=t.sent,uy.emit(Kg.WarehousingStandardItemAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:Rwe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,validate:uv,itemProp:{autoFocus:!0}})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"restoration_cost",label:"Restoration Cost",component:ZO,type:"number",currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"restoration_hours",label:"Restoration Hours",component:ZO,type:"number",min:0,step:1,validate:bv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"assessment_fee",label:"Assessment Fee",component:ZO,type:"number",currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"estimated_replacement_cost",label:"Estimated Replacement Cost",component:ZO,type:"number",currency:!0})})]})]})}}]),n}(p.PureComponent),Mwe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:Rwe}))(Dwe),Pwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.WarehousingStandardItemAdded,(function(){return e.loadStandardItems()})),uy.listen(Kg.WarehousingStandardItemRemoved,(function(){return e.loadStandardItems()}))],e.componentDidMount=function(){e.loadStandardItems()},e.loadStandardItems=function(t){var n=e.props,r=n.standardItems,a=n.match.params.type_id;r.fetch(Object(c.a)({inventory_storage_standardItem_type_id:a},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Standard Item",body:Object(a.jsx)(Mwe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:Rwe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,N2.updateStandardItem(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadStandardItems({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.standardItems,i=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(o.loading||i)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Standard Items"})})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Restoration Cost"}),Object(a.jsx)(PL,{children:"Restoration Hours"}),Object(a.jsx)(PL,{children:"Assessment Fee"}),Object(a.jsx)(PL,{children:"Replacement Cost"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(Uwe,{form:"".concat(Rwe,"_").concat(e.id),initialValues:e,item:e,onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=o.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:o.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent),Lwe=Object(LO.compose)(Mm({standardItems:{fetch:N2.getStandardItems}}))(Pwe),Fwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete standard item ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&N2.deleteStandardItem(t.id).then((function(){uy.emit(Kg.WarehousingStandardItemRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.locations,e.item);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"restoration_cost",component:ZO,type:"number",min:0,currency:!0,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"restoration_hours",component:ZO,type:"number",min:0,step:1,validate:bv,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"assessment_fee",component:ZO,type:"number",min:0,currency:!0,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"estimated_replacement_cost",component:ZO,type:"number",min:0,currency:!0,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),Uwe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:Rwe}))(Fwe),Vwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match.url;return Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(e,"/space-type"),component:nwe}),Object(a.jsx)(v.b,{path:"".concat(e,"/spaces/:type_id"),component:bwe}),Object(a.jsx)(v.b,{path:"".concat(e,"/charges/:type_id"),component:B8}),Object(a.jsx)(v.b,{path:"".concat(e,"/container-type"),component:xwe}),Object(a.jsx)(v.b,{path:"".concat(e,"/container/:type_id"),component:Awe}),Object(a.jsx)(v.b,{path:"".concat(e,"/standard-item"),component:Lwe}),Object(a.jsx)(v.a,{to:"".concat(e,"/space-type")})]})}}]),n}(p.PureComponent),Bwe="SETTINGS_LME_CHARGING_INTERVAL",Jwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},i=o.id,c=e.props.equipmentCategory,!i){t.next=10;break}return t.next=6,dH.updateEquipmentChargingInterval(c.id,i,n);case 6:s=t.sent,uy.emit(Kg.LME_ChargingIntervalUpdated,s),t.next=14;break;case 10:return t.next=12,dH.createEquipmentChargingInterval(c.id,n);case 12:s=t.sent,uy.emit(Kg.LME_ChargingIntervalAdded,s);case 14:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,s),t.abrupt("return",s);case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.equipmentCategory,n=e.submitting,r=e.handleSubmit;return Object(a.jsxs)("form",{id:Bwe,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsxs)("strong",{children:["Equipment Category: ",t.name]})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charging_interval",label:"Interval",component:Kv,options:Object.keys(C8).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charging_rate_per_interval",label:"Rate Per Interval",component:ZO,type:"number",currency:!0,validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval",component:ZO,type:"number",step:1,validate:uv})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{className:"mb-3",children:"\xa0"}),Object(a.jsx)(yv.a,{name:"is_default",label:"Default",direction:"horizontal",component:LJ})]})]})]})}}]),n}(p.PureComponent),zwe=Object(LO.compose)(Object(Gj.a)({form:Bwe,initialValues:{is_default:!1}}))(Jwe),qwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.LME_ChargingIntervalAdded,(function(){return e.loadIntervals()})),uy.listen(Kg.LME_ChargingIntervalDeleted,(function(){return e.loadIntervals()}))],e.componentDidMount=function(){var t=e.props,n=t.equipmentCategory,r=t.match.params.category_id;n.fetch(r),e.loadIntervals()},e.loadIntervals=function(t){var n=e.props,r=n.chargingIntervals,a=n.match.params.category_id;r.fetch(a,Object(c.a)({},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"chargingInterval":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Charging Interval",body:Object(a.jsx)(zwe,Object(c.a)(Object(c.a)({},r),{},{equipmentCategory:e.props.equipmentCategory.data,afterSubmit:e.hideModal})),id:Bwe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,dH.updateEquipmentChargingInterval(t.equipment_category_id,t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadIntervals({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props,i=o.equipmentCategory,c=o.chargingIntervals,s=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(c.loading||s)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Charging Intervals"})}),Object(a.jsx)("div",{children:i.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Equipment Category: ",i.data.name,"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("chargingInterval",{initialValues:{inventory_storage_space_type:i.data,is_default:!1}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Interval"}),Object(a.jsx)(PL,{children:"Rate / Interval"}),Object(a.jsx)(PL,{children:"Max Count to Next Interval"}),Object(a.jsx)(PL,{children:"Default"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=c.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(Gwe,{form:"".concat(Bwe,"_").concat(e.id),initialValues:e,item:e,onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=c.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:c.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent),Wwe=Object(LO.compose)(Mm({equipmentCategory:{fetch:dH.getEquipmentCategory},chargingIntervals:{fetch:dH.getEquipmentChargingIntervals}}))(qwe),Hwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this charging interval?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&dH.deleteEquipmentChargingInterval(t.equipment_category_id,t.id).then((function(){uy.emit(Kg.LME_ChargingIntervalDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.item;return j.a.isObject(e.charging_interval)||(e.charging_interval={value:e.charging_interval,label:e.charging_interval}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"charging_interval",component:Kv,options:Object.keys(C8).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv,onChange:this.onFieldChange,className:"m-0"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"charging_rate_per_interval",component:ZO,type:"number",step:"any",validate:uv,onChange:this.onFieldChange,className:"m-0",currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"max_count_to_the_next_interval",component:ZO,type:"number",step:1,validate:uv,onChange:this.onFieldChange,className:"m-0"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"is_default",component:LJ,onChange:this.onFieldChange,wrapperClassName:"m-0"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(e)})})]})})}}]),n}(p.PureComponent),Gwe=Object(LO.compose)(Object(Gj.a)({form:Bwe}))(Hwe),Ywe="SETTINGS_LME_EQUIPMENT",Qwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,dH.updateEquipment(i,n);case 5:c=t.sent,uy.emit(Kg.LME_EquipmentUpdated,c),t.next=13;break;case 9:return t.next=11,dH.createEquipment(n);case 11:c=t.sent,uy.emit(Kg.LME_EquipmentAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.searchEquipmentCategory=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dH.searchEquipmentCategories({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedSearchEquipmentCategory=_v()(e.searchEquipmentCategory,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.submitting,r=e.handleSubmit;return Object(a.jsxs)("form",{id:Ywe,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"location",label:"Location",component:Kv,options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},isClearable:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"equipment_category",label:"Equipment Type",component:rO,loadOptions:this.debouncedSearchEquipmentCategory,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"barcode",label:"Barcode",component:ZO,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"make",label:"Make",component:ZO,validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"model",label:"Model Number",component:ZO,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"serial_number",label:"Serial Number",component:ZO,validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"reference_id",label:"Reference Id",component:ZO})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"status",label:"Asset Status",component:Kv,options:Object.keys(A8).map((function(e,t){return{value:A8[e],label:A8[e]}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"last_test_tag_at",label:"Test & Tag Date",component:Cy})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"next_test_tag_at",label:"Due Date",component:Cy,futureEnabled:!0})})]}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"note",label:"Notes",component:SJ})})})]})}}]),n}(p.PureComponent),Kwe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:Ywe}))(Qwe);function Zwe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return Zwe=function(){return e},e}var Xwe=x.default.div(Zwe(),y.black0),$we=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.LME_EquipmentAdded,(function(){return e.loadData()})),uy.listen(Kg.LME_EquipmentUpdated,(function(){return e.loadData()})),uy.listen(Kg.LME_EquipmentDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData()},e.loadData=function(t){e.props.equipments.fetch(Object(c.a)({},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Equipment",body:Object(a.jsx)(Kwe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:Ywe,onClose:e.hideModal});case"edit_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Edit Equipment",body:Object(a.jsx)(Kwe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:Ywe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,dH.updateEquipment(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.editItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.showModal("edit_item",{initialValues:t})();case 1:case"end":return n.stop()}}),n)})))},e.handlePagination=function(t){return e.loadData({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r,o,i=this,c=this.props.equipments,s=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex-grow-1 mb-5 print-hide",children:[this.renderModal(),(c.loading||s)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Equipments"})})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"\xa0"}),Object(a.jsx)(PL,{children:"Location"}),Object(a.jsx)(PL,{children:"Equipment Type"}),Object(a.jsx)(PL,{children:"Barcode"}),Object(a.jsx)(PL,{children:"Make"}),Object(a.jsx)(PL,{children:"Model Number"}),Object(a.jsx)(PL,{children:"Serial Number"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=c.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){var t,n;return Object(a.jsx)(n_e,{form:"".concat(Ywe,"_").concat(e.id,"_").concat(null===(t=e.updated_at)||void 0===t?void 0:t.toString()),initialValues:e,item:e,onSubmit:i.onSubmit(e),editItem:i.editItem(e)},e.id+(null===(n=e.updated_at)||void 0===n?void 0:n.toString()))}))})]}),(null===(n=c.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:c.data.pagination,onChange:this.handlePagination})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(Xwe,{className:"d-flex flex-wrap",children:null===(r=c.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.serial_number})}),Object(a.jsx)(lwe.a,{value:btoa(JSON.stringify({t:V3.equipment,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}}]),n}(p.PureComponent),e_e=Object(LO.compose)(Mm({equipments:{fetch:dH.getAllEquipments}}))($we),t_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this equipment?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&dH.deleteEquipment(t.id).then((function(){uy.emit(Kg.LME_EquipmentDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e.searchEquipmentCategory=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,dH.searchEquipmentCategories({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedSearchEquipmentCategory=_v()(e.searchEquipmentCategory,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=(t.submitting,t.locations),r=t.item;n.find((function(e){return!r.location||e.id===r.location.id}));return j.a.isObject(r.status)||(r.status={value:r.status,label:r.status}),r.last_test_tag_at&&j.a.isString(r.last_test_tag_at)&&(r.last_test_tag_at=qf()(r.last_test_tag_at)),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{children:Object(a.jsx)(uwe,{value:btoa(JSON.stringify({t:V3.equipment,id:r.id})),size:30,zoom:150,dir:"right",level:"Q"})}),Object(a.jsx)(FL,{style:{width:"200px"},children:Object(a.jsx)(yv.a,{name:"location",component:Kv,options:n,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},className:"m-0",isClearable:!0,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{style:{width:"200px"},children:Object(a.jsx)(yv.a,{name:"equipment_category",component:rO,loadOptions:this.debouncedSearchEquipmentCategory,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"barcode",component:ZO,validate:uv,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"make",component:ZO,validate:uv,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"model",component:ZO,validate:uv,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"serial_number",component:ZO,validate:uv,className:"m-0",onChange:this.onFieldChange})}),Object(a.jsxs)(FL,{children:[Object(a.jsx)(Ff,{name:Ef.Pencil,onClick:null===(e=this.props)||void 0===e?void 0:e.editItem,className:"mr-3"}),Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(r)})]})]})})}}]),n}(p.PureComponent),n_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:Ywe}))(t_e),r_e="SETTINGS_LME_EQUIPMENT_TYPE",a_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,dH.updateEquipmentCategory(i,n);case 5:c=t.sent,uy.emit(Kg.LME_EquipmentTypeUpdated,c),t.next=13;break;case 9:return t.next=11,dH.createEquipmentCategory(n);case 11:c=t.sent,uy.emit(Kg.LME_EquipmentTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:r_e,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,validate:uv,itemProp:{autoFocus:!0}})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"type",label:"Type",component:Kv,options:Object.keys(N8).map((function(e){return{value:N8[e],label:N8[e]}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv})})]}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(yv.a,{name:"charging_interval",label:"Charging Interval",component:Kv,options:Object.keys(C8).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"default_buy_cost_per_interval",label:"Default Buy Cost Per Interval",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charging_rate_per_interval",label:"Charging Rate Per Interval",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"max_count_to_the_next_interval",label:"Max Count To The Next Interval",component:ZO,type:"number",step:1,min:0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charge_rate_per_week",label:"Charge Rate Per Week",component:ZO,type:"number",step:"any",min:0,currency:!0})})]})]})}}]),n}(p.PureComponent),o_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:r_e,initialValues:{is_airmover:!1,is_dehum:!1}}))(a_e),i_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.LME_EquipmentTypeAdded,(function(){return e.loadData()})),uy.listen(Kg.LME_EquipmentTypeDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData()},e.loadData=function(t){e.props.equipmentTypes.fetch(Object(c.a)({},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Equipment Category",body:Object(a.jsx)(o_e,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:r_e,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,dH.updateEquipmentCategory(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.equipmentTypes,i=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(o.loading||i)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Equipment Categories"})})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Type"}),Object(a.jsx)(PL,{children:"Default Buy Cost Per Interval"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(l_e,{form:"".concat(r_e,"_").concat(e.id),initialValues:e,item:e,onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=o.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:o.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent),c_e=Object(LO.compose)(Mm({equipmentTypes:{fetch:dH.getEquipmentCategories}}))(i_e),s_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this equipment category?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&dH.deleteEquipmentCategory(t.id).then((function(){uy.emit(Kg.LME_EquipmentTypeDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.item;return j.a.isObject(e.type)||(e.type={value:e.type,label:e.type}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"type",component:Kv,options:Object.keys(N8).map((function(e){return{value:N8[e],label:N8[e]}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"default_buy_cost_per_interval",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsxs)(FL,{children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),Object(a.jsx)(Uf.c,{className:"mr-3",to:"/manage/lme/equipment-type/".concat(e.id,"/charges"),children:Object(a.jsx)(Ff,{"data-tip":"View charging intervals","data-for":"grid_cell_tooltip",name:Ef.Costing,size:18})}),Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(e)})]})]})})}}]),n}(p.PureComponent),l_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:r_e}))(s_e),u_e="SETTINGS_LME_LABOUR_TYPE",d_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,dH.updateLabourType(i,n);case 5:c=t.sent,uy.emit(Kg.LME_LabourTypeUpdated,c),t.next=13;break;case 9:return t.next=11,dH.createLabourType(n);case 11:c=t.sent,uy.emit(Kg.LME_LabourTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:u_e,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,validate:uv,itemProp:{autoFocus:!0}})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"first_tier_hourly_rate",label:"Normal",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"second_tier_hourly_rate",label:"Time and Half",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"third_tier_hourly_rate",label:"Double Time",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"fourth_tier_hourly_rate",label:"Double Time and Half",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})})]})]})}}]),n}(p.PureComponent),p_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:u_e}))(d_e),h_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.LME_LabourTypeAdded,(function(){return e.loadData()})),uy.listen(Kg.LME_LabourTypeDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData()},e.loadData=function(t){e.props.labourTypes.fetch(Object(c.a)({},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Labour Type",body:Object(a.jsx)(p_e,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:u_e,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,dH.updateLabourType(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.labourTypes,i=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(o.loading||i)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Labour Types"})})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Normal"}),Object(a.jsx)(PL,{children:"Time and Half"}),Object(a.jsx)(PL,{children:"Double Time"}),Object(a.jsx)(PL,{children:"Double Time and Half"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(m_e,{form:"".concat(u_e,"_").concat(e.id),initialValues:e,item:e,onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=o.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:o.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent),b_e=Object(LO.compose)(Mm({labourTypes:{fetch:dH.getLabourTypes}}))(h_e),f_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this labour type?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&dH.deleteLabourType(t.id).then((function(){uy.emit(Kg.LME_LabourTypeDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.item;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"first_tier_hourly_rate",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"second_tier_hourly_rate",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"third_tier_hourly_rate",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"fourth_tier_hourly_rate",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(e)})})]})})}}]),n}(p.PureComponent),m_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:u_e}))(f_e),j_e="SETTINGS_LME_MATERIAL",v_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,dH.updateMaterial(i,n);case 5:c=t.sent,uy.emit(Kg.LME_MaterialUpdated,c),t.next=13;break;case 9:return t.next=11,dH.createMaterial(n);case 11:c=t.sent,uy.emit(Kg.LME_MaterialAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.units;e.data||e.fetch()}},{key:"render",value:function(){var e,t=this.props,n=t.submitting,r=t.units,o=t.handleSubmit;return Object(a.jsxs)("form",{id:j_e,onSubmit:o(this.onSubmit),children:[(n||r.loading)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,itemProp:{autoFocus:!0},validate:uv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"measure_unit",label:"Measure Unit",component:Kv,options:(null===(e=r.data)||void 0===e?void 0:e.data)||[],getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},validate:uv})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"default_sell_cost_per_unit",label:"Default Sell Cost Per Unit",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"default_buy_cost_per_unit",label:"Default Buy Cost Per Unit",component:ZO,type:"number",step:"any",min:0,currency:!0,validate:uv})})]})]})}}]),n}(p.PureComponent),O_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:j_e}),Mm({units:{fetch:dH.getAllMeasureUnits}}))(v_e),g_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.LME_MaterialAdded,(function(){return e.loadData()})),uy.listen(Kg.LME_MaterialDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData(),e.props.units.fetch()},e.loadData=function(t){e.props.materials.fetch(Object(c.a)({},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add New Material",body:Object(a.jsx)(O_e,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal,units:e.props.units})),id:j_e,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,dH.updateMaterial(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n,r=this,o=this.props,i=o.materials,c=o.units,s=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(i.loading||s)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Materials"})})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Measure Unit"}),Object(a.jsx)(PL,{children:"Default Sell Cost Per Unit"}),Object(a.jsx)(PL,{children:"Default Buy Cost Per Unit"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=i.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){var t;return Object(a.jsx)(w_e,{form:"".concat(j_e,"_").concat(e.id),initialValues:e,item:e,units:(null===(t=c.data)||void 0===t?void 0:t.data)||[],onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=i.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:i.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent),x_e=Object(LO.compose)(Mm({materials:{fetch:dH.getAllMaterials},units:{fetch:dH.getAllMeasureUnits}}))(g_e),y_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this material?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&dH.deleteMaterial(t.id).then((function(){uy.emit(Kg.LME_MaterialDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.units;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-25",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"measure_unit",component:Kv,options:n,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"default_sell_cost_per_unit",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"default_buy_cost_per_unit",component:ZO,type:"number",step:"any",min:0,className:"m-0",validate:uv,onChange:this.onFieldChange,currency:!0})}),Object(a.jsx)(FL,{children:Object(a.jsx)(Ff,{name:Ef.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),w_e=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(Gj.a)({form:j_e}))(y_e),__e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match.url;return Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(e,"/labour-type"),component:b_e}),Object(a.jsx)(v.b,{path:"".concat(e,"/equipment-type/:category_id/charges"),component:Wwe}),Object(a.jsx)(v.b,{path:"".concat(e,"/equipment-type"),component:c_e}),Object(a.jsx)(v.b,{path:"".concat(e,"/equipment"),component:e_e}),Object(a.jsx)(v.b,{path:"".concat(e,"/material"),component:x_e}),Object(a.jsx)(v.a,{to:"".concat(e,"/labour-type")})]})}}]),n}(p.PureComponent),k_e="SETTINGS_LOCATIONS",S_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=10;break}return t.next=5,n3.updateLocation(i,n);case 5:c=t.sent.data,uy.emit(Kg.LocationUpdated,c),Qm(Vm.Success,"Location updated successfully"),t.next=15;break;case 10:return t.next=12,n3.createLocation(n);case 12:c=t.sent.data,Qm(Vm.Success,"Location created successfully"),uy.emit(Kg.LocationAdded,c);case 15:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:k_e,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"code",label:"Code",component:ZO,validate:uv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,validate:uv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"tz_offset",label:"Tz Offset",component:ZO,validate:bv})})})]})}}]),n}(p.PureComponent),C_e=Object(LO.compose)(Object(Gj.a)({form:k_e}))(S_e),N_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,n3.updateLocation(t.id,r);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 9:return n.prev=9,e.setState({working:!1}),n.finish(9);case 12:return n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}()},e.loadLocations=function(t){e.props.locations.fetch(Object(c.a)({},t))},e.handlePagination=function(t){return e.loadLocations({per_page:15,page:t})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"location":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Location",body:Object(a.jsx)(C_e,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:k_e,onClose:e.hideModal})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLocations({per_page:15}),uy.listen(Kg.LocationAdded,this.loadLocations),uy.listen(Kg.LocationRemoved,this.loadLocations)}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.locations,i=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(o.loading||i)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Locations"})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("location"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Code"}),Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Tz Offset"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(T_e,{form:"".concat(k_e,"_").concat(e.id),initialValues:e,item:e,onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=o.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:o.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(h.a.PureComponent),E_e=Object(LO.compose)(Mm({locations:{fetch:n3.getAllLocations}}))(N_e),A_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete location ",Object(a.jsx)("strong",{children:t.name}),"? This action cannot be undone!"]})})));case 3:n.sent&&n3.deleteLocation(t.id).then((function(){uy.emit(Kg.LocationRemoved,t),Qm(Vm.Success,"Location deleted successfully")})).catch((function(e){Qm(Vm.Danger,"Server Error")}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"code",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"tz_offset",component:ZO,className:"m-0",validate:bv,onChange:this.onFieldChange})}),Object(a.jsxs)(FL,{className:"text-right",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),Object(a.jsx)(Uf.c,{to:"/manage/location/".concat(t.id,"/suburb"),children:Object(a.jsx)(Ff,{"data-tip":"View location suburbs","data-for":"grid_cell_tooltip",name:Ef.BulletList,size:18})}),Object(a.jsx)(Ff,{name:Ef.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(h.a.PureComponent),T_e=Object(LO.compose)(Object(Gj.a)({form:k_e}))(A_e),I_e=function(e){return{state_id:e.state?e.state.id:e.state_id,name:e.name,postcode:e.postcode}},R_e={getLocationAllSuburb:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/locations/".concat(t.locationId,"/suburbs"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllSuburb:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/suburbs",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSuburb:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("/v1/suburbs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createSuburb:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/suburbs",I_e(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateSuburb:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("/v1/suburbs/".concat(t),I_e(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteSuburb:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/suburbs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),suburbMapToLocation:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("/v1/locations/".concat(t,"/suburbs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),suburbDeleteToLocation:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("/v1/locations/".concat(t,"/suburbs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},D_e="SETTINGS_LOCATIONS_SUBURB",M_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=10;break}return t.next=5,R_e.updateSuburb(i,n);case 5:c=t.sent.data,Qm(Vm.Success,"Suburb updated successfully"),uy.emit(Kg.SuburbUpdated,c),t.next=18;break;case 10:return t.next=12,R_e.createSuburb(n);case 12:if(!(c=t.sent.data)){t.next=17;break}return t.next=16,R_e.suburbMapToLocation(e.props.location_id,c.id);case 16:Qm(Vm.Success,"Suburb created successfully");case 17:uy.emit(Kg.SuburbAdded,c);case 18:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e){return t.apply(this,arguments)}}(),e.loadState=function(e){var t={se:e};return sg.searchStates(t).then((function(e){return e.data}))},e.debouncedSearchState=_v()(e.loadState,1e3),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:D_e,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,validate:uv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"postcode",label:"Post Code",component:ZO,validate:uv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"state",label:"State",placeholder:"Start typing to search...",component:rO,loadOptions:this.debouncedSearchState,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},validate:uv})})})]})}}]),n}(p.PureComponent),P_e=Object(LO.compose)(Object(Gj.a)({form:D_e}))(M_e),L_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.loadLocationSuburbs=function(t){var n=e.props,r=n.suburbs,a=n.match.params.location_id;r.fetch(Object(c.a)({locationId:a},t))},e.getLocationDetail=function(){var t=e.props.match.params.location_id;n3.getLocation(t).then((function(t){e.setState({location:null===t||void 0===t?void 0:t.data})}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(t){e.setState({modal:void 0})},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),e.props.match.params.location_id,n.prev=2,n.next=5,R_e.updateSuburb(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(2),n.abrupt("return",Mg(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[2,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadLocationSuburbs({per_page:15,page:t})},e.renderModal=function(){var t,n=e.state,r=n.modal,o=n.modalData,i=e.props.match.params.location_id;switch(r){case"location_suburb":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Suburb [Location:".concat(null===(t=e.state.location)||void 0===t?void 0:t.name,"]"),body:Object(a.jsx)(P_e,Object(c.a)(Object(c.a)({},o),{},{afterSubmit:e.hideModal,location_id:i})),id:D_e,onClose:e.hideModal})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLocationSuburbs({per_page:15}),this.getLocationDetail(),uy.listen(Kg.SuburbAdded,this.loadLocationSuburbs),uy.listen(Kg.SuburbRemoved,this.loadLocationSuburbs)}},{key:"render",value:function(){var e,t,n,r,o=this,i=this.props,c=i.suburbs,s=i.match.params.location_id,l=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(c.loading||l)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Suburbs"})}),Object(a.jsx)("strong",{className:"ml-3 text-md",children:"[Location:".concat(null===(e=this.state.location)||void 0===e?void 0:e.name,"]")})]}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("location_suburb"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Post Code"}),Object(a.jsx)(PL,{children:"State"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(t=c.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.map((function(e){return Object(a.jsx)(V_e,{form:"".concat(D_e,"_").concat(e.id),initialValues:e,item:e,location_id:s,onSubmit:o.onSubmit(e)},e.id)}))})]}),(null===(r=c.data)||void 0===r?void 0:r.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:c.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(h.a.PureComponent),F_e=Object(LO.compose)(Mm({suburbs:{fetch:R_e.getLocationAllSuburb}}))(L_e),U_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteSuburb=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.dispatch,i=r.location_id,n.next=3,o(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete suburb ",Object(a.jsx)("strong",{children:t.name}),"? This action cannot be undone!"]})})));case 3:n.sent&&R_e.deleteSuburb(t.id).then((function(e){R_e.suburbDeleteToLocation(i,t.id),uy.emit(Kg.SuburbRemoved,t),Qm(Vm.Success,"Suburb deleted successfully")})).catch((function(e){return Mg(e)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.states;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"postcode",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"state",component:Kv,options:n,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsxs)(FL,{className:"text-right",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),Object(a.jsx)(Ff,{name:Ef.Delete,className:"ml-3",onClick:this.deleteSuburb(t)})]})]})})}}]),n}(h.a.PureComponent),V_e=Object(LO.compose)(Object(b.b)((function(e){var t;return{states:null===(t=e.allStates.data)||void 0===t?void 0:t.data}})),Object(Gj.a)({form:D_e}))(U_e),B_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){this.props.match.url;return Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{exact:!0,path:"/manage/location",component:E_e}),Object(a.jsx)(v.b,{exact:!0,path:"/manage/location/:location_id/suburb",component:F_e}),Object(a.jsx)(v.a,{to:"/manage/location"})]})}}]),n}(p.PureComponent),J_e="/v1/finance/gs-codes",z_e={getAllGSCode:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(J_e),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGSCode:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.get("".concat(J_e,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createGSCode:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.post("".concat(J_e),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateGSCode:function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.put("".concat(J_e,"/").concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteGSCode:function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Aj.remove("".concat(J_e,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},q_e="SETTINGS_GS_CODE",W_e=[{label:"Buy",value:"buy"},{label:"Sell",value:"sell"}],H_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,z_e.updateGSCode(i,n);case 5:c=t.sent.data,uy.emit(Kg.GSCodeUpdated,c),t.next=13;break;case 9:return t.next=11,z_e.createGSCode(n);case 11:c=t.sent.data,uy.emit(Kg.GSCodeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.OnChangeBuySell=function(t){"sell"===t.value?(e.props.change("is_buy",!1),e.props.change("is_sell",!0)):(e.props.change("is_buy",!0),e.props.change("is_sell",!1))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:q_e,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Name",component:ZO,validate:uv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"description",label:"Description",component:ZO,validate:uv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"item_type",label:"Buy/Sell",placeholder:"Select...",component:Kv,validate:uv,options:W_e,getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},onChange:this.OnChangeBuySell})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"amount",label:"Amount",component:ZO,validate:uv})})})]})}}]),n}(p.PureComponent),G_e=Object(LO.compose)(Object(Gj.a)({form:q_e,initialValues:{is_buy:!1,is_sell:!1}}))(H_e),Y_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(t){e.setState({modal:void 0})},e.onSubmit=function(t){return function(){var n=Object(Um.a)(Fm.a.mark((function n(r){return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,z_e.updateGSCode(t.id,r);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n.catch(1),n.abrupt("return",Mg(n.t0));case 9:return n.prev=9,e.setState({working:!1}),n.finish(9);case 12:return n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}()},e.loadGstCodes=function(t){e.props.gscodes.fetch(Object(c.a)({},t))},e.handlePagination=function(t){return e.loadGstCodes({page:t})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"gs_code":return Object(a.jsx)(P8,{isOpen:!0,title:"Add GS Code",body:Object(a.jsx)(G_e,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:q_e,onClose:e.hideModal})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadGstCodes(),uy.listen(Kg.GSCodeAdded,this.loadGstCodes),uy.listen(Kg.GSCodeRemoved,this.loadGstCodes)}},{key:"render",value:function(){var e,t,n,r=this,o=this.props.gscodes,i=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(o.loading||i)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"GS Code"})}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("gs_code"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(U8,{className:"table m-t30",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Name"}),Object(a.jsx)(PL,{children:"Description"}),Object(a.jsx)(PL,{children:"Buy/Sell"}),Object(a.jsx)(PL,{children:"Amount"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:null===(e=o.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return e.item_type=!0===e.is_buy?W_e.find((function(e){return"buy"===e.value})):W_e.find((function(e){return"sell"===e.value})),Object(a.jsx)(Z_e,{form:"".concat(q_e,"_").concat(e.id),initialValues:e,item:e,onSubmit:r.onSubmit(e)},e.id)}))})]}),(null===(n=o.data)||void 0===n?void 0:n.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(AS,{pagination:o.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(h.a.PureComponent),Q_e=Object(LO.compose)(Mm({gscodes:{fetch:z_e.getAllGSCode}}))(Y_e),K_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=_v()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.OnChangeBuySell=function(t){"sell"===t.value?(e.props.change("is_buy",!1),e.props.change("is_sell",!0)):(e.props.change("is_buy",!0),e.props.change("is_sell",!1)),e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete gs code ",Object(a.jsx)("strong",{children:t.name}),"? This action cannot be undone!"]})})));case 3:n.sent&&z_e.deleteGSCode(t.id).then((function(){Qm(Vm.Success,"GS Code deleted successfully"),uy.emit(Kg.GSCodeRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(FL,{className:"w-33",children:Object(a.jsx)(yv.a,{name:"name",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"description",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"item_type",placeholder:"Select...",component:Kv,validate:uv,options:W_e,getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},onChange:this.OnChangeBuySell})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yv.a,{name:"amount",component:ZO,className:"m-0",validate:uv,onChange:this.onFieldChange})}),Object(a.jsxs)(FL,{className:"text-right",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),Object(a.jsx)(Ff,{name:Ef.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(h.a.PureComponent),Z_e=Object(LO.compose)(Object(Gj.a)({form:q_e}))(K_e);function X_e(){var e=Object(f.a)(["\n  padding: 30px;\n  position: relative;\n  min-height: 100%;\n"]);return X_e=function(){return e},e}function $_e(){var e=Object(f.a)(["\n  overflow-y: auto;\n  min-height: 100%;\n"]);return $_e=function(){return e},e}function eke(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n  padding: 10px 20px;\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n"]);return eke=function(){return e},e}var tke=x.default.div(eke(),y.gray2,Bf.bold,Vf.medium,y.blue6),nke=x.default.div($_e()),rke=x.default.div(X_e()),ake=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isAllowAccess=function(e){return function(t){return e.some((function(e){return t(e)}))}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){um.status("Manage")}},{key:"componentWillUnmount",value:function(){um.reset()}},{key:"render",value:function(){var e=this.props.match.path,t=this.props.location.pathname.split("/")[2];return Object(a.jsxs)("div",{className:"h-100 d-flex flex-column",children:[Object(a.jsx)(tke,{className:"print-hide",children:"Manage"}),Object(a.jsxs)("div",{className:"d-flex h-100",children:[Object(a.jsx)(Cge,{activeSection:t}),Object(a.jsx)("div",{className:"flex-grow-1 position-relative",children:Object(a.jsx)(nke,{className:"h-100 w-100",children:Object(a.jsx)(rke,{className:"d-flex position-static",children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(AI,{exact:!0,path:"".concat(e,"/user"),permission:this.isAllowAccess([Dw.USERS_VIEW]),component:Rxe}),Object(a.jsx)(AI,{path:"".concat(e,"/user/:id"),permission:this.isAllowAccess(Nw),component:Nye}),Object(a.jsx)(AI,{path:"".concat(e,"/addUser"),permission:this.isAllowAccess(Nw),component:Wye}),Object(a.jsx)(AI,{path:"".concat(e,"/tag"),permission:this.isAllowAccess(Aw),component:sxe}),Object(a.jsx)(AI,{path:"".concat(e,"/location"),permission:this.isAllowAccess(Ew),component:B_e}),Object(a.jsx)(AI,{path:"".concat(e,"/gscode"),permission:this.isAllowAccess([Dw.GSCODE_MANAGE]),component:Q_e}),Object(a.jsx)(AI,{path:"".concat(e,"/contract"),permission:this.isAllowAccess(Tw),component:Yxe}),Object(a.jsx)(AI,{path:"".concat(e,"/vehicle"),permission:this.isAllowAccess(Tw),component:Zye}),Object(a.jsx)(AI,{path:"".concat(e,"/warehousing"),permission:this.isAllowAccess([Dw.OPERATIONS_STORAGE_MANAGE]),component:Vwe}),Object(a.jsx)(AI,{path:"".concat(e,"/lme"),permission:this.isAllowAccess(Tw),component:__e}),Object(a.jsx)(v.a,{to:"".concat(e,"/user")})]})})})})]})]})}}]),n}(h.a.PureComponent),oke=Object(v.g)(ake),ike=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={dateSelected:qf()(),locationSelected:null},e.onLocationChange=function(t){e.setState({locationSelected:t})},e.dateTriggerRender=function(){var t=e.state.dateSelected;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[t.format(Pj),Object(a.jsx)(J3,{style:{marginLeft:"10px"},color:y.white,name:Ef.Calendar})]})},e.timePickerRender=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(by.a,{input:!1,timeFormat:!0,onChange:e.onDateChange})})},e.onDateChange=function(t){e.setState({dateSelected:t})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t={dateTo:e.dateSelected,location:e.locationSelected};this.props.onSubmit(t)}},{key:"locationNameRender",value:function(e){return e.name}},{key:"render",value:function(){var e=this,t=this.props.locations,n=t.find((function(e){return e.primary}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(UI,{children:Object(a.jsx)(yw,{trigger:function(){return e.dateTriggerRender()},renderInternal:this.timePickerRender})}),Object(a.jsx)(UI,{children:!t||t&&0===t.length?Object(a.jsx)("div",{children:"No Locations"}):Object(a.jsx)(Pee,{items:t,onChange:this.onLocationChange,placeHolder:"Select Location...",nameRender:this.locationNameRender,defaultValueById:n&&n.id})})]})}}]),n}(h.a.PureComponent),cke=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})))(ike),ske="Trial Balance",lke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsvData=function(){var t=e.props.trialBalance.data.data;if(!e.hasTrialBalances)return[];var n=[];return t.Revenue&&(n=n.concat(t.Revenue)),t.Assets&&(n=n.concat(t.Assets)),t.Liabilities&&(n=n.concat(t.Liabilities)),t.TOTAL&&(n=n.concat(t.TOTAL)),{reportName:ske,data:n.map((function(e){return{group_name:e.group_name,gl_account_name:e.gl_account_name,debit_amount:e.debit_amount,credit_amount:e.credit_amount,debit_amount_ytd:e.debit_amount_ytd,credit_amount_ytd:e.credit_amount_ytd}}))}},e.getTrialBalance=function(t,n){var r=t.dateTo,a=t.location;if(a){var o=qj(r),i=a&&a.id;return e.getData(i,n,o)}},e.filterReport=Object(m.debounce)(e.getTrialBalance),e.columnsPaymentDef=[{id:"gl_account_name",header:"Account",type:mte.Text,cell:function(e){return Object(a.jsx)("span",{children:e.gl_account_name})}},{id:"debit_amount",header:"Debit",width:"15%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:am(e.debit_amount,vte)})}},{id:"credit_amount",header:"Credit",width:"15%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:am(e.credit_amount,vte)})}},{id:"debit_amount_ytd",header:"YTD Debit",width:"15%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:am(e.debit_amount_ytd,vte)})}},{id:"credit_amount_ytd",header:"YTD Credit",width:"15%",type:mte.Numeric,cell:function(e){return Object(a.jsx)("span",{children:am(e.credit_amount_ytd,vte)})}}],e}return Object(l.a)(n,[{key:"getData",value:function(e,t,n){var r;this.props.dispatch((r={date_to:n,location_id:e,page:t},iS(b1,f1,m1,(function(){return h1.getITrialBalance(r)}))))}},{key:"renderReportRows",value:function(){var e=this.props.trialBalance.data.data;return e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,style:{padding:"0"},children:this.renderTrialBalance(e.Revenue,"Revenue",!1)})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,style:{padding:"0"},children:this.renderTrialBalance(e.Assets,"Assets",!1)})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,style:{padding:"0"},children:this.renderTrialBalance(e.Liabilities,"Liabilities",!0,e.TOTAL)})})]}):null}},{key:"renderTrialBalance",value:function(e,t,n,r){return Object(a.jsxs)(yte,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)(_8,{colSpan:this.columnsPaymentDef.length,children:Object(a.jsx)(_te,{children:t})})})}),Object(a.jsxs)("tbody",{children:[e&&e.length>0&&e[0].gl_account_name?this.renderBalances(e):this.renderNodata(),n&&r&&this.renderBalances(r,!0),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,children:"\xa0"})})]})]})}},{key:"renderBalances",value:function(e,t){var n=this;return e?e.map((function(e){return Object(a.jsx)("tr",{children:n.columnsPaymentDef.map((function(n){return Object(a.jsx)(j8,{width:n.width,hidden:n.hidden,align:n.type,children:t?Object(a.jsx)(_te,{children:n.cell(e)}):n.cell(e)},n.id)}))},e.gl_account_name)})):null}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsPaymentDef.length,children:"No items found"})})}},{key:"render",value:function(){var e=this.props.trialBalance.loading,t=this.hasTrialBalances;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Hee,{reportName:ske,toCsvFn:this.getCsvData,children:Object(a.jsx)(cke,{onSubmit:this.filterReport})}),e?Object(a.jsx)(av,{size:40,color:y.white}):Object(a.jsx)(bte,{children:Object(a.jsxs)(jte,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:this.columnsPaymentDef.map((function(e){return Object(a.jsx)(w8,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})}),Object(a.jsx)("tbody",{children:t?this.renderReportRows():this.renderNodata()})]})})]})}},{key:"hasTrialBalances",get:function(){var e=this.props.trialBalance,t=e.ready,n=e.data;return!!(t&&n&&n.data)}}]),n}(p.PureComponent),uke=Object(LO.compose)(Object(b.b)((function(e){return{trialBalance:e.trialBalance}})))(lke);function dke(){var e=Object(f.a)(["\n  display: flex;\n  line-height: 50px;\n  width: 180px;\n  cursor: pointer;\n  color: ",";\n"]);return dke=function(){return e},e}function pke(){var e=Object(f.a)(["\n  width: 400px;\n  padding: 3px;\n  .dash {\n    padding: 0 10px;\n  }\n  label {\n    margin-bottom: 0;\n  }\n"]);return pke=function(){return e},e}var hke=x.default.div(pke()),bke=x.default.div(dke(),y.white),fke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).periods=e.props.defaultPeriods,e.onChangeDate=function(t,n,r){e.periods=Object(c.a)(Object(c.a)({},e.periods),{},Object(k.a)({},n,Object(c.a)(Object(c.a)({},e.periods[n]),{},Object(k.a)({},r,t)))),e.isPeriodValid(e.periods.current)&&e.isPeriodValid(e.periods.previous)&&e.props.onChange(e.periods)},e.startTriggerRender=function(){return Object(a.jsxs)(bke,{children:[e.periods.current.start.format(Pj)," - ",e.periods.current.end.format(Pj)]})},e.renderControl=function(t){return Object(a.jsxs)(hke,{children:[Object(a.jsxs)("div",{className:"d-flex align-items-baseline",children:[Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)("label",{children:"Current:"})}),Object(a.jsxs)("div",{className:"col-8 pl-0  d-flex align-items-baseline",children:[Object(a.jsx)(by.a,{input:!0,timeFormat:!1,dateFormat:Pj,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"current","start")},initialValue:e.props.defaultPeriods.current.start}),Object(a.jsx)("span",{className:"dash",children:"\u2013"}),Object(a.jsx)(by.a,{input:!0,timeFormat:!1,dateFormat:Pj,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"current","end")},initialValue:e.props.defaultPeriods.current.end})]})]}),Object(a.jsxs)("div",{className:"d-flex align-items-baseline pt-3",children:[Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)("label",{children:"Previous period:"})}),Object(a.jsxs)("div",{className:"col-8 pl-0 d-flex align-items-baseline",children:[Object(a.jsx)(by.a,{input:!0,timeFormat:!1,dateFormat:Pj,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"previous","start")},initialValue:e.props.defaultPeriods.previous.start}),Object(a.jsx)("span",{className:"dash",children:"\u2013"}),Object(a.jsx)(by.a,{input:!0,timeFormat:!1,dateFormat:Pj,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"previous","end")},initialValue:e.props.defaultPeriods.previous.end})]})]})]})},e}return Object(l.a)(n,[{key:"isPeriodValid",value:function(e){return qf()(e.end).diff(e.start,"d")>0}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)(yw,{renderInternal:this.renderControl,trigger:this.startTriggerRender,direction:"right"}),Object(a.jsx)(J3,{style:{marginTop:"13px",marginRight:"15px"},color:y.white,name:Ef.Calendar})]})})}}]),n}(p.PureComponent);function mke(){var e=Object(f.a)(["\n  display: flex;\n  line-height: 50px;\n  width: 60px;\n  cursor: pointer;\n  color: ",";\n  border-right: 1px solid ",";\n  border-left: 1px solid ",";\n  margin: 0 10px;\n  svg {\n    margin: 15px 20px;\n  }\n"]);return mke=function(){return e},e}function jke(){var e=Object(f.a)(["\n  width: 400px;\n  padding: 3px;\n  label.label__no-margin {\n    margin-bottom: 0;\n  }\n"]);return jke=function(){return e},e}var vke=x.default.div(jke()),Oke=x.default.div(mke(),y.white,y.white,y.white),gke={multiValue:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{backgroundColor:t.data&&t.data.color?tm(t.data.color):y.gray1,color:y.white,borderRadius:"4px"})},multiValueLabel:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:y.white})},multiValueRemove:function(e){return Object(c.a)(Object(c.a)({},e),{},{cursor:"pointer",":hover":{backgroundColor:"inherit",color:"inherit"}})}},xke={selectedTags:[],selectedGlAccount:null},yke=h.a.memo((function(e){var t=e.glAccounts,n=e.tags,r=e.onChange,o=Object(p.useState)(xke),i=Object(w.a)(o,2),s=i[0],l=i[1];function u(e){return e.id.toString()}function d(e){return e.name.toString()}Object(p.useEffect)((function(){r(s)}),[s]);var h=function(e){l(Object(c.a)(Object(c.a)({},s),{},{selectedTags:e}))},b=function(e){l(Object(c.a)(Object(c.a)({},s),{},{selectedGlAccount:e}))};return Object(a.jsx)("div",{className:"d-flex",children:Object(a.jsx)(yw,{trigger:function(){var e=!Object(m.isEqual)(s,xke);return Object(a.jsx)(Oke,{children:Object(a.jsx)(J3,{name:Ef.Filter,color:y.white,fill:e,"data-tip":"Filter"})})},renderInternal:function(e){var r=n?n.data:[];return Object(a.jsxs)(vke,{children:[t&&Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)("label",{className:"label__no-margin",children:"Select Account:"})}),Object(a.jsx)("div",{className:"col-8 pl-0",children:Object(a.jsx)(e8,{options:t.sort((function(e,t){return e.name.localeCompare(t.name)})),getOptionLabel:KX.getGLAccountLabel,getOptionValue:u,onChange:b,isClearable:!0})})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)("label",{children:"Tags:"})}),Object(a.jsx)("div",{className:"col-10",children:Object(a.jsx)(e8,{placeholder:"Select tags...",options:r,getOptionLabel:d,getOptionValue:u,onChange:h,additionalStyles:gke,isMulti:!0})})]})]})}})})}));function wke(){var e=Object(f.a)(["\n  border: 1px solid ","\n  padding: 0 30px;\n  \n  tr {\n    border: 1px solid ","\n  }\n  \n  thead th {\n    height: 35px;\n    font-weight: ","\n    color: ","\n  }\n  \n  tbody tr {\n    height: 45px;\n    text-align: left;\n  }\n  \n  td, th {\n    padding: 15px;\n  }\n  \n  td.fin-report__fixed-width {\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n  \n  tbody {\n    ","\n    \n    tr td:not(:last-of-type) {\n      font-weight: ","\n    }\n  }\n"]);return wke=function(){return e},e}function _ke(){var e=Object(f.a)(["\n  margin: 10px 0px;\n  padding: 10px 10px;\n"]);return _ke=function(){return e},e}function kke(){var e=Object(f.a)(["\n  ","\n"]);return kke=function(){return e},e}function Ske(){var e=Object(f.a)(["\n  ","\n  width: 8%;\n  white-space: nowrap;\n  max-width: 140px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n"]);return Ske=function(){return e},e}function Cke(){var e=Object(f.a)(["\n  text-align: right;\n"]);return Cke=function(){return e},e}function Nke(){var e=Object(f.a)(["\n  padding: 5px 15px;\n"]);return Nke=function(){return e},e}function Eke(){var e=Object(f.a)(["\n  width: calc(100% - ","px);\n  @media print {\n    width: 100%;\n  }\n  @media screen and (max-width: 768px) {\n    width: 100%;\n  }\n"]);return Eke=function(){return e},e}function Ake(){var e=Object(f.a)(["\n  display: flex;\n  width: ","px;\n"]);return Ake=function(){return e},e}function Tke(){var e=Object(f.a)(["\n  height: calc(100% - 100px);\n"]);return Tke=function(){return e},e}function Ike(){var e=Object(f.a)(["\n  padding-top: 20px;\n  min-height: 470px;\n  position: relative;\n  display: flex;\n  width: auto;\n"]);return Ike=function(){return e},e}var Rke=Object(x.default)(_9)(Ike()),Dke=Object(x.default)(uC)(Tke()),Mke=h.a.memo((function(e){var t=e.colspan;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:t,style:{textAlign:"center"},children:"No data"})})})),Pke=x.default.div(Ake(),440),Lke=x.default.div(Eke(),480),Fke=x.default.div(Nke()),Uke=Object(x.css)(Cke()),Vke=x.default.td(Ske(),Uke),Bke=x.default.th(kke(),Uke),Jke=x.default.div(_ke()),zke=x.default.table(wke(),y.gray2,y.gray2,Bf.normal,y.gray3,(function(e){return e.noStripped?null:"tr: nth-of-type(2n-1) {\n        background: ".concat(y.gray0,"\n      }")}),Bf.medium),qke=n(586);function Wke(){var e=Object(f.a)(["\n  display: inline-block;\n  position: absolute;\n  margin-top: 20px;\n  color: ",";\n"]);return Wke=function(){return e},e}function Hke(){var e=Object(f.a)(["\n  height: 460px;\n  width: 100%;\n  margin: 12px 30px 0 5px;\n  padding: 0 30px 30px;\n  position: relative;\n  background: ",";\n  border: 1px solid ",";\n"]);return Hke=function(){return e},e}var Gke=y.black0,Yke=y.orange1,Qke=y.orange0,Kke=y.gray4,Zke=x.default.div(Hke(),y.white,y.gray4),Xke=x.default.div(Wke(),y.gray5),$ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getDataSet",value:function(e){return e.map((function(e){return e.value}))}},{key:"getLabels",value:function(e){return e.map((function(e){return qf()(e.date).format("MMM DD")}))}},{key:"getPlotLabel",value:function(e){if(!e.length)return"";var t=e[0].date,n=e[e.length-1].date;return"".concat(qf()(t).format(Pj)," - ").concat(qf()(n).format(Pj))}},{key:"composeDataset",value:function(e,t){return Object(c.a)(Object(c.a)({},t),{},{borderWidth:2,lineTension:0,pointRadius:0,data:this.getDataSet(e),label:this.getPlotLabel(e)})}},{key:"render",value:function(){return Object(a.jsxs)(Zke,{children:[Object(a.jsx)(Xke,{children:this.props.name}),Object(a.jsx)(qke.Line,Object(c.a)(Object(c.a)({},n.chartProps),{},{data:{labels:this.getLabels(this.props.primaryChart),datasets:this.datasets}}))]})}},{key:"datasets",get:function(){var e=this.props,t=e.primaryChart,n=e.secondaryChart,r=[this.composeDataset(t,{fill:!0,borderColor:Yke,backgroundColor:Qke})];return n&&r.push(this.composeDataset(n,{fill:!1,borderColor:Kke})),r}}]),n}(p.PureComponent);$ke.chartOptions={maintainAspectRatio:!1,animation:null,hover:{animationDuration:1},responsiveAnimationDuration:0,scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:Gke,maxTicksLimit:10,maxRotation:0,labelOffset:8}}],yAxes:[{gridLines:{drawTicks:!1},ticks:{fontColor:Gke,maxTicksLimit:8,padding:10,callback:function(e){return 0===+e?e:Kf(e)}}}]}},$ke.chartLegendParams={position:"top",labels:{fontColor:Gke,boxWidth:8,fontSize:12,padding:45,usePointStyle:!0}},$ke.adjustLegendPositionPlugin={beforeInit:function(e,t){e.legend.afterFit=function(){this.height=this.height+30}}},$ke.chartProps={options:$ke.chartOptions,legend:$ke.chartLegendParams,plugins:[$ke.adjustLegendPositionPlugin]};var eSe,tSe=$ke,nSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).finTables=void 0,e.bindEvents=function(){e.props.receiveCsvData(e.getCsv)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.bindEvents(),this.getData()}},{key:"componentDidUpdate",value:function(e){Object(m.isEqual)(e.currentFilterParams,this.props.currentFilterParams)||this.getData()}},{key:"getData",value:function(e){this.allowRequest&&this.request(e)}},{key:"createStatColumn",value:function(e,t){return Object(a.jsx)("div",{className:"d-flex",children:e.map((function(e,t){var n=e.delta,r=e.hasDelimiter,o=e.label,i=e.toolTip,c=e.value;return Object(a.jsx)(V9,{delta:n,hasDelimiter:r,label:o,reactTipProps:{"data-tip":i},value:c},"".concat(o," - ").concat(t))}))},t)}},{key:"renderStatistics",value:function(){var e=this,t=this.statConfig,n=t&&t.data;if(!n||!n.length)return null;var r=t,a=r.perCol,o=r.perRow;return Array(a).fill(0).map((function(t,r){return e.createStatColumn(n.slice(o*r,o*(r+1)),r)}))}},{key:"renderTables",value:function(){var e=this.finTables;return e&&e.length?1===e.length?Object(a.jsx)(Jke,{className:"w-100",children:e[0]()}):e.map((function(e,t){return Object(a.jsx)(Jke,{className:"col-md-6",children:e()},t)})):null}},{key:"renderChart",value:function(){var e=this.chartData;if(!e)return null;var t=e,n=t.name,r=t.primaryChart,o=t.secondaryChart;return Object(a.jsx)(tSe,{name:n,primaryChart:r,secondaryChart:o})}},{key:"render",value:function(){var e=this.data;return Object(a.jsxs)(h.a.Fragment,{children:[this.isLoading&&Object(a.jsx)(av,{size:40,color:y.white}),e&&Object(a.jsxs)(h.a.Fragment,{children:[Object(a.jsxs)(Rke,{className:"d-flex flex-wrap",children:[Object(a.jsx)(Pke,{className:"d-flex flex-column",children:this.renderStatistics()}),Object(a.jsx)(Lke,{className:"temp",children:this.renderChart()})]}),Object(a.jsx)(Fke,{className:"d-flex flex-wrap",children:this.renderTables()})]})]})}},{key:"allowRequest",get:function(){var e=this;return!["current_date_from","current_date_to","previous_date_from","previous_date_to","location_id"].find((function(t){return!e.props.currentFilterParams[t]}))}}]),n}(h.a.PureComponent);function rSe(e,t){var n=Math.max(e.length,t.length);return Array(n).fill(0).map((function(n,r){var a=t[r]||{},o=e[r]||{};return Object(c.a)(Object(c.a)({},a),o)}))}!function(e){e.TotalRevenue="Total Revenue",e.Invoices="Invoices",e.CreditNotes="Credit Notes",e.AccountsReceivable="Accounts Receivable",e.FromJobs="From Jobs",e.PurchaseOrders="Purchase Orders",e.TotalGrossProfit="Total Gross Profit"}(eSe||(eSe={}));var aSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).finTables=[],e.getCsv=function(){var t=e.props.financialVolume.data;if(!t)return null;var n=[e.chartCsv];return(t.chart&&t.chart.length||t.previous_interval_chart&&t.previous_interval_chart.length)&&n.push(e.statCsv),n},e}return Object(l.a)(n,[{key:"request",value:function(e){var t,n=this.props,r=n.dispatch,a=n.currentFilterParams;r((t=a,iS(W0[U$.load],W0[U$.loadComplete],W0[U$.error],(function(){return V0.getVolume(t)})))).then(e)}},{key:"data",get:function(){return this.props.financialVolume.data}},{key:"chartCsv",get:function(){var e=this.props.financialVolume.data;return{reportName:"Report volume",data:rSe(e.chart&&e.chart.map((function(e,t){return{current_period_date:e.date,current_period_value:e.value}})),e.previous_interval_chart&&e.previous_interval_chart.map((function(e){return{previous_period_date:e.date,previous_period_value:e.value}})))}}},{key:"statCsv",get:function(){var e=this.props.financialVolume.data;return{columns:["statistic_element","value","delta"],reportName:"Volume statistic",data:[{statistic_element:eSe.TotalRevenue,value:e.total_revenue,delta:e.total_revenue_change},{statistic_element:eSe.FromJobs,value:e.from_jobs,delta:e.from_jobs_change},{statistic_element:eSe.Invoices,value:e.invoices,delta:e.invoices_change},{statistic_element:eSe.PurchaseOrders,value:e.purchase_orders,delta:e.purchase_orders_change},{statistic_element:eSe.CreditNotes,value:e.credit_notes,delta:e.credit_notes_change},{statistic_element:eSe.TotalGrossProfit,value:e.total_gross_profit,delta:e.total_gross_profit_change},{statistic_element:eSe.AccountsReceivable,value:e.accounts_receivable,delta:e.accounts_receivable_change}]}}},{key:"isLoading",get:function(){return this.props.financialVolume.loading}},{key:"statConfig",get:function(){var e=this.props.financialVolume.data;return e?{data:[{label:eSe.TotalRevenue,value:Kf(e.total_revenue),delta:e.total_revenue_change,hasDelimiter:!0,toolTip:"Total revenue for the current period."},{label:eSe.FromJobs,value:e.from_jobs,delta:e.from_jobs_change,hasDelimiter:!0,toolTip:"The total count of jobs<br />within the current period."},{label:eSe.Invoices,value:e.invoices,delta:e.invoices_change,hasDelimiter:!0,toolTip:"Total number of invoices<br />written in the current period."},{label:eSe.PurchaseOrders,value:e.purchase_orders,delta:e.purchase_orders_change,hasDelimiter:!0,toolTip:"Total number of purchase orders<br />written in the current period."},{label:eSe.CreditNotes,value:e.credit_notes,delta:e.credit_notes_change,hasDelimiter:!0,toolTip:"Total number of credit notes<br />written in the current period."},{label:eSe.TotalGrossProfit,value:"".concat(e.total_gross_profit.toFixed(2),"%"),delta:e.from_jobs_change,hasDelimiter:!0,toolTip:"Total gross profit<br />for the current period."},{label:eSe.AccountsReceivable,value:Kf(e.accounts_receivable),delta:e.invoices_change,toolTip:"Accounts receivable in the current period."}],perCol:4,perRow:2}:null}},{key:"chartData",get:function(){var e=this.props.financialVolume.data;if(!e)return null;var t=e;return{name:"Volume",primaryChart:t.chart,secondaryChart:t.previous_interval_chart}}}]),n}(nSe);var oSe,iSe,cSe,sSe=Object(b.b)((function(e){return{financialVolume:Z0(e)}}))(aSe);!function(e){e.InvoicesPaid="Invoices Paid",e.AverageJobCost="Average Job Cost",e.CreditNotes="Credit Notes",e.InvoicesWritten="Invoices Written",e.AvgJobCost="Avg. Over Job Cost",e.TotalGrossProfit="Total Gross Profit"}(oSe||(oSe={})),function(e){e.TaggedInvoices="Tagged Invoices",e.Number="No.",e.Diff="Diff.",e.Percent="%"}(iSe||(iSe={})),function(e){e.RevenueAccount="Revenue Account",e.Amount="Amount"}(cSe||(cSe={}));var lSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsv=function(){var t=e.props.financialRevenue.data;if(!t)return null;var n=[e.statCsv];t.tagged_invoices&&t.tagged_invoices.length&&n.push(e.taggedInvoiceCsv),t.revenue_accounts&&t.revenue_accounts.length&&n.push(e.revenueAccountCsv);var r=e.chartCsv;return r&&n.push(r),n},e.request=function(t){var n=e.props,r=n.dispatch,a=n.currentFilterParams;r(G0(a)).then(t)},e.getDiffColor=function(e){return 0>e?y.red1:e>0?y.green2:"inherit"},e.renderRevenueAccountTable=function(){var t=e.props.financialRevenue.data,n=t&&t.revenue_accounts,r=Object(a.jsx)(Mke,{colspan:2});return n&&n.length&&(r=Object(a.jsx)(p.Fragment,{children:n.map((function(t,n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.getRevenueAccountName(t)}),Object(a.jsx)(Vke,{children:"$ ".concat(t.amount)})]},n)}))})),Object(a.jsxs)(zke,{className:"w-100",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:cSe.RevenueAccount}),Object(a.jsx)(Bke,{children:cSe.Amount})]})}),Object(a.jsx)("tbody",{children:r})]})},e.renderRevenueTaggedInvTable=function(){var t=e.props.financialRevenue.data,n=t&&t.tagged_invoices,r=Object(a.jsx)(Mke,{colspan:4});return n&&n.length&&(r=Object(a.jsx)(p.Fragment,{children:n.map((function(t,n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.name}),Object(a.jsx)(Vke,{children:t.count}),Object(a.jsx)(Vke,{children:"".concat(t.percent,"%")}),Object(a.jsx)(Vke,{style:{color:e.getDiffColor(t.change)},children:"".concat(t.change,"%")})]},n)}))})),Object(a.jsxs)(zke,{className:"w-100",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Tagged Invoices"}),Object(a.jsx)(Bke,{children:"No."}),Object(a.jsx)(Bke,{children:"%"}),Object(a.jsx)(Bke,{children:"Diff."})]})}),Object(a.jsx)("tbody",{children:r})]})},e.finTables=[e.renderRevenueTaggedInvTable,e.renderRevenueAccountTable],e}return Object(l.a)(n,[{key:"getRevenueAccountName",value:function(e){return"".concat(e.name,": ").concat(e.code)}},{key:"isLoading",get:function(){return this.props.financialRevenue.loading}},{key:"statCsv",get:function(){var e=this.props.financialRevenue.data;return{columns:["statistic_element","value","delta"],reportName:"Revenue Statistics",data:[{statistic_element:oSe.InvoicesPaid,value:e.invoices_paid,delta:e.invoices_paid_change},{statistic_element:oSe.InvoicesWritten,value:e.invoices_written,delta:e.invoices_written_change},{statistic_element:oSe.AverageJobCost,value:e.avg_job_cost,delta:e.avg_job_cost_change},{statistic_element:oSe.AvgJobCost,value:e.avg_over_job_cost,delta:e.avg_over_job_cost_change},{statistic_element:oSe.CreditNotes,value:e.credit_notes,delta:e.credit_notes_change},{statistic_element:oSe.TotalGrossProfit,value:e.total_gross_profit,delta:e.total_gross_profit_change}]}}},{key:"revenueAccountCsv",get:function(){var e=this;return{reportName:"Revenue Accounts",data:this.props.financialRevenue.data.revenue_accounts.map((function(t){var n;return n={},Object(k.a)(n,cSe.RevenueAccount,e.getRevenueAccountName(t)),Object(k.a)(n,cSe.Amount,t.amount),n}))}}},{key:"chartCsv",get:function(){var e=this.props.financialRevenue.data,t=e.chart,n=e.previous_interval_chart;return{reportName:"Revenue report",data:rSe(t&&t.map((function(e,t){return{current_period_date:e.date,current_period_value:e.value}})),n&&n.map((function(e){return{previous_period_date:e.date,previous_period_value:e.value}})))}}},{key:"taggedInvoiceCsv",get:function(){return{data:this.props.financialRevenue.data.tagged_invoices.map((function(e){var t;return t={},Object(k.a)(t,iSe.TaggedInvoices,e.name),Object(k.a)(t,iSe.Number,e.count),Object(k.a)(t,iSe.Percent,e.percent),Object(k.a)(t,iSe.Diff,e.change),t})),reportName:"Tagged Invoices"}}},{key:"data",get:function(){return this.props.financialRevenue.data}},{key:"chartData",get:function(){var e=this.props.financialRevenue.data;return{name:"Revenue",primaryChart:e.chart,secondaryChart:e.previous_interval_chart}}},{key:"statConfig",get:function(){var e=this.props.financialRevenue.data;return e?{data:[{label:oSe.InvoicesPaid,value:Kf(e.invoices_paid),delta:e.invoices_paid_change,hasDelimiter:!0,toolTip:oSe.InvoicesPaid},{label:oSe.InvoicesWritten,value:Kf(e.invoices_written),delta:e.invoices_written_change,hasDelimiter:!0,toolTip:oSe.InvoicesWritten},{label:oSe.AverageJobCost,value:Kf(e.avg_job_cost),delta:e.avg_job_cost_change,hasDelimiter:!0,toolTip:oSe.AverageJobCost},{label:oSe.AvgJobCost,value:Kf(e.avg_over_job_cost),delta:e.avg_over_job_cost_change,hasDelimiter:!0,toolTip:oSe.AvgJobCost},{label:oSe.CreditNotes,value:Kf(e.credit_notes),delta:e.credit_notes_change,toolTip:oSe.CreditNotes},{label:oSe.TotalGrossProfit,value:"".concat(e.total_gross_profit.toFixed(2),"%"),delta:e.total_gross_profit_change,toolTip:oSe.TotalGrossProfit}],perRow:2,perCol:3}:null}}]),n}(nSe);var uSe,dSe,pSe=Object(b.b)((function(e){return{financialRevenue:X0(e)}}))(lSe);!function(e){e.TotalReceivables="Total Receivables",e.Current="Current",e.Month="30 days",e.TwoMonths="60 days",e.ThreeMonths="90+ days"}(uSe||(uSe={})),function(e){e.Contact="Contact",e.Current="Current",e.Month="30 days",e.TwoMonths="60 days",e.ThreeMonths="90+ days",e.Total="Total"}(dSe||(dSe={}));var hSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsv=function(){if(!e.props.financialAccReceivable.data)return null;var t=[e.statCsv],n=e.chartCsv;return n&&t.push(n),t},e.request=function(){var t=e.props,n=t.dispatch,r=t.currentFilterParams;n(Q0(r))},e.renderContactTable=function(){var t=e.props.financialAccReceivable.data,n=t&&t.contacts,r=Object(a.jsx)(Mke,{colspan:6});return n&&n.length&&(r=Object(a.jsx)(p.Fragment,{children:n.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.name}),Object(a.jsx)(Vke,{children:e.current}),Object(a.jsx)(Vke,{children:e.more_30_days}),Object(a.jsx)(Vke,{children:e.more_60_days}),Object(a.jsx)(Vke,{children:e.more_90_days}),Object(a.jsx)(Vke,{children:e.total})]},t)}))})),Object(a.jsxs)(zke,{className:"w-100",noStripped:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:dSe.Contact}),Object(a.jsx)(Bke,{children:dSe.Current}),Object(a.jsx)(Bke,{children:dSe.Month}),Object(a.jsx)(Bke,{children:dSe.TwoMonths}),Object(a.jsx)(Bke,{children:dSe.ThreeMonths}),Object(a.jsx)(Bke,{children:dSe.Total})]})}),Object(a.jsx)("tbody",{children:r})]})},e.finTables=[e.renderContactTable],e}return Object(l.a)(n,[{key:"isLoading",get:function(){return this.props.financialAccReceivable.loading}},{key:"statCsv",get:function(){var e=this.props.financialAccReceivable.data;return{columns:["statistic_element","value","delta"],reportName:"Accounts receivables statistics",data:[{statistic_element:uSe.TotalReceivables,value:e.total,delta:e.total_change},{statistic_element:uSe.Current,value:e.current,delta:e.current_change},{statistic_element:uSe.Month,value:e.more_30_days,delta:e.more_30_days_change},{statistic_element:uSe.TwoMonths,value:e.more_60_days,delta:e.more_60_days_change},{statistic_element:uSe.ThreeMonths,value:e.more_90_days,delta:e.more_90_days_change}]}}},{key:"chartCsv",get:function(){var e=this.props.financialAccReceivable.data.chart;return{reportName:"Accounts Receivables",data:e&&e.map((function(e,t){return{current_period_date:e.date,current_period_value:e.value}}))}}},{key:"data",get:function(){return this.props.financialAccReceivable.data}},{key:"chartData",get:function(){var e=this.props.financialAccReceivable.data;return{name:"Accounts Receivables",primaryChart:e.chart,secondaryChart:e.previous_interval_chart}}},{key:"statConfig",get:function(){var e=this.props.financialAccReceivable.data;return e?{data:[{label:uSe.TotalReceivables,value:Kf(e.total),delta:e.total_change,hasDelimiter:!0,toolTip:uSe.TotalReceivables},{label:uSe.Current,value:Kf(e.current),delta:e.current_change,hasDelimiter:!0,toolTip:uSe.Current},{label:uSe.Month,value:Kf(e.more_30_days),delta:e.more_30_days_change,hasDelimiter:!0,toolTip:uSe.Month},{label:uSe.TwoMonths,value:Kf(e.more_60_days),delta:e.more_60_days_change,hasDelimiter:!0,toolTip:uSe.TwoMonths},{label:uSe.ThreeMonths,value:Kf(e.more_90_days),delta:e.more_90_days_change,toolTip:uSe.ThreeMonths}],perRow:2,perCol:3}:null}}]),n}(nSe);var bSe=Object(b.b)((function(e){return{financialAccReceivable:$0(e)}}))(hSe),fSe=[{name:"Volume",id:"volume"},{name:"Revenue",id:"revenue"},{name:"Accounts Receivables",id:"acc-receivables-report"}],mSe=qf()().startOf("month"),jSe=qf()().endOf("month"),vSe=qf()(jSe).diff(mSe,"d"),OSe=qf()(mSe).subtract(1,"d"),gSe={current_date_from:mSe,current_date_to:jSe,previous_date_from:qf()(OSe).subtract(vSe,"d"),previous_date_to:OSe,location_id:void 0,gl_account_id:void 0,interval:1,tag_ids:[]},xSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={filter:gSe,buildCsv:function(){return null}},e.onChangeLocation=function(t){var n=t.id;e.setState({filter:Object(c.a)(Object(c.a)({},e.state.filter),{},{location_id:n})}),e.debounceGetGl(n)},e.debounceGetGl=Object(m.debounce)(e.getGlAccountByLocation,700),e.onChangePeriods=function(t){e.setState({filter:Object(c.a)(Object(c.a)({},e.state.filter),{},{current_date_from:t.current.start,current_date_to:t.current.end,previous_date_from:t.previous.start,previous_date_to:t.previous.end})})},e.chainCsvReceiveFunc=function(t){e.setState({buildCsv:t})},e.handleChangeFilter=function(t){var n=t.selectedGlAccount,r=t.selectedTags;e.setState({filter:Object(c.a)(Object(c.a)({},e.state.filter),{},{gl_account_id:n&&n.id||void 0,tag_ids:r.map((function(e){return e.id}))})})},e.renderContent=function(){var t,n={primaryLocation:e.props.primary_location,receiveCsvData:e.chainCsvReceiveFunc,currentFilterParams:Object(c.a)(Object(c.a)({},e.state.filter),{},{location_id:e.selectedLocation})};switch(e.activeTabs){case"volume":t=sSe;break;case"revenue":t=pSe;break;case"acc-receivables-report":t=bSe;break;default:return null}return Object(a.jsx)(t,Object(c.a)({},n))},e.locationToValue=function(e){return e.id.toString()},e.locationToLabel=function(e){return e.name},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getGlAccountByLocation(),this.getTags()}},{key:"componentDidUpdate",value:function(e){Jf.a.rebuild()}},{key:"getTags",value:function(){this.props.dispatch(C1())}},{key:"getGlAccountByLocation",value:function(e){var t=e||this.props.primary_location.id;this.props.dispatch(i$([t]))}},{key:"render",value:function(){var e=this.props,t=e.locations,n=e.glAccounts,r=e.jobTags.data,o=this.state,i=o.filter,c=i.previous_date_from,s=i.previous_date_to,l=i.current_date_from,u=i.current_date_to,d=o.buildCsv;return Object(a.jsxs)("div",{className:"h-100",children:[Object(a.jsx)(iee,{children:Object(a.jsxs)(k9,{children:[Object(a.jsx)(C9,{children:Object(a.jsx)(uee,{transformToTable:d})}),Object(a.jsx)(nee,{options:t,value:this.selectedLocation,getOptionValue:this.locationToValue,getOptionLabel:this.locationToLabel,onChange:this.onChangeLocation,placeholder:"Select location...",transformValueById:!0,withBorder:!0}),Object(a.jsx)(fke,{onChange:this.onChangePeriods,defaultPeriods:{current:{start:l,end:u},previous:{start:c,end:s}}}),Object(a.jsx)(yke,{glAccounts:n,tags:r,onChange:this.handleChangeFilter}),Object(a.jsx)(S9,{children:"Financial Report"})]})}),Object(a.jsx)(w9,{children:Object(a.jsx)(yz,{items:this.getTabsConfig,selectedTabId:this.activeTabs})}),Object(a.jsx)(Dke,{className:"w-100",children:this.renderContent()})]})}},{key:"getTabsConfig",get:function(){var e=this;return fSe.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{onClick:function(){e.props.history.push("/reports/financial-report/".concat(t.id))}})}))}},{key:"activeTabs",get:function(){return this.props.match.params.type}},{key:"selectedLocation",get:function(){return this.state.filter.location_id||this.props.primary_location.id}}]),n}(p.PureComponent);var ySe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{jobTags:e.jobTags,locations:AP(e),primary_location:EP(e),glAccounts:c$(e)}})))(xSe);function wSe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return wSe=function(){return e},e}function _Se(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n  margin-bottom: 10px;\n  :not(:first-child){\n    margin-top: 50px;\n  }\n"]);return _Se=function(){return e},e}var kSe,SSe,CSe=x.default.div(_Se(),y.gray4,Bf.medium),NSe=x.default.div(wSe(),y.black0);(SSe=kSe||(kSe={}))[SSe.new=W3.NEW]="new",SSe[SSe.continued=W3.IN_PROGRESS]="continued",SSe[SSe.processed=W3.PROCESSED]="processed",SSe[SSe.completed=W3.COMPLETED]="completed";var ESe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={filters:{status:kSe[e.props.match.params.type],job_id:null},data:[]},e.setPageTitle=function(){var t="";switch(e.props.match.params.type){case"new":t="Incoming";break;case"continued":t="Inventories";break;case"processed":t="Ready to Return / Dispose";break;case"completed":t="Returned / Disposed"}um.status("Warehousing"+(t?" - ":"")+t)},e.eventListeners=[uy.listen(Kg.WarehousingInventoryAdded,(function(){e.getInventories()})),uy.listen(Kg.WarehousingInventoryDeleted,(function(){e.getInventories()}))],e.getInventories=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.filters,a=e.props,o=a.dispatch,i=a.warehousingOptions,!(c=i.selectedLocation)){t.next=8;break}return t.next=6,o(G2(c,r||{},n));case 6:s=t.sent,n&&n>1?e.setState({data:[].concat(Object(Dm.a)(e.state.data),Object(Dm.a)(s.data))}):e.setState({data:s.data});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dataCondition=function(e,t){var n=qf()().startOf("day"),r=qf()().startOf("month"),a=qf()(t.created_at).unix();switch(e){case"today":return a>n.unix();case"yesterday":return a>n.subtract(1,"day").unix()&&a<n.unix();case"thisWeek":return a>qf()().startOf("week").unix();case"thisMonth":return a>r.unix();case"earlier":return a<r.unix()&&a<=qf()().startOf("week").unix();default:return!0}},e.getTodayItems=function(t){return t.filter((function(t){return e.dataCondition("today",t)}))},e.getThisWeekItems=function(t){return t.filter((function(t){return e.dataCondition("thisWeek",t)&&!e.dataCondition("today",t)}))},e.getThisMonthItems=function(t){return t.filter((function(t){return e.dataCondition("thisMonth",t)&&!e.dataCondition("thisWeek",t)&&!e.dataCondition("today",t)}))},e.getEarlierItems=function(t){return t.filter((function(t){return e.dataCondition("earlier",t)}))},e.getRestMenuItems=function(t,n){var r=[];return t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Items",onClick:e.goToItems(n.id)}),t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Delete",onClick:e.removeInventory(n)}),2===r.length&&r.splice(1,0,{type:"divider"}),r},e.goToItems=function(t){return function(){var n=e.props.match.params.type;e.props.history.push("/operations/warehousing/inventories/".concat(n,"/").concat(t,"/items"))}},e.removeInventory=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(FS,{children:[Object(a.jsx)("p",{children:"All the inventory items associated with this inventory will also be deleted. Are you sure you want to delete this inventory?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&d2.deleteInventory(t.id).then((function(){uy.emit(Kg.WarehousingInventoryDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=_v()(e.searchJobsById,100),e.getFilters=function(){e.props.match.params.type,W3.IN_PROGRESS,W3.IN_PROGRESS,W3.COMPLETED,W3.COMPLETED;return[{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return ly.getJobName(e)},placeholder:"Type to search"}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters;switch(console.log(n),t){case"status":r.status=n.value;break;case"jobNumber":r.job_id=null===n||void 0===n?void 0:n.id}e.setState({filters:Object(c.a)({},r)},(function(){e.getInventories()}))},e.loadMore=function(){var t=e.props.inventories.data;return e.getInventories(t.pagination.current_page+1)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setPageTitle(),this.getInventories()}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.setPageTitle();var r=this.props,a=r.warehousingOptions,o=r.match.params.type;if(a&&e.warehousingOptions&&null!==a.selectedLocation&&a.selectedLocation!==e.warehousingOptions.selectedLocation||o!==e.match.params.type)if(o!==e.match.params.type){var i=this.state.filters;i.status=kSe[o],this.setState({filters:Object(c.a)({},i)},(function(){n.getInventories()}))}else this.getInventories()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),um.reset()}},{key:"renderItemsGroup",value:function(e,t,n){var r=this.props.match.params.type;return 0===t.length?null:Object(a.jsxs)(a.Fragment,{children:[n&&Object(a.jsx)(CSe,{children:n}),Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsxs)(ML,{children:[Object(a.jsx)(PL,{children:"Job No."}),Object(a.jsx)(PL,{children:"Inventory No."}),Object(a.jsxs)(PL,{children:["Total ","processed"===r?"Processed":""," Items"]}),Object(a.jsx)(PL,{children:"Remaining To Check-In"}),Object(a.jsx)(PL,{children:"Status"}),Object(a.jsx)(PL,{children:"QR Code"}),Object(a.jsx)(PL,{children:"\xa0"})]}),Object(a.jsx)(LL,{children:this.renderInventoriesRows(e,t)})]})]})}},{key:"renderNoInventories",value:function(e){return Object(a.jsx)(UL,{children:Object(a.jsx)(FL,{children:Object(a.jsx)("div",{className:"no-items",children:"No Inventories..."})})})}},{key:"renderInventoriesRows",value:function(e,t){var n=this;if(!t||0===t.length)return this.renderNoInventories(e);var r=this.props.match.params.type;return t.map((function(t){var o=n.getRestMenuItems(e,t);return Object(a.jsxs)(VL,{to:"/operations/warehousing/inventories/".concat(r,"/").concat(t.id,"/items"),children:[Object(a.jsxs)(FL,{children:[Object(a.jsxs)("strong",{children:["#",t.job_number]}),Object(a.jsx)("br",{}),Object(a.jsx)(HL,{className:"text-sm",children:t.address||"Unknown"})]}),Object(a.jsx)(FL,{children:t.id}),Object(a.jsxs)(FL,{children:[t.items_count," items"]}),Object(a.jsxs)(FL,{children:[t.remaining_items_count," items"]}),Object(a.jsx)(FL,{children:t.status}),Object(a.jsx)(FL,{children:Object(a.jsx)(uwe,{value:btoa(JSON.stringify({t:V3.inventory,id:t.id})),size:30,zoom:150,level:"Q"})}),Object(a.jsx)(FL,{children:o.length>0&&Object(a.jsxs)(GL,{children:[Object(a.jsx)(J3,{name:Ef.Trolley,color:y.black0,fill:!0,size:24,className:"mr-3",title:""}),Object(a.jsx)(yw,{items:o,noMargin:!0,direction:"right",iconName:Ef.MenuVertical})]})})]},t.id)}))}},{key:"getJobNumberOptions",value:function(){if(this.props.inventories.data){var e=this.props.inventories.data.data,t=[{value:"",label:"All"}];return e.forEach((function(e){t.push({value:e.job_id.toString(),label:e.job_number})})),j.a.uniqBy(t,"value")}return[]}},{key:"render",value:function(){var e=this,t=this.props.inventories.loading,n=this.state.data,r=this.props.inventories.data;n.length;return Object(a.jsx)(Cw.Consumer,{children:function(o){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100 print-hide",children:[Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter}),e.renderItemsGroup(o,e.getTodayItems(n),"Today"),e.renderItemsGroup(o,e.getThisWeekItems(n),"This week"),e.renderItemsGroup(o,e.getThisMonthItems(n),"This month"),e.renderItemsGroup(o,e.getEarlierItems(n),"Earlier"),!t&&n&&!n.length&&Object(a.jsx)("div",{className:"mt-4",children:"No items"}),!!n.length&&n.length<r.pagination.total_items&&Object(a.jsx)("div",{className:"text-center print-hide",children:Object(a.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:e.loadMore,children:"Load More"})})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(NSe,{className:"d-flex flex-wrap",children:n.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsxs)("strong",{children:["#",e.job_number]})}),Object(a.jsx)(lwe.a,{value:btoa(JSON.stringify({t:V3.inventory,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}})}}]),n}(p.Component),ASe=Object(LO.compose)(Object(b.b)((function(e){return{inventories:e.warehousing.inventories,warehousingOptions:r5(e),locations:e.user.locations}})),v.g,Mm({jobs:{fetch:ly.searchJobs,initialData:null}}))(ESe),TSe=(p.PureComponent,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobId:null,status:""},e.getReturnedItems=function(t,n){var r=e.props,a=r.dispatch,o=r.warehousingOptions.selectedLocation||e.primaryLocation();o&&(a(K2(o,t||{},n)),a($2(o)))},e.primaryLocation=function(){var t=e.props.locations.find((function(e){return!!e.primary}));return t?t.id:null},e.goToItems=function(t){return function(){e.props.history.push("/operations/warehousing/inventories/".concat(t,"/items"))}},e.removeInventory=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"All the inventory items associated with this inventory will also be deleted. Are you sure you want to delete this inventory?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&d2.deleteInventory(t.id).then((function(){e.getReturnedItems()}));case 5:case"end":return n.stop()}}),n)})))},e.getRestMenuItems=function(t,n){var r=[];return t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Edit",onClick:e.goToItems(n.id)}),t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Delete",onClick:e.removeInventory(n)}),2===r.length&&r.splice(1,0,{type:"divider"}),r},e.getFilters=function(){var t={value:"",label:"All"},n={value:"",label:"All Jobs"},r={value:"",label:"All"},a=Object.keys(G3).map((function(e){return{value:G3[e],label:G3[e]}}));a.unshift(t);var o=[],i=e.props.returnedDisposedJobs.data;return i&&i.data.length>0&&(o=i.data.map((function(e){return{value:e.job_id,label:e.job_number}}))),o.unshift(n),[{label:"Item name",filterKey:"itemName",options:[],defaultValue:r,type:"text"},{label:"Job Number",filterKey:"jobNumber",options:o,defaultValue:n},{label:"Storage Location",filterKey:"storageLocation",options:[],defaultValue:r},{label:"Status",filterKey:"status",options:a,defaultValue:t}]},e.handleFilter=function(t,n){switch(t){case"status":e.setState({status:n.value},(function(){e.getReturnedItems({job_id:e.state.jobId,status:e.state.status})}));break;case"jobNumber":e.setState({jobId:n.value},(function(){e.getReturnedItems({job_id:e.state.jobId,status:e.state.status})}))}},e.handlePagination=function(t){return e.getReturnedItems({job_id:e.state.jobId,status:e.state.status},t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getReturnedItems()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getReturnedItems({job_id:this.state.jobId,status:this.state.status})}},{key:"renderReturnedItemsRows",value:function(e){var t=this,n=this.props.returnedItems.data.data;return n?n.map((function(n,r){var o=t.getRestMenuItems(e,n);return Object(a.jsxs)(VL,{to:"/operations/warehousing/inventories/".concat(n.id,"/items"),children:[Object(a.jsx)(FL,{children:n.name}),Object(a.jsxs)(FL,{children:["#",n.inventory.job_number," | ",n.inventory.address]}),Object(a.jsx)(FL,{children:n.quantity}),Object(a.jsx)(FL,{children:n.status}),Object(a.jsx)(FL,{children:n.current_status&&Object(a.jsx)($_.a,{format:Pj,children:n.current_status.created_at})}),Object(a.jsx)(FL,{children:o.length>0&&Object(a.jsx)(GL,{children:Object(a.jsx)(yw,{items:o,noMargin:!0,direction:"right",iconName:Ef.MenuVertical})})})]},r)})):null}},{key:"render",value:function(){var e=this,t=this.props.returnedItems.loading,n=this.props.returnedItems.data,r=n&&n.data.length>0;return Object(a.jsx)(Cw.Consumer,{children:function(o){return Object(a.jsxs)(hC,{children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter}),Object(a.jsxs)(f7,{className:"table",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:Object(a.jsx)(YL,{children:"Item"})}),Object(a.jsx)(PL,{children:"Job"}),Object(a.jsx)(PL,{children:"Qty"}),Object(a.jsx)(PL,{children:"Status"}),Object(a.jsx)(PL,{children:"Status changed"}),Object(a.jsx)(PL,{})]})}),Object(a.jsx)(LL,{children:r?e.renderReturnedItemsRows(o):null})]}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)(AS,{pagination:n.pagination,onChange:e.handlePagination})]})}})}}]),n}(p.Component)),ISe=Object(LO.compose)(Object(b.b)((function(e){return{returnedItems:e.warehousing.returnedItems,warehousingOptions:r5(e),locations:e.user.locations,returnedDisposedJobs:e.warehousing.returnedDisposedJobs}})),v.g)(TSe);function RSe(){var e=Object(f.a)(["\n  label {\n    margin-top: 5px;\n  }\n"]);return RSe=function(){return e},e}function DSe(){var e=Object(f.a)(["\n  label {\n    margin-top: 5px;\n  }\n"]);return DSe=function(){return e},e}function MSe(){var e=Object(f.a)(["\n  div {\n    color: ",";\n    font-weight: ",";\n  }\n"]);return MSe=function(){return e},e}function PSe(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n"]);return PSe=function(){return e},e}function LSe(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return LSe=function(){return e},e}function FSe(){var e=Object(f.a)(["\n  table:not(:first-child) {\n    margin-top: 40px;\n  }\n"]);return FSe=function(){return e},e}var USe=x.default.div(FSe()),VSe=x.default.div(LSe()),BSe=Object(x.default)(uF)(PSe(),Bf.medium),JSe=Object(x.default)(_8)(MSe(),y.black0,Bf.bold),zSe=(Object(x.default)(_8)(DSe()),Object(x.default)(v8)(RSe()),"WH_PLACEMENT_CHARGES"),qSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=e.props.update,s=Object(c.a)(Object(c.a)({},n),{},{charging_interval:(null===(r=n.charging_interval)||void 0===r?void 0:r.value)||n.charging_interval||null}),!i){t.next=10;break}return t.next=6,d2.updateChargingIntervalToPlacement(n.inventory_item_placement_id,n.inventory_storage_space_type_charging_interval_id,s);case 6:l=t.sent,uy.emit(Kg.WarehousingChargingIntervalUpdated,l),t.next=14;break;case 10:return t.next=12,d2.assignChargingIntervalToPlacement(s);case 12:l=t.sent,uy.emit(Kg.WarehousingChargingIntervalAdded,l);case 14:return null===(a=(o=e.props).afterSubmit)||void 0===a||a.call(o,l),t.abrupt("return",l);case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),e.onIntervalChange=function(t){var n=e.props.change;(null===t||void 0===t?void 0:t.id)&&(n("charging_interval",t.charging_interval),n("charging_rate_per_interval",t.charging_rate_per_interval),n("max_count_to_the_next_interval",t.max_count_to_the_next_interval))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.onSubmit,r=e.handleSubmit,o=e.chargingIntervals;return Object(a.jsxs)("form",{id:zSe,onSubmit:r(n||this.onSubmit),children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:(null===o||void 0===o?void 0:o.length)?Object(a.jsx)(yv.a,{name:"inventory_storage_space_type_charging_interval",label:"Charging Interval",component:Kv,options:o||[],getOptionLabel:function(e){return e.charging_interval},getOptionValue:function(e){return e.id},validate:uv,onChange:this.onIntervalChange}):Object(a.jsx)(yv.a,{name:"charging_interval",label:"Charging Interval",component:Kv,options:Object.keys(C8).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:uv})}),Object(a.jsx)("div",{className:"col",children:"\xa0"})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"charging_rate_per_interval",label:"Rate Per Interval",component:ZO,type:"number",currency:!0,validate:uv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval",component:ZO,type:"number",validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"up_to_amount",label:"Up To Amount",component:ZO,type:"number",currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"up_to_interval_count",label:"Up To Interval Count",component:ZO,type:"number"})})]})]})}}]),n}(p.PureComponent),WSe=Object(LO.compose)(Mm({jobs:{fetch:ly.getAllJobs},spaces:{fetch:N2.getStorageSpaces},containers:{fetch:N2.getStorageContainers},standardItems:{fetch:N2.getStandardItems}}),Object(Gj.a)({form:zSe}))(qSe),HSe="WH_STORAGE_ITEMS_FILTERS",GSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=(a=e.props).onSubmit)||void 0===r?void 0:r.call(a,Object(c.a)(Object(c.a)({},n),{},{from_date:Wj(null===(o=n.from_date)||void 0===o?void 0:o.startOf("day"),!0),to_date:Wj(null===(i=n.to_date)||void 0===i?void 0:i.endOf("day"),!0)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.reset=Object(Um.a)(Fm.a.mark((function t(){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.reset();case 2:e.props.handleSubmit(e.onSubmit)();case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(a.jsx)("form",{id:HSe,onSubmit:e(this.onSubmit),children:Object(a.jsxs)("div",{className:"row m-0 align-items-center",children:[Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)(yv.a,{name:"from_date",label:"From Date",component:Cy})}),Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)(yv.a,{name:"to_date",label:"To Date",component:Cy})}),Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)(yv.a,{name:"show_all",label:"Show All",component:LJ,size:25})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Apply"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",onClick:this.reset,children:"Reset"})]})})]})})}}]),n}(p.PureComponent),YSe=Object(LO.compose)(Object(Gj.a)({form:HSe}))(GSe),QSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobId:null,status:"",showFilter:!1,filters:{show_all:!1}},e.eventListeners=[uy.listen(Kg.WarehousingChargingIntervalUpdated,(function(){e.getStorageItems()})),uy.listen(Kg.WarehousingChargingIntervalDeleted,(function(){e.getStorageItems()}))],e.togglePlacement=function(t){e.props.dispatch(c5(t))},e.toggleGroup=function(t){var n=e.props,r=n.dispatch,a=n.selectedPlacements,o=n.selectedGroup;r(o5(t)),t.placements.map((function(t){(e.containsObject({itemId:t.inventory_item.id,containerId:t.container.id},a)||o.includes(t.inventory_storage_container_id))&&a&&0!==a.length||r(c5(t))}))},e.groupIsSelected=function(t){var n=e.props.selectedGroup;return!!(n&&n.length>0)&&n.includes(t)},e.placementIsSelected=function(t,n){var r=e.props.selectedPlacements;return!!(r&&r.length>0)&&e.containsObject({itemId:t,containerId:n},r)},e.containsObject=function(e,t){var n;for(n=0;n<t.length;n++)if(t[n].itemId===e.itemId&&t[n].containerId===e.containerId)return!0;return!1},e.getStorageItems=function(t,n){var r=e.props,a=r.dispatch,o=r.warehousingOptions.selectedLocation,i=e.state.filters;o&&a(Y2(o,Object(c.a)(Object(c.a)({placement:i.show_all?0:1,charging_interval:1},i),t),n))},e.removeInventoryItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Are you sure you want to delete inventory item ",Object(a.jsxs)("strong",{children:["#",t.inventory_item.id," ",t.inventory_item.name]})," from the list?"]}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:if(!n.sent){n.next=8;break}return n.next=7,d2.removeInventoryItem(t.inventory_item.id);case 7:e.getStorageItems();case 8:case"end":return n.stop()}}),n)})))},e.removeStorageCharge=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to remove storage charge from this item?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:if(!n.sent||!t.charging_interval){n.next=8;break}return n.next=7,d2.removeChargingIntervalFromPlacement(t.id,t.charging_interval.inventory_storage_space_type_charging_interval_id);case 7:e.getStorageItems();case 8:case"end":return n.stop()}}),n)})))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"edit_charge":return console.log(r),Object(a.jsx)(P8,{isOpen:!0,title:"Edit Charging Interval",body:Object(a.jsx)(WSe,Object(c.a)(Object(c.a)({update:!0},r),{},{afterSubmit:e.hideModal})),id:zSe,onClose:e.hideModal})}return null},e.getRestMenuItems=function(t,n){var r,a,o=[];t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&o.push({name:"Edit storage charge",onClick:e.showModal("edit_charge",{initialValues:Object(c.a)(Object(c.a)({},n.charging_interval),{},{charging_interval:{value:null===n||void 0===n||null===(r=n.charging_interval)||void 0===r?void 0:r.charging_interval,label:null===n||void 0===n||null===(a=n.charging_interval)||void 0===a?void 0:a.charging_interval}})})});return t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&o.push({name:"Delete storage charge",onClick:e.removeStorageCharge(n)}),2===o.length&&o.splice(1,0,{type:"divider"}),o},e.handlePagination=function(t){return e.getStorageItems({job_id:e.state.jobId,status:e.state.status},t)},e.toggleFilters=function(){e.setState({showFilter:!e.state.showFilter})},e.applyFilters=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({filters:n},(function(){e.getStorageItems()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),um.reset()}},{key:"componentDidMount",value:function(){this.getStorageItems(),um.status("Warehousing - Items in Storage")}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getStorageItems({job_id:this.state.jobId,status:this.state.status})}},{key:"renderInventoryTable",value:function(e){var t,n=null===(t=this.props.storageItems.data)||void 0===t?void 0:t.data;return(null===n||void 0===n?void 0:n.length)?Object(a.jsxs)(BSe,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(_8,{scope:"col",children:"Job"}),Object(a.jsx)(_8,{scope:"col",children:"Inventory #"}),Object(a.jsx)(_8,{scope:"col",children:"Item Name"}),Object(a.jsx)(_8,{scope:"col",children:"Location"}),Object(a.jsx)(_8,{scope:"col",children:"Date Started"}),Object(a.jsx)(_8,{scope:"col",children:"Days in Location"}),Object(a.jsx)(k8,{scope:"col",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:this.renderInventoryItems(n,e)})]}):null}},{key:"renderInventoryItems",value:function(e,t){var n=this;return e?e.map((function(e,r){var o=n.getRestMenuItems(t,e);return e.inventory_item?Object(a.jsxs)(UL,{children:[Object(a.jsx)(v8,{children:ly.getJobName(e.inventory_item.job)}),Object(a.jsx)(v8,{children:e.inventory_item.inventory_id}),Object(a.jsx)(v8,{children:e.inventory_item.name}),Object(a.jsxs)(v8,{children:[e.space.name," (",e.space.location.code,")"]}),Object(a.jsx)(v8,{children:Object(a.jsx)($_.a,{format:Pj,children:e.started_at})}),Object(a.jsx)(v8,{children:Object(a.jsx)($_.a,{fromNow:!0,ago:!0,children:e.started_at})}),Object(a.jsx)("td",{children:o.length>0&&Object(a.jsx)(GL,{children:Object(a.jsx)(yw,{items:o,noMargin:!0,direction:"right",iconName:Ef.MenuVertical})})})]},r):null})):null}},{key:"render",value:function(){var e=this,t=this.props.storageItems.loading,n=this.props.storageItems.data,r=n&&n.data.length>0,o=this.state,i=o.filters,s=o.showFilter;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cw.Consumer,{children:function(o){return Object(a.jsxs)(hC,{className:"p-4",children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("p",{children:Object(a.jsx)("div",{onClick:e.toggleFilters,className:"text-primary cursor-pointer",children:s?"Hide Filters":"Show Filter"})}),s&&Object(a.jsx)(YSe,{initialValues:Object(c.a)(Object(c.a)({},i),{},{from_date:i.from_date?qf()(i.from_date):null,to_date:i.from_date?qf()(i.to_date):null}),onSubmit:e.applyFilters}),Object(a.jsx)(USe,{className:"d-flex flex-column",children:r?e.renderInventoryTable(o):"No items"}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(a.jsx)(AS,{pagination:n.pagination,onChange:e.handlePagination})})]})}})]})}}]),n}(p.Component),KSe=Object(LO.compose)(Object(b.b)((function(e){return{storageItems:e.warehousing.itemsInStorage,selectedGroup:e.warehousing.selectedGroup,selectedPlacements:e.warehousing.selectedPlacements,warehousingOptions:r5(e),locations:e.user.locations}})),v.g)(QSe),ZSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getStorageUsage=function(t){var n=e.props,r=n.dispatch,a=n.warehousingOptions.selectedLocation||e.primaryLocation();a&&r(Z2(a,t))},e.primaryLocation=function(){var t=e.props.locations.find((function(e){return!!e.primary}));return t?t.id:null},e.getFilters=function(){var e={value:"",label:"All items"},t={value:"",label:"All"},n=[],r=[];return n.unshift(e),r.unshift(t),[{label:"Storage Location",filterKey:"storageLocation",options:n,defaultValue:e},{label:"Occupied Status",filterKey:"occupiedStatus",options:r,defaultValue:t}]},e.handleFilter=function(e,t){e},e.handlePagination=function(t){return e.getStorageUsage(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getStorageUsage()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&n.selectedLocation&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getStorageUsage()}},{key:"renderStorageUsageTable",value:function(e){var t=this,n=this.props.storageUsage.data.data;return n?n.map((function(n){return Object(a.jsxs)(BSe,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(JSe,{scope:"col",children:Object(a.jsx)("div",{children:n.name})}),Object(a.jsx)(_8,{scope:"col",width:"10%",children:"Days Used"}),Object(a.jsx)(_8,{scope:"col",width:"15%",children:"Occupied Status"})]})}),Object(a.jsx)("tbody",{children:t.renderTableItems(n.spaces,e)})]})})):null}},{key:"renderTableItems",value:function(e,t){return e?e.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(v8,{children:e.name}),Object(a.jsx)(v8,{children:Object(a.jsx)($_.a,{fromNow:!0,ago:!0,children:e.created_at})}),Object(a.jsx)(v8,{children:e.status})]},e.id)})):null}},{key:"render",value:function(){var e=this,t=this.props.storageUsage.loading,n=this.props.storageUsage.data,r=n&&n.data.length>0;return Object(a.jsx)(Cw.Consumer,{children:function(o){return Object(a.jsxs)(hC,{children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter}),Object(a.jsx)(USe,{className:"d-flex flex-column",children:r?e.renderStorageUsageTable(o):null}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)(VSe,{children:Object(a.jsx)(AS,{pagination:n.pagination,onChange:e.handlePagination})})]})}})}}]),n}(p.Component),XSe=Object(LO.compose)(Object(b.b)((function(e){return{storageUsage:e.warehousing.storageUsage,warehousingOptions:r5(e),locations:e.user.locations}})),v.g)(ZSe),$Se=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobId:null,status:""},e.getInventories=function(t){var n=e.props,r=n.dispatch,a=n.warehousingOptions.selectedLocation||e.primaryLocation();a&&(r(Q2(a,t,e.state.jobId)),r(X2(a,t)))},e.primaryLocation=function(){var t=e.props.locations.find((function(e){return!!e.primary}));return t?t.id:null},e.goToEdit=function(t){return function(){e.props.history.push("/operations/warehousing/inventories/item/".concat(t,"/details"))}},e.removeInventoryItem=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(Sw("Confirm","Delete inventory item ".concat(t.id,"?")));case 3:if(!n.sent){n.next=9;break}return d2.removeInventoryItem(t.id).then((function(){e.getInventories()})),n.abrupt("return",null);case 9:return n.abrupt("return",Promise.reject(!0));case 10:case"end":return n.stop()}}),n)})))},e.getRestMenuItems=function(t,n){var r=[];return t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Edit",onClick:e.goToEdit(n.id)}),t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Delete",onClick:e.removeInventoryItem(n)}),2===r.length&&r.splice(1,0,{type:"divider"}),r},e.getFilters=function(){var t={value:"",label:"All"},n={value:"",label:"All Jobs"},r=Object.keys(W3).map((function(e){return{value:W3[e],label:W3[e]}})),a=[],o=e.props.toReturnDisposeJobs.data;return o&&o.data.length>0&&(a=o.data.map((function(e){return{value:e.job_id,label:e.job_number}}))),r.unshift(t),a.unshift(n),[{label:"Job Number",filterKey:"jobNumber",options:a,defaultValue:n},{label:"Status",filterKey:"status",options:r,defaultValue:t}]},e.handleFilter=function(t,n){switch(t){case"status":e.setState({status:n.value});break;case"jobNumber":e.setState({jobId:n.value},(function(){e.getInventories(1)}))}},e.filterByState=function(t){return e.state.status&&(t=t.filter((function(t){return t.status===e.state.status}))),t},e.handlePagination=function(t){return e.getInventories(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getInventories()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getInventories()}},{key:"renderInventoryTable",value:function(e){var t=this,n=this.filterByState(this.props.inventories.data.data);return n?n.map((function(n){return Object(a.jsxs)(BSe,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(JSe,{scope:"col",children:Object(a.jsxs)("div",{children:["#",n.job_number]})}),Object(a.jsx)(_8,{scope:"col",children:n.address}),Object(a.jsx)(_8,{scope:"col",width:"10%",children:"Qty"}),Object(a.jsx)(_8,{scope:"col",width:"15%",children:"Current Location"}),Object(a.jsx)(_8,{scope:"col",width:"15%",children:"Status"}),Object(a.jsx)(_8,{scope:"col",width:"15%",children:"Status Changed"}),Object(a.jsx)(k8,{scope:"col",width:"5%",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:t.renderInventoryItems(n.items,e)})]})})):null}},{key:"renderInventoryItems",value:function(e,t){var n=this;return e?e.map((function(e){var r=n.getRestMenuItems(t,e);return Object(a.jsxs)(VL,{to:"/operations/warehousing/inventories/item/".concat(e.id,"/details"),children:[Object(a.jsx)(v8,{colSpan:2,children:e.name}),Object(a.jsx)(v8,{children:e.quantity}),Object(a.jsx)(v8,{children:e.customer_location}),Object(a.jsx)(v8,{children:e.current_status.status}),Object(a.jsx)(v8,{children:Object(a.jsx)($_.a,{format:Pj,children:e.updated_at})}),Object(a.jsx)("td",{children:r.length>0&&Object(a.jsx)(GL,{children:Object(a.jsx)(yw,{items:r,noMargin:!0,direction:"right",iconName:Ef.MenuVertical})})})]},e.id)})):null}},{key:"render",value:function(){var e=this,t=this.props.inventories.loading,n=this.props.inventories.data,r=n&&n.data.length>0;return Object(a.jsx)(Cw.Consumer,{children:function(o){return Object(a.jsxs)(hC,{children:[t&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(E7,{filters:e.getFilters(),handleChange:e.handleFilter}),Object(a.jsx)(USe,{className:"d-flex flex-column",children:r?e.renderInventoryTable(o):null}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)(VSe,{children:Object(a.jsx)(AS,{pagination:n.pagination,onChange:e.handlePagination})})]})}})}}]),n}(p.Component),eCe=Object(LO.compose)(Object(b.b)((function(e){return{inventories:e.warehousing.readyToReturn,toReturnDisposeJobs:e.warehousing.toReturnDisposeJobs,warehousingOptions:r5(e),locations:e.user.locations}})),v.g)($Se);var tCe=function(e){var t=e.loading,n=e.children;return Object(a.jsxs)(Im,{width:350,children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right",id:"finance-sidebar-tooltip"}),Object(a.jsxs)("div",{className:"position-relative",children:[t&&Object(a.jsx)(av,{size:40,color:y.gray1}),n]})]})},nCe=n(320);function rCe(){var e=Object(f.a)(["\n  display: flex;\n"]);return rCe=function(){return e},e}function aCe(){var e=Object(f.a)(["\n  border: 1px solid ",";\n  border-radius: 4px;\n  margin-left: 20px;\n  cursor: pointer;\n"]);return aCe=function(){return e},e}var oCe=x.default.button(aCe(),y.gray2),iCe=x.default.div(rCe()),cCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Your link has been copied to the clipboard. Use this link to send the report to customers or insurers and allow them to approve the costings. This link will allow them to see each inventory item, the restoration status and related photos."}),Object(a.jsxs)(iCe,{children:[Object(a.jsx)(c9,{className:"form-control",type:"text",disabled:!0,value:e.props.link}),Object(a.jsx)(nCe.CopyToClipboard,{text:e.props.link,children:Object(a.jsx)(oCe,{children:"Copy"})})]})]})},e.renderFooter=function(){},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.closeModal,n=e.modalIsOpen;return Object(a.jsx)(vO,{isOpen:n,children:Object(a.jsx)(PO,{onClose:function(){return t("newInventoryModal")},footer:this.renderFooter(),body:this.renderBody(),loading:!1,title:"Get Link"})})}}]),n}(p.Component),sCe=Object(LO.compose)()(cCe),lCe="WH_INVENTORY_ITEM",uCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t=e.props,n=t.jobs,r=t.spaces,a=t.containers;t.standardItems;n.fetch(),r.fetch(),a.fetch()},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,d2.updateInventoryItem(i,n);case 5:c=t.sent,uy.emit(Kg.WarehousingInventoryItemUpdated,c),t.next=22;break;case 9:return t.next=11,d2.createInventoryItem(n);case 11:if(c=t.sent,!n.space&&!n.container){t.next=21;break}return t.prev=13,t.next=16,d2.startPlacement({inventory_item_id:c.id,inventory_storage_container_id:(null===(s=n.container)||void 0===s?void 0:s.id)||null,inventory_storage_space_id:(null===(l=n.space)||void 0===l?void 0:l.id)||null,is_used_on_ar:!0});case 16:t.sent,t.next=21;break;case 19:t.prev=19,t.t0=t.catch(13);case 21:uy.emit(Kg.WarehousingInventoryItemAdded,c);case 22:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 26:return t.prev=26,t.t1=t.catch(0),t.t1.status_code===Dg&&j.a.forEach({inventory_item_standard_type_id:"standard_type"},(function(e,n){t.t1.fields[e]=t.t1.fields[n]})),t.abrupt("return",Mg(t.t1));case 30:case"end":return t.stop()}}),t,null,[[0,26],[13,19]])})));return function(e){return t.apply(this,arguments)}}(),e.loadStandardItems=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.standardItems.fetch({term:n});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadStandardItems=_v()(e.loadStandardItems,500),e.onChangeStandardType=function(t){var n=e.props.change;(null===t||void 0===t?void 0:t.id)&&(n("assessment_fee",t.assessment_fee),n("estimated_replacement_cost",t.estimated_replacement_cost),n("restoration_hours",t.restoration_hours+""),n("restoration_cost",t.restoration_cost))},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r=this.props,o=r.submitting,i=r.handleSubmit,c=r.jobs,s=r.spaces,l=r.containers,u=(r.standardItems,c.loading||s.loading||l.loading);return Object(a.jsxs)("form",{id:lCe,onSubmit:i(this.onSubmit),children:[(o||u)&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"name",label:"Description",component:ZO,validate:uv,itemProp:{autoFocus:!0}})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"quantity",label:"Quantity",component:ZO,type:"number",min:1,step:1,validate:uv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"serial_number",label:"Serial No.",component:ZO})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"model",label:"Model",component:ZO})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"customer_location",label:"Customer Location",component:ZO,disabled:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"job",label:"Job Number",component:Kv,options:(null===(e=c.data)||void 0===e?void 0:e.data)||[],getOptionLabel:function(e){return ly.getJobName(e)},getOptionValue:function(e){return e.id},disabled:!0})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"space",label:"Location",component:Kv,options:(null===(t=s.data)||void 0===t?void 0:t.data)||[],getOptionLabel:function(e){return e.name+" ("+e.location.code+")"},getOptionValue:function(e){return e.id}})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"container",label:"Box/Pallet",component:Kv,options:(null===(n=l.data)||void 0===n?void 0:n.data)||[],getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.id}})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"standard_type",label:"Standard Item",component:rO,loadOptions:this.debouncedLoadStandardItems,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:this.onChangeStandardType})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"restoration_hours",label:"Restoration Hour",component:ZO})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"restoration_cost",label:"Restoration Cost",currency:!0,component:ZO,type:"number",min:1,step:"any"})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"assessment_fee",label:"Assessment Fee",currency:!0,component:ZO,type:"number",min:1,step:"any"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"estimated_replacement_cost",label:"Estimated Replacement Cost",currency:!0,component:ZO,type:"number",min:1,step:"any"})})]})]})}}]),n}(p.PureComponent),dCe=Object(LO.compose)(Mm({jobs:{fetch:ly.getAllJobs},spaces:{fetch:N2.getStorageSpaces},containers:{fetch:N2.getStorageContainers},standardItems:{fetch:N2.getStandardItems}}),Object(Gj.a)({form:lCe}))(uCe),pCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.processing=!1,e.handleScan=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing){t.next=19;break}if(e.processing=!0,!n){t.next=18;break}if(e.setState({result:n}),t.prev=4,r=JSON.parse(atob(n)),[V3.space,V3.container].includes(r.t)){t.next=10;break}e.setState({error:"Invalid type '".concat(r.t,"'")}),t.next=12;break;case 10:return t.next=12,e.assign(Y3[r.t],r.id);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0),e.setState({error:"Invalid qr code"});case 18:e.processing=!1;case 19:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleError=function(t){e.setState({error:t.message}),console.error(t.message)},e.assign=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({submitting:!0}),o=[],i=[],c=null,"space"!==n){t.next=9;break}return t.next=7,N2.getStorageSpace(r);case 7:s=t.sent,c=s.inventory_storage_space_type;case 9:return e.props.selectedInventoryItems.forEach((function(e){var t=e.placement||{};t[n]||(t[n]={}),t[n].id=r,o.push(d2.stopPlacement(e.id))})),t.next=12,Promise.all(o);case 12:return e.props.selectedInventoryItems.forEach((function(e){var t,a,o=e.placement||{};o[n]||(o[n]={}),o[n].id=r,i.push(d2.startPlacement({inventory_item_id:e.id,inventory_storage_container_id:null===(t=o.container)||void 0===t?void 0:t.id,inventory_storage_space_id:null===(a=o.space)||void 0===a?void 0:a.id,is_used_on_ar:!0}))})),t.next=15,Promise.all(i);case 15:if(l=t.sent.map((function(e){return e.data})),!(null===(a=c)||void 0===a?void 0:a.is_chargeable)){t.next=23;break}return t.next=19,N2.getChargingIntervals({inventory_storage_space_type_id:c.id,per_page:500});case 19:(u=t.sent.data).length?e.setState({chargingIntervals:u,placements:l,submitting:!1}):e.props.onClose(),t.next=24;break;case 23:e.props.onClose();case 24:uy.emit(Kg.WarehousingInventoryItemUpdated);case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onChargingIntervalSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.inventory_storage_space_type_charging_interval,a=Object(Rm.a)(n,["inventory_storage_space_type_charging_interval"]),o=e.state.placements,t.next=4,Promise.all(o.map((function(e){return d2.assignChargingIntervalToPlacement(Object(c.a)(Object(c.a)({},a),{},{inventory_item_placement_id:e.id,inventory_storage_space_type_charging_interval_id:r.id}))})));case 4:e.props.onClose();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.state,n=t.error,r=t.result,o=t.chargingIntervals,i=t.placements;if(o){var c=o.find((function(e){return e.is_default}));return Object(a.jsxs)("div",{className:"p-3",children:[Object(a.jsx)("p",{children:"Assign charging interval to scanned location."}),Object(a.jsx)(WSe,{chargingIntervals:o,placements:i,initialValues:{inventory_storage_space_type_charging_interval:c,charging_interval:null===c||void 0===c?void 0:c.charging_interval,charging_rate_per_interval:null===c||void 0===c?void 0:c.charging_rate_per_interval,max_count_to_the_next_interval:null===c||void 0===c?void 0:c.max_count_to_the_next_interval},onSubmit:e.onChargingIntervalSubmit})]})}return Object(a.jsxs)("div",{className:"qr-reader-wrapper",children:[n&&Object(a.jsx)("p",{className:"p-3 text-danger",children:n}),r&&Object(a.jsx)("p",{className:"p-3 text-success",children:r}),Object(a.jsx)(q3.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:"100%"}})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=(e.title,e.onClose),r=this.state,o=r.submitting,i=r.chargingIntervals;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{bodyClass:"p-0",onClose:n,loading:o,title:"Scan to Location/Pallet",body:this.renderModalBody(),footer:i&&Object(a.jsx)("button",{type:"submit",form:zSe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function hCe(){var e=Object(f.a)(["\n  font-weight: bold;\n"]);return hCe=function(){return e},e}function bCe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 32px;\n  font-size: 15px;\n"]);return bCe=function(){return e},e}function fCe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  input {\n    // max-width: 590px;\n    // margin-right: 10px;\n  }\n"]);return fCe=function(){return e},e}function mCe(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return mCe=function(){return e},e}var jCe=x.default.div(mCe()),vCe=x.default.div(fCe()),OCe=(x.default.div(bCe()),x.default.div(hCe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,data:[],filteredData:[]},e.componentDidMount=function(){e.loadData()},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),n=e.props.type,r=[],"space"!==n){t.next=9;break}return t.next=6,N2.getStorageSpaces({per_page:500});case 6:r=t.sent.data,t.next=12;break;case 9:return t.next=11,N2.getStorageContainers({per_page:500});case 11:r=t.sent.data;case 12:e.setState({data:r,filteredData:r,loading:!1});case 13:case"end":return t.stop()}}),t)}))),e.filterData=function(t){var n=t.target.value.trim(),r=e.state.data,a=n?r.filter((function(e){return-1!==(e.name||e.label).toLowerCase().indexOf(n)})):r;e.setState({filteredData:a})},e.assign=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),r=[],a=[],o=e.props.type,e.props.selectedInventoryItems.forEach((function(e){var n=e.placement||{};n[o]||(n[o]={}),n[o].id=t.id,r.push(d2.stopPlacement(e.id))})),n.next=7,Promise.all(r);case 7:return e.props.selectedInventoryItems.forEach((function(e){var n,r,i=e.placement||{};i[o]||(i[o]={}),i[o].id=t.id,a.push(d2.startPlacement({inventory_item_id:e.id,inventory_storage_container_id:null===(n=i.container)||void 0===n?void 0:n.id,inventory_storage_space_id:null===(r=i.space)||void 0===r?void 0:r.id,is_used_on_ar:!0}))})),n.next=10,Promise.all(a);case 10:e.props.closeModal(),uy.emit(Kg.WarehousingInventoryItemUpdated);case 12:case"end":return n.stop()}}),n)})))},e.renderBody=function(){var t=e.state.filteredData;return Object(a.jsxs)("div",{children:[Object(a.jsx)(vCe,{children:Object(a.jsx)(c9,{className:"form-control",type:"text",placeholder:"Search...",onChange:e.filterData})}),t.length>0&&Object(a.jsx)(jCe,{children:Object(a.jsx)(lF,{children:Object(a.jsx)(LL,{children:t.map((function(t){return Object(a.jsx)(UL,{onClick:e.assign(t),children:Object(a.jsxs)(FL,{children:[t.name||t.label,t.location?" (".concat(t.location.code,")"):""]})})}))})})})]})},e.renderFooter=function(){},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.closeModal,n=e.modalIsOpen,r=e.type,o=this.state.loading;return Object(a.jsx)(vO,{isOpen:n,children:Object(a.jsx)(PO,{onClose:t,footer:this.renderFooter(),body:this.renderBody(),loading:o,title:"Assign To ".concat("space"===r?"Location":"Pallet"),scrollY:!0})})}}]),n}(p.Component)),gCe=Object(LO.compose)(Object(b.b)((function(e){return{selectedItems:e.warehousing.selectedPlacements}})))(OCe);function xCe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return xCe=function(){return e},e}function yCe(){var e=Object(f.a)(["\n  &:not(:last-child){\n    margin-right: 1rem;\n  }\n  cursor: pointer;\n"]);return yCe=function(){return e},e}function wCe(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n"]);return wCe=function(){return e},e}function _Ce(){var e=Object(f.a)(["\n  position: sticky;\n  width: 100%;\n  z-index: 1;\n  top: 0px;\n"]);return _Ce=function(){return e},e}function kCe(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return kCe=function(){return e},e}function SCe(){var e=Object(f.a)(["\n  font-size: 14px;\n  color: #95989a;\n  margin-bottom: 7px;\n"]);return SCe=function(){return e},e}function CCe(){var e=Object(f.a)(["\n  max-width: 320px;\n  min-width: 100px;\n  margin-right: 30px;\n  width: 30%;\n  &:last-child {\n    margin-right: 0px;\n  }\n"]);return CCe=function(){return e},e}function NCe(){var e=Object(f.a)(["\n  display: flex;\n  padding: 0 0px 30px 0;\n  margin-top: -20px;\n"]);return NCe=function(){return e},e}function ECe(){var e=Object(f.a)(["\n  color: "," !important;\n  cursor: pointer;\n  text-decoration: none;\n  font-size: 12px;\n  font-weight: 400;\n"]);return ECe=function(){return e},e}function ACe(){var e=Object(f.a)(["\n  border-radius: 5px;\n  margin: 0 10px;\n  max-height: 50px;\n  max-width: 100px;\n"]);return ACe=function(){return e},e}function TCe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-right: 30px;\n"]);return TCe=function(){return e},e}function ICe(){var e=Object(f.a)(["\n  width: 100%;\n"]);return ICe=function(){return e},e}function RCe(){var e=Object(f.a)(["\n  margin-bottom: 50px;\n  "," {\n    font-weight: ",";\n    color: black !important;\n  }\n  ",", "," {\n    "," {\n      // width: 40%;\n    }\n    "," {\n      .more-menu {\n        float: right;\n      }\n    }\n  }\n"]);return RCe=function(){return e},e}function DCe(){var e=Object(f.a)(["\n  label{margin: 0 .5rem 0 0;}\n"]);return DCe=function(){return e},e}function MCe(){var e=Object(f.a)(["\n  font-size: 18px;\n  margin: 0px 0 30px 0px;\n  font-weight: bold;\n"]);return MCe=function(){return e},e}function PCe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return PCe=function(){return e},e}function LCe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return LCe=function(){return e},e}function FCe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  border-color: #42a6e6;\n  box-shadow: 0 0 0 !important;\n\n  padding: 5px 12px;\n  color: #3498db;\n  cursor: pointer;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  margin: 0 10px;\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]);return FCe=function(){return e},e}function UCe(){var e=Object(f.a)(["\n  // background-color: #3498db;\n  // padding: 3px 12px 8px 12px;\n  // border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return UCe=function(){return e},e}function VCe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return VCe=function(){return e},e}function BCe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return BCe=function(){return e},e}function JCe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return JCe=function(){return e},e}var zCe=x.default.div(JCe()),qCe=x.default.div(BCe()),WCe=x.default.div(VCe()),HCe=Object(x.default)(yw)(UCe()),GCe=(x.default.button(FCe()),Object(x.default)(FS)(LCe()),x.default.div(PCe())),YCe=(x.default.div(MCe()),Object(x.default)(FL)(DCe())),QCe=Object(x.default)(lF)(RCe(),PL,Bf.bold,UL,VL,YCe,FL),KCe=(x.default.div(ICe()),x.default.div(TCe()),x.default.img(ACe()),x.default.a(ECe(),y.blue1),x.default.div(NCe()),x.default.div(CCe()),x.default.div(SCe()),x.default.input(kCe()),x.default.div(_Ce())),ZCe=x.default.div(wCe(),y.menu,y.white1),XCe=x.default.div(yCe()),$Ce=x.default.div(xCe(),y.black0),eNe=[{value:"In-Progress",label:"In-Progress"},{value:"Restorable",label:"Restorable"},{value:"Non-Restorable",label:"Non-Restorable"},{value:"Awaiting Disposal Authority",label:"Awaiting Disposal Authority"},{value:"Ready For Return",label:"Ready For Return"},{value:"Ready To Dispose",label:"Ready To Dispose"},{value:"Disposed",label:"Disposed"},{value:"Client Picked Up",label:"Client Picked Up"}],tNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).clipboardRef=void 0,r.state={loading:!0,inventory:{},expanded:!1,selectedStatus:{value:"",label:"All"},selectedLocation:{value:"",label:"All"},selectedDate:{value:"",label:"All"},selectedItem:"",showReportModal:!1,linkReport:"",spaces:[],showCompleted:"new"!==r.props.match.params.type,jobContacts:[]},r.eventListeners=[uy.listen(Kg.WarehousingInventoryItemAdded,(function(){return r.makeVisiableData()})),uy.listen(Kg.WarehousingInventoryItemUpdated,(function(){return r.makeVisiableData()}))],r.makeVisiableData=function(){var e=Number(r.props.match.params.inventory_id);r.setState({loading:!0}),r.getData(e).then((function(e){var t=e[1];r.setState({loading:!1,inventory:e[0].data,inventoryItems:t,spaces:e[2].data,jobContacts:e[3]})}))},r.getData=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n,a,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[d2.getInventoryInfo(t),r.loadItems(t),d2.getSpaces()],e.next=3,Promise.all(n);case 3:return a=e.sent,e.next=6,ly.getContacts(a[0].data.job.id);case 6:return o=e.sent,e.abrupt("return",[].concat(Object(Dm.a)(a),[o]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handlePagination=function(e){return r.loadItems(void 0,e)},r.loadItems=function(){var e=Object(Um.a)(Fm.a.mark((function e(t,n){var a,o,i;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({loading:!0}),t=t||r.state.inventory.id,a={page:n,per_page:30,placement:r.state.showCompleted?"all":"without-placement"},o=r.props.match.params.type,e.t0=o,e.next="processed"===e.t0?7:"completed"===e.t0?9:11;break;case 7:return a.statuses=[H3.READY_FOR_RETURN,H3.READY_TO_DISPOSE],e.abrupt("break",11);case 9:return a.statuses=[H3.RETURNED,H3.DISPOSED,H3.CLIENT_PICKED_UP],e.abrupt("break",11);case 11:return e.next=13,d2.getInventoryItems(t,a);case 13:return i=e.sent,r.setState({loading:!1,inventoryItems:i}),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.toggleSelection=function(e){return function(){var t=r.state.inventoryItems;null===t||void 0===t||t.data.forEach((function(t){t.id===e.id&&(t.selected=!t.selected)})),r.setState({inventoryItems:Object(c.a)({},t)})}},r.goToEdit=function(e){return function(){var t=Number(r.props.match.params.inventory_id),n=r.props.match.params.type;r.props.history.push("/operations/warehousing/inventories/".concat(n,"/").concat(t,"/item/").concat(e,"/details"))}},r.getMoreMenuItems=function(e){return[{name:"Edit",onClick:r.goToEdit(e.id)},{name:"Delete",onClick:r.removeInventoryItem(e)}]},r.removeInventoryItem=function(e){return Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.props.dispatch,t.next=3,n(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Are you sure you want to delete inventory item ",Object(a.jsxs)("strong",{children:["#",e.id," ",e.name]})," from the list?"]}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:t.sent&&d2.removeInventoryItem(e.id).then((function(){r.makeVisiableData()}));case 5:case"end":return t.stop()}}),t)})))},r.removeSelectedInventoryItem=Object(Um.a)(Fm.a.mark((function e(){var t,n,o;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.dispatch,e.next=3,t(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete selected inventory items from the list?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:e.sent&&(n=r.state.inventoryItems,o=[],null===n||void 0===n||n.data.forEach((function(e){if(e.selected){var t=e.id;o.push(d2.removeInventoryItem(t))}})),Promise.all(o).then((function(){r.makeVisiableData()})));case 5:case"end":return e.stop()}}),e)}))),r.renderTrigger=function(){return Object(a.jsx)(Ff,{name:Ef.MenuVertical,size:20})},r.getTopHeaderMenuItems=function(){var e=r.state.showCompleted;r.props.match.params.type;return[].concat([{name:"".concat(e?"Hide":"Show"," complete inventory"),key:"completed",onClick:function(){r.setState({showCompleted:!e},r.makeVisiableData)}}]).filter(Boolean)},r.reportLink=function(){var e=Number(r.props.match.params.inventory_id),t=r.props.match.params.type;r.setState({loading:!0}),d2.getReportLink(e).then((function(n){r.setState({showReportModal:!0,loading:!1,linkReport:"".concat(Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://apistg.steamatic.com.au",REACT_APP_HELPSCOUT_BEACON_ID:"70d78cd7-3591-42af-9dc2-cfaac0d4c64e",REACT_APP_PASSWORD_CLIENT_ID:"1",REACT_APP_PASSWORD_CLIENT_SECRET:"fu0vbRuqPXaywXqMEvdcb61SDN1Bqy5QAMOsRzwb",REACT_APP_PUSHER_CLUSTER:"ap4",REACT_APP_PUSHER_KEY:"fb067bbe30a915d30682"}).REACT_APP_URL,"/operations/warehousing/inventories/").concat(t,"/").concat(e,"/").concat(n.data.code,"/report")},(function(){var e=r.clipboardRef.current;e&&e.click()}))}))},r.markStatus=function(e){return function(){var t=r.state.inventoryItems;if(0!==r.getSelecetedCount()){var n=[];null===t||void 0===t||t.data.forEach((function(t){if(t.selected){var r=t.current_status;n.push(d2.markInventoryItemStatus(r.inventory_item_id,r.user_id,e))}})),r.setState({loading:!0}),Promise.all(n).then((function(){r.makeVisiableData()})).finally((function(){}))}}},r.getSelecetedCount=function(){var e=r.state.inventoryItems;if(null===e||void 0===e?void 0:e.data.length){var t=0;return e.data.forEach((function(e){e.selected&&t++})),t}return 0},r.getSelectedItems=function(){var e=r.state.inventoryItems;if(null===e||void 0===e?void 0:e.data.length){var t=[];return e.data.forEach((function(e){e.selected&&t.push(e)})),t}return[]},r.toogleBar=function(){r.setState({expanded:!r.state.expanded})},r.setFilter=function(e){return function(t){"status"===e&&r.setState({selectedStatus:t}),"location"===e&&r.setState({selectedLocation:t}),"date"===e&&r.setState({selectedDate:t}),"item"===e&&r.setState({selectedItem:t.target.value})}},r.showModal=function(e,t){return function(){r.setState({modal:e,modalData:t})}},r.hideModal=function(){r.setState({modal:void 0})},r.renderModal=function(){var e=r.state,t=e.modal,n=e.modalData;switch(t){case"assign":return Object(a.jsx)(gCe,Object(c.a)({closeModal:r.hideModal,modalIsOpen:!0,selectedInventoryItems:r.getSelectedItems()},n));case"scan":return Object(a.jsx)(pCe,Object(c.a)({onClose:r.hideModal,isOpen:!0,selectedInventoryItems:r.getSelectedItems()},n));case"report":return Object(a.jsx)(sCe,{closeModal:function(){return r.setState({showReportModal:!1})},modalIsOpen:!0,link:r.state.linkReport});case"new_item":return Object(a.jsx)(P8,{isOpen:!0,title:"Add Inventory Item",body:Object(a.jsx)(dCe,Object(c.a)(Object(c.a)({},n),{},{afterSubmit:r.hideModal})),id:lCe,onClose:r.hideModal})}return null},r.renderToolbar=function(){return Object(a.jsxs)(KCe,{className:"d-flex justify-content-center mb-3",children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"bottom",id:"toolbar_item_tooltip"}),Object(a.jsxs)(ZCe,{className:"px-3 py-2 d-flex align-items0center",children:[Object(a.jsx)(XCe,{"data-tip":"Scan QR code","data-for":"toolbar_item_tooltip",onClick:r.showModal("scan"),children:Object(a.jsx)(J3,{color:y.white,fill:!0,name:Ef.QRCode,size:16})}),Object(a.jsx)("div",{className:"mr-3",children:"OR"}),Object(a.jsx)(XCe,{"data-tip":"Change status","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(HCe,{items:eNe.map((function(e){return{key:e.value,name:"".concat(e.label),onClick:r.markStatus(e.label)}})),noMargin:!0,direction:"right",trigger:function(){return Object(a.jsx)(J3,{color:y.white,name:Ef.Flag,size:16})}})}),Object(a.jsx)(XCe,{"data-tip":"Assign to location","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(J3,{color:y.white,name:Ef.PinMap,size:16,onClick:r.showModal("assign",{type:"space"})})}),Object(a.jsx)(XCe,{"data-tip":"Assign to pallet","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(J3,{color:y.white,name:Ef.ShipmentUpload,size:16,onClick:r.showModal("assign",{type:"container"})})}),Object(a.jsx)(XCe,{"data-tip":"Delete","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(J3,{color:y.white,fill:!0,name:Ef.Delete,size:16,onClick:r.removeSelectedInventoryItem})})]})]})},r.clipboardRef=h.a.createRef(),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.makeVisiableData(),um.status("Warehousing - Inventory Items")}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=e.match.params,o=a.type,i=a.inventory_id;n===o&&r===i||this.makeVisiableData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),um.reset()}},{key:"renderItems",value:function(){var e,t=this.state.inventoryItems;if(!(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.length))return null;var n=[];return n.push(Object(a.jsxs)(QCe,{className:"table m-0",children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"\xa0"}),Object(a.jsx)(PL,{children:"Item No."}),Object(a.jsx)(PL,{children:"Description"}),Object(a.jsx)(PL,{children:"Qty."}),Object(a.jsx)(PL,{children:"Storage Location"}),Object(a.jsx)(PL,{children:"Status"}),Object(a.jsx)(PL,{children:"QR Code"}),Object(a.jsx)(PL,{children:"\xa0"})]})}),Object(a.jsx)(LL,{children:this.renderItemRows(t.data)})]})),n}},{key:"renderItemRows",value:function(e){var t=this,n=Number(this.props.match.params.inventory_id),r=this.props.match.params.type;return e.map((function(e){var o=t.state,i=o.selectedStatus,c=o.selectedItem,s=o.selectedLocation,l=""===i.value||e.current_status.status===i.value,u=""===s.value||e.placement&&e.placement.space.id===s.value;return-1!==e.name.toLowerCase().indexOf(c.toLowerCase())&&l&&u?Object(a.jsxs)(VL,{to:{pathname:"/operations/warehousing/inventories/".concat(r,"/").concat(n,"/item/").concat(e.id,"/details"),state:{inventoryId:n}},children:[Object(a.jsx)(YCe,{children:Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("div",{className:"p-2",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:Object(a.jsx)(PJ,{value:e.selected,onClick:function(e){e.stopPropagation()},onChange:t.toggleSelection(e),size:15,inversedColors:!1,direction:wJ.horizontal})})})}),Object(a.jsx)(FL,{children:e.id}),Object(a.jsx)(FL,{children:e.name}),Object(a.jsx)(FL,{children:e.quantity}),Object(a.jsx)(FL,{children:"Not set"===e.current_location?"":e.current_location}),Object(a.jsx)(FL,{children:e.current_status.status||"Undefined"}),Object(a.jsx)(FL,{children:Object(a.jsx)(uwe,{value:btoa(JSON.stringify({t:V3.inventory_item,id:e.id})),size:30,zoom:150,level:"Q"})}),Object(a.jsx)(FL,{children:Object(a.jsx)(yw,{items:t.getMoreMenuItems(e),noMargin:!0,direction:"right",iconName:Ef.MenuVertical,className:"more-menu"})})]},e.id):null}))}},{key:"renderNoItems",value:function(){return Object(a.jsx)(UL,{children:Object(a.jsx)("div",{className:"no-items",children:"No Items..."})})}},{key:"getLocationOptions",value:function(){var e=this.state.spaces,t=[{value:"",label:"All"}];return e.forEach((function(e){t.push({value:e.id,label:e.name+" ("+e.location.code+")"})})),t}},{key:"getDateOptions",value:function(){var e=this.state.inventoryItems,t=[{value:"",label:"All"}];for(var n in e.data)t.push({value:n,label:n});return t}},{key:"render",value:function(){var e=this,t=this.state,n=t.inventory,r=t.inventoryItems,o=t.loading,i=(t.expanded,t.selectedLocation,t.selectedStatus,t.selectedDate,t.showReportModal,t.linkReport),c=(t.spaces,t.jobContacts),s=this.getSelectedItems(),l=this.props.match.params,u=(l.type,l.inventory_id),d=Number(u),p=n?n.address:"",h=n?n.job_number:"",b=this.getTopHeaderMenuItems();return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cw.Consumer,{children:function(t){var l,u,f;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch pt-2 print-hide",children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"bottom",id:"page_tooltip"}),Object(a.jsxs)(zCe,{className:"d-flex flex-row justify-content-between",children:[Object(a.jsxs)(WCe,{children:[d&&Object(a.jsx)(qCe,{children:"Inventory #".concat(d||"")}),!o&&Object(a.jsx)(GCe,{children:"".concat(p||"Unknown"," | ").concat(h)})]}),Object(a.jsxs)(WCe,{children:[Object(a.jsx)("span",{className:"mr-3 cursor-pointer","data-tip":"Add new inventory item","data-for":"page_tooltip",onClick:e.showModal("new_item",{initialValues:{inventory:n,job:n.job,customer_location:null===(l=c.find((function(e){return e.assignment_type.name===Tj.CUSTOMER})))||void 0===l||null===(u=l.addresses)||void 0===u||null===(f=u[0])||void 0===f?void 0:f.full_address}}),children:Object(a.jsx)(J3,{name:Ef.Add,size:16,color:y.black1})}),b.length>0&&Object(a.jsx)(HCe,{items:b,noMargin:!0,direction:"right",trigger:e.renderTrigger})]})]}),Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[s.length>0&&e.renderToolbar(),o&&Object(a.jsx)(av,{size:40,color:y.white}),(null===r||void 0===r?void 0:r.data.length)?e.renderItems():!o&&e.renderNoItems(),(null===r||void 0===r?void 0:r.data.length)>0&&Object(a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(a.jsx)(AS,{pagination:r.pagination,onChange:e.handlePagination})}),Object(a.jsx)(nCe.CopyToClipboard,{text:i,children:Object(a.jsx)("input",{type:"hidden",ref:e.clipboardRef})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)($Ce,{className:"d-flex flex-wrap",children:null===r||void 0===r?void 0:r.data.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:e.name}),Object(a.jsx)("br",{}),Object(a.jsxs)("span",{children:["#",n.job_number]})]}),Object(a.jsx)(lwe.a,{value:btoa(JSON.stringify({t:V3.inventory_item,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:m.padStart(e.id+"",10,"0")})]})}))})})]})}})]})}}]),n}(h.a.PureComponent),nNe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),v.g)(tNe);function rNe(){var e=Object(f.a)(["\n  margin: 0 5px;\n  font-size: ",";\n"]);return rNe=function(){return e},e}function aNe(){var e=Object(f.a)(["\n  height: 20px;\n  min-width: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: 100px;\n  background: ",";\n  z-index: 5;\n  color: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  * {\n    stroke-width: 2.5px !important;\n  }\n"]);return aNe=function(){return e},e}function oNe(){var e=Object(f.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n\n  > * {\n    margin-left: 5px;\n  }\n"]);return oNe=function(){return e},e}function iNe(){var e=Object(f.a)(["\n  padding: 10px;\n  border: 0;\n  width: 100%;\n  font-weight: ",";\n  font-size: ",";\n  outline: none;\n  background: ",";\n  color: ",";\n"]);return iNe=function(){return e},e}function cNe(){var e=Object(f.a)(["\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: ",";\n  background-image: url(",");\n  width: 100%;\n  height: 150px;\n"]);return cNe=function(){return e},e}function sNe(){var e=Object(f.a)(["\n  width: 230px;\n  margin: 0 20px 20px 0;\n  overflow: hidden;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 0 0 0 1px ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n\n    & .tools {\n      visibility: visible !important;\n    }\n  }\n"]);return sNe=function(){return e},e}var lNe=x.default.div(sNe(),y.gray2,y.blue0),uNe=x.default.div(cNe(),y.gray0,(function(e){return e.backgroundImage||"***"})),dNe=Object(x.default)(Kj(["selected"])("input"))(iNe(),Bf.medium,Vf.smaller,(function(e){return e.selected?y.blue0:"transparent"}),(function(e){return e.selected?y.black1:y.gray5})),pNe=x.default.div(oNe()),hNe=Object(x.default)(Kj(["br","color"])("div"))(aNe(),(function(e){return e.bg}),(function(e){return e.color?e.color:y.white}),(function(e){return e.color?e.color:y.white})),bNe=x.default.span(rNe(),Vf.smaller),fNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={description:e.props.photo.description,thumbnailUrl:"",loading:!1,url:e.props.photo.photo.url},e.counter=0,e.startUpdate=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onDescriptionChangeInternal=function(t){e.setState({description:t.target.value}),e.debouncedDescriptionChange(t.target.value)},e.debouncedDescriptionChange=Object(m.debounce)((function(t){var n=e.props,r=n.onDescriptionChange,a=n.photo.photo.id;e.setState({loading:!0}),r(t,a).finally((function(){e.setState({loading:!1})}))}),1500),e.uploadPhoto=function(t){var n=e.props,r=n.photo.photo.id,a=n.onPhotoUpdate,o=new FormData;o.append("file",t),a(o,r).finally((function(){e.setState({loading:!1})}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhoto(t.target.files[0]))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.photo.photo.thumbnails;(null===e||void 0===e?void 0:e.length)?this.setState({thumbnailUrl:e[0].url,url:e[0].url}):e&&e[0]&&e[0].url||this.startUpdate()}},{key:"render",value:function(){var e=this.props,t=e.photo.photo,n=(t.thumbnails,t.id),r=e.onExpand,o=e.photo,i=e.selected,c=e.noUpdate,s=e.setSelectedPhotos,l=e.onlyView,u=this.state,d=u.description,p=u.loading,h=u.thumbnailUrl,b=u.url;return Object(a.jsxs)(lNe,{children:[Object(a.jsxs)(pNe,{className:"tools",children:[Object(a.jsx)(hNe,{bg:y.gray1,color:y.black0,onClick:function(){return r(n)},children:Object(a.jsx)(Ff,{name:Ef.Expand,size:10})}),!c&&!l&&Object(a.jsx)(hNe,{bg:y.blue5,color:y.white,onClick:this.onUploadLinkClick,children:Object(a.jsx)(bNe,{children:"Update"})})]}),Object(a.jsx)(uNe,{backgroundImage:""!==b||void 0!==b?"".concat(b):h,onClick:c?void 0:function(){return s(o)}}),Object(a.jsx)(dNe,{type:"text",onChange:this.onDescriptionChangeInternal,value:d,selected:i,disabled:c,placeholder:c?"Editing is disabled":"Enter a short description..."}),p&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("input",{type:"file",accept:WNe,hidden:!0,disabled:c,onChange:this.onFileInputChange,ref:this.inputRef})]})}}]),n}(p.PureComponent),mNe=Object(b.b)()(fNe);function jNe(){var e=Object(f.a)(["\n  transform: rotate(","deg);\n  cursor: pointer;\n  path,\n  circle,\n  line,\n  polyline,\n  polygon,\n  rect {\n    stroke: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle,\n  :hover polygon,\n  :hover rect,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return jNe=function(){return e},e}function vNe(){var e=Object(f.a)(["\n  height: 50px;\n  padding: 20px;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  bottom: 20px;\n  position: absolute;\n  overflow: hidden;\n"]);return vNe=function(){return e},e}function ONe(){var e=Object(f.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: 0;\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n"]);return ONe=function(){return e},e}function gNe(){var e=Object(f.a)(["\n  position: relative;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: ","px;\n  height: ","px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return gNe=function(){return e},e}function xNe(){var e=Object(f.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n"]);return xNe=function(){return e},e}function yNe(){var e=Object(f.a)(["\n  display: flex;\n  min-height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 20px 0 90px 0;\n"]);return yNe=function(){return e},e}function wNe(){var e=Object(f.a)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n"]);return wNe=function(){return e},e}function _Ne(){var e=Object(f.a)(["\n  color: ",";\n"]);return _Ne=function(){return e},e}function kNe(){var e=Object(f.a)(["\n  position: relative;\n  top: 0px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: ","px;\n  padding: 0 30px;\n  background: ",";\n  text-align: right;\n  z-index: 100;\n  border-bottom: 1px solid ",";\n"]);return kNe=function(){return e},e}function SNe(){var e=Object(f.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n"]);return SNe=function(){return e},e}var CNe=x.default.div(SNe()),NNe=x.default.div(kNe(),xO,y.white,y.gray2),ENe=x.default.div(_Ne(),y.gray5),ANe=x.default.div(wNe()),TNe=x.default.div(yNe()),INe=x.default.div(xNe()),RNe=x.default.div(gNe(),(function(e){return e.width?e.width:0}),(function(e){return e.height?e.height:0})),DNe=x.default.div(ONe()),MNe=x.default.div(vNe(),y.menu,y.white),PNe=Object(x.default)(Kj(["color","rotate"])(Ff))(jNe(),(function(e){return e.rotate}),(function(e){return e.color?e.color:y.black1}),y.blue4),LNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCurrentPhotoIndex=function(){var t=e.props,n=t.photos,r=t.currentPhotoId,a=n.map((function(e){return e.photo.id})).indexOf(r);return a>-1?a:0},e.state={currentIndex:e.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1},e.zoomDelta=.2,e.setZoom=function(t){"+"===t&&e.setState({zoom:e.state.zoom+e.zoomDelta}),"-"===t&&e.state.zoom>1.1*e.zoomDelta&&e.setState({zoom:e.state.zoom-e.zoomDelta})},e.setPhoto=function(t){var n=e.props.photos;"+"===t&&e.state.currentIndex<n.length-1&&e.setState({currentIndex:e.state.currentIndex+1}),"-"===t&&e.state.currentIndex>0&&e.setState({currentIndex:e.state.currentIndex-1})},e.rotateImage=function(){e.setState({rotateDegrees:e.state.rotateDegrees+1})},e.downloadPhoto=function(){var t=e.props,n=t.inventoryItem,r=t.photos[e.state.currentIndex],a=r.photo,o=r.description,i=r.updated_at;e.setState({bottomToolsLoading:!0}),VV.downloadPhoto(a.id,"".concat(n.id,"_").concat(o?o.split(" ").join("_"):"","_").concat(qf()(i).format("YYYYMMDD"),".").concat(a.mime_type.split("/")[1])).then((function(){e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.printPhoto=function(){var t=e.props.photos[e.state.currentIndex].photo;e.setState({bottomToolsLoading:!0}),VV.getPhotoData(t.id).then((function(t){JV()({printable:window.URL.createObjectURL(t),type:"image"}),e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.deletePhoto=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.inventoryItem,o=n.photos,i=n.updateParentPhotos,c=n.dispatch,s=o[e.state.currentIndex].photo,t.next=4,c(Sw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete the image from this item?"}),Object(a.jsx)("p",{children:"This action cannot be undone."})]})));case 4:if(!t.sent){t.next=18;break}return e.setState({bottomToolsLoading:!0}),t.prev=7,t.next=10,d2.detachPhoto(r.id,s.id);case 10:return t.next=12,i();case 12:e.setState({bottomToolsLoading:!1}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.setState({bottomToolsLoading:!1});case 18:case"end":return t.stop()}}),t,null,[[7,15]])}))),e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.currentPhotoId,a=n.photos,o=n.onClose;r===e.currentPhotoId&&a.length===e.photos.length||this.setState({currentIndex:this.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),this.state.currentIndex!==t.currentIndex&&this.setState({zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),a.length<1&&o()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,o=t.customModal,i=t.inventoryItem,c=t.photos,s=t.noUpdate,l=t.onlyView,u=this.state,d=u.currentIndex,p=u.zoom,h=u.rotateDegrees,b=u.bottomToolsLoading,f=c[d]||{},m=f.photo,j=f.description,v=f.created_at,O=f.updated_at,g=f.creator,x=f.modified_by;return Object(a.jsx)(vO,{isOpen:n,children:Object(a.jsx)(PO,{onClose:r,customModal:o,children:Object(a.jsx)(CNe,{children:m&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsxs)(NNe,{className:"align-items-center",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(PNe,{name:Ef.Chevron,size:20,rotate:45,color:y.black1,onClick:r}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:j})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:i.name}),Object(a.jsx)(ENe,{children:v===O?"Created ".concat(qf()(v).format(Uj)," by ").concat(Yf(g).name):"Modified ".concat(qf()(O).format(Uj)," ").concat(x?"by "+Yf(x).name:"")})]})]})}),Object(a.jsx)(ANe,{children:Object(a.jsxs)(TNe,{children:[Object(a.jsx)(INe,{onClick:r}),Object(a.jsxs)(RNe,{width:h%2>0?m.height*p:m.width*p,className:"d-flex align-items-center justify-content-center",height:h%2>0?m.width*p:m.height*p,children:[Object(a.jsx)("div",{style:{width:"".concat(h%2>0?m.height*p:m.width*p,"px"),height:"".concat(h%2>0?m.width*p:m.height*p,"px")}}),Object(a.jsx)(RNe,{width:m.width*p,height:m.height*p,style:{transform:"rotateZ(".concat(-90*h,"deg)"),position:"absolute"},children:Object(a.jsx)("img",{src:m.url},m.id)},m.id)]},m.id)]})}),Object(a.jsx)(DNe,{children:Object(a.jsxs)(MNe,{children:[b&&Object(a.jsx)(av,{size:40,color:y.menu}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(PNe,{name:Ef.Chevron,size:20,rotate:45,color:y.white,onClick:function(){return e.setPhoto("-")}}),Object(a.jsxs)("div",{style:{margin:"0 10px"},children:[d+1," of ",c.length]}),Object(a.jsx)(PNe,{name:Ef.Chevron,size:20,rotate:-135,color:y.white,onClick:function(){return e.setPhoto("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center",style:{margin:"0 50px"},children:[Object(a.jsx)(PNe,{name:Ef.SubtractCircle,size:20,rotate:0,color:y.white,onClick:function(){return e.setZoom("-")}}),Object(a.jsxs)("div",{style:{margin:"0 15px"},children:[(100*p).toFixed(0),"%"]}),Object(a.jsx)(PNe,{name:Ef.AddCircle,size:20,rotate:0,color:y.white,onClick:function(){return e.setZoom("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{width:"150px"},children:[Object(a.jsx)(PNe,{name:Ef.Rotate,size:20,rotate:0,color:y.white,onClick:this.rotateImage}),Object(a.jsx)(PNe,{name:Ef.Download,size:20,rotate:0,color:y.white,onClick:this.downloadPhoto}),Object(a.jsx)(PNe,{name:Ef.Printer,size:20,rotate:0,color:y.white,onClick:this.printPhoto}),!s&&!l&&Object(a.jsx)(PNe,{name:Ef.Trash,size:20,rotate:0,color:y.white,onClick:this.deletePhoto})]})]})})]})})})})}}]),n}(p.PureComponent),FNe=Object(b.b)()(LNe);function UNe(){var e=Object(f.a)(["\n  position: absolute;\n  top: 20px;\n  right: 30px;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n\n  :hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return UNe=function(){return e},e}function VNe(){var e=Object(f.a)(["\n  color: transparent;\n  filter: grayscale(1);\n"]);return VNe=function(){return e},e}function BNe(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return BNe=function(){return e},e}function JNe(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return JNe=function(){return e},e}function zNe(){var e=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 10px 0 40px 0;\n"]);return zNe=function(){return e},e}function qNe(){var e=Object(f.a)(["\n  padding: 0px 30px 30px 30px;\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return qNe=function(){return e},e}var WNe="image/jpeg,image/png",HNe=x.default.div(qNe()),GNe=x.default.div(zNe()),YNe=BS.SortedGroupTitle,QNe=x.default.div(JNe(),Bf.bold),KNe=x.default.span(BNe(),y.blue4,y.blue5),ZNe=x.default.div(VNe()),XNe=x.default.div(UNe(),y.blue4,Vf.smaller,y.blue5),$Ne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,filmstrip:!1,currentPhotoId:void 0,blockLoading:!1},e.handleDrop=function(t){t.preventDefault(),t.dataTransfer.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files))},e.uploadPhotos=function(t){var n,r=[],o=["png","jpeg","jpg"],i=Object(pV.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value,s=(c.name.split(".").pop()||"").toLowerCase();if(o.includes(s)){var l=new FormData;l.append("file",c),r.push(VV.uploadPhoto(l).then((function(t){return d2.attachPhoto(e.props.inventoryItem.id,t.data.id,{description:""})})))}else Qm(Vm.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",s]})," is not supported!"]}))}}catch(u){i.e(u)}finally{i.f()}0===r.length?e.setState({loading:!1}):Promise.all(r).then((function(){setTimeout((function(){e.props.loadPhotos(),e.setState({loading:!1})}),500)})).catch((function(){e.setState({loading:!1})}))},e.onDragOver=function(e){e.preventDefault()},e.changeDescription=function(t,n){var r=e.props.inventoryItem;return d2.updateAttachedPhoto(r.id,n,{description:t})},e.onPhotoUpdate=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",VV.updatePhoto(r,n).then((function(){return e.props.loadPhotos()})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.openFilmstrip=function(t){e.setState({currentPhotoId:t,filmstrip:!0})},e.closeFilmstrip=function(){e.setState({filmstrip:!1})},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.target.files))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.photos,r=t.selectedPhotos,o=t.inventoryItem,i=t.onlyView,c=this.state,s=c.loading,l=c.blockLoading,u=c.filmstrip,d=c.currentPhotoId,p=this.groupedPhotos;return Object(a.jsxs)(HNe,{onDragOver:this.onDragOver,onDrop:this.handleDrop,children:[n&&Object(a.jsxs)(a.Fragment,{children:[p.length>0?Object(a.jsxs)(a.Fragment,{children:[!i&&Object(a.jsx)(XNe,{onClick:this.onUploadLinkClick,children:"Add photos"}),p.map((function(t,n){return Object(a.jsxs)("div",{style:{width:"100%"},children:[!i&&Object(a.jsx)(YNe,{children:qf()(1e3*t.unix).format("ddd, D MMM YYYY")}),Object(a.jsx)(GNe,{children:t.items.map((function(t){return Object(a.jsx)(mNe,{photo:t,selected:!!r.find((function(e){return e.id===t.photo.id})),noUpdate:!1,onExpand:e.openFilmstrip,onDescriptionChange:e.changeDescription,onPhotoUpdate:e.onPhotoUpdate,setSelectedPhotos:e.props.setSelectedPhotos,onlyView:!0},t.photo.id)}))})]},n)}))]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ZNe,{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(Ff,{name:Ef.Barista,size:200})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(QNe,{children:"No photos have been uploaded"})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:["Drag and drop to add photos or ",Object(a.jsx)(KNe,{onClick:this.onUploadLinkClick,children:"click here"})," to ",Object(a.jsx)("br",{})," ","upload the old fashioned way."]})})]}),d&&Object(a.jsx)(FNe,{isOpen:u,inventoryItem:o,customModal:!0,noUpdate:!1,photos:this.sortedPhotos,currentPhotoId:d,updateParentPhotos:this.props.loadPhotos,onClose:this.closeFilmstrip,onlyView:i})]}),s&&!l&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("input",{type:"file",id:"file-input",accept:WNe,multiple:!0,hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef})]})}},{key:"groupedPhotos",get:function(){var e=this.props.photos;return(null===e||void 0===e?void 0:e.length)?Qf(e,"photo.created_at"):[]}},{key:"sortedPhotos",get:function(){var e=this.props.photos;return e?e.sort((function(e,t){return qf()(e.created_at)>qf()(t.created_at)?-1:1})):[]}}]),n}(p.PureComponent);function eEe(){var e=Object(f.a)(["\n  background-color: #f5aa00;\n  border-radius: 3px;\n  padding: 2px 10px;\n  color: white;\n  margin-right: 10px;\n  font-size: 16px;\n"]);return eEe=function(){return e},e}function tEe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return tEe=function(){return e},e}function nEe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return nEe=function(){return e},e}function rEe(){var e=Object(f.a)(["\n  background-color: #3498db;\n  padding: 3px 12px 8px 12px;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return rEe=function(){return e},e}function aEe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return aEe=function(){return e},e}function oEe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  border-color: #42a6e6;\n  box-shadow: 0 0 0 !important;\n\n  padding: 5px 12px;\n  color: #3498db;\n  cursor: pointer;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  margin: 0 10px;\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]);return oEe=function(){return e},e}function iEe(){var e=Object(f.a)(["\n  width: 48%;\n  &.des-container {\n    width: 68%;\n  }\n  &.quality-container {\n    width: 28%;\n  }\n  &.location-container {\n    width: 100%;\n  }\n  margin-bottom: 30px;\n"]);return iEe=function(){return e},e}function cEe(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return cEe=function(){return e},e}function sEe(){var e=Object(f.a)(["\n  font-size: 14px;\n  color: #95989a;\n  margin-bottom: 7px;\n"]);return sEe=function(){return e},e}function lEe(){var e=Object(f.a)(["\n  font-size: 20px;\n  color: #1d1d1d;\n  margin-bottom: 30px;\n"]);return lEe=function(){return e},e}function uEe(){var e=Object(f.a)(["\n  display: flex;\n  width: 30%;\n  margin: 40px;\n  flex-direction: column;\n"]);return uEe=function(){return e},e}function dEe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  &.customer-location {\n    padding-top: 30px;\n    border-top: 1px solid #d3dbde;\n  }\n"]);return dEe=function(){return e},e}function pEe(){var e=Object(f.a)(["\n  display: flex;\n  width: 60%;\n  margin: 40px;\n  flex-direction: column;\n"]);return pEe=function(){return e},e}function hEe(){var e=Object(f.a)(["\n  margin: 0 40px;\n  border-top: 2px solid #d3dbde;\n  padding-top: 30px;\n"]);return hEe=function(){return e},e}function bEe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-around;\n"]);return bEe=function(){return e},e}function fEe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return fEe=function(){return e},e}function mEe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return mEe=function(){return e},e}var jEe=[{value:"In-Progress",label:"In-Progress"},{value:"Restorable",label:"Restorable"},{value:"Non-Restorable",label:"Non-Restorable"},{value:"Awaiting Disposal Authority",label:"Awaiting Disposal Authority"},{value:"Ready For Return",label:"Ready For Return"},{value:"Ready To Dispose",label:"Ready To Dispose"},{value:"Disposed",label:"Disposed"},{value:"Client Picked Up",label:"Client Picked Up"}],vEe={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{flexBasis:"150px",height:"33.5px",border:"none",fontWeight:"lighter",fontSize:"1rem",borderRadius:"0.25rem",boxShadow:"0 0 0 !important",lineHeight:"1.5rem",paddingTop:0})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{background:"#F7F7F7",color:y.black0})},control:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",boxShadow:"none",background:"#F7F7F7",color:y.black0,minHeight:"auto",maxHeight:"33.5px !important"})},placeholder:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:y.gray2})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:"#A3A3A3",padding:"6px"})}},OEe=(x.default.div(mEe()),x.default.div(fEe()),x.default.div(bEe())),gEe=x.default.div(hEe()),xEe=x.default.div(pEe()),yEe=x.default.div(dEe()),wEe=x.default.div(uEe()),_Ee=x.default.div(lEe()),kEe=x.default.div(sEe()),SEe=x.default.input(cEe()),CEe=x.default.div(iEe()),NEe=(x.default.button(oEe()),x.default.div(aEe()),Object(x.default)(yw)(rEe()),x.default.div(nEe()),Object(x.default)(FS)(tEe())),EEe=(x.default.div(eEe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0,data:{},inventory:{},jobs:[],locations:[],locationEdit:!0,photos:[],selectedPhotos:[],containers:[]},e.eventListeners=[uy.listen(Kg.WarehousingInventoryItemUpdated,(function(){return e.getItem()}))],e.getData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getItem();case 2:return n=t.sent,t.next=5,d2.getInventoryInfo(n.inventory_id);case 5:return r=t.sent,t.next=8,Promise.all([ly.getAllJobs({}),d2.getContainers(),d2.getSpaces(),e.getPhotos(n.id)]);case 8:a=t.sent,e.setState({data:n,inventory:r.data,jobs:a[0].data,containers:a[1].data,locations:a[2].data,photos:a[3],loading:!1});case 10:case"end":return t.stop()}}),t)}))),e.getItem=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(e.props.match.params.item_id),t.next=3,d2.getInventoryItem(n);case 3:return r=t.sent.data,e.setState({data:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),e.getPhotos=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=n||e.state.data.id,t.next=3,d2.getAttachedPhotos(n);case 3:return r=t.sent.data,e.setState({photos:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeInventoryItem=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.dispatch,e.state.inventory,r=e.props.match.params,a=r.type,o=r.inventory_id,i=r.item_id,t.next=5,n(Sw("Confirm","Delete inventory item?"));case 5:if(!t.sent){t.next=12;break}return c=Number(i),d2.removeInventoryItem(c).then((function(){e.props.history.push("/operations/warehousing/inventories/".concat(a,"/").concat(o,"/items"))})),t.abrupt("return",null);case 12:return t.abrupt("return",Promise.reject(!0));case 13:case"end":return t.stop()}}),t)}))),e.markStatus=function(t){return function(){var n=e.state.data,r=n?n.current_status:"";d2.markInventoryItemStatus(r.inventory_item_id,r.user_id,t).then((function(t){var r=Object.assign({},n),a=n&&n.current_status;a=t.data.inventory_item.current_status,r.current_status=a,e.setState({data:r})}))}},e.getItems=function(){var t=[];jEe.forEach((function(n){t.push({name:n.label,onClick:e.markStatus(n.label)})})),t.push({type:"divider"}),t=t.concat([{name:"Delete",onClick:e.removeInventoryItem}]);var n=[{name:"Manually select location",onClick:e.enableLocationEdit},{name:"Upload a photo",onClick:e.fileClick},{name:"Print",onClick:function(){}}];return n.push({type:"divider"}),n.concat(t)},e.fileClick=function(){document.getElementById("file-input").click()},e.enableLocationEdit=function(){e.setState({locationEdit:!0})},e.renderTrigger=function(){return Object(a.jsxs)(NEe,{className:"d-flex align-items-center",margin:"5px 0 0 0",children:[Object(a.jsx)(FS,{color:y.white,margin:"0 5px 0 0",children:"Options"}),Object(a.jsx)(J3,{name:Ef.ArrowDown,color:y.white,size:16})]})},e.updateInfo=function(t){return function(n){var r=e.state,a=r.data,o=r.inventory;if(a){var i=Object.assign({},a);if("job_number"===t)i.job_id=n.value,e.state.jobs.forEach((function(e){n.value===e.id&&(i.job_number="".concat(e.id,"-").concat(e.assigned_location.code))}));else i[t]=n.target.value;e.setState({data:i});var c=i?i.id:"",s=o?o.id:"",l=i?i.job_id:"",u=i?i.identifier:"",d=i?i.name:"",p=i?i.quantity:"",h=i?i.condition:"",b=i?i.serial_number:"",f=i?i.model:"",m=i?i.customer_location:"",j=i?i.assessment_fee:"",v=i?i.estimated_replacement_cost:"",O=i?i.restoration_cost:"",g=i?i.restoration_hours:"",x=i?i.inventory_item_standard_type_id:"";d2.updateInventoryItem(c,{inventory_id:s,job_id:l,identifier:u,name:d,quantity:p,condition:h,serial_number:b,model:f,customer_location:m,assessment_fee:j,estimated_replacement_cost:v,restoration_cost:O,restoration_hours:g,inventory_item_standard_type_id:x})}}},e.setSelectedPhotos=function(t){return function(){var n=e.state.selectedPhotos;n.push(t),e.setState({selectedPhotos:n})}},e.startPlacement=function(t){return function(n){var r=Number(e.props.match.params.item_id),a=e.state.data,o=Object.assign({},a);o.placement||(o.placement={}),o.placement[t]||(o.placement[t]={});var i=o.placement;i[t].id=n.value,o.placement=i,e.setState({data:o}),d2.stopPlacement(r).then((function(){var e,t;d2.startPlacement({inventory_item_id:r,inventory_storage_container_id:null===(e=o.placement.container)||void 0===e?void 0:e.id,inventory_storage_space_id:null===(t=o.placement.space)||void 0===t?void 0:t.id,is_used_on_ar:!0})}))}},e.changeLocation=function(t){var n=e.state.data,r=Object.assign({},n);r.placement.space=t,e.setState({data:r})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=t.item_id,o=e.match.params,i=o.type,c=o.inventory_id,s=o.item_id;n===i&&r===c&&a===s||this.getData()}},{key:"isActive",value:function(e){return!!Object(v.f)(this.props.location.pathname,{path:e})}},{key:"getJobNumberOptions",value:function(){var e=this.state.jobs,t=[];return e.forEach((function(e){t.push({value:e.id,label:"".concat(e.id,"-").concat(e.assigned_location.code)})})),t}},{key:"getLocationOptions",value:function(){var e=this.state.locations,t=[];return e.forEach((function(e){t.push({value:e.id,label:e.name+" ("+e.location.code+")"})})),t}},{key:"getContainerOptions",value:function(){var e=this.state.containers,t=[];return e.forEach((function(e){t.push({value:e.id,label:e.label})})),t}},{key:"render",value:function(){var e,t,n=this,r=this.state,o=r.loading,i=r.data,c=r.inventory,s=r.locations,l=r.locationEdit,u=r.photos,d=r.selectedPhotos,p=r.containers,h=i?i.name:"",b=i?i.quantity:"",f=i?i.job_id:"",m=i?i.customer_location:"",j=i?i.serial_number:"",v=i?i.model:"",O=i?i.current_status:null,g=(O&&O.status,i&&i.id,i?i.name:""),x=(c&&c.address,c&&c.job_number,i?i.job_number:""),w=i?i.placement:"",_=w?null===(e=w.space)||void 0===e?void 0:e.id:"",k="";s.forEach((function(e){e.id===_&&(k=e.name+" ("+e.location.code+")")}));var S={value:_,label:k},C=w?null===(t=w.container)||void 0===t?void 0:t.id:"",N="";p.forEach((function(e){e.id===C&&(N=e.label)}));var E={value:C,label:N},A={value:f,label:x};return Object(a.jsx)(Cw.Consumer,{children:function(e){return Object(a.jsx)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:Object(a.jsx)("div",{className:"d-flex flex-row align-items-stretch",children:Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[o&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)(uC,{className:"h-100",children:[Object(a.jsxs)(OEe,{children:[Object(a.jsxs)(xEe,{children:[Object(a.jsx)(_Ee,{children:"Item"}),Object(a.jsxs)(yEe,{children:[Object(a.jsxs)(CEe,{className:"des-container",children:[Object(a.jsx)(kEe,{children:"Description"}),Object(a.jsx)(SEe,{value:h,onChange:n.updateInfo("name")})]}),Object(a.jsxs)(CEe,{className:"quality-container",children:[Object(a.jsx)(kEe,{children:"Quantity"}),Object(a.jsx)(SEe,{value:b,onChange:n.updateInfo("quantity")})]})]}),Object(a.jsxs)(yEe,{children:[Object(a.jsxs)(CEe,{children:[Object(a.jsx)(kEe,{children:"Serial No."}),Object(a.jsx)(SEe,{value:j,onChange:n.updateInfo("serial_number")})]}),Object(a.jsxs)(CEe,{children:[Object(a.jsx)(kEe,{children:"Model"}),Object(a.jsx)(SEe,{value:v,onChange:n.updateInfo("model")})]})]}),Object(a.jsxs)(yEe,{className:"customer-location",children:[Object(a.jsxs)(CEe,{children:[Object(a.jsx)(kEe,{children:"Customer Location"}),Object(a.jsx)(SEe,{value:m,onChange:n.updateInfo("customer_location"),disabled:!0})]}),Object(a.jsxs)(CEe,{children:[Object(a.jsx)(kEe,{children:"Job Number"}),Object(a.jsx)(e8,{value:A,options:n.getJobNumberOptions(),onChange:n.updateInfo("job_number"),customStyles:vEe,isDisabled:!0})]})]})]}),Object(a.jsxs)(wEe,{children:[Object(a.jsx)(_Ee,{children:"Location"}),Object(a.jsxs)(CEe,{className:"location-container",children:[Object(a.jsx)(kEe,{children:"Storage Location"}),Object(a.jsx)(e8,{value:S,options:n.getLocationOptions(),onChange:n.startPlacement("space"),customStyles:vEe,isDisabled:!l})]}),Object(a.jsxs)(CEe,{className:"location-container",children:[Object(a.jsx)(kEe,{children:"Box/Pallet"}),Object(a.jsx)(e8,{value:E,options:n.getContainerOptions(),onChange:n.startPlacement("container"),customStyles:vEe,isDisabled:!l})]})]})]}),Object(a.jsxs)(gEe,{children:[Object(a.jsx)(_Ee,{children:"Photos"}),Object(a.jsx)($Ne,{photos:u,selectedPhotos:d,setSelectedPhotos:n.setSelectedPhotos,inventoryItem:i,loadPhotos:n.getPhotos,itemName:g})]})]})]})})})}})}}]),n}(h.a.PureComponent)),AEe=Object(LO.compose)(Object(b.b)(),v.g)(EEe);function TEe(){var e=Object(f.a)(["\n  // background-color: #3498db;\n  // padding: 3px 12px 8px 12px;\n  // border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return TEe=function(){return e},e}function IEe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return IEe=function(){return e},e}function REe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return REe=function(){return e},e}function DEe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return DEe=function(){return e},e}var MEe=x.default.div(DEe()),PEe=x.default.div(REe()),LEe=x.default.div(IEe()),FEe=Object(x.default)(yw)(TEe()),UEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={item:null},e.getItem=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.item_id,e.setState({working:!0}),t.next=4,d2.getInventoryItem(n);case 4:r=t.sent.data,e.setState({working:!1,item:r});case 6:case"end":return t.stop()}}),t)}))),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=t.item;switch(n){case"note":return Object(a.jsx)(HA,{isOpen:!0,onClose:e.hideModal,afterSuccess:e.saveNoteDraft,disableTemplatesControl:!0,disableAttachments:!0,disableMentionControl:!0});case"scan":return Object(a.jsx)(pCe,Object(c.a)({onClose:e.hideModal,isOpen:!0,selectedInventoryItems:[o]},r))}return null},e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Number(e.props.match.params.item_id),d2.addNoteToInventoryItem(n.id,r).then((function(e){uy.emit(Kg.WarehousingInventoryItemNoteAdded,e.data.note)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.markStatus=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),r=e.state.item,a=r.current_status,n.next=5,d2.markInventoryItemStatus(r.id,a.user_id,t);case 5:e.setState({working:!1}),uy.emit(Kg.WarehousingInventoryItemUpdated,r),e.getItem();case 8:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getItem(),um.status("Warehousing - Inventry Item")}},{key:"componentWillUnmount",value:function(){um.reset()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=t.item_id,o=e.match.params,i=o.type,c=o.inventory_id,s=o.item_id;n===i&&r===c&&a===s||this.getItem()}},{key:"render",value:function(){var e,t=this,n=this.props.match.params,r=n.tab,o=n.type,i=n.inventory_id,s=n.item_id,l=this.state,u=l.item,d=l.working;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto pt-3",children:[!u||d&&Object(a.jsx)(av,{size:40,color:y.white}),this.renderModal(),Object(a.jsx)(MEe,{className:"px-4 d-flex flex-row justify-content-between mb-3 pt-0",children:Object(a.jsxs)(LEe,{children:[Object(a.jsx)(PEe,{children:"Inventory Item #".concat(s||"")}),u&&Object(a.jsx)("div",{className:"badge badge-warning ml-3",children:null===(e=u.current_status)||void 0===e?void 0:e.status})]})}),Object(a.jsxs)(QG.i,{className:"mx-4 nav-tabs mr-4 print-hide",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"/operations/warehousing/inventories/".concat(o,"/").concat(i,"/item/").concat(s,"/details"),role:"tab",children:"Details"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"/operations/warehousing/inventories/".concat(o,"/").concat(i,"/item/").concat(s,"/notes"),role:"tab",children:"Notes & Work"})}),u&&Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"bottom",id:"toolbar_tooltip"}),Object(a.jsxs)("div",{className:"h-100 d-flex align-items-center justify-content-end",children:[Object(a.jsx)(J3,{name:Ef.AddNote,color:y.black1,className:"cursor-pointer","data-tip":"Add note","data-for":"toolbar_tooltip",onClick:this.showModal("note")}),Object(a.jsx)(J3,{name:Ef.QRCode,color:y.black1,className:"cursor-pointer ml-3","data-tip":"Scan QR code","data-for":"toolbar_tooltip",onClick:this.showModal("scan")}),Object(a.jsx)(FEe,{items:eNe.map((function(e){return{key:e.value,name:"".concat(e.label),onClick:t.markStatus(e.label)}})),noMargin:!0,direction:"right",trigger:function(){return Object(a.jsx)(J3,{color:y.black1,className:"ml-3",name:Ef.Flag,"data-tip":"Change status","data-for":"toolbar_tooltip"})}})]})]})]}),Object(a.jsxs)(QG.k,{activeItem:r,className:" px-4 position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:["details"===r&&Object(a.jsx)(QG.l,{tabId:"details",role:"tabpanel",children:Object(a.jsx)(AEe,Object(c.a)({},this.props))}),"notes"===r&&Object(a.jsx)(QG.l,{tabId:"notes",role:"tabpanel",className:"h-100 w-100",children:Object(a.jsx)(lge,Object(c.a)({},this.props))})]})]})}}]),n}(p.PureComponent);function VEe(){var e=Object(f.a)(["\n  border-width: 1px 1px 0 1px;\n  border-style: solid;\n  border-color: ",";\n  padding: 0px 10px;\n  min-height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: ",";\n\n  &:last-child {\n    border-width: 1px 1px 1px 1px;\n  }\n"]);return VEe=function(){return e},e}function BEe(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return BEe=function(){return e},e}var JEe=x.default.div(BEe()),zEe=Object(x.default)(Kj(["selected"])("div"))(VEe(),y.gray2,(function(e){return e.selected?y.blue0:y.white})),qEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,searchedJobs:[],selectedJob:null,jobs:[]},e.onSearchValueChange=function(t){var n=t.toLowerCase(),r=e.state.jobs,a=[];""!==n?(r.forEach((function(e){var t=e.insurer&&e.insurer.contact_name&&-1!==e.insurer.contact_name.toLowerCase().indexOf(n),r=e.site_address&&e.site_address.full_address&&-1!==e.site_address.full_address.toLowerCase().indexOf(n),o=e.assigned_location&&(-1!==e.assigned_location.name.toLowerCase().indexOf(n)||-1!==e.assigned_location.code.toLowerCase().indexOf(n)),i=-1!==e.id.toString().indexOf(n);(t||r||i||o)&&a.push(e)})),e.setState({searchedJobs:a})):e.setState({searchedJobs:a})},e.onSubmit=function(){e.setState({loading:!0});var t=e.state.selectedJob;d2.createNewInventory(t.id).then((function(t){var n,r,a,o;null===(n=(r=e.props).onSave)||void 0===n||n.call(r,t.data),null===(a=(o=e.props).onClose)||void 0===a||a.call(o),uy.emit(Kg.WarehousingInventoryAdded,t.data)})).catch((function(){e.setState({loading:!1})}))},e.selectJob=function(t){return function(){e.setState({selectedJob:t})}},e.renderJobs=function(){var t=e.state,n=t.searchedJobs,r=t.selectedJob,o=r?r.id:"";return Object(a.jsx)(JEe,{children:n.map((function(t){return Object(a.jsxs)(zEe,{selected:t.id===o,onClick:e.selectJob(t),children:[Object(a.jsx)("div",{children:"".concat(t.insurer?t.insurer.contact_name:"Unknown",", ").concat(t.site_address?t.site_address.full_address:"Unknown")}),Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)(FS,{children:"#".concat(t.id,"-").concat(t.assigned_location?t.assigned_location.code:"Unknown")})})]})}))})},e.renderBody=function(){var t=e.state,n=t.loading,r=t.jobsLoading;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(ES,{loading:n,placeholder:"Search...",searchIcon:!0,mode:"typeGray",onSearchValueChange:e.onSearchValueChange})})}),r?Object(a.jsx)(av,{size:40,color:y.white}):e.renderJobs()]})})},e.renderFooter=function(){return Object(a.jsx)(Cg,{className:"btn",disabled:!1,onClick:e.onSubmit,children:"OK"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({jobsLoading:!0}),ly.getAllJobs({}).then((function(t){e.setState({jobs:t.data,jobsLoading:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:n,title:"New Inventory",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function WEe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return WEe=function(){return e},e}function HEe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n  cursor: pointer;\n  :last-child {\n    border-right: 0;\n  }\n"]);return HEe=function(){return e},e}function GEe(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return GEe=function(){return e},e}var YEe=x.default.div(GEe()),QEe=x.default.div(HEe(),y.white),KEe=(Object(x.default)(J3)(WEe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={location:e.props.activeLocation},e.initLocation=function(){var t=e.props.locations;t.length&&e.onLocationChange(e.state.location||e.findPrimaryLocation()||t[0])},e.findPrimaryLocation=function(){return e.props.locations.find((function(e){return e.primary}))},e.locationsTriggerRender=function(){var t=e.state.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(J3,{style:{marginLeft:"20px"},color:y.white,name:Ef.ArrowDown})]})},e.locationsItems=function(){var t=e.props.locations,n=e.state.location;return t.map((function(t){return{name:t.name,classNames:t.id===(n||{}).id?"active":"",onClick:function(){return e.onLocationChange(t)}}}))},e.onLocationChange=function(t){var n,r;e.setState({location:t}),null===(n=(r=e.props).onLocationChange)||void 0===n||n.call(r,t)},e.showTemplatesSettings=function(){e.props.history.push("/operations/schedule/config/runs")},e.toggleView=function(){var t,n,r="map"===e.props.view?"list":"map";null===(t=(n=e.props).onViewChange)||void 0===t||t.call(n,r)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initLocation()}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;0===e.locations.length&&t.length&&this.initLocation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.locations,o=t.match,i=t.location,c=t.view;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(coe,{title:n,children:Object(a.jsxs)(YEe,{children:[i.pathname===o.url+"/equipment/deployed"&&Object(a.jsx)(QEe,{children:"map"===c?Object(a.jsx)(J3,{name:Ef.LayoutBullets,title:"Show List View",color:y.white,onClick:e.toggleView}):Object(a.jsx)(J3,{name:Ef.LocationPin,title:"Show Map View",color:y.white,onClick:e.toggleView})}),Object(a.jsxs)(QEe,{children:[0===r.length&&Object(a.jsx)(av,{size:30,color:y.blue6}),!r||r&&0===r.length?Object(a.jsx)("div",{children:"No locations"}):Object(a.jsx)(yw,{direction:"right",trigger:function(){return e.locationsTriggerRender()},items:e.locationsItems()})]})]})})}})}}]),n}(h.a.PureComponent)),ZEe=Object(v.g)(KEe),XEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).eventListeners=[uy.listen(Kg.LME_EquipmentUpdated,(function(){e.loadData()}))],e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.equipment,a=n.placements,o=n.deployments,a.fetch(r.id),o.fetch(r.id);case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.equipment,n=e.equipment;t.id!==n.id&&this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"renderHistory",value:function(){var e,t,n,r=this.props,o=r.equipment,i=r.placements,s=r.deployments,l=[];j.a.forEach({deployment:null===(e=((null===(t=s.data)||void 0===t?void 0:t.data)||{}).job_equipment)||void 0===e?void 0:e.map((function(e){var t;return Object(c.a)(Object(c.a)({},null===(t=s.data)||void 0===t?void 0:t.data),{},{job_equipment:e,created_at:e.created_at})})),placement:(null===(n=i.data)||void 0===n?void 0:n.data)||[]},(function(e,t){j.a.forEach(e,(function(e){l.push(Object(c.a)(Object(c.a)({},e),{},{type:t}))}))})),l.sort((function(e,t){return qf()(t.created_at||"").diff(e.created_at||"")}));var u=[];return l.forEach((function(e,t){var n,r;switch(e.type){case"placement":if(e.space){var o,i;if(e.ended_at)u.push(Object(a.jsxs)(oge,{color:y.blue2,children:[Object(a.jsxs)("div",{children:["Equipment checked out from location ",Object(a.jsxs)("span",{children:["`",e.space.name,"`"]})," by ",null===(i=e.stop_by)||void 0===i?void 0:i.full_name]}),Object(a.jsx)("div",{className:"date",children:qf()(e.ended_at).format(Uj)})]},e.type+"end"+e.id));u.push(Object(a.jsxs)(oge,{color:y.blue5,children:[Object(a.jsxs)("div",{children:["Equipment checked in to location ",Object(a.jsxs)("span",{children:["`",e.space.name,"`"]})," by ",null===(o=e.start_by)||void 0===o?void 0:o.full_name]}),Object(a.jsx)("div",{className:"date",children:qf()(e.started_at).format(Uj)})]},e.type+"start"+e.id))}break;case"deployment":var c,s;if(e.job_equipment.ended_at)u.push(Object(a.jsxs)(oge,{color:y.red1,children:[Object(a.jsxs)("div",{children:[null===(c=e.job_equipment.ended_by)||void 0===c?void 0:c.full_name," has removed the equipment from job ",Object(a.jsxs)("a",{href:"/job/".concat(e.job_equipment.job.id,"/details"),target:"_blank",rel:"noreferrer",children:[Object(a.jsx)("span",{children:ly.getJobName(e.job_equipment.job)})," ",null===(s=e.job_equipment.job.site_address)||void 0===s?void 0:s.full_address]})]}),Object(a.jsx)("div",{className:"date",children:qf()(e.job_equipment.ended_at).format(Uj)})]},e.type+"end"+e.job_equipment.id));u.push(Object(a.jsxs)(oge,{color:y.green4,children:[Object(a.jsxs)("div",{children:[null===(n=e.job_equipment.creator)||void 0===n?void 0:n.full_name," has deployed the equipment to job ",Object(a.jsxs)("a",{href:"/job/".concat(e.job_equipment.job.id,"/details"),target:"_blank",rel:"noreferrer",children:[" ",Object(a.jsx)("span",{children:ly.getJobName(e.job_equipment.job)})," ",null===(r=e.job_equipment.job.site_address)||void 0===r?void 0:r.full_address]})]}),Object(a.jsx)("div",{className:"date",children:qf()(e.job_equipment.started_at).format(Uj)})]},e.type+"start"+e.job_equipment.id))}})),u.push(Object(a.jsxs)(oge,{children:[Object(a.jsx)("div",{children:"Equipment added"}),Object(a.jsx)("div",{className:"date",children:qf()(o.created_at).format(Uj)})]},o.id)),u}},{key:"render",value:function(){var e=this.props.placements;return Object(a.jsxs)("div",{children:[e.loading&&Object(a.jsx)(av,{size:40,color:y.white}),this.renderHistory()]})}}]),n}(p.PureComponent),$Ee=Object(LO.compose)(Mm({placements:{fetch:dH.getEquipmentPlacements},deployments:{fetch:dH.getEquipmentDeployemntHistory}}))(XEe),eAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.processing=!1,e.handleScan=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing){t.next=19;break}if(e.processing=!0,!n){t.next=18;break}if(e.setState({result:n}),t.prev=4,r=JSON.parse(atob(n)),[V3.space].includes(r.t)){t.next=10;break}e.setState({error:"Invalid type '".concat(r.t,"'")}),t.next=12;break;case 10:return t.next=12,e.assign(Y3[r.t],r.id);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0),e.setState({error:"Invalid qr code"});case 18:e.processing=!1;case 19:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleError=function(t){e.setState({error:t.message}),console.error(t.message)},e.assign=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({submitting:!0}),a=[],o=[],e.props.equipments.forEach((function(e){var t=e.placement||{};t[n]||(t[n]={}),t[n].id=r,a.push(dH.stopEquipmentPlacement(e.id))})),t.next=6,Promise.all(a);case 6:return e.props.equipments.forEach((function(e){var t,a=e.placement||{};a[n]||(a[n]={}),a[n].id=r,o.push(dH.startEquipmentPlacement(e.id,{inventory_storage_space_id:null===(t=a.space)||void 0===t?void 0:t.id,is_used_on_ar:!0}))})),t.next=9,Promise.all(o);case 9:e.props.onClose(),uy.emit(Kg.LME_EquipmentUpdated);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.state,n=t.error,r=t.result;return Object(a.jsxs)("div",{className:"qr-reader-wrapper",children:[n&&Object(a.jsx)("p",{className:"p-3 text-danger",children:n}),r&&Object(a.jsx)("p",{className:"p-3 text-success",children:r}),Object(a.jsx)(q3.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:"100%"}})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=(e.title,e.onClose),r=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{bodyClass:"p-0",onClose:n,loading:r,title:"Scan to Location",body:this.renderModalBody()})})}}]),n}(p.PureComponent),tAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.equipment;switch(n){case"scan-qr":return Object(a.jsx)(eAe,Object(c.a)({isOpen:!0,onClose:e.hideModal,equipments:[o]},r));case"deploy":return Object(a.jsx)(P8,{title:"Deploy Equipment On Site",id:Yoe,body:Object(a.jsx)(Koe,{initialValues:{unit_cost_to_me:o.equipment_category.default_buy_cost_per_interval},onSubmit:e.deployOnSite}),isOpen:!0,onClose:e.hideModal})}return null},e.deployOnSite=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.equipment,e.setState({working:!0}),t.prev=2,!n.job){t.next=9;break}return a=n.job.id,t.next=7,ly.addEquipmentToJob(a,{equipment_id:r.id,started_at:n.started_at&&n.started_at.utc().format(Mj),ended_at:n.ended_at&&n.ended_at.utc().format(Mj)});case 7:uy.emit(Kg.LME_EquipmentUpdated),e.hideModal();case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[2,,9,12]])})));return function(e){return t.apply(this,arguments)}}(),e.removeFromSite=Object(Um.a)(Fm.a.mark((function t(){var n,r,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,!(o=n.equipment).job_equipment){t.next=14;break}return t.next=4,r(Sw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{children:"Are you sure you want to remove this equipment from site?"})})));case 4:if(!t.sent){t.next=14;break}return e.setState({working:!0}),t.prev=7,t.next=10,ly.updateJobEquipmentFinishUsing(o.job_equipment.job_id,o.job_equipment.id,qf()().utc().format(Mj));case 10:uy.emit(Kg.LME_EquipmentUpdated);case 11:return t.prev=11,e.setState({working:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])}))),e.checkOut=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.equipment,t.next=5,dH.stopEquipmentPlacement(n.id);case 5:uy.emit(Kg.LME_EquipmentUpdated,n);case 6:return t.prev=6,e.setState({working:!1}),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r,o,i,c=this.props.equipment,s=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),s&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"row my-0",children:Object(a.jsx)("div",{className:"col text-right",children:Object(a.jsx)("span",{className:"badge badge-primary",children:null===(e=c.placement_status)||void 0===e?void 0:e.replaceAll("_"," ")})})}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Equipment Type"})}),Object(a.jsx)("div",{className:"col",children:c.equipment_category.name})]}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Model Number"})}),Object(a.jsx)("div",{className:"col",children:c.model})]}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Serial Number"})}),Object(a.jsx)("div",{className:"col",children:c.serial_number})]}),c.placement&&Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Storage Location"})}),Object(a.jsx)("div",{className:"col",children:(null===(t=c.placement)||void 0===t?void 0:t.space)&&c.placement.space.name+" ("+(null===(n=c.placement.space.location)||void 0===n?void 0:n.code)+")"})]}),c.placement_status===E8.DEPLOYED_ON_SITE&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Job"})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{children:ly.getJobName(c.job_equipment.job)}),Object(a.jsx)("div",{className:"text-sm",children:null===(r=c.job_equipment)||void 0===r||null===(o=r.job.site_address)||void 0===o?void 0:o.full_address})]})]}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Deployment Date"})}),Object(a.jsx)("div",{className:"col",children:qf()(null===(i=c.job_equipment)||void 0===i?void 0:i.started_at).format(Uj)})]})]}),Object(a.jsx)("div",{children:c.placement_status===E8.CHECKED_OUT?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"btn btn-outline-primary",onClick:this.showModal("scan-qr"),children:"Check In"}),Object(a.jsx)("button",{className:"btn btn-outline-success ml-3",onClick:this.showModal("deploy"),children:"Deploy to Site"})]}):c.placement_status===E8.DEPLOYED_ON_SITE?Object(a.jsx)("button",{className:"btn btn-outline-danger",onClick:this.removeFromSite,children:"Remove from Site"}):Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.checkOut,children:"Check Out"})})]})]})}}]),n}(p.PureComponent),nAe=Object(LO.compose)(Object(b.b)())(tAe),rAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={center:null},e.defaultCenter=[-34.397,150.644],e.setCenter=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,dm();case 3:n=t.sent,e.setState({center:[n.coords.latitude,n.coords.longitude]}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({center:e.defaultCenter});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.renderIcon=function(e){var t=60;return new Zte.a.DivIcon({html:$te.a.renderToStaticMarkup(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(tne,{color:e||y.blue4}),Object(a.jsx)(J3,{size:t,style:{position:"relative"},color:e||y.blue4,name:Ef.PinMapFilled,fill:!0})]})),iconSize:[t,t],iconAnchor:[30,t],popupAnchor:[0,-50]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setCenter()}},{key:"render",value:function(){var e=this,t=this.state.center;if(t){var n=this.props.equipments;return Object(a.jsxs)(Wte.a,{center:t,zoom:11,maxZoom:17,children:[Object(a.jsx)(Hte.a,{url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:""}),n.filter((function(e){return e.equipment_qr_history})).map((function(t){var n,r,o;return Object(a.jsx)(Qte.a,{position:[t.equipment_qr_history.location_lat,t.equipment_qr_history.location_lng],icon:e.renderIcon(),children:Object(a.jsxs)(rne.a,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Equipment Type:"})," ",t.equipment_category.name]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Model Number: "})," ",t.model]}),t.placement_status===E8.DEPLOYED_ON_SITE&&(null===(n=t.job_equipment)||void 0===n?void 0:n.job)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Job:"})," ",Object(a.jsx)("a",{href:"/job/".concat(t.job_equipment.job.id,"/details"),target:"_blank",rel:"noreferrer",children:ly.getJobName(t.job_equipment.job)})," ",null===(r=t.job_equipment.job.site_address)||void 0===r?void 0:r.full_address]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Deployment Date: "}),qf()(null===(o=t.job_equipment)||void 0===o?void 0:o.started_at).format(Uj)]})]})]})},t.id)}))]})}return null}}]),n}(p.PureComponent),aAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.eventListeners=[uy.listen(Kg.LME_EquipmentUpdated,(function(){e.loadData()}))],e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=e.props,r=n.equipment,a=n.equipmentLocation,o=n.match.params.id,t.prev=2,t.next=5,r.fetch(o);case 5:return t.next=7,a.fetch(o,{per_page:1});case 7:return t.prev=7,e.setState({loading:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[2,,7,10]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t=this.props,n=t.equipment,r=t.equipmentLocation,o=this.state.loading;return Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[(o||n.loading)&&Object(a.jsx)(av,{size:40,color:y.white}),n.data&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"border p-3",children:Object(a.jsx)(nAe,{equipment:n.data})}),Object(a.jsx)("div",{className:"border p-3 my-3 position-relative",style:{maxHeight:300,overflow:"auto"},children:Object(a.jsx)($Ee,{equipment:n.data})}),Object(a.jsxs)("div",{className:"border p-3 position-relative d-flex flex-column",style:{height:400},children:[Object(a.jsx)("h5",{children:Object(a.jsx)("strong",{children:"Last Known Location"})}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(rAe,{equipments:(null===(e=r.data)||void 0===e?void 0:e.data)||[]})})]})]})]})}}]),n}(p.PureComponent),oAe=Object(LO.compose)(v.g,Mm({equipment:{fetch:dH.getEquipmentInfo},equipmentLocation:{fetch:dH.getEquipmentScannedLocation}}))(aAe),iAe="WH_EQUIPMENT_FILTERS",cAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.submit=function(){return e.props.handleSubmit(e.props.onSubmit||e.onSubmit)()},e.debouncedSubmit=_v()(e.submit,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.onSubmit;return Object(a.jsx)("form",{id:iAe,onSubmit:t(n||this.onSubmit),children:Object(a.jsx)(yv.a,{name:"terms",component:ZO,placeholder:"Search by equipment, model number, barcode ...",onChange:this.debouncedSubmit})})}}]),n}(p.PureComponent),sAe=Object(LO.compose)(Object(Gj.a)({form:iAe}))(cAe),lAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.equipments,o=r.equipmentsLocations,i=r.view,s=r.locationId,l=e.state.filters,"map"===i?(o.fetch(Object(c.a)(Object(c.a)({placement_status:E8.DEPLOYED_ON_SITE,location_id:s},n),l)),a.reset()):(o.reset(),a.fetch(Object(c.a)(Object(c.a)({placement_status:E8.DEPLOYED_ON_SITE,location_id:s},n),l)));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFiltersSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({filters:n},(function(){e.loadData()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){e.locationId===this.props.locationId&&e.view===this.props.view||this.loadData()}},{key:"render",value:function(){var e,t,n=this.props,r=n.equipments,o=n.equipmentsLocations,i=n.view,c=r.loading||o.loading;return Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100 d-flex flex-column",children:[c&&Object(a.jsx)(av,{size:40,color:y.white,zIndex:9999}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(sAe,{onSubmit:this.onFiltersSubmit})}),Object(a.jsx)("div",{className:"flex-grow-1",children:"map"===i?Object(a.jsx)(rAe,{equipments:(null===(e=o.data)||void 0===e?void 0:e.data)||[]}):Object(a.jsxs)(lF,{children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Equipment Type"}),Object(a.jsx)(PL,{children:"Model Number"}),Object(a.jsx)(PL,{children:"Deployment Date"}),Object(a.jsx)(PL,{children:"Job"}),Object(a.jsx)(PL,{children:"Equipment Location"})]})}),Object(a.jsx)(LL,{children:null===(t=r.data)||void 0===t?void 0:t.data.map((function(e){var t,n,r,o;return Object(a.jsxs)(VL,{to:"/operations/warehousing/equipment/".concat(e.id,"/details"),children:[Object(a.jsx)(FL,{children:e.equipment_category.name}),Object(a.jsx)(FL,{children:e.model}),Object(a.jsx)(FL,{children:qf()(null===(t=e.job_equipment)||void 0===t?void 0:t.started_at).format(Uj)}),Object(a.jsxs)(FL,{children:[Object(a.jsx)("div",{children:ly.getJobName(e.job_equipment.job)}),Object(a.jsx)("div",{className:"text-sm",children:null===(n=e.job_equipment)||void 0===n||null===(r=n.job.site_address)||void 0===r?void 0:r.full_address})]}),Object(a.jsx)(FL,{children:null===(o=e.location)||void 0===o?void 0:o.code})]},e.id)}))})]})})]})}}]),n}(p.PureComponent),uAe=Object(LO.compose)(Mm({equipments:{fetch:dH.getAllEquipments},equipmentsLocations:{fetch:dH.getEquipmentsScannedLocations}}))(lAe),dAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.equipments,o=r.locationId,a.fetch(Object(c.a)({placement_status:E8.IN_STORAGE,location_id:o},n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){e.locationId!==this.props.locationId&&this.loadData()}},{key:"render",value:function(){var e,t=this.props.equipments,n=t.loading;return Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(sAe,{onSubmit:this.loadData})}),Object(a.jsxs)(lF,{children:[Object(a.jsx)(ML,{children:Object(a.jsxs)(UL,{children:[Object(a.jsx)(PL,{children:"Equipment Type"}),Object(a.jsx)(PL,{children:"Model Number"}),Object(a.jsx)(PL,{children:"Storage Location"}),Object(a.jsx)(PL,{children:"Status"})]})}),Object(a.jsx)(LL,{children:null===(e=t.data)||void 0===e?void 0:e.data.map((function(e){var t,n,r;return Object(a.jsxs)(VL,{to:"/operations/warehousing/equipment/".concat(e.id,"/details"),children:[Object(a.jsx)(FL,{children:e.equipment_category.name}),Object(a.jsx)(FL,{children:e.model}),Object(a.jsx)(FL,{children:(null===(t=e.placement)||void 0===t?void 0:t.space)&&e.placement.space.name+" ("+(null===(n=e.placement.space.location)||void 0===n?void 0:n.code)+")"}),Object(a.jsx)(FL,{children:null===(r=e.placement_status)||void 0===r?void 0:r.replaceAll("_"," ")})]},e.id)}))})]})]})}}]),n}(p.PureComponent),pAe=Object(LO.compose)(Mm({equipments:{fetch:dH.getAllEquipments}}))(dAe),hAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).setPageTitle=function(){var t="";switch(e.props.match.params.type){case"storage":t="In Storage";break;case"deployed":t="Deployed On Site"}um.status("Warehousing | Equipment"+(t?" - ":"")+t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setPageTitle()}},{key:"componentDidUpdate",value:function(){this.setPageTitle()}},{key:"componentWillUnmount",value:function(){um.reset()}},{key:"render",value:function(){var e=this.props,t=e.warehousingOptions,n=e.match.params.type,r=void 0===n?"":n;if(t.selectedLocation)switch(r.toLowerCase()){case"storage":return Object(a.jsx)(pAe,{locationId:t.selectedLocation});case"deployed":return Object(a.jsx)(uAe,{locationId:t.selectedLocation,view:t.view});default:return Object(a.jsx)(pAe,{locationId:t.selectedLocation})}return null}}]),n}(p.PureComponent),bAe=Object(LO.compose)(Object(b.b)((function(e){return{warehousingOptions:r5(e)}})))(hAe),fAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchLoading:!1,location:e.primaryLocation,view:"list"},e.getWarehouseInfo=function(){var t=e.props.dispatch,n=e.state.location;n&&t(e5(n.id))},e.eventListeners=[uy.listen(Kg.WarehousingInventoryAdded,(function(){e.getWarehouseInfo()})),uy.listen(Kg.WarehousingInventoryDeleted,(function(){e.getWarehouseInfo()}))],e.setLocation=function(t){e.setState({location:t})},e.setView=function(t){e.setState({view:t})},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=t.location;switch(n){case"new_item":return Object(a.jsx)(qEe,Object(c.a)({locationId:null===o||void 0===o?void 0:o.id,isOpen:!0,onClose:e.hideModal},r))}return null},e}return Object(l.a)(n,[{key:"isActive",value:function(e,t){return!!Object(v.f)(this.props.location.pathname,{path:e,exact:t})}},{key:"componentDidMount",value:function(){um.status("Warehousing");var e=this.props.dispatch,t=this.state,n=t.location,r=t.view;e(t5({selectedLocation:null===n||void 0===n?void 0:n.id,view:r})),this.getWarehouseInfo()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.dispatch,r=this.state,a=r.location,o=r.view,i=t.location,c=t.view;a===i&&o===c||n(t5({selectedLocation:null===a||void 0===a?void 0:a.id,view:o})),a!==i&&this.getWarehouseInfo()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),um.reset()}},{key:"getWIMenuItems",value:function(){var e=this.props.warehouseInfo,t=e.data?e.data.data:[];return[{path:"/operations/warehousing/inventories/new",icon:Ef.ArrowThickCircleRight,isActive:this.isActive("/operations/warehousing/inventories/new"),label:"Incoming",value:0,type:"incoming"},{path:"/operations/warehousing/inventories/continued",icon:Ef.BulletList,isActive:this.isActive("/operations/warehousing/inventories/continued"),label:"Inventories",value:0,type:"inventories"},{path:"/operations/warehousing/items",icon:Ef.ShipmentUpload,isActive:this.isActive("/operations/warehousing/items"),label:"Items in Storage",value:0,type:"items_in_storage"},{path:"/operations/warehousing/inventories/processed",icon:Ef.Truck,isActive:this.isActive("/operations/warehousing/inventories/processed"),label:"Ready to Return / Dispose",value:0,type:"ready_to_return_dispose"},{path:"/operations/warehousing/inventories/completed",icon:Ef.ShipmentDeliver,isActive:this.isActive("/operations/warehousing/inventories/completed"),label:"Completed Inventories",value:0,type:"returned_disposed"},{path:"/operations/warehousing/equipment/storage",icon:Object(a.jsx)(J3,{name:Ef.Trolley,color:y.black0,fill:!0}),isActive:this.isActive("/operations/warehousing/equipment"),label:"Equipment",type:"equipment",menu:[{path:"/operations/warehousing/equipment/storage",con:Ef.ShipmentDeliver,isActive:this.isActive("/operations/warehousing/equipment/storage"),label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"In Storage"})},{path:"/operations/warehousing/equipment/deployed",con:Ef.ShipmentDeliver,isActive:this.isActive("/operations/warehousing/equipment/deployed"),label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Deployed On Site"})}]}].map((function(e){return e.value=t[e.type],Object.assign({},e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.locations,o=t.loading,i=this.state,c=i.location,s=i.view;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[o&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(ZEe,{title:"Warehousing",locations:r,onLocationChange:e.setLocation,view:s,onViewChange:e.setView,activeLocation:c}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch overflow-auto",children:[Object(a.jsxs)(tCe,{children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right",id:"operations-sidebar-tooltip"}),e.getWIMenuItems().map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ym,{item:e},e.path),e.isActive&&e.menu&&e.menu.map((function(e){return Object(a.jsx)(ym,{item:e},e.path)}))]})})),Object(a.jsx)(Gk,{className:"d-flex flex-row align-items-center",children:t.has(Dw.OPERATIONS_INVENTORY_MANAGE)&&Object(a.jsx)(Wk,{name:Ef.Add,"data-tip":"Create new inventory","data-for":"operations-sidebar-tooltip",onClick:e.showModal("new_item")})})]}),c&&Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/inventories/:type"),component:ASe}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/inventories/:type/:inventory_id/items"),component:nNe}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/inventories/:type/:inventory_id/item/:item_id/:tab"),component:UEe}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/items"),component:KSe}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/locations"),component:XSe}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/to-return"),component:eCe}),Object(a.jsx)(v.b,{exact:!0,path:"".concat(n.path,"/returned"),component:ISe}),Object(a.jsx)(v.b,{path:"".concat(n.path,"/equipment/:id/details"),component:oAe}),Object(a.jsx)(v.b,{path:"".concat(n.path,"/equipment/:type"),component:bAe}),Object(a.jsx)(v.a,{to:"".concat(n.path,"/inventories/new")})]})})]})]})}})]})}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.Component),mAe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations,warehousingOptions:r5(e),warehouseInfo:e.warehousing.warehouseInfo,loading:e.warehousing.inventories.loading}})),v.g)(fAe);function jAe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return jAe=function(){return e},e}function vAe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n\n  :last-child {\n    border-right: 0;\n  }\n"]);return vAe=function(){return e},e}function OAe(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return OAe=function(){return e},e}var gAe=x.default.div(OAe()),xAe=x.default.div(vAe(),y.white),yAe=(Object(x.default)(J3)(jAe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={location:e.props.activeLocation},e.initLocation=function(){var t=e.props.locations;t.length&&e.onLocationChange(e.state.location||e.findPrimaryLocation()||t[0])},e.findPrimaryLocation=function(){return e.props.locations.find((function(e){return e.primary}))},e.locationsTriggerRender=function(){var t=e.state.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(J3,{style:{marginLeft:"20px"},color:y.white,name:Ef.ArrowDown})]})},e.locationsItems=function(){var t=e.props.locations,n=e.state.location;return t.map((function(t){return{name:t.name,classNames:t.id===(n||{}).id?"active":"",onClick:function(){return e.onLocationChange(t)}}}))},e.onLocationChange=function(t){var n,r;e.setState({location:t}),null===(n=(r=e.props).onLocationChange)||void 0===n||n.call(r,t)},e.showTemplatesSettings=function(){e.props.history.push("/operations/schedule/config/runs")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initLocation()}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;0===e.locations.length&&t.length&&this.initLocation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.locations;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(coe,{title:n,children:Object(a.jsx)(gAe,{children:Object(a.jsxs)(xAe,{children:[0===r.length&&Object(a.jsx)(av,{size:30,color:y.blue6}),!r||r&&0===r.length?Object(a.jsx)("div",{children:"No locations"}):Object(a.jsx)(yw,{direction:"right",trigger:function(){return e.locationsTriggerRender()},items:e.locationsItems()})]})})})}})}}]),n}(h.a.PureComponent)),wAe=Object(v.g)(yAe);function _Ae(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return _Ae=function(){return e},e}var kAe=x.default.div(_Ae()),SAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(r=t.call.apply(t,[this].concat(o))).state={location:null===(e=r.props.location.state)||void 0===e?void 0:e.location},r.onClose=function(){r.props.history.push("/operations/schedule/jobs",{location:r.state.location})},r.setLocation=function(e){r.setState({location:e})},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){um.status("Schedule - Settings")}},{key:"componentWillUnmount",value:function(){um.reset()}},{key:"renderSection",value:function(e){var t=this.state.location;switch(e){case"runs":return Object(a.jsx)(Doe,{location:t,onClose:this.onClose})}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.match.params.section,o=this.state.location;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(wAe,{title:"Runs Settings",locations:n,onLocationChange:e.setLocation,activeLocation:o}),Object(a.jsx)(kAe,{className:"h-100 d-flex flex-row align-items-stretch flex-grow-1 position-relative",children:Object(a.jsx)("div",{className:"flex-grow-1 position-relative",style:{maxWidth:"100%"},children:e.renderSection(r)})})]})})}})}}]),n}(p.PureComponent),CAe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{locations:e.user.locations}})))(SAe),NAe="WTAER_FORMS_MOISTURE_READING_FORM",EAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,!n.mc){t.next=16;break}return null===a||void 0===a||a(n),t.prev=3,t.next=6,xY(i.id,Object(c.a)({},n));case 6:s=t.sent,null===o||void 0===o||o(!0,n),uy.emit(Kg.JobReadingsAdded,[s]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),null===o||void 0===o||o(!1,n);case 14:t.next=17;break;case 16:null===o||void 0===o||o(!0,n);case 17:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.moistureArea,r=t.handleSubmit,o=t.submitting,i=t.modal,c=t.hasMoistureReadings,s=t.hasAirReadings;return Object(a.jsxs)(a.Fragment,{children:[o&&!i&&Object(a.jsx)(av,{size:40}),Object(a.jsx)("form",{id:NAe,onSubmit:r(this.onSubmit),children:Object(a.jsx)(yv.a,{label:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:n.name})}),Object(a.jsx)("div",{className:"text-sm",children:(null===(e=n.surface_type)||void 0===e?void 0:e.name)||"Not Set"})]}),className:"d-flex",labelClassName:"col-6",valueClassName:"col",name:"mc",component:ZO,type:"number",min:0,validate:c||s?void 0:uv})})]})}}]),n}(p.PureComponent),AAe=Object(LO.compose)(Object(b.b)((function(e){var t,n;return{hasMoistureReadings:!!j()(e.form).keys().filter((function(e){return e.startsWith(NAe)})).filter((function(t){var n;return null===(n=e.form[t].values)||void 0===n?void 0:n.mc})).value().length,hasAirReadings:(n=null===(t=e.form[TAe])||void 0===t?void 0:t.values,!(!(null===n||void 0===n?void 0:n.rh)||!(null===n||void 0===n?void 0:n.temp)))}})),Object(Gj.a)({form:NAe,enableReinitialize:!0}))(EAe),TAe="WTAER_FORMS_AIR_READING_FORM",IAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,null===a||void 0===a||a(n),t.prev=2,t.next=5,xY(i.id,Object(c.a)({},n));case 5:return s=t.sent,null===o||void 0===o||o(!0,s),uy.emit(Kg.JobReadingsAdded,[s]),t.abrupt("return",s);case 11:return t.prev=11,t.t0=t.catch(2),null===o||void 0===o||o(!1,n),t.abrupt("return",Mg(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.handleSubmit,o=n.submitting,i=n.modal,c=n.formData,s=n.hasMoistureReadings;n.hasAirReadings;return Object(a.jsxs)(a.Fragment,{children:[o&&!i&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{id:TAe,onSubmit:r(this.onSubmit),children:[Object(a.jsx)(yv.a,{label:"Relative Humidity (R/H) % :",className:"d-flex",labelClassName:"pt-2 col-6",valueClassName:"col",name:"rh",component:ZO,type:"number",min:0,max:100,step:.01,validate:s?void 0:uv}),Object(a.jsx)(yv.a,{label:"Temperature (\u2103) :",className:"d-flex",labelClassName:"pt-2 col-6",valueClassName:"col",name:"temp",component:ZO,type:"number",step:1,validate:s?void 0:uv}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(ZF,{className:"m-0",children:"GPK:"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(ZF,{className:"m-0",children:(null===(e=pY(c))||void 0===e?void 0:e.toFixed(2))||"N/A"})})]})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(ZF,{className:"m-0",children:"GPP:"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(ZF,{className:"m-0",children:(null===(t=dY(c))||void 0===t?void 0:t.toFixed(2))||"N/A"})})]})})]})]})}}]),n}(p.PureComponent),RAe=Object(LO.compose)(Object(b.b)((function(e){var t,n;return{formData:Object(eM.a)(TAe)(e),hasMoistureReadings:!!j()(e.form).keys().filter((function(e){return e.startsWith(NAe)})).filter((function(t){var n;return null===(n=e.form[t].values)||void 0===n?void 0:n.mc})).value().length,hasAirReadings:(n=null===(t=e.form[TAe])||void 0===t?void 0:t.values,!(!(null===n||void 0===n?void 0:n.rh)||!(null===n||void 0===n?void 0:n.temp)))}})),Object(Gj.a)({form:TAe,enableReinitialize:!0}))(IAe),DAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(t,n){e.setState({submitting:!1}),t&&e.props.onClose()},e.initialValues={group_at:qf()()},e.renderModalBody=function(){var t=e.props,n=t.reading,r=t.job,o=t.room;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Air Readings"})}),Object(a.jsx)(RAe,{job:r,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),n),{},{job_room_id:null===o||void 0===o?void 0:o.id}),modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.reading,i=e.room,c=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:c,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add a new")+" reading"+(i?": "+i.name:""),body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:TAe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent),MAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.job,r=t.outsideRoom,o=t.locked;return Object(a.jsxs)("div",{className:"print-hide",children:[e&&Object(a.jsx)(DAe,{onClose:this.hideModal,isOpen:!0,job:n,room:r}),Object(a.jsx)("h4",{className:"text-center",children:"We'll also need to add an outside control reading."}),Object(a.jsx)("p",{className:"text-center mt-4",children:!o&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal,children:"Add outside reading"})})]})}}]),n}(p.PureComponent);function PAe(){var e=Object(f.a)(["\n  label {\n    color: ","\n  }\n"]);return PAe=function(){return e},e}var LAe="WTAER_FORMS_CONTROL_ROOM_FORM",FAe=x.default.div(PAe(),y.gray4),UAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,null===a||void 0===a||a(n),console.log(n),t.prev=3,t.next=6,n.id?jY(i.id,n.id,n):mY(i.id,n);case 6:c=t.sent,null===o||void 0===o||o(!0,c),uy.emit(n.id?Kg.JobRoomUpdated:Kg.JobRoomAdded,c),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),null===o||void 0===o||o(!1);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.resetFloorSubtype=function(t){var n=e.props,r=n.change,a=n.dispatch;r("flooring_subtype",null),t&&a(vQ(t.id))},e.getOptLabel=function(e){return e.name},e.getOptValue=function(e){return e.id},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialValues,n=e.dispatch;t.flooring_type&&n(vQ(t.flooring_type.id))}},{key:"render",value:function(){var e,t,n=this.props,r=n.handleSubmit,o=n.submitting,i=n.modal,c=n.initialValues,s=void 0===c?{}:c,l=n.floorTypes,u=n.floorSubTypes,d=n.carpetTypes,p=n.carpetAges,h=n.carpetFaceFyber,b=n.underlayTypes,f=n.carpetConstructTypes,m=n.nonRestroableReasons,j=n.formData;return Object(a.jsxs)(FAe,{children:[o&&!i&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{id:LAe,onSubmit:r(this.onSubmit),children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:(s.control?"Control ":"")+"Room Name:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"name",placeholder:"Room name",component:ZO,type:"text",validate:uv})})]}),s.control?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Total Area (LxWxH):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(yv.a,{name:"dimensions_length",placeholder:"L",component:ZO,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"dimensions_width",placeholder:"W",component:ZO,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"dimensions_height",placeholder:"H",component:ZO,type:"number",min:0,step:.01})})]})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Affected Area (LxW):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(yv.a,{name:"dimensions_affected_length",placeholder:"L",component:ZO,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"dimensions_affected_width",placeholder:"W",component:ZO,type:"number",min:0,step:.01})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Floor Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"flooring_type",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:l||[],onChange:this.resetFloorSubtype})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Sub-Floor Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"flooring_subtype",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:j.flooring_type&&u[null===(e=j.flooring_type)||void 0===e?void 0:e.id]||[]})})]}),Object(a.jsx)("hr",{}),(null===(t=j.flooring_type)||void 0===t?void 0:t.id)===VTe.FLOOR_TYPE.CARPET?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"carpet_type",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:d})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Age:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"carpet_age",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:p})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Construction Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"carpet_construction_type",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:f})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Face Fibre:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"carpet_face_fibre",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:h})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"underlay_type",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:b})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Brand and Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"underlay_type_note",component:ZO})})]})]}):null,Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay Required:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"underlay_required",component:rU,direction:"horizontal",list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],validate:uv})})]}),"1"===j.underlay_required&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay Measurements (LxW):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(yv.a,{name:"dimensions_underlay_length",placeholder:"L",component:ZO,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"dimensions_underlay_width",placeholder:"W",component:ZO,type:"number",min:0,step:.01})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Trims Required:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"trims_required",component:rU,direction:"horizontal",list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],validate:uv})})]}),"1"===j.trims_required&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Type of Trim:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"trim_type",component:ZO})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Restorable:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"restorable",component:rU,direction:"horizontal",list:[{value:"1",label:"Yes"},{value:"0",label:"No"}],validate:uv})})]}),"0"===j.restorable&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Non-Restorable Reason:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(yv.a,{name:"non_restorable_reason",component:Kv,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:m||[]})})]})]})]})]})}}]),n}(p.PureComponent),VAe=Object(LO.compose)(Object(b.b)((function(e,t){var n=e.waterForm,r=Object(Rm.a)(e,["waterForm"]);return{floorTypes:n.floorTypes,floorSubTypes:n.floorSubTypes,carpetTypes:n.carpetTypes,carpetAges:n.carpetAges,carpetConstructTypes:n.carpetConstructTypes,carpetFaceFyber:n.carpetFaceFyber,underlayTypes:n.underlayTypes,nonRestroableReasons:n.nonRestroableReasons,formData:Object(eM.a)(t.form||LAe)(r)||{}}})),Object(Gj.a)({form:LAe,enableReinitialize:!0}))(UAe),BAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s,l;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}if(o=e.props,i=o.job,c=o.onClose,s=o.afterSubmit,!r||!r.control||r.outside||(null===(a=e.props.room)||void 0===a?void 0:a.id)){t.next=7;break}return t.next=5,mY(i.id,{job_id:i.id,job:i,name:"Outside",outside:1,control:1});case 5:l=t.sent,uy.emit(Kg.JobRoomAdded,l);case 7:null===s||void 0===s||s(r),c();case 9:e.setState({submitting:!1});case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.props,n=t.room,r=t.job;return Object(a.jsx)(VAe,{job:r,initialValues:n||{underlay_required:"0",trims_required:"0",restorable:"1"},modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.room,i=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{scrollY:!0,onClose:r,loading:i,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add a new")+" "+((null===o||void 0===o?void 0:o.control)?"control":"affected")+" room",body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:LAe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent),JAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props.job;return Object(a.jsxs)("div",{children:[e&&Object(a.jsx)(BAe,{onClose:this.hideModal,isOpen:!0,job:t,room:{control:1}}),Object(a.jsx)("h4",{className:"text-center",children:" First things first..."}),Object(a.jsx)("p",{className:"text-center mt-4",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal,children:"Add control room"})})]})}}]),n}(p.PureComponent),zAe="WTAER_FORMS_MOISTURE_READING_FORM",qAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,s,l,u;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.job,o=r.beforeSubmit,i=r.afterSubmit,s=r.reset,l=r.modal,null===o||void 0===o||o(n),t.prev=2,t.next=5,n.id?_Y(a.id,n.id,n):wY(a.id,Object(c.a)(Object(c.a)({},n),{},{job_id:a.id}));case 5:return u=t.sent,null===i||void 0===i||i(!0,u),l||(n.id?uy.emit(Kg.JobRoomAreaUpdated,u):uy.emit(Kg.JobRoomAreaAdded,[u])),s(),t.abrupt("return",u);case 12:return t.prev=12,t.t0=t.catch(2),null===i||void 0===i||i(!1,n),t.abrupt("return",Mg(t.t0));case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.form=h.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.initialValues;t.surface_type_id&&(null===(e=document.getElementById("surface_type_id_"+t.surface_type_id))||void 0===e||e.scrollIntoView())}},{key:"render",value:function(){var e=this.props,t=e.surfaceTypes,n=e.handleSubmit,r=e.submitting,o=e.modal;return Object(a.jsxs)(a.Fragment,{children:[r&&!o&&Object(a.jsx)(av,{size:40}),(null===t||void 0===t?void 0:t.length)?Object(a.jsx)("form",{id:zAe,onSubmit:n(this.onSubmit),ref:this.form,children:Object(a.jsx)(yv.a,{name:"surface_type_id",validate:uv,component:rU,direction:"vertical",list:(null===t||void 0===t?void 0:t.map((function(e){return{value:e.id+"",label:e.name}})))||[]})}):Object(a.jsx)("div",{className:"alert alert-primary m-0",children:"Surface types must be added before surface areas can be taken."})]})}}]),n}(p.PureComponent),WAe=Object(LO.compose)(Object(b.b)((function(e){return{surfaceTypes:e.waterForm.surfaceTypes}})),Object(Gj.a)({form:zAe,enableReinitialize:!0}))(qAe);function HAe(){var e=Object(f.a)(["\n  .invalid-feedback{position:absolute;top:-25px;}\n  .form-group{margin:0;}\n  .radio-list-item-wrapper{width:100%;margin:0;padding:.5rem 1.25em;}\n  .radio-list-item-wrapper:not(:last-child){border-bottom: 1px solid ",";}\n  .radio-list-item-wrapper{cursor: pointer;}\n  .radio-list-item-wrapper:hover{background-color: ",";}\n  .radio-list-item-wrapper.checked{background-color: ",";}\n"]);return HAe=function(){return e},e}var GAe=x.default.div(HAe(),y.gray2,y.gray0,y.green3),YAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).savedAreas=[],e.state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(t,n){if(e.setState({submitting:!1}),t){var r=e.props,a=r.area,o=r.onClose;(null===a||void 0===a?void 0:a.id)?(uy.emit(Kg.JobRoomAreaUpdated,n),o()):(e.savedAreas.push(n),e.forceUpdate())}},e.renderModalBody=function(t){return Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("div",{className:"card-body p-0",children:Object(a.jsx)(GAe,{children:Object(a.jsx)(WAe,{job:e.props.job,initialValues:t,modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})})})})},e.onClose=function(){var t=e.props.onClose;e.savedAreas.length&&uy.emit(Kg.JobRoomAreaAdded,e.savedAreas),e.savedAreas=[],t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.moistureAreas,n=e.area,r=e.isOpen,o=e.title,i=this.state.submitting,s=null===n||void 0===n?void 0:n.name;if(!n)if((null===t||void 0===t?void 0:t.length)||this.savedAreas.length){var l=j()((t||[]).concat(this.savedAreas)).sortBy("name").last().name;s=String.fromCharCode(l.charCodeAt(0)+1)}else s="A";return Object(a.jsx)(vO,{isOpen:r,children:Object(a.jsx)(PO,{onClose:this.onClose,loading:i,title:o||(n?"Edit":"Add a new")+" surface area: "+s,body:this.renderModalBody(Object(c.a)(Object(c.a)({},n),{},{name:s})),scrollY:!0,closeCaption:"Done",footer:Object(a.jsx)("button",{type:"submit",form:zAe,className:"btn btn-primary",children:(null===n||void 0===n?void 0:n.id)?"Save":"Save & Add New"})})})}}]),n}(p.PureComponent),QAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.job,r=t.locked;return Object(a.jsxs)("div",{className:"print-hide",children:[e&&Object(a.jsx)(YAe,{onClose:this.hideModal,isOpen:!0,job:n,moistureAreas:[]}),Object(a.jsx)("h4",{className:"text-center",children:"Next, let's setup your control surface areas."}),Object(a.jsx)("p",{className:"text-center mt-4",children:!r&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal,children:"Add areas"})})]})}}]),n}(p.PureComponent),KAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.readings=[],e.submitAllForms=function(){e.setState({submitting:!0}),e.readings=[];var t=[],n=e.props,r=n.job,a=n.dispatch,o=n.moistureAreas,i=n.onClose;t.push(a(Object(xv.c)(TAe))),null===o||void 0===o||o.forEach((function(e){t.push(a(Object(xv.c)(NAe+e.id)))})),Promise.all(t).then(Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.content.current.getElementsByClassName("invalid-feedback").length){t.next=13;break}return t.prev=2,t.next=5,Promise.all(e.readings.map((function(e){return xY(r.id,e)})));case 5:n=t.sent,i(),uy.emit(Kg.JobReadingsAdded,n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:e.setState({submitting:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))))},e.onSubmitReading=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n.mc||n.rh&&n.temp)&&e.readings.push(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.content=h.a.createRef(),e.initialValues={group_at:qf()()},e.renderModalBody=function(){var t=e.props,n=t.job,r=t.room,o=t.moistureReading,i=t.airReading,s=t.moistureAreas;return Object(a.jsxs)("div",{ref:e.content,children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Air Readings"})}),Object(a.jsx)(RAe,{job:n,form:TAe,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),i),{},{job_room_id:null===r||void 0===r?void 0:r.id}),modal:!0,onSubmit:e.onSubmitReading}),Object(a.jsx)("hr",{}),Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Moisture Readings"})}),(null===s||void 0===s?void 0:s.length)?s.map((function(t){return Object(a.jsx)(AAe,{job:n,form:NAe+t.id,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),o),{},{job_moisture_area_id:t.id,job_room_id:null===r||void 0===r?void 0:r.id}),moistureArea:t,modal:!0,onSubmit:e.onSubmitReading})})):Object(a.jsx)("div",{className:"alert alert-primary",children:"Room areas must be added from the control tab before moisture readings can be taken."})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.room,i=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{scrollY:!0,onClose:r,loading:i,title:n||"Add a new reading"+(o?": "+o.name:""),body:this.renderModalBody(),footer:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.submitAllForms,children:"Save"})})})}}]),n}(p.PureComponent),ZAe=Object(LO.compose)(Object(b.b)())(KAe),XAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).timeAgo=function(){return qf()(e.props.date).fromNow()},e.setTimeAgo=function(){e.setState({dateStr:e.timeAgo()})},e.state={dateStr:e.timeAgo()},e.intervalId=null,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.intervalId=setInterval(this.setTimeAgo,2e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state.dateStr,t=this.props.date;return Object(a.jsx)("span",{title:qf()(t).format(Uj),children:e})}}]),n}(p.PureComponent),$Ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={gridState:{data:e.props.data||[],scrollable:"none",sortable:!1}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.data!==this.props.data){var t=this.state.gridState;t.data=this.props.data,this.setState({gridState:Object(c.a)({},t)})}}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.color,r=e.readings;e.locked;return Object(a.jsxs)("div",{className:"card".concat(n?" card-".concat(n):""),children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("strong",{children:t||"Air Reading"})}),Object(a.jsx)("div",{className:"card-body",children:this.state.gridState.data.length?Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{children:[Object(a.jsx)(rw.b,{field:"group_at",title:"Taken",cell:function(e){return Object(a.jsx)("td",{children:Object(a.jsx)(XAe,{date:e.dataItem.group_at})})}}),Object(a.jsx)(rw.b,{field:"rh",title:"R/H %",cell:function(e){var t,n,o,i,c,s,l,u,d;return Object(a.jsxs)("td",{children:[null===(t=+e.dataItem.rh)||void 0===t?void 0:t.toFixed(2),"%",(null===r||void 0===r||null===(n=r.controlRoom)||void 0===n?void 0:n.air)?Object(a.jsxs)("span",{className:"badge badge-primary ml-2",children:[(null===(o=+(null===r||void 0===r||null===(i=r.controlRoom)||void 0===i||null===(c=i.air)||void 0===c?void 0:c.rh))||void 0===o?void 0:o.toFixed(2))||"--","%"]}):null,(null===r||void 0===r||null===(s=r.outsideRoom)||void 0===s?void 0:s.air)?Object(a.jsxs)("span",{className:"badge badge-success ml-2",children:[(null===(l=+(null===r||void 0===r||null===(u=r.outsideRoom)||void 0===u||null===(d=u.air)||void 0===d?void 0:d.rh))||void 0===l?void 0:l.toFixed(2))||"--","%"]}):null]})}}),Object(a.jsx)(rw.b,{field:"temp",title:"Temp.",cell:function(e){var t,n,o,i,c,s,l,u,d;return Object(a.jsxs)("td",{children:[null===(t=+e.dataItem.temp)||void 0===t?void 0:t.toFixed(2),(null===r||void 0===r||null===(n=r.controlRoom)||void 0===n?void 0:n.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(o=+(null===r||void 0===r||null===(i=r.controlRoom)||void 0===i||null===(c=i.air)||void 0===c?void 0:c.temp))||void 0===o?void 0:o.toFixed(2))||"--"}):null,(null===r||void 0===r||null===(s=r.outsideRoom)||void 0===s?void 0:s.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(l=+(null===r||void 0===r||null===(u=r.outsideRoom)||void 0===u||null===(d=u.air)||void 0===d?void 0:d.temp))||void 0===l?void 0:l.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(rw.b,{field:"gpk",title:"GPK",cell:function(e){var t,n,o,i,c;return Object(a.jsxs)("td",{children:[null===(t=pY(e.dataItem))||void 0===t?void 0:t.toFixed(2),(null===r||void 0===r||null===(n=r.controlRoom)||void 0===n?void 0:n.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(o=pY(r.controlRoom.air))||void 0===o?void 0:o.toFixed(2))||"--"}):null,(null===r||void 0===r||null===(i=r.outsideRoom)||void 0===i?void 0:i.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(c=pY(r.outsideRoom.air))||void 0===c?void 0:c.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(rw.b,{field:"user",title:"Taken By",cell:function(e){var t;return Object(a.jsx)("td",{children:(null===(t=e.dataItem.user)||void 0===t?void 0:t.full_name)||"unknown"})}})]})):Object(a.jsx)("div",{className:"text-center",children:"No readings have been taken"})})]})}}]),n}(p.PureComponent),eTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(t,n){e.setState({submitting:!1}),t&&e.props.onClose()},e.initialValues={group_at:qf()()},e.renderModalBody=function(){var t=e.props,n=t.reading,r=t.job,o=t.room,i=t.moistureArea;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Moisture Readings"})}),Object(a.jsx)(AAe,{job:r,moistureArea:i,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),n),{},{job_room_id:null===o||void 0===o?void 0:o.id}),modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.reading,i=e.room,c=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{onClose:r,loading:c,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add a new")+" reading"+(i?": "+i.name:""),body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:NAe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function tTe(){var e=Object(f.a)(["\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n    color: ",";\n    path{stroke: ",";}\n  }\n"]);return tTe=function(){return e},e}var nTe,rTe=x.default.span(tTe(),y.blue2,y.blue2);!function(e){e[e.MOISTURE_AREA=0]="MOISTURE_AREA",e[e.MOISTURE_READING=1]="MOISTURE_READING"}(nTe||(nTe={}));var aTe,oTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).hydrateData=function(t){if(!t)return e.props.allowBlank?[{}]:[];var n=[];return j.a.forEach(t,(function(e,t){n.push({group_at:t,readings:e})})),n},e.state={gridState:{data:e.hydrateData(e.props.data),scrollable:"scrollable",sortable:!1}},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.moistureAreas,i=e.props,s=i.job,l=i.room;switch(n){case nTe.MOISTURE_READING:return Object(a.jsx)(eTe,Object(c.a)({job:s,room:l,onClose:e.hideModal,isOpen:!0},r));case nTe.MOISTURE_AREA:return Object(a.jsx)(YAe,Object(c.a)({job:s,moistureAreas:o,onClose:e.hideModal,isOpen:!0},r))}return null},e.deleteArea=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.job,i=r.dispatch,n.next=3,i(Sw("Confirm","Delete Surface Area!",Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this reading area?"}),Object(a.jsx)("p",{children:"All readings for this area will also be removed."})]})));case 3:if(!n.sent){n.next=13;break}return e.setState({working:!0}),n.prev=6,n.next=9,kY(o.id,t.id);case 9:uy.emit(Kg.JobRoomAreaDeleted,t);case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[6,,10,13]])})))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.data!==this.props.data){var t=this.state.gridState;t.data=this.hydrateData(this.props.data),this.setState({gridState:Object(c.a)({},t)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.color,o=t.moistureAreas,i=t.room,s=t.readings,l=t.locked,u=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{className:"card".concat(r?" card-".concat(r):""),children:[u&&Object(a.jsx)(av,{size:40}),Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("strong",{children:n||"Moisture Reading"})}),Object(a.jsx)("div",{className:"card-body",children:(null===o||void 0===o?void 0:o.length)?Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{children:[Object(a.jsx)(rw.d,{children:Object(a.jsx)("div",{className:"text-left pl-5 ml-5",children:"No readings have been taken"})}),Object(a.jsx)(rw.b,{field:"id",title:"Taken",width:"200px",cell:function(e){return Object(a.jsx)("td",{children:e.dataItem.group_at?Object(a.jsx)(XAe,{date:e.dataItem.group_at}):null})}}),o.map((function(t){return Object(a.jsx)(rw.b,{width:"130px",headerCell:function(){var n,r;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(a.jsx)("strong",{children:t.name}),!l&&i.control&&Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)(rTe,{className:"mr-3",children:Object(a.jsx)(J3,{color:y.black0,hoverColor:y.red1,name:Ef.Trash,size:12,onClick:e.deleteArea(t)})}),Object(a.jsx)(rTe,{children:Object(a.jsx)(Ff,{name:Ef.Pencil,size:12,onClick:e.showModal(nTe.MOISTURE_AREA,{area:Object(c.a)(Object(c.a)({},t),{},{surface_type_id:(null===(n=t.surface_type)||void 0===n?void 0:n.id)+""})})})})]})]}),Object(a.jsx)("div",{className:"text-sm text-wrap",children:(null===(r=t.surface_type)||void 0===r?void 0:r.name)||"Not Set"})]})},headerClassName:"align-top",cell:function(n){var r,o,i,c;return Object(a.jsx)("td",{children:(null===(r=n.dataItem.readings)||void 0===r?void 0:r[t.id])?Object(a.jsxs)("div",{children:[n.dataItem.readings[t.id].mc||"--","%",(null===s||void 0===s||null===(o=s.controlRoom)||void 0===o?void 0:o.moisture)?Object(a.jsxs)("span",{className:"badge badge-warning ml-2",children:[(null===s||void 0===s||null===(i=s.controlRoom)||void 0===i||null===(c=i.moisture[t.id])||void 0===c?void 0:c.mc)||"--","%"]}):null]}):!l&&Object(a.jsx)(rTe,{className:"text-primary print-hide",onClick:e.showModal(nTe.MOISTURE_READING,{moistureArea:t,reading:{job_moisture_area_id:t.id,group_at:n.dataItem.group_at||qf()()}}),children:"Add reading"})})}},t.id)}))]})):Object(a.jsx)("div",{className:"text-center",children:"No surface area id added"})})]})]})}}]),n}(p.PureComponent),iTe=Object(LO.compose)(Object(b.b)())(oTe);!function(e){e[e.CONTROL_ROOM=0]="CONTROL_ROOM",e[e.AIR_READING=1]="AIR_READING",e[e.MOISTURE_AREA=2]="MOISTURE_AREA",e[e.MOISTURE_READING=3]="MOISTURE_READING",e[e.COMBINED_READING=4]="COMBINED_READING"}(aTe||(aTe={}));var cTe,sTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.controlRoom,l=o.moistureAreas;switch(n){case aTe.CONTROL_ROOM:return Object(a.jsx)(BAe,Object(c.a)({job:i,onClose:e.hideModal,isOpen:!0},r));case aTe.MOISTURE_AREA:return Object(a.jsx)(YAe,Object(c.a)({job:i,moistureAreas:l,onClose:e.hideModal,isOpen:!0},r));case aTe.COMBINED_READING:return Object(a.jsx)(ZAe,Object(c.a)({job:i,moistureAreas:l,room:s,onClose:e.hideModal,isOpen:!0},r))}return null},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.job,o=n.readings,i=n.controlRoom,c=n.moistureAreas,s=n.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("div",{className:"mb-2 d-flex justify-content-between align-items-center",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("strong",{className:"text-uppercase",children:[i.name," Control Readings"]})}),!s&&Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsxs)(QG.e,{children:[Object(a.jsx)(QG.h,{caret:!0,color:"primary",outline:!0,children:"Options"}),Object(a.jsx)(QG.g,{basic:!0,right:!0,children:Object(a.jsx)(QG.f,{onClick:this.showModal(aTe.CONTROL_ROOM,{room:i}),children:"Edit Room Details"})})]})})]}),!s&&Object(a.jsxs)("div",{className:"mb-3 print-hide",children:[!((null===(e=o.controlRoom)||void 0===e?void 0:e.air)||(null===(t=o.controlRoom)||void 0===t?void 0:t.moisture))&&Object(a.jsx)(QG.a,{color:"primary",className:"mr-3",onClick:this.showModal(aTe.COMBINED_READING),children:"Add Reading"}),Object(a.jsx)(QG.a,{color:"primary",outline:!0,onClick:this.showModal(aTe.MOISTURE_AREA),children:"Add Moisture Surface Area"})]}),i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($Ae,{color:"primary",data:o.air[i.id],locked:s}),Object(a.jsx)("br",{}),Object(a.jsx)(iTe,{color:"warning",moistureAreas:c,data:o.moisture[i.id],allowBlank:!0,job:r,room:i,locked:s})]})]})})]})}}]),n}(p.PureComponent);!function(e){e[e.AIR_READING=0]="AIR_READING"}(cTe||(cTe={}));var lTe,uTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.outsideRoom;switch(n){case cTe.AIR_READING:return Object(a.jsx)(DAe,Object(c.a)({job:i,room:s,onClose:e.hideModal,isOpen:!0},r))}return null},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.outsideRoom,n=e.readings,r=e.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"card-title",children:Object(a.jsx)("strong",{children:"OUTSIDE CONTROL READINGS"})}),Object(a.jsx)("div",{className:"mb-3 print-hide",children:!r&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(cTe.AIR_READING),children:"Add Reading"})}),Object(a.jsx)($Ae,{color:"success",title:"Outside",data:n.air[null===t||void 0===t?void 0:t.id],locked:r})]})})]})}}]),n}(p.PureComponent),dTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlRoom,n=(e.outsideRoom,e.readings),r=e.moistureAreas;return Object(a.jsxs)(PQ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsx)("strong",{children:"Rooms: Control Readings"})}),Object(a.jsx)(PQ,{children:Object(a.jsxs)("div",{className:"pr-4 pb-4",children:[!t&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(JAe,Object(c.a)({},this.props))}),t&&Object(a.jsxs)(a.Fragment,{children:[(null===r||void 0===r?void 0:r.length)?null:Object(a.jsx)(QAe,Object(c.a)({},this.props)),t&&!(null===r||void 0===r?void 0:r.length)&&!n.outsideRoom&&Object(a.jsx)("hr",{className:"mt-5"}),t&&!n.outsideRoom?Object(a.jsx)(MAe,Object(c.a)({},this.props)):null,(null===r||void 0===r?void 0:r.length)?Object(a.jsx)(sTe,Object(c.a)({},this.props)):null,(null===r||void 0===r?void 0:r.length)&&n.outsideRoom?Object(a.jsx)("br",{}):null,n.outsideRoom?Object(a.jsx)(uTe,Object(c.a)({},this.props)):null]})]})})]})}}]),n}(p.PureComponent),pTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.airMovers,n=e.dehums,r=e.preStartCheckClass;return Object(a.jsxs)("div",{className:"d-flex text-uppercase",children:[Object(a.jsx)("div",{className:"alert alert-primary mb-0",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:"Air-Movers"})}),Object(a.jsxs)("div",{className:"ml-5 text-center",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:t.required}),Object(a.jsx)("span",{className:"ml-3",children:"Required"})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:t.installed}),Object(a.jsx)("span",{className:"ml-3",children:"Installed"})]})]})]})}),Object(a.jsx)("div",{className:"ml-3 alert alert-warning mb-0",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("strong",{children:["De-HUMS (Class ",r,")"]})}),Object(a.jsxs)("div",{className:"ml-5 text-center",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:n.required}),Object(a.jsx)("span",{className:"ml-3",children:"Required"})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:n.installed}),Object(a.jsx)("span",{className:"ml-3",children:"Installed"})]})]})]})})]})}}]),n}(p.PureComponent),hTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.nonControlRooms,scrollable:"none",sortable:!1}},e.onRowClick=function(t){var n=t.dataItem,r=e.props,a=r.job;r.history.push("/jobs/".concat(a.id,"/water-form/rooms/").concat(n.id))},e.renderRow=function(t,n){var r=e.props.readings,o=n.dataItem;return r.air[o.id]?t:Object(a.jsxs)("tr",Object(c.a)(Object(c.a)({},t.props),{},{children:[Object(a.jsx)("td",{children:o.name}),Object(a.jsx)("td",{colSpan:4,onClick:function(){return e.onRowClick({dataItem:o})},children:Object(a.jsx)("i",{children:"No readings have been taken"})})]}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.nonControlRooms!==this.props.nonControlRooms){var t=this.state.gridState;t.data=this.props.nonControlRooms,this.setState({gridState:Object(c.a)({},t)})}}},{key:"render",value:function(){var e=this,t=this.props.readings;return Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{rowRender:this.renderRow,onRowClick:this.onRowClick,children:[Object(a.jsx)(rw.b,{field:"name",title:"Room"}),Object(a.jsx)(rw.b,{field:"rh",title:"R/H %",cell:function(n){var r,o,i,c,s,l,u,d,p,h,b=n.dataItem;Object(Rm.a)(n,["dataItem"]);return Object(a.jsxs)("td",{onClick:function(){return e.onRowClick({dataItem:b})},children:[(null===(r=+(null===(o=j.a.last(t.air[b.id]))||void 0===o?void 0:o.rh))||void 0===r?void 0:r.toFixed(2))||"--","%",(null===t||void 0===t||null===(i=t.controlRoom)||void 0===i?void 0:i.air)?Object(a.jsxs)("span",{className:"badge badge-primary ml-2",children:[(null===(c=+(null===t||void 0===t||null===(s=t.controlRoom)||void 0===s||null===(l=s.air)||void 0===l?void 0:l.rh))||void 0===c?void 0:c.toFixed(2))||"--","%"]}):null,(null===t||void 0===t||null===(u=t.outsideRoom)||void 0===u?void 0:u.air)?Object(a.jsxs)("span",{className:"badge badge-success ml-2",children:[(null===(d=+(null===t||void 0===t||null===(p=t.outsideRoom)||void 0===p||null===(h=p.air)||void 0===h?void 0:h.rh))||void 0===d?void 0:d.toFixed(2))||"--","%"]}):null]})}}),Object(a.jsx)(rw.b,{field:"temp",title:"Temp.",cell:function(n){var r,o,i,c,s,l,u,d,p,h,b=n.dataItem;return Object(a.jsxs)("td",{onClick:function(){return e.onRowClick({dataItem:b})},children:[(null===(r=+(null===(o=j.a.last(t.air[b.id]))||void 0===o?void 0:o.temp))||void 0===r?void 0:r.toFixed(2))||"--",(null===t||void 0===t||null===(i=t.controlRoom)||void 0===i?void 0:i.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(c=+(null===t||void 0===t||null===(s=t.controlRoom)||void 0===s||null===(l=s.air)||void 0===l?void 0:l.temp))||void 0===c?void 0:c.toFixed(2))||"--"}):null,(null===t||void 0===t||null===(u=t.outsideRoom)||void 0===u?void 0:u.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(d=+(null===t||void 0===t||null===(p=t.outsideRoom)||void 0===p||null===(h=p.air)||void 0===h?void 0:h.temp))||void 0===d?void 0:d.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(rw.b,{field:"gpk",title:"GPK",cell:function(n){var r,o,i,c,s,l=n.dataItem;return Object(a.jsxs)("td",{onClick:function(){return e.onRowClick({dataItem:l})},children:[null===(r=pY(j.a.last(t.air[l.id])))||void 0===r?void 0:r.toFixed(2),(null===t||void 0===t||null===(o=t.controlRoom)||void 0===o?void 0:o.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(i=pY(t.controlRoom.air))||void 0===i?void 0:i.toFixed(2))||"--"}):null,(null===t||void 0===t||null===(c=t.outsideRoom)||void 0===c?void 0:c.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(s=pY(t.outsideRoom.air))||void 0===s?void 0:s.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(rw.b,{field:"id",title:"Taken By",cell:function(e){var n,r,o=e.dataItem;return Object(a.jsx)("td",{children:(null===(n=j.a.last(t.air[o.id]))||void 0===n||null===(r=n.user)||void 0===r?void 0:r.full_name)||"unknown"})}})]}))}}]),n}(p.PureComponent),bTe=Object(v.g)(hTe),fTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props.nonControlRooms;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"card-title",children:Object(a.jsx)("strong",{children:"LAST READINGS"})}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("strong",{children:"Affected Rooms"})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)(bTe,Object(c.a)({},this.props))})]})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(pTe,{data:{airMovers:{required:j.a.sumBy(t,"params.airMovers.required"),installed:0},dehums:{required:j.a.sumBy(t,"params.dehums.required"),installed:0},preStartCheckClass:null===(e=t[0].params)||void 0===e?void 0:e.preStartCheckClass}})]})}}]),n}(p.PureComponent);!function(e){e[e.ROOM=0]="ROOM",e[e.COMBINED_READING=1]="COMBINED_READING",e[e.AIR_READING=2]="AIR_READING"}(lTe||(lTe={}));var mTe,jTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.history,l=o.controlRoom,u=o.outsideRoom,d=o.moistureAreas;switch(n){case lTe.ROOM:return Object(a.jsx)(BAe,Object(c.a)({job:i,onClose:e.hideModal,isOpen:!0,afterSubmit:function(e){s.push("/jobs/".concat(i.id,"/water-form/rooms/").concat(e.id))}},r));case lTe.COMBINED_READING:return Object(a.jsx)(ZAe,Object(c.a)({job:i,moistureAreas:d,room:l,onClose:e.hideModal,isOpen:!0},r));case lTe.AIR_READING:return Object(a.jsx)(DAe,Object(c.a)({job:i,room:u,onClose:e.hideModal,isOpen:!0},r))}return null},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.moistureAreas,n=e.nonControlRooms,r=e.readings,o=e.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{children:[!(null===t||void 0===t?void 0:t.length)&&Object(a.jsx)(QAe,Object(c.a)({},this.props)),(null===t||void 0===t?void 0:t.length)>0&&(!r.controlRoom||!r.outsideRoom)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h4",{className:"text-center",children:["Well done! Now you can add your",!r.controlRoom&&Object(a.jsx)(a.Fragment,{children:" air, moisture"}),!(r.controlRoom||r.outsideRoom)&&Object(a.jsx)(a.Fragment,{children:" and"}),!r.outsideRoom&&Object(a.jsx)(a.Fragment,{children:" outside"}),Object(a.jsx)(a.Fragment,{children:" control readings."})]}),!o&&Object(a.jsxs)("p",{className:"text-center mt-4",children:[!r.controlRoom&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(lTe.COMBINED_READING),children:"Add air/moisture reading"}),!(r.controlRoom||r.outsideRoom)&&Object(a.jsx)("span",{className:"mx-5"}),!r.outsideRoom&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(lTe.AIR_READING),children:"Add outside reading"})]})]}),!(null===n||void 0===n?void 0:n.length)&&r.controlRoom&&r.outsideRoom&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{className:"text-center",children:"Awesome! You're on a roll, let's add your first affected room."}),!o&&Object(a.jsx)("p",{className:"text-center mt-4",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(lTe.ROOM),children:"Add New Room"})})]}),(null===n||void 0===n?void 0:n.length)>0&&Object(a.jsx)(fTe,Object(c.a)({},this.props))]})]})}}]),n}(p.PureComponent),vTe=Object(v.g)(jTe),OTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.pad=null,e.clearAll=function(){var t;null===(t=e.pad)||void 0===t||t.clear()},e.revert=function(){var t;e.clearAll(),null===(t=e.pad)||void 0===t||t.fromDataURL(e.props.room.floor_plan||"")},e.savePlan=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,r=e.props,a=r.job,o=r.room,i=null===(n=e.pad)||void 0===n?void 0:n._toDataURL(),t.next=6,WY(a.id,o.id,{floor_plan:i});case 6:c=t.sent,o.floor_plan=i||c.floor_plan,uy.emit(Kg.JobRoomUpdated,o);case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,,9,12]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.room,r=t.locked,o=this.state.working;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"h-100 w-100 d-flex flex-column",children:[o&&Object(a.jsx)(av,{size:40}),!r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(IG,{toolbar:!1,onRender:function(t){e.pad=t,setTimeout(e.revert,1)}})}),Object(a.jsxs)("div",{className:"py-3",children:[Object(a.jsx)("button",{className:"btn btn-primary mr-3",onClick:this.savePlan,children:"Save"}),Object(a.jsx)("button",{className:"btn btn-outline-dark mr-3",onClick:this.revert,disabled:!n.floor_plan,children:"Revert to Last Saved"}),Object(a.jsx)("button",{className:"btn btn-dark",onClick:this.clearAll,children:"Clear All"})]})]}),r&&n.floor_plan&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("img",{src:n.floor_plan,alt:"Floor plan",style:{maxHeight:"100%",maxWidth:"100%"}})})]})})}}]),n}(p.PureComponent),gTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(OTe,Object(c.a)({},this.props))}}]),n}(p.PureComponent),xTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlRoom,n=e.url,r=e.match.params.tab;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto",children:[Object(a.jsxs)(QG.i,{className:"nav-tabs mr-4",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{exact:!0,className:"nav-link",to:"".concat(n,"/summary"),role:"tab",children:"Overview"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(n,"/floor-plan"),role:"tab",children:"Building Floor Plan"})})]}),Object(a.jsxs)(QG.k,{activeItem:r,className:"position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:[Object(a.jsx)(QG.l,{tabId:"summary",role:"tabpanel",children:Object(a.jsx)(vTe,Object(c.a)({},this.props))}),"floor-plan"===r&&Object(a.jsx)(QG.l,{tabId:"floor-plan",role:"tabpanel",className:"h-100 w-100",children:Object(a.jsx)(gTe,Object(c.a)(Object(c.a)({},this.props),{},{room:t}))})]})]})}}]),n}(p.PureComponent),yTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).RoomsOverviewTabs=function(t){return Object(a.jsx)(xTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),{},{url:e.props.match.url}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlRoom,n=e.match.url;return Object(a.jsxs)(PQ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsx)("strong",{children:"Rooms: Overview and Floor Plan"})}),!t&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(JAe,Object(c.a)({},this.props))}),t&&Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(n,"/:tab"),component:this.RoomsOverviewTabs}),Object(a.jsx)(v.a,{to:"".concat(n,"/summary")})]})]})}}]),n}(p.PureComponent);!function(e){e[e.ROOM=0]="ROOM",e[e.COMBINED_READING=1]="COMBINED_READING"}(mTe||(mTe={}));var wTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.room,l=o.moistureAreas;switch(n){case mTe.COMBINED_READING:return Object(a.jsx)(ZAe,Object(c.a)({job:i,room:s,moistureAreas:l,onClose:e.hideModal,isOpen:!0},r));case mTe.ROOM:return Object(a.jsx)(BAe,Object(c.a)({job:i,room:s,onClose:e.hideModal,isOpen:!0},r))}return null},e.deleteRoom=Object(Um.a)(Fm.a.mark((function t(){var n,r,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,o=n.room,i=n.dispatch,c=n.history,t.next=3,i(Sw("Confirm","Delete Room!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to delete this room?"})));case 3:if(!t.sent){t.next=16;break}return e.setState({working:!0}),t.prev=6,t.next=9,OY(r.id,o.id);case 9:c.replace("/jobs/".concat(r.id,"/water-form/rooms")),uy.emit(Kg.JobRoomDeleted,o),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),e.setState({working:!1});case 16:case"end":return t.stop()}}),t,null,[[6,13]])}))),e.onFileInputChange=function(t){var n;(null===(n=t.target.files)||void 0===n?void 0:n.length)>0&&(e.setState({working:!0}),e.uploadPhotos(t.target.files),t.target.value="")},e.uploadPhotos=function(t){var n=[],r=["png","jpeg","jpg"],o=e.props,i=o.job,c=o.room;j.a.forEach(t,(function(e){var t=(e.name.split(".").pop()||"").toLowerCase();if(r.includes(t)){var o=new FormData;o.append("file",e),n.push(VV.uploadPhoto(o).then((function(e){return ly.attachPhoto(i.id,e.data.id,{description:c.name})})))}else Qm(Vm.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",t]})," is not supported!"]}))})),0===n.length?e.setState({working:!1}):Promise.all(n).then((function(){Qm(Vm.Success,Object(a.jsx)(a.Fragment,{children:"Photos uploaded successfully"}))})).finally((function(){e.setState({working:!1})}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r,o=this.props,i=o.readings,s=o.room,l=o.job,u=o.moistureAreas,d=o.locked,p=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{children:[p&&Object(a.jsx)(av,{size:40}),i.air[s.id]||i.moisture[s.id]?null:Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)("h4",{className:"text-center",children:"We haven't got any readings for this room yet."}),Object(a.jsx)("p",{className:"text-center mt-3",children:!d&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(mTe.COMBINED_READING),children:"Add reading"})}),Object(a.jsx)("hr",{})]}),!d&&Object(a.jsx)("div",{className:"d-flex justify-content-between mb-4 print-hide",children:Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(a.jsxs)("label",{className:"btn btn-outline-primary mb-0",children:["Upload Photos",Object(a.jsx)("input",{type:"file",multiple:!0,className:"d-none",onChange:this.onFileInputChange})]}),Object(a.jsx)("button",{className:"btn btn-primary ml-2",onClick:this.showModal(mTe.ROOM,{room:(r=s,Object(c.a)(Object(c.a)({},r),{},{trims_required:r.trims_required?"1":"0",underlay_required:r.underlay_required?"1":"0",restorable:r.restorable?"1":"0"}))}),children:"Edit Room Details"}),Object(a.jsx)("button",{className:"btn btn-danger ml-2",onClick:this.deleteRoom,children:"Delete Room"})]})})}),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Dimensions (L x W x H):"}),Object(a.jsx)("div",{className:"col",children:s.dimensions_length&&s.dimensions_width&&s.dimensions_height?Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s.dimensions_length.toFixed(1),"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_width.toFixed(1),"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_height.toFixed(1),"m"]})]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Affected Area (L x W):"}),Object(a.jsx)("div",{className:"col",children:s.dimensions_affected_length&&s.dimensions_affected_width?Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s.dimensions_affected_length.toFixed(1),"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_affected_width.toFixed(1),"m"]})]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Restorable:"}),Object(a.jsx)("div",{className:"col",children:s.restorable?Object(a.jsx)("span",{children:"Yes"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"No"}),s.non_restorable_reason&&Object(a.jsxs)("span",{className:"ml-3",children:["( ",s.non_restorable_reason.name," )"]})]})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Floor Type:"}),Object(a.jsx)("div",{className:"col",children:s.flooring_type?Object(a.jsx)("span",{children:s.flooring_type.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Sub-Floor Type:"}),Object(a.jsx)("div",{className:"col",children:s.flooring_subtype?Object(a.jsx)("span",{children:s.flooring_subtype.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]})]}),Object(a.jsx)("hr",{}),(null===(e=s.flooring_type)||void 0===e?void 0:e.id)===VTe.FLOOR_TYPE.CARPET?Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Carpet Type:"}),Object(a.jsx)("div",{className:"col",children:s.carpet_type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:s.carpet_type.name})," ( Age: ",(null===(t=s.carpet_age)||void 0===t?void 0:t.name)||"N/A"," )"]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Carpet Construction Type:"}),Object(a.jsx)("div",{className:"col",children:s.carpet_construction_type?Object(a.jsx)(a.Fragment,{children:s.carpet_construction_type.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Carpet Face Type:"}),Object(a.jsx)("div",{className:"col",children:s.carpet_face_fibre?Object(a.jsx)(a.Fragment,{children:s.carpet_face_fibre.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsx)("hr",{})]}):null,Object(a.jsxs)("section",{children:[(null===(n=s.flooring_type)||void 0===n?void 0:n.id)===VTe.FLOOR_TYPE.CARPET?Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Underlay Type:"}),Object(a.jsx)("div",{className:"col",children:s.underlay_type?Object(a.jsx)(a.Fragment,{children:s.underlay_type.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}):null,Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Underlay Required (L x W):"}),Object(a.jsx)("div",{className:"col",children:s.underlay_required?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Yes"}),Object(a.jsx)("span",{className:"ml-3",children:s.dimensions_underlay_length&&s.dimensions_underlay_width?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[s.dimensions_underlay_length,"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_underlay_width,"m"]})]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}):Object(a.jsx)(a.Fragment,{children:"No"})})]}),Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Trims Required:"}),Object(a.jsx)("div",{className:"col",children:s.trims_required?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Yes"}),Object(a.jsx)("span",{className:"ml-3",children:s.trim_type||"N/A"})]}):Object(a.jsx)(a.Fragment,{children:"No"})})]})]})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(pTe,{data:s.params}),i.air[s.id]||i.moisture[s.id]?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"card-title",children:Object(a.jsx)("strong",{children:"AFFECTED READINGS"})}),!d&&Object(a.jsx)("div",{className:"d-flex mb-3",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(mTe.COMBINED_READING),children:"Add Reading"})}),Object(a.jsx)($Ae,{locked:d,data:i.air[s.id]||[],readings:i,title:"Air Readings"}),u.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)(iTe,{locked:d,data:i.moisture[s.id],readings:i,title:"Moisture Readings",job:l,room:s,moistureAreas:u})]}):null]})})]}):null]})]})}}]),n}(p.PureComponent),_Te=Object(LO.compose)(Object(b.b)())(wTe);function kTe(){var e=Object(f.a)(["\n  .checkbox-list-wrapper{max-height:unset; overflow:unset;}\n  .card .invalid-feedback{position:absolute;top:-20px;}\n  .card:not(.idx-0) .invalid-feedback{display:none !important;}\n  .form-group{margin:0;}\n  .checkbox-item{width:100%;margin:0;padding: .5rem 1.25em;}\n  .checkbox-item:not(:last-child){border-bottom: 1px solid ",";}\n  .checkbox-item{cursor: pointer;}\n  .checkbox-item:hover{background-color: ",";}\n  .checkbox-item.checked{background-color: ",";}\n  textarea{height: calc(1.5em + .75rem + 2px); resize: none;}\n"]);return kTe=function(){return e},e}var STe,CTe="WTAER_FORMS_ROOM_WORKS_FORM",NTe=x.default.form(kTe(),y.gray2,y.gray0,y.green3),ETe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={types:[],works:{},worksFiltered:{},selected:[]},e.loadWorks=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,t.next=4,zY(r,n);case 4:a=t.sent.data,o=j()(a).uniqBy("work_type_id").map("work_type").sortBy("position").value(),i=j()(a).sortBy(["other","work_category.position","position"]).groupBy("work_type_id").value(),(c=j.a.find(o,{name:"General"}))&&0===j.a.reject(i[c.id],"other").length&&(o=j.a.reject(o,c),delete i[c.id]),e.setState({types:o,works:i,worksFiltered:i});case 10:return t.prev=10,e.setState({working:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p,h,b,f;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,c=r.room,s=r.category,l=e.state,u=l.selected,d=l.works,null===a||void 0===a||a(n),t.prev=3,!u.length){t.next=16;break}return p=j()(d).flatMap().flatten().keyBy((function(e){return e._id||e.id})).value(),h=[],b=null,j.a.forEach(u,(function(e){!(b=p[e])||b.other&&!b.custom||h.push({id:b.id,custom:b.custom})})),t.next=11,LY(i.id,null===c||void 0===c?void 0:c.id,{work_category_id:s.id,works:h});case 11:f=t.sent,null===o||void 0===o||o(!0,f),uy.emit(Kg.JobWorkAdded,[c,f]),t.next=22;break;case 16:if(null===o||void 0===o||o(!1),!j.a.isEmpty(d)){t.next=21;break}return t.abrupt("return",Promise.reject(new Rg.a({service:"No work found for this service"})));case 21:return t.abrupt("return",Promise.reject(new Rg.a({work_id:"This field is required"})));case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(3),null===o||void 0===o||o(!1);case 27:return t.abrupt("return",!0);case 28:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e){return t.apply(this,arguments)}}(),e.cards={},e.onCustomWorkUpdate=function(t){return function(n){var r,a=n.currentTarget.value;t.custom=a;var o=e.state,i=o.works,s=o.selected,l=j.a.find(i[(null===(r=t.work_type)||void 0===r?void 0:r.id)||t.work_type],(function(e){return e.other&&e.work_category_id===t.work_category_id&&!e.custom&&e!==t}));if(a.trim()){if(!l){var u,d,p=j.a.cloneDeep(t);p.custom="",p._id=Date.now(),i[(null===(u=t.work_type)||void 0===u?void 0:u.id)||t.work_type].splice(j.a.indexOf(i[(null===(d=t.work_type)||void 0===d?void 0:d.id)||t.work_type],t)+1,0,p)}-1===j.a.indexOf(s,t._id||t.id)&&s.push(t._id||t.id)}else{if(l){var h,b;i[(null===(h=t.work_type)||void 0===h?void 0:h.id)||t.work_type].splice(j.a.indexOf(i[(null===(b=t.work_type)||void 0===b?void 0:b.id)||t.work_type],l),1);var f=j.a.indexOf(s,l._id||l.id);f>-1&&s.splice(f,1)}var m=j.a.indexOf(s,t._id||t.id);m>-1&&s.splice(m,1)}e.setState({works:Object(c.a)({},i),selected:s}),e.props.change("work_id",s)}},e.workLabel=function(t){var n=e.props.category;return t.other?Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("strong",{className:"mr-3",children:[t.name,t.work_category.id!==n.id&&Object(a.jsxs)(a.Fragment,{children:[" (",t.work_category.name,")"]}),":"]}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)("textarea",{className:"form-control",value:t.custom||"",onChange:e.onCustomWorkUpdate(t)})})]}):Object(a.jsxs)(a.Fragment,{children:[t.name,t.work_category.id!==n.id&&Object(a.jsxs)(a.Fragment,{children:[" (",t.work_category.name,")"]})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props,n=t.special,r=(t.job,t.category),a=t.services,o=t.initialValues,i=t.change;(this.loadWorks(void 0,r.id),n)||(null===o||void 0===o||null===(e=o.service)||void 0===e?void 0:e.id)&&!o.service.name&&a.length&&i("service",j.a.find(a,{id:o.service.id}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.special,r=t.handleSubmit,o=t.change,i=t.submitting,c=t.modal,s=t.services,l=this.state,u=l.working,d=l.types,p=l.works,h=l.worksFiltered;return Object(a.jsxs)(a.Fragment,{children:[(i&&!c||u)&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)(NTe,{id:CTe,onSubmit:r(this.onSubmit),children:[Object(a.jsxs)("div",{className:"d-flex mb-4",children:[Object(a.jsx)(yv.a,{name:"search",component:ZO,className:"flex-grow-1",placeholder:"Search by item",onChange:function(t){var n=t.target.value;if(n){var r=new RegExp(n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),a={};j.a.forEach(p,(function(e,t){a[t]=e.filter((function(e){return e.name.match(r)}))})),e.setState({worksFiltered:a})}else e.setState({worksFiltered:p})}}),!n&&Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)(yv.a,{name:"service",component:Kv,placeholder:"Service",options:s||[],getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(t){o("search",""),o("work_id",null),e.loadWorks(null===t||void 0===t?void 0:t.id)}})})]}),d.length>1&&Object(a.jsx)("div",{className:"d-flex",children:d.map((function(t,n){return t&&h[t.id].length?Object(a.jsx)("div",{className:"mr-3 mb-3 text-primary cursor-pointer",onClick:function(){var n;return null===(n=e.cards[t.id])||void 0===n?void 0:n.scrollIntoView()},children:t.name},t.id):null}))}),d.map((function(t,n){var r;return(null===(r=h[(null===t||void 0===t?void 0:t.id)||t])||void 0===r?void 0:r.length)?Object(a.jsxs)("div",{className:"card mb-3 idx-".concat(n),ref:function(n){return e.cards[null===t||void 0===t?void 0:t.id]=n},children:[t&&Object(a.jsx)("div",{className:"card-header",children:t.name}),Object(a.jsx)("div",{className:"card-body p-0",children:Object(a.jsx)(yv.a,{name:"work_id",component:lye,list:h[(null===t||void 0===t?void 0:t.id)||t].map((function(t){return{label:e.workLabel(t),id:t._id||t.id}})),validate:uv,onChange:function(t){return e.setState({selected:Object(Dm.a)(t)})}})})]},(null===t||void 0===t?void 0:t.id)||n):null})),!u&&j.a.isEmpty(h)&&Object(a.jsx)("div",{className:"text-center text-gray",children:"There are no works in the chosen service. Please select another service."})]})]})}}]),n}(p.PureComponent),ATe=Object(LO.compose)(Object(b.b)((function(e){return{services:e.waterForm.services}})),Object(Gj.a)({form:CTe,enableReinitialize:!0}))(ETe),TTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&(a=e.props,o=a.afterSubmit,(0,a.onClose)(),null===o||void 0===o||o(r)),e.setState({submitting:!1});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.props,n=t.special,r=t.job,o=t.room,i=t.category;return Object(a.jsx)(ATe,{job:r,room:o,special:n,category:i,initialValues:{service:{id:r.service.service_id,name:""}},modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.room,i=e.category,c=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{scrollY:!0,style:{minHeight:"300px"},onClose:r,loading:c,title:n||Object(a.jsxs)(a.Fragment,{children:["Add ",Object(a.jsx)("em",{children:i.name})," Works",o&&Object(a.jsxs)(a.Fragment,{children:["to ",o.name]})]}),body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:CTe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function ITe(){var e=Object(f.a)(["\n  cursor: pointer;\n  :not(:last-child){\n    margin-right: .5rem\n  }\n"]);return ITe=function(){return e},e}function RTe(){var e=Object(f.a)(["\n  width:100%;margin:0;padding: .5rem 1.25em;\n  &:not(:last-child){border-bottom: 1px solid ",";}\n  &.completed{background-color: ",";}\n"]);return RTe=function(){return e},e}!function(e){e[e.ROOM_WORK=0]="ROOM_WORK"}(STe||(STe={}));var DTe=x.default.div(RTe(),y.gray2,y.green3),MTe=x.default.span(ITe()),PTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={groups:[],categories:[],works:{},showCompleted:{}},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.special,s=o.job,l=o.room;switch(n){case STe.ROOM_WORK:return Object(a.jsx)(TTe,Object(c.a)(Object(c.a)({job:s,room:l,onClose:e.hideModal,isOpen:!0},r),{},{special:i,afterSubmit:function(){return e.loadWorks(e.state.categories)}}))}return null},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.special,a=n.service,o=n.job,i=n.works,!r){t.next=12;break}return e.setState({working:!0}),i&&e.setState({works:i}),t.next=6,e.loadCategories(a.id,{job_id:o.id});case 6:return c=t.sent,t.next=9,Promise.all([i?Promise.resolve():e.loadWorks(c),e.loadWorkGroups(a.id)]);case 9:e.setState({working:!1}),t.next=15;break;case 12:e.loadCategories(o.service.service_id),e.loadWorks(),e.loadWorkGroups(o.service.service_id);case 15:case"end":return t.stop()}}),t)}))),e.loadCategories=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,PY(n,r);case 2:return a=t.sent,e.setState({categories:j.a.sortBy(a,"position")}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.loadWorks=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.room,o=r.exclusion,e.setState({working:!0}),t.prev=2,i=e.props.job,t.next=6,UY(i.id,(null===a||void 0===a?void 0:a.id)||null,{work_category_id:j.a.map(n,"id")});case 6:c=t.sent.data,e.setState({works:j.a.groupBy(c,(function(e){var t;return e.work_category_id||(null===(t=e.work)||void 0===t?void 0:t.work_category_id)}))}),o&&uy.emit(Kg.JobWorkLoaded,{exclusion:c});case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[2,,9,12]])})));return function(e){return t.apply(this,arguments)}}(),e.loadWorkGroups=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.room,t.next=3,qY(n,null===a||void 0===a||null===(r=a.flooring_type)||void 0===r?void 0:r.id,{check_work_empty:1});case 3:return o=t.sent.data,e.setState({groups:o}),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteWorks=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,o,i,c,s,l;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.dispatch,i=r.job,c=r.room,s=r.exclusion,n.next=3,o(Sw("Confirm","Delete All Works!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete all works from ",Object(a.jsx)("strong",{children:t.name}),"?"]})));case 3:if(!n.sent){n.next=17;break}return e.setState({working:!0}),n.prev=6,l=e.state.works,n.next=10,BY(i.id,j.a.map(l[t.id],"id"),null===c||void 0===c?void 0:c.id);case 10:delete l[t.id],e.setState({works:l}),uy.emit(Kg.JobWorkDeleted,c),s&&uy.emit(Kg.JobWorkLoaded,{exclusion:[]});case 14:return n.prev=14,e.setState({working:!1}),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[6,,14,17]])})))},e.deleteWork=function(t,n){return Object(Um.a)(Fm.a.mark((function r(){var o,i,c,s,l,u,d;return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.props,i=o.dispatch,c=o.job,s=o.room,l=o.exclusion,r.next=3,i(Sw("Confirm","Delete Work!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete this work from ",Object(a.jsx)("strong",{children:t.name}),"?"]})));case 3:if(!r.sent){r.next=16;break}return e.setState({working:!0}),r.prev=6,r.next=9,VY(c.id,n.id,null===s||void 0===s?void 0:s.id);case 9:u=e.state.works,(d=j.a.findIndex(u[t.id],{id:n.id}))>-1&&(u[t.id].splice(d,1),u[t.id].length||delete u[t.id],e.setState({works:u}),l&&uy.emit(Kg.JobWorkLoaded,{exclusion:u[t.id]})),uy.emit(Kg.JobWorkDeleted,s);case 13:return r.prev=13,e.setState({working:!1}),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[6,,13,16]])})))},e.cloneWorkToRoom=function(t,n,r){return Object(Um.a)(Fm.a.mark((function a(){var o,i;return Fm.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({working:!0}),a.prev=1,o=e.props.job,a.next=5,LY(o.id,r.id,{work_category_id:t.id,works:[{id:n.work.id,custom:n.work_custom}]});case 5:i=a.sent,uy.emit(Kg.JobWorkAdded,[r,i]);case 7:return a.prev=7,e.setState({working:!1}),a.finish(7);case 10:case"end":return a.stop()}}),a,null,[[1,,7,10]])})))},e.cloneWorksToRoom=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,r=e.props,a=r.room,o=r.job,n.next=5,JY(o.id,a.id,t.id);case 5:uy.emit(Kg.JobWorkAdded,[t]);case 6:return n.prev=6,e.setState({working:!1}),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})))},e.addWorksGroup=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(r=t.works)||void 0===r?void 0:r.length)){n.next=11;break}return e.setState({working:!0}),n.prev=2,a=e.props,o=a.job,i=a.room,n.next=6,Promise.all(j()(t.works).groupBy("work_category_id").mapValues((function(e,t){return LY(o.id,null===i||void 0===i?void 0:i.id,{work_category_id:t,works:j.a.map(e,(function(e){return{id:e.id}}))})})).values().value());case 6:e.loadWorks(),uy.emit(Kg.JobWorkAdded,[i]);case 8:return n.prev=8,e.setState({working:!1}),n.finish(8);case 11:case"end":return n.stop()}}),n,null,[[2,,8,11]])})))},e.markWorkAsComplete=function(t,n){return Object(Um.a)(Fm.a.mark((function r(){var a,o,i,s;return Fm.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.setState({working:!0}),a=e.state.works,o=j.a.findIndex(a[t.id],{id:n.id}),r.prev=3,i=e.props.job,r.next=7,FY(i.id,n.id,{completed:!0,completed_at:qf()().format(Mj)});case 7:s=r.sent,o>-1&&(n.completed=s.completed,n.completed_at=s.completed_at,n.completed_now=!0,a[t.id][o]=n,e.setState({works:a})),uy.emit(Kg.JobWorkUpdated,n.job_room_id?{id:n.job_room_id}:null);case 10:return r.prev=10,e.setState({working:!1}),setTimeout((function(){delete n.completed_now,a[t.id][o]=n,e.setState({works:Object(c.a)({},a)})}),1500),r.finish(10);case 14:case"end":return r.stop()}}),r,null,[[3,,10,14]])})))},e.toggleCompleted=function(t){return function(){var n=e.state.showCompleted;n[t.id]=!n[t.id],e.setState({showCompleted:Object(c.a)({},n)})}},e.onCategoryEdit=function(t){return function(n){var r=n.target.value.trim();r&&(t.job_work_category?e.debouncedUpdateCategory(e.props.job.id,t.job_work_category.id,{name:r,work_category_id:t.id}):e.debouncedCreateCategory(e.props.job.id,{name:r,work_category_id:t.id}))}},e.debouncedCreateCategory=_v()(ly.createWorkCategory,500),e.debouncedUpdateCategory=_v()(ly.updateWorkCategory,500),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.working,r=t.categories,o=t.works,i=t.groups,c=t.showCompleted,s=this.props,l=s.special,u=s.exclusion,d=s.room,p=s.nonControlRooms,h=s.locked,b=s.editable;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{children:[n&&Object(a.jsx)(av,{size:40}),!h&&Object(a.jsxs)("div",{className:"print-hide pt-1",children:[!n&&j.a.isEmpty(r)&&j.a.isEmpty(i)&&Object(a.jsx)("p",{className:"text-center",children:"No data available"}),i.map((function(t){return Object(a.jsx)("button",{className:"btn btn-outline-dark mr-2 mb-2",onClick:e.addWorksGroup(t),children:t.name},t.id)})),!l&&p.length>1&&!j.a.isEmpty(o)&&!j.a.isEmpty(r)&&Object(a.jsx)("div",{className:"btn-group mb-2",children:Object(a.jsxs)(QG.e,{children:[Object(a.jsx)(QG.h,{caret:!0,color:"primary",outline:!0,className:"position-relative",children:"Copy to"}),Object(a.jsx)(QG.g,{basic:!0,right:!0,children:p.filter((function(e){return e.id!==d.id})).map((function(t){return Object(a.jsx)(QG.f,{onClick:e.cloneWorksToRoom(t),children:t.name},t.id)}))})]})})]}),r.map((function(t){var n,r,i,s,f;return Object(a.jsx)("section",{className:"mt-3",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[h||!(null===b||void 0===b?void 0:b.category)?Object(a.jsx)("div",{className:"flex-grow-1",children:(null===(n=t.job_work_category)||void 0===n?void 0:n.name)||t.name}):Object(a.jsx)("div",{className:"flex-grow-1 mr-3",children:Object(a.jsx)("input",{type:"text",className:"form-control editable-label",defaultValue:(null===(i=t.job_work_category)||void 0===i?void 0:i.name)||t.name,onChange:e.onCategoryEdit(t)},(null===(r=t.job_work_category)||void 0===r?void 0:r.name)||t.name)}),Object(a.jsxs)("div",{children:[!u&&(null===(s=o[t.id])||void 0===s?void 0:s.length)?Object(a.jsxs)(MTe,{className:"mr-5 text-primary",onClick:e.toggleCompleted(t),children:[c[t.id]?"Hide":"Show"," Completed"]}):null,!h&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(MTe,{onClick:e.showModal(STe.ROOM_WORK,{category:t}),children:Object(a.jsx)(J3,{color:y.black0,hoverColor:y.blue4,name:Ef.Add,size:14})}),(null===(f=o[t.id])||void 0===f?void 0:f.length)?Object(a.jsx)(MTe,{onClick:e.deleteWorks(t),children:Object(a.jsx)(J3,{color:y.black0,hoverColor:y.red1,name:Ef.Trash,size:14})}):null]})]})]})}),o[t.id]?Object(a.jsx)("div",{className:"card-body p-0",children:o[t.id].filter((function(e){return c[t.id]||e.completed_now||!e.completed})).map((function(n){var r;return Object(a.jsxs)(DTe,{className:"d-flex".concat(n.completed?" completed":"").concat(!c[t.id]&&n.completed_now?" fade slower":""),children:[!h&&Object(a.jsx)("div",{className:"mr-3",children:n.completed?Object(a.jsx)(J3,{name:Ef.Check,size:14,color:y.green4,title:"Completed"}):!u&&Object(a.jsx)(MTe,{title:"Mark completed",onClick:e.markWorkAsComplete(t,n),children:Object(a.jsx)(J3,{name:Ef.Check,size:14,color:y.black0,hoverColor:y.green0})})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{children:[n.work_custom||n.work.name," ",n.work.work_type&&Object(a.jsxs)(a.Fragment,{children:["(",null===(r=n.work.work_type)||void 0===r?void 0:r.name,")"]})," ",n.completed&&Object(a.jsx)("span",{className:"badge badge-info ml-2 text-uppercase",children:"Completed"})]}),Object(a.jsxs)("div",{className:"text-sm text-gray",children:[Object(a.jsxs)("span",{children:["Added: ",qf()(n.created_at).format(Pj)]}),",",Object(a.jsx)("span",{className:"ml-2",children:n.user.full_name}),n.completed&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[". Completed: ",qf()(n.completed_at).format(Pj)]}),",",Object(a.jsx)("span",{className:"ml-2",children:(n.completed_by_user||n.user).full_name})]})]})]}),Object(a.jsx)("div",{children:!h&&Object(a.jsxs)("div",{className:"d-flex",children:[!l&&p.length>1&&Object(a.jsx)(MTe,{title:"Copy this work to another room",children:Object(a.jsxs)(QG.e,{children:[Object(a.jsx)(QG.h,{className:"position-relative",tag:"div",children:Object(a.jsx)(J3,{name:Ef.Duplicate,color:y.black0,hoverColor:y.blue4,fill:!0,size:13})}),Object(a.jsx)(QG.g,{basic:!0,right:!0,children:p.filter((function(e){return e.id!==d.id})).map((function(r){return Object(a.jsx)(QG.f,{onClick:e.cloneWorkToRoom(t,n,r),children:r.name},r.id)}))})]})}),Object(a.jsx)(MTe,{onClick:e.deleteWork(t,n),children:Object(a.jsx)(J3,{name:Ef.Trash,color:y.black0,hoverColor:y.red1,size:13})})]})})]},n.id)}))}):null]})},t.id)}))]})]})}}]),n}(p.PureComponent),LTe=Object(LO.compose)(Object(b.b)())(PTe),FTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.match.params.tab;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto",children:[Object(a.jsxs)(QG.i,{className:"nav-tabs mr-4",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/details"),role:"tab",children:"Details & Readings"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/floor-plan"),role:"tab",children:"Floor Plan"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/works"),role:"tab",children:"Scope of Works"})})]}),Object(a.jsxs)(QG.k,{activeItem:n,className:"position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:[Object(a.jsx)(QG.l,{tabId:"details",role:"tabpanel",children:Object(a.jsx)(_Te,Object(c.a)({},this.props))}),"floor-plan"===n&&Object(a.jsx)(QG.l,{tabId:"floor-plan",role:"tabpanel",className:"h-100 w-100",children:Object(a.jsx)(OTe,Object(c.a)({},this.props))}),"works"===n&&Object(a.jsx)(QG.l,{tabId:"works",role:"tabpanel",children:Object(a.jsx)(LTe,Object(c.a)({},this.props))})]})]})}}]),n}(p.PureComponent),UTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).AffectedRoomTabs=function(t){var n=e.props,r=n.nonControlRooms,o=n.match,i=o.url,s=o.params.room_id,l=j.a.find(r,{id:+s});return Object(a.jsx)(FTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),{},{room:l,url:i}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.nonControlRooms,n=e.match,r=n.url,o=n.params.room_id,i=j.a.find(t,{id:+o});return i?Object(a.jsxs)(PQ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsxs)("strong",{children:["Rooms: ",i.name]})}),Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(r,"/:tab"),component:this.AffectedRoomTabs}),Object(a.jsx)(v.a,{to:"".concat(r,"/details")})]})]}):Object(a.jsx)("h3",{children:"Room not found"})}}]),n}(p.PureComponent),VTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).splitReadings=function(t){var n=e.props,r=n.controlRoom,a=n.outsideRoom,o={air:j()(t).filter({job_moisture_area:null}).groupBy("job_room_id").mapValues((function(e){return j()(e).orderBy("created_at",["desc"]).value()})).value(),moisture:j()(t).reject({job_moisture_area:null}).groupBy("job_room_id").mapValues((function(e){return j()(e).orderBy("created_at",["desc"]).groupBy("group_at").mapValues((function(e){return j.a.keyBy(e,"job_moisture_area.id")})).value()})).value()};if(r&&(o.air[r.id]||o.moisture[r.id])){var i=j()(o.moisture[r.id]).reduce((function(e,t){return e[0].group_at>t[0].group_at?e:t}));o.controlRoom={air:j.a.last(o.air[r.id]),moisture:i}}return a&&o.air[a.id]&&(o.outsideRoom={air:j.a.last(o.air[a.id])}),o},e.state={},e.eventListeners=[uy.listen(Kg.JobReadingsAdded,(function(t){j.a.forEach(t,(function(e){n.readings[e.job.id]||(n.readings[e.job.id]=[]),n.readings[e.job.id].push(e)})),e.setState({readings:e.splitReadings(n.readings[e.props.job.id])})})),uy.listen(Kg.JobRoomAreaAdded,(function(t){t.forEach((function(e){n.moistureAreas[e.job.id]||(n.moistureAreas[e.job.id]=[]),n.moistureAreas[e.job.id].push(e)})),e.setState({moistureAreas:Object(Dm.a)(n.moistureAreas[e.props.job.id])})})),uy.listen(Kg.JobRoomAreaUpdated,(function(t){var r=j.a.findIndex(n.moistureAreas[t.job.id],{id:t.id});r>-1&&(n.moistureAreas[t.job.id][r]=t,e.setState({moistureAreas:Object(Dm.a)(n.moistureAreas[e.props.job.id])}))})),uy.listen(Kg.JobRoomAreaDeleted,(function(t){var r=j.a.findIndex(n.moistureAreas[t.job.id],{id:t.id});r>-1&&(n.moistureAreas[t.job.id].splice(r,1),e.setState({moistureAreas:Object(Dm.a)(n.moistureAreas[e.props.job.id])}))}))],e.loadReadings=function(){var t=Object(Um.a)(Fm.a.mark((function t(r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.job,void 0!==n.readings[a.id]&&!r){t.next=12;break}return n.readings[a.id]=null,t.next=5,Promise.all([yY(a.id),SY(a.id)]);case 5:o=t.sent,i=Object(w.a)(o,2),c=i[0].data,s=i[1].data,n.readings[a.id]=c,n.moistureAreas[a.id]=s,e.setState({readings:e.splitReadings(n.readings[a.id]),moistureAreas:s});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.RoomsOverviewLayout=function(t){return Object(a.jsx)(yTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state))},e.ControlRoom=function(t){return Object(a.jsx)(dTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state))},e.AffectedRoomLayout=function(t){return Object(a.jsx)(UTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.job;n.readings[e.id]?this.setState({readings:this.splitReadings(n.readings[e.id]),moistureAreas:n.moistureAreas[e.id]}):this.loadReadings()}},{key:"componentDidUpdate",value:function(){var e,t=this.props.floorTypes;t.length&&void 0===n.FLOOR_TYPE.CARPET&&(n.FLOOR_TYPE.CARPET=(null===(e=t.find((function(e){return/^carpet$/i.test(e.name)})))||void 0===e?void 0:e.id)||null)}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this.props.match,t=e.path,n=e.url;return this.state.readings?Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(t,"/overview"),component:this.RoomsOverviewLayout}),Object(a.jsx)(v.b,{path:"".concat(t,"/control-room"),component:this.ControlRoom}),Object(a.jsx)(v.b,{path:"".concat(t,"/:room_id"),component:this.AffectedRoomLayout}),Object(a.jsx)(v.a,{to:"".concat(n,"/overview")})]}):Object(a.jsx)(av,{size:40})}}]),n}(p.PureComponent);VTe.FLOOR_TYPE={},VTe.readings={},VTe.moistureAreas={};var BTe=Object(LO.compose)(Object(b.b)((function(e){return{floorTypes:e.waterForm.floorTypes||[]}})))(VTe),JTe="FORM_JOB_WORKS_ADDITIONAL_WORKS",zTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.saveWorks(n);case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Mg(t.t0));case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(e){return t.apply(this,arguments)}}(),e.saveWorks=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.job,o=r.afterSave,t.prev=1,t.next=4,XY(a.id,Object(c.a)(Object(c.a)({},n),{},{link:window.location.origin+"/jobs/".concat(a.id,"/water-form/contractors/works")}));case 4:i=t.sent,null===o||void 0===o||o(i),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.searchUsers=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.users.fetch({name:n});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearchUsers=_v()(e.searchUsers,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.locked,r=t.handleSubmit,o=t.formData,i=void 0===o?{}:o,c=t.change,s=this.state.working;return Object(a.jsx)(PQ,{children:Object(a.jsxs)("div",{className:"pr-4 py-4",children:[s&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{id:JTe,onSubmit:r(this.onSubmit),children:[Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Secondary Damage Identified:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"secondary_damage",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:n})})]}),"1"===i.secondary_damage&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Description:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"secondary_damage_comments",component:SJ,disabled:n,placeholder:"Description of any secondary damage..."})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Office Contacted - Assessment Manager to scope further works:"})}),Object(a.jsx)("div",{className:"col p-0",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(yv.a,{name:"area_manager_contacted",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],onChange:function(e){c("area_manager",null)},disabled:n})}),"1"===i.area_manager_contacted&&Object(a.jsx)("div",{className:"col-6",children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(yv.a,{name:"area_manager",placeholder:"Choose an assessment manager",component:rO,loadOptions:this.debouncedSearchUsers,getOptionLabel:function(e){return e.full_name},getOptionValue:function(e){return e.id},isClearable:!0,validate:uv,disabled:n})}),i.area_manager&&!i.area_manager.email&&Object(a.jsxs)("div",{className:"form-group ml-2",children:[Object(a.jsx)(Jf.a,{className:"overlapping",id:"am_search",effect:"solid"}),Object(a.jsx)("div",{"data-tip":"No email address found for ".concat(i.area_manager.full_name),"data-for":"am_search",children:Object(a.jsx)("i",{className:"fa fa-exclamation-triangle text-warning","aria-hidden":"true"})})]})]})})]})})]}),"1"===i.area_manager_contacted&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Notes:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"area_manager_notification_comments",component:SJ,disabled:n,placeholder:"Additional notes to send to ".concat((null===(e=i.area_manager)||void 0===e?void 0:e.full_name)||"assessment manager","...")})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Heavy Furniture (2 people required):"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"heavy_furniture",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:n})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Truck Required:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(yv.a,{name:"truck_required",component:rU,direction:"horizontal",size:16,validate:uv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:n})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsxs)("label",{className:"",children:["Contents & Structure Disposal (m",Object(a.jsx)("sup",{children:"3"}),"):"]})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(yv.a,{name:"disposal",component:ZO,disabled:n,type:"number",step:.1})})]})]}),!n&&Object(a.jsx)("section",{children:Object(a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(a.jsx)("button",{type:"submit",form:JTe,className:"btn btn-primary",children:"Save"})})})]})]})})}}]),n}(p.PureComponent);zTe.defaultValues={secondary_damage:"0",area_manager_contacted:"0",heavy_furniture:"0",truck_required:"0"};var qTe=Object(LO.compose)(Object(b.b)((function(e){return{formData:Object(eM.a)(JTe)(e)}})),Object(Gj.a)({form:JTe,enableReinitialize:!0,initialValues:zTe.defaultValues}),Mm({users:{fetch:uE.searchUsers}}))(zTe),WTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.job,t.next=5,$Y(n.id);case 5:r=t.sent,a=(null===r||void 0===r?void 0:r.length)?fY(j.a.last(r)):null,e.setState({works:a});case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props.active,t=this.state,n=t.works,r=t.working;e&&void 0===n&&!r&&this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.locked,r=this.state,o=r.working,i=r.works;return Object(a.jsxs)(PQ,{children:[o&&Object(a.jsx)(av,{size:40}),Object(a.jsx)("div",{className:"pr-4 py-4",children:void 0!==i&&Object(a.jsx)(qTe,{job:t,locked:n,initialValues:i||zTe.defaultValues})})]})}}]),n}(p.PureComponent);function HTe(){var e=Object(f.a)(["\n  padding: 5px;\n  cursor: pointer;\n  opacity: 0.7;\n  :hover{\n    opacity: 1;\n  }\n"]);return HTe=function(){return e},e}var GTe=x.default.div(HTe()),YTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.data,scrollable:"none"}},e.deleteContractor=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,o,i,c;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.job,i=r.dispatch,c=r.afterDelete,n.next=3,i(Sw("Confirm","Delete  Contract!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to delete this sub-contractor trade?"})));case 3:if(!n.sent){n.next=10;break}return e.setState({working:!0}),n.next=8,KY(o.id,t.id);case 8:null===c||void 0===c||c(t),e.setState({working:!1});case 10:case"end":return n.stop()}}),n)})))},e.markCompleted=function(t){return Object(Um.a)(Fm.a.mark((function n(){var r,a,o,i;return Fm.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,a=r.job,o=r.user,i=r.afterUpdate,e.setState({working:!0}),n.next=4,QY(a.id,t.id,Object(c.a)(Object(c.a)({},t),{},{completed_at:qf()().format(Mj),completed_by_user_id:o.id}));case 4:null===i||void 0===i||i(t),e.setState({working:!1});case 6:case"end":return n.stop()}}),n)})))},e.Trade=function(e){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsxs)("div",{children:[j.a.get(t,"trade.name"),t.completed_at&&Object(a.jsx)("span",{className:"badge badge-info ml-2 text-uppercase",children:"Completed"})]})}}))},e.Description=function(e){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{className:"text-truncate",children:j.a.get(t,"description")})}}))},e.AddedBy=function(e){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{children:j.a.get(t,"created_by.full_name")})}}))},e.Status=function(t){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({},t),{},{Component:function(t){var n=t.data,r=e.props.locked;return Object(a.jsx)("div",{children:n.completed_at?qf()(n.completed_at).format(Pj):!r&&Object(a.jsx)("button",{className:"btn btn-sm btn-outline-success",onClick:e.markCompleted(n),children:"Mark Done"})})}}))},e.Actions=function(t){return Object(a.jsx)(tY,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data;return Object(a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(a.jsx)(GTe,{onClick:e.deleteContractor(n),children:Object(a.jsx)(J3,{color:y.black0,hoverColor:y.red1,name:Ef.Trash,size:14})})})}}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state.gridState,t=this.props.data;t!==e.data&&(e.data=t,this.setState({gridState:Object(c.a)({},e)}))}},{key:"render",value:function(){var e=this.state.working,t=this.props.locked;return Object(a.jsxs)(PQ,{children:[e&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)(rw.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{className:"d-flex flex-column",children:[Object(a.jsx)(rw.b,{field:"trade",title:"Contractor",width:"200px",cell:this.Trade}),Object(a.jsx)(rw.b,{field:"description",title:"Job Description",width:"250px",cell:this.Description}),Object(a.jsx)(rw.b,{field:"created_by",title:"Added By",width:"150px",cell:this.AddedBy}),Object(a.jsx)(rw.b,{field:"completed_at",title:"Completed",width:"150px",cell:this.Status}),!t&&Object(a.jsx)(rw.b,{width:"110px",cell:this.Actions,sortable:!1})]}))]})}}]),n}(p.PureComponent),QTe=Object(LO.compose)(Object(b.b)((function(e){return{user:e.user.me}})),Mm({contractors:{fetch:function(){var e=Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))(YTe),KTe="FORM_THIRD_PARTY_TRADE",ZTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.afterSubmit,o=r.job,console.log(n),t.prev=2,t.next=5,n.id?QY(o.id,n.id,n):YY(o.id,n);case 5:i=t.sent,null===a||void 0===a||a(!0,i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),null===a||void 0===a||a(!1);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.modal,r=e.trades,o=e.handleSubmit;return Object(a.jsxs)("div",{className:"position-relative",children:[t&&!n&&Object(a.jsx)(av,{size:40}),Object(a.jsx)("form",{id:KTe,onSubmit:o(this.onSubmit),children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(yv.a,{name:"trade",component:Kv,options:r||[],getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},label:"Trade:",validate:uv})}),Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(yv.a,{name:"description",component:ZO,label:"Descripton of Works:",validate:uv})})]})})]})}}]),n}(p.PureComponent),XTe=Object(LO.compose)(Object(b.b)((function(e){return{trades:e.waterForm.trades}})),Object(Gj.a)({form:KTe,enableReinitialize:!0}))(ZTe),$Te=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&(a=e.props,o=a.onClose,null===(i=a.afterSubmit)||void 0===i||i(r),o()),e.setState({submitting:!1});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.props,n=t.trade,r=t.job;return Object(a.jsx)(XTe,{job:r,initialValues:n,modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.trade,i=this.state.submitting;return Object(a.jsx)(vO,{isOpen:t,children:Object(a.jsx)(PO,{scrollY:!0,onClose:r,loading:i,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add")+" Sub-Contractor",body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:KTe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent),eIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.contractors,e.setState({working:!0}),t.prev=2,t.next=5,a.fetch(r.id);case 5:return t.prev=5,e.setState({working:!1}),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[2,,5,8]])}))),e.onDelete=function(t){e.loadData()},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0,modalData:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.job;return"contractor"===n?Object(a.jsx)($Te,Object(c.a)(Object(c.a)({job:o,isOpen:!0,onClose:e.hideModal},r),{},{afterSubmit:e.loadData})):null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.active,n=e.contractors;!t||n.data||n.loading||this.loadData()}},{key:"render",value:function(){var e=this.state.working,t=this.props,n=t.job,r=t.contractors.data,o=t.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)(PQ,{children:[e&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("div",{className:"pr-4 py-4",children:[!o&&Object(a.jsx)("div",{className:"print-hide mb-3",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("contractor"),children:"Add"})}),Object(a.jsx)(QTe,{locked:o,job:n,data:r||[],afterDelete:this.loadData,afterUpdate:this.loadData})]})]})]})}}]),n}(p.PureComponent),tIe=Object(LO.compose)(Object(b.b)(),Mm({contractors:{fetch:ZY}}))(eIe);function nIe(){var e=Object(f.a)(["\n  input[type='radio']{\n    position: relative; top: 2px; margin-right: 5px;\n  }\n"]);return nIe=function(){return e},e}var rIe=x.default.div(nIe()),aIe="CONTENTS_INVENTORY_FORM",oIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobContract:e.props.jobContract},e.signaturePad={},e.validateSignature=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(e,t){if(e.isEmpty())throw e.setInvalid(),n=!1,Qm(Vm.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.lockSignature=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:return t.next=6,e.uploadSignature(n);case 6:r=t.sent,n.signatures=n.signatures.concat(r);case 8:return t.prev=8,setTimeout((function(){e.setState({working:!1})}),100),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e.uploadSignature=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],j.a.forEach(e.signaturePad,(function(t,a){var o,i={field_data:JSON.stringify(j.a.get(n.meta,"signature.".concat(a,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:Jv.getContactName(e.customer),customer_email:null===(o=e.customer)||void 0===o?void 0:o.email};r.push(fG(a,t.toDataURL(),n.id,i,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(a=e.customer)||void 0===a?void 0:a.email)){t.next=13;break}return t.next=4,e._sendEmail(o,n);case 4:return t.t0=r,t.next=7,oG(n.id);case 7:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),t.abrupt("return",i);case 13:return Qm(Vm.Danger,"Customer email address is not set"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:Jv.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.abrupt("return",hG(r.id,s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.saveContract=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,o=a.user,i=a.job,c=a.afterSave,a.dispatch,t.prev=1,s=null,!o){t.next=16;break}return t.next=6,rG(e.props.job.id,n.template.contract.id,{field_data:JSON.stringify(r),contract_date:qf()().format(Dj)});case 6:return s=t.sent,t.prev=7,t.next=10,e.sendEmail(s);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(7);case 14:t.next=17;break;case 16:s=n;case 17:s&&(o&&(s=YH(s,i)),e.setState({jobContract:s}),null===c||void 0===c||c(s)),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(1),console.log(t.t1);case 23:case"end":return t.stop()}}),t,null,[[1,20],[7,12]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:if(!e.state.jobContract){t.next=9;break}return t.next=7,e.saveContract(e.state.jobContract,n);case 7:t.next=14;break;case 9:return t.next=11,e.getJobContract();case 11:return r=t.sent,t.next=14,e.saveContract(r,n);case 14:return t.prev=14,e.setState({working:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,,14,17]])})));return function(e){return t.apply(this,arguments)}}(),e.getJobContract=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QH(JH.CONTENTS_INVENTORY);case 2:return n=t.sent[0],t.next=5,ZH(n.id);case 5:return r=t.sent,t.abrupt("return",{job:e.props.job,type:JH.CONTENTS_INVENTORY,template:r});case 7:case"end":return t.stop()}}),t)}))),e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e}return Object(l.a)(n,[{key:"extractContact",value:function(e){var t=this.props.jobContacts;return ly.extractContact(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=(t.formData,t.user),o=t.submitting,i=t.locked,c=this.state,s=c.working,l=c.jobContract,u=j.a.find(null===l||void 0===l?void 0:l.signatures,{type:"customer"});return Object(a.jsxs)(rIe,{children:[(o||s)&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),children:[Object(a.jsxs)("section",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Customer Signature:"})}),Object(a.jsx)("p",{children:"I have checked the inventory in the Packout app and confirm it is a true and accurate description of goods (and condition thereof) removed by Steamatic."}),(!r||u)&&Object(a.jsxs)("div",{style:{maxWidth:"400px",margin:"auto"},children:[Object(a.jsx)(MG,{job:n,jobContract:l,bindings:{},type:"customer",onSignatureRender:this.onSignatureRender}),u&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Signed At: "}),qf()(u.created_at).format(Uj)]})]})]}),r&&!u?!i&&Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("p",{className:"d-flex justify-content-center",children:[l&&Object(a.jsx)("a",{href:"/external/job/contract/".concat(l.hash),target:"_blank",className:"btn btn-outline-primary",children:"Get Customer Signature"}),!l&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:o||s,children:["Send to Customer ",(o||s)&&Object(a.jsx)(av,{size:20})]})]})]}):u?null:Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("p",{className:"d-flex justify-content-center",children:l&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"button",disabled:o||s,onClick:function(){return e.lockSignature(l)},children:["I Agree & Save ",(o||s)&&Object(a.jsx)(av,{size:20})]})})]})]})]})}},{key:"customer",get:function(){return this.extractContact(Tj.CUSTOMER)}}]),n}(p.PureComponent),iIe=Object(LO.compose)(Object(Gj.a)({form:aIe,enableReinitialize:!0}),v.g,Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me,formData:Object(eM.a)(aIe)(e)}})))(oIe),cIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.job,t.next=5,tG(n.id,JH.CONTENTS_INVENTORY);case 5:r=t.sent,a=r?YH(r,n):null,e.setState({contract:a});case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])}))),e.afterSave=function(t){e.setState({contract:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props.active,t=this.state,n=t.contract,r=t.working;e&&void 0===n&&!r&&this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.contacts,r=e.locked,o=this.state,i=o.contract,c=o.working;return Object(a.jsx)(PQ,{children:c?Object(a.jsx)(av,{size:40}):Object(a.jsx)("div",{className:"pr-4 py-4",children:Object(a.jsx)(iIe,{job:t,jobContract:i,jobContacts:n.data||[],initialValues:(null===i||void 0===i?void 0:i.meta)||{},afterSave:this.afterSave,locked:r})})})}}]),n}(p.PureComponent),sIe=Object(LO.compose)(Object(b.b)((function(e){return{contacts:e.currentJobContacts}})))(cIe),lIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props,r=n.job,a=n.notes,t.next=5,a.fetch(r.id,{type:Ww.FIELD});case 5:return t.prev=5,e.setState({working:!1}),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[1,,5,8]])}))),e.saveNoteDraft=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0,latestNote:n}),r=e.props.dispatch,a=e.props.job,t.next=6,r(TD(a.id,n.id,{job_id:a.id,type:Ww.FIELD},!1));case 6:return t.next=8,e.loadData();case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.active,n=e.notes,r=this.state.working;t&&void 0===n.data&&!r&&this.loadData()}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.working,o=n.latestNote,i=this.props,c=i.notes.data,s=i.job,l=i.locked;return Object(a.jsx)(PQ,{children:Object(a.jsxs)("div",{className:"pr-4 py-4",children:[!l&&Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)(dA,{afterSave:this.saveNoteDraft,color:y.orange0,disableTemplatesControl:!0,disableAttachments:!0,disableMentionControl:!0},(null===o||void 0===o?void 0:o.id)||"")}),Object(a.jsxs)("div",{className:"pr-5",children:[r&&Object(a.jsx)(av,{size:40}),(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.length)>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{className:"mb-0"}),c.data.map((function(e){return Object(a.jsx)(vT,{noteOrReply:e,afterEditSuccess:t.loadData,saveWith:{job_id:s.id,type:Ww.FIELD}},"note-".concat(e.id))}))]})]})]})})}}]),n}(p.PureComponent),uIe=Object(LO.compose)(Object(b.b)((function(e){var t;return{notes:null===(t=e.notesAndReplies.data)||void 0===t?void 0:t.notes}})),Mm({notes:{fetch:$E.getJobNotes}}))(lIe),dIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.match.params.tab;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto",children:[Object(a.jsxs)(QG.i,{className:"nav-tabs mr-4",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/works"),role:"tab",children:"Additional Works"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/trades"),role:"tab",children:"Sub-Contractors"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/inventory"),role:"tab",children:"Contents Inventory"})}),Object(a.jsx)(QG.j,{children:Object(a.jsx)(Uf.c,{className:"nav-link",to:"".concat(t,"/notes"),role:"tab",children:"Notes"})})]}),Object(a.jsxs)(QG.k,{activeItem:n,className:"position-relative flex-grow-1 scroll-auto",children:[Object(a.jsx)(QG.l,{tabId:"works",role:"tabpanel",className:"h-100",children:Object(a.jsx)(WTe,Object(c.a)(Object(c.a)({},this.props),{},{active:"works"===n}))}),Object(a.jsx)(QG.l,{tabId:"trades",role:"tabpanel",className:"h-100",children:Object(a.jsx)(tIe,Object(c.a)(Object(c.a)({},this.props),{},{active:"trades"===n}))}),Object(a.jsx)(QG.l,{tabId:"inventory",role:"tabpanel",className:"h-100",children:Object(a.jsx)(sIe,Object(c.a)(Object(c.a)({},this.props),{},{active:"inventory"===n}))}),Object(a.jsx)(QG.l,{tabId:"notes",role:"tabpanel",className:"h-100",children:Object(a.jsx)(uIe,Object(c.a)(Object(c.a)({},this.props),{},{active:"notes"===n}))})]})]})}}]),n}(p.PureComponent),pIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).Tabs=function(t){var n=e.props.match.url;return Object(a.jsx)(dIe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),{},{url:n}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e;(0,this.props.dispatch)(function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r().waterForm.trades.length&&!e){t.next=6;break}return t.next=4,GY();case 4:a=t.sent,n({type:hQ,payload:a});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props,t=e.generalAuthority,n=e.match.url;return Object(a.jsxs)(PQ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsx)("strong",{children:"Sub-Contractors & Notes"})}),t?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(n,"/:tab"),component:this.Tabs}),Object(a.jsx)(v.a,{to:"".concat(n,"/works")})]})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(av,{size:40})})]})}}]),n}(p.PureComponent),hIe=Object(LO.compose)(Object(b.b)((function(e){return{generalAuthority:e.waterForm.generalAuthority}})))(pIe);function bIe(){var e=Object(f.a)(["\n  input[type='radio']{\n    position: relative; top: 2px; margin-right: 5px;\n  }\n"]);return bIe=function(){return e},e}var fIe=x.default.div(bIe()),mIe="WORK_COMPLETION_FORM",jIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobContract:e.props.jobContract},e.signaturePad={},e.validateSignature=Object(Um.a)(Fm.a.mark((function t(){var n;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(e,t){if(e.isEmpty())throw e.setInvalid(),n=!1,Qm(Vm.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.uploadSignature=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],j.a.forEach(e.signaturePad,(function(t,o){var i,c={field_data:JSON.stringify(r||j.a.get(n.meta,"signature.".concat(o,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:Jv.getContactName(e.customer),customer_email:null===(i=e.customer)||void 0===i?void 0:i.email};a.push(fG(o,t.toDataURL(),n.id,c,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(a));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(a=e.customer)||void 0===a?void 0:a.email)){t.next=13;break}return t.next=4,e._sendEmail(o,n);case 4:return t.t0=r,t.next=7,oG(n.id);case 7:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),t.abrupt("return",i);case 13:return Qm(Vm.Danger,"Customer email address is not set"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._sendEmail=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:Jv.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.abrupt("return",hG(r.id,s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.saveContract=function(){var t=Object(Um.a)(Fm.a.mark((function t(n,r){var a,o,i,c,s;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,o=a.user,i=a.job,c=a.afterSave,t.prev=1,s=null,!o){t.next=16;break}return t.next=6,rG(e.props.job.id,n.template.contract.id,{field_data:JSON.stringify(r),contract_date:qf()().format(Dj)});case 6:return s=t.sent,t.prev=7,t.next=10,e.sendEmail(s);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(7);case 14:t.next=17;break;case 16:s=n;case 17:s&&(o&&(s=YH(s,i)),e.setState({jobContract:s}),null===c||void 0===c||c(s)),t.next=22;break;case 20:t.prev=20,t.t1=t.catch(1);case 22:case"end":return t.stop()}}),t,null,[[1,20],[7,12]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.props.user,e.setState({working:!0}),t.next=5,e.validateSignature();case 5:if(a=e.state.jobContract,!r){t.next=19;break}if(!a){t.next=12;break}return t.next=10,e.saveContract(a,n);case 10:t.next=17;break;case 12:return t.next=14,e.getJobContract();case 14:return o=t.sent,t.next=17,e.saveContract(o,n);case 17:t.next=24;break;case 19:if(!a){t.next=24;break}return t.next=22,e.uploadSignature(a,n);case 22:a.signatures=t.sent,e.setState({jobContract:a});case 24:return t.prev=24,e.setState({working:!1}),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[0,,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.getJobContract=Object(Um.a)(Fm.a.mark((function t(){var n,r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,QH(JH.WORK_COMPLETION);case 2:return n=t.sent[0],t.next=5,ZH(n.id);case 5:return r=t.sent,t.abrupt("return",{job:e.props.job,type:JH.WORK_COMPLETION,template:r});case 7:case"end":return t.stop()}}),t)}))),e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e}return Object(l.a)(n,[{key:"extractContact",value:function(e){var t=this.props.jobContacts;return ly.extractContact(e,t)}},{key:"render",value:function(){var e,t=this.props,n=t.job,r=t.formData,o=void 0===r?{}:r,i=t.user,c=t.submitting,s=this.state,l=s.working,u=s.jobContract,d=j.a.find(null===u||void 0===u?void 0:u.signatures,{type:"customer"});return Object(a.jsxs)(fIe,{children:[(c||l)&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),className:"p-1",children:[Object(a.jsxs)("section",{children:[Object(a.jsx)("p",{children:"I, the undersigned, have personally and thoroughly inspected all mitigation and restoration work undertaken by Steamatic in relation to the damage of which I have submitted a claim to my insurer."}),Object(a.jsx)("p",{children:"I agree that it is my responsibility to thoroughly inspect all work undertaken by Steamatic and that failure to do so may mean that I forfeit my right to make any future claims against Steamatic."}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Property: "})," ",null===(e=n.site_address)||void 0===e?void 0:e.full_address]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsx)(yv.a,{name:"satisfied",component:LJ,direction:"horizontal",label:"All work has been undertaken by Steamatic to my satisfaction.",disabled:d,validate:i?void 0:uv}),Object(a.jsx)(yv.a,{name:"acknowledged",component:LJ,direction:"horizontal",label:"I am aware further work may be required by other contractors/parties to complete the job.",disabled:d,validate:i?void 0:uv})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsx)("p",{children:"I hereby authorise full payment to be made directly to Steamatic."}),Object(a.jsx)(yv.a,{name:"responsible_party",component:rU,direction:"horizontal",size:16,list:[{value:"owner",label:"I am the owner"},{value:"agent",label:"I am an authorised agent of the owner:"}],disabled:d,validate:i?void 0:uv}),"agent"===o.responsible_party&&Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6 p-0",children:Object(a.jsx)(yv.a,{name:"agent_owner_relationship",component:ZO,placeholder:"Relationship with the owner",disabled:d,validate:i?void 0:uv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6 p-0",children:Object(a.jsx)(yv.a,{name:"contact_name",component:ZO,placeholder:"Full name of owner or authorised agent",disabled:d,validate:i?void 0:uv})})}),(!i||d)&&Object(a.jsxs)("div",{style:{maxWidth:"400px",margin:"auto"},children:[Object(a.jsx)(MG,{job:n,jobContract:u,bindings:{},type:"customer",onSignatureRender:this.onSignatureRender}),d&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Signed At: "}),qf()(d.created_at).format(Uj)]})]})]}),i&&!d?Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("p",{className:"d-flex justify-content-center",children:[u&&Object(a.jsx)("a",{href:"/external/job/contract/".concat(u.hash),target:"_blank",className:"btn btn-outline-primary",children:"Get Customer Signature"}),!u&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:c||l,children:["Send to Customer ",(c||l)&&Object(a.jsx)(av,{size:20})]})]})]}):d?null:Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("p",{className:"d-flex justify-content-center",children:u&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:c||l,children:["Submit ",(c||l)&&Object(a.jsx)(av,{size:20})]})})]})]})]})}},{key:"customer",get:function(){return this.extractContact(Tj.CUSTOMER)}}]),n}(p.PureComponent),vIe=Object(LO.compose)(Object(Gj.a)({form:mIe,enableReinitialize:!0}),v.g,Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me,formData:Object(eM.a)(mIe)(e)}})))(jIe),OIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.job,t.next=5,tG(n.id,JH.WORK_COMPLETION);case 5:r=t.sent,a=r?YH(r,n):null,e.setState({contract:a}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0);case 13:return t.prev=13,e.setState({working:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e,t,n=this.props,r=n.job,o=n.contacts,i=this.state,c=i.working,s=i.contract;return console.log(s),Object(a.jsx)(PQ,{children:c||void 0===s?Object(a.jsx)(av,{size:40}):Object(a.jsxs)("div",{className:"pr-4 pb-4",children:[Object(a.jsx)("h3",{className:"mb-5",children:Object(a.jsx)("strong",{children:"Statement of Work Complete"})}),Object(a.jsx)(vIe,{job:r,jobContacts:o.data,jobContract:s,initialValues:(null===s||void 0===s||null===(e=s.signatures)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.meta)||(null===s||void 0===s?void 0:s.meta)||{}})]})})}}]),n}(p.PureComponent),gIe=Object(LO.compose)(Object(b.b)((function(e){return{contacts:e.currentJobContacts}})))(OIe),xIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.service,n=e.works;return t&&n?Object(a.jsx)("div",{className:"pr-4 pb-4",children:Object(a.jsx)(LTe,Object(c.a)(Object(c.a)({},this.props),{},{special:!0,exclusion:!0,service:t}))}):null}}]),n}(p.Component),yIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.service;return e?Object(a.jsx)("div",{className:"pr-4 pb-4",children:Object(a.jsx)(LTe,Object(c.a)(Object(c.a)({},this.props),{},{special:!0,service:e,editable:{category:!0}}))}):null}}]),n}(p.Component),wIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[uy.listen(Kg.JobWorkAdded,(function(){}))],e.loadData=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p,h,b,f,m,v;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,r=e.props,a=r.job,o=r.services,i=r.categories,c=r.works,t.next=5,o.fetch({special:1});case 5:if(!(null===(s=t.sent)||void 0===s?void 0:s.length)){t.next=24;break}return l=j.a.find(s,{name:"Special"}),u=j.a.find(s,{name:"Exclusions"}),t.next=11,Promise.all([Promise.resolve([]),u?i.fetch(u.id,{job_id:a.id}):Promise.resolve([])]);case 11:return d=t.sent,p=Object(w.a)(d,2),h=p[0],b=p[1],e.setState({services:{special:l,exclusion:u},categories:{special:h,exclusion:b}}),t.next=18,Promise.all([Promise.resolve({data:[]}),c.fetch(a.id,void 0,{work_category_id:j.a.map(b,"id")})]);case 18:f=t.sent,m=Object(w.a)(f,2),m[0],v=m[1],e.setState({works:{exclusion:j.a.groupBy(v.data,(function(e){var t;return e.work_category_id||(null===(t=e.work)||void 0===t?void 0:t.work_category_id)}))}}),uy.emit(Kg.JobWorkLoaded,{exclusion:v.data});case 24:return t.prev=24,e.setState({working:!1}),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[1,,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.SpecialisWorks=function(t){var n,r,o;return Object(a.jsx)(yIe,Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state),{},{service:(null===(n=e.state.services)||void 0===n?void 0:n.special)||{},work:null===(r=e.state.works)||void 0===r?void 0:r.special,works:null===(o=e.state.works)||void 0===o?void 0:o.special}))},e.WorkExclusions=function(t){var n,r;return Object(a.jsx)(xIe,Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state),{},{service:(null===(n=e.state.services)||void 0===n?void 0:n.exclusion)||{},works:null===(r=e.state.works)||void 0===r?void 0:r.exclusion}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this.props.match,t=e.path,n=e.url,r=this.state.services;return this.state.working||!r?Object(a.jsx)(av,{size:40}):Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(t,"/works"),component:this.SpecialisWorks}),Object(a.jsx)(v.b,{path:"".concat(t,"/exclusions"),component:this.WorkExclusions}),Object(a.jsx)(v.a,{to:"".concat(n,"/works")})]})}}]),n}(p.PureComponent),_Ie=Object(LO.compose)(Mm({services:{fetch:HY},categories:{fetch:PY},works:{fetch:UY}}))(wIe),kIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).RoomsLayout=function(t){return Object(a.jsx)(BTe,Object(c.a)(Object(c.a)({},e.props),t))},e.WorksAndExclusionsLayout=function(t){return Object(a.jsx)(_Ie,Object(c.a)(Object(c.a)({},e.props),t))},e.SubContractorsLayout=function(t){return Object(a.jsx)(hIe,Object(c.a)(Object(c.a)({},e.props),t))},e.WorkCompletion=function(t){return Object(a.jsx)(gIe,Object(c.a)(Object(c.a)({},e.props),t))},e.PreStartCheckPage=function(t){return Object(a.jsx)(FQ,Object(c.a)(Object(c.a)({},e.props),t))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match,t=e.path,n=e.url;return Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{path:"".concat(t,"/pre-start-check"),component:this.PreStartCheckPage}),Object(a.jsx)(v.b,{path:"".concat(t,"/rooms"),component:this.RoomsLayout}),Object(a.jsx)(v.b,{path:"".concat(t,"/swe"),component:this.WorksAndExclusionsLayout}),Object(a.jsx)(v.b,{path:"".concat(t,"/contractors"),component:this.SubContractorsLayout}),Object(a.jsx)(v.b,{path:"".concat(t,"/work-completion"),component:this.WorkCompletion}),Object(a.jsx)(v.a,{to:"".concat(n,"/pre-start-check")})]})}}]),n}(p.PureComponent);function SIe(){var e=Object(f.a)(["\n  background: ",";\n  border: 1px "," solid;\n"]);return SIe=function(){return e},e}var CIe,NIe={1:6,2:3,3:2.8},EIe=x.default.div(SIe(),y.white,y.gray2);!function(e){e[e.ROOM=0]="ROOM"}(CIe||(CIe={}));var AIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={allWorks:{}},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.history,l=o.match.url;switch(n){case CIe.ROOM:return Object(a.jsx)(BAe,Object(c.a)({job:i,afterSubmit:function(e){s.push("".concat(l,"/rooms/").concat(e.id,"/details"))},onClose:e.hideModal,isOpen:!0},r))}return null},e.eventListeners=[uy.listen(Kg.JobRoomAdded,(function(t){if(t.job.id===e.props.job.id){var n=e.state.rooms,r=void 0===n?[]:n;r.push(t),e.setState(e.splitRooms(r))}})),uy.listen(Kg.JobRoomUpdated,(function(t){if(t.job.id===e.props.job.id){var n=e.state.rooms,r=void 0===n?[]:n,a=j.a.findIndex(r,{id:t.id});a>-1&&(r[a]=t,e.setState(e.splitRooms(r)))}})),uy.listen(Kg.JobRoomDeleted,(function(t){if(t.job.id===e.props.job.id){var n=e.state.rooms,r=void 0===n?[]:n,a=j.a.findIndex(r,{id:t.id});a>-1&&(r.splice(a,1),e.setState(e.splitRooms(r)))}})),uy.listen(Kg.JobWorkAdded,(function(t){Object(w.a)(t,1)[0]&&e.loadRooms()})),uy.listen(Kg.JobWorkUpdated,(function(t){t&&e.loadRooms()})),uy.listen(Kg.JobWorkDeleted,(function(t){t&&e.loadRooms()})),uy.listen(Kg.JobWorkLoaded,(function(t){e.setState({allWorks:Object(c.a)(Object(c.a)({},e.state.allWorks),t)})}))],e.loadLookups=Object(Um.a)(Fm.a.mark((function t(){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,n.roomsLookupsLoaded=!0,t.next=4,Promise.all([r(mQ()),r(jQ()),r(OQ()),r(gQ()),r(xQ()),r(yQ()),r(wQ()),r(_Q()),r(kQ({no_works:0,special:0}))]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),e.loadRooms=Object(Um.a)(Fm.a.mark((function t(){var n,r,a;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.job)){t.next=8;break}return e.setState({working:!0}),t.next=5,gY(n.id);case 5:r=t.sent,a=r.data,e.setState(Object(c.a)({working:!1},e.splitRooms(a)));case 8:case"end":return t.stop()}}),t)}))),e.splitRooms=function(t){return{rooms:j.a.each(t,e.calcRoomParameters),controlRoom:j.a.find(t,(function(e){return e.control&&!e.outside})),outsideRoom:j.a.find(t,(function(e){return e.outside})),nonControlRooms:j.a.filter(t,(function(e){return!e.control&&!e.outside}))}},e.calcRoomParameters=function(t){var n=e.props.preStartCheck;if(t.params={airMovers:{required:0,installed:0},dehums:{required:0,installed:0},preStartCheckClass:1},void 0!==n){var r,a=(null===n||void 0===n||null===(r=n.meta)||void 0===r?void 0:r.class_id)||t.params.preStartCheckClass,o=j.a.get(NIe,a,3);t.params.preStartCheckClass=a;var i=(t.dimensions_affected_length||0)*(t.dimensions_affected_width||0);t.params.airMovers.required=Math.ceil(i/5.5);var c=(t.dimensions_length||0)*(t.dimensions_width||0)*(t.dimensions_height||0);t.params.dehums.required=Math.ceil(c/o/55)}},e.duplicateRoom=function(t){return function(n){n.preventDefault(),e._duplicateRoom(t)}},e._duplicateRoom=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r,a,o,i;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),r=e.props,a=r.job,o=r.history,t.prev=2,t.next=5,vY(a.id,n.id);case 5:i=t.sent,uy.emit(Kg.JobRoomAdded,i),o.push("/jobs/".concat(a.id,"/water-form/rooms/").concat(i.id));case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[2,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.job_id,r=e.job;t(QR(n)),t(zP(n)),r&&(t(SQ(r)),t(CQ(r)),t(NQ(r))),this.isActive("/rooms")&&(this.loadRooms(),this.loadLookups()),um.status("Water Form - Job# ".concat(n))}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),um.reset()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.dispatch,a=t.match.params.job_id,o=t.job,i=t.preStartCheck,s=e.match.params.job_id,l=e.job,u=e.preStartCheck;if(!n.roomsLookupsLoaded&&this.isActive("/rooms")&&this.loadLookups(),o&&!l||o&&(+a!==+s||void 0===i&&i!==u)?(r(SQ(o)),r(CQ(o)),r(NQ(o))):void 0!==i&&i!==u&&this.state.rooms&&this.setState(Object(c.a)({},this.splitRooms(this.state.rooms))),+a!==+s)r(QR(a)),this.isActive("/rooms")&&this.loadRooms();else{var d=this.state,p=d.rooms;d.working||p||this.isActive("/rooms")&&this.loadRooms()}}},{key:"isActive",value:function(e){var t=this.props,n=t.location.pathname,r=t.match.url;return!!Object(v.f)(n,{path:r+e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.workCompletion,o=this.state,i=o.working,s=o.rooms,l=o.nonControlRooms,u=o.controlRoom,d=o.outsideRoom,p=!(!r||!j.a.find(r.signatures,{type:"customer"}));return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(PQ,{children:n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(EIe,{className:"print-hide",children:Object(a.jsxs)("div",{className:"p-3 d-flex justify-content-between align-items-center",children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:"Water Form"})}),Object(a.jsx)("div",{children:Object(a.jsx)(Uf.c,{className:"btn btn-outline-primary",to:"/job/".concat(n.id,"/details"),children:"View Job"})})]})}),Object(a.jsxs)(PQ,{children:[i&&!(null===s||void 0===s?void 0:s.length)&&Object(a.jsx)(av,{size:40}),Object(a.jsxs)("div",{className:"d-flex h-100",children:[Object(a.jsxs)("div",{className:"position-relative",children:[i&&(null===s||void 0===s?void 0:s.length)>0&&Object(a.jsx)(av,{size:30}),Object(a.jsxs)(Im,{width:350,children:[this.sidebarRoomsMenu.map((function(e){return Object(a.jsx)(ym,{item:e},e.path)})),!p&&Object(a.jsx)(_.Consumer,{children:function(t){return t.isOpen&&e.isActive("/rooms")&&Object(a.jsx)(Em,{children:Object(a.jsxs)("span",{className:"ml-3",onClick:e.showModal(CIe.ROOM),children:[Object(a.jsx)(Ff,{name:Ef.Add,size:14})," ",Object(a.jsx)("span",{className:"ml-2",children:"Add New Room"})]})})}}),this.sidebarMenu.map((function(e){return Object(a.jsx)(ym,{item:e},e.path)}))]})]}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)("div",{className:"pl-4 pt-4 flex-grow-1 h-100 position-relative",children:Object(a.jsx)(PQ,{children:(!this.isActive("/rooms")||s)&&Object(a.jsx)(kIe,Object(c.a)(Object(c.a)({},this.props),{},{rooms:s,nonControlRooms:l,controlRoom:u,outsideRoom:d,locked:p}))})})})]})]})]}):Object(a.jsx)(av,{size:40})})]})}},{key:"sidebarRoomsMenu",get:function(){var e=this,t=this.props,n=t.match.url,r=t.workCompletion,o=this.state,i=o.controlRoom,c=o.nonControlRooms,s=!(!r||!j.a.find(r.signatures,{type:"customer"})),l=[{path:"".concat(n,"/pre-start-check"),label:"Pre-Start Check",isActive:this.isActive("/pre-start-check")},{path:"".concat(n,"/rooms"),label:"Room Details & Scope of Works",isActive:this.isActive("/rooms")}];return this.isActive("/rooms")&&(l.push({path:"".concat(n,"/rooms/overview"),label:Object(a.jsx)("div",{className:"ml-3",children:"Overview & Floor Plan"}),isActive:this.isActive("/rooms/overview")}),l.push({path:"".concat(n,"/rooms/control-room"),label:Object(a.jsxs)("div",{className:"ml-3 text-truncate",children:["Control Readings: ",i&&Object(a.jsx)("span",{title:null===i||void 0===i?void 0:i.name,children:null===i||void 0===i?void 0:i.name})]}),isActive:this.isActive("/rooms/control-room")}),null===c||void 0===c||c.forEach((function(t){l.push({path:"".concat(n,"/rooms/").concat(t.id),label:Object(a.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(a.jsx)("div",{className:"flex-grow-1 text-truncate",children:t.name}),Object(a.jsx)("div",{onClick:function(e){return e.preventDefault()},children:Object(a.jsxs)("div",{className:"d-flex",children:[t.incomplete_works_count>0&&Object(a.jsx)("span",{className:"badge badge-info mr-2",title:"".concat(t.incomplete_works_count," work(s) are incomplete"),children:t.incomplete_works_count}),!s&&Object(a.jsx)(J3,{name:Ef.Duplicate,size:16,color:y.black0,fill:!0,hoverColor:y.blue1,onClick:e.duplicateRoom(t),title:"Create a copy of ".concat(t.name)})]})})]}),isActive:e.isActive("/rooms/".concat(t.id,"/:tab"))})}))),l}},{key:"sidebarMenu",get:function(){var e=this.props,t=e.generalAuthority,n=e.match.url,r=this.state.allWorks.exclusion,o=[];return o.push({path:"".concat(n,"/swe"),label:"Specialist Works and Exclusions",isActive:this.isActive("/swe")}),this.isActive("/swe")&&(o.push({path:"".concat(n,"/swe/works"),label:Object(a.jsx)("div",{className:"ml-3 text-truncate",children:"Specialist Works"}),isActive:this.isActive("/swe/works")}),o.push({path:"".concat(n,"/swe/exclusions"),label:Object(a.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(a.jsx)("div",{className:"flex-grow-1 text-truncate",children:"Exclusions"}),Object(a.jsx)("div",{onClick:function(e){return e.preventDefault()},children:Object(a.jsx)("div",{className:"d-flex",children:(null===r||void 0===r?void 0:r.length)>0&&Object(a.jsx)("span",{className:"badge badge-info mr-2",children:r.length})})})]}),isActive:this.isActive("/swe/exclusions")})),o.push({path:"".concat(n,"/contractors"),label:"Sub-Contractors & Notes",isActive:this.isActive("/contractors"),disabled:!t||!j.a.find(t.signatures,{type:"customer"})}),o.push({path:"".concat(n,"/work-completion"),label:"Work Complete",isActive:this.isActive("/work-completion"),disabled:!t||!j.a.find(t.signatures,{type:"customer"})}),o}}]),n}(p.PureComponent);AIe.roomsLookupsLoaded=!1;var TIe=Object(LO.compose)(Object(b.b)((function(e){return{job:e.currentJob.data,jobContacts:e.currentJobContacts.data,preStartCheck:e.waterForm.preStartCheck,generalAuthority:e.waterForm.generalAuthority,workCompletion:e.waterForm.workCompletion}})))(AIe);function IIe(){var e=Object(f.a)(["\n  padding-top: 55px;\n  height: 100%;\n  width: 100%;\n"]);return IIe=function(){return e},e}var RIe=x.default.div(IIe()),DIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).userContext=void 0,r.has=function(e){var t=r.props.user;return!(!t.me||!t.me.permissions.has(e))},r.computeManagePermission=function(e){return Rw.some((function(t){return e(t)}))},r.userContext={has:r.has,user:r.props.user.me},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,n=e.dispatch,r=e.history;n(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([ly.getAssignmentTypes()]).then((function(e){var n=Object(w.a)(e,1)[0];t({type:b0,payload:{jobAssignmentTypes:n}})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a$(t,vK.accountingOrganizations,KX.getAccountingOrganizations),a$(t,vK.taxRates,KX.getTaxRates),a$(t,vK.gsCodes,KX.getGSCodes);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(CP()),n(function(){var e=Object(Um.a)(Fm.a.mark((function e(t){var n;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:k0}),e.prev=1,e.next=4,Jv.getContactStatuses();case 4:n=e.sent,t({type:S0,payload:n}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),t({type:C0,payload:null}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),n(iS(o1,i1,c1,sg.searchCountries)),n(iS(l1,u1,d1,sg.searchStates)),n(C1()),t&&t.me&&x3(t.me.id,r)}},{key:"getRoutes",value:function(){return Object(m.compact)([this.has(Dw.JOBS_VIEW)&&{path:"/jobs",name:"Jobs"},this.has(Dw.CONTACTS_VIEW)&&{path:"/contacts",name:"Contacts"},{path:"/finance",name:"Finance",items:[[{path:"/finance/invoices/draft",name:"Invoices"},{path:"/finance/purchase-orders/draft",name:"Purchase Orders"},{path:"/finance/credit-notes/draft",name:"Credit Notes"}],[{path:"/finance/receive-payment",name:"Receive a Payment"},{path:"/finance/forward-invoice-payments/new",name:"Forward Invoice Payments"}],[{path:"/finance/reimbursements",name:"Reimbursements"},{path:"/finance/timesheet-payroll",name:"Timesheet Payroll"}]]},{path:"/operations",name:"Operations",items:[[{path:"/operations/schedule/jobs",name:"Schedule"}],[{path:"/operations/warehousing",name:"Warehousing"}]]}])}},{key:"render",value:function(){var e=this.props,t=e.modal.confirm,n=t.active,r=t.hash,o=t.title,i=t.body,c=e.dispatch;return Object(a.jsx)(Cw.Provider,{value:this.userContext,children:Object(a.jsxs)("div",{className:"h-100",children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",html:!0}),n&&Object(a.jsx)(u4,{isOpen:n,hash:r,title:o,body:i,onClose:function(){var e;c((e="Confirm",function(t){t({type:"Steamatic/Modal/".concat(e,"/CLOSE")})}))}}),Object(a.jsx)(Gm.b,{closeButton:Object(a.jsx)(Ff,{name:Ef.ToastClose,size:18}),newestOnTop:!0,transition:Gm.a}),Object(a.jsx)(l4,{routes:this.getRoutes()}),Object(a.jsx)(RIe,{children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(AI,{path:"/jobs/:job_id/water-form",component:TIe,permission:Dw.JOBS_VIEW}),Object(a.jsx)(AI,{path:"/job/:id",component:XQ,permission:Dw.JOBS_VIEW}),Object(a.jsx)(AI,{path:"/jobs",component:Qk,permission:Dw.JOBS_VIEW}),Object(a.jsx)(AI,{path:"/usage-and-actuals/:id",component:kge,permission:Dw.JOBS_USAGE_VIEW}),Object(a.jsx)(AI,{path:"/contacts",component:XI,permission:Dw.CONTACTS_VIEW}),Object(a.jsx)(AI,{path:"/finance/invoices/create/:tempId?",component:P6,permission:Dw.INVOICES_MANAGE}),Object(a.jsx)(AI,{path:"/finance/invoices/details/:id",component:P6,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/finance/invoices/:type",component:P7,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/finance/purchase-orders/create",component:H6,permission:Dw.PURCHASE_ORDERS_MANAGE}),Object(a.jsx)(AI,{path:"/finance/purchase-orders/details/:id",component:H6,permission:Dw.PURCHASE_ORDERS_VIEW}),Object(a.jsx)(AI,{path:"/finance/purchase-orders/:type",component:B6,permission:Dw.PURCHASE_ORDERS_VIEW}),Object(a.jsx)(AI,{path:"/finance/credit-notes/create",component:r9,permission:Dw.CREDIT_NOTES_MANAGE}),Object(a.jsx)(AI,{path:"/finance/credit-notes/details/:id",component:r9,permission:Dw.CREDIT_NOTES_MANAGE}),Object(a.jsx)(AI,{path:"/finance/credit-notes/:type",component:Z6,permission:Dw.CREDIT_NOTES_VIEW}),Object(a.jsx)(AI,{path:"/finance/receive-payment",component:tee,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/finance/forward-invoice-payments/new",component:vee,permission:Dw.PAYMENTS_FORWARD}),Object(a.jsx)(AI,{path:"/finance/forward-invoice-payments/received",component:Nee,permission:Dw.PAYMENTS_FORWARD}),Object(a.jsx)(AI,{path:"/finance/reimbursements",component:Eee,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/finance/timesheet-payroll",component:Aee,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/operations/schedule/config/:section",component:CAe,permission:Dw.OPERATIONS_RUNS_TEMPLATES_MANAGE}),Object(a.jsx)(AI,{path:"/operations/schedule/:section",component:Foe,permission:Dw.OPERATIONS_RUNS_VIEW}),Object(a.jsx)(AI,{path:"/operations/warehousing",component:mAe,permission:Dw.OPERATIONS_INVENTORY_VIEW}),Object(a.jsx)(AI,{path:"/reports/account-transactions",component:tte,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/aged-receivables-summary",component:nte,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/aged-receivables-detailed",component:rte,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/income-by-account-summary",component:ate,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/income-by-account-detailed",component:ote,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/gst-summary",component:Ete,permission:Dw.FINANCIALS_REPORTS_VIEW}),Object(a.jsx)(AI,{path:"/reports/statement-by-contact-summary",component:Ate,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/invoice-payments",component:Bte,permission:Dw.INVOICES_VIEW}),Object(a.jsx)(AI,{path:"/reports/financial-report/:type",component:ySe,permission:Dw.FINANCIALS_REPORTS_VIEW}),Object(a.jsx)(AI,{path:"/reports/trial-balance",component:uke,permission:Dw.FINANCIALS_REPORTS_VIEW}),Object(a.jsx)(AI,{path:"/manage",permission:this.computeManagePermission,component:oke}),Object(a.jsx)(v.b,{path:"/not-found",component:nR}),Object(a.jsx)(v.b,{path:"/unauthorized",component:h4}),Object(a.jsx)(v.a,{to:"/jobs"})]})})]})})}}]),n}(p.PureComponent),MIe=Object(LO.compose)(v.g,Object(b.b)((function(e){return{modal:e.modal,user:e.user}})),Object(Jte.DragDropContext)(qte.a),(function(e){return h.a.memo((function(t){var n=Object(p.useState)(!0),r=Object(w.a)(n,2),o=r[0],i=r[1];return Object(a.jsx)(_.Provider,{value:{isOpen:o,toggleSidebar:function(){return i(!o)}},children:Object(a.jsx)(e,Object(c.a)({},t))})}))}))(DIe),PIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(ZO,Object(c.a)(Object(c.a)({},this.props),{},{type:"password"}))}}]),n}(p.PureComponent);function LIe(){var e=Object(f.a)(["\n  border-color: ",";\n  color: ",";\n\n  :hover {\n    border-color: ",";\n    background: ",";\n  }\n"]);return LIe=function(){return e},e}function FIe(){var e=Object(f.a)(["\n  margin: 30px 0 20px;\n  text-align: center;\n  color: ",";\n"]);return FIe=function(){return e},e}function UIe(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return UIe=function(){return e},e}var VIe=x.default.div(UIe(),Vf.medium),BIe=x.default.div(FIe(),y.gray3),JIe=x.default.a(LIe(),y.blue2,y.blue2,y.blue3,y.blue3),zIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getOffice365Link",value:function(){var e={client_id:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://apistg.steamatic.com.au",REACT_APP_HELPSCOUT_BEACON_ID:"70d78cd7-3591-42af-9dc2-cfaac0d4c64e",REACT_APP_PASSWORD_CLIENT_ID:"1",REACT_APP_PASSWORD_CLIENT_SECRET:"fu0vbRuqPXaywXqMEvdcb61SDN1Bqy5QAMOsRzwb",REACT_APP_PUSHER_CLUSTER:"ap4",REACT_APP_PUSHER_KEY:"fb067bbe30a915d30682"}).REACT_APP_OFFICE_365_CLIENT_ID,response_type:"token",redirect_uri:encodeURI(window.location.href.replace("login","office365-success")),scope:"user.read",response_mode:"fragment"};return"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?".concat(qm.stringify(e))}},{key:"render",value:function(){var e=this.props.submitting;return Object(a.jsx)("div",{className:"row login-form-wrapper mb-5",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{className:"row mb-3",children:Object(a.jsx)(VIe,{className:"col",children:"Log in"})}),Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(yv.a,{name:"login",placeholder:"Email address",component:ZO,disabled:e,validate:uv}),Object(a.jsx)(yv.a,{name:"password",placeholder:"Password",component:PIe,disabled:e,validate:uv})]}),Object(a.jsxs)("div",{className:"row d-flex h-100",children:[Object(a.jsx)("div",{className:"col-lg-3 justify-content-center align-self-center",children:Object(a.jsx)(Cg,{type:"submit",className:"btn py-2 px-3",disabled:e,children:"Log in"})}),Object(a.jsx)("div",{className:"col-lg-9 justify-content-center align-self-center",children:Object(a.jsx)("a",{href:"#",children:"Forgot your password?"})})]}),Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)(BIe,{children:"OR"}),Object(a.jsx)(JIe,{className:"btn btn-outline-primary",href:this.getOffice365Link(),children:"Sign-in with Office 365"})]})]})]})})}}]),n}(p.PureComponent),qIe=Object(Gj.a)({form:"LoginForm"})(zIe);function WIe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n  height: 1rem;\n"]);return WIe=function(){return e},e}function HIe(){var e=Object(f.a)(["\n  font-size: 22px;\n  text-align: center;\n  padding: 55px;\n  font-weight: normal;\n"]);return HIe=function(){return e},e}function GIe(){var e=Object(f.a)(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 33px 0;\n"]);return GIe=function(){return e},e}function YIe(){var e=Object(f.a)(["\n  background: ",";\n  height: 100%;\n"]);return YIe=function(){return e},e}var QIe,KIe=x.default.div(YIe(),y.gray1),ZIe=x.default.div(GIe(),y.white,y.gray2),XIe=x.default.h1(HIe()),$Ie=x.default.div(WIe(),y.red1,Bf.bold),eRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:!1,loading:!1},e.handleSubmit=function(){var t=Object(Um.a)(Fm.a.mark((function t(n){var r;return Fm.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,vj.login(n.login,n.password);case 4:if(!(r=t.sent).access_token){t.next=10;break}return t.next=8,e.props.dispatch(kP());case 8:t.next=12;break;case 10:throw e.setState({loading:!1}),r;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),console.warn(t.t0),e.setState({error:!0,loading:!1});case 18:return t.abrupt("return",r);case 19:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.loading;return Object(a.jsx)(KIe,{children:Object(a.jsx)("div",{className:"container h-100",children:Object(a.jsx)("div",{className:"row justify-content-center h-100",children:Object(a.jsxs)("div",{className:"col col-lg-8",children:[Object(a.jsxs)(XIe,{children:[Object(a.jsx)("strong",{children:"Steamatic"})," NIS"]}),Object(a.jsxs)(ZIe,{className:"row",children:[Object(a.jsx)("div",{className:"col border-right p-4"}),Object(a.jsxs)("div",{className:"col p-4",children:[e&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(qIe,{onSubmit:this.handleSubmit}),Object(a.jsx)($Ie,{children:this.state.error?"Invalid login or password":""})]})]})]})})})})}}]),n}(p.PureComponent),tRe=Object(LO.compose)(Object(b.b)(),v.g)(eRe),nRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(Um.a)(Fm.a.mark((function e(){var t,n=this;return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=qm.parse(this.props.location.hash.slice(1)),e.prev=1,e.next=4,vj.loginWithOffice365(t.access_token);case 4:this.props.dispatch(kP()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),setTimeout((function(){return n.props.history.push("/login")}),1e3);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Gm.b,{}),"Wait..."]})}}]),n}(p.PureComponent),rRe=Object(LO.compose)(Object(b.b)(),v.g)(nRe);!function(e){e.getSessionStorage="getSessionStorage",e.setSessionStorage="setSessionStorage"}(QIe||(QIe={}));function aRe(){var e=Object(f.a)(["\n  font-size: 14px;\n"]);return aRe=function(){return e},e}function oRe(){var e=Object(f.a)(["\n  font-size: 14px;\n  padding: 10px;\n  border: 1px solid #d3dbde;\n"]);return oRe=function(){return e},e}function iRe(){var e=Object(f.a)(["\n  border: 1px solid #d3dbde;\n  padding: 10px;\n  background-color: #f9fafa;\n  display: flex;\n  justify-content: space-between;\n  .status1 {\n    background-color: #23b376;\n    border-radius: 3px;\n    padding: 3px;\n    color: white;\n  }\n\n  .status2 {\n    background-color: #909698;\n    border-radius: 3px;\n    padding: 3px;\n    color: white;\n  }\n"]);return iRe=function(){return e},e}function cRe(){var e=Object(f.a)(["\n  margin: 20px 0;\n"]);return cRe=function(){return e},e}function sRe(){var e=Object(f.a)(["\n  border: 1px solid #d3dbde;\n  padding: 10px;\n"]);return sRe=function(){return e},e}function lRe(){var e=Object(f.a)(["\n  width: 60%;\n"]);return lRe=function(){return e},e}function uRe(){var e=Object(f.a)(["\n  font-size: 18px;\n  margin: 30px 0 0 30px;\n  font-weight: bold;\n"]);return uRe=function(){return e},e}function dRe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return dRe=function(){return e},e}function pRe(){var e=Object(f.a)(["\n  padding: 8px 12px;\n  color: #3498db;\n  font-weight: lighter;\n  border-color: #3498db;\n  box-shadow: 0 0 0 !important;\n  cursor: pointer;\n  border-radius: 5px;\n  font-size: 13px;\n  margin: 0 10px;\n"]);return pRe=function(){return e},e}function hRe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n"]);return hRe=function(){return e},e}function bRe(){var e=Object(f.a)(["\n  font-size: 18px;\n  color: #1d1d1d;\n"]);return bRe=function(){return e},e}function fRe(){var e=Object(f.a)(["\n  padding: 14px 28px 14px 20px;\n  border-bottom: 1px solid #d3dbde;\n"]);return fRe=function(){return e},e}var mRe=x.default.div(fRe()),jRe=x.default.div(bRe()),vRe=x.default.div(hRe()),ORe=x.default.button(pRe()),gRe=x.default.div(dRe()),xRe=x.default.div(uRe()),yRe=x.default.div(lRe()),wRe=x.default.div(sRe()),_Re=x.default.div(cRe()),kRe=x.default.div(iRe()),SRe=x.default.div(oRe()),CRe=x.default.div(aRe()),NRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,report:null},e.makeVisiableData=function(){var t=e.props.match.params.id;e.getData(t).then((function(t){e.setState({loading:!1,report:t[0].data})}))},e.getData=function(e){var t=[d2.getInventoryReport(e)];return Promise.all(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.makeVisiableData()}},{key:"renderItems",value:function(){var e=[],t=[],n=this.state.report;return(n?n.items:[]).forEach((function(n){var r=n.statuses;r.length>0&&("Restorable"===r[r.length-1].status?e.push(Object(a.jsxs)(_Re,{children:[Object(a.jsxs)(kRe,{children:[Object(a.jsx)("div",{children:n.name}),Object(a.jsx)("div",{className:"status1",children:"RESTORABLE"})]}),Object(a.jsxs)(SRe,{children:[Object(a.jsx)(CRe,{children:"Estimated Restorable Cost: ".concat(n.restoration_cost)}),Object(a.jsx)(CRe,{children:"Estimated Replacement Cost: ".concat(n.estimated_replacement_cost)}),n.photos.length>0&&Object(a.jsx)($Ne,{photos:n.photos,selectedPhotos:[],setSelectedPhotos:function(){},inventoryItem:n,loadPhotos:Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),itemName:n.name,onlyView:!0})]})]})):t.push(Object(a.jsxs)(_Re,{children:[Object(a.jsxs)(kRe,{children:[Object(a.jsx)("div",{children:n.name}),Object(a.jsx)("div",{className:"status2",children:"NON-RESTORABLE"})]}),Object(a.jsxs)(SRe,{children:[Object(a.jsx)(CRe,{children:"Estimated Restorable Cost: ".concat(n.restoration_cost)}),Object(a.jsx)(CRe,{children:"Estimated Replacement Cost: ".concat(n.estimated_replacement_cost)}),n.photos.length>0&&Object(a.jsx)($Ne,{photos:n.photos,selectedPhotos:[],setSelectedPhotos:function(){},inventoryItem:n,loadPhotos:Object(Um.a)(Fm.a.mark((function e(){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),itemName:n.name,onlyView:!0})]})]})))})),e.concat(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.report,o=r?r.address:"",i=r?r.job_number:"",c=r?r.restorable_items_count:0,s=r?r.non_restorable_items_count:0;return Object(a.jsx)(Cw.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(Jf.a,{className:"overlapping",effect:"solid",place:"right"}),Object(a.jsxs)(mRe,{className:"d-flex flex-row justify-content-between",children:[Object(a.jsxs)(vRe,{children:[Object(a.jsx)(jRe,{children:"Steamatic"}),!n&&Object(a.jsx)(gRe,{children:"".concat(o||"Unknown"," | ").concat(i)})]}),Object(a.jsx)(vRe,{children:Object(a.jsx)(ORe,{children:"Print"})})]}),Object(a.jsx)("div",{className:"h-100",children:Object(a.jsx)(uC,{className:"h-100",style:{paddingBottom:"20px"},children:Object(a.jsxs)(yRe,{className:"flex-grow-1 position-relative mx-auto",children:[n&&Object(a.jsx)(av,{size:40,color:y.white}),Object(a.jsx)(xRe,{children:"Inventory Report"}),Object(a.jsxs)(hC,{children:[Object(a.jsx)(wRe,{children:"".concat(c," Restorable Items")}),Object(a.jsx)(wRe,{children:"".concat(s," Non-Restorable Items")}),e.renderItems()]})]})})})]})}})}}]),n}(h.a.PureComponent),ERe=Object(LO.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),v.g)(NRe);function ARe(){var e=Object(f.a)(["\n  font-size: 18px;\n  color: #1d1d1d;\n"]);return ARe=function(){return e},e}function TRe(){var e=Object(f.a)(["\n  padding: 14px 28px 14px 20px;\n  border-bottom: 1px solid #d3dbde;\n"]);return TRe=function(){return e},e}var IRe=x.default.div(TRe()),RRe=x.default.div(ARe()),DRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.uid;this.setState({working:!0}),Promise.all([cG(t).then((function(t){var n=YH(t,ix(t.job));e.setState({contract:n})})).catch((function(){e.setState({notFound:!0})})),ly.getContactsByContractUid(t).then((function(t){e.setState({contacts:t})}))]).catch((function(e){console.log(e)})).finally((function(){e.setState({working:!1})}))}},{key:"render",value:function(){var e=this.state,t=e.contract,n=e.contacts,r=e.working,o=e.notFound;return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(Gm.b,{}),Object(a.jsx)("div",{children:Object(a.jsx)(IRe,{className:"d-flex flex-row justify-content-between",children:Object(a.jsxs)(RRe,{children:[Object(a.jsx)("strong",{children:"Steamatic"})," NIS"]})})}),Object(a.jsxs)(uC,{className:"h-100",style:{backgroundColor:y.gray0},children:[r&&Object(a.jsx)(av,{size:40}),o?Object(a.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:Object(a.jsx)("h1",{children:"The contract number you've specified does not exist or has been cancelled."})}):t&&n?[JH.PRE_START_CHECK,JH.CONTENTS_INVENTORY,JH.WORK_COMPLETION].includes(t.type)?Object(a.jsx)(hC,{children:Object(a.jsx)("div",{className:"py-4 px-5",style:{maxWidth:"250mm",margin:"auto",backgroundColor:"#fff",border:"1px solid ".concat(y.gray2)},children:function(e){var r=Object(w.a)(e,3),o=r[0],i=r[1],c=r[2];return i?Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)("h3",{className:"mb-5",children:Object(a.jsx)("strong",{children:o})}),Object(a.jsx)(i,{job:t.job,jobContacts:n,jobContract:t,initialValues:c||t.meta,user:null})]}):null}(function(){var e;switch(t.type){case JH.PRE_START_CHECK:return["Pre-Start Check",RQ];case JH.CONTENTS_INVENTORY:return["Contents Inventory",iIe];case JH.WORK_COMPLETION:return["Statement of Work Complete",vIe,null===(e=t.signatures[0])||void 0===e?void 0:e.meta]}return[null,null]}())})}):Object(a.jsx)(WG,{user:null,a4:!0,job:t.job,jobContacts:n,jobContract:t,defaultMeta:{},beforeSubmit:function(){var e=Object(Um.a)(Fm.a.mark((function e(n,r){return Fm.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.type!==JH.GENERAL_AUTHORITY){e.next=5;break}return e.abrupt("return",GG.validate(n,r));case 5:if(t.type!==JH.JOB_CONTRACT){e.next=7;break}return e.abrupt("return",iY.validate(n,r));case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n){return e.apply(this,arguments)}}(),beforeSign:function(e,n,r){try{if(t.type===JH.JOB_CONTRACT)return iY.validateSignatureMeta(e,n,r,t);if(t.type===JH.JOB_FORM_WORK_COMPLETION)return qQ.validateSignatureMeta(e,n,r,t)}catch(a){throw a}return!0}}):null]})]})}}]),n}(p.Component),MRe=Object(v.g)(DRe),PRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLoading:!0},e.handleUserLoad=function(){e.setState({isLoading:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),($m.addMessageHandler({type:QIe.getSessionStorage,handler:function(){sessionStorage.length&&$m.messageBroadcast(Object(c.a)({type:QIe.setSessionStorage},sessionStorage))}}),new Promise((function(e){sessionStorage.length>0?e(void 0):($m.messageBroadcast({type:QIe.getSessionStorage}),setTimeout(e,1e3)),$m.addMessageHandler({type:QIe.setSessionStorage,handler:function(e){if(!sessionStorage.length)return Object.keys(e).forEach((function(t){window.sessionStorage.setItem(t,e[t])})),Promise.resolve()}})}))).then((function(){if(!Jm(Pm.access_token))return e.handleUserLoad();nj(),e.props.dispatch(kP()).then(e.handleUserLoad).catch(e.handleUserLoad)}))}},{key:"render",value:function(){var e=this.props.user;return this.state.isLoading?"Loading...":Object(a.jsx)(Uf.a,{children:Object(a.jsxs)(v.d,{children:[Object(a.jsx)(v.b,{exact:!0,path:"/operations/warehousing/inventories/:id/report",component:function(e){return Object(a.jsx)(ERe,Object(c.a)({},e))}}),Object(a.jsx)(v.b,{exact:!0,path:"/external/job/contract/:uid",component:MRe}),e?Object(a.jsx)(v.b,{path:"/",component:MIe}):Object(a.jsx)(v.b,{exact:!0,path:"/login",component:function(e){return Object(a.jsx)(tRe,Object(c.a)({},e))}}),Object(a.jsx)(v.b,{path:"/office365-success",component:function(e){return Object(a.jsx)(rRe,Object(c.a)({},e))}}),Object(a.jsx)(v.a,{to:"/login"})]})})}}]),n}(p.Component),LRe=Object(b.b)((function(e){return{user:e.user.me}}))(PRe);n(1050),n(1051),n(1052),n(1053);o.render(Object(a.jsx)(b.a,{store:h3,children:Object(a.jsx)(LRe,{})}),document.getElementById("root"))},114:function(e,t,n){e.exports={xs:"FinanceItems_xs__3vX-D",sm:"FinanceItems_sm__3NDM6",md:"FinanceItems_md__1Y44Z",remove:"FinanceItems_remove__3ODpO",total:"FinanceItems_total__1YgRE"}},947:function(e,t,n){}},[[1054,1,2]]]);