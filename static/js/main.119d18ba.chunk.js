/*! For license information please see main.119d18ba.chunk.js.LICENSE.txt */
(this["webpackJsonpnew-nis"]=this["webpackJsonpnew-nis"]||[]).push([[0],{1008:function(e,t,n){},1009:function(e,t,n){},1034:function(e,t){},1082:function(e,t,n){},1083:function(e,t,n){"use strict";n.r(t);var r={};n.r(r),n.d(r,"hydrateJobContract",(function(){return PH})),n.d(r,"getContracts",(function(){return FH})),n.d(r,"getContractTemplate",(function(){return BH})),n.d(r,"getJobContracts",(function(){return JH})),n.d(r,"getJobLatestContract",(function(){return zH})),n.d(r,"addContractToJob",(function(){return WH})),n.d(r,"getJobContractDetail",(function(){return YH})),n.d(r,"getJobContractDetailByUid",(function(){return KH})),n.d(r,"updateJobContract",(function(){return XH})),n.d(r,"deleteJobContract",(function(){return eY})),n.d(r,"sendEmail",(function(){return nY})),n.d(r,"uploadSignature",(function(){return aY}));var a=n(0),o=n(39),i=n.n(o),c=n(7),s=n(8),l=n(9),u=n(11),d=n(10),p=n(1),h=n.n(p),b=n(15),f=n(6),m=(n(635),n(12)),j=n.n(m),v=n(20),O=n(19),g=n(22),x=n.n(g),y=n(5),_={black0:"#1d1d1d",black1:"#000000",gray0:"#fafafa",gray1:"#f1f1f1",semiGray:"#F6F6F6",gray2:"#d3dbde",gray3:"#9F9F9F",gray4:"#959595",gray5:"#5D5D5D",gray6:"#A59FA7",gray7:"#F9FAFA",menu:"#3a424b",white:"#ffffff",white1:"#f0f3f4",red1:"#C47272",blue0:"#EBF7FF",blue1:"#37B2E0",blue2:"#42A6E6",blue3:"#3296D6",blue4:"#289ecb",blue5:"#0056b3",blue6:"#4D5762",green0:"#71BA90",green1:"#F5FFFB",green2:"#23B376",green3:"#d4edda",green4:"#28a745",purple0:"#BD83E8",purple1:"#9B71BA",purple2:"#8C4FB9",orange0:"#FFF7E6",orange1:"#FFC646",orange2:"#F5AA00",transparent:"transparent",yellow:"#F5AA01",bootstrap:{success0:"#d4edda",success1:"#c3e6cb",success2:"#155724",warning0:"#fff3cd",warning1:"#ffeeba",warning2:"#856404",danger0:"#f8d7da",danger1:"#f5c6cb",danger2:"#721c24",info0:"#ffffff",info1:"#d3dbde",info2:"#5D5D5D",outline:"#80bdff",boxShadow:"rgba(0,123,255,.25)"}},w=n(38),S=h.a.createContext({isOpen:!0,toggleSidebar:function(){return null}});var k=n(16);function C(){return(C=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function N(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var E=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),A=p.createElement("line",{className:"a",x1:.75,y1:12,x2:23.25,y2:12}),I=p.createElement("line",{className:"a",x1:12,y1:.75,x2:12,y2:23.25});function T(e,t){var n=e.title,r=e.titleId,a=N(e,["title","titleId"]);return p.createElement("svg",C({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,E,A,I)}var R=p.forwardRef(T);n.p;function D(){return(D=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var L=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),P=p.createElement("line",{className:"a",x1:12,y1:7.5,x2:12,y2:16.5}),F=p.createElement("line",{className:"a",x1:7.5,y1:12,x2:16.5,y2:12}),U=p.createElement("circle",{className:"a",cx:12,cy:12,r:11.25});function B(e,t){var n=e.title,r=e.titleId,a=M(e,["title","titleId"]);return p.createElement("svg",D({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,L,P,F,U)}var V=p.forwardRef(B);n.p;function J(){return(J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function q(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var z=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21.4926,13.0074c2.34315,2.34315 2.34315,6.14214 0,8.48528c-2.34315,2.34315 -6.14214,2.34315 -8.48528,0c-2.34315,-2.34315 -2.34315,-6.14214 -1.77636e-15,-8.48528c2.34315,-2.34315 6.14214,-2.34315 8.48528,-1.77636e-15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,14.25v6"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,17.25h6"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,20.25h-6l-2.85346e-08,7.10738e-10c-0.808294,0.0201329 -1.47987,-0.618798 -1.5,-1.42709c-0.000605234,-0.0242988 -0.000605233,-0.048609 1.42148e-09,-0.0729079v-14.893l-3.02309e-08,-9.22202e-07c-0.0281074,-0.857435 0.642664,-1.57605 1.5,-1.607h15l4.38612e-08,1.58319e-09c0.857337,0.030946 1.52811,0.749565 1.5,1.607v4.393"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.25,0.75v4.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,0.75v4.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,0.75v4.5"}));function G(e,t){var n=e.title,r=e.titleId,a=q(e,["title","titleId"]);return p.createElement("svg",J({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,z)}var W=p.forwardRef(G);n.p;function H(){return(H=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Y(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Q=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12,18.75h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v1.63918e-08c0,-0.207107 -0.167893,-0.375 -0.375,-0.375v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeWidth:1.5,d:"M12,15.75v-7.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.621,1.76l3.9326e-08,8.00607e-08c-0.43975,-0.895254 -1.52198,-1.26451 -2.41724,-0.824762c-0.358575,0.176133 -0.648629,0.466187 -0.824762,0.824762l-9.473,19.298l-1.5871e-08,3.22857e-08c-0.370583,0.753864 -0.0598732,1.66541 0.69399,2.03599c0.209097,0.102788 0.439014,0.156164 0.67201,0.156009h19.456l4.34975e-08,2.88658e-11c0.840025,0.000557409 1.52145,-0.679965 1.52201,-1.51999c0.000154607,-0.232996 -0.0532212,-0.462912 -0.156009,-0.67201Z"}));function K(e,t){var n=e.title,r=e.titleId,a=Y(e,["title","titleId"]);return p.createElement("svg",H({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Q)}var Z=p.forwardRef(K);n.p;function X(){return(X=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ee=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),te=p.createElement("line",{className:"a",x1:.749,y1:23.25,x2:22.499,y2:23.25}),ne=p.createElement("path",{className:"a",d:"M2.749,18.75H5.5a.5.5,0,0,1,.5.5v4a0,0,0,0,1,0,0H2.249a0,0,0,0,1,0,0v-4A.5.5,0,0,1,2.749,18.75Z"}),re=p.createElement("path",{className:"a",d:"M10.249,9.75H13a.5.5,0,0,1,.5.5v13a0,0,0,0,1,0,0H9.749a0,0,0,0,1,0,0v-13A.5.5,0,0,1,10.249,9.75Z"}),ae=p.createElement("path",{className:"a",d:"M17.749,14.25H20.5a.5.5,0,0,1,.5.5v8.5a0,0,0,0,1,0,0h-3.75a0,0,0,0,1,0,0v-8.5A.5.5,0,0,1,17.749,14.25Z"}),oe=p.createElement("line",{className:"a",x1:6.883,y1:5.121,x2:2.866,y2:9.134}),ie=p.createElement("line",{className:"a",x1:14.311,y1:6.325,x2:9.637,y2:5.075}),ce=p.createElement("line",{className:"a",x1:20.392,y1:2.889,x2:16.811,y2:5.689}),se=p.createElement("circle",{className:"a",cx:8.249,cy:4.501,r:1.5}),le=p.createElement("circle",{className:"a",cx:21.75,cy:2.25,r:1.5}),ue=p.createElement("circle",{className:"a",cx:15.75,cy:6.75,r:1.5}),de=p.createElement("circle",{className:"a",cx:2.249,cy:10.501,r:1.5});function pe(e,t){var n=e.title,r=e.titleId,a=$(e,["title","titleId"]);return p.createElement("svg",X({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ee,te,ne,re,ae,oe,ie,ce,se,le,ue,de)}var he=p.forwardRef(pe);n.p;function be(){return(be=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var me=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),je=p.createElement("path",{className:"a",d:"M21.75,9.75v9a3,3,0,0,1-3,3H5.25a3,3,0,0,1-3-3v-9"}),ve=p.createElement("path",{className:"a",d:"M21.75,2.25H2.25a1.5,1.5,0,0,0-1.5,1.5v3h22.5v-3A1.5,1.5,0,0,0,21.75,2.25Z"}),Oe=p.createElement("path",{className:"a",d:"M15,11.25a1.5,1.5,0,0,1-1.5,1.5h-3a1.5,1.5,0,0,1,0-3h3A1.5,1.5,0,0,1,15,11.25Z"});function ge(e,t){var n=e.title,r=e.titleId,a=fe(e,["title","titleId"]);return p.createElement("svg",be({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,me,je,ve,Oe)}var xe=p.forwardRef(ge);n.p;function ye(){return(ye=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function _e(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var we=p.createElement("g",null,p.createElement("path",{id:"Arrow_Back",d:"M374.212,182.3H39.432l100.152-99.767c4.704-4.704,4.704-12.319,0-17.011 c-4.704-4.704-12.319-4.704-17.011,0L3.474,184.61c-4.632,4.632-4.632,12.379,0,17.011l119.1,119.1 c4.704,4.704,12.319,4.704,17.011,0c4.704-4.704,4.704-12.319,0-17.011L39.432,206.36h334.779c6.641,0,12.03-5.39,12.03-12.03 S380.852,182.3,374.212,182.3z"}),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null)),Se=p.createElement("g",null),ke=p.createElement("g",null),Ce=p.createElement("g",null),Ne=p.createElement("g",null),Ee=p.createElement("g",null),Ae=p.createElement("g",null),Ie=p.createElement("g",null),Te=p.createElement("g",null),Re=p.createElement("g",null),De=p.createElement("g",null),Me=p.createElement("g",null),Le=p.createElement("g",null),Pe=p.createElement("g",null),Fe=p.createElement("g",null),Ue=p.createElement("g",null);function Be(e,t){var n=e.title,r=e.titleId,a=_e(e,["title","titleId"]);return p.createElement("svg",ye({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 386.242 386.242",style:{enableBackground:"new 0 0 386.242 386.242"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,we,Se,ke,Ce,Ne,Ee,Ae,Ie,Te,Re,De,Me,Le,Pe,Fe,Ue)}var Ve=p.forwardRef(Be);n.p;function Je(){return(Je=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qe(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ze=p.createElement("g",null,p.createElement("path",{id:"Arrow_Forward",d:"M384.97,192.487c0-3.212-1.323-6.28-3.525-8.59L262.357,63.606c-4.704-4.752-12.319-4.74-17.011,0 c-4.704,4.74-4.704,12.439,0,17.179l98.564,99.551H12.03C5.39,180.337,0,185.774,0,192.487c0,6.713,5.39,12.151,12.03,12.151 h331.868l-98.552,99.551c-4.704,4.74-4.692,12.439,0,17.179c4.704,4.74,12.319,4.74,17.011,0l119.088-120.291 C383.694,198.803,384.934,195.675,384.97,192.487z"}),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null),p.createElement("g",null)),Ge=p.createElement("g",null),We=p.createElement("g",null),He=p.createElement("g",null),Ye=p.createElement("g",null),Qe=p.createElement("g",null),Ke=p.createElement("g",null),Ze=p.createElement("g",null),Xe=p.createElement("g",null),$e=p.createElement("g",null),et=p.createElement("g",null),tt=p.createElement("g",null),nt=p.createElement("g",null),rt=p.createElement("g",null),at=p.createElement("g",null),ot=p.createElement("g",null);function it(e,t){var n=e.title,r=e.titleId,a=qe(e,["title","titleId"]);return p.createElement("svg",Je({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 384.97 384.97",style:{enableBackground:"new 0 0 384.97 384.97"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ze,Ge,We,He,Ye,Qe,Ke,Ze,Xe,$e,et,tt,nt,rt,at,ot)}var ct=p.forwardRef(it);n.p;function st(){return(st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ut=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,7.311l-10.72,10.719l-2.40003e-08,2.40345e-08c-0.292294,0.292711 -0.766535,0.293049 -1.05925,0.000754262c-0.000251616,-0.000251258 -0.000503053,-0.000502695 -0.00075431,-0.00075431l-10.72,-10.719"}));function dt(e,t){var n=e.title,r=e.titleId,a=lt(e,["title","titleId"]);return p.createElement("svg",st({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ut)}var pt=p.forwardRef(dt);n.p;function ht(){return(ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function bt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ft=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;fill-rule:evenodd;}")),mt=p.createElement("path",{className:"cls-1",d:"M16.25,23.25,5.53,12.53a.749.749,0,0,1,0-1.06L16.25.75"});function jt(e,t){var n=e.title,r=e.titleId,a=bt(e,["title","titleId"]);return p.createElement("svg",ht({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ft,mt)}var vt=p.forwardRef(jt);n.p;function Ot(){return(Ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var xt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",fillRule:"evenodd",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,17.189l10.72,-10.719l-2.22679e-08,2.22996e-08c0.292294,-0.292711 0.766535,-0.293049 1.05925,-0.000754355c0.000251616,0.000251258 0.000503053,0.000502695 0.00075431,0.00075431l10.72,10.719"}));function yt(e,t){var n=e.title,r=e.titleId,a=gt(e,["title","titleId"]);return p.createElement("svg",Ot({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,xt)}var _t=p.forwardRef(yt);n.p;function wt(){return(wt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function St(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,9.9l-10.977,10.978l4.64669e-07,-4.64669e-07c-2.63605,2.63606 -6.90994,2.63606 -9.546,9.29337e-07c-2.63606,-2.63605 -2.63606,-6.90994 -9.29337e-07,-9.546l9.016,-9.015l1.36283e-07,-1.41104e-07c1.72655,-1.78763 4.57537,-1.83715 6.363,-0.110594c1.78763,1.72655 1.83715,4.57537 0.110594,6.363c-0.0362194,0.0375007 -0.0730877,0.0743691 -0.110588,0.110588l-9.01501,9.02001l6.12874e-08,-5.9212e-08c-0.89368,0.863418 -2.31809,0.838886 -3.18151,-0.0547945c-0.842274,-0.871795 -0.842491,-2.25415 -0.000491428,-3.12621l9.016,-9.019"}));function Ct(e,t){var n=e.title,r=e.titleId,a=St(e,["title","titleId"]);return p.createElement("svg",wt({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kt)}var Nt=p.forwardRef(Ct);n.p;function Et(){return(Et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function At(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var It=p.createElement("defs",null,p.createElement("style",null,"\n      .cls-1{fill:#f0f2ff;}.cls-2{fill:none;}.cls-2,.cls-6,.cls-7{stroke:#4550e5;stroke-linecap:round;stroke-linejoin:round;}.cls-3,.cls-6{fill:#fff;}.cls-4,.cls-7{fill:#d6daff;}.cls-5{fill:#4550e5;}\n    ")),Tt=p.createElement("g",{id:"Icons"},p.createElement("g",{id:"Background"},p.createElement("g",{id:"New_Symbol_80-3","data-name":"New Symbol 80"},p.createElement("path",{className:"cls-1",d:"M90,56A40,40,0,1,0,13.57,72.51H86.44A39.74,39.74,0,0,0,90,56Z"}),p.createElement("line",{className:"cls-2",x1:10.51,y1:72.51,x2:88.51,y2:72.51}),p.createElement("line",{className:"cls-2",x1:6.01,y1:72.51,x2:8.51,y2:72.51}),p.createElement("line",{className:"cls-2",x1:90.51,y1:72.51,x2:93.01,y2:72.51}))),p.createElement("g",{id:"Scene"},p.createElement("path",{className:"cls-3",d:"M58.51,63.5h18a1,1,0,0,1,1,1v8a0,0,0,0,1,0,0h-20a0,0,0,0,1,0,0v-8A1,1,0,0,1,58.51,63.5Z"}),p.createElement("path",{className:"cls-2",d:"M58.51,63.5h18a1,1,0,0,1,1,1v8a0,0,0,0,1,0,0h-20a0,0,0,0,1,0,0v-8A1,1,0,0,1,58.51,63.5Z"}),p.createElement("path",{className:"cls-4",d:"M60.51,52.5h14a1,1,0,0,1,1,1v10a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-10A1,1,0,0,1,60.51,52.5Z"}),p.createElement("path",{className:"cls-3",d:"M60.51,52.5h14a1,1,0,0,1,1,1v3a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-3A1,1,0,0,1,60.51,52.5Z"}),p.createElement("rect",{className:"cls-3",x:59.51,y:61.5,width:16,height:2}),p.createElement("path",{className:"cls-4",d:"M61.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,61.51,56.5Z"}),p.createElement("path",{className:"cls-5",d:"M61.51,54a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5.51.51,0,0,0-.5-.5Z"}),p.createElement("path",{className:"cls-5",d:"M73.51,54a.5.5,0,0,0-.5.5.5.5,0,0,0,.5.5.5.5,0,0,0,.5-.5.51.51,0,0,0-.5-.5Z"}),p.createElement("line",{className:"cls-2",x1:64.51,y1:54.5,x2:70.51,y2:54.5}),p.createElement("line",{className:"cls-2",x1:63.51,y1:58.5,x2:63.51,y2:59.5}),p.createElement("path",{className:"cls-2",d:"M60.51,52.5h14a1,1,0,0,1,1,1v10a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-10A1,1,0,0,1,60.51,52.5Z"}),p.createElement("path",{className:"cls-2",d:"M60.51,52.5h14a1,1,0,0,1,1,1v3a0,0,0,0,1,0,0h-16a0,0,0,0,1,0,0v-3A1,1,0,0,1,60.51,52.5Z"}),p.createElement("rect",{className:"cls-2",x:59.51,y:61.5,width:16,height:2}),p.createElement("path",{className:"cls-2",d:"M61.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,61.51,56.5Z"}),p.createElement("path",{className:"cls-4",d:"M69.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,69.51,56.5Z"}),p.createElement("line",{className:"cls-2",x1:71.51,y1:58.5,x2:71.51,y2:59.5}),p.createElement("path",{className:"cls-2",d:"M69.51,56.5h4a0,0,0,0,1,0,0v1a1,1,0,0,1-1,1h-2a1,1,0,0,1-1-1v-1A0,0,0,0,1,69.51,56.5Z"}),p.createElement("ellipse",{className:"cls-1",cx:41.54,cy:87.68,rx:11.5,ry:1.72}),p.createElement("path",{className:"cls-6",d:"M49.6,34.55a1.41,1.41,0,0,0-1.15-1.38v-.92a6.9,6.9,0,0,0-13.8,0v.92a1.41,1.41,0,0,0-1.15,1.38A1.43,1.43,0,0,0,34.79,36,6.9,6.9,0,0,0,48.3,36,1.43,1.43,0,0,0,49.6,34.55Z"}),p.createElement("path",{className:"cls-5",d:"M39,32.25a.86.86,0,1,0,.86.86.85.85,0,0,0-.86-.86Z"}),p.createElement("path",{className:"cls-5",d:"M44.14,32.25a.86.86,0,1,0,.86.86.86.86,0,0,0-.86-.86Z"}),p.createElement("circle",{className:"cls-4",cx:37.81,cy:35.41,r:.86}),p.createElement("circle",{className:"cls-4",cx:45.29,cy:35.41,r:.86}),p.createElement("path",{className:"cls-6",d:"M34.65,31.1a5.73,5.73,0,0,1,2.87-4.6c2.21-1.33,3.45-1.73,2.88-2.88,0,0,1.72.58,1.15,1.73,0,0,1.72-1.15,0-3.45,0,0,3.45,1.15,2.3,3.45A2.14,2.14,0,0,0,45,23.62s3.45,1.73,3.45,7.48v2.07C47.07,33,46.72,32,46.55,31A1.36,1.36,0,0,0,45,29.84a17.22,17.22,0,0,1-6.81,0A1.36,1.36,0,0,0,36.54,31c-.16,1-.51,2-1.89,2.2Z"}),p.createElement("path",{className:"cls-6",d:"M41.55,43.17a15.37,15.37,0,0,0,2.77-.72,5.28,5.28,0,0,0,3.58-4L48.3,36a2.3,2.3,0,0,1-2.1,2,3.4,3.4,0,0,1-2.48-.46,4.13,4.13,0,0,0-4.35,0,3.39,3.39,0,0,1-2.48.46,2.3,2.3,0,0,1-2.1-2l.41,2.48a5.27,5.27,0,0,0,3.57,4A15.41,15.41,0,0,0,41.55,43.17Z"}),p.createElement("path",{className:"cls-4",d:"M53.27,55.48a11.73,11.73,0,0,0-23.46,0v.69H34v9.66H49.13V56.17h4.14Z"}),p.createElement("path",{className:"cls-6",d:"M29.81,57.55a2.07,2.07,0,0,1-4.14,0,2.07,2.07,0,0,0-4.14,0,6.21,6.21,0,0,0,12.42,0V56.17H29.81Z"}),p.createElement("path",{className:"cls-3",d:"M34,65.83v20h5.52l.63-14.5a1.44,1.44,0,0,1,2.88,0l.63,14.5h5.52v-20Z"}),p.createElement("path",{className:"cls-2",d:"M34,65.83v20h5.52l.63-14.5a1.44,1.44,0,0,1,2.88,0l.63,14.5h5.52v-20Z"}),p.createElement("path",{className:"cls-7",d:"M33.09,84.74a1.16,1.16,0,0,0,1,1.79h4.71a1.16,1.16,0,0,0,1-1.69C38.52,82.44,34.52,82.57,33.09,84.74Z"}),p.createElement("path",{className:"cls-7",d:"M50,84.74a1.16,1.16,0,0,1-1,1.79H44.33a1.15,1.15,0,0,1-1-1.69C44.56,82.44,48.56,82.57,50,84.74Z"}),p.createElement("path",{className:"cls-2",d:"M53.27,55.48a11.73,11.73,0,0,0-23.46,0v.69H34v9.66H49.13V56.17h4.14Z"}),p.createElement("line",{className:"cls-2",x1:33.95,y1:52.03,x2:33.95,y2:54.79}),p.createElement("line",{className:"cls-2",x1:49.13,y1:52.03,x2:49.13,y2:54.79}),p.createElement("path",{className:"cls-6",d:"M49.13,68.59a2.07,2.07,0,1,0,4.14,0V56.17H49.13Z"}),p.createElement("path",{className:"cls-6",d:"M47.75,54.79a1.38,1.38,0,0,1-1.38-1.38V44.78a11.64,11.64,0,0,0-2.76-.85v9.48a1.38,1.38,0,0,1-1.38,1.38H40.85a1.38,1.38,0,0,1-1.38-1.38V43.93a11.79,11.79,0,0,0-2.76.85v8.63a1.38,1.38,0,0,1-1.38,1.38H34V78.25H49.13V54.79Z"}),p.createElement("path",{className:"cls-6",d:"M37.85,44.34h0l3.69,4.92,3.7-4.92h0a11.87,11.87,0,0,0-7.39,0Z"}),p.createElement("path",{className:"cls-7",d:"M30.12,54.79H34a0,0,0,0,1,0,0v2.76a0,0,0,0,1,0,0H30.12a1,1,0,0,1-1-1v-.76A1,1,0,0,1,30.12,54.79Z"}),p.createElement("path",{className:"cls-7",d:"M49.13,54.79H53a1,1,0,0,1,1,1v.76a1,1,0,0,1-1,1H49.13a0,0,0,0,1,0,0V54.79A0,0,0,0,1,49.13,54.79Z"}),p.createElement("path",{className:"cls-7",d:"M45.25,44.34h0l-3.7,4.92,1.86.92a1.16,1.16,0,0,0,1.47-.39l2.86-4.29A12.24,12.24,0,0,0,45.25,44.34Z"}),p.createElement("path",{className:"cls-7",d:"M37.84,44.34h0l3.69,4.92-1.85.92a1.15,1.15,0,0,1-1.47-.39l-2.86-4.29A12,12,0,0,1,37.84,44.34Z"}),p.createElement("path",{className:"cls-6",d:"M17.05,52.72a.69.69,0,0,0-.59,1.06,3.5,3.5,0,0,0,3,1.7h8.28a3.5,3.5,0,0,0,3-1.7.69.69,0,0,0-.59-1.06Z"}),p.createElement("path",{className:"cls-6",d:"M26.36,50a2.76,2.76,0,1,1-5.52,0Z"}),p.createElement("path",{className:"cls-2",d:"M26.36,50a1.37,1.37,0,0,1,1.38,1.38"}),p.createElement("path",{className:"cls-6",d:"M22.28,43.58c-.47,1.89,2,1.56,1.17,3.85A26,26,0,0,0,25,44.25a1.38,1.38,0,0,0-1-1.68A1.4,1.4,0,0,0,22.28,43.58Z"}),p.createElement("rect",{className:"cls-2",x:37.85,y:65.12,width:7.4,height:4.83,rx:1,ry:1})));function Rt(e,t){var n=e.title,r=e.titleId,a=At(e,["title","titleId"]);return p.createElement("svg",Et({id:"Duotone",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 100 112",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,It,Tt)}var Dt=p.forwardRef(Rt);n.p;function Mt(){return(Mt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pt=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ft=p.createElement("circle",{className:"cls-1",cx:5.25,cy:3.75,r:3}),Ut=p.createElement("line",{className:"cls-1",x1:5.25,y1:8.25,x2:5.25,y2:14.25}),Bt=p.createElement("path",{className:"cls-1",d:"M7.5,23.25l.75-7.5h1.5v-3a4.5,4.5,0,0,0-9,0v3h1.5L3,23.25Z"}),Vt=p.createElement("path",{className:"cls-1",d:"M18.75,3.75H16.717a1.342,1.342,0,0,0-.5,2.587l2.064.825a1.342,1.342,0,0,1-.5,2.588H15.75"}),Jt=p.createElement("line",{className:"cls-1",x1:17.25,y1:3.754,x2:17.25,y2:3}),qt=p.createElement("line",{className:"cls-1",x1:17.25,y1:10.5,x2:17.25,y2:9.754}),zt=p.createElement("circle",{className:"cls-1",cx:17.25,cy:6.75,r:6});function Gt(e,t){var n=e.title,r=e.titleId,a=Lt(e,["title","titleId"]);return p.createElement("svg",Mt({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pt,Ft,Ut,Bt,Vt,Jt,qt,zt)}var Wt=p.forwardRef(Gt);n.p;function Ht(){return(Ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yt(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qt=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.59099,1.40701c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 -4.44089e-16,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,-4.44089e-16"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.59099,10.407c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 -4.44089e-16,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4.59099,19.407c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 -4.44089e-16,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,3.75h15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,12.75h15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,21.75h15"}));function Kt(e,t){var n=e.title,r=e.titleId,a=Yt(e,["title","titleId"]);return p.createElement("svg",Ht({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Qt)}var Zt=p.forwardRef(Kt);n.p;function Xt(){return(Xt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $t(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var en=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M2.25,23.25c-0.82842,0 -1.5,-0.67158 -1.5,-1.5v-16.5c0,-0.82842 0.67158,-1.5 1.5,-1.5h19.5c0.82842,0 1.5,0.67158 1.5,1.5v16.5c0,0.82842 -0.67158,1.5 -1.5,1.5Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.75,6v-5.25"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,6v-5.25"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.25,14.25h4.5v4.5h-4.5Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,9.75v9"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,9.75h9v9h-9Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,14.25h9"}));function tn(e,t){var n=e.title,r=e.titleId,a=$t(e,["title","titleId"]);return p.createElement("svg",Xt({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,en)}var nn=p.forwardRef(tn);n.p;function rn(){return(rn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function an(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var on=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6,13.223l2.45,3.477l6.71632e-09,1.00325e-08c0.322293,0.481425 0.973835,0.610427 1.45526,0.288134c0.0964552,-0.0645725 0.181525,-0.144706 0.25174,-0.237134l7.843,-9.923"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19.955,4.04405c4.3934,4.3934 4.3934,11.5165 0,15.9099c-4.3934,4.3934 -11.5165,4.3934 -15.9099,0c-4.3934,-4.3934 -4.3934,-11.5165 -1.77636e-15,-15.9099c4.3934,-4.3934 11.5165,-4.3934 15.9099,-1.77636e-15"}));function cn(e,t){var n=e.title,r=e.titleId,a=an(e,["title","titleId"]);return p.createElement("svg",rn({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,on)}var sn=p.forwardRef(cn);n.p;function ln(){return(ln=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function un(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dn=p.createElement("path",{d:"M9 16.17L5.53 12.7c-.39-.39-1.02-.39-1.41 0-.39.39-.39 1.02 0 1.41l4.18 4.18c.39.39 1.02.39 1.41 0L20.29 7.71c.39-.39.39-1.02 0-1.41-.39-.39-1.02-.39-1.41 0L9 16.17z"});function pn(e,t){var n=e.title,r=e.titleId,a=un(e,["title","titleId"]);return p.createElement("svg",ln({xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,dn)}var hn=p.forwardRef(pn);n.p;function bn(){return(bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var mn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),jn=p.createElement("path",{className:"a",d:"M6.75,9l3.294,4.611a1.526,1.526,0,0,0,2.414.09L23.25.749"}),vn=p.createElement("path",{className:"a",d:"M21.75,10.5v9.75a3,3,0,0,1-3,3h-15a3,3,0,0,1-3-3v-15a3,3,0,0,1,3-3H16.5"});function On(e,t){var n=e.title,r=e.titleId,a=fn(e,["title","titleId"]);return p.createElement("svg",bn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,mn,jn,vn)}var gn=p.forwardRef(On);n.p;function xn(){return(xn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _n=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),wn=p.createElement("path",{className:"a",d:"M19.5,19.5H5.25a.75.75,0,0,1-.75-.75V4.5"});function Sn(e,t){var n=e.title,r=e.titleId,a=yn(e,["title","titleId"]);return p.createElement("svg",xn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,_n,wn)}var kn=p.forwardRef(Sn);n.p;function Cn(){return(Cn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var En=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),An=p.createElement("circle",{className:"a",cx:12,cy:12,r:10.5}),In=p.createElement("line",{className:"a",x1:12,y1:12,x2:12,y2:8.25}),Tn=p.createElement("line",{className:"a",x1:12,y1:12,x2:16.687,y2:16.688});function Rn(e,t){var n=e.title,r=e.titleId,a=Nn(e,["title","titleId"]);return p.createElement("svg",Cn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,En,An,In,Tn)}var Dn=p.forwardRef(Rn);n.p;function Mn(){return(Mn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ln(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Fn=p.createElement("path",{className:"a",d:"M10.546,2.438a1.957,1.957,0,0,0,2.908,0L14.4,1.4a1.959,1.959,0,0,1,3.41,1.413l-.071,1.4A1.958,1.958,0,0,0,19.79,6.267l1.4-.071A1.959,1.959,0,0,1,22.6,9.606l-1.042.94a1.96,1.96,0,0,0,0,2.909l1.042.94a1.959,1.959,0,0,1-1.413,3.41l-1.4-.071a1.958,1.958,0,0,0-2.056,2.056l.071,1.4A1.959,1.959,0,0,1,14.4,22.6l-.941-1.041a1.959,1.959,0,0,0-2.908,0L9.606,22.6A1.959,1.959,0,0,1,6.2,21.192l.072-1.4a1.958,1.958,0,0,0-2.056-2.056l-1.4.071A1.958,1.958,0,0,1,1.4,14.4l1.041-.94a1.96,1.96,0,0,0,0-2.909L1.4,9.606A1.958,1.958,0,0,1,2.809,6.2l1.4.071A1.958,1.958,0,0,0,6.267,4.211L6.2,2.81A1.959,1.959,0,0,1,9.606,1.4Z"}),Un=p.createElement("circle",{className:"a",cx:12,cy:12.001,r:4.5});function Bn(e,t){var n=e.title,r=e.titleId,a=Ln(e,["title","titleId"]);return p.createElement("svg",Mn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pn,Fn,Un)}var Vn=p.forwardRef(Bn);n.p;function Jn(){return(Jn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zn=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75,0.75l5.02175e-07,7.2408e-10c-5.7907,-0.00834968 -10.4918,4.67917 -10.5001,10.4699c-0.00283107,1.96341 0.545689,3.88817 1.58311,5.55513l-3.083,6.475l6.474,-3.084l4.96324e-07,3.08709e-07c4.92418,3.0628 11.3989,1.55385 14.4617,-3.37033c3.0628,-4.92418 1.55385,-11.3989 -3.37033,-14.4617c-1.67015,-1.03882 -3.59851,-1.58765 -5.56537,-1.58396Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,10.88v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,10.875h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v0c0,-0.207107 -0.167893,-0.375 -0.375,-0.375"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75,10.88v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12.75,10.875h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v0c0,-0.207107 -0.167893,-0.375 -0.375,-0.375"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,10.88v0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,10.875h-1.63918e-08c-0.207107,9.05293e-09 -0.375,0.167893 -0.375,0.375c9.05293e-09,0.207107 0.167893,0.375 0.375,0.375c0.207107,-9.05293e-09 0.375,-0.167893 0.375,-0.375v0c0,-0.207107 -0.167893,-0.375 -0.375,-0.375"}));function Gn(e,t){var n=e.title,r=e.titleId,a=qn(e,["title","titleId"]);return p.createElement("svg",Jn({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,zn)}var Wn=p.forwardRef(Gn);n.p;function Hn(){return(Hn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yn(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qn=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Kn=p.createElement("path",{className:"a",d:"M20.25,8.249v-3a1.5,1.5,0,0,0-1.5-1.5h-4"}),Zn=p.createElement("path",{className:"a",d:"M6.25,3.749h-4a1.5,1.5,0,0,0-1.5,1.5v16.5a1.5,1.5,0,0,0,1.5,1.5h6"}),Xn=p.createElement("path",{className:"a",d:"M14.421,4.736a.751.751,0,0,1-.712.513H7.291a.751.751,0,0,1-.712-.513l-1-3A.749.749,0,0,1,6.291.749h8.418a.749.749,0,0,1,.712.987Z"}),$n=p.createElement("rect",{className:"a",x:11.25,y:11.249,width:12,height:12,rx:1.5,ry:1.5}),er=p.createElement("line",{className:"a",x1:14.25,y1:14.249,x2:20.25,y2:14.249}),tr=p.createElement("line",{className:"a",x1:14.25,y1:17.249,x2:20.25,y2:17.249}),nr=p.createElement("line",{className:"a",x1:14.25,y1:20.249,x2:16.5,y2:20.249});function rr(e,t){var n=e.title,r=e.titleId,a=Yn(e,["title","titleId"]);return p.createElement("svg",Hn({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Qn,Kn,Zn,Xn,$n,er,tr,nr)}var ar=p.forwardRef(rr);n.p;function or(){return(or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ir(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var cr=p.createElement("path",{d:"M 7.71875 6.28125 L 6.28125 7.71875 L 23.5625 25 L 6.28125 42.28125 L 7.71875 43.71875 L 25 26.4375 L 42.28125 43.71875 L 43.71875 42.28125 L 26.4375 25 L 43.71875 7.71875 L 42.28125 6.28125 L 25 23.5625 Z"});function sr(e,t){var n=e.title,r=e.titleId,a=ir(e,["title","titleId"]);return p.createElement("svg",or({fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,cr)}var lr=p.forwardRef(sr);n.p;function ur(){return(ur=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function dr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var pr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),hr=p.createElement("path",{className:"a",d:"M17.168,8.25a5.951,5.951,0,0,1-10.336,0H2.25a1.5,1.5,0,0,0-1.5,1.5v4.5a1.5,1.5,0,0,0,1.5,1.5h19.5a1.5,1.5,0,0,0,1.5-1.5V9.75a1.5,1.5,0,0,0-1.5-1.5Z"});function br(e,t){var n=e.title,r=e.titleId,a=dr(e,["title","titleId"]);return p.createElement("svg",ur({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,pr,hr)}var fr=p.forwardRef(br);n.p;function mr(){return(mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var vr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Or=p.createElement("line",{className:"a",x1:12.001,y1:3.75,x2:12.001,y2:15.75}),gr=p.createElement("polyline",{className:"a",points:"7.501 11.25 12.001 15.75 16.501 11.25"}),xr=p.createElement("path",{className:"a",d:"M23.251,15.75v1.5a3,3,0,0,1-3,3H3.751a3,3,0,0,1-3-3v-1.5"});function yr(e,t){var n=e.title,r=e.titleId,a=jr(e,["title","titleId"]);return p.createElement("svg",mr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,vr,Or,gr,xr)}var _r=p.forwardRef(yr);n.p;function wr(){return(wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kr=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Cr=p.createElement("path",{className:"cls-1",d:"M22.63,14.869,15,22.5l-3.75.75L12,19.5l7.63-7.631a2.116,2.116,0,0,1,2.992,0l.008.009A2.113,2.113,0,0,1,22.63,14.869Z"}),Nr=p.createElement("circle",{className:"cls-1",cx:7.5,cy:4.875,r:4.125}),Er=p.createElement("path",{className:"cls-1",d:"M13.338,13.919A6.729,6.729,0,0,0,.75,17.25"});function Ar(e,t){var n=e.title,r=e.titleId,a=Sr(e,["title","titleId"]);return p.createElement("svg",wr({id:"Regular",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kr,Cr,Nr,Er)}var Ir=p.forwardRef(Ar);n.p;function Tr(){return(Tr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Dr=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.709,6.837l1.04002e-08,8.67456e-06c-0.000990832,-0.828427 -0.673366,-1.4992 -1.50179,-1.4982c-0.416891,0.000498618 -0.814768,0.174471 -1.0982,0.48019l-5.46101,5.91401l-1.68502e-07,1.82684e-07c-0.529876,0.574472 -0.529876,1.45953 3.27198e-07,2.034l5.458,5.914l1.47243e-08,1.58822e-08c0.563222,0.607514 1.51229,0.64342 2.1198,0.0801983c0.30572,-0.283431 0.479695,-0.681308 0.480196,-1.0982v-2.913h6l-3.27835e-07,7.10543e-15c4.14214,-1.81059e-07 7.5,3.35786 7.5,7.5v-6v0c0,-4.14214 -3.35786,-7.5 -7.5,-7.5h-6Z"}));function Mr(e,t){var n=e.title,r=e.titleId,a=Rr(e,["title","titleId"]);return p.createElement("svg",Tr({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Dr)}var Lr=p.forwardRef(Mr);n.p;function Pr(){return(Pr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ur=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Br=p.createElement("line",{className:"a",x1:9.75,y1:14.248,x2:.75,y2:23.248}),Vr=p.createElement("polyline",{className:"a",points:"23.25 7.498 23.25 0.748 16.5 0.748"}),Jr=p.createElement("polyline",{className:"a",points:"0.75 16.498 0.75 23.248 7.5 23.248"}),qr=p.createElement("line",{className:"a",x1:23.25,y1:.748,x2:14.25,y2:9.748}),zr=p.createElement("line",{className:"a",x1:14.25,y1:14.248,x2:23.25,y2:23.248}),Gr=p.createElement("polyline",{className:"a",points:"0.75 7.498 0.75 0.748 7.5 0.748"}),Wr=p.createElement("polyline",{className:"a",points:"23.25 16.498 23.25 23.248 16.5 23.248"}),Hr=p.createElement("line",{className:"a",x1:.75,y1:.748,x2:9.75,y2:9.748});function Yr(e,t){var n=e.title,r=e.titleId,a=Fr(e,["title","titleId"]);return p.createElement("svg",Pr({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ur,Br,Vr,Jr,qr,zr,Gr,Wr,Hr)}var Qr=p.forwardRef(Yr);n.p;function Kr(){return(Kr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Zr(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Xr=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),$r=p.createElement("path",{className:"a",d:"M22.5,21.75a1.5,1.5,0,0,1-1.5,1.5H3a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,3,.75H18.045a1.5,1.5,0,0,1,1.048.426l2.954,2.883A1.5,1.5,0,0,1,22.5,5.133Z"}),ea=p.createElement("line",{className:"a",x1:6.045,y1:8.25,x2:18.045,y2:8.25}),ta=p.createElement("line",{className:"a",x1:6.045,y1:12.75,x2:18.045,y2:12.75}),na=p.createElement("line",{className:"a",x1:6.045,y1:17.25,x2:12.045,y2:17.25});function ra(e,t){var n=e.title,r=e.titleId,a=Zr(e,["title","titleId"]);return p.createElement("svg",Kr({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Xr,$r,ea,ta,na)}var aa=p.forwardRef(ra);n.p;function oa(){return(oa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ia(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ca=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),sa=p.createElement("path",{className:"a",d:"M18.75,14.25H16.717a1.342,1.342,0,0,0-.5,2.587l2.064.826a1.342,1.342,0,0,1-.5,2.587H15.75"}),la=p.createElement("line",{className:"a",x1:17.25,y1:14.25,x2:17.25,y2:13.5}),ua=p.createElement("line",{className:"a",x1:17.25,y1:21,x2:17.25,y2:20.25}),da=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),pa=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),ha=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:9.75,y2:11.25}),ba=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:7.5,y2:15.75}),fa=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V8.25"});function ma(e,t){var n=e.title,r=e.titleId,a=ia(e,["title","titleId"]);return p.createElement("svg",oa({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ca,sa,la,ua,da,pa,ha,ba,fa)}var ja=p.forwardRef(ma);n.p;function va(){return(va=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ga=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),xa=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),ya=p.createElement("path",{className:"a",d:"M19.924,15.506l-2.905,3.873a.752.752,0,0,1-1.131.081l-1.5-1.5"}),_a=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),wa=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:9.75,y2:11.25}),Sa=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:7.5,y2:15.75}),ka=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V7.5"});function Ca(e,t){var n=e.title,r=e.titleId,a=Oa(e,["title","titleId"]);return p.createElement("svg",va({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ga,xa,ya,_a,wa,Sa,ka)}var Na=p.forwardRef(Ca);n.p;function Ea(){return(Ea=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Aa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ia=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ta=p.createElement("path",{className:"a",d:"M22.63,14.87,15,22.5l-3.75.75L12,19.5l7.63-7.63a2.114,2.114,0,0,1,2.992,0l.008.008A2.114,2.114,0,0,1,22.63,14.87Z"}),Ra=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),Da=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:14.25,y2:11.25}),Ma=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:9,y2:15.75}),La=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V8.25"});function Pa(e,t){var n=e.title,r=e.titleId,a=Aa(e,["title","titleId"]);return p.createElement("svg",Ea({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ia,Ta,Ra,Da,Ma,La)}var Fa=p.forwardRef(Pa);n.p;function Ua(){return(Ua=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ba(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Va=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ja=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),qa=p.createElement("path",{className:"a",d:"M15.375,16.125A1.875,1.875,0,1,1,17.25,18"}),za=p.createElement("path",{className:"a",d:"M17.25,20.25a.375.375,0,1,1-.375.375.375.375,0,0,1,.375-.375"}),Ga=p.createElement("line",{className:"a",x1:3.75,y1:6.75,x2:14.25,y2:6.75}),Wa=p.createElement("line",{className:"a",x1:3.75,y1:11.25,x2:9.75,y2:11.25}),Ha=p.createElement("line",{className:"a",x1:3.75,y1:15.75,x2:7.5,y2:15.75}),Ya=p.createElement("path",{className:"a",d:"M7.5,20.25H2.25a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V7.5"});function Qa(e,t){var n=e.title,r=e.titleId,a=Ba(e,["title","titleId"]);return p.createElement("svg",Ua({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Va,Ja,qa,za,Ga,Wa,Ha,Ya)}var Ka=p.forwardRef(Qa);n.p;function Za(){return(Za=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xa(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $a=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),eo=p.createElement("path",{className:"a",d:"M23.2,2.054a.751.751,0,0,0-.748-.8H1.5a.75.75,0,0,0-.748.8,11.254,11.254,0,0,0,8.972,10.22v9.875a.75.75,0,0,0,1.23.576l3-2.5a.748.748,0,0,0,.27-.576V12.274A11.253,11.253,0,0,0,23.2,2.054Z"});function to(e,t){var n=e.title,r=e.titleId,a=Xa(e,["title","titleId"]);return p.createElement("svg",Za({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$a,eo)}var no=p.forwardRef(to);n.p;function ro(){return(ro=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ao(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var oo=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,23.25v-22.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,17.708l3.154,-0.97l-5.53793e-08,1.70496e-08c2.64311,-0.813734 5.50867,-0.449345 7.864,1l-9.24515e-07,-5.69827e-07c2.29723,1.4159 5.08372,1.80127 7.679,1.062l2.987,-0.854l3.43564e-08,-9.81402e-09c0.48309,-0.137996 0.81612,-0.579587 0.816,-1.082v-11.727l2.59764e-08,2.80539e-05c-0.000568075,-0.621872 -0.505156,-1.12554 -1.12703,-1.12497c-0.103805,9.48249e-05 -0.207098,0.0145434 -0.306945,0.0429352l-2.369,0.677l-2.22624e-07,6.35881e-08c-2.59445,0.741052 -5.38089,0.357867 -7.679,-1.056l9.21966e-08,5.67328e-08c-2.35533,-1.44934 -5.22089,-1.81373 -7.864,-1l-3.15403,0.969008"}));function io(e,t){var n=e.title,r=e.titleId,a=ao(e,["title","titleId"]);return p.createElement("svg",ro({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,oo)}var co=p.forwardRef(io);n.p;function so(){return(so=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var uo=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),po=p.createElement("path",{className:"a",d:"M17.439,6a1.5,1.5,0,0,1,1.5-1.5h0a1.5,1.5,0,0,1,1.5,1.5V17.376A5.118,5.118,0,0,1,18.939,21h0a5.118,5.118,0,0,1-3.621,1.5H12.4a6,6,0,0,1-4.993-2.671l-3.65-5.475a1.541,1.541,0,0,1,0-1.707h0A1.539,1.539,0,0,1,6,12.3l2.439,1.951V4.5A1.5,1.5,0,0,1,9.939,3h0a1.5,1.5,0,0,1,1.5,1.5V3a1.5,1.5,0,0,1,1.5-1.5h0a1.5,1.5,0,0,1,1.5,1.5V4.5a1.5,1.5,0,0,1,1.5-1.5h0a1.5,1.5,0,0,1,1.5,1.5Z"}),ho=p.createElement("line",{className:"a",x1:11.439,y1:4.497,x2:11.439,y2:10.497}),bo=p.createElement("line",{className:"a",x1:14.439,y1:4.497,x2:14.439,y2:10.497}),fo=p.createElement("line",{className:"a",x1:17.439,y1:10.497,x2:17.439,y2:5.997});function mo(e,t){var n=e.title,r=e.titleId,a=lo(e,["title","titleId"]);return p.createElement("svg",so({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,uo,po,ho,bo,fo)}var jo=p.forwardRef(mo);n.p;function vo(){return(vo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Oo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var go=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),xo=p.createElement("path",{className:"cls-1",d:"M17.25,9a.75.75,0,0,0-.75-.75H14.25V6a.75.75,0,0,0-.75-.75h-3A.75.75,0,0,0,9.75,6V8.25H7.5A.75.75,0,0,0,6.75,9v3a.75.75,0,0,0,.75.75H9.75V15a.75.75,0,0,0,.75.75h3a.75.75,0,0,0,.75-.75V12.75H16.5a.75.75,0,0,0,.75-.75Z"}),yo=p.createElement("path",{className:"cls-1",d:"M2.25,3.923v7.614A11.907,11.907,0,0,0,9.882,22.65l1.041.4a3,3,0,0,0,2.154,0l1.041-.4A11.907,11.907,0,0,0,21.75,11.537V3.923a1.486,1.486,0,0,0-.868-1.362A21.7,21.7,0,0,0,12,.75,21.7,21.7,0,0,0,3.118,2.561,1.486,1.486,0,0,0,2.25,3.923Z"});function _o(e,t){var n=e.title,r=e.titleId,a=Oo(e,["title","titleId"]);return p.createElement("svg",vo({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,go,xo,yo)}var wo=p.forwardRef(_o);n.p;function So(){return(So=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ko(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Co=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),No=p.createElement("rect",{className:"a",x:1.5,y:1.497,width:21,height:21,rx:1.5,ry:1.5});function Eo(e,t){var n=e.title,r=e.titleId,a=ko(e,["title","titleId"]);return p.createElement("svg",So({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Co,No)}var Ao=p.forwardRef(Eo);n.p;function Io(){return(Io=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function To(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ro=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Do=p.createElement("rect",{className:"a",x:8.25,y:.747,width:15,height:4.5,rx:1.5,ry:1.5}),Mo=p.createElement("rect",{className:"a",x:8.25,y:9.747,width:15,height:4.5,rx:1.5,ry:1.5}),Lo=p.createElement("rect",{className:"a",x:8.25,y:18.747,width:15,height:4.5,rx:1.5,ry:1.5}),Po=p.createElement("rect",{className:"a",x:.75,y:.747,width:4.5,height:4.5,rx:1.5,ry:1.5}),Fo=p.createElement("rect",{className:"a",x:.75,y:9.747,width:4.5,height:4.5,rx:1.5,ry:1.5}),Uo=p.createElement("rect",{className:"a",x:.75,y:18.747,width:4.5,height:4.5,rx:1.5,ry:1.5});function Bo(e,t){var n=e.title,r=e.titleId,a=To(e,["title","titleId"]);return p.createElement("svg",Io({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ro,Do,Mo,Lo,Po,Fo,Uo)}var Vo=p.forwardRef(Bo);n.p;function Jo(){return(Jo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zo=p.createElement("path",{opacity:.2,fill:"#000",d:"M20.201,5.169c-8.254,0-14.946,6.692-14.946,14.946c0,8.255,6.692,14.946,14.946,14.946     s14.946-6.691,14.946-14.946C35.146,11.861,28.455,5.169,20.201,5.169z M20.201,31.749c-6.425,0-11.634-5.208-11.634-11.634     c0-6.425,5.209-11.634,11.634-11.634c6.425,0,11.633,5.209,11.633,11.634C31.834,26.541,26.626,31.749,20.201,31.749z"}),Go=p.createElement("path",{fill:"#000",d:"M26.013,10.047l1.654-2.866c-2.198-1.272-4.743-2.012-7.466-2.012h0v3.312h0     C22.32,8.481,24.301,9.057,26.013,10.047z",transform:"rotate(53.4931 20 20)"},p.createElement("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 20 20",to:"360 20 20",dur:"0.7s",repeatCount:"indefinite"}));function Wo(e,t){var n=e.title,r=e.titleId,a=qo(e,["title","titleId"]);return p.createElement("svg",Jo({id:"loader-1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"40px",height:"40px",viewBox:"0 0 40 40",enableBackground:"new 0 0 40 40",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,zo,Go)}var Ho=p.forwardRef(Wo);n.p;function Yo(){return(Yo=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Qo(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ko=p.createElement("circle",{fill:"#fff",stroke:"none",cx:6,cy:50,r:6},p.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:.1})),Zo=p.createElement("circle",{fill:"#fff",stroke:"none",cx:26,cy:50,r:6},p.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:.2})),Xo=p.createElement("circle",{fill:"#fff",stroke:"none",cx:46,cy:50,r:6},p.createElement("animate",{attributeName:"opacity",dur:"1s",values:"0;1;0",repeatCount:"indefinite",begin:.3}));function $o(e,t){var n=e.title,r=e.titleId,a=Qo(e,["title","titleId"]);return p.createElement("svg",Yo({id:"L4",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 100 100",enableBackground:"new 0 0 0 0",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ko,Zo,Xo)}var ei=p.forwardRef($o);n.p;function ti(){return(ti=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ni(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ri=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ai=p.createElement("circle",{className:"a",cx:12,cy:7.5,r:3}),oi=p.createElement("path",{className:"a",d:"M12,.75A6.75,6.75,0,0,1,18.75,7.5c0,3.251-5.132,10.527-6.446,12.337a.377.377,0,0,1-.608,0C10.382,18.027,5.25,10.751,5.25,7.5A6.75,6.75,0,0,1,12,.75Z"}),ii=p.createElement("path",{className:"a",d:"M17.979,17.784c2.732.541,4.521,1.444,4.521,2.466,0,1.657-4.7,3-10.5,3s-10.5-1.343-10.5-3c0-1.02,1.781-1.921,4.5-2.463"});function ci(e,t){var n=e.title,r=e.titleId,a=ni(e,["title","titleId"]);return p.createElement("svg",ti({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ri,ai,oi,ii)}var si=p.forwardRef(ci);n.p;function li(){return(li=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ui(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var di=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),pi=p.createElement("path",{className:"a",d:"M18.736,13.8c2.74.957,4.514,2.484,4.514,4.205,0,2.9-5.037,5.25-11.25,5.25S.75,20.9.75,18c0-1.715,1.761-3.237,4.485-4.195"}),hi=p.createElement("circle",{className:"a",cx:12,cy:3.375,r:2.625}),bi=p.createElement("path",{className:"a",d:"M15.75,12.745V10.5a3.75,3.75,0,0,0-7.5,0v2.25h1.5l.75,6h3l.75-6Z"});function fi(e,t){var n=e.title,r=e.titleId,a=ui(e,["title","titleId"]);return p.createElement("svg",li({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,di,">",pi,hi,bi)}var mi=p.forwardRef(fi);n.p;function ji(){return(ji=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function vi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Oi=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),gi=p.createElement("path",{className:"cls-1",d:"M7.476,7.084A8.711,8.711,0,0,0,13.75,9.75,8.725,8.725,0,0,0,17.2,9.04"}),xi=p.createElement("circle",{className:"cls-1",cx:12,cy:9.75,r:5.25}),yi=p.createElement("path",{className:"cls-1",d:"M18.913,20.876a9.746,9.746,0,0,0-13.826,0"}),_i=p.createElement("circle",{className:"cls-1",cx:12,cy:12,r:11.25});function wi(e,t){var n=e.title,r=e.titleId,a=vi(e,["title","titleId"]);return p.createElement("svg",ji({id:"Regular",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Oi,gi,xi,yi,_i)}var Si=p.forwardRef(wi);n.p;function ki(){return(ki=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ci(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ni=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Ei=p.createElement("path",{className:"cls-1",d:"M23.25,15.75a7.669,7.669,0,0,1-6,7.5,7.668,7.668,0,0,1-6-7.5v-3a1.5,1.5,0,0,1,1.5-1.5h9a1.5,1.5,0,0,1,1.5,1.5Z"}),Ai=p.createElement("line",{className:"cls-1",x1:17.25,y1:15,x2:17.25,y2:19.5}),Ii=p.createElement("line",{className:"cls-1",x1:15,y1:17.25,x2:19.5,y2:17.25}),Ti=p.createElement("circle",{className:"cls-1",cx:6,cy:3.75,r:3}),Ri=p.createElement("path",{className:"cls-1",d:"M9.173,9.317A5.25,5.25,0,0,0,.75,13.5v2.25H3l.75,7.5h4.5L8.7,18.713"}),Di=p.createElement("line",{className:"cls-1",x1:6,y1:8.25,x2:6,y2:14.25});function Mi(e,t){var n=e.title,r=e.titleId,a=Ci(e,["title","titleId"]);return p.createElement("svg",ki({id:"Regular",xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ni,Ei,Ai,Ii,Ti,Ri,Di)}var Li=p.forwardRef(Mi);n.p;function Pi(){return(Pi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ui=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Bi=p.createElement("line",{className:"a",x1:12.75,y1:18.75,x2:11.25,y2:18.75}),Vi=p.createElement("path",{className:"a",d:"M20.122,18.75h.128a3,3,0,0,0,3-3v-6H.75v6a3,3,0,0,0,3,3h.128"}),Ji=p.createElement("circle",{className:"a",cx:6,cy:19.5,r:2.25}),qi=p.createElement("circle",{className:"a",cx:18,cy:19.5,r:2.25}),zi=p.createElement("path",{className:"a",d:"M21.334,9.75a2.968,2.968,0,0,0,.416-1.5,2.987,2.987,0,0,0-4.789-2.395,5.216,5.216,0,0,0-9.922,0A2.984,2.984,0,0,0,2.666,9.75"});function Gi(e,t){var n=e.title,r=e.titleId,a=Fi(e,["title","titleId"]);return p.createElement("svg",Pi({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ui,Bi,Vi,Ji,qi,zi)}var Wi=p.forwardRef(Gi);n.p;function Hi(){return(Hi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yi(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qi=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,12v0c0,2.89949 -2.35051,5.25 -5.25,5.25c-2.89949,0 -5.25,-2.35051 -5.25,-5.25c0,-2.89949 2.35051,-5.25 5.25,-5.25l-2.29485e-07,5.32907e-15c2.89949,-1.26741e-07 5.25,2.3505 5.25,5.25c0,0 0,1.77636e-15 0,1.77636e-15Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,12v2.25l3.55271e-14,4.52987e-07c2.50178e-07,1.65685 1.34315,3 3,3c1.65685,-2.50178e-07 3,-1.34315 3,-3v-2.25l1.11123e-08,0.000500006c-3.55271e-15,-6.21265 -5.03635,-11.249 -11.249,-11.249c-6.21265,1.77636e-15 -11.249,5.03635 -11.249,11.249c0,6.21265 5.03635,11.249 11.249,11.249c2.43361,0 4.80159,-0.789209 6.7486,-2.2492"}));function Ki(e,t){var n=e.title,r=e.titleId,a=Yi(e,["title","titleId"]);return p.createElement("svg",Hi({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Qi)}var Zi=p.forwardRef(Ki);n.p;function Xi(){return(Xi=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $i(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ec=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M5.23116,10.1668c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 -4.44089e-16,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M22.4812,10.1668c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8562,10.1668c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}));function tc(e,t){var n=e.title,r=e.titleId,a=$i(e,["title","titleId"]);return p.createElement("svg",Xi({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ec)}var nc=p.forwardRef(tc);n.p;function rc(){return(rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ac(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var oc=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8432,18.7718c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8432,1.52184c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,-4.44089e-16"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.8432,10.1468c1.02513,1.02513 1.02513,2.68718 0,3.71231c-1.02513,1.02513 -2.68718,1.02513 -3.71231,0c-1.02513,-1.02513 -1.02513,-2.68718 0,-3.71231c1.02513,-1.02513 2.68718,-1.02513 3.71231,0"}));function ic(e,t){var n=e.title,r=e.titleId,a=ac(e,["title","titleId"]);return p.createElement("svg",rc({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,oc)}var cc=p.forwardRef(ic);n.p;function sc(){return(sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function lc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var uc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),dc=p.createElement("path",{className:"a",d:"M21.75,18.75H11.25l-6,4.5v-4.5h-3a1.5,1.5,0,0,1-1.5-1.5v-15A1.5,1.5,0,0,1,2.25.75h19.5a1.5,1.5,0,0,1,1.5,1.5v15A1.5,1.5,0,0,1,21.75,18.75Z"}),pc=p.createElement("line",{className:"a",x1:5.25,y1:7.5,x2:18.75,y2:7.5}),hc=p.createElement("line",{className:"a",x1:5.25,y1:12,x2:15.75,y2:12});function bc(e,t){var n=e.title,r=e.titleId,a=lc(e,["title","titleId"]);return p.createElement("svg",sc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,uc,dc,pc,hc)}var fc=p.forwardRef(bc);n.p;function mc(){return(mc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function jc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var vc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Oc=p.createElement("path",{className:"a",d:"M10,21.75a2.087,2.087,0,0,0,4.005,0"}),gc=p.createElement("line",{className:"a",x1:12,y1:3,x2:12,y2:.75}),xc=p.createElement("path",{className:"a",d:"M12,3a7.5,7.5,0,0,1,7.5,7.5c0,7.046,1.5,8.25,1.5,8.25H3s1.5-1.916,1.5-8.25A7.5,7.5,0,0,1,12,3Z"});function yc(e,t){var n=e.title,r=e.titleId,a=jc(e,["title","titleId"]);return p.createElement("svg",mc({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,vc,Oc,gc,xc)}var _c=p.forwardRef(yc);n.p;function wc(){return(wc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Cc=p.createElement("path",{className:"a",d:"M22.19,1.81a3.638,3.638,0,0,0-5.169.035l-14.5,14.5L.75,23.25l6.905-1.771,14.5-14.5A3.638,3.638,0,0,0,22.19,1.81Z"}),Nc=p.createElement("line",{className:"a",x1:16.606,y1:2.26,x2:21.74,y2:7.394}),Ec=p.createElement("line",{className:"a",x1:14.512,y1:4.354,x2:19.646,y2:9.488}),Ac=p.createElement("line",{className:"a",x1:2.521,y1:16.345,x2:7.66,y2:21.474});function Ic(e,t){var n=e.title,r=e.titleId,a=Sc(e,["title","titleId"]);return p.createElement("svg",wc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kc,Cc,Nc,Ec,Ac)}var Tc=p.forwardRef(Ic);n.p;function Rc(){return(Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Dc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Mc=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M10.4168,4.95818c1.61091,1.61091 1.61091,4.22272 0,5.83363c-1.61091,1.61091 -4.22272,1.61091 -5.83363,1.77636e-15c-1.61091,-1.61091 -1.61091,-4.22272 -8.88178e-16,-5.83363c1.61091,-1.61091 4.22272,-1.61091 5.83363,-8.88178e-16"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,20.25l7.72715e-14,1.01922e-06c-5.62901e-07,-3.72792 3.02208,-6.75 6.75,-6.75c3.72792,-5.62901e-07 6.75,3.02208 6.75,6.75c0,0 0,7.10543e-15 0,7.10543e-15"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.251,4.416l4.62532e-08,-3.00537e-08c1.91033,-1.24126 4.46519,-0.698877 5.70646,1.21145c1.24126,1.91033 0.698877,4.46519 -1.21145,5.70646c-1.36892,0.889477 -3.13363,0.887946 -4.50101,-0.00390605"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M15,13.667l-7.0355e-07,1.59394e-07c3.63955,-0.824564 7.25843,1.45744 8.083,5.09699c0.110476,0.487633 0.166488,0.986021 0.167005,1.48601"}));function Lc(e,t){var n=e.title,r=e.titleId,a=Dc(e,["title","titleId"]);return p.createElement("svg",Rc({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Mc)}var Pc=p.forwardRef(Lc);n.p;function Fc(){return(Fc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Uc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Vc=p.createElement("path",{className:"a",d:"M4.949,8.783a1.5,1.5,0,0,0-.3,2.356l8.213,8.213a1.5,1.5,0,0,0,2.356-.3,7.522,7.522,0,0,0,.81-5.54l6.529-4.155a1.5,1.5,0,0,0,.256-2.326L16.97,1.188a1.5,1.5,0,0,0-2.326.255l-4.155,6.53A7.522,7.522,0,0,0,4.949,8.783Z"}),Jc=p.createElement("line",{className:"a",x1:8.753,y1:15.246,x2:.75,y2:23.249});function qc(e,t){var n=e.title,r=e.titleId,a=Uc(e,["title","titleId"]);return p.createElement("svg",Fc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Bc,Vc,Jc)}var zc=p.forwardRef(qc);n.p;function Gc(){return(Gc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wc(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hc=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Yc=p.createElement("circle",{className:"a",cx:12,cy:8.25,r:3.75}),Qc=p.createElement("path",{className:"a",d:"M12,.75a7.5,7.5,0,0,1,7.5,7.5c0,3.407-5.074,11.95-6.875,14.665a.75.75,0,0,1-1.25,0C9.574,20.2,4.5,11.657,4.5,8.25A7.5,7.5,0,0,1,12,.75Z"});function Kc(e,t){var n=e.title,r=e.titleId,a=Wc(e,["title","titleId"]);return p.createElement("svg",Gc({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Hc,Yc,Qc)}var Zc=p.forwardRef(Kc);n.p;function Xc(){return(Xc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $c(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var es=p.createElement("g",null,p.createElement("path",{d:"M182.9,551.7c0,0.1,0.2,0.3,0.2,0.3S358.3,283,358.3,194.6c0-130.1-88.8-186.7-175.4-186.9 C96.3,7.9,7.5,64.5,7.5,194.6c0,88.4,175.3,357.4,175.3,357.4S182.9,551.7,182.9,551.7z M122.2,187.2c0-33.6,27.2-60.8,60.8-60.8 c33.6,0,60.8,27.2,60.8,60.8S216.5,248,182.9,248C149.4,248,122.2,220.8,122.2,187.2z"}));function ts(e,t){var n=e.title,r=e.titleId,a=$c(e,["title","titleId"]);return p.createElement("svg",Xc({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",viewBox:"0 0 365 560",enableBackground:"new 0 0 365 560",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,es)}var ns=p.forwardRef(ts);n.p;function rs(){return(rs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function as(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var os=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),is=p.createElement("polygon",{className:"a",points:"17.25 15.75 6.75 15.75 5.25 23.25 18.75 23.25 17.25 15.75"}),cs=p.createElement("path",{className:"a",d:"M17.85,18.75h3.9a1.5,1.5,0,0,0,1.5-1.5v-6H.75v6a1.5,1.5,0,0,0,1.5,1.5h3.9"}),ss=p.createElement("path",{className:"a",d:"M6.75,5.25H4.677a1.5,1.5,0,0,0-1.342.829L.75,11.25h22.5L20.665,6.079a1.5,1.5,0,0,0-1.342-.829H17.25"}),ls=p.createElement("rect",{className:"a",x:6.75,y:.75,width:10.5,height:7.5}),us=p.createElement("path",{className:"a",d:"M20.625,14.25a.375.375,0,1,0,.375.375.375.375,0,0,0-.375-.375h0"}),ds=p.createElement("line",{className:"a",x1:9.75,y1:20.25,x2:14.25,y2:20.25});function ps(e,t){var n=e.title,r=e.titleId,a=as(e,["title","titleId"]);return p.createElement("svg",rs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,os,is,cs,ss,ls,us,ds)}var hs=p.forwardRef(ps);n.p;function bs(){return(bs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ms=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),js=p.createElement("line",{className:"a",x1:4.5,y1:19.5,x2:19.5,y2:4.5}),vs=p.createElement("line",{className:"a",x1:4.5,y1:4.5,x2:19.5,y2:19.5});function Os(e,t){var n=e.title,r=e.titleId,a=fs(e,["title","titleId"]);return p.createElement("svg",bs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ms,js,vs)}var gs=p.forwardRef(Os);n.p;function xs(){return(xs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ys(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _s=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),ws=p.createElement("path",{className:"a",d:"M13.5,22a9.75,9.75,0,1,0-9.75-9.75V13"}),Ss=p.createElement("polyline",{className:"a",points:"0.75 9.997 3.75 12.997 6.75 9.997"});function ks(e,t){var n=e.title,r=e.titleId,a=ys(e,["title","titleId"]);return p.createElement("svg",xs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,_s,ws,Ss)}var Cs=p.forwardRef(ks);n.p;function Ns(){return(Ns=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Es(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var As=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Is=p.createElement("circle",{className:"a",cx:9.813,cy:9.812,r:9.063,transform:"translate(-3.056 4.62) rotate(-23.025)"}),Ts=p.createElement("line",{className:"a",x1:16.221,y1:16.22,x2:23.25,y2:23.25});function Rs(e,t){var n=e.title,r=e.titleId,a=Es(e,["title","titleId"]);return p.createElement("svg",Ns({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,As,Is,Ts)}var Ds=p.forwardRef(Rs);n.p;function Ms(){return(Ms=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ls(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ps=p.createElement("defs",null,p.createElement("style",null,".a,.b{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}.b{fill-rule:evenodd;}")),Fs=p.createElement("path",{className:"a",d:"M12,19.5a.375.375,0,1,0,.375.375A.375.375,0,0,0,12,19.5h0"}),Us=p.createElement("path",{className:"a",d:"M17.625,13.875A.375.375,0,1,0,18,14.25a.375.375,0,0,0-.375-.375h0"}),Bs=p.createElement("path",{className:"a",d:"M15.977,17.853a.372.372,0,0,0-.265.11.375.375,0,1,0,.265-.11h0"}),Vs=p.createElement("path",{className:"a",d:"M8.023,17.853a.375.375,0,0,0-.266.64.375.375,0,1,0,.531-.53.373.373,0,0,0-.265-.11h0"}),Js=p.createElement("path",{className:"a",d:"M15.977,9.9a.372.372,0,0,0-.265.11.375.375,0,1,0,.265-.11h0"}),qs=p.createElement("line",{className:"a",x1:18,y1:7.5,x2:19.875,y2:5.625}),zs=p.createElement("line",{className:"a",x1:19.5,y1:5.25,x2:20.25,y2:6}),Gs=p.createElement("line",{className:"a",x1:12,y1:5.25,x2:12,y2:.75}),Ws=p.createElement("line",{className:"a",x1:14.25,y1:.75,x2:9.75,y2:.75}),Hs=p.createElement("path",{className:"b",d:"M12,5.25v9H3a9,9,0,1,0,9-9Z"}),Ys=p.createElement("path",{className:"a",d:"M7.757,9.477a.374.374,0,0,0-.265-.11h0a.376.376,0,1,0,.265.11"});function Qs(e,t){var n=e.title,r=e.titleId,a=Ls(e,["title","titleId"]);return p.createElement("svg",Ms({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ps,Fs,Us,Bs,Vs,Js,qs,zs,Gs,Ws,Hs,Ys)}var Ks=p.forwardRef(Qs);n.p;function Zs(){return(Zs=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xs(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $s=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),el=p.createElement("line",{className:"a",x1:7.5,y1:12,x2:16.5,y2:12}),tl=p.createElement("circle",{className:"a",cx:12,cy:12,r:11.25});function nl(e,t){var n=e.title,r=e.titleId,a=Xs(e,["title","titleId"]);return p.createElement("svg",Zs({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$s,el,tl)}var rl=p.forwardRef(nl);n.p;function al(){return(al=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ol(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var il=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.061,2.56v6.257l-2.15411e-08,0.000359056c-1.20108e-07,0.795441 0.315905,1.55832 0.878254,2.12089l11.5607,11.5617l-9.22958e-08,-9.22679e-08c0.58575,0.585573 1.53525,0.585573 2.121,1.84536e-07l6.879,-6.88l-4.5912e-08,4.59259e-08c0.585573,-0.58575 0.585573,-1.53525 9.1824e-08,-2.121l-11.561,-11.561l-4.69333e-08,-4.69032e-08c-0.562642,-0.562281 -1.32556,-0.878095 -2.121,-0.878h-6.257l-6.55671e-08,1.55431e-15c-0.828427,3.62117e-08 -1.5,0.671573 -1.5,1.5Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7.37166,5.24934c0.585786,0.585786 0.585786,1.53553 0,2.12132c-0.585786,0.585786 -1.53553,0.585786 -2.12132,0c-0.585786,-0.585786 -0.585786,-1.53553 0,-2.12132c0.585786,-0.585786 1.53553,-0.585786 2.12132,0"}));function cl(e,t){var n=e.title,r=e.titleId,a=ol(e,["title","titleId"]);return p.createElement("svg",al({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,il)}var sl=p.forwardRef(cl);n.p;function ll(){return(ll=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function ul(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75,23.248h9.75l-2.95052e-07,-7.10543e-15c3.72792,1.62953e-07 6.75,-3.02208 6.75,-6.75c1.62953e-07,-3.72792 -3.02208,-6.75 -6.75,-6.75h0.75l-1.96701e-07,-3.55271e-15c2.48528,1.08635e-07 4.5,-2.01472 4.5,-4.5c1.08635e-07,-2.48528 -2.01472,-4.5 -4.5,-4.5h-10.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6.75,0.75v22.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M13.5,9.75h-6.75"}));function pl(e,t){var n=e.title,r=e.titleId,a=ul(e,["title","titleId"]);return p.createElement("svg",ll({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,dl)}var hl=p.forwardRef(pl);n.p;function bl(){return(bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ml=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,0.75h-10.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M11.25,23.25h-10.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M6,23.25l12,-22.5"}));function jl(e,t){var n=e.title,r=e.titleId,a=fl(e,["title","titleId"]);return p.createElement("svg",bl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ml)}var vl=p.forwardRef(jl);n.p;function Ol(){return(Ol=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function gl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var xl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,23.25h22.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3.75,0.75h3"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17.25,0.75h3"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18.75,0.748v11.252v0c0,3.72792 -3.02208,6.75 -6.75,6.75c-3.72792,0 -6.75,-3.02208 -6.75,-6.75v-11.252"}));function yl(e,t){var n=e.title,r=e.titleId,a=gl(e,["title","titleId"]);return p.createElement("svg",Ol({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,xl)}var _l=p.forwardRef(yl);n.p;function wl(){return(wl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Sl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var kl=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Cl=p.createElement("path",{className:"a",d:"M4.591,22.542A2.25,2.25,0,0,1,1.409,19.36L7.773,13l3.182,3.182Z"}),Nl=p.createElement("line",{className:"a",x1:18.379,y1:5.572,x2:9.364,y2:14.587}),El=p.createElement("path",{className:"a",d:"M20.5,5.572A1.5,1.5,0,0,1,18.379,3.45L21.031.8,23.152,2.92Z"}),Al=p.createElement("path",{className:"a",d:"M10.49,8.32,8.2,6.025a3.748,3.748,0,0,0-.837-4.019A3.708,3.708,0,0,0,5.123.948,2.993,2.993,0,0,1,1,5.074,3.721,3.721,0,0,0,6.073,8.146L7.649,9.722"}),Il=p.createElement("path",{className:"a",d:"M14.237,16.31l1.775,1.774a3.75,3.75,0,1,0,2.121-2.121l-2.511-2.511"}),Tl=p.createElement("path",{className:"a",d:"M19.235,19.186a.375.375,0,1,1,0,.53.375.375,0,0,1,0-.53"});function Rl(e,t){var n=e.title,r=e.titleId,a=Sl(e,["title","titleId"]);return p.createElement("svg",wl({xmlns:"http://www.w3.org/2000/svg",width:20,height:20,viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,kl,Cl,Nl,El,Al,Il,Tl)}var Dl=p.forwardRef(Rl);n.p;function Ml(){return(Ml=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ll(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M1.5,4.5h21"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,1.5h-4.5l-6.55671e-08,1.55431e-15c-0.828427,3.62117e-08 -1.5,0.671573 -1.5,1.5c0,0 0,4.44089e-16 0,4.44089e-16v1.5h7.5v-1.5h-1.77636e-15c0,-0.828427 -0.671573,-1.5 -1.5,-1.5c0,0 -1.77636e-15,0 -1.77636e-15,0Z"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.75,17.25v-7.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M14.25,17.25v-7.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M18.865,21.124l1.37066e-08,-1.65238e-07c-0.0645133,0.777732 -0.714596,1.37607 -1.495,1.376h-10.739l-7.43476e-08,6.64713e-12c-0.780403,6.97394e-05 -1.43049,-0.598268 -1.495,-1.376l-1.386,-16.624h16.5Z"}));function Fl(e,t){var n=e.title,r=e.titleId,a=Ll(e,["title","titleId"]);return p.createElement("svg",Ml({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pl)}var Ul=p.forwardRef(Fl);n.p;function Bl(){return(Bl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Jl=p.createElement("g",{transform:"scale(0.833333)"},p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M23.25,13.5v-7.5v0c0,-0.828427 -0.671573,-1.5 -1.5,-1.5h-12l-6.55671e-08,1.77636e-15c-0.828427,3.62117e-08 -1.5,0.671573 -1.5,1.5c0,0 0,8.88178e-16 0,8.88178e-16v6"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8.25,12v-6h-3l-1.96701e-07,3.55271e-15c-2.48528,1.08635e-07 -4.5,2.01472 -4.5,4.5c0,0 0,1.77636e-15 0,1.77636e-15v6l4.21885e-15,2.97924e-08c1.25089e-07,0.828427 0.671573,1.5 1.5,1.5h0.75"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M0.75,12h3l-6.55671e-08,-1.77636e-15c0.828427,3.62117e-08 1.5,-0.671573 1.5,-1.5v-4.5"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9.09099,15.659c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 0,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M21.091,15.659c0.87868,0.87868 0.87868,2.3033 0,3.18198c-0.87868,0.87868 -2.3033,0.87868 -3.18198,0c-0.87868,-0.87868 -0.87868,-2.3033 0,-3.18198c0.87868,-0.87868 2.3033,-0.87868 3.18198,0"}),p.createElement("path",{fill:"none",stroke:"#000",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M12,18h3"}));function ql(e,t){var n=e.title,r=e.titleId,a=Vl(e,["title","titleId"]);return p.createElement("svg",Bl({width:20,height:20,viewBox:"0 0 20 20",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Jl)}var zl=p.forwardRef(ql);n.p;function Gl(){return(Gl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wl(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hl=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Yl=p.createElement("path",{className:"a",d:"M12,5.251C7.969,5.183,3.8,8,1.179,10.885a1.663,1.663,0,0,0,0,2.226C3.743,15.935,7.9,18.817,12,18.748c4.1.069,8.258-2.813,10.824-5.637a1.663,1.663,0,0,0,0-2.226C20.2,8,16.031,5.183,12,5.251Z"}),Ql=p.createElement("path",{className:"a",d:"M15.75,12A3.75,3.75,0,1,1,12,8.249,3.749,3.749,0,0,1,15.75,12Z"});function Kl(e,t){var n=e.title,r=e.titleId,a=Wl(e,["title","titleId"]);return p.createElement("svg",Gl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Hl,Yl,Ql)}var Zl=p.forwardRef(Kl);n.p;function Xl(){return(Xl=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $l(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var eu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),tu=p.createElement("path",{className:"a",d:"M9.529,13.14a1.5,1.5,0,0,1,0-2.286L20.779,1.1a1.5,1.5,0,0,1,2.472,1.143v19.5a1.5,1.5,0,0,1-2.472,1.143Z"}),nu=p.createElement("path",{className:"a",d:"M15,21v.75a1.5,1.5,0,0,1-2.472,1.143L1.279,13.14a1.5,1.5,0,0,1,0-2.286L12.529,1.1A1.5,1.5,0,0,1,15,2.247V3"});function ru(e,t){var n=e.title,r=e.titleId,a=$l(e,["title","titleId"]);return p.createElement("svg",Xl({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,eu,tu,nu)}var au=p.forwardRef(ru);n.p;function ou(){return(ou=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function iu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var cu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),su=p.createElement("path",{className:"a",d:"M14.472,13.14a1.5,1.5,0,0,0,0-2.286L3.222,1.1A1.5,1.5,0,0,0,.751,2.247v19.5A1.5,1.5,0,0,0,3.222,22.89Z"}),lu=p.createElement("path",{className:"a",d:"M9,21v.749a1.5,1.5,0,0,0,2.471,1.143l11.25-9.75a1.5,1.5,0,0,0,0-2.286L11.472,1.1A1.5,1.5,0,0,0,9,2.247V3"});function uu(e,t){var n=e.title,r=e.titleId,a=iu(e,["title","titleId"]);return p.createElement("svg",ou({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,cu,su,lu)}var du=p.forwardRef(uu);n.p;function pu(){return(pu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function hu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var bu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#1d1d1d;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),fu=p.createElement("g",{transform:"translate(-0.006 -0.083)"},p.createElement("path",{className:"a",d:"M11.386,17.15H6.678a.673.673,0,0,0-.673.673v4.036a.673.673,0,0,0,.673.673h4.036a.673.673,0,0,0,.673-.673Z",transform:"translate(-0.542 -1.681)"}),p.createElement("path",{className:"a",d:"M16.713,17.15H12v4.708a.673.673,0,0,0,.673.673h4.036a.673.673,0,0,0,.673-.673V17.823A.673.673,0,0,0,16.713,17.15Z",transform:"translate(-1.16 -1.681)"}),p.createElement("path",{className:"a",d:"M13.713,11.15H9.678a.673.673,0,0,0-.673.673v4.708h5.381V11.823a.673.673,0,0,0-.673-.673Z",transform:"translate(-0.851 -1.062)"}),p.createElement("path",{className:"a",d:"M20.934,20.85V6.859a1.345,1.345,0,0,0-.712-1.187L11.478,1.008a1.345,1.345,0,0,0-1.265,0L1.468,5.671A1.345,1.345,0,0,0,.755,6.859V20.85"}));function mu(e,t){var n=e.title,r=e.titleId,a=hu(e,["title","titleId"]);return p.createElement("svg",pu({xmlns:"http://www.w3.org/2000/svg",width:21.678,height:21.517,viewBox:"0 0 21.678 21.517",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,bu,fu)}var ju=p.forwardRef(mu);n.p;function vu(){return(vu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ou(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var gu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),xu=p.createElement("path",{className:"a",d:"M10.5,16.627l-7.544-.575A1.553,1.553,0,0,0,1.447,18.3h0a1.549,1.549,0,0,0,.844.76l10.434,3.913a3,3,0,0,0,2,.037l7.993-2.664"}),yu=p.createElement("path",{className:"a",d:"M17.47,17.341H11.681a1.332,1.332,0,0,1-1.265-.912h0a1.333,1.333,0,0,1,.914-1.709L17.268,13.1a4.5,4.5,0,0,1,1.924-.1l3.528.588"}),_u=p.createElement("path",{className:"a",d:"M3.22,12.978V2.341A1.541,1.541,0,0,1,4.8.841H18.141a1.541,1.541,0,0,1,1.579,1.5V9.978"}),wu=p.createElement("path",{className:"a",d:"M12.97,6.841h-3a.75.75,0,0,1-.75-.75V.841h4.5v5.25A.75.75,0,0,1,12.97,6.841Z"});function Su(e,t){var n=e.title,r=e.titleId,a=Ou(e,["title","titleId"]);return p.createElement("svg",vu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),gu,void 0===n?p.createElement("title",{id:r},"shipment-deliver"):n?p.createElement("title",{id:r},n):null,xu,yu,_u,wu)}var ku=p.forwardRef(Su);n.p;function Cu(){return(Cu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Eu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#000;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Au=p.createElement("line",{className:"a",x1:16.501,y1:11.997,x2:7.501,y2:11.997}),Iu=p.createElement("polyline",{className:"a",points:"12.751 8.247 16.501 11.997 12.751 15.747"}),Tu=p.createElement("circle",{className:"a",cx:12.001,cy:11.997,r:10.5});function Ru(e,t){var n=e.title,r=e.titleId,a=Nu(e,["title","titleId"]);return p.createElement("svg",Cu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Eu,void 0===n?p.createElement("title",{id:r},"navigation-right-circle-1"):n?p.createElement("title",{id:r},n):null,Au,Iu,Tu)}var Du=p.forwardRef(Ru);n.p;function Mu(){return(Mu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pu=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Fu=p.createElement("polygon",{className:"a",points:"12 0.75 0.75 5.25 12 9.75 23.25 5.25 12 0.75"}),Uu=p.createElement("polygon",{className:"a",points:"0.75 5.25 0.75 18.75 12 23.25 12 9.75 0.75 5.25"}),Bu=p.createElement("polygon",{className:"a",points:"23.25 5.25 23.25 18.75 12 23.25 12 9.75 23.25 5.25"}),Vu=p.createElement("line",{className:"a",x1:18.187,y1:7.275,x2:6.937,y2:2.775}),Ju=p.createElement("line",{className:"a",x1:20.625,y1:16.5,x2:18.75,y2:17.25});function qu(e,t){var n=e.title,r=e.titleId,a=Lu(e,["title","titleId"]);return p.createElement("svg",Mu({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Pu,void 0===n?p.createElement("title",{id:r},"shipment-upload"):n?p.createElement("title",{id:r},n):null,Fu,Uu,Bu,Vu,Ju)}var zu=p.forwardRef(qu);n.p;function Gu(){return(Gu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Wu(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Hu=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),Yu=p.createElement("circle",{className:"cls-1",cx:12,cy:12,r:11.25}),Qu=p.createElement("path",{className:"cls-1",d:"M5.25,13.5a.75.75,0,0,0,.75.75h6.75l-1.72,1.72a.749.749,0,0,0,0,1.06l1.19,1.19a.749.749,0,0,0,1.06,0l5.69-5.69a.749.749,0,0,0,0-1.06L13.28,5.78a.749.749,0,0,0-1.06,0L11.03,6.97a.749.749,0,0,0,0,1.06l1.72,1.72H6a.75.75,0,0,0-.75.75Z"});function Ku(e,t){var n=e.title,r=e.titleId,a=Wu(e,["title","titleId"]);return p.createElement("svg",Gu({id:"Regular",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),Hu,void 0===n?p.createElement("title",{id:r},"arrow-thick-circle-right-1"):n?p.createElement("title",{id:r},n):null,Yu,Qu)}var Zu=p.forwardRef(Ku);n.p;function Xu(){return(Xu=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function $u(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ed=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:#23b376;stroke-linecap:round;stroke-linejoin:round;stroke-width:2px;}")),td=p.createElement("g",{transform:"translate(-10.25 -10.25)"},p.createElement("circle",{className:"a",cx:10,cy:10,r:10,transform:"translate(11.25 11.25)"}),p.createElement("path",{className:"a",d:"M23.615,15.506l-4.842,6.455a1.253,1.253,0,0,1-1.885.135l-2.5-2.5",transform:"translate(2.092 2.837)"}));function nd(e,t){var n=e.title,r=e.titleId,a=$u(e,["title","titleId"]);return p.createElement("svg",Xu({xmlns:"http://www.w3.org/2000/svg",width:22,height:22,viewBox:"0 0 22 22",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ed,td)}var rd=p.forwardRef(nd);n.p;function ad(){return(ad=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function od(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var id=p.createElement("defs",null,p.createElement("style",null,".a{fill:none;stroke:currentColor;stroke-linecap:round;stroke-linejoin:round;stroke-width:1.5px;}")),cd=p.createElement("path",{className:"a",d:"M18.75,14.25H16.717a1.342,1.342,0,0,0-.5,2.587l2.064.826a1.342,1.342,0,0,1-.5,2.587H15.75"}),sd=p.createElement("line",{className:"a",x1:17.25,y1:14.25,x2:17.25,y2:13.5}),ld=p.createElement("line",{className:"a",x1:17.25,y1:21,x2:17.25,y2:20.25}),ud=p.createElement("circle",{className:"a",cx:17.25,cy:17.25,r:6}),dd=p.createElement("path",{className:"a",d:"M8.25,20.25h-6a1.5,1.5,0,0,1-1.5-1.5V2.25A1.5,1.5,0,0,1,2.25.75H12.879a1.5,1.5,0,0,1,1.06.439l2.872,2.872a1.5,1.5,0,0,1,.439,1.06V8.25"});function pd(e,t){var n=e.title,r=e.titleId,a=od(e,["title","titleId"]);return p.createElement("svg",ad({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",ref:t,"aria-labelledby":r},a),id,void 0===n?p.createElement("title",{id:r},"common-file-cash"):n?p.createElement("title",{id:r},n):null,cd,sd,ld,ud,dd)}var hd=p.forwardRef(pd);n.p;function bd(){return(bd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function fd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var md=p.createElement("path",{d:"m242.5 8.902344v57.097656h55.363281zm0 0"}),jd=p.createElement("path",{d:"m206.984375 389.84375c.054687-10.175781 1.851563-20.269531 5.308594-29.84375h-165.824219c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6h171.363281c6.167969-11 14.707031-20 24.929688-28h-196.292969c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6h207.21875c2.070312.050781 3.960938 1.183594 4.988281 2.984375 10.757813-4.65625 22.359375-7.035156 34.082031-6.984375 4.265626-.007812 8.527344.316406 12.742188.980469v-226.980469h-68.652344c-3.3125 0-6.347656-2.539062-6.347656-5.851562v-72.148438h-230v418h211.207031c-3.113281-9.0625-4.707031-18.574219-4.722656-28.15625zm-160.515625-281.84375h107.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-107.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 40h207.21875c3.3125 0 6 2.6875 6 6s-2.6875 6-6 6h-207.21875c-3.3125 0-6-2.6875-6-6s2.6875-6 6-6zm0 0"}),vd=p.createElement("path",{d:"m218.984375 390c0 40.867188 33.128906 74 74 74 40.867187 0 74-33.132812 74-74s-33.132813-74-74-74c-40.851563.046875-73.953125 33.148438-74 74zm79.515625-52v6c11.90625 2.609375 20.398438 13.148438 20.417969 25.335938 0 3.316406-2.6875 6-6 6-3.316407 0-6-2.683594-6-6 0-7.695313-6.238281-13.933594-13.933594-13.933594-7.699219 0-13.9375 6.238281-13.933594 13.933594 0 7.699218 6.238281 13.9375 13.933594 13.933593 13.25 0 24.371094 9.984375 25.789063 23.160157 1.417968 13.175781-7.324219 25.296874-20.273438 28.113281v8.457031c0 3.3125-2.6875 6-6 6s-6-2.6875-6-6v-8.679688c-11.441406-2.972656-19.433594-13.292968-19.449219-25.113281 0-3.316406 2.683594-6 6-6 3.3125 0 6 2.683594 6 6 0 7.695313 6.238281 13.933594 13.933594 13.933594s13.933594-6.238281 13.933594-13.933594c0-7.695312-6.238281-13.933593-13.933594-13.933593-13.0625 0-24.085937-9.710938-25.730469-22.667969-1.644531-12.957031 6.601563-25.117188 19.246094-28.378907v-6.226562c0-3.3125 2.6875-6 6-6s6 2.6875 6 6zm0 0"});function Od(e,t){var n=e.title,r=e.titleId,a=fd(e,["title","titleId"]);return p.createElement("svg",bd({height:"464pt",viewBox:"-48 0 463 464",width:"464pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,md,jd,vd)}var gd=p.forwardRef(Od);n.p;function xd(){return(xd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _d=p.createElement("g",null,p.createElement("path",{d:"M112,6H12C5.4,6,0,11.4,0,18s5.4,12,12,12h100c6.6,0,12-5.4,12-12S118.6,6,112,6z"}),p.createElement("path",{d:"M112,50H12C5.4,50,0,55.4,0,62c0,6.6,5.4,12,12,12h100c6.6,0,12-5.4,12-12C124,55.4,118.6,50,112,50z"}),p.createElement("path",{d:"M112,94H12c-6.6,0-12,5.4-12,12s5.4,12,12,12h100c6.6,0,12-5.4,12-12S118.6,94,112,94z"})),wd=p.createElement("g",null),Sd=p.createElement("g",null),kd=p.createElement("g",null),Cd=p.createElement("g",null),Nd=p.createElement("g",null),Ed=p.createElement("g",null),Ad=p.createElement("g",null),Id=p.createElement("g",null),Td=p.createElement("g",null),Rd=p.createElement("g",null),Dd=p.createElement("g",null),Md=p.createElement("g",null),Ld=p.createElement("g",null),Pd=p.createElement("g",null),Fd=p.createElement("g",null);function Ud(e,t){var n=e.title,r=e.titleId,a=yd(e,["title","titleId"]);return p.createElement("svg",xd({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"124px",height:"124px",viewBox:"0 0 124 124",style:{enableBackground:"new 0 0 124 124"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,_d,wd,Sd,kd,Cd,Nd,Ed,Ad,Id,Td,Rd,Dd,Md,Ld,Pd,Fd)}var Bd=p.forwardRef(Ud);n.p;function Vd(){return(Vd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Jd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var qd=p.createElement("desc",null,"Created with Sketch."),zd=p.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"Two-Tone",transform:"translate(-306.000000, -2106.000000)"},p.createElement("g",{id:"Editor",transform:"translate(100.000000, 1960.000000)"},p.createElement("g",{id:"Two-Tone-/-Editor-/-text_fields",transform:"translate(204.000000, 142.000000)"},p.createElement("g",null,p.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),p.createElement("path",{d:"M12.5,12 L15.5,12 L15.5,19 L18.5,19 L18.5,12 L21.5,12 L21.5,9 L12.5,9 L12.5,12 Z M15.5,4 L2.5,4 L2.5,7 L7.5,7 L7.5,19 L10.5,19 L10.5,7 L15.5,7 L15.5,4 Z",id:"\\uD83D\\uDD39-Primary-Color",fill:"#1D1D1D"}))))));function Gd(e,t){var n=e.title,r=e.titleId,a=Jd(e,["title","titleId"]);return p.createElement("svg",Vd({width:"20px",height:"15px",viewBox:"0 0 20 15",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?p.createElement("title",{id:r},"text_fields"):n?p.createElement("title",{id:r},n):null,qd,zd)}var Wd=p.forwardRef(Gd);n.p;function Hd(){return(Hd=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Yd(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Qd=p.createElement("style",{type:"text/css"},"\n\t.st0{fill:none;stroke:#000000;stroke-width:2;stroke-miterlimit:10;}\n\t.st1{fill:none;stroke:#000000;stroke-width:2;stroke-linejoin:round;stroke-miterlimit:10;}\n\t.st2{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-linejoin:round;stroke-miterlimit:10;}\n\t.st3{fill:none;stroke:#000000;stroke-width:2;stroke-linecap:round;stroke-miterlimit:10;}\n\t.st4{fill:none;stroke:#000000;stroke-width:2;stroke-linejoin:round;stroke-miterlimit:10;stroke-dasharray:3;}\n"),Kd=p.createElement("circle",{className:"st0",cx:6,cy:6,r:3}),Zd=p.createElement("circle",{className:"st0",cx:26,cy:6,r:3}),Xd=p.createElement("circle",{className:"st0",cx:6,cy:26,r:3}),$d=p.createElement("circle",{className:"st0",cx:26,cy:26,r:3}),ep=p.createElement("line",{className:"st0",x1:6,y1:9,x2:6,y2:23}),tp=p.createElement("line",{className:"st0",x1:26,y1:9,x2:26,y2:23}),np=p.createElement("line",{className:"st0",x1:9,y1:26,x2:23,y2:26}),rp=p.createElement("line",{className:"st0",x1:9,y1:6,x2:23,y2:6}),ap=p.createElement("polyline",{className:"st0",points:"11,13 11,11 21,11 21,13 "}),op=p.createElement("line",{className:"st0",x1:14,y1:21,x2:18,y2:21}),ip=p.createElement("line",{className:"st0",x1:16,y1:21,x2:16,y2:11});function cp(e,t){var n=e.title,r=e.titleId,a=Yd(e,["title","titleId"]);return p.createElement("svg",Hd({id:"Icons",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 32 32",style:{enableBackground:"new 0 0 32 32"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Qd,Kd,Zd,Xd,$d,ep,tp,np,rp,ap,op,ip)}var sp=p.forwardRef(cp);n.p;function lp(){return(lp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function up(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var dp=p.createElement("desc",null,"Created with Sketch."),pp=p.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"Rounded",transform:"translate(-578.000000, -2106.000000)"},p.createElement("g",{id:"Editor",transform:"translate(100.000000, 1960.000000)"},p.createElement("g",{id:"-Round-/-Editor-/-format_list_numbered",transform:"translate(476.000000, 142.000000)"},p.createElement("g",null,p.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),p.createElement("path",{d:"M8,7 L20,7 C20.55,7 21,6.55 21,6 C21,5.45 20.55,5 20,5 L8,5 C7.45,5 7,5.45 7,6 C7,6.55 7.45,7 8,7 Z M20,17 L8,17 C7.45,17 7,17.45 7,18 C7,18.55 7.45,19 8,19 L20,19 C20.55,19 21,18.55 21,18 C21,17.45 20.55,17 20,17 Z M20,11 L8,11 C7.45,11 7,11.45 7,12 C7,12.55 7.45,13 8,13 L20,13 C20.55,13 21,12.55 21,12 C21,11.45 20.55,11 20,11 Z M4.5,16 L2.5,16 C2.22,16 2,16.22 2,16.5 C2,16.78 2.22,17 2.5,17 L4,17 L4,17.5 L3.5,17.5 C3.22,17.5 3,17.72 3,18 C3,18.28 3.22,18.5 3.5,18.5 L4,18.5 L4,19 L2.5,19 C2.22,19 2,19.22 2,19.5 C2,19.78 2.22,20 2.5,20 L4.5,20 C4.78,20 5,19.78 5,19.5 L5,16.5 C5,16.22 4.78,16 4.5,16 Z M2.5,5 L3,5 L3,7.5 C3,7.78 3.22,8 3.5,8 C3.78,8 4,7.78 4,7.5 L4,4.5 C4,4.22 3.78,4 3.5,4 L2.5,4 C2.22,4 2,4.22 2,4.5 C2,4.78 2.22,5 2.5,5 Z M4.5,10 L2.5,10 C2.22,10 2,10.22 2,10.5 C2,10.78 2.22,11 2.5,11 L3.8,11 L2.12,12.96 C2.04,13.05 2,13.17 2,13.28 L2,13.5 C2,13.78 2.22,14 2.5,14 L4.5,14 C4.78,14 5,13.78 5,13.5 C5,13.22 4.78,13 4.5,13 L3.2,13 L4.88,11.04 C4.96,10.95 5,10.83 5,10.72 L5,10.5 C5,10.22 4.78,10 4.5,10 Z",id:"\\uD83D\\uDD39-Icon-Color",fill:"#1D1D1D"}))))));function hp(e,t){var n=e.title,r=e.titleId,a=up(e,["title","titleId"]);return p.createElement("svg",lp({width:"19px",height:"16px",viewBox:"0 0 19 16",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?p.createElement("title",{id:r},"format_list_numbered"):n?p.createElement("title",{id:r},n):null,dp,pp)}var bp=p.forwardRef(hp);n.p;function fp(){return(fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function mp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var jp=p.createElement("desc",null,"Created with Sketch."),vp=p.createElement("g",{id:"Icons",stroke:"none",strokeWidth:1,fill:"none",fillRule:"evenodd"},p.createElement("g",{id:"Outlined",transform:"translate(-681.000000, -2815.000000)"},p.createElement("g",{id:"Image",transform:"translate(100.000000, 2626.000000)"},p.createElement("g",{id:"Outlined-/-Image-/-image",transform:"translate(578.000000, 186.000000)"},p.createElement("g",null,p.createElement("polygon",{id:"Path",points:"0 0 24 0 24 24 0 24"}),p.createElement("path",{d:"M19,5 L19,19 L5,19 L5,5 L19,5 Z M19,3 L5,3 C3.9,3 3,3.9 3,5 L3,19 C3,20.1 3.9,21 5,21 L19,21 C20.1,21 21,20.1 21,19 L21,5 C21,3.9 20.1,3 19,3 Z M14.14,11.86 L11.14,15.73 L9,13.14 L6,17 L18,17 L14.14,11.86 Z",id:"\\uD83D\\uDD39-Icon-Color",fill:"#1D1D1D"}))))));function Op(e,t){var n=e.title,r=e.titleId,a=mp(e,["title","titleId"]);return p.createElement("svg",fp({width:"18px",height:"18px",viewBox:"0 0 18 18",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",ref:t,"aria-labelledby":r},a),void 0===n?p.createElement("title",{id:r},"image"):n?p.createElement("title",{id:r},n):null,jp,vp)}var gp=p.forwardRef(Op);n.p;function xp(){return(xp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function yp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var _p=p.createElement("g",null,p.createElement("rect",{x:1,y:16,fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,width:52,height:40})),wp=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,points:"10,14 10,8 63,8 63,48 55,48 "}),Sp=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,points:"1,46 15,32 29,48 39,42 53,54 "}),kp=p.createElement("circle",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,cx:40,cy:29,r:5});function Cp(e,t){var n=e.title,r=e.titleId,a=yp(e,["title","titleId"]);return p.createElement("svg",xp({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,_p,wp,Sp,kp)}var Np=p.forwardRef(Cp);n.p;function Ep(){return(Ep=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Ap(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Ip=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeLinejoin:"bevel",strokeMiterlimit:10,points:"39,16 32,9 25,16  "}),Tp=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeLinejoin:"bevel",strokeMiterlimit:10,points:"25,48 32,55  39,48 "}),Rp=p.createElement("polyline",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,points:"32,55 32,43 32,9 "}),Dp=p.createElement("line",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,x1:0,y1:1,x2:64,y2:1}),Mp=p.createElement("line",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,x1:0,y1:63,x2:64,y2:63});function Lp(e,t){var n=e.title,r=e.titleId,a=Ap(e,["title","titleId"]);return p.createElement("svg",Ep({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Ip,Tp,Rp,Dp,Mp)}var Pp=p.forwardRef(Lp);n.p;function Fp(){return(Fp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Up(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Bp=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M27.43,82.286h82.286v-6.857H27.43V82.286z M68.573,89.144h-6.857v6.857H48.001l17.357,20.572l16.929-20.572H68.573    V89.144z M61.715,48h6.857v-6.857h13.714L65.358,20.572L48.001,41.143h13.714V48z M27.43,61.715h82.286v-6.857H27.43V61.715z     M109.716,0H27.429C12.281,0,0,12.281,0,27.429v82.286c0,15.149,12.281,27.429,27.429,27.429h82.286    c15.149,0,27.429-12.28,27.429-27.429V27.429C137.144,12.281,124.864,0,109.716,0z M123.43,102.859    c0,11.361-9.21,20.571-20.572,20.571H34.286c-11.361,0-20.572-9.21-20.572-20.571V34.286c0-11.361,9.21-20.571,20.572-20.571    h68.572c11.362,0,20.572,9.21,20.572,20.571V102.859z"})));function Vp(e,t){var n=e.title,r=e.titleId,a=Up(e,["title","titleId"]);return p.createElement("svg",Fp({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 137.144 137.144",xmlnsXlink:"http://www.w3.org/1999/xlink",enableBackground:"new 0 0 137.144 137.144",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Bp)}var Jp=p.forwardRef(Vp);n.p;function qp(){return(qp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function zp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Gp=p.createElement("rect",{x:29,y:13,width:2,height:39}),Wp=p.createElement("rect",{x:33,y:13,width:2,height:39}),Hp=p.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,d:"M40.988,23c0,0,0-6-9-6s-8,7-8,7s0,7,8,7 c9,0,10.012,6,10.012,7c0,2,0.988,8-10.012,8c-9,0-8.988-4-8.988-5"}),Yp=p.createElement("path",{fill:"none",stroke:"#000000",strokeWidth:2,strokeMiterlimit:10,d:"M53.92,10.081c12.107,12.105,12.107,31.732,0,43.838 c-12.106,12.108-31.734,12.108-43.839,0c-12.107-12.105-12.107-31.732,0-43.838C22.186-2.027,41.813-2.027,53.92,10.081z"});function Qp(e,t){var n=e.title,r=e.titleId,a=zp(e,["title","titleId"]);return p.createElement("svg",qp({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",width:"64px",height:"64px",viewBox:"0 0 64 64",enableBackground:"new 0 0 64 64",xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Gp,Wp,Hp,Yp)}var Kp=p.forwardRef(Qp);n.p;function Zp(){return(Zp=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Xp(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var $p=p.createElement("path",{d:"M 22.205078 2 A 1.0001 1.0001 0 0 0 21.21875 2.8378906 L 20.246094 8.7929688 C 19.076509 9.1331971 17.961243 9.5922728 16.910156 10.164062 L 11.996094 6.6542969 A 1.0001 1.0001 0 0 0 10.708984 6.7597656 L 6.8183594 10.646484 A 1.0001 1.0001 0 0 0 6.7070312 11.927734 L 10.164062 16.873047 C 9.583454 17.930271 9.1142098 19.051824 8.765625 20.232422 L 2.8359375 21.21875 A 1.0001 1.0001 0 0 0 2.0019531 22.205078 L 2.0019531 27.705078 A 1.0001 1.0001 0 0 0 2.8261719 28.691406 L 8.7597656 29.742188 C 9.1064607 30.920739 9.5727226 32.043065 10.154297 33.101562 L 6.6542969 37.998047 A 1.0001 1.0001 0 0 0 6.7597656 39.285156 L 10.648438 43.175781 A 1.0001 1.0001 0 0 0 11.927734 43.289062 L 16.882812 39.820312 C 17.936999 40.39548 19.054994 40.857928 20.228516 41.201172 L 21.21875 47.164062 A 1.0001 1.0001 0 0 0 22.205078 48 L 27.705078 48 A 1.0001 1.0001 0 0 0 28.691406 47.173828 L 29.751953 41.1875 C 30.920633 40.838997 32.033372 40.369697 33.082031 39.791016 L 38.070312 43.291016 A 1.0001 1.0001 0 0 0 39.351562 43.179688 L 43.240234 39.287109 A 1.0001 1.0001 0 0 0 43.34375 37.996094 L 39.787109 33.058594 C 40.355783 32.014958 40.813915 30.908875 41.154297 29.748047 L 47.171875 28.693359 A 1.0001 1.0001 0 0 0 47.998047 27.707031 L 47.998047 22.207031 A 1.0001 1.0001 0 0 0 47.160156 21.220703 L 41.152344 20.238281 C 40.80968 19.078827 40.350281 17.974723 39.78125 16.931641 L 43.289062 11.933594 A 1.0001 1.0001 0 0 0 43.177734 10.652344 L 39.287109 6.7636719 A 1.0001 1.0001 0 0 0 37.996094 6.6601562 L 33.072266 10.201172 C 32.023186 9.6248101 30.909713 9.1579916 29.738281 8.8125 L 28.691406 2.828125 A 1.0001 1.0001 0 0 0 27.705078 2 L 22.205078 2 z M 23.056641 4 L 26.865234 4 L 27.861328 9.6855469 A 1.0001 1.0001 0 0 0 28.603516 10.484375 C 30.066026 10.848832 31.439607 11.426549 32.693359 12.185547 A 1.0001 1.0001 0 0 0 33.794922 12.142578 L 38.474609 8.7792969 L 41.167969 11.472656 L 37.835938 16.220703 A 1.0001 1.0001 0 0 0 37.796875 17.310547 C 38.548366 18.561471 39.118333 19.926379 39.482422 21.380859 A 1.0001 1.0001 0 0 0 40.291016 22.125 L 45.998047 23.058594 L 45.998047 26.867188 L 40.279297 27.871094 A 1.0001 1.0001 0 0 0 39.482422 28.617188 C 39.122545 30.069817 38.552234 31.434687 37.800781 32.685547 A 1.0001 1.0001 0 0 0 37.845703 33.785156 L 41.224609 38.474609 L 38.53125 41.169922 L 33.791016 37.84375 A 1.0001 1.0001 0 0 0 32.697266 37.808594 C 31.44975 38.567585 30.074755 39.148028 28.617188 39.517578 A 1.0001 1.0001 0 0 0 27.876953 40.3125 L 26.867188 46 L 23.052734 46 L 22.111328 40.337891 A 1.0001 1.0001 0 0 0 21.365234 39.53125 C 19.90185 39.170557 18.522094 38.59371 17.259766 37.835938 A 1.0001 1.0001 0 0 0 16.171875 37.875 L 11.46875 41.169922 L 8.7734375 38.470703 L 12.097656 33.824219 A 1.0001 1.0001 0 0 0 12.138672 32.724609 C 11.372652 31.458855 10.793319 30.079213 10.427734 28.609375 A 1.0001 1.0001 0 0 0 9.6328125 27.867188 L 4.0019531 26.867188 L 4.0019531 23.052734 L 9.6289062 22.117188 A 1.0001 1.0001 0 0 0 10.435547 21.373047 C 10.804273 19.898143 11.383325 18.518729 12.146484 17.255859 A 1.0001 1.0001 0 0 0 12.111328 16.164062 L 8.8261719 11.46875 L 11.523438 8.7734375 L 16.185547 12.105469 A 1.0001 1.0001 0 0 0 17.28125 12.148438 C 18.536908 11.394293 19.919867 10.822081 21.384766 10.462891 A 1.0001 1.0001 0 0 0 22.132812 9.6523438 L 23.056641 4 z M 25 17 C 20.593567 17 17 20.593567 17 25 C 17 29.406433 20.593567 33 25 33 C 29.406433 33 33 29.406433 33 25 C 33 20.593567 29.406433 17 25 17 z M 25 19 C 28.325553 19 31 21.674447 31 25 C 31 28.325553 28.325553 31 25 31 C 21.674447 31 19 28.325553 19 25 C 19 21.674447 21.674447 19 25 19 z"});function eh(e,t){var n=e.title,r=e.titleId,a=Xp(e,["title","titleId"]);return p.createElement("svg",Zp({fill:"#000000",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 50 50",width:"50px",height:"50px",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,$p)}var th=p.forwardRef(eh);n.p;function nh(){return(nh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function rh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var ah=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M368.64,0H20.48C9.175,0,0,9.175,0,20.48v348.16c0,11.305,9.175,20.48,20.48,20.48h348.16 c11.305,0,20.48-9.175,20.48-20.48V20.48C389.12,9.175,379.945,0,368.64,0z M348.16,348.16H40.96V40.96h307.2V348.16z"}))),oh=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M471.04,419.84v51.2h-51.2V512h71.68c11.305,0,20.48-9.175,20.48-20.48v-71.68H471.04z"}))),ih=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:262.349,y:471.04,width:110.182,height:40.96}))),ch=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M163.84,471.04v-51.2h-40.96v71.68c0,11.305,9.175,20.48,20.48,20.48h71.68v-40.96H163.84z"}))),sh=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M491.52,122.88h-71.68v40.96h51.2v51.2H512v-71.68C512,132.055,502.825,122.88,491.52,122.88z"}))),lh=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:471.04,y:262.349,width:40.96,height:110.182}))),uh=p.createElement("g",null),dh=p.createElement("g",null),ph=p.createElement("g",null),hh=p.createElement("g",null),bh=p.createElement("g",null),fh=p.createElement("g",null),mh=p.createElement("g",null),jh=p.createElement("g",null),vh=p.createElement("g",null),Oh=p.createElement("g",null),gh=p.createElement("g",null),xh=p.createElement("g",null),yh=p.createElement("g",null),_h=p.createElement("g",null),wh=p.createElement("g",null);function Sh(e,t){var n=e.title,r=e.titleId,a=rh(e,["title","titleId"]);return p.createElement("svg",nh({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,ah,oh,ih,ch,sh,lh,uh,dh,ph,hh,bh,fh,mh,jh,vh,Oh,gh,xh,yh,_h,wh)}var kh=p.forwardRef(Sh);n.p;function Ch(){return(Ch=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Eh=p.createElement("path",{d:"m0 274.226 176.549 176.886 339.007-338.672-48.67-47.997-290.337 290-128.553-128.552z"});function Ah(e,t){var n=e.title,r=e.titleId,a=Nh(e,["title","titleId"]);return p.createElement("svg",Ch({id:"Capa_1",enableBackground:"new 0 0 515.556 515.556",height:512,viewBox:"0 0 515.556 515.556",width:512,xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Eh)}var Ih=p.forwardRef(Ah);n.p;function Th(){return(Th=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Rh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Dh=p.createElement("g",null,p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M437.019,74.98C388.667,26.629,324.38,0,256,0C187.619,0,123.331,26.629,74.98,74.98C26.628,123.332,0,187.62,0,256    s26.628,132.667,74.98,181.019C123.332,485.371,187.619,512,256,512c68.38,0,132.667-26.629,181.019-74.981    C485.371,388.667,512,324.38,512,256S485.371,123.333,437.019,74.98z M256,482C131.383,482,30,380.617,30,256S131.383,30,256,30    s226,101.383,226,226S380.617,482,256,482z","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#65CA9F"}))),p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M378.305,173.859c-5.857-5.856-15.355-5.856-21.212,0.001L224.634,306.319l-69.727-69.727    c-5.857-5.857-15.355-5.857-21.213,0c-5.858,5.857-5.858,15.355,0,21.213l80.333,80.333c2.929,2.929,6.768,4.393,10.606,4.393    c3.838,0,7.678-1.465,10.606-4.393l143.066-143.066C384.163,189.215,384.163,179.717,378.305,173.859z","data-original":"#000000",className:"active-path","data-old_color":"#000000",fill:"#65CA9F"}))));function Mh(e,t){var n=e.title,r=e.titleId,a=Rh(e,["title","titleId"]);return p.createElement("svg",Th({xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",id:"Capa_1",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",width:"512px",height:"512px",className:"",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Dh)}var Lh=p.forwardRef(Mh);n.p;function Ph(){return(Ph=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Fh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Uh=p.createElement("g",{fill:"#959595",className:"fill-121313"},p.createElement("path",{d:"M16 0C7.163 0 0 7.163 0 16s7.163 16 16 16c8.836 0 16-7.164 16-16 0-8.837-7.164-16-16-16zm0 30C8.268 30 2 23.732 2 16S8.268 2 16 2s14 6.268 14 14-6.268 14-14 14z"}),p.createElement("path",{d:"M23.3 10.393 13.012 20.589l-4.281-4.196a1.016 1.016 0 0 0-1.428 0 .992.992 0 0 0 0 1.414l4.999 4.899c.41.361 1.023.401 1.428 0l10.999-10.899a.994.994 0 0 0 0-1.414 1.019 1.019 0 0 0-1.429 0z"}));function Bh(e,t){var n=e.title,r=e.titleId,a=Fh(e,["title","titleId"]);return p.createElement("svg",Ph({viewBox:"0 0 32 32",xmlSpace:"preserve",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Uh)}var Vh=p.forwardRef(Bh);n.p;function Jh(){return(Jh=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function qh(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var zh=p.createElement("path",{d:"m426.667969 85.335938h-170.667969c-9.414062.027343-17.039062 7.652343-17.066406 17.066406v102.398437c.027344 9.414063 7.652344 17.039063 17.066406 17.066407h8.707031c-.058593.683593-.03125 1.371093.082031 2.050781 3.074219 14.347656 2.273438 29.253906-2.324218 43.191406-1.988282 5.222656-1.28125 11.089844 1.894531 15.691406 3.175781 4.597657 8.410156 7.34375 14 7.335938h40.070313l-19.761719 93.863281h-42.667969c-14.628906 0-27.632812 9.320312-32.335938 23.171875-.789062 2.589844-.296874 5.398437 1.328126 7.566406 1.621093 2.164063 4.179687 3.425781 6.882812 3.398438h201.851562c2.707032.027343 5.261719-1.234375 6.886719-3.398438 1.621094-2.167969 2.113281-4.976562 1.324219-7.566406-4.703125-13.851563-17.707031-23.171875-32.335938-23.171875h-17.066406l34.132813-162.132812c37.703125 0 68.265625-30.5625 68.265625-68.265626 0-37.703124-30.5625-68.265624-68.265625-68.265624zm-104.71875 188.074218c-.550781-.175781-1.117188-.289062-1.691407-.34375l-41.859374.140625c5.671874-16.507812 6.847656-34.226562 3.398437-51.339843h51.003906zm79.117187-162.476562h34.136719c4.710937 0 8.53125 3.820312 8.53125 8.535156 0 4.710938-3.820313 8.53125-8.53125 8.53125h-34.136719c-4.710937 0-8.53125-3.820312-8.53125-8.53125 0-4.714844 3.820313-8.535156 8.53125-8.535156zm34.136719 85.335937h-34.136719c-4.710937 0-8.53125-3.820312-8.53125-8.535156 0-4.710937 3.820313-8.53125 8.53125-8.53125h34.136719c4.710937 0 8.53125 3.820313 8.53125 8.53125 0 4.714844-3.820313 8.535156-8.53125 8.535156zm17.066406-34.132812h-51.203125c-4.710937 0-8.53125-3.824219-8.53125-8.535157 0-4.714843 3.820313-8.535156 8.53125-8.535156h51.203125c4.710938 0 8.53125 3.820313 8.53125 8.535156 0 4.710938-3.820312 8.535157-8.53125 8.535157zm0 0"}),Gh=p.createElement("path",{d:"m170.667969 128v51.203125c-.007813 6.789063 2.683593 13.308594 7.488281 18.109375 4.800781 4.804688 11.320312 7.5 18.113281 7.488281h25.597657v-102.398437h-25.597657c-6.792969-.011719-13.3125 2.683594-18.113281 7.488281-4.804688 4.800781-7.496094 11.320313-7.488281 18.109375zm34.132812 0c4.714844 0 8.535157 3.820312 8.535157 8.535156 0 4.710938-3.820313 8.53125-8.535157 8.53125-4.710937 0-8.53125-3.820312-8.53125-8.53125.011719-4.707031 3.824219-8.519531 8.53125-8.535156zm0 0"}),Wh=p.createElement("path",{d:"m25.601562 366.933594c0-4.710938 3.820313-8.53125 8.53125-8.53125 4.714844 0 8.535157 3.820312 8.535157 8.53125v136.535156h34.132812c4.707031-.015625 8.519531-3.828125 8.535157-8.535156v-332.796875h42.664062c0 9.421875 7.640625 17.066406 17.066406 17.066406h8.535156v-51.203125h-8.535156c-9.425781 0-17.066406 7.640625-17.066406 17.066406h-42.664062v-128c-.015626-4.707031-3.828126-8.519531-8.535157-8.53125h-68.265625c-4.707031.011719-8.519531 3.824219-8.535156 8.53125v477.867188c.015625 4.707031 3.828125 8.519531 8.535156 8.535156h17.066406zm17.066407-298.664063c0-4.714843 3.820312-8.535156 8.535156-8.535156 4.710937 0 8.53125 3.820313 8.53125 8.535156v102.398438c0 4.714843-3.820313 8.535156-8.53125 8.535156-4.714844 0-8.535156-3.820313-8.535156-8.535156zm0 136.53125c0-4.710937 3.820312-8.53125 8.535156-8.53125 4.710937 0 8.53125 3.820313 8.53125 8.53125v17.066407c0 4.714843-3.820313 8.535156-8.53125 8.535156-4.714844 0-8.535156-3.820313-8.535156-8.535156zm0 0"}),Hh=p.createElement("path",{d:"m315.734375 435.203125h34.132813v25.597656h-34.132813zm0 0"}),Yh=p.createElement("path",{d:"m238.933594 435.203125v53.757813c.121094 12.84375 10.625 23.15625 23.46875 23.039062h140.800781c12.839844.117188 23.34375-10.195312 23.464844-23.039062v-53.757813h-59.734375v25.597656c-.011719 9.421875-7.644532 17.054688-17.066406 17.066407h-34.132813c-9.421875-.011719-17.054687-7.644532-17.066406-17.066407v-25.597656zm0 0"}),Qh=p.createElement("path",{d:"m162.050781 52.371094c.320313-2.320313-.324219-4.667969-1.785156-6.5l-34.132813-42.664063c-2.945312-3.683593-8.3125-4.28125-11.996093-1.339843-3.679688 2.945312-4.28125 8.316406-1.335938 11.996093l28.511719 35.632813-18.269531 13.054687c-2.070313 1.480469-3.371094 3.804688-3.550781 6.34375-.179688 2.535157.785156 5.023438 2.625 6.777344l25.601562 24.378906c2.195312 2.160157 5.386719 2.96875 8.347656 2.117188 2.960938-.855469 5.234375-3.238281 5.941406-6.238281.707032-3-.257812-6.148438-2.523437-8.238282l-18.125-17.261718 17.199219-12.289063c1.910156-1.359375 3.171875-3.445313 3.492187-5.769531zm0 0"}),Kh=p.createElement("path",{d:"m114.132812 305.332031c1.769532 1.414063 4.027344 2.070313 6.277344 1.820313s4.308594-1.386719 5.722656-3.15625l34.132813-42.664063c1.464844-1.832031 2.109375-4.183593 1.785156-6.503906s-1.585937-4.40625-3.488281-5.769531l-17.203125-12.285156 18.128906-17.257813c2.265625-2.089844 3.230469-5.238281 2.523438-8.238281s-2.980469-5.382813-5.941407-6.238282c-2.960937-.855468-6.152343-.042968-8.347656 2.117188l-25.601562 24.378906c-1.839844 1.753906-2.804688 4.238282-2.625 6.777344.179687 2.539062 1.480468 4.863281 3.550781 6.34375l18.265625 13.050781-28.507812 35.632813c-2.941407 3.679687-2.347657 9.046875 1.328124 11.992187zm0 0"});function Zh(e,t){var n=e.title,r=e.titleId,a=qh(e,["title","titleId"]);return p.createElement("svg",Jh({height:"512pt",viewBox:"-9 0 512 512.00246",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,zh,Gh,Wh,Hh,Yh,Qh,Kh)}var Xh=p.forwardRef(Zh);n.p;function $h(){return($h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function eb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var tb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M238.933,0C106.974,0,0,106.974,0,238.933s106.974,238.933,238.933,238.933s238.933-106.974,238.933-238.933 C477.726,107.033,370.834,0.141,238.933,0z M238.933,443.733c-113.108,0-204.8-91.692-204.8-204.8s91.692-204.8,204.8-204.8 s204.8,91.692,204.8,204.8C443.611,351.991,351.991,443.611,238.933,443.733z"}))),nb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M370.046,141.534c-6.614-6.388-17.099-6.388-23.712,0v0L187.733,300.134l-56.201-56.201 c-6.548-6.78-17.353-6.967-24.132-0.419c-6.78,6.548-6.967,17.353-0.419,24.132c0.137,0.142,0.277,0.282,0.419,0.419 l68.267,68.267c6.664,6.663,17.468,6.663,24.132,0l170.667-170.667C377.014,158.886,376.826,148.082,370.046,141.534z"}))),rb=p.createElement("g",null),ab=p.createElement("g",null),ob=p.createElement("g",null),ib=p.createElement("g",null),cb=p.createElement("g",null),sb=p.createElement("g",null),lb=p.createElement("g",null),ub=p.createElement("g",null),db=p.createElement("g",null),pb=p.createElement("g",null),hb=p.createElement("g",null),bb=p.createElement("g",null),fb=p.createElement("g",null),mb=p.createElement("g",null),jb=p.createElement("g",null);function vb(e,t){var n=e.title,r=e.titleId,a=eb(e,["title","titleId"]);return p.createElement("svg",$h({id:"Capa_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 477.867 477.867",style:{enableBackground:"new 0 0 477.867 477.867"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,tb,nb,rb,ab,ob,ib,cb,sb,lb,ub,db,pb,hb,bb,fb,mb,jb)}var Ob=p.forwardRef(vb);n.p;function gb(){return(gb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function xb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var yb=p.createElement("path",{d:"m256 512c-141.160156 0-256-114.839844-256-256s114.839844-256 256-256 256 114.839844 256 256-114.839844 256-256 256zm0-475.429688c-120.992188 0-219.429688 98.4375-219.429688 219.429688s98.4375 219.429688 219.429688 219.429688 219.429688-98.4375 219.429688-219.429688-98.4375-219.429688-219.429688-219.429688zm0 0"}),_b=p.createElement("path",{d:"m347.429688 365.714844c-4.679688 0-9.359376-1.785156-12.929688-5.359375l-182.855469-182.855469c-7.144531-7.144531-7.144531-18.714844 0-25.855469 7.140625-7.140625 18.714844-7.144531 25.855469 0l182.855469 182.855469c7.144531 7.144531 7.144531 18.714844 0 25.855469-3.570313 3.574219-8.246094 5.359375-12.925781 5.359375zm0 0"}),wb=p.createElement("path",{d:"m164.570312 365.714844c-4.679687 0-9.355468-1.785156-12.925781-5.359375-7.144531-7.140625-7.144531-18.714844 0-25.855469l182.855469-182.855469c7.144531-7.144531 18.714844-7.144531 25.855469 0 7.140625 7.140625 7.144531 18.714844 0 25.855469l-182.855469 182.855469c-3.570312 3.574219-8.25 5.359375-12.929688 5.359375zm0 0"});function Sb(e,t){var n=e.title,r=e.titleId,a=xb(e,["title","titleId"]);return p.createElement("svg",gb({height:"512pt",viewBox:"0 0 512 512",width:"512pt",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,yb,_b,wb)}var kb=p.forwardRef(Sb);n.p;function Cb(){return(Cb=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Nb(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Eb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M0,0v233.739h233.739V0H0z M200.348,200.348H33.391V33.391h166.957V200.348z"}))),Ab=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:66.783,y:66.783,width:100.174,height:100.174}))),Ib=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M278.261,0v233.739H512V0H278.261z M478.609,200.348H311.652V33.391h166.957V200.348z"}))),Tb=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:345.043,y:66.783,width:100.174,height:100.174}))),Rb=p.createElement("g",null,p.createElement("g",null,p.createElement("path",{d:"M0,278.261V512h233.739V278.261H0z M200.348,478.609H33.391V311.652h166.957V478.609z"}))),Db=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:66.783,y:345.043,width:100.174,height:100.174}))),Mb=p.createElement("g",null,p.createElement("g",null,p.createElement("polygon",{points:"345.043,311.652 345.043,278.261 278.261,278.261 278.261,512 345.043,512 345.043,478.609 311.652,478.609  311.652,411.826 345.043,411.826 345.043,378.435 311.652,378.435 311.652,311.652  "}))),Lb=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:478.609,y:278.261,width:33.391,height:33.391}))),Pb=p.createElement("g",null,p.createElement("g",null,p.createElement("polygon",{points:"478.609,356.174 478.609,478.609 445.217,478.609 445.217,512 512,512 512,356.174  "}))),Fb=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:378.435,y:278.261,width:66.783,height:33.391}))),Ub=p.createElement("g",null,p.createElement("g",null,p.createElement("polygon",{points:"445.217,378.435 445.217,345.043 378.435,345.043 378.435,445.217 445.217,445.217 445.217,411.826  411.826,411.826 411.826,378.435  "}))),Bb=p.createElement("g",null,p.createElement("g",null,p.createElement("rect",{x:378.435,y:478.609,width:33.391,height:33.391}))),Vb=p.createElement("g",null),Jb=p.createElement("g",null),qb=p.createElement("g",null),zb=p.createElement("g",null),Gb=p.createElement("g",null),Wb=p.createElement("g",null),Hb=p.createElement("g",null),Yb=p.createElement("g",null),Qb=p.createElement("g",null),Kb=p.createElement("g",null),Zb=p.createElement("g",null),Xb=p.createElement("g",null),$b=p.createElement("g",null),ef=p.createElement("g",null),tf=p.createElement("g",null);function nf(e,t){var n=e.title,r=e.titleId,a=Nb(e,["title","titleId"]);return p.createElement("svg",Cb({id:"Layer_1",xmlns:"http://www.w3.org/2000/svg",xmlnsXlink:"http://www.w3.org/1999/xlink",x:"0px",y:"0px",viewBox:"0 0 512 512",style:{enableBackground:"new 0 0 512 512"},xmlSpace:"preserve",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Eb,Ab,Ib,Tb,Rb,Db,Mb,Lb,Pb,Fb,Ub,Bb,Vb,Jb,qb,zb,Gb,Wb,Hb,Yb,Qb,Kb,Zb,Xb,$b,ef,tf)}var rf=p.forwardRef(nf);n.p;function af(){return(af=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function of(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var cf=p.createElement("defs",null,p.createElement("style",null,".cls-1{fill-rule:evenodd;}")),sf=p.createElement("path",{className:"cls-1",d:"M53.85,94.05a14.42,14.42,0,1,1-14.41,14.42A14.43,14.43,0,0,1,53.85,94.05ZM3.92,9.83A5,5,0,1,1,6,.11L28.56,5,51.9,87.53a20.87,20.87,0,0,0-9.4,3.24L20.63,13.45,3.92,9.83Zm48.75,47L92,46.87a2.22,2.22,0,0,1,2.62,1.54l8.59,30A2,2,0,0,1,101.78,81L62.46,90.9a2.22,2.22,0,0,1-2.62-1.54l-8.6-30a2,2,0,0,1,1.43-2.55ZM41,16,80.23,6a2.24,2.24,0,0,1,2.63,1.54l8.88,30a2,2,0,0,1-1.4,2.55L51.11,50.06a2.24,2.24,0,0,1-2.63-1.54l-8.89-30A2,2,0,0,1,41,16ZM71.16,96.53l35-9.23a5,5,0,1,1,2.53,9.6l-33.92,9a20.93,20.93,0,0,0-3.56-9.33Zm-17.31,8.4a3.54,3.54,0,1,1-3.54,3.54,3.53,3.53,0,0,1,3.54-3.54Z"});function lf(e,t){var n=e.title,r=e.titleId,a=of(e,["title","titleId"]);return p.createElement("svg",af({id:"Layer_1","data-name":"Layer 1",xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 112.34 122.88",ref:t,"aria-labelledby":r},a),cf,void 0===n?p.createElement("title",{id:r},"only-use-the-trolley"):n?p.createElement("title",{id:r},n):null,sf)}var uf=p.forwardRef(lf);n.p;function df(){return(df=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function pf(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var hf=p.createElement("path",{d:"  M0,500  h40  v--3.1309371418507226  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),bf=p.createElement("path",{d:"  M50,500  h40  v-9.224081492010896  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),ff=p.createElement("path",{d:"  M100,500  h40  v-22.64325553369838  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),mf=p.createElement("path",{d:"  M150,500  h40  v-35.690904939179234  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),jf=p.createElement("path",{d:"  M200,500  h40  v-63.26406287173995  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),vf=p.createElement("path",{d:"  M250,500  h40  v-102.88375618610559  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Of=p.createElement("path",{d:"  M300,500  h40  v-103.28585186702855  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),gf=p.createElement("path",{d:"  M350,500  h40  v-136.59560115079614  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),xf=p.createElement("path",{d:"  M400,500  h40  v-179.14204640160358  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),yf=p.createElement("path",{d:"  M450,500  h40  v-220.62473863494222  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),_f=p.createElement("path",{d:"  M500,500  h40  v-166.04661576029866  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),wf=p.createElement("path",{d:"  M550,500  h40  v-247.63347068067395  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Sf=p.createElement("path",{d:"  M600,500  h40  v-241.38659128671907  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),kf=p.createElement("path",{d:"  M650,500  h40  v-262.2700501423874  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Cf=p.createElement("path",{d:"  M700,500  h40  v-354.2665743136629  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Nf=p.createElement("path",{d:"  M750,500  h40  v-360.33292878890234  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Ef=p.createElement("path",{d:"  M800,500  h40  v-289.00128899811193  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Af=p.createElement("path",{d:"  M850,500  h40  v-314.94331161474327  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),If=p.createElement("path",{d:"  M900,500  h40  v-288.8644506018891  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"}),Tf=p.createElement("path",{d:"  M950,500  h40  v-298.848432818789  q0,-7 -7,-7  h-26  q-7,0 -7,7  Z",fill:"#289ECB"});function Rf(e,t){var n=e.title,r=e.titleId,a=pf(e,["title","titleId"]);return p.createElement("svg",df({id:"chart",width:1e3,height:500,viewBox:"0 0 1000 500",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,hf,bf,ff,mf,jf,vf,Of,gf,xf,yf,_f,wf,Sf,kf,Cf,Nf,Ef,Af,If,Tf)}var Df=p.forwardRef(Rf);n.p;function Mf(){return(Mf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Lf(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Pf=p.createElement("g",{id:"Contact_approved"},p.createElement("path",{d:"M25.4792,25.8422a1.3449,1.3449,0,0,0,1.3438-1.3437V15.2626l-10.1494,10.58Z"}),p.createElement("path",{d:"M40.3579,14.1066c0-.0847.011-.1668.0127-.2512H29.4714a1.28,1.28,0,0,1,.0508.2515V24.4985a4.0473,4.0473,0,0,1-4.043,4.0429h-10.1V58.9372a2.6736,2.6736,0,0,0,2.6736,2.6736H51.4941a2.6736,2.6736,0,0,0,2.6736-2.6736V25.8928a11.8652,11.8652,0,0,1-13.81-11.7862Zm-1.79,40.4524H34.5857a4.354,4.354,0,0,1-4.3272-3.9218L24.7712,54.33a1.35,1.35,0,0,1-1.5078-2.24l6.05-4.07a2.325,2.325,0,0,1,3.624,1.93v.2627A1.65,1.65,0,0,0,34.5857,51.86h3.9824a1.35,1.35,0,1,1,0,2.6992Zm0-11.8642H22.9812a1.35,1.35,0,0,1,0-2.6993H38.5681a1.35,1.35,0,0,1,0,2.6993ZM46.09,54.559H44.0388a1.35,1.35,0,0,1,0-2.6992H46.09a1.35,1.35,0,0,1,0,2.6992Zm0-18.1328H22.9812a1.35,1.35,0,0,1,0-2.6992H46.09a1.35,1.35,0,0,1,0,2.6992Z"}),p.createElement("path",{d:"M14.8376,13.4955V4.26L4.6885,14.8393h8.8054A1.3449,1.3449,0,0,0,14.8376,13.4955Z"}),p.createElement("path",{d:"M28.1731,11.1555H40.7419a11.8693,11.8693,0,0,1,1.4405-3.3643V5.5263a2.6736,2.6736,0,0,0-2.6736-2.6736H17.4861a1.2745,1.2745,0,0,1,.0508.2512V13.4955a4.0473,4.0473,0,0,1-4.043,4.043h-10.1v30.396a2.6736,2.6736,0,0,0,2.6736,2.6736h6.6118V27.192a2.7,2.7,0,0,1,.7515-1.8692L26.2246,11.9863A2.7,2.7,0,0,1,28.1731,11.1555Z"}),p.createElement("path",{d:"M52.3044,4.86a9.2465,9.2465,0,1,0,9.2464,9.2465A9.2465,9.2465,0,0,0,52.3044,4.86Zm5.2832,7.1384L52.31,18.09a1.351,1.351,0,0,1-1.02.4658h-.0039a1.3517,1.3517,0,0,1-1.0215-.4707l-2.4893-2.9043a1.3505,1.3505,0,0,1,2.0508-1.7578l1.47,1.7148,4.251-4.9072a1.35,1.35,0,1,1,2.041,1.7676Z"}));function Ff(e,t){var n=e.title,r=e.titleId,a=Lf(e,["title","titleId"]);return p.createElement("svg",Mf({viewBox:"0 0 64 64",xmlns:"http://www.w3.org/2000/svg",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Pf)}var Uf=p.forwardRef(Ff);n.p;function Bf(){return(Bf=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}function Vf(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}var Jf=p.createElement("defs",null,p.createElement("style",null,".svgPending{fill:currentColor !important;} ")),qf=p.createElement("path",{className:"svgPending",d:"M 133.980469 62.746094 C 124.605469 53.371094 112.15625 48.226562 98.910156 48.226562 C 85.664062 48.226562 73.214844 53.386719 63.839844 62.746094 C 54.464844 72.105469 49.320312 84.570312 49.320312 97.816406 C 49.320312 111.058594 54.480469 123.523438 63.839844 132.886719 C 73.214844 142.261719 85.664062 147.40625 98.910156 147.40625 C 112.15625 147.40625 124.621094 142.246094 133.980469 132.886719 C 143.355469 123.511719 148.5 111.058594 148.5 97.816406 C 148.5 84.570312 143.339844 72.121094 133.980469 62.746094 Z M 98.910156 141.554688 C 74.789062 141.554688 55.171875 121.933594 55.171875 97.816406 C 55.171875 73.695312 74.789062 54.074219 98.910156 54.074219 C 123.03125 54.074219 142.648438 73.695312 142.648438 97.816406 C 142.648438 121.933594 123.03125 141.554688 98.910156 141.554688 Z M 98.910156 141.554688 "}),zf=p.createElement("path",{className:"svgPending",d:"M 52.230469 141.554688 L 8.296875 141.554688 C 7.785156 141.554688 7.351562 141.121094 7.351562 140.609375 L 7.351562 9.390625 C 7.351562 8.878906 7.785156 8.445312 8.296875 8.445312 L 106.964844 8.445312 C 107.476562 8.445312 107.910156 8.878906 107.910156 9.390625 L 107.910156 30.960938 C 107.910156 32.578125 109.214844 33.886719 110.835938 33.886719 C 112.453125 33.886719 113.761719 32.578125 113.761719 30.960938 L 113.761719 9.390625 C 113.761719 5.640625 110.714844 2.59375 106.964844 2.59375 L 8.296875 2.59375 C 4.546875 2.59375 1.5 5.640625 1.5 9.390625 L 1.5 140.625 C 1.5 144.375 4.546875 147.421875 8.296875 147.421875 L 52.230469 147.421875 C 53.851562 147.421875 55.15625 146.113281 55.15625 144.496094 C 55.15625 142.875 53.851562 141.554688 52.230469 141.554688 Z M 52.230469 141.554688 "}),Gf=p.createElement("path",{className:"svgPending",d:"M 96.464844 34.273438 C 96.464844 32.65625 95.160156 31.351562 93.539062 31.351562 L 21.359375 31.351562 C 19.738281 31.351562 18.433594 32.65625 18.433594 34.273438 C 18.433594 35.894531 19.738281 37.199219 21.359375 37.199219 L 93.539062 37.199219 C 95.160156 37.199219 96.464844 35.878906 96.464844 34.273438 Z M 96.464844 34.273438 "}),Wf=p.createElement("path",{className:"svgPending",d:"M 55.558594 62.773438 C 55.558594 61.15625 54.253906 59.851562 52.636719 59.851562 L 21.359375 59.851562 C 19.738281 59.851562 18.433594 61.15625 18.433594 62.773438 C 18.433594 64.394531 19.738281 65.699219 21.359375 65.699219 L 52.636719 65.699219 C 54.253906 65.699219 55.558594 64.394531 55.558594 62.773438 Z M 55.558594 62.773438 "}),Hf=p.createElement("path",{className:"svgPending",d:"M 40.875 88.363281 L 21.375 88.363281 C 19.753906 88.363281 18.449219 89.671875 18.449219 91.289062 C 18.449219 92.910156 19.753906 94.214844 21.375 94.214844 L 40.875 94.214844 C 42.496094 94.214844 43.800781 92.910156 43.800781 91.289062 C 43.800781 89.671875 42.480469 88.363281 40.875 88.363281 Z M 40.875 88.363281 "}),Yf=p.createElement("path",{className:"svgPending",d:"M 40.875 116.863281 L 21.375 116.863281 C 19.753906 116.863281 18.449219 118.171875 18.449219 119.789062 C 18.449219 121.410156 19.753906 122.714844 21.375 122.714844 L 40.875 122.714844 C 42.496094 122.714844 43.800781 121.410156 43.800781 119.789062 C 43.800781 118.183594 42.480469 116.863281 40.875 116.863281 Z M 40.875 116.863281 "}),Qf=p.createElement("path",{className:"svgPending",d:"M 79.621094 73.425781 C 79.621094 85.378906 89.144531 94.125 94.695312 98.203125 C 89.144531 102.285156 79.621094 111.03125 79.621094 122.984375 L 79.621094 125.910156 L 120.359375 125.910156 L 120.359375 122.984375 C 120.359375 111.03125 110.835938 102.285156 105.285156 98.203125 C 110.835938 94.125 120.359375 85.378906 120.359375 73.425781 L 120.359375 70.5 L 79.621094 70.5 Z M 114.253906 120.058594 L 85.753906 120.058594 C 87.421875 110.835938 96.449219 104.023438 100.003906 101.65625 C 103.558594 104.023438 112.589844 110.835938 114.253906 120.058594 Z M 114.253906 76.351562 C 112.589844 85.574219 103.546875 92.386719 100.003906 94.753906 C 96.449219 92.398438 87.40625 85.605469 85.753906 76.351562 Z M 114.253906 76.351562 "});function Kf(e,t){var n=e.title,r=e.titleId,a=Vf(e,["title","titleId"]);return p.createElement("svg",Bf({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 150 150",ref:t,"aria-labelledby":r},a),n?p.createElement("title",{id:r},n):null,Jf,qf,zf,Gf,Wf,Hf,Yf,Qf)}var Zf,Xf,$f=p.forwardRef(Kf);n.p;!function(e){e[e.Add=0]="Add",e[e.AddCircle=1]="AddCircle",e[e.AddNote=2]="AddNote",e[e.Alert=3]="Alert",e[e.AnalyticsBar=4]="AnalyticsBar",e[e.Archive=5]="Archive",e[e.ArrowBack=6]="ArrowBack",e[e.ArrowNext=7]="ArrowNext",e[e.ArrowDown=8]="ArrowDown",e[e.ArrowLeft=9]="ArrowLeft",e[e.ArrowThickCircleRight=10]="ArrowThickCircleRight",e[e.ArrowUp=11]="ArrowUp",e[e.Attachment=12]="Attachment",e[e.Barista=13]="Barista",e[e.Broker=14]="Broker",e[e.BulletList=15]="BulletList",e[e.Calendar=16]="Calendar",e[e.Check=17]="Check",e[e.CheckSimple=18]="CheckSimple",e[e.CheckSquare=19]="CheckSquare",e[e.Chevron=20]="Chevron",e[e.Clock=21]="Clock",e[e.CogWheel=22]="CogWheel",e[e.Comment=23]="Comment",e[e.CopyPaste=24]="CopyPaste",e[e.Delete=25]="Delete",e[e.DrawerOpen=26]="DrawerOpen",e[e.Download=27]="Download",e[e.EditPerson=28]="EditPerson",e[e.EmailReply=29]="EmailReply",e[e.Expand=30]="Expand",e[e.File=31]="File",e[e.FileCash=32]="FileCash",e[e.FileCheck=33]="FileCheck",e[e.FileEdit=34]="FileEdit",e[e.FileQuestion=35]="FileQuestion",e[e.Filter=36]="Filter",e[e.Flag=37]="Flag",e[e.Hand=38]="Hand",e[e.Insurance=39]="Insurance",e[e.LayoutNone=40]="LayoutNone",e[e.LayoutBullets=41]="LayoutBullets",e[e.Loading=42]="Loading",e[e.LoadingInline=43]="LoadingInline",e[e.LocationPin=44]="LocationPin",e[e.LocationUser=45]="LocationUser",e[e.ManCircle=46]="ManCircle",e[e.ManShield=47]="ManShield",e[e.Materials=48]="Materials",e[e.Mention=49]="Mention",e[e.MenuHorizontal=50]="MenuHorizontal",e[e.MenuVertical=51]="MenuVertical",e[e.MessageChat=52]="MessageChat",e[e.Notification=53]="Notification",e[e.Pencil=54]="Pencil",e[e.People=55]="People",e[e.Pin=56]="Pin",e[e.PinMap=57]="PinMap",e[e.PinMapFilled=58]="PinMapFilled",e[e.Printer=59]="Printer",e[e.Remove=60]="Remove",e[e.Rotate=61]="Rotate",e[e.Search=62]="Search",e[e.Setting=63]="Setting",e[e.ShipmentDeliver=64]="ShipmentDeliver",e[e.ShipmentUpload=65]="ShipmentUpload",e[e.Stopwatch=66]="Stopwatch",e[e.SubtractCircle=67]="SubtractCircle",e[e.Tags=68]="Tags",e[e.TextBold=69]="TextBold",e[e.TextItalic=70]="TextItalic",e[e.TextUnderlined=71]="TextUnderlined",e[e.Tools=72]="Tools",e[e.Trash=73]="Trash",e[e.Truck=74]="Truck",e[e.Trolley=75]="Trolley",e[e.View=76]="View",e[e.LeftArrowNavigation=77]="LeftArrowNavigation",e[e.RightArrowNavigation=78]="RightArrowNavigation",e[e.WarehouseStorage=79]="WarehouseStorage",e[e.NavigationRightCircle=80]="NavigationRightCircle",e[e.DeliveryTruck=81]="DeliveryTruck",e[e.ToastClose=82]="ToastClose",e[e.CheckIcon=83]="CheckIcon",e[e.CashFileIcon=84]="CashFileIcon",e[e.Invoice=85]="Invoice",e[e.MenuDrag=86]="MenuDrag",e[e.Heading=87]="Heading",e[e.Text=88]="Text",e[e.NumberList=89]="NumberList",e[e.Images=90]="Images",e[e.Photos=91]="Photos",e[e.Spacer=92]="Spacer",e[e.PageBreak=93]="PageBreak",e[e.Costing=94]="Costing",e[e.Duplicate=95]="Duplicate",e[e.Checked=96]="Checked",e[e.markAsRead=97]="markAsRead",e[e.markAsReadGray=98]="markAsReadGray",e[e.drillingMachine=99]="drillingMachine",e[e.TickCircle=100]="TickCircle",e[e.CrossCircle=101]="CrossCircle",e[e.QRCode=102]="QRCode",e[e.Chart=103]="Chart",e[e.Approved=104]="Approved",e[e.PendingApproval=105]="PendingApproval"}(Xf||(Xf={}));var em=(Zf={},Object(k.a)(Zf,Xf.Add,R),Object(k.a)(Zf,Xf.AddCircle,V),Object(k.a)(Zf,Xf.AddNote,W),Object(k.a)(Zf,Xf.Alert,Z),Object(k.a)(Zf,Xf.AnalyticsBar,he),Object(k.a)(Zf,Xf.Archive,xe),Object(k.a)(Zf,Xf.ArrowBack,Ve),Object(k.a)(Zf,Xf.ArrowNext,ct),Object(k.a)(Zf,Xf.ArrowDown,pt),Object(k.a)(Zf,Xf.ArrowLeft,vt),Object(k.a)(Zf,Xf.ArrowUp,_t),Object(k.a)(Zf,Xf.Attachment,Nt),Object(k.a)(Zf,Xf.Barista,Dt),Object(k.a)(Zf,Xf.Broker,Wt),Object(k.a)(Zf,Xf.BulletList,Zt),Object(k.a)(Zf,Xf.Calendar,nn),Object(k.a)(Zf,Xf.Check,sn),Object(k.a)(Zf,Xf.CheckSimple,hn),Object(k.a)(Zf,Xf.CheckSquare,gn),Object(k.a)(Zf,Xf.Chevron,kn),Object(k.a)(Zf,Xf.Clock,Dn),Object(k.a)(Zf,Xf.CogWheel,Vn),Object(k.a)(Zf,Xf.Comment,Wn),Object(k.a)(Zf,Xf.CopyPaste,ar),Object(k.a)(Zf,Xf.Delete,lr),Object(k.a)(Zf,Xf.DrawerOpen,fr),Object(k.a)(Zf,Xf.Download,_r),Object(k.a)(Zf,Xf.EditPerson,Ir),Object(k.a)(Zf,Xf.EmailReply,Lr),Object(k.a)(Zf,Xf.Expand,Qr),Object(k.a)(Zf,Xf.File,aa),Object(k.a)(Zf,Xf.FileCash,ja),Object(k.a)(Zf,Xf.FileCheck,Na),Object(k.a)(Zf,Xf.FileEdit,Fa),Object(k.a)(Zf,Xf.FileQuestion,Ka),Object(k.a)(Zf,Xf.Filter,no),Object(k.a)(Zf,Xf.Flag,co),Object(k.a)(Zf,Xf.Hand,jo),Object(k.a)(Zf,Xf.Insurance,wo),Object(k.a)(Zf,Xf.LayoutNone,Ao),Object(k.a)(Zf,Xf.LayoutBullets,Vo),Object(k.a)(Zf,Xf.Loading,Ho),Object(k.a)(Zf,Xf.LoadingInline,ei),Object(k.a)(Zf,Xf.LocationPin,si),Object(k.a)(Zf,Xf.LocationUser,mi),Object(k.a)(Zf,Xf.ManCircle,Si),Object(k.a)(Zf,Xf.ManShield,Li),Object(k.a)(Zf,Xf.Materials,Wi),Object(k.a)(Zf,Xf.Mention,Zi),Object(k.a)(Zf,Xf.MenuHorizontal,nc),Object(k.a)(Zf,Xf.MenuVertical,cc),Object(k.a)(Zf,Xf.MessageChat,fc),Object(k.a)(Zf,Xf.Notification,_c),Object(k.a)(Zf,Xf.Pencil,Tc),Object(k.a)(Zf,Xf.People,Pc),Object(k.a)(Zf,Xf.Pin,zc),Object(k.a)(Zf,Xf.PinMap,Zc),Object(k.a)(Zf,Xf.PinMapFilled,ns),Object(k.a)(Zf,Xf.Printer,hs),Object(k.a)(Zf,Xf.Remove,gs),Object(k.a)(Zf,Xf.Rotate,Cs),Object(k.a)(Zf,Xf.Search,Ds),Object(k.a)(Zf,Xf.Stopwatch,Ks),Object(k.a)(Zf,Xf.SubtractCircle,rl),Object(k.a)(Zf,Xf.Tags,sl),Object(k.a)(Zf,Xf.TextBold,hl),Object(k.a)(Zf,Xf.TextItalic,vl),Object(k.a)(Zf,Xf.TextUnderlined,_l),Object(k.a)(Zf,Xf.Tools,Dl),Object(k.a)(Zf,Xf.Trash,Ul),Object(k.a)(Zf,Xf.Truck,zl),Object(k.a)(Zf,Xf.LeftArrowNavigation,au),Object(k.a)(Zf,Xf.RightArrowNavigation,du),Object(k.a)(Zf,Xf.View,Zl),Object(k.a)(Zf,Xf.WarehouseStorage,ju),Object(k.a)(Zf,Xf.ShipmentDeliver,ku),Object(k.a)(Zf,Xf.NavigationRightCircle,Du),Object(k.a)(Zf,Xf.ShipmentUpload,zu),Object(k.a)(Zf,Xf.DeliveryTruck,zl),Object(k.a)(Zf,Xf.ToastClose,gs),Object(k.a)(Zf,Xf.ArrowThickCircleRight,Zu),Object(k.a)(Zf,Xf.CheckIcon,rd),Object(k.a)(Zf,Xf.CashFileIcon,hd),Object(k.a)(Zf,Xf.Invoice,gd),Object(k.a)(Zf,Xf.MenuDrag,Bd),Object(k.a)(Zf,Xf.Heading,Wd),Object(k.a)(Zf,Xf.Text,sp),Object(k.a)(Zf,Xf.NumberList,bp),Object(k.a)(Zf,Xf.Images,gp),Object(k.a)(Zf,Xf.Photos,Np),Object(k.a)(Zf,Xf.Spacer,Pp),Object(k.a)(Zf,Xf.PageBreak,Jp),Object(k.a)(Zf,Xf.Costing,Kp),Object(k.a)(Zf,Xf.Setting,th),Object(k.a)(Zf,Xf.Duplicate,kh),Object(k.a)(Zf,Xf.Checked,Ih),Object(k.a)(Zf,Xf.markAsRead,Lh),Object(k.a)(Zf,Xf.markAsReadGray,Vh),Object(k.a)(Zf,Xf.drillingMachine,Xh),Object(k.a)(Zf,Xf.TickCircle,Ob),Object(k.a)(Zf,Xf.CrossCircle,kb),Object(k.a)(Zf,Xf.QRCode,rf),Object(k.a)(Zf,Xf.Trolley,uf),Object(k.a)(Zf,Xf.Chart,Df),Object(k.a)(Zf,Xf.Approved,Uf),Object(k.a)(Zf,Xf.PendingApproval,$f),Zf),tm=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=em[this.props.name];return this.props.name===Xf.ToastClose?Object(a.jsx)(e,{width:this.props.size,height:this.props.size}):Object(a.jsx)(e,Object(c.a)({width:this.props.size,height:this.props.size},this.props))}}]),n}(p.PureComponent);tm.defaultProps={size:20};var nm,rm,am,om,im,cm=tm,sm={small:"0.5rem",smaller:"0.85rem",smallSize1:"0.7rem",normal:"1rem",medium:"1.15rem",big:"2rem"},lm={light:"300",normal:"400",medium:"500",bold:"700"},um=n(29),dm=n(14),pm=n.n(dm);!function(e){e.draft="draft",e.pending_approval="pending_approval",e.overdue="overdue",e.paid="paid",e.unpaid="unpaid",e.all="all"}(am||(am={})),function(e){e.draft="draft",e.paid="paid",e.unpaid="unpaid"}(om||(om={})),function(e){e.draft="draft",e.approved="approved",e.paid="paid",e.unpaid="unpaid",e.pending_approval="pending approval"}(im||(im={}));var hm=(nm={},Object(k.a)(nm,im.draft,"draft"),Object(k.a)(nm,am.pending_approval,"pending approval"),Object(k.a)(nm,im.approved,"approved"),Object(k.a)(nm,am.paid,"paid"),Object(k.a)(nm,am.unpaid,"unpaid"),Object(k.a)(nm,am.overdue,"overdue"),nm),bm=(rm={},Object(k.a)(rm,im.draft,_.gray6),Object(k.a)(rm,am.pending_approval,_.orange1),Object(k.a)(rm,im.approved,_.gray4),Object(k.a)(rm,am.unpaid,_.red1),Object(k.a)(rm,am.overdue,_.red1),Object(k.a)(rm,am.paid,_.purple1),Object(k.a)(rm,"DEFAULT",_.gray0),rm),fm=n(563);function mm(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};null===e&&(e={});var t={first_name:e.first_name||"---",last_name:e.last_name||"---",initials:"",full_name:"",name:"",invalid:!1};return e.first_name&&e.last_name?t.initials="".concat(e.first_name[0]).concat(e.last_name[0]):t.initials="--",e.full_name?t.full_name=e.full_name:t.full_name="".concat(t.first_name," ").concat(t.last_name),t.invalid=t.full_name.includes("---"),t.name=(t.invalid?e.email:t.full_name)||t.full_name,t}function jm(e,t){if(e){var n={};return e.forEach((function(e){var r=pm()(j.a.get(e,t)),a="".concat(r.year(),"-").concat(r.month()+1,"-").concat(r.date());n[pm()(a).unix()]?(n[pm()(a).unix()].items.push(e),n[pm()(a).unix()].items=n[pm()(a).unix()].items.sort((function(e,n){return pm()(j.a.get(e,t))>pm()(j.a.get(n,t))?-1:1}))):n[pm()(a).unix()]={unix:pm()(a).unix(),items:[e]}})),Object.values(n).sort((function(e,t){return e.unix>t.unix?-1:1}))}return[]}function vm(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(Object(m.isNil)(e))return"$ 0.00";var n=Math.abs("string"===typeof e?parseFloat(e):e),r=Om(t?n.toFixed(2).toString():n.toFixed(0).toString());return"".concat(e<0?"-":"","$ ").concat(r)}function Om(e){return e.replace(/(\d)(?=(\d\d\d)+([^\d]|$))/g,"$1,")}function gm(){for(var e="#",t=0;t<6;t++)e+="0123456789ABCDEF"[Math.floor(16*Math.random())];return e}function xm(e,t,n){return fm.sanitize(e.replace(/\n/g,"<br />"),{ALLOWED_TAGS:t?[]:["b","strong","i","em","u","ul","li","p","span","br","table","thead","tbody","tr","th","td"].concat(n)})}function ym(e){return e.replace(/@(\w+)_(\w+)\b/g,(function(e,t,n){return"<strong>@".concat(t," ").concat(n,"</strong>")}))}function _m(e){return"#".concat("00000".concat(e.toString(16)).slice(-6))}function wm(e){var t=e.latest_status,n=e.virtual_status,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],a=[];return t&&t.status&&a.push(t.status),n&&n!==a[0]&&a.push(n),a.filter((function(e){return!r.includes(e)}))}function Sm(e){return bm[e]||bm.DEFAULT}function km(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return e?vm(e):t}function Cm(e){var t=Math.floor(+e/60);return e=+e%60,"".concat(Object(m.pad)(t.toString()),":").concat(Object(m.padStart)(e.toString(),2,"0"))}function Nm(e){var t=e.slice(1).reduce((function(e,t){return pm.a.duration(t).add(e)}),pm.a.duration(e[0]))._milliseconds/1e3,n=Math.floor(t/3600),r=Math.floor(t%3600/60);return"".concat(Object(m.pad)(n.toString()),":").concat(Object(m.padStart)(r.toString(),2,"0"))}function Em(e){var t=Math.floor(+e/60);return e=+e%60,pm()().hour(t).minutes(e)}function Am(e){return 60*pm()(e).hours()+pm()(e).minutes()}function Im(e){return["1","true","on",!0,1].includes(e)}var Tm=function(e){return parseFloat(e+""||"0").toFixed(2).replace(/\d(?=(\d{3})+\.)/g,"$&,")},Rm={__timerId:null,__title:void 0,status:function(e){function t(t,n,r){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t,n){var r=this;if(!t||!document.hasFocus()){this.__title||(this.__title=document.title);var a=e+" | "+this.__title;document.title=a,clearTimeout(this.__timerId),n&&(this.__timerId=setTimeout((function(){r.reset(),r.__timerId=setTimeout((function(){r.status(e,t)}),500)}),500))}})),reset:function(){clearTimeout(this.__timerId),this.__timerId=null,this.__title&&(document.title=this.__title,this.__title=void 0)}},Dm=function(){return new Promise((function(e,t){try{navigator.geolocation.getCurrentPosition(e,t)}catch(n){t(n)}}))},Mm=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return j.a.round(e,t)};function Lm(){var e=Object(f.a)(["\n  ","\n  color: ",";\n  :hover {\n    color: ",";\n  }\n  font-weight: ",";\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n"]);return Lm=function(){return e},e}function Pm(){var e=Object(f.a)(["\n  ","\n  color: ",";\n  font-weight: ",";\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n"]);return Pm=function(){return e},e}function Fm(){var e=Object(f.a)(["\n  line-height: 0;\n  padding: 13px 26px;\n  background: transparent;\n  color: ",";\n  font-weight: normal;\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n  :hover path,\n  :hover circle {\n    stroke: ",";\n  }\n  :hover {\n    color: ",";\n  }\n"]);return Fm=function(){return e},e}function Um(){var e=Object(f.a)(["\n  fill: transparent;\n  min-width: 20px;\n"]);return Um=function(){return e},e}function Bm(){var e=Object(f.a)(["\n  max-width: 100%;\n  padding-left: ","px;\n  line-height: 1rem;\n  .refresh {\n    transform: rotateY(180deg);\n  }\n"]);return Bm=function(){return e},e}var Vm=y.default.div(Bm(),(function(e){return e.havePadding?26:0})),Jm=Object(y.default)(cm)(Um()),qm=Object(y.css)(Fm(),_.black0,_.black0,_.blue4,_.blue4),zm=Object(y.default)(v.b)(Pm(),qm,(function(e){return e.isActive?_.blue4:_.black0}),(function(e){return e.isActive?lm.medium:lm.normal}),(function(e){return e.isActive?_.blue4:_.black0})),Gm=y.default.div(Lm(),qm,_.gray3,_.gray3,(function(e){return e.isActive?lm.medium:lm.normal}),(function(e){return e.isActive?_.blue4:_.black0}));var Wm=function(e){var t=e.item,n=t.path,r=t.icon,o=t.label,i=t.isActive,s=t.value,l=t.hideInClosed,u=void 0!==l&&l,d=t.disabled,h=e.refresh,b=e.title,f=e.state;Object(p.useEffect)((function(){return i&&j.a.isString(b)&&Rm.status(b),function(){}}));var m="string"===typeof r||"number"===typeof r?Object(a.jsx)(Jm,{name:r}):r,v=Object(p.useContext)(S);if((!m||u)&&!v.isOpen)return null;var O=s?Object(a.jsxs)(Vm,{havePadding:!0,isActive:!0,className:"ml-auto text-right",children:[h&&i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(cm,{name:Xf.Rotate,className:"mx-2 refresh",size:20,"data-tip":"Reload","data-for":"jobs-left-meun-tooltip",onClick:function(){j.a.isFunction(h)&&h()}}),Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"left",id:"jobs-left-meun-tooltip"})]}),s]}):null;return d?Object(a.jsx)(Gm,{children:Object(a.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[m,v.isOpen?Object(a.jsxs)(p.Fragment,{children:[Object(a.jsx)(Vm,{havePadding:!!r||0===r,children:o}),O]}):null]})}):Object(a.jsx)(zm,{to:{pathname:n,state:Object(c.a)({applied:Date.now()+n},f)},className:"nav-link",isActive:i,children:Object(a.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[m,v.isOpen?Object(a.jsxs)(p.Fragment,{children:[Object(a.jsx)(Vm,{className:"flex-grow-1",havePadding:!!r||0===r,children:o}),O]}):null]})},n)};function Hm(){var e=Object(f.a)(["\n  margin-left: 26px;\n"]);return Hm=function(){return e},e}function Ym(){var e=Object(f.a)(["\n  ","\n  cursor: pointer;\n"]);return Ym=function(){return e},e}function Qm(){var e=Object(f.a)(["\n  background: ",";\n  border-right: 1px solid ",";\n  width: ","px;\n  position: relative;\n  border-bottom: 1px solid ",";\n  min-height: 100;\n  overflow: hidden auto;\n"]);return Qm=function(){return e},e}var Km=320,Zm=68,Xm=y.default.nav(Qm(),_.gray1,_.gray2,(function(e){var t=e.isOpen,n=e.width;return t?n||Km:Zm}),_.gray2),$m=y.default.div(Ym(),qm),ej=y.default.div(Hm());function tj(e){var t=e.width,n=e.children,r=e.className,o=e.noExpand,i=Object(p.useContext)(S),c=i.isOpen,s=i.toggleSidebar;return Object(a.jsxs)(Xm,{width:t,className:x()("nav d-flex flex-nowrap h-100 flex-column text-left flex-shrink-0 justify-content-between",r),isOpen:c||o,children:[Object(a.jsx)("div",{className:"w-100 h-100 d-flex flex-column",style:{overflow:"hidden auto"},children:n}),!o&&Object(a.jsx)($m,{onClick:s,className:"d-flex flex-row align-items-center",children:c?Object(a.jsxs)(h.a.Fragment,{children:[Object(a.jsx)(cm,{name:Xf.LeftArrowNavigation}),Object(a.jsx)(ej,{children:"Collapse sidebar"})]}):Object(a.jsx)("div",{className:"d-flex flex-row align-items-center",children:Object(a.jsx)(cm,{name:Xf.RightArrowNavigation})})})]})}var nj=h.a.memo(tj),rj=n(37),aj=n(18);function oj(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(t){return function(n){Object(u.a)(o,n);var r=Object(d.a)(o);function o(t){var n;return Object(s.a)(this,o),(n=r.call(this,t)).state={},Object.keys(e).forEach((function(t){if(!(t in n.props)){var r=e[t];n.state[t]={data:r.initialData,initialData:r.initialData,loading:!1,ready:!1,error:null,fetch:n.wrappedFetch(t,r),init:function(e){return n.setData(t,e,!0)},reset:function(){return n.setData(t,r.initialData,!1)}}}})),n}return Object(l.a)(o,[{key:"setData",value:function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.setState((function(r){return Object(k.a)({},e,Object(c.a)(Object(c.a)({},r[e]),{},{data:t,ready:n,loading:!1,error:null}))})),t}},{key:"setLoading",value:function(e,t){this.setState((function(n){return Object(k.a)({},e,Object(c.a)(Object(c.a)({},n[e]),{},{loading:t}))}))}},{key:"setError",value:function(e){var t=this;return function(n){t.setLoading(e,!1),t.setState((function(t){return Object(k.a)({},e,Object(c.a)(Object(c.a)({},t[e]),{},{error:n,ready:!0}))}))}}},{key:"wrappedFetch",value:function(e,t){var n=this;return function(){return n.setLoading(e,!0),t.fetch.apply(t,arguments).then((function(t){return n.setData(e,t)}),n.setError(e))}}},{key:"render",value:function(){return Object(a.jsx)(t,Object(c.a)(Object(c.a)({},this.props),this.state))}}]),o}(p.Component)}}var ij,cj=n(2),sj=n.n(cj),lj=n(4);!function(e){e.access_token="access_token",e.refresh_token="refresh_token"}(ij||(ij={}));var uj,dj=function(e){window.sessionStorage.removeItem(e)},pj=function(e){var t=window.sessionStorage.getItem(e);if(t)try{return JSON.parse(t)}catch(n){return null}return null},hj=function(e,t){window.sessionStorage.setItem(e,JSON.stringify(t))},bj=n(55),fj=n.n(bj),mj=["",null,void 0],jj=n(136),vj=n(192);!function(e){e.Success="success",e.Warning="warning",e.Danger="danger",e.Info="info"}(uj||(uj={}));var Oj=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object(jj.c)(t,Object.assign({position:"top-right",autoClose:5e3,hideProgressBar:!0,draggable:!1,className:Object(vj.css)({background:"".concat(_.bootstrap["".concat(e,"0")]," !important"),color:"".concat(_.bootstrap["".concat(e,"2")]," !important"),borderRadius:"0px !important",minHeight:"40px !important"})},n))},gj="message",xj=[];window.addEventListener("storage",(function(e){if(e.key===gj){var t=JSON.parse(e.newValue);if(t){var n=t.type,r=Object(rj.a)(t,["type"]);xj.forEach((function(e){e.type===n&&e.handler(r)}))}}}));var yj,_j={messageBroadcast:function(e){localStorage.setItem(gj,JSON.stringify(e)),localStorage.removeItem(gj)},addMessageHandler:function(e){xj.push(e)},removeMessageHandler:function(e){var t=xj.findIndex((function(t){return t.type===e}));t>=0&&xj.splice(t,1)}},wj=(n(670),n(567)),Sj=function(){return"Bearer ".concat(pj(ij.access_token))},kj=function(){yj=new wj.a({broadcaster:"pusher",key:"ff23978957767713ca4a",cluster:"ap2",encrypted:!0,authEndpoint:"".concat(Hj,"/v1/broadcasting/auth"),auth:{headers:{Authorization:Sj()}}})},Cj=function(){yj&&(yj.connector.pusher.config.auth.headers.Authorization=Sj())},Nj=function(){return yj},Ej=function(){Dj(),window.location.replace("/login")};function Aj(e,t){var n;hj(ij.access_token,e),hj(ij.refresh_token,t),Uj(),_j.messageBroadcast({type:"token",data:(n={},Object(k.a)(n,ij.access_token,e),Object(k.a)(n,ij.refresh_token,t),n)})}_j.addMessageHandler({type:"token",handler:function(e){var t=e.data,n=t[ij.refresh_token],r=t[ij.access_token];hj(ij.access_token,r),hj(ij.refresh_token,n),Gj.includes(window.location.pathname)?window.location.reload():Uj()}});var Ij=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,window.fetch("".concat(Hj,"/oauth/token"),{method:Bj.POST,mode:"cors",cache:"no-cache",body:t});case 3:if((n=e.sent).ok){e.next=6;break}throw Error(n.statusText);case 6:return e.next=8,n.json();case 8:return Aj((r=e.sent).access_token,r.refresh_token),e.abrupt("return",r);case 13:throw e.prev=13,e.t0=e.catch(0),e.t0;case 16:case"end":return e.stop()}}),e,null,[[0,13]])})));return function(t){return e.apply(this,arguments)}}(),Tj=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(r=new FormData).append("grant_type","password"),r.append("username",t),r.append("password",n),r.append("client_id","2"),r.append("client_secret","Psy44lQldHK23HFLruNBqPUTnOwMQ1FDDV1MBcPI"),e.next=8,Ij(r);case 8:return a=e.sent,kj(),e.abrupt("return",a);case 11:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rj=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("grant_type","social"),n.append("network","office365"),n.append("access_token",t),e.next=6,Ij(n);case 6:return r=e.sent,kj(),e.abrupt("return",r);case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dj=function(){dj(ij.access_token),dj(ij.refresh_token)},Mj=function(e){var t=new FormData;return t.append("grant_type","refresh_token"),t.append("refresh_token",e),Ij(t).then(Cj).catch((function(e){throw Dj(),e}))},Lj=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/me");case 2:return t=e.sent,n=t&&t.data&&t.data.id,e.next=6,ev.get("/v1/users/".concat(n,"/roles"));case 6:return r=e.sent,e.abrupt("return",{data:Object(c.a)(Object(c.a)({},t.data),{},{permissions:new Set(t.data.permissions),role:r&&r.data&&r.data[0].name})});case 8:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();var Pj,Fj={21600:.9,3600:.7,600:.5},Uj=function e(){var t=pj(ij.access_token),n=pj(ij.refresh_token);if(t&&n){var r;try{r=JSON.parse(atob(t.split(".")[1]))}catch(i){return}var a=r.exp-Date.now()/1e3;if(a<=0)return Ej();var o=function(e,t){var n=Object.keys(t).map((function(e){return+e})).reverse(),r=n[0];return n.forEach((function(t){e<=t&&(r=t)})),e*t[r]}(a,Fj);o<=240?Mj(n):(clearTimeout(Pj),Pj=setTimeout(e,1e3*(o-240)))}};Uj(),window.onblur=function(){return clearTimeout(Pj)},window.onfocus=Uj;var Bj,Vj,Jj={reAuthChecking:function(){return Mj(pj(ij.refresh_token))},redirectToLoginPage:Ej,login:Tj,loginWithOffice365:Rj,getCurrentUser:Lj};!function(e){e.GET="GET",e.POST="POST",e.PATCH="PATCH",e.PUT="PUT",e.DELETE="DELETE"}(Bj||(Bj={})),function(e){e.JSON="application/json",e.FORM="multipart/form-data",e.STREAM="application/octet-stream"}(Vj||(Vj={}));var qj,zj,Gj=["/login","/unauthorized"],Wj=function(e,t){return function(){var n;"AbortController"in window&&(n=new AbortController);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];var i=a.slice(0,3);return i[t-1]=Object(c.a)(Object(c.a)({},i[t-1]),{},{signal:n&&n.signal}),{promise:e.apply(null,i),controller:n}}},Hj="https://apiverify.steamaticnis.com.au",Yj=function(e,t,n,r){return Qj(e,Vj.JSON,t,n,r)},Qj=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a,o){var i,s,l,u;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return i=pj(ij.access_token),s={Accept:Vj.JSON,Authorization:"Bearer ".concat(i)},n===Vj.JSON&&(s["Content-Type"]=Vj.JSON),l=n===Vj.JSON?a&&JSON.stringify(a):a,e.next=6,window.fetch("".concat(Hj).concat(r),Object(c.a)(Object(c.a)({},o),{},{method:t,mode:"cors",cache:"no-cache",headers:s,body:l}));case 6:if((u=e.sent).ok){e.next=10;break}return e.next=10,Zj(u);case 10:return e.abrupt("return",u.json());case 11:case"end":return e.stop()}}),e)})));return function(t,n,r,a,o){return e.apply(this,arguments)}}(),Kj=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.t0=t.status,e.next=401===e.t0?3:7;break;case 3:if(!Gj.includes(window.location.pathname)){e.next=5;break}return e.abrupt("return");case 5:return e.abrupt("break",8);case 7:return e.abrupt("return",t.json());case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zj=function(e){return Kj(e).then(Xj)},Xj=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t){e.next=2;break}return e.abrupt("return");case 2:return e.next=4,t;case 4:throw n=e.sent,(r=n.error_message||n.message)&&Oj(uj.Danger,r),n;case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$j=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=pj(ij.access_token),e.prev=1,e.next=4,window.fetch("".concat(Hj).concat(t),{method:Bj.GET,mode:"cors",cache:"no-cache",headers:{Accept:Vj.STREAM,Authorization:"Bearer ".concat(n)}});case 4:if((r=e.sent).ok){e.next=8;break}return e.next=8,Zj(r);case 8:return e.abrupt("return",r.blob());case 11:return e.prev=11,e.t0=e.catch(1),e.abrupt("return",Promise.reject());case 14:case"end":return e.stop()}}),e,null,[[1,11]])})));return function(t){return e.apply(this,arguments)}}(),ev={get:function(e,t,n){return Yj(Bj.GET,"".concat(e).concat(function(e){var t=Object(m.pickBy)(e,(function(e){return!mj.includes(e)}));return bj.stringify(t,{addQueryPrefix:!0})}(t)),null,n)},post:function(e,t,n){return Yj(Bj.POST,e,t,n)},patch:function(e,t){return Yj(Bj.PATCH,e,t)},remove:function(e,t,n){return Yj(Bj.DELETE,e,t,n)},put:function(e,t){return Yj(Bj.PUT,e,t)},postFormData:function(e,t){return function(e,t){return Qj(Bj.POST,Vj.FORM,e,t)}(e,t)},downloadFile:function(e,t){return $j("".concat(e,t?"?print=detail&XDEBUG_SESSION_START=phpstorm-xdebug&debug_mode=true":"?XDEBUG_SESSION_START=phpstorm-xdebug&debug_mode=true"))},errorHandler:Zj};!function(e){e.New="New",e.OnHold="On-Hold",e.InProgress="In-Progress",e.Closed="Closed",e.Cancelled="Cancelled",e.Created="Created"}(zj||(zj={}));var tv,nv=(qj={},Object(k.a)(qj,zj.New,1),Object(k.a)(qj,zj.InProgress,2),Object(k.a)(qj,zj.OnHold,3),Object(k.a)(qj,zj.Closed,4),Object(k.a)(qj,zj.Cancelled,5),qj);!function(e){e.SITE_CONTACT="Site Contact",e.CUSTOMER="Customer",e.BROKER="Broker",e.LOS_ADJUSTOR="Loss Adjustor",e.REFERRER="Referrer"}(tv||(tv={}));var rv,av="YYYY-MM-DD",ov="YYYY-MM-DDTHH:mm:ss[Z]",iv="DD MMM YYYY",cv="ddd D MMM YYYY",sv="hh:mm A",lv="".concat(iv,", ").concat(sv),uv=function(e,t){return e?pm()(e):null},dv=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return e?function(e){return e.format(t)}(n?pm()(e).utc():pm()(e)):null},pv=function(e){return uv(e)},hv=function(e){return uv(e)},bv=function(e,t){return dv(e,t||av)},fv=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return dv(e,ov,t)};!function(e){e.user="user",e.team="team"}(rv||(rv={}));var mv=n(555),jv=n(554);function vv(){var e=Object(f.a)(["\n  margin: 15px 0px;\n  border-color: ",";\n"]);return vv=function(){return e},e}var Ov=y.default.hr(vv(),_.gray2),gv=function(e){return function(t){return function(n){var r=n.children,a=Object(rj.a)(n,["children"]);return p.createElement(t,Object(m.omit)(a,e),r)}}};function xv(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  opacity: 0.7;\n"]);return xv=function(){return e},e}function yv(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  z-index: ",";\n\n  svg {\n    position: absolute;\n    z-index: 1;\n  }\n\n  path {\n    fill: "," !important\n    stroke: transparent !important;\n  }\n"]);return yv=function(){return e},e}var _v,wv,Sv,kv=Object(y.default)(gv(["zIndex"])("div"))(yv(),(function(e){return e.zIndex||100}),_.blue2),Cv=y.default.div(xv(),(function(e){return e.color})),Nv=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.color,r=e.onClick,o=e.zIndex;return Object(a.jsxs)(kv,{className:"cover-loading",onClick:r,zIndex:o,children:[Object(a.jsx)(Cv,{color:n||_.transparent}),Object(a.jsx)(cm,{name:Xf.Loading,size:t})]})}}]),n}(p.PureComponent),Ev=n(44),Av=n(178),Iv=n(568),Tv=function(e,t){return function(n,r){var a=Rv(n,e,r);return t?t(n,a,r):a}},Rv=function e(t,n,r){var a={};return Object.keys(n).forEach((function(o){Object(m.isArray)(n[o])?n[o].some((function(e){return a[o]=e(null===t||void 0===t?void 0:t[o],t,o,r),!!a[o]})):a[o]=e(null===t||void 0===t?void 0:t[o],n[o],r)})),a},Dv=function(e){if(["",null,void 0,!1].includes(e)||j.a.isArray(e)&&!e.length)return"This field is required"},Mv=function(e){if(e&&!pm.a.isMoment(e))return"Date format is not correct"},Lv=function(e){return isNaN(+e)?"Field must contain only numerical value":e<0?"Field shouldn't contain negative value":void 0},Pv=function(e){if(Dv(e)||["",null,void 0].includes(e.id))return"This field is required"},Fv=function(e){if(e&&!/^[0-9]+$/.test(e))return"Must be a number"},Uv=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=Ev.EditorState.createWithContent(Object(Av.a)(e)).getCurrentContent().getPlainText();return Dv(t)},Bv=function(e){if(e&&+e<=0)return"Must be greater than zero"},Vv=function(e){if(e&&!/^\d*(?:\.\d{1,2})*$/.test(e))return"Value will be two decimal"},Jv=function(e){return!e||/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(e)?void 0:"Invalid e-mail address"},qv=function(e){return e.length>11&&Object(Iv.luhn)(e.replace(/\D/g,""))?void 0:"Credit card number is not valid"},zv=function(e){var t=e.split(" ");return t.length>1&&t[1].length>0?void 0:"Name should include first name and last name"},Gv=Tv({},(function(e,t){var n;return t.contacts=[],null===e||void 0===e||null===(n=e.contacts)||void 0===n||n.forEach((function(e,n){if(e.contact){var r=Dv(e.assignment_type);r&&(t.contacts[n]={assignment_type:r})}})),t})),Wv=n(28),Hv=n(553),Yv=n(27),Qv=n.n(Yv);!function(e){e.Customer="customer",e.Supplier="supplier",e.Insurer="insurer",e.Broker="broker",e.LossAdjustor="loss_adjustor",e.CompanyLocations="company_location"}(_v||(_v={})),function(e){e.person="person",e.company="company"}(wv||(wv={})),function(e){e.street="street",e.mailing="mailing",e.home="home",e.business="business",e.billing="billing",e.shipping="shipping"}(Sv||(Sv={}));var Kv=function(e){var t={type:e.type,id:e.id,address_line_1:e.address_line_1,address_line_2:e.address_line_2,full_address:e.full_address};return e.suburb&&(t.suburb={id:e.suburb.id,name:e.suburb.name,state_id:e.suburb.state.id,postcode:e.suburb.postcode},t.postcode=e.suburb.postcode,t.state={id:e.suburb.state.id,name:e.suburb.state.name,code:e.suburb.state.code,country_id:e.suburb.state.country.id},t.country=e.suburb.state.country),t},Zv=function(e){return{address_line_1:e.address_line_1,suburb_id:e.suburb&&e.suburb.id}},Xv=function(e){var t=e.data.addresses.reduce((function(e,t){return e[t.type]=t,e}),{}),n=Object(c.a)(Object(c.a)({},e.data),{},{address:t[Sv.street]?Kv(t[Sv.street]):null,mailing_address:t[Sv.mailing]?Kv(t[Sv.mailing]):null});return delete n.addresses,{data:n}},$v=function(e){var t=Object(c.a)({},e);return t.fields&&(t.fields={first_name:e.fields.first_name,last_name:e.fields.last_name,job_title:e.fields.job_title,email:e.fields.email,business_phone:e.fields.business_phone,mobile_phone:e.fields.mobile_phone,direct_phone:e.fields.direct_phone,legal_name:e.fields.legal_name,trading_name:e.fields.trading_name,abn:e.fields.abn,website:e.fields.website,default_payment_terms_days:e.fields.default_payment_terms_days}),t},eO=function(e){var t;return e?Object(c.a)(Object(c.a)({},e),{},{payment_term_id:null===e||void 0===e||null===(t=e.payment_term)||void 0===t?void 0:t.id}):null},tO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/".concat(t));case 2:return n=e.sent,e.abrupt("return",Xv(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rO=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/locations/".concat(t,"/company-locations"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),aO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),oO=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/search",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/".concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cO=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/contacts/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sO=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/contacts/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),lO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/categories",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),uO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/categories/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),dO=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/contacts/person",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),pO=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/statuses",null);case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),hO={findById:tO,update:function(e,t){return ev.patch("/v1/contacts/".concat(e),t).catch((function(e){return Promise.reject($v(e))}))},getContacts:nO,searchContacts:oO,searchContactWC:Wj(oO,2),createCompany:function(e){return ev.post("/v1/contacts/company",e).catch((function(e){return Promise.reject($v(e))}))},createPerson:dO,getCategories:lO,findCategoryById:uO,getCategoryIcon:function(e){return{customer:Xf.People,supplier:Xf.Truck,insurer:Xf.Insurance,broker:Xf.Broker,loss_adjustor:Xf.ManShield,company_location:Xf.LocationUser}[e]||Xf.People},addContactAddress:function(e,t,n){return ev.post("/v1/contacts/".concat(e,"/addresses/").concat(t.id),{type:n})},linkPersonToCompany:function(e,t){return ev.post("/v1/contacts/".concat(t.id,"/").concat(e),null)},unlinkPersonFromCompany:function(e,t){return ev.remove("/v1/contacts/".concat(t.id,"/").concat(e),null)},getTags:iO,assignTag:cO,removeTag:sO,getContactStatuses:pO,deleteContact:function(e){return ev.remove("/v1/contacts/".concat(e),null)},getContactName:function(e){if(!e)return"";var t=e,n=e;return e.contact_type===wv.person?"".concat(null===t||void 0===t?void 0:t.first_name," ").concat(null===t||void 0===t?void 0:t.last_name):null===n||void 0===n?void 0:n.legal_name},getContactPhone:function(e){var t=e,n=e;return e.contact_type===wv.person?t.mobile_phone||t.direct_phone||t.business_phone:n.business_phone},createManagedAccount:function(e,t){return ev.post("/v1/contacts/".concat(e,"/users/").concat(t),null)},deleteManagedAccount:function(e,t){return ev.remove("/v1/contacts/".concat(e,"/users/").concat(t),null)},changeContactStatus:function(e,t){return ev.patch("/v1/contacts/".concat(e,"/status"),{status:t})},getContactById:aO,getCompanyLocationsByLocationId:rO},bO=n(569);function fO(e){return e.isFocused?_.white:e.isDisabled?_.gray0:_.gray1}var mO={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",padding:0})},menuList:function(e){return Object(c.a)(Object(c.a)({},e),{},{zIndex:3})},menuPortal:function(e){return Object(c.a)(Object(c.a)({},e),{},{zIndex:9999})},control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{border:"none",minHeight:"auto",maxHeight:33.5,background:fO(t),boxShadow:t.isFocused?"0 0 0 0.2rem ".concat(_.bootstrap.boxShadow):"none"})},indicatorSeparator:function(e){return Object(c.a)(Object(c.a)({},e),{},{visibility:"hidden"})},valueContainer:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none"})},input:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none"})},indicatorsContainer:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none"})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:6})},clearIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:6})},loadingIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{padding:6})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:_.gray5})},placeholder:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:_.gray4,fontWeight:lm.light})}};function jO(){var e=Object(f.a)(["\n  color: ",";\n"]);return jO=function(){return e},e}function vO(){var e=Object(f.a)(["\n  .fcc__value-container .trim{display: none;};\n"]);return vO=function(){return e},e}var OO=y.default.div(vO()),gO=y.default.label(jO(),_.gray4),xO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleBlur=function(){e.props.input.onBlur(e.props.input.value)},e.getStyles=function(){return Object(c.a)(Object(c.a)({},mO),e.props.selectStyles)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.returnValue&&this.props.returnValue(this.props.input.value||{})}},{key:"render",value:function(){var e=this.props,t=e.meta,n=e.input,r=e.className,o=e.labelClassName,i=e.valueClassName,s=Object(rj.a)(e,["meta","input","className","labelClassName","valueClassName"]),l=t.touched&&t.error;return Object(a.jsxs)("div",{className:x()("form-group",r),children:[this.props.label&&Object(a.jsx)(gO,{className:o,children:this.props.label}),Object(a.jsxs)(OO,{className:i,children:[Object(a.jsx)(bO.a,Object(c.a)(Object(c.a)({},n),{},{onBlur:this.handleBlur,styles:this.getStyles(),className:x()("form-control",{"is-invalid":l}),classNamePrefix:"fcc",placeholder:this.props.placeholder,options:this.props.options,isDisabled:this.props.disabled,isSearchable:this.props.isSearchable,menuPortalTarget:document.body},s)),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})]})}}]),n}(p.PureComponent),yO=n(127);function _O(){var e=Object(f.a)(["\n  color: ",";\n"]);return _O=function(){return e},e}function wO(){var e=Object(f.a)(["\n  .fcc__value-container .trim{display: none;};\n"]);return wO=function(){return e},e}var SO=y.default.div(wO()),kO=y.default.label(_O(),_.gray4),CO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleBlur=function(){e.props.input.onBlur(e.props.input.value)},e.getStyles=function(){return Object(c.a)(Object(c.a)({},mO),e.props.selectStyles)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(c.a)(Object(c.a)({},n.defaultOptions),this.props),t=e.meta,r=e.className,o=e.labelClassName,i=e.valueClassName,s=Object(rj.a)(e,["meta","className","labelClassName","valueClassName"]),l=t.touched&&t.error;return Object(a.jsxs)("div",{className:x()("form-group",r),children:[this.props.label&&Object(a.jsx)(kO,{className:o,children:this.props.label}),Object(a.jsxs)(SO,{className:i,children:[Object(a.jsx)(yO.a,Object(c.a)(Object(c.a)({},this.props.input),{},{onBlur:this.handleBlur,styles:this.getStyles(),className:x()("form-control",{"is-invalid":l}),classNamePrefix:"fcc",placeholder:this.props.placeholder,loadOptions:this.props.loadOptions,isDisabled:this.props.disabled},s)),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})]})}}]),n}(p.PureComponent);CO.defaultOptions={getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},noOptionsMessage:function(e){return e.inputValue?"No options...":"Start typing..."}};var NO=CO;function EO(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return EO=function(){return e},e}function AO(){var e=Object(f.a)(["\n  color: ",";\n  margin-left: 40px;\n"]);return AO=function(){return e},e}function IO(){var e=Object(f.a)(["\n  font-weight: ",";\n  color: ",";\n"]);return IO=function(){return e},e}var TO=y.default.div(IO(),(function(e){return e.disabled?"inherit":lm.bold}),(function(e){return e.disabled?_.gray4:"inherit"})),RO=y.default.div(AO(),_.gray5),DO=y.default.div(EO()),MO=function(e){var t,n,r,o,i,c=e.contact,s=e.disabled;c.addresses?n=(t=c.addresses.filter((function(e){return e.type===Sv.street}))[0])&&(null===(o=t.suburb)||void 0===o?void 0:o.state.code):n=(t=c.address)&&(null===(i=t.state)||void 0===i?void 0:i.code);return c.legal_name?r=c.legal_name:(c.first_name||c.first_name)&&(r="".concat(c.first_name," ").concat(c.last_name)),Object(a.jsxs)(DO,{children:[Object(a.jsx)(TO,{disabled:s,children:r}),t&&Object(a.jsxs)(RO,{children:[t.address_line_1,t.suburb&&", ".concat(t.suburb.name," ").concat(n||"")]})]})};function LO(){var e=Object(f.a)(["\n  border: 0 !important;\n  border-radius: 100%;\n  height: ","px;\n  width: ","px;\n  display: block;\n  box-shadow: 0 0 0 1.5px "," inset;\n  position: relative;\n  margin: 0;\n\n  ","\n\n  & > input {\n    opacity: 0;\n  }\n\n  ","\n"]);return LO=function(){return e},e}var PO=y.default.label(LO(),(function(e){return e.size}),(function(e){return e.size}),(function(e){return e.checked&&!e.disabled?_.blue2:e.checked?_.gray2:_.gray1}),(function(e){return e.checked&&"\n    &:before {\n      content: '';\n      display: block;\n      position: absolute;\n      width: 50%;\n      height: 50%;\n      top: 25%;\n      left: 25%;\n      border-radius: 100%;\n      background: ".concat(e.disabled?e.checked?_.gray4:_.gray1:_.blue2,";\n    }")}),(function(e){return e.disabled&&"\n    & > input {\n      display: none;\n    }"})),FO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.size,n=e.value,r=e.onChange,o=e.name,i=e.disabled,c=e.checked,s=e.children;return Object(a.jsxs)(PO,{size:t,checked:c,disabled:i,children:[Object(a.jsx)("input",{type:"radio",name:o,value:n,checked:c,className:"form-control",disabled:i,onChange:r}),s]})}}]),n}(p.PureComponent),UO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.meta,n=e.size,r=void 0===n?16:n,o=e.className,i=t.touched&&t.error,s=this.props.checked||this.props.input.value===this.props.optionValue;return Object(a.jsxs)("div",{className:"form-group ".concat(o),children:[Object(a.jsx)(FO,Object(c.a)(Object(c.a)({size:r},this.props.input),{},{checked:s,value:this.props.optionValue,disabled:this.props.disabled})),i&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})}}]),n}(p.PureComponent),BO=n(570),VO=n.n(BO),JO={overlay:{backgroundColor:"rgba(0,0,0,0.85)",zIndex:1999},content:{width:"100%",height:"100%",background:"transparent",borderRadius:"3px",border:0,overflow:"auto",top:0,bottom:"inherit",left:0,right:"inherit",padding:0}},qO=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.shouldCloseOnOverlayClick,r=void 0!==n&&n;return Object(a.jsx)(VO.a,{isOpen:t,appElement:document.getElementById("root"),ariaHideApp:!1,style:JO,shouldCloseOnOverlayClick:r,children:this.props.children})}}]),n}(p.PureComponent),zO=20,GO=200,WO=70;function HO(){var e=Object(f.a)(["\n  border: 1px solid ",";\n"]);return HO=function(){return e},e}function YO(){var e=Object(f.a)(["\n  padding: 20px ","px;\n  border-top: 1px solid ",";\n  display: flex;\n  justify-content: flex-end;\n  align-items: center;\n\n  & > * {\n    margin-left: 10px;\n  }\n"]);return YO=function(){return e},e}function QO(){var e=Object(f.a)(["\n  padding: 30px ","px;\n  // min-height: ","px;\n  border-top: 1px solid ",";\n  position: relative;\n  ","\n"]);return QO=function(){return e},e}function KO(){var e=Object(f.a)(["\n  padding: 20px ","px;\n  font-size: ",";\n  font-weight: ",";\n"]);return KO=function(){return e},e}function ZO(){var e=Object(f.a)(["\n  max-width: 98%;\n  min-width: 500px;\n  width: ",";\n  background: white;\n  margin: auto auto;\n  position: relative;\n  z-index: 1;\n  border-radius: 3px;\n\n  > .cover-loading {\n    border-radius: 3px;\n  }\n"]);return ZO=function(){return e},e}function XO(){var e=Object(f.a)(["\n  position: absolute;\n  top: -","px;\n  height: calc(100% + ","px);\n  width: 100%;\n"]);return XO=function(){return e},e}function $O(){var e=Object(f.a)(["\n  position: relative;\n  width: 100%;\n  min-height: calc(100% - ","px);\n  display: flex;\n  margin: ","px 0px;\n"]);return $O=function(){return e},e}var eg=y.default.div($O(),2*WO,WO),tg=y.default.div(XO(),WO,2*WO),ng=y.default.div(ZO(),(function(e){return e.width||"700px"})),rg=y.default.div(KO(),zO,sm.medium,lm.bold),ag=y.default.div(QO(),zO,GO,_.gray2,(function(e){return e.scrollY?"max-height: calc(100vh - 250px);overflow-y: auto;":""})),og=y.default.div(YO(),zO,_.gray2),ig=y.default.button(HO(),_.gray2),cg=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.body,r=e.footer,o=e.onClose,i=e.loading,c=e.customModal,s=e.closeCaption,l=e.scrollY,u=e.style,d=e.bodyClass,p=e.shouldCloseOnOverlayClick,h=void 0!==p&&p,b=e.width;return Object(a.jsxs)(eg,{children:[Object(a.jsx)(tg,{onClick:h?o:void 0}),!c&&Object(a.jsxs)(ng,{width:b,children:[i&&Object(a.jsx)(Nv,{size:40,color:_.white,zIndex:10}),Object(a.jsx)(rg,{children:t}),n&&Object(a.jsx)(ag,{className:d,scrollY:l,style:u,children:n}),Object(a.jsxs)(og,{children:[r,Object(a.jsx)(ig,{className:"btn btn-outline-secondary",onClick:o,children:s||"Cancel"})]})]}),this.props.children]})}}]),n}(p.PureComponent),sg=n(13),lg=n(478),ug=n(557),dg=n(571),pg=n.n(dg);function hg(){var e=Object(f.a)(["\n  color: ",";\n"]);return hg=function(){return e},e}function bg(){var e=Object(f.a)(["\n  position: relative;\n  &::after {\n    content: ",";\n    position: absolute;\n    top: 50%;\n    transform: translateY(-50%);\n    left: 8px;\n  }\n"]);return bg=function(){return e},e}function fg(){var e=Object(f.a)(["\n  ","\n  padding-left: ","\n"]);return fg=function(){return e},e}function mg(){var e=Object(f.a)(["\n  background: ",";\n  position: relative;\n  border-radius: .25rem;\n  border: none;\n\n  &:disabled {\n    background: ",";\n  }\n\n  &::placeholder {\n    font-weight: lighter;\n    color: ",";\n  }\n"]);return mg=function(){return e},e}var jg,vg=Object(y.css)(mg(),_.gray1,_.gray0,_.gray4),Og=y.default.input(fg(),vg,(function(e){return e.isCurrencyOffset?"1.3em":null})),gg=y.default.div(bg(),(function(e){return e.currency&&"'$'"})),xg=y.default.label(hg(),_.gray4),yg=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){var n,r=!0;if(t.target.value&&e.props.currency){var a=t.target.value.match(/(\d+)(\.?)(\d*)/);a&&(a[1].length>7||a[3].length>2)&&(r=!1)}r&&(null===(n=e.props.input)||void 0===n||n.onChange(t))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.defaultValue,n=e.input;void 0!==t&&(null===n||void 0===n||n.onChange(t))}},{key:"render",value:function(){var e=this.props,t=e.meta,n=e.min,r=e.currency,o=e.input,i=e.itemProp,s=e.type,l=e.placeholder,u=e.disabled,d=e.mask,p=e.labelClassName,h=e.label,b=e.valueClassName,f=e.step,m=e.className,j=t.touched&&t.error,v=r&&o.value,O=x()("form-control",{"is-invalid":j}),g=Object(c.a)(Object(c.a)(Object(c.a)({},o),i),{},{min:n,className:O,type:s,placeholder:l,disabled:u,step:f});return Object(a.jsxs)("div",{className:x()("form-group",m),children:[h&&Object(a.jsx)(xg,{className:p,children:h}),Object(a.jsxs)("div",{className:b,children:[d?Object(a.jsx)(pg.a,Object(c.a)(Object(c.a)({mask:d},g),{},{onChange:this.onChange,children:function(e){return Object(a.jsx)(Og,Object(c.a)(Object(c.a)({},e),{},{disabled:u}))}})):Object(a.jsx)(gg,{currency:v,children:Object(a.jsx)(Og,Object(c.a)(Object(c.a)({},g),{},{isCurrencyOffset:v,onChange:this.onChange}))}),j&&Object(a.jsx)("div",{className:"invalid-feedback",style:{display:j?"block":"none"},children:t.error})]})]})}}]),n}(p.PureComponent);!function(e){e[e.Standard=20]="Standard",e[e.Middle=25]="Middle",e[e.Big=50]="Big",e[e.Huge=999]="Huge"}(jg||(jg={}));var _g=jg,wg=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,ev.get("/v1/countries",Object(c.a)(Object(c.a)({},t),{},{per_page:_g.Huge}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Sg=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,ev.get("/v1/states",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),kg=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,ev.get("/v1/suburbs",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Cg=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n,r,a,o=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=o.length>0&&void 0!==o[0]?o[0]:"a",n=o.length>1&&void 0!==o[1]?o[1]:"",r=o.length>2&&void 0!==o[2]?o[2]:"",a=o.length>3&&void 0!==o[3]?o[3]:10,e.next=6,ev.get("/v1/suburbs/search?term=".concat(t,"&").concat(n?"country_id=".concat(n,"&"):"").concat(r?"state_id=".concat(r,"&"):"","count=").concat(a));case 6:return e.abrupt("return",e.sent);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ng=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:"a",e.next=3,ev.get("/v1/countries/search?term=".concat(t));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Eg=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:"a",n=r.length>1&&void 0!==r[1]?r[1]:"",e.next=4,ev.get("/v1/states/search?term=".concat(t)+(""!==n?"&country_id="+n:""));case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Ag=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/locations",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ig=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/addresses",Zv(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tg=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/addresses/".concat(t),Zv(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rg={getLocationsWithController:Wj(Ag,2),searchCountries:wg,searchStates:Sg,searchByCountry:Ng,searchByStates:Eg,getSuburbs:kg,searchSuburbs:Cg,searchLocations:Ag,create:Ig,update:Tg,expandAddress:function(e){return Kv(e.data)}};function Dg(){var e=Object(f.a)(["\n  max-width: 100%;\n  white-space: normal;\n  word-break: break-word;\n  display: block;\n"]);return Dg=function(){return e},e}function Mg(){var e=Object(f.a)([""]);return Mg=function(){return e},e}var Lg=y.default.span(Mg()),Pg=y.default.div(Dg()),Fg=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onChangeField=function(){e.props.onChange&&e.props.onChange()},e.updateSuburbDependencies=function(t){var n=e.props,r=n.name,a=n.change;if(a("".concat(r,".suburb"),t),t&&t.hasOwnProperty("id")){var o=t,i=e.props.states.data.data.find((function(e){return e.id===o.state_id}));if(i){a("".concat(r,".state"),i);var c=e.props.countries.data.data.find((function(e){return e.id===i.country_id}));a("".concat(r,".country"),c)}a("".concat(r,".postcode"),o.postcode),e.onChangeField()}},e.loadSuburbs=function(t){return Rg.searchSuburbs(t||"","","",20).then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name||e.name===t.name&&+e.postcode>+t.postcode?1:-1})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.debouncedLoadSuburbs=Qv()(e.loadSuburbs,1e3),e.addShowPostcodeFlag=function(e){return e.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{showPostcode:!1,label:e.name,value:e.id})}))},e.getSuburbOptionLabel=function(t){if(!t.id)return"";var n=t,r=e.props.states.data&&e.props.states.data.data.find((function(e){return e.id===n.state_id}));return Object(a.jsx)(DO,{children:Object(a.jsxs)(Pg,{children:[t.name," ",Object(a.jsxs)(Lg,{className:"trim",children:[r&&r.code," ",t.postcode]})]})})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(Hv.a,{name:"address_line_1",label:"Address",placeholder:"Address",onChange:this.onChangeField,component:yg})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"suburb",label:"Suburb",placeholder:"Suburb",loadOptions:this.debouncedLoadSuburbs,getOptionValue:function(e){return e.id&&e.id.toString()},getOptionLabel:this.getSuburbOptionLabel,component:NO,onChange:this.updateSuburbDependencies})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"state",label:"State",placeholder:"State",options:this.statesOptions,getOptionValue:function(e){return null!==e.id?e.id.toString():null},getOptionLabel:function(e){return e.name},component:xO,disabled:!0})}),Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)(Hv.a,{name:"postcode",label:"Postcode",placeholder:"Postcode",component:yg,disabled:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"country",label:"Country",placeholder:"Country",options:this.countriesOptions,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},component:xO,disabled:!0})})]})]})}},{key:"statesOptions",get:function(){return[{id:null,name:"All States"}].concat(Object(aj.a)(this.props.states.data&&this.props.states.data.data||[]))}},{key:"countriesOptions",get:function(){return this.props.countries.data&&this.props.countries.data.data||[]}}]),n}(p.PureComponent),Ug=Object(b.b)((function(e){return{states:e.allStates,countries:e.allCountries}}))(Fg);function Bg(){var e=Object(f.a)(["\n  position: relative;\n  margin-bottom: ",";\n"]);return Bg=function(){return e},e}var Vg=Object(y.default)(gv(["isNew"])("div"))(Bg(),(function(e){return e.isNew?0:"45px"}));function Jg(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  margin-bottom: 30px;\n"]);return Jg=function(){return e},e}var qg=y.default.legend(Jg(),sm.normal,lm.bold),zg={address_line_1:[Dv],suburb:[Pv]},Gg=Tv({first_name:[Dv],last_name:[Dv],address:zg},(function(e,t){e.mailing_address&&(e.mailing_address.suburb||e.mailing_address.address_line_1)&&(t.mailing_address=Tv(zg)(e.mailing_address));var n=e.business_phone||e.direct_phone||e.mobile_phone;return t.direct_phone=function(e,t){return function(n){return e(n)?t:void 0}}(Dv,"One phone number is required")(n),t})),Wg=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={term:"".concat(t.first_name," ").concat(t.last_name),contact_type:wv.person},e.next=3,hO.searchContacts(a);case 3:if(o=e.sent,i={},!o.data.find((function(e){var n=e;return n.first_name===t.first_name&&n.last_name===t.last_name&&n.id!==r.person.id}))){e.next=9;break}return i.first_name="Contact with same name already exists",e.abrupt("return",Promise.reject(i));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function Hg(){var e=Object(f.a)(["\n  margin-left: 30px;\n  display: inline-block;\n  cursor: pointer;\n  color: ","!important;\n  font-weight: ",";\n"]);return Hg=function(){return e},e}var Yg=y.default.a(Hg(),_.blue4,lm.normal);function Qg(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  font-weight: lighter;\n  border-color: ",";\n  box-shadow: 0 0 0 !important;\n\n  &:hover,\n  &:active {\n    background: "," !important;\n    border-color: "," !important;\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    background: ",";\n    color: ",";\n    border-color: ",";\n  }\n"]);return Qg=function(){return e},e}var Kg,Zg,Xg=y.default.button(Qg(),_.blue2,_.white,_.blue2,_.blue3,_.blue3,_.blue2,_.white,_.blue2),$g="99 9999 9999",ex="9999",tx="CustomerForm",nx=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadCompanies=function(t){var n={term:t,contact_type:wv.company};return hO.getContacts(n).then((function(t){return t.data.sort((function(t){return t.contact_category_id===e.props.contactCategory?-1:1}))}))},e.debouncedLoadCompanies=Qv()(e.loadCompanies,1e3),e.copyAddress=function(){var t,n=Object(m.pick)(e.props.address,["address_line_1","address_line_2","postcode","suburb","state","country"]);e.props.change("mailing_address",Object(c.a)(Object(c.a)({},n),{},{type:Sv.mailing,id:null===(t=e.props.person.mailing_address)||void 0===t?void 0:t.id})),e.scheduleUpdate()},e.copyAddressFromCompany=function(){var t,n=e.props,r=n.person,a=n.parentCompany,o=n.change,i=(a||r.parent_company).addresses.find((function(e){return e.type===Sv.street})),s=i&&i.suburb;o("address",Object(c.a)(Object(c.a)({},i),{},{type:Sv.street,id:null===(t=r.address)||void 0===t?void 0:t.id,state:s&&s.state,postcode:s&&s.postcode,country:s&&s.state&&s.state.country})),e.scheduleUpdate()},e.handleSubmitForm=function(){var t=e.props,n=t.handleSubmit,r=t.onSubmit;return e.props.submitting?(e.scheduleUpdate(),Promise.resolve()):n(r)()},e.scheduleUpdate=Object(m.debounce)((function(){e.isNewPerson||e.handleSubmitForm()}),1e3),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.parentCompany;return Object(a.jsx)(Vg,{isNew:this.isNewPerson,children:Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:t,children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"first_name",label:"Firstname",placeholder:"Firstname",component:yg,onChange:this.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"last_name",label:"Surname",placeholder:"Surname",component:yg,onChange:this.scheduleUpdate})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"parent_company",label:"Company",placeholder:"Start typing to search...",component:NO,loadOptions:this.debouncedLoadCompanies,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.legal_name},onChange:this.scheduleUpdate,isClearable:!0})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"job_title",label:"Job Title",placeholder:"Job Title",component:yg,onChange:this.scheduleUpdate})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"payment_term",label:"Default Payment Terms",placeholder:"Select Payment Terms",component:xO,options:this.props.paymentTerms,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.description},onChange:this.scheduleUpdate})})}),Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"email",label:"Email",placeholder:"Email",component:yg,onChange:this.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"mobile_phone",label:"Mobile",placeholder:"Mobile",component:yg,mask:"9999 999 999",onChange:this.scheduleUpdate})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"direct_phone",label:"Direct Phone",placeholder:"Direct Phone",component:yg,mask:$g,onChange:this.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"business_phone",label:"Business Phone",placeholder:"Business Phone",component:yg,mask:$g,onChange:this.scheduleUpdate})})]}),Object(a.jsx)(Ov,{}),Object(a.jsxs)(lg.a,{name:"address",children:[Object(a.jsxs)(qg,{children:["Street Address ",Object(a.jsx)("sup",{children:"*"}),!t&&n&&Object(a.jsx)(Yg,{onClick:this.copyAddressFromCompany,children:"Copy from company"})]}),Object(a.jsx)(Ug,{name:"address",change:this.props.change,onChange:this.scheduleUpdate})]}),Object(a.jsx)(Ov,{}),Object(a.jsxs)(lg.a,{name:"mailing_address",children:[Object(a.jsxs)(qg,{children:["Mailing Address",!t&&Object(a.jsx)(Yg,{onClick:this.copyAddress,children:"Copy from above"})]}),Object(a.jsx)(Ug,{name:"mailing_address",change:this.props.change,onChange:this.scheduleUpdate})]})]}),this.isNewPerson&&!1!==this.props.footer&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ov,{}),Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",disabled:this.props.submitting,children:"Save"}),Object(a.jsx)(Ov,{})]})]})})}},{key:"isNewPerson",get:function(){var e=this.props.person;return null===e.id||void 0===e.id}}]),n}(p.PureComponent),rx=Object(sg.compose)(Object(jv.a)({form:tx,validate:Gg,asyncValidate:Wg,asyncBlurFields:["first_name","last_name"],shouldAsyncValidate:function(e){return!e.initialized},enableReinitialize:!1}),Object(ug.a)({address:"address",parentCompany:"parent_company"}))(nx),ax=n(240),ox=422,ix=function(e){return e.status_code===ox?Promise.reject(new ax.a(e.fields)):Promise.reject(e)},cx=function(e){return e.status_code===ox?Promise.resolve(e):Promise.reject(e)},sx=function(e){return ix({status_code:ox,error_message:"Invalid request",error_code:"invalid_request",fields:e})};!function(e){e.LEAD="lead",e.ACTIVE="active",e.QUAlIFIED="qualified",e.INACTIVE="inactive"}(Zg||(Zg={}));var lx,ux=(Kg={},Object(k.a)(Kg,Zg.LEAD,"Lead"),Object(k.a)(Kg,Zg.ACTIVE,"Active"),Object(k.a)(Kg,Zg.QUAlIFIED,"Qualified"),Object(k.a)(Kg,Zg.INACTIVE,"In-Active"),Kg);!function(e){e.USERS_VIEW="users.view",e.USERS_CREATE="users.create",e.USERS_UPDATE="users.update",e.USERS_DELETE="users.delete",e.ROLES_VIEW="roles.view",e.ROLES_UPDATE="roles.update",e.ROLES_CREATE="roles.create",e.ROLES_DELETE="roles.delete",e.PERMISSIONS_VIEW="permissions.view",e.TAGS_VIEW="tags.view",e.TAGS_UPDATE="tags.update",e.TAGS_CREATE="tags.create",e.TAGS_DELETE="tags.delete",e.NOTES_VIEW="notes.view",e.NOTES_CREATE="notes.create",e.NOTES_UPDATE="notes.update",e.NOTES_DELETE="notes.delete",e.MESSAGES_VIEW="messages.view",e.MESSAGES_MANAGE="messages.manage",e.DOCUMENTS_CREATE="documents.create",e.DOCUMENTS_VIEW="documents.view",e.DOCUMENTS_DOWNLOAD="documents.download",e.DOCUMENTS_DELETE="documents.delete",e.COUNTRIES_VIEW="countries.view",e.COUNTRIES_CREATE="countries.create",e.COUNTRIES_DELETE="countries.delete",e.STATES_VIEW="states.view",e.STATES_UPDATE="states.update",e.STATES_CREATE="states.create",e.STATES_DELETE="states.delete",e.SUBURBS_VIEW="suburbs.view",e.SUBURBS_UPDATE="suburbs.update",e.SUBURBS_CREATE="suburbs.create",e.SUBURBS_DELETE="suburbs.delete",e.ADDRESSES_VIEW="addresses.view",e.ADDRESSES_UPDATE="addresses.update",e.ADDRESSES_CREATE="addresses.create",e.ADDRESSES_DELETE="addresses.delete",e.CONTACTS_VIEW="contacts.view",e.CONTACTS_ARCHIVED="contacts.archived",e.CONTACTS_ACTIVE_LAST_DAYS="contacts.active.last_days",e.CONTACTS_UPDATE="contacts.update",e.CONTACTS_CREATE="contacts.create",e.CONTACTS_DELETE="contacts.delete",e.MEETINGS_CREATE="meetings.create",e.MEETINGS_VIEW="meetings.view",e.MEETINGS_DELETE="meetings.delete",e.TEAMS_CREATE="teams.create",e.TEAMS_UPDATE="teams.update",e.TEAMS_VIEW="teams.view",e.TEAMS_DELETE="teams.delete",e.TEAMS_MODIFY_MEMBERS="teams.modify_members",e.LOCATIONS_VIEW="locations.view",e.LOCATIONS_CREATE="locations.create",e.LOCATIONS_UPDATE="locations.update",e.LOCATIONS_MODIFY_MEMBERS="locations.modify_members",e.LOCATIONS_MODIFY_SUBURBS="locations.modify_suburbs",e.JOBS_VIEW="jobs.view",e.JOBS_MANAGE_INBOX="jobs.manage_inbox",e.JOBS_INBOX_VIEW="jobs.inbox.view",e.JOBS_MANAGE_TAGS="jobs.manage_tags",e.JOBS_ASSIGN_STAFF="jobs.assign_staff",e.JOBS_CREATE="jobs.create",e.JOBS_UPDATE="jobs.update",e.JOBS_DELETE="jobs.delete",e.JOBS_MANAGE_CONTACTS="jobs.manage_contacts",e.JOBS_MANAGE_NOTES="jobs.manage_notes",e.JOBS_MANAGE_MESSAGES="jobs.manage_messages",e.JOBS_MANAGE_MESSAGES_DETACH="jobs.manage_messages_detach",e.JOBS_MANAGE_JOBS="jobs.manage_jobs",e.JOBS_TASKS_VIEW="jobs.tasks.view",e.JOBS_TASKS_MANAGE="jobs.tasks.manage",e.JOBS_MANAGE_RECURRING="jobs.manage_recurring",e.JOBS_USAGE_MATERIALS_CREATE="jobs.usage.materials.create",e.JOBS_USAGE_MATERIALS_UPDATE="jobs.usage.materials.update",e.JOBS_USAGE_MATERIALS_DELETE="jobs.usage.materials.delete",e.JOBS_USAGE_MATERIALS_MANAGE="jobs.usage.materials.manage",e.JOBS_USAGE_EXPENSE_CREATE="jobs.usage.expense.create",e.JOBS_USAGE_EXPENSE_UPDATE="jobs.usage.expense.update",e.JOBS_USAGE_EXPENSE_DELETE="jobs.usage.expense.delete",e.JOBS_USAGE_EXPENSE_MANAGE="jobs.usage.expense.manage",e.JOBS_USAGE_LABOUR_CREATE="jobs.usage.labour.create",e.JOBS_USAGE_LABOUR_UPDATE="jobs.usage.labour.update",e.JOBS_USAGE_LABOUR_DELETE="jobs.usage.labour.delete",e.JOBS_USAGE_LABOUR_MANAGE="jobs.usage.labour.manage",e.JOBS_USAGE_LABOUR_APPROVE="jobs.usage.labour.approve",e.JOBS_USAGE_VIEW="jobs.usage.view",e.JOBS_USAGE_EQUIPMENT_CREATE="jobs.usage.equipment.create",e.JOBS_USAGE_EQUIPMENT_UPDATE="jobs.usage.equipment.update",e.JOBS_USAGE_EQUIPMENT_DELETE="jobs.usage.equipment.delete",e.JOBS_USAGE_EQUIPMENT_MANAGE="jobs.usage.equipment.manage",e.JOBS_AREAS_MANAGE="jobs.areas.manage",e.MANAGEMENT_SEARCH_INDEX="management.search.index",e.MANAGEMENT_SEARCH_FLUSH="management.search.flush",e.MANAGEMENT_SYSTEM_SETTINGS="management.system.settings",e.MANAGEMENT_JOBS_SETTINGS="management.jobs.settings",e.MANAGEMENT_EQUIPMENT="management.equipment",e.MANAGEMENT_SEED="management.seed",e.PHOTOS_CREATE="photos.create",e.PHOTOS_VIEW="photos.view",e.PHOTOS_UPDATE="photos.update",e.PHOTOS_DELETE="photos.delete",e.FINANCE_ACCOUNTING_ORGANIZATIONS_MANAGE="finance.accounting_organizations.manage",e.FINANCE_GL_ACCOUNTS_MANAGE="finance.gl_accounts.manage",e.FINANCE_GL_ACCOUNTS_VIEW="finance.gl_accounts.view",e.FINANCE_GL_ACCOUNTS_REPORTS_VIEW="finance.gl_accounts.reports.view",e.FINANCE_GS_CODES_MANAGE="finance.gs_codes.manage",e.FINANCE_GS_CODES_VIEW="finance.gs_codes.view",e.FINANCE_PAYMENTS_CREATE="finance.payments.create",e.FINANCE_PAYMENTS_VIEW="finance.payments.view",e.FINANCE_PAYMENTS_RECEIVE="finance.payments.receive",e.FINANCE_PAYMENTS_TRANSFERS_RECEIVE="finance.payments.transfers.receive",e.FINANCE_PAYMENTS_FORWARD="finance.payments.forward",e.FINANCE_CREDIT_NOTES_MANAGE="finance.credit_notes.manage",e.FINANCE_CREDIT_NOTES_VIEW="finance.credit_notes.view",e.FINANCE_CREDIT_NOTES_MANAGE_LOCKED="finance.credit_notes.manage_locked",e.OPERATIONS_STAFF_VIEW="operations.staff.view",e.OPERATIONS_VEHICLES_VIEW="operations.vehicles.view",e.OPERATIONS_VEHICLES_MANAGE="operations.vehicles.manage",e.OPERATIONS_VEHICLES_CHANGE_STATUS="operations.vehicles.change_status",e.OPERATIONS_TASKS_VIEW="operations.tasks.view",e.OPERATIONS_RUNS_VIEW="operations.runs.view",e.OPERATIONS_RUNS_MANAGE="operations.runs.manage",e.OPERATIONS_RUNS_TEMPLATES_VIEW="operations.runs_templates.view",e.OPERATIONS_RUNS_TEMPLATES_MANAGE="operations.runs_templates.manage",e.FINANCE_PURCHASE_ORDERS_VIEW="finance.purchase_orders.view",e.FINANCE_PURCHASE_ORDERS_MANAGE="finance.purchase_orders.manage",e.FINANCE_PURCHASE_ORDERS_MANAGE_LOCKED="finance.purchase_orders.manage_locked",e.FINANCE_INVOICES_VIEW="finance.invoices.view",e.FINANCE_INVOICES_MANAGE="finance.invoices.manage",e.FINANCE_INVOICES_MANAGE_LOCKED="finance.invoices.manage_locked",e.FINANCE_INVOICES_REPORTS_VIEW="finance.invoices.reports.view",e.FINANCE_FINANCIAL_REPORTS_VIEW="finance.financial.reports.view",e.USAGE_AND_ACTUALS_INSURER_CONTRACTS_VIEW="usage_and_actuals.insurer_contracts.view",e.USAGE_AND_ACTUALS_INSURER_CONTRACTS_MANAGE="usage_and_actuals.insurer_contracts.manage",e.MANAGEMENT_MATERIALS_MEASURE_UNITS="management.materials.measure_units",e.MANAGEMENT_MATERIALS="management.materials",e.LABOUR_VIEW="labour.view",e.MANAGEMENT_JOBS_LABOUR="management.jobs.labour",e.ALLOWANCES_VIEW="allowances.view",e.MANAGEMENT_JOBS_ALLOWANCES="management.jobs.allowances",e.LAHA_VIEW="laha.view",e.MANAGEMENT_JOBS_LAHA="management.jobs.laha",e.JOBS_USAGE_LAHA_MANAGE="jobs.usage.laha.manage",e.JOBS_USAGE_LAHA_APPROVE="jobs.usage.laha.approve",e.JOBS_USAGE_ALLOWANCES_MANAGE="jobs.usage.allowances.manage",e.JOBS_USAGE_ALLOWANCES_APPROVE="jobs.usage.allowances.approve",e.JOBS_USAGE_REIMBURSEMENTS_MANAGE="jobs.usage.reimbursements.manage",e.JOBS_USAGE_REIMBURSEMENTS_APPROVE="jobs.usage.reimbursements.approve",e.EQUIPMENT_VIEW="equipment.view",e.EQUIPMENT_NOTES_EDIT="equipment.notes.edit",e.ASSESSMENT_REPORTS_VIEW="assessment_reports.view",e.ASSESSMENT_REPORTS_MANAGE="assessment_reports.manage",e.ASSESSMENT_REPORTS_APPROVE="assessment_reports.approve",e.ASSESSMENT_REPORTS_MANAGE_CANCELLED="assessment_reports.manage_cancelled",e.TO_DO_CREATE="to_do.create",e.TO_DO_VIEW="to_do.view",e.OPERATIONS_STORAGE_MANAGE="operations.storage.manage",e.OPERATIONS_STORAGE_VIEW="operations.storage.view",e.OPERATIONS_INVENTORY_VIEW="operations.inventory.view",e.OPERATIONS_INVENTORY_MANAGE="operations.inventory.manage",e.WORK_CATEGORIES_VIEW="work_categories.view",e.WORK_CATEGORIES_CREATE="work_categories.create",e.WORK_CATEGORIES_UPDATE="work_categories.update",e.WORK_CATEGORIES_DELETE="work_categories.delete",e.JOB_WORK_CATEGORIES_VIEW="job_work_categories.view",e.JOB_WORK_CATEGORIES_CREATE="job_work_categories.create",e.JOB_WORK_CATEGORIES_UPDATE="job_work_categories.update",e.JOB_WORK_CATEGORIES_DELETE="job_work_categories.delete",e.WORK_GROUPS_VIEW="work_groups.view",e.WORK_GROUPS_CREATE="work_groups.create",e.WORK_GROUPS_UPDATE="work_groups.update",e.WORK_GROUPS_DELETE="work_groups.delete",e.WORK_GROUPS_MANAGE="work_groups.manage",e.WORKS_VIEW="works.view",e.WORKS_CREATE="works.create",e.WORKS_UPDATE="works.update",e.WORKS_DELETE="works.delete",e.JOB_WORKS_VIEW="job_works.view",e.JOB_WORKS_CREATE="job_works.create",e.JOB_WORKS_UPDATE="job_works.update",e.JOB_WORKS_DELETE="job_works.delete",e.CONTACT_GROUPS_VIEW="contact_groups.view",e.CONTACT_GROUPS_CREATE="contact_groups.create",e.CONTACT_GROUPS_UPDATE="contact_groups.update",e.CONTACT_GROUPS_DELETE="contact_groups.delete",e.GS_CODE_VIEW="finance.gs_codes.view",e.GS_CODE_MANAGE="finance.gs_codes.manage",e.JOBS_PHOTOS_VIEW="jobs.photos.view",e.JOBS_PHOTOS_CREATE="jobs.photos.create",e.JOBS_PHOTOS_UPDATE="jobs.photos.update",e.JOBS_PHOTOS_DELETE="jobs.photos.delete",e.JOBS_DOCUMENTS_VIEW="jobs.documents.view",e.JOBS_DOCUMENTS_CREATE="jobs.documents.create",e.JOBS_DOCUMENTS_UPDATE="jobs.documents.update",e.JOBS_DOCUMENTS_DELETE="jobs.documents.delete",e.JOBS_MESSAGES_UNREAD="jobs.messages.unread",e.OPERATIONS_INVENTORY_DELETE="operations.inventory.delete",e.OPERATIONS_STORAGE_CREATE="operations.storage.create",e.OPERATIONS_STORAGE_UPDATE="operations.storage.update",e.OPERATIONS_STORAGE_DELETE="operations.storage.delete",e.MANAGEMENT_CONTRACTS="management.contracts",e.JOBS_GENERAL_AUTHORITY_CREATE="jobs.general_authority.create"}(lx||(lx={}));var dx=[lx.USERS_CREATE,lx.USERS_DELETE,lx.USERS_UPDATE,lx.USERS_VIEW],px=[lx.LOCATIONS_VIEW,lx.LOCATIONS_CREATE,lx.LOCATIONS_UPDATE,lx.LOCATIONS_MODIFY_MEMBERS,lx.LOCATIONS_MODIFY_SUBURBS],hx=(lx.SUBURBS_VIEW,lx.SUBURBS_CREATE,lx.SUBURBS_UPDATE,lx.SUBURBS_DELETE,[lx.GS_CODE_VIEW,lx.GS_CODE_MANAGE]),bx=[lx.TAGS_CREATE,lx.TAGS_DELETE,lx.TAGS_VIEW,lx.TAGS_UPDATE],fx=(lx.MANAGEMENT_CONTRACTS,[lx.LABOUR_VIEW,lx.MANAGEMENT_JOBS_LABOUR,lx.EQUIPMENT_VIEW,lx.MANAGEMENT_EQUIPMENT,lx.MANAGEMENT_MATERIALS,lx.JOBS_USAGE_VIEW,lx.MANAGEMENT_MATERIALS_MEASURE_UNITS]),mx=[lx.MANAGEMENT_JOBS_LABOUR,lx.MANAGEMENT_EQUIPMENT,lx.MANAGEMENT_MATERIALS],jx=[].concat(dx,px,bx,hx,fx),vx=lx;function Ox(){var e=Object(f.a)(["\n  padding-top: 8px;\n  text-align: center;\n  font-size: ",";\n  color: ",";\n  padding-left: 10px;\n"]);return Ox=function(){return e},e}function gx(){var e=Object(f.a)(["\n  width: 30px;\n  padding-left: 10px;\n  padding-top: .7rem;\n  text-align: center;\n  display: flex;\n  align-items: start;\n"]);return gx=function(){return e},e}function xx(){var e=Object(f.a)(["\n  width: 20px;\n  padding: auto;\n  text-align: center;\n\n  & path,\n  circle {\n    stroke: ",";\n  }\n\n  & svg {\n    margin-top: 7px;\n  }\n"]);return xx=function(){return e},e}var yx=y.default.div(xx(),_.orange1),_x=y.default.div(gx()),wx=y.default.div(Ox(),sm.smaller,_.gray4),Sx=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.loadContacts=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n={term:t,contact_status:[Zg.ACTIVE]},e.next=3,hO.searchContacts(n);case 3:return r=e.sent,e.abrupt("return",r.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadContacts=Qv()(e.loadContacts,1e3),e.getContactLabel=function(e){return Object(a.jsx)(MO,{contact:e})},e.onInvoiceToChange=function(t){return function(n){var r,a;t.contact&&(null===(r=(a=e.props).onChange)||void 0===r||r.call(a,t))}},e.onAssignmentTypeChange=function(t){return function(n){var r,a;t.contact&&(null===(r=(a=e.props).onChange)||void 0===r||r.call(a,t))}},e.createContactFromTemplate=function(t){return function(n){e.setState({modal:"createContact",contactIndex:t}),setTimeout(function(e){var t,n,r,a,o;null===e||void 0===e||null===(t=e.closest)||void 0===t||null===(n=t.call(e,".fcc__menu"))||void 0===n||null===(r=n.previousElementSibling)||void 0===r||null===(a=r.querySelector)||void 0===a||null===(o=a.call(r,"input"))||void 0===o||o.blur()}(n.target))}},e.renderContactModal=function(){var t=e.state,n=t.creatingContact,r=t.template;return Object(a.jsx)(qO,{isOpen:!0,children:Object(a.jsx)(cg,{onClose:function(){e.setState({modal:null})},loading:n,title:"Create Contact",body:Object(a.jsx)(rx,{footer:!1,person:r,initialValues:r,contactCategory:r.contact_category.id,onSubmit:e._createContactFromTemplate}),footer:Object(a.jsx)("button",{type:"button",className:"btn btn-primary",onClick:function(){e.props.dispatch(Object(Wv.c)(tx))},children:"Create"})})})},e._createContactFromTemplate=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l,u,d,p,h,b,f;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({creatingContact:!0}),t.prev=1,o=n.address,i=n.mailing_address,s=n.parent_company,l=Object(rj.a)(n,["address","mailing_address","parent_company"]),t.next=5,Promise.all([hO.createPerson(Object(c.a)(Object(c.a)({},l),{},{contact_category_id:null===(a=l.contact_category)||void 0===a?void 0:a.id})),o?Rg.create(o):Promise.resolve(null),i?Rg.create(i):Promise.resolve(null)]);case 5:if(u=t.sent,d=Object(w.a)(u,3),p=d[0],h=d[1],b=d[2],f=p.data,h&&hO.addContactAddress(f.id,h.data,Sv.street),b&&hO.addContactAddress(f.id,b.data,Sv.mailing),!s){t.next=16;break}return t.next=16,hO.linkPersonToCompany(f.id,s);case 16:e.props.dispatch(Object(Wv.a)(e.props.meta.form,"contacts.".concat(e.state.contactIndex,".contact"),f)),setTimeout(Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:null===(n=(r=e.props).onChange)||void 0===n||n.call(r,{});case 1:case"end":return t.stop()}}),t)})))),e.setState({modal:null,template:null,contactIndex:null}),r=f,t.next=25;break;case 22:t.prev=22,t.t0=t.catch(1),(null===t.t0||void 0===t.t0?void 0:t.t0.status_code)===ox&&(r=sx(t.t0.fields));case 25:return t.prev=25,e.setState({creatingContact:!1}),t.finish(25);case 28:return t.abrupt("return",r);case 29:case"end":return t.stop()}}),t,null,[[1,22,25,28]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"getAvailableAssignments",value:function(e){var t=e.getAll();return this.props.assignmentTypes.filter((function(e){return!e.is_unique||!t.find((function(t){return!!t.assignment_type&&t.assignment_type.name===e.name}))}))}},{key:"componentDidMount",value:function(){this.setState({template:this.props.template})}},{key:"componentDidUpdate",value:function(e){!e.template&&this.props.template&&this.setState({template:this.props.template})}},{key:"render",value:function(){var e=this,t=this.props,r=t.fields,o=t.onChange,i=t.context,c=i&&!i.has(vx.JOBS_UPDATE);return Object(a.jsxs)(a.Fragment,{children:["createContact"===this.state.modal&&this.renderContactModal(),r.map((function(t,i,s){var l=s.get(i);return Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col col-lg-2 col-xl-3",children:Object(a.jsx)(Hv.a,{name:"".concat(t,".assignment_type"),placeholder:"Assignment Type",component:xO,onChange:e.onAssignmentTypeChange(l),options:e.getAvailableAssignments(r),getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name.toString()},selectStyles:n.customTypeSelectStyles,disabled:c})}),Object(a.jsx)("div",{className:"col col-lg-7 col-xl-6",children:Object(a.jsx)(Hv.a,{name:"".concat(t,".contact"),placeholder:"Start typing to search...",component:NO,onChange:o,isClearable:!0,loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:e.getContactLabel,selectStyles:n.customContactSelectStyles,noOptionsMessage:function(t){var n=t.inputValue;return!n&&e.state.template?Object(a.jsxs)("div",{className:"text-left",children:[Object(a.jsx)("div",{children:Object(a.jsx)(MO,{contact:e.state.template})}),Object(a.jsx)("div",{children:Object(a.jsx)(Lx,{onClick:e.createContactFromTemplate(i),children:"Create contact"})})]}):n?Object(a.jsx)("div",{className:"text-left",children:Object(a.jsx)(v.c,{to:"/contacts/1",children:"Create new contact"})}):"Start typing..."},disabled:c})}),Object(a.jsx)(yx,{children:l.contact&&(l.contact.has_alerts||l.contact.tags&&l.contact.tags.find((function(e){return e.is_alert})))&&Object(a.jsx)(cm,{className:"align-self-center",name:Xf.Alert})}),Object(a.jsx)(_x,{children:Object(a.jsx)(Hv.a,{name:"invoiceToKey",component:UO,onChange:e.onInvoiceToChange(l),optionValue:l.assignment_type&&l.contact?Mx(l):i,disabled:!l.contact||c})}),Object(a.jsx)(wx,{children:"Invoice To"})]},i)}))]})}}]),n}(p.PureComponent);Sx.customTypeSelectStyles={control:function(e){return Object(c.a)(Object(c.a)({},e),{},{maxHeight:33.5,minHeight:"auto",borderColor:_.gray2,backgroundColor:"transparent",paddingTop:0,paddingBottom:0})}},Sx.customContactSelectStyles={menu:function(e){return Object(c.a)(Object(c.a)({},e),{},{minWidth:"330px"})}};var kx=Object(sg.compose)(Object(b.b)())(Sx),Cx=p.createContext({has:function(){return!1}});function Nx(){var e=Object(f.a)(["\n  position: relative;\n"]);return Nx=function(){return e},e}function Ex(){var e=Object(f.a)(["\n  margin-top: 5px;\n"]);return Ex=function(){return e},e}function Ax(){var e=Object(f.a)(["\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return Ax=function(){return e},e}var Ix,Tx,Rx,Dx,Mx=function(e){return"".concat(e.contact.id,"-").concat(e.assignment_type.id)},Lx=y.default.span(Ax(),_.blue4),Px=(y.default.div(Ex()),y.default.div(Nx())),Fx=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.fetchTemplatedContact=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.job,t.prev=1,t.next=4,zy.getTemplatedContact(n.id);case 4:(null===(a=t.sent)||void 0===a||null===(r=a.contact_category)||void 0===r?void 0:r.id)&&e.setState({template:a}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.addContact=function(t){var n=e.props.assignmentTypes.find((function(e){return!e.is_unique}));return function(){return t.push({assignment_type:n})}},e.renderContactsList=function(t){return Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsxs)("div",{children:[Object(a.jsx)(kx,Object(c.a)(Object(c.a)({},t),{},{context:n,template:e.state.template,assignmentTypes:e.props.assignmentTypes,onChange:function(){e.props.onFieldChange&&setTimeout((function(){e.props.handleSubmit(e.props.onFieldChange)()}),100)}})),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6 offset-2 offset-xl-3",children:n.has(vx.JOBS_UPDATE)&&Object(a.jsx)(Lx,{onClick:e.addContact(t.fields),children:"Add another contact"})})})]})}})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.job,n=e.initialValues.contacts;zy.isEmailTemplate(t)&&(j.a.some(n,(function(e){return!!e.contact}))||this.fetchTemplatedContact())}},{key:"render",value:function(){var e=this.props,t=e.assignmentTypes,n=e.submitting;return Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(a.jsxs)(Px,{children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),t.length>0&&Object(a.jsx)(mv.a,{name:"contacts",component:this.renderContactsList})]}),Object(a.jsx)(Ov,{})]})}}]),n}(p.PureComponent),Ux=Object(jv.a)({form:"JobContactsForm",validate:Gv,enableReinitialize:!0})(Fx),Bx=function(e){var t;return{recipients:["to","cc","bcc"].reduce((function(t,n){return e[n]?t.concat(e[n].map((function(e){return{type:n,address:e.email||e.value}}))):t}),[]),subject:e.subject,body:e.body,job_risk_assessment_id:null===(t=e.assessments)||void 0===t?void 0:t.map((function(e){return e.id}))}},Vx=function(e){var t,n,r=e.latest_status.status,a=(null===(t=e.job_users)||void 0===t?void 0:t.map((function(e){var t=mm(e);return{id:e.id,name:t.name,type:rv.user,primary_location:e.locations.find((function(e){return e.primary}))}})))||[],o=(null===(n=e.job_teams)||void 0===n?void 0:n.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{type:"team"})})))||[];return Object(c.a)(Object(c.a)({},e),{},{created_at:hv(e.created_at),initial_contact_at:hv(e.initial_contact_at),date_of_loss:pv(e.date_of_loss),anticipated_invoice_date:pv(e.anticipated_invoice_date),authority_received_at:hv(e.authority_received_at),criticality:e.criticality&&{value:e.criticality,label:e.criticality},claim_type:e.claim_type&&{value:e.claim_type,label:e.claim_type},edit_forbidden:r===zj.Closed||r===zj.Cancelled,assigned_to:[].concat(Object(aj.a)(a),Object(aj.a)(o))})},Jx=function(e){var t=Object(c.a)({},e);return t.fields&&(t.fields={claim_number:e.fields.claim_number,reference_number:e.fields.reference_number,job_service:e.fields.job_service_id,insurer:e.fields.insurer_id,assigned_location:e.fields.assigned_location_id,owner_location:e.fields.owner_location_id,claim_type:e.fields.claim_type,criticality:e.fields.criticality,initial_contact_at:e.fields.initial_contact_at,date_of_loss:e.fields.date_of_loss,anticipated_invoice_date:e.fields.anticipated_invoice_date,authority_received_at:e.fields.authority_received_at,cause_of_loss:e.fields.cause_of_loss,description:e.fields.description,anticipated_revenue:e.fields.anticipated_revenue,expected_excess_payment:e.fields.expected_excess_payment,site_address_id:e.fields.site_address_id,site_address_lng:e.fields.site_address_lng,site_address_lat:e.fields.site_address_lat,service:e.fields.service,supervisor_id:e.fields.supervisor_id}),t},qx=function(e){var t,n,r,a,o;return{term:null===e||void 0===e?void 0:e.term,assigned_location_id:null===e||void 0===e||null===(t=e.location)||void 0===t?void 0:t.id,from_date:fv(null===e||void 0===e||null===(n=e.from_date)||void 0===n||null===(r=n.startOf)||void 0===r?void 0:r.call(n,"day"),!0),to_date:fv(null===e||void 0===e||null===(a=e.to_date)||void 0===a||null===(o=a.endOf)||void 0===o?void 0:o.call(a,"day"),!0)}},zx=function(e){var t,n,r;return Object.assign((r={claim_number:e.claim_number,reference_number:e.reference_number,job_service_id:e.service&&e.service.id,insurer_id:e.insurer&&e.insurer.id,assigned_location_id:e.assigned_location&&e.assigned_location.id,owner_location_id:e.owner_location&&e.owner_location.id,company_location_id:(null===(t=e.company_location)||void 0===t?void 0:t.id)||null,claim_type:e.claim_type&&e.claim_type.value,criticality:e.criticality&&e.criticality.value,initial_contact_at:fv(e.initial_contact_at,!0),date_of_loss:bv(e.date_of_loss),anticipated_invoice_date:bv(e.anticipated_invoice_date),authority_received_at:fv(e.authority_received_at,!0),cause_of_loss:e.cause_of_loss,description:e.description,anticipated_revenue:e.anticipated_revenue,expected_excess_payment:e.expected_excess_payment},Object(k.a)(r,e.site_address_id?"site_address_id":"",e.site_address_id),Object(k.a)(r,e.site_address_lng?"site_address_lng":"",e.site_address_lng),Object(k.a)(r,e.site_address_lat?"site_address_lat":"",e.site_address_lat),Object(k.a)(r,"service",e.service),Object(k.a)(r,"supervisor_id",e.supervisor&&e.supervisor.id),Object(k.a)(r,"contacts",e.id&&!zy.isEmailTemplate(e)||null===(n=e.contacts)||void 0===n?void 0:n.filter((function(e){var t,n;return!!(null===(t=e.assignment_type)||void 0===t?void 0:t.id)&&!!(null===(n=e.contact)||void 0===n?void 0:n.id)})).map((function(t){return{assignment_type:{id:t.assignment_type.id,name:t.assignment_type.name},contact:{id:t.contact.id,invoice_to:e.invoiceToKey===Mx(t)}}}))),r),{})},Gx=function(e){var t;return{id:e.id,uid:"RA-"+e.id,created_at:pm()(e.created_at),hazards:(e.assigned_hazards||[]).map((function(e){return{id:e.id,name:e.name,risks:j.a.map(e.assigned_risks,"name"),controls:j.a.map(e.assigned_controls,"name"),responsibilities:j.a.map(e.assigned_responsibilities,"name")}})).concat((e.assigned_custom_hazards||[]).map((function(e){var t=e.data.risks[0];return{id:e.id,name:e.name,risks:t.name,controls:t.controls,responsibilities:t.responsibilities}}))),signature:{dataURL:e.signature,signedBy:{name:null===(t=e.user)||void 0===t?void 0:t.full_name},signedAt:pm()(e.created_at)},teamSignature:(e.assign_signature||[]).map((function(e){return{type:e.type,dataURL:e.signature,signedBy:{name:e.user_name},signedAt:pm()(e.created_at)}}))}},Wx=function(e){return Object(c.a)(Object(c.a)({},e),{},{contact:{id:e.contact_id,first_name:e.first_name,last_name:e.last_name,trading_name:e.trading_name,legal_name:e.legal_name,contact_type:e.contact_type,tags:e.tags}})},Hx=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t));case 2:return n=e.sent,e.abrupt("return",Vx(n.data));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Yx=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/inbox",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qx=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/mine",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kx=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/mine/active",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Zx=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/mine/teams/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Xx=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/mine/closed",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$x=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/mine/no-contact",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ey=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/mine/upcoming-kpi",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ty=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/services",{per_page:_g.Huge});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ny=function(e,t){var n=t.insurer_id;return t.insurer_id="",ev.patch("/v1/jobs/".concat(e),t).then((function(){return t.insurer_id=n,ev.patch("/v1/jobs/".concat(e),t).then((function(e){return Vx(e.data)}))})).catch((function(e){return Promise.reject(Jx(e))}))},ry=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ay=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/tags/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),iy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/users"));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){var t=mm(e);return{id:e.id,name:t.name,type:"user"}})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),cy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/teams"));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{type:"team"})})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/users/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ly=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/").concat(r,"s/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),uy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/").concat(r,"s/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),dy=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/contacts/assignments/types",{per_page:_g.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),py=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/contacts/assignments"));case 2:return n=e.sent,e.abrupt("return",n.data.map((function(e){return Wx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/external/contacts/assignments/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data.map((function(e){return Wx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),by=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/contacts/assignments/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data.map((function(e){return Wx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),fy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/contacts/assignments/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data.map((function(e){return Wx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),my=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/contacts/assignments/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data.map((function(e){return Wx(e)})));case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),jy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/next-statuses"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/status"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Oy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/linked-jobs"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/jobs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/jobs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),yy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/jobs/").concat(n,"/merge"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_y=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/pin"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/pin"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Sy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ky=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/follow"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Cy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/follow"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ny=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/photos"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ey=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/photos/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ay=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/photos/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Iy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/photos/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Ty=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/documents/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Ry=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/documents/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Dy=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/documents/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),My=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/documents"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ly=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/snooze"),{snoozed_until:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Py=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/unsnooze"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Fy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/messages/read"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uy=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/messages/unread"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),By=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/messages"),{type:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vy=function(e){var t,n,r,a,o;return!(!e||(null===(t=e.latest_status)||void 0===t||null===(n=t.user)||void 0===n?void 0:n.id)||(null===(r=e.latest_status)||void 0===r?void 0:r.user_id)||!(null===(a=e.messages)||void 0===a||null===(o=a[0])||void 0===o?void 0:o.subject)&&!e.last_message)},Jy=function(e,t){return null===t||void 0===t?void 0:t.find((function(t){return t.assignment_type.name===e}))},qy=function(e,t){var n=Jy(tv.SITE_CONTACT,e)||t&&Jy(tv.CUSTOMER,e);return n?hO.getContactName(n.contact):""},zy={getJobName:function(e){return e?"#".concat((null===e||void 0===e?void 0:e.id)||"").concat((null===e||void 0===e?void 0:e.assigned_location)?"-".concat(null===e||void 0===e?void 0:e.assigned_location.code):""):""},getJobNameOfCreditType:function(e){return"#CN".concat((null===e||void 0===e?void 0:e.id)||"").concat((null===e||void 0===e?void 0:e.assigned_location)?"-".concat(null===e||void 0===e?void 0:e.assigned_location.code):"")},getJobAddress:function(e){return e&&e.site_address&&e.site_address.full_address||"No Site Address Specified"},findById:Hx,deprecatedUpdate:function(e,t){var n=zx(t);return ny(e,n)},update:ny,getInboxJobs:Yx,getMineJobs:Qx,getAllJobs:Kx,getTeamJobs:Zx,getNoContactJobs:$x,getClosedJobs:Xx,getUpcomingKPIJobs:ey,getServices:ty,getTags:ry,assignTag:ay,removeTag:oy,getUsers:iy,assignUser:sy,removeUserOrTeam:uy,getContacts:py,getContactsByContractUid:hy,updateAssignment:by,createAssignment:fy,removeAssignment:my,getAssignmentTypes:dy,getJobNextStatuses:jy,applyNewJobStatus:vy,getLinkedJobs:Oy,linkJobs:xy,removeLink:gy,pinJob:_y,unpinJob:wy,mergeJobs:yy,createJob:function(e){var t=zx(e);return ev.post("/v1/jobs",t).catch((function(e){return Promise.reject(Jx(e))}))},duplicateJob:function(e){return ev.post("/v1/jobs/".concat(e,"/duplicate"))},removeJob:Sy,followJob:ky,unfollowJob:Cy,getJobPhotos:Ny,getJobDocuments:My,attachPhoto:Ey,updateAttachedPhoto:Ay,detachPhoto:Iy,snoozeJob:Ly,unSnoozeJob:Py,assignUserOrTeam:ly,getTeams:cy,markJobAsRead:Fy,markJobAsUnread:Uy,getPreviousJobs:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/previous"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createRecurringJob:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/recurring",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),searchJobs:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/jobs/search",Object(c.a)({term:t},n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),filterJobs:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/search",Object(c.a)({},t)).then((function(e){return Object(c.a)(Object(c.a)({},e),{},{options:t})}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getJobMaterials:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/materials"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addMaterialToJob:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/materials"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateJobMaterial:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/materials/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteJobMaterial:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/materials/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getJobMaterial:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/materials/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getJobUsageSummary:function(e){return ev.get("/v1/jobs/".concat(e,"/summary"))},getJobEquipments:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/equipment"),n);case 2:return r=e.sent,e.abrupt("return",Object(m.orderBy)(r.data,["started_at","equipment.model"],["desc","asc"]));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteJobEquipment:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/equipment/").concat(t))},updateJobEquipmentFinishUsing:function(e,t,n){return ev.patch("/v1/jobs/".concat(e,"/equipment/").concat(t,"/finish-using"),{ended_at:n})},addEquipmentToJob:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/equipment"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateJobEquipmentOverride:function(e,t,n){return ev.patch("/v1/jobs/".concat(e,"/equipment/").concat(t,"/override"),{intervals_count_override:n})},getJobCostingCounters:function(e){return ev.get("/v1/jobs/".concat(e,"/costing-counters"))},getJobsNewInventory:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/new-inventory",{location_id:t,search_string:n,page:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),isEmailTemplate:Vy,getMessages:By,attachDocument:Ty,updateAttachedDocument:Ry,detachDocument:Dy,shouldHighlight:function(e){return!!e&&(e.has_new_replies||Vy(e)&&pm.a.duration(pm()().diff(pm()(e.created_at||e.touched_at))).asHours()<=24||pm.a.duration(pm()().diff(pm()(e.updated_at||e.touched_at))).asHours()<=24)},getTemplatedContact:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/email-contact"));case 2:return n=e.sent,e.abrupt("return",Xv(n).data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),extractContact:Jy,siteContactName:qy,invoiceToName:function(e,t,n){var r=null===e||void 0===e?void 0:e.find((function(e){return e.invoice_to}));return r?hO.getContactName(r.contact):t?qy(e,n):""},getRiskAssessments:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/risk-assessments"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRiskAssessmentDetail:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/risk-assessments/").concat(n));case 2:if(!(r=e.sent.data)){e.next=5;break}return e.abrupt("return",Gx(r));case 5:return e.abrupt("return",null);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),sendRiskAssessmentEmail:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/jobs/".concat(t,"/risk-assessments/send-email"),Object(c.a)({job_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createWorkCategory:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/jobs/work_categories",Object(c.a)({job_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateWorkCategory:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.patch("/v1/jobs/work_categories/".concat(n),Object(c.a)({job_id:t},r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),addCustomExpense:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/custom-expense"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateCustomExpense:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/custom-expense/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteCustomExpense:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/jobs/".concat(t,"/custom-expense/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getCustomExpenses:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/jobs/".concat(t,"/custom-expense"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),generalAuthorityUpdate:function(e,t){return ev.post("/v1/jobs/".concat(e,"/general-authority"),t).then((function(e){return Vx(e.data)})).catch((function(e){return Promise.reject(Jx(e))}))}},Gy={emit:function(e,t){var n=new CustomEvent(e,{detail:t});window.dispatchEvent(n)},listen:function(e,t){var n=function(e){return t(e.detail)};return window.addEventListener(e,n),{stopListening:function(){return Wy(e,n)}}},removeListener:Wy};function Wy(e,t){window.removeEventListener(e,t)}!function(e){e.TaskWasAddedToRun="TaskWasAddedToRun",e.TaskWasRemovedFromRun="TaskWasRemovedFromRun",e.TaskWasSnoozed="TaskWasSnoozed",e.TaskWasUnsnoozed="TaskWasUnsnoozed",e.TaskWasUpdated="TaskWasUpdated",e.ContactChangedStatus="ContactChangedStatus",e.StaffAssignedToTask="StaffAssignedToTask",e.VehicleAssignedToTask="VehicleAssignedToTask",e.CreateRunsFromTemplate="CreateRunsFromTemplate",e.RunsCreatedFromTemplate="RunsCreatedFromTemplate",e.EmptyRunRemoved="EmptyRunRemoved",e.JobReadingsAdded="JobReadingsAdded",e.JobRoomAdded="JobRoomAdded",e.JobRoomCloned="JobRoomCloned",e.JobRoomUpdated="JobRoomUpdated",e.JobRoomDeleted="JobRoomDeleted",e.JobRoomAreaAdded="JobRoomAreaAdded",e.JobRoomAreaUpdated="JobRoomAreaUpdated",e.JobRoomAreaDeleted="JobRoomAreaDeleted",e.JobWorkLoaded="JobWorkLoaded",e.JobWorkAdded="JobWorkAdded",e.JobWorkUpdated="JobWorkUpdated",e.JobWorkDeleted="JobWorkDeleted",e.WarehousingInventoryAdded="WarehousingInventoryAdded",e.WarehousingInventoryDeleted="WarehousingInventoryDeleted",e.WarehousingStorageSpaceTypeAdded="WarehousingStorageSpaceTypeAdded",e.WarehousingStorageSpaceTypeUpdated="WarehousingStorageSpaceTypeUpdated",e.WarehousingStorageSpaceTypeRemoved="WarehousingStorageSpaceTypeRemoved",e.WarehousingStorageSpaceAdded="WarehousingStorageSpaceAdded",e.WarehousingStorageSpaceUpdated="WarehousingStorageSpaceUpdated",e.WarehousingStorageSpaceRemoved="WarehousingStorageSpaceRemoved",e.WarehousingStorageContainerTypeAdded="WarehousingStorageContainerTypeAdded",e.WarehousingStorageContainerTypeUpdated="WarehousingStorageContainerTypeUpdated",e.WarehousingStorageContainerTypeRemoved="WarehousingStorageContainerTypeRemoved",e.WarehousingStorageContainerAdded="WarehousingStorageContainerAdded",e.WarehousingStorageContainerUpdated="WarehousingStorageContainerUpdated",e.WarehousingStorageContainerRemoved="WarehousingStorageContainerRemoved",e.WarehousingStandardItemGroupAdded="WarehousingStandardItemGroupAdded",e.WarehousingStandardItemGroupUpdated="WarehousingStandardItemGroupUpdated",e.WarehousingStandardItemGroupRemoved="WarehousingStandardItemGroupRemoved",e.WarehousingStandardItemAdded="WarehousingStandardItemAdded",e.WarehousingStandardItemUpdated="WarehousingStandardItemUpdated",e.WarehousingStandardItemRemoved="WarehousingStandardItemRemoved",e.WarehousingChargingIntervalAdded="WarehousingChargingIntervalAdded",e.WarehousingChargingIntervalUpdated="WarehousingChargingIntervalUpdated",e.WarehousingChargingIntervalDeleted="WarehousingChargingIntervalDeleted",e.WarehousingInventoryItemAdded="WarehousingInventoryItemAdded",e.WarehousingInventoryItemUpdated="WarehousingInventoryItemUpdated",e.WarehousingInventoryItemRemoved="WarehousingInventoryItemRemoved",e.WarehousingInventoryItemNoteAdded="WarehousingInventoryItemNoteAdded",e.WarehousingInventoryItemNoteUpdated="WarehousingInventoryItemNoteUpdated",e.WarehousingInventoryItemNoteRemoved="WarehousingInventoryItemNoteRemoved",e.LME_LabourTypeAdded="LME_LabourTypeAdded",e.LME_LabourTypeUpdated="LME_LabourTypeUpdated",e.LME_LabourTypeDeleted="LME_LabourTypeDeleted",e.LME_EquipmentTypeAdded="LME_EquipmentTypeAdded",e.LME_EquipmentTypeUpdated="LME_EquipmentTypeUpdated",e.LME_EquipmentTypeDeleted="LME_EquipmentTypeDeleted",e.LME_EquipmentAdded="LME_EquipmentAdded",e.LME_EquipmentUpdated="LME_EquipmentUpdated",e.LME_EquipmentDeleted="LME_EquipmentDeleted",e.LME_ChargingIntervalAdded="LME_ChargingIntervalAdded",e.LME_ChargingIntervalUpdated="LME_ChargingIntervalUpdated",e.LME_ChargingIntervalDeleted="LME_ChargingIntervalDeleted",e.LME_MaterialAdded="LME_MaterialAdded",e.LME_MaterialUpdated="LME_MaterialUpdated",e.LME_MaterialDeleted="LME_MaterialDeleted",e.LocationAdded="LocationAdded",e.LocationUpdated="LocationUpdated",e.LocationRemoved="LocationRemoved",e.GSCodeAdded="GSCodeAdded",e.GSCodeUpdated="GSCodeUpdated",e.GSCodeRemoved="GSCodeRemoved",e.SuburbAdded="SuburbAdded",e.SuburbUpdated="SuburbUpdated",e.SuburbRemoved="SuburbRemoved",e.CustomExpenseCreated="CustomExpenseCreated",e.CustomExpenseUpdated="CustomExpenseUpdated",e.CustomExpenseDeleted="CustomExpenseDeleted"}(Ix||(Ix={})),function(e){e.Note="note",e.Message="message",e.Job="job"}(Tx||(Tx={})),function(e){e.Job="job",e.Contact="contact",e.Invoice="invoice",e.PurchaseOrder="purchase_order",e.CreditNote="credit_note",e.AssessmentReport="assessment_report"}(Rx||(Rx={})),function(e){e.JOB_CREATED="job.created",e.JOB_USER_ASSIGNED="job.user_assigned",e.JOB_TEAM_ASSIGNED="job.team_assigned",e.JOB_UPDATED="job.updated",e.JOB_MESSAGE_ATTACHED="job.message_attached",e.JOB_NOTE_ATTACHED="job.note_attached",e.USER_MENTIONED="user_mentioned",e.CONTACT_NOTE_ATTACHED="contact.note_attached",e.INVOICE_NOTE_ATTACHED="invoice.note_attached",e.PURCHASE_ORDER_NOTE_ATTACHED="purchase_order.note_attached",e.CREDIT_NOTE_NOTE_ATTACHED="credit_note.note_attached",e.INVOICE_APPROVE_REQUEST="invoice.approve_requests_send",e.PURCHASE_ORDER_APPROVE_REQUEST="purchase_order.approve_requests_send",e.CREDIT_NOTE_APPROVE_REQUEST="credit_note.approve_requests_send",e.ASSESSMENT_REPORT_APPROVE_REQUEST="assessment_report.approve_requests_send"}(Dx||(Dx={}));var Hy=n(494),Yy=n(69),Qy=n.n(Yy);n(359);function Ky(){var e=Object(f.a)(["\n  display: block;\n"]);return Ky=function(){return e},e}function Zy(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return Zy=function(){return e},e}function Xy(){var e=Object(f.a)(["\n  position: absolute;\n  right: 12px;\n  top: 8px;\n  cursor: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return Xy=function(){return e},e}function $y(){var e=Object(f.a)(["\n  position: relative;\n\n  input {\n    ",";\n    padding-right: 40px;\n  }\n"]);return $y=function(){return e},e}function e_(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return e_=function(){return e},e}function t_(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return t_=function(){return e},e}function n_(){var e=Object(f.a)(["\n  color: ",";\n"]);return n_=function(){return e},e}var r_=y.default.label(n_(),_.gray4),a_=y.default.input(t_(),_.gray1),o_=y.default.span(e_(),_.gray1),i_=(y.default.div($y(),vg),Object(y.default)(gv(["disabled"])(cm))(Xy(),(function(e){return e.disabled?"unset":"pointer"}),_.gray4,(function(e){return e.disabled?_.gray4:_.gray5})),Object(y.default)(gv(["disabled"])(cm))(Zy(),_.gray4,(function(e){return e.disabled?_.gray4:_.gray5}))),c_=y.default.div(Ky()),s_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:e.props.input.value},e.picker=p.createRef(),e.isValidDate=function(t){if(!e.props.futureEnabled){var n=pm()();return pm()(t).isBefore(n)}return!0},e.renderInput=function(t,n){var r=e.props,o=r.iconName,i=r.dateFormat,s=r.timeFormat,l=r.showTime,u=r.disabled,d=!1===i&&(l||s),p="";!1!==i?(p=iv,(l||s)&&(p+=" "+(s||sv))):p=s||sv;var h=e.state.value||"";return pm.a.isMoment(h)&&(h=h.format(p)),Object(a.jsxs)("div",{className:"input-group",onClick:function(){u||n()},children:[Object(a.jsx)(a_,Object(c.a)(Object(c.a)({},t),{},{value:h,onChange:function(n){e.setState({value:n.target.value}),t.onChange(n)}})),Object(a.jsx)("span",{className:"input-group-append",children:Object(a.jsx)(o_,{className:"input-group-text px-2",children:Object(a.jsx)(i_,{name:o||(d?Xf.Clock:Xf.Calendar),size:18,disabled:u})})})]})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){this.state.value&&this.props.input.value||this.props.input.value===this.state.value||this.setState({value:this.props.input.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.meta,r=t.isValidDate,o=t.dateFormat,i=t.showTime,s=t.timeFormat,l=t.label,u=t.labelClassName,d=t.className,p=t.viewDate,h=t.defaultDate,b=t.closeOnSelect,f=t.disabled,m=t.timeConstraints,j=n.touched&&n.error,v={placeholder:this.props.placeholder,className:x()("form-control",{"is-invalid":j}),disabled:f},O=this.props.input.onChange;return Object(a.jsxs)("div",{className:x()("form-group",d),children:[l&&Object(a.jsx)(r_,{className:u,children:l}),Object(a.jsxs)("div",{className:this.props.valueClassName,children:[Object(a.jsx)(Qy.a,Object(c.a)(Object(c.a)({},this.props.input),{},{ref:this.picker,timeConstraints:m,inputProps:v,dateFormat:!1!==o&&iv,timeFormat:!!i&&(s||sv),isValidDate:r||this.isValidDate,initialViewDate:p,initialValue:h,closeOnSelect:!1!==b&&!(i||s),value:this.state.value,renderInput:this.renderInput,onChange:function(t){t&&!pm.a.isMoment(t)||O(t),e.setState({value:t})}})),j&&Object(a.jsx)(c_,{className:"invalid-feedback",children:n.error})]})]})}}]),n}(p.PureComponent);function l_(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -100%;\n  width: 100%;\n"]);return l_=function(){return e},e}function u_(){var e=Object(f.a)(["\n  position: relative;\n"]);return u_=function(){return e},e}function d_(){var e=Object(f.a)(["\n  padding: 0px;\n  &:not(:last-child){\n  margin-right: .5rem;\n}"]);return d_=function(){return e},e}function p_(){var e=Object(f.a)([""]);return p_=function(){return e},e}function h_(){var e=Object(f.a)([""]);return h_=function(){return e},e}function b_(){var e=Object(f.a)([""]);return b_=function(){return e},e}var f_,m_=y.default.div(b_()),j_=y.default.div(h_()),v_=y.default.div(p_()),O_=y.default.div(d_()),g_=y.default.div(u_()),x_=y.default.div(l_()),y_="JobsFilterForm";!function(e){e[e.THIS_MONTH=0]="THIS_MONTH",e[e.LAST_MONTH=1]="LAST_MONTH",e[e.THIS_WEEK=2]="THIS_WEEK",e[e.TODAY=3]="TODAY"}(f_||(f_={}));var __=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={shortcut:null},e.renderShortcut=function(t,n){return Object(a.jsx)("button",{className:"btn ".concat(t===e.state.shortcut?"btn-primary":"btn-outline-primary"),onClick:e.applyShorcut(t),children:n})},e.applyShorcut=function(t){return function(){var n=e.props,r=n.change,a=n.submit;switch(e.setState({shortcut:t}),t){case f_.THIS_MONTH:r("from_date",pm()().startOf("month")),r("to_date",pm()());break;case f_.LAST_MONTH:r("from_date",pm()().subtract(1,"month")),r("to_date",pm()());break;case f_.THIS_WEEK:r("from_date",pm()().startOf("week")),r("to_date",pm()());break;case f_.TODAY:r("from_date",pm()().startOf("day")),r("to_date",pm()())}a()}},e.navigate=function(t){return function(){if(e.props.values){var n,r=e.props.values.from_date,a=e.props,o=a.change,i=a.submit;switch(e.state.shortcut){case f_.THIS_MONTH:case f_.LAST_MONTH:n=pm()(r)[t](1,"month"),o("from_date",pm.a.min(pm()(),n).startOf("month")),o("to_date",pm.a.min(pm()(),pm()(n).endOf("month")));break;case f_.THIS_WEEK:n=pm()(r)[t](1,"week"),o("from_date",pm.a.min(pm()(),n)),o("to_date",pm.a.min(pm()(),pm()(n).add(1,"week").subtract(1,"day")));break;case f_.TODAY:o("from_date",(n=pm.a.min(pm()(),pm()(r)[t](1,"day"))).startOf("day")),o("to_date",pm()(n).endOf("day"))}i()}else setTimeout((function(){e.navigate(t)()}),10)}},e.apply=function(t){setTimeout((function(){var t,n;null===(t=(n=e.props).onSubmit)||void 0===t||t.call(n,e.values())}),1)},e.reset=function(){e.props.reset(),e.setState({shortcut:null}),setTimeout((function(){var t,n;null===(t=(n=e.props).onReset)||void 0===t||t.call(n,e.values())}),1)},e.values=function(){return qx(e.props.values)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.children;j.a.isFunction(e)&&e(this.shareable())}},{key:"shareable",value:function(){return{reset:this.reset,values:this.values}}},{key:"render",value:function(){var e,t,n=this,r=this.props.userLocations;return Object(a.jsx)(m_,{id:"job_filters_outer_wrapper",children:Object(a.jsxs)(j_,{className:"row m-0",children:[Object(a.jsx)(v_,{className:"col pl-0",children:Object(a.jsx)(Hy.a,{onReset:this.reset,onSubmit:this.props.handleSubmit(this.apply),children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)(O_,{className:"col",children:Object(a.jsx)(Hv.a,{name:"term",component:yg,placeholder:"Search...",className:"m-0"})}),Object(a.jsx)(O_,{className:"col",children:Object(a.jsx)(Hv.a,{name:"location",component:xO,options:r,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},placeholder:"Select Location",className:"m-0"})}),Object(a.jsx)(O_,{className:"col",children:Object(a.jsx)(Hv.a,{name:"from_date",component:s_,closeOnSelect:!0,placeholder:"From",onChange:function(){n.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)(O_,{className:"col",children:Object(a.jsx)(Hv.a,{name:"to_date",component:s_,closeOnSelect:!0,placeholder:"To",onChange:function(){n.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)(O_,{children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Find"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",children:"Reset"})]})})]})})}),Object(a.jsxs)(g_,{children:[null!==this.state.shortcut?Object(a.jsxs)(x_,{children:[Object(a.jsx)("div",{className:"py-2 px-3 cursor-pointer",onClick:this.navigate("subtract"),"data-tip":"Previous","data-for":"job_filters_prev",children:Object(a.jsx)(cm,{name:Xf.ArrowBack})}),Object(a.jsx)(um.a,{id:"job_filters_prev",effect:"solid",place:"bottom"}),(null===(e=this.props)||void 0===e||null===(t=e.values)||void 0===t?void 0:t.to_date)&&pm()(this.props.values.to_date).startOf("day")<pm()().startOf("day")?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"py-2 px-3 cursor-pointer",onClick:this.navigate("add"),"data-tip":"Next","data-for":"job_filters_next",children:Object(a.jsx)(cm,{name:Xf.ArrowNext})}),Object(a.jsx)(um.a,{id:"job_filters_next",effect:"solid",place:"bottom"})]}):null]}):null,Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[this.renderShortcut(f_.THIS_MONTH,"This Month"),this.renderShortcut(f_.THIS_WEEK,"This Week"),this.renderShortcut(f_.TODAY,"Today")]})]})]})})}}]),n}(h.a.PureComponent),w_=Object(sg.compose)(Object(jv.a)({form:y_,enableReinitialize:!0}),Object(b.b)((function(e){var t;return{userLocations:e.user.locations,values:null===(t=e.form[y_])||void 0===t?void 0:t.values}})))(__);function S_(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  position: absolute;\n  top: -100%;\n  width: 100%;\n"]);return S_=function(){return e},e}function k_(){var e=Object(f.a)(["\n  position: relative;\n"]);return k_=function(){return e},e}function C_(){var e=Object(f.a)(["\n  padding: 0px;\n  &:not(:last-child){\n  margin-right: .5rem;\n}"]);return C_=function(){return e},e}function N_(){var e=Object(f.a)([""]);return N_=function(){return e},e}function E_(){var e=Object(f.a)([""]);return E_=function(){return e},e}function A_(){var e=Object(f.a)([""]);return A_=function(){return e},e}var I_=y.default.div(A_()),T_=y.default.div(E_()),R_=y.default.div(N_()),D_=y.default.div(C_()),M_=(y.default.div(k_()),y.default.div(S_()),"JobsFilterType2Form"),L_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).apply=function(t){setTimeout((function(){var t,n;null===(t=(n=e.props).onSubmit)||void 0===t||t.call(n,e.values())}),1)},e.reset=function(){e.props.reset(),e.setState({shortcut:null}),setTimeout((function(){var t,n;null===(t=(n=e.props).onReset)||void 0===t||t.call(n,e.values())}),1)},e.values=function(){return qx(e.props.values)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.children;j.a.isFunction(e)&&e(this.shareable())}},{key:"shareable",value:function(){return{reset:this.reset,values:this.values}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(I_,{id:"job_filters_outer_wrapper",children:Object(a.jsx)(T_,{className:"row m-0",children:Object(a.jsx)(R_,{className:"col pl-0",children:Object(a.jsx)(Hy.a,{onReset:this.reset,onSubmit:this.props.handleSubmit(this.apply),children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)(D_,{className:"col",children:Object(a.jsx)(Hv.a,{name:"term",component:yg,placeholder:"Search Email...",className:"m-0"})}),Object(a.jsx)(D_,{children:Object(a.jsx)(Hv.a,{name:"from_date",component:s_,closeOnSelect:!0,placeholder:"From",onChange:function(){e.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)(D_,{children:Object(a.jsx)(Hv.a,{name:"to_date",component:s_,closeOnSelect:!0,placeholder:"To",onChange:function(){e.setState({shortcut:null})},className:"m-0"})}),Object(a.jsx)(D_,{children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Find"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",children:"Reset"})]})})]})})})})})}}]),n}(h.a.PureComponent),P_=Object(sg.compose)(Object(jv.a)({form:M_,enableReinitialize:!0}),Object(b.b)((function(e){var t;return{userLocations:e.user.locations,values:null===(t=e.form.JobsFilterType2Form)||void 0===t?void 0:t.values}})))(L_),F_=n(23);function U_(){var e=Object(f.a)(["\n  display: inline-block;\n  cursor: pointer;\n  margin-right: 20px;\n  opacity: ",";\n\n  :hover path,\n  :hover line,\n  :hover rect,\n  :hover circle {\n    stroke: ",";\n  }\n\n  path,\n  line,\n  rect,\n  circle {\n    stroke: ",";\n  }\n"]);return U_=function(){return e},e}function B_(){var e=Object(f.a)(["\n  padding: 20px 30px;\n  position: relative;\n  border-bottom: 1px solid ",";\n"]);return B_=function(){return e},e}var V_=y.default.div(B_(),_.gray2),J_=y.default.div(U_(),(function(e){return e.disabled?.5:1}),(function(e){return e.disabled?_.gray5:_.blue4}),(function(e){return e.color&&e.color})),q_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(V_,{className:this.props.className,children:this.props.children})}}]),n}(p.PureComponent),z_=n(574);function G_(){var e=Object(f.a)(["\n  ","\n  padding: 0.5rem 0;\n"]);return G_=function(){return e},e}function W_(){var e=Object(f.a)(["\n  position: absolute;\n  min-width: 100%;\n  padding: 0;\n  overflow: ",";\n  ",";\n  ","\n"]);return W_=function(){return e},e}var H_=y.default.div(W_(),(function(e){return e.applyOverflow?"hidden":"visible"}),(function(e){return"right"===e.direction?"right: 0px; left: inherit;":""}),(function(e){return e.transparent&&"\n    background: transparent !important;\n    border: 0 !important;\n  "})),Y_=y.default.div(G_(),(function(e){return e.applyOverflow?"\n  max-height: 60vh;\n  overflow: auto;\n  ":""})),Q_=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isExpanded:!1,isTooLong:!1},e.innerHeight=0,e.measureHeight=function(){e.refInner.current&&e.state.isExpanded&&e.refInner.current.clientHeight!==e.innerHeight&&(e.innerHeight=e.refInner.current.clientHeight,e.setState({isTooLong:e.refInner.current.clientHeight>.6*window.innerHeight}))},e.open=function(){e.setState({isExpanded:!0})},e.close=function(){e.setState({isExpanded:!1})},e.toggle=function(){e.state.isExpanded?e.close():e.open()},e.handleClick=function(e){e.stopPropagation()},e.handleClickOutside=function(){e.state.isExpanded&&(e.props.onOutside&&e.props.onOutside(),e.close())},e.refInner=p.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.measureHeight()}},{key:"componentDidUpdate",value:function(){this.measureHeight()}},{key:"render",value:function(){var e=this.state,t=e.isExpanded,n=e.isTooLong,r=this.props,o=r.direction,i=r.transparentDropdown;return Object(a.jsxs)("div",{className:x()("dropdown d-inline-block",this.props.className,{show:t}),onClick:this.handleClick,children:[this.props.trigger({isExpanded:t,open:this.open,close:this.close,toggle:this.toggle}),Object(a.jsx)(H_,{applyOverflow:n,transparent:i,direction:o||"left",className:x()("dropdown-menu",{show:t}),children:Object(a.jsx)(Y_,{applyOverflow:n,children:Object(a.jsx)("div",{ref:this.refInner,children:this.props.menu({close:this.close})})})})]})}}]),n}(p.Component),K_=Object(z_.a)(Q_);function Z_(){var e=Object(f.a)(["\n  &.disabled {\n    color: ",";\n  }\n"]);return Z_=function(){return e},e}function X_(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: relative;\n"]);return X_=function(){return e},e}var $_=y.default.div(X_()),ew=y.default.div(Z_(),_.gray2),tw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.state.loading,n=this.props,r=n.onClick,o=n.children,i=n.classNames;return Object(a.jsxs)($_,{children:[Object(a.jsx)(ew,{className:x()(i,"dropdown-item"),onClick:function(t){r&&(e.setState({loading:!0}),t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),r().then((function(){e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})})))},children:o}),t&&Object(a.jsx)(Nv,{size:20,color:_.white,onClick:function(e){e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.nativeEvent.preventDefault()}})]})}}]),n}(p.PureComponent),nw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderMenu=function(t){var n=e.props.items;return Object(a.jsx)(a.Fragment,{children:n&&n.map((function(e,n){return"header"===e.type?Object(a.jsx)("div",{className:"dropdown-header",children:e.name},n):"divider"===e.type?Object(a.jsx)("div",{className:"dropdown-divider"},n):Object(a.jsx)(tw,{classNames:x()(e.classNames,{disabled:e.disabled}),onClick:e.disabled?function(){return Promise.resolve()}:function(){var n=e.onClick&&e.onClick(e.data)||Promise.resolve(!0);return n.then((function(){e.noClose||t.close()})).catch((function(){t.close()})),n},children:e.name||e.customElements&&e.customElements(t)||""},n)}))})},e.renderTrigger=function(t){var n=e.props,r=n.noMargin,o=n.trigger,i=n.disabled,c=n.tooltipId,s=n.tooltipHint,l={marginRight:r?"0px":"---",opacity:i?.5:1,cursor:i?"unset":"pointer"};return function(e){return Object(a.jsx)(a.Fragment,{children:o?Object(a.jsx)("div",{style:l,"data-tip":s,"data-for":c,onClick:i?void 0:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),e.toggle()},children:o()}):Object(a.jsx)(J_,{style:l,onClick:function(t){t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),i||e.toggle()},"data-tip":s,"data-for":c,disabled:i,children:Object(a.jsx)(cm,{name:t})})})}},e.onOutsideClick=function(){var t=e.props.items;t&&t.forEach((function(e){e.onOutsideClick&&e.onOutsideClick()}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.iconName,n=e.direction,r=e.renderInternal,o=e.className,i=e.transparentDropdown;return Object(a.jsx)(K_,{onOutside:this.onOutsideClick,direction:n,className:o,transparentDropdown:i,trigger:this.renderTrigger(void 0!==t?t:Xf.MenuHorizontal),menu:r||this.renderMenu})}}]),n}(p.PureComponent),rw="Steamatic/Modal/Confirm/OPEN",aw="Steamatic/Modal/Confirm/CLOSE",ow=Object(sg.combineReducers)({confirm:Object(sg.combineReducers)({active:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case rw:return!0;case aw:return!1;default:return e}},hash:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case rw:return t.payload.hash;case aw:return"";default:return e}},title:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case rw:return t.payload.title;case aw:return"";default:return e}},body:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case rw:return t.payload.body||"";case aw:return"";default:return e}},width:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case rw:return t.payload.width||"700px";case aw:return"";default:return e}}})}),iw=function(e,t,n,r,a){return function(a,o){if(!o().modal.confirm.active){var i=(1e8*Math.random()).toFixed(0);if(a({type:"Steamatic/Modal/".concat(e,"/OPEN"),payload:{hash:i,title:t,body:n,width:r}}),"Confirm"===e)return new Promise((function(e){window.addEventListener("modal-confirm-".concat(i),(function(t){window.removeEventListener("modal-confirm-".concat(i),(function(){return!1})),e(t.detail)}))}))}return!1}},cw={getJobsInfo:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/info");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},sw="Steamatic/Jobs/SET_JOBS_INFO",lw=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case sw:return t.payload;default:return e}},uw=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,cw.getJobsInfo();case 2:return n=e.sent,t({type:sw,payload:n.data}),e.abrupt("return",n.data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},dw=n(172);function pw(){var e=Object(f.a)(["\n"]);return pw=function(){return e},e}function hw(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: transparent;\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return hw=function(){return e},e}function bw(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return bw=function(){return e},e}function fw(){var e=Object(f.a)(["\n  cursor: pointer;\n  >*{\n    padding-left: 5px;\n    padding-right: 5px;\n  }\n"]);return fw=function(){return e},e}function mw(){var e=Object(f.a)(["\n"]);return mw=function(){return e},e}var jw,vw,Ow,gw,xw=y.default.div(mw()),yw=y.default.div(fw()),_w=Object(y.default)(gv(["pinned_at"])(cm))(bw(),(function(e){return e.pinned_at?_.blue4:_.black0}),(function(e){return e.pinned_at?_.blue4:"transparent"}),_.blue4),ww=Object(y.default)(gv(["snoozed_until"])(cm))(hw(),(function(e){return e.snoozed_until?_.orange1:_.black0}),_.orange1),Sw=y.default.div(pw()),kw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showPicker:!1},e.pinJob=function(t){var n=e.props,r=n.job,a=n.pinned_at,o=n.onAction,i=n.stopAction,c=n.fetchJobs;return t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),o(),(a?zy.unpinJob:zy.pinJob)(r.id).then((function(){return i(),c()})).catch(i)},e.snoozeJob=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=e.props,r=n.job,a=n.onAction,o=n.stopAction,i=n.fetchJobs;return a(),zy.snoozeJob(r.id,t).then(Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dw.delay)(100);case 2:return o(),e.abrupt("return",i());case 4:case"end":return e.stop()}}),e)})))).catch((function(e){o(),Oj(uj.Danger,e.error_message)}))},e.unSnoozeJob=function(t){var n=e.props,r=n.job,a=n.fetchJobs,o=n.onAction,i=n.stopAction;return t.stopPropagation(),t.nativeEvent.stopImmediatePropagation(),t.nativeEvent.preventDefault(),o(),zy.unSnoozeJob(r.id).then(Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(dw.delay)(10);case 2:return i(),e.abrupt("return",a());case 4:case"end":return e.stop()}}),e)})))).catch(i)},e.removeJob=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,o=n.fetchJobs,i=n.onAction,c=n.stopAction,s=n.dispatch,t.next=3,s(iw("Confirm","Delete Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to permanently delete Job ",Object(a.jsx)("strong",{children:zy.getJobName(r)}),"? This action cannot be undone!"]})));case 3:if(!t.sent){t.next=9;break}return i(),t.abrupt("return",zy.removeJob(r.id).then((function(){return c(),s(uw()),o()})).catch(c));case 9:return t.abrupt("return",Promise.reject(!0));case 10:case"end":return t.stop()}}),t)}))),e.editJob=function(){var t=e.props,n=t.job,r=t.onAction,a=t.stopAction,o=t.history;null===r||void 0===r||r(),o.push("/job/".concat(n.id,"/details")),null===a||void 0===a||a()},e.markAsUnread=function(){var t=e.props,n=t.job,r=t.fetchJobs,a=t.onAction,o=t.stopAction;return a(),zy.markJobAsUnread(n.id).then((function(){return o(),r()})).catch(o)},e.getRestMenuItems=function(t){var n=[],r=e.props.job;return t.has(vx.JOBS_MESSAGES_UNREAD)&&!r.has_new_replies&&n.push({name:"Mark as unread",onClick:e.markAsUnread}),t.has(vx.JOBS_DELETE)&&n.push({name:"Delete",onClick:e.removeJob}),2===n.length&&n.splice(1,0,{type:"divider"}),n},e.handlePickerChange=function(t){return e.setState({showPicker:!1}),e.snoozeJob(t.format(ov))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.show;t?t!==e.show&&um.a.rebuild():this.setState({showPicker:!1})}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.show,i=r.type,c=r.pinned_at,s=r.snoozed_until,l=r.job,u=(null===(e=l.latest_status)||void 0===e?void 0:e.status)===zj.Closed||(null===(t=l.latest_status)||void 0===t?void 0:t.status)===zj.Cancelled,d=zy.isEmailTemplate(l),p="inbox"===i;return Object(a.jsx)(Cx.Consumer,{children:function(e){var t=e.has(vx.JOBS_MANAGE_INBOX),r="job-list-tooltip-".concat(l.id),i=n.getRestMenuItems(e);return Object(a.jsx)(xw,{children:Object(a.jsxs)(yw,{className:"d-flex flex-row justify-content-end",children:[Object(a.jsx)(um.a,{multiline:!0,className:"overlapping text-left",id:r,effect:"solid"}),(o&&t&&!u||c)&&Object(a.jsx)("div",{children:Object(a.jsx)(_w,{name:Xf.Pin,pinned_at:!!c,"data-tip":c?"Unpin job":"Pin job","data-for":r,onClick:t?n.pinJob:void 0})}),!p&&!u&&(o||s)&&(s?Object(a.jsx)("div",{children:Object(a.jsx)(ww,{name:Xf.Clock,"data-tip":t?"Unsnooze job<br/>Snoozed until:<br/>".concat(pm.a.utc(s).format(cv)):"Snoozed","data-for":r,onClick:t?n.unSnoozeJob:void 0,snoozed_until:!0})}):t&&!d?Object(a.jsx)(Sw,{children:Object(a.jsx)(nw,{items:n.snoozeMenuItems,direction:"right",trigger:function(){return Object(a.jsx)(ww,{name:Xf.Clock,"data-tip":"Snooze job","data-for":r,snoozed_until:!1})}})}):null),o&&d&&t&&e.has(vx.JOBS_CREATE)&&Object(a.jsx)("div",{children:Object(a.jsx)(cm,{name:Xf.Add,size:20,"data-tip":"Create Job","data-for":r,onClick:n.editJob})}),o&&i.length>0&&Object(a.jsx)(Sw,{children:Object(a.jsx)(nw,{items:i,noMargin:!0,direction:"right",iconName:Xf.MenuVertical})})]})})}})}},{key:"snoozeMenuItems",get:function(){var e=this,t=this.props.job,n=[];n.push({type:"header",name:"Snooze until"}),n.push({name:"Tomorrow",onClick:function(){return e.snoozeJob(pm()(pm()().format("YYYY-M-D")).add(1,"d").format(ov))}}),n.push({name:"Next week: ".concat(pm()().add(7,"d").format(cv)),onClick:function(){return e.snoozeJob(pm()(pm()().format("YYYY-M-D")).add(7,"d").format(ov))}});var r=null===t||void 0===t?void 0:t.next_task;return r&&n.push({name:"Next scheduled task is due: ".concat(pm()(r.due_at).format(cv)),onClick:function(){return e.snoozeJob(pm.a.utc(r.due_at).startOf("day").format(ov))}}),n.push({customElements:function(t){return Object(a.jsx)(a.Fragment,{children:e.state.showPicker?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"dropdown-divider"}),Object(a.jsx)(Qy.a,{input:!1,timeFormat:!1,isValidDate:function(e){var t=pm()();return pm()(e).isAfter(t)},onChange:function(n){e.handlePickerChange(n),t.close()}})]}):Object(a.jsx)("div",{onClick:function(){e.setState({showPicker:!0})},children:"Pick a date"})})},noClose:!0,classNames:"custom"}),n}}]),n}(p.PureComponent),Cw=Object(sg.compose)(Object(b.b)(),O.g)(kw);!function(e){e.JOB="job_note",e.FIELD="field_note"}(jw||(jw={})),function(e){e.EMAIL="email",e.RA_EMAIL="risk_email",e.SMS="sms"}(vw||(vw={})),function(e){e.TO="to",e.CC="cc",e.BCC="bcc"}(Ow||(Ow={})),function(e){e.DRAFT="draft",e.READY="ready_for_delivery",e.FORWARDED="forwarded_for_delivery",e.DELIVERED="delivered",e.FAILED="delivery_failed"}(gw||(gw={}));var Nw=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/documents/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Ew=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,ev.postFormData("/v1/documents",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Aw=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.postFormData("/v1/documents/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Iw=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/documents/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tw=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/notes/".concat(t,"/documents/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Rw=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/notes/".concat(t,"/documents/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Dw=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/messages/".concat(t,"/documents/").concat(n),null);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mw=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/messages/".concat(t,"/documents/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Lw=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.downloadFile("/v1/documents/".concat(t,"/download"),!1);case 2:r=e.sent,Pw(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Pw=function(e,t){var n=window.URL.createObjectURL(e),r=document.createElement("a");return document.body.appendChild(r),r.href=n,r.download=t,r.click(),window.URL.revokeObjectURL(n),document.body.removeChild(r),n},Fw={getDocumentInfo:Nw,postDocument:Ew,updateDocument:Aw,remove:Iw,attachDocumentToNote:Tw,detachDocumentFromNote:Rw,attachDocumentToMessage:Dw,detachDocumentFromMessage:Mw,downloadDocument:Lw};function Uw(){var e=Object(f.a)(["\n  margin-right: 2px;\n  path {\n    stroke: ",";\n  }\n"]);return Uw=function(){return e},e}function Bw(){var e=Object(f.a)(["\n  display: block;\n  position: relative;\n  cursor: pointer;\n  color: ",";\n  &:hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return Bw=function(){return e},e}function Vw(){var e=Object(f.a)(["\n  font-size: ",";\n  color: ",";\n  margin-left: 5px;\n  cursor: pointer;\n"]);return Vw=function(){return e},e}function Jw(){var e=Object(f.a)(["\n  display: flex;\n"]);return Jw=function(){return e},e}var qw,zw=y.default.div(Jw()),Gw=y.default.div(Vw(),sm.medium,_.gray4),Ww=y.default.span(Bw(),_.blue4,_.blue5),Hw=Object(y.default)(gv(["removing"])(cm))(Uw(),(function(e){return e.removing?_.gray4:_.blue4})),Yw=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={downloading:{}},e.downloadFile=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState((function(e){return e.downloading[n]=!0,e})),t.next=3,Fw.downloadDocument(n,r);case 3:e.setState((function(e){return e.downloading[n]=!1,e}));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.removeDocument=function(t){e.props.onRemove&&e.props.onRemove(t)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.documents,r=t.onRemove;return n&&0!==n.length?Object(a.jsx)(a.Fragment,{children:n.map((function(t){return Object(a.jsxs)(zw,{children:[Object(a.jsxs)(Ww,{onClick:function(n){n.stopPropagation(),e.downloadFile(t.id,t.file_name)},children:[e.state.downloading[t.id]&&Object(a.jsx)(Nv,{size:20,color:_.white}),Object(a.jsx)(Hw,{name:Xf.Attachment,size:11}),t.file_name]}),r&&Object(a.jsx)(Gw,{onClick:function(){return e.removeDocument(t.id)},children:"\xd7"})]},"link-".concat(t.id))}))}):null}}]),n}(p.Component);function Qw(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 10px 10px 0 0;\n  border-color: "," transparent transparent transparent;\n  left: 0px;\n  top: 0px;\n"]);return Qw=function(){return e},e}function Kw(){var e=Object(f.a)(["\n  position: absolute;\n"]);return Kw=function(){return e},e}function Zw(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"]);return Zw=function(){return e},e}function Xw(){var e=Object(f.a)([""]);return Xw=function(){return e},e}function $w(){var e=Object(f.a)([""]);return $w=function(){return e},e}function eS(){var e=Object(f.a)([""]);return eS=function(){return e},e}function tS(){var e=Object(f.a)([""]);return tS=function(){return e},e}function nS(){var e=Object(f.a)([""]);return nS=function(){return e},e}function rS(){var e=Object(f.a)(["\n  font-size: ",";\n  color: ","\n"]);return rS=function(){return e},e}function aS(){var e=Object(f.a)([""]);return aS=function(){return e},e}function oS(){var e=Object(f.a)([""]);return oS=function(){return e},e}function iS(){var e=Object(f.a)([""]);return iS=function(){return e},e}function cS(){var e=Object(f.a)(["\n.k-grid .k-hierarchy-cell, .k-grid colgroup>col:first-child{display: none;}\n.k-master-row{cursor: pointer;}\n.k-grid .k-hierarchy-cell + td, .k-grid .k-hierarchy-cell + th {\n  border-left-width: 0;\n}\n"]);return cS=function(){return e},e}!function(e){e.inbox="Inbox",e.mine="Mine",e.active="All active jobs",e.all="All active jobs",e.closed="Closed",e.team="Team",e.noContact="No contact 24 hours",e.upcomingKPI="Upcoming KPI"}(qw||(qw={}));var sS=y.default.div(cS()),lS=y.default.div(iS()),uS=y.default.div(oS()),dS=y.default.div(aS()),pS=y.default.div(rS(),sm.smaller,_.gray4),hS=y.default.div(nS()),bS=y.default.div(tS()),fS=y.default.div(eS()),mS=y.default.div($w()),jS=y.default.div(Xw()),vS=y.default.div(Zw()),OS=y.default.div(Kw()),gS=y.default.div(Qw(),_.orange2),xS=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={working:!1,grid:{data:[],sort:[],skip:0,take:0,total:0}},e.onSort=function(t){var n,r;null===(n=(r=e.props.gridState).onSortChange)||void 0===n||n.call(r,t.sort)},e.onPageChange=function(t){var n,r;null===(n=(r=e.props.gridState).onPageChange)||void 0===n||n.call(r,t.page)},e.onCellClick=function(t){return function(){e.onItemClick(t)}},e.onItemClick=function(t){if(e.setState({working:!0}),zy.isEmailTemplate(t))t.expanded=!t.expanded,e.setState({working:!1});else{var n=e.props,r=n.history,a=n.match,o=n.type;r.push({pathname:"/job/".concat(t.id,"/details"),state:{breadcrumbs:[{path:a.url,label:qw[o]}]}}),e.setState({working:!1})}},e.JobNo=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{className:"position-relative",onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsxs)(a.Fragment,{children:[zy.shouldHighlight(t)&&Object(a.jsx)(gS,{}),Object(a.jsx)(lS,{children:t.job_number||zy.getJobName(t)})]})}}))},e.Customer=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n,r=e.data,o=null===(t=r.customer_contact)||void 0===t?void 0:t.contact_name,i=null===(n=r.site_address)||void 0===n?void 0:n.full_address;return Object(a.jsxs)(uS,{children:[Object(a.jsx)(dS,{children:o||""}),o&&i?Object(a.jsx)(pS,{children:i}):null]})}}))},e.Insurer=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n,r,o,i=e.data,c=null===(t=i.insurer)||void 0===t||null===(n=t.company)||void 0===n?void 0:n.legal_name;return Object(a.jsxs)(hS,{children:[Object(a.jsx)(bS,{children:c||""}),c&&(null===(r=i.insurer)||void 0===r?void 0:r.address)?Object(a.jsx)(pS,{children:null===(o=i.insurer)||void 0===o?void 0:o.address}):null]})}}))},e.InvoiceTo=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n,r,o=e.data,i=null===(t=o.invoice_to_contact)||void 0===t?void 0:t.contact_name,c=null===(n=o.invoice_to_contact)||void 0===n||null===(r=n.contact_address)||void 0===r?void 0:r.full_address;return Object(a.jsxs)(hS,{children:[Object(a.jsx)(bS,{children:i||""}),i&&c?Object(a.jsx)(pS,{children:c}):null]})}}))},e.Service=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n=e.data;return Object(a.jsx)(fS,{children:null===(t=n.service)||void 0===t?void 0:t.name})}}))},e.Status=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t,n=e.data;return Object(a.jsx)(mS,{children:null===(t=n.latest_status)||void 0===t?void 0:t.status})}}))},e.DateAdded=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsx)(jS,{children:pm()(t.created_at).format(iv)})}}))},e.Actions=function(t){return Object(a.jsx)(_S,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data,r=e.props,o=r.type,i=r.fetchJobs;return Object(a.jsx)(vS,{children:Object(a.jsx)(OS,{children:Object(a.jsx)(Cw,{pinned_at:n.pinned_at,snoozed_until:n.snoozed_until,job:n,type:o||"",fetchJobs:i,onAction:function(){e.setState({working:!0})},stopAction:function(){e.setState({working:!1})},show:!0})})})}}))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(sS,{children:[this.state.working&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.props.gridState),{},{scrollable:"none",onPageChange:this.onPageChange,onSortChange:this.onSort,detail:yS,expandField:"expanded",onExpandChange:function(){},children:[Object(a.jsx)(F_.b,{field:"id",title:"Job No.",width:"120px",cell:this.JobNo}),Object(a.jsx)(F_.b,{field:"customer_name",title:"Customer, Site Address",width:"250px",cell:this.Customer}),Object(a.jsx)(F_.b,{field:"invoice_to_contact_name",title:"Invoice To",cell:this.InvoiceTo}),Object(a.jsx)(F_.b,{field:"service",title:"Service",width:"100px",cell:this.Service}),Object(a.jsx)(F_.b,{field:"job_status",title:"Status",width:"100px",cell:this.Status}),Object(a.jsx)(F_.b,{field:"created_at",title:"Date Added",width:"130px",cell:this.DateAdded}),Object(a.jsx)(F_.b,{width:"110px",cell:this.Actions,sortable:!1})]}))]})}}]),n}(h.a.Component),yS=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,data:e.props.dataItem},e.componentDidMount=function(){e.state.data.messages||e.loadDetails()},e.loadDetails=function(){e.setState({loading:!0}),zy.getMessages(e.state.data.id,vw.EMAIL).then((function(t){e.state.data.messages=t.data,e.setState(Object(c.a)({},e.state)),e.firstEmail(t.data)&&zy.markJobAsRead(e.state.data.id)}))},e.firstEmail=function(e){var t,n;return null===(n=e=null===(t=e)||void 0===t?void 0:t.filter((function(e){return e.message_type===vw.EMAIL})))||void 0===n?void 0:n[0]},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.data.messages;if(null===e||void 0===e?void 0:e.length){var t,n=this.firstEmail(e);return Object(a.jsxs)("div",{className:"p-3",children:[Object(a.jsxs)("div",{className:"mb-3 d-flex justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"From:"})," ",n.from_name&&Object(a.jsx)("span",{className:"mr-1",children:n.from_name})," ",n.from_name&&Object(a.jsx)(a.Fragment,{children:"<"}),n.from_address,n.from_name&&Object(a.jsx)(a.Fragment,{children:">"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Date:"})," ",pm()(n.created_at).format(lv)]})]}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("strong",{children:["Subject: ",n.subject]})}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:xm(n.message_body||"")}}),!!(null===(t=n.documents)||void 0===t?void 0:t.length)&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(Yw,{documents:n.documents})})]})]})}return this.state.loading?Object(a.jsxs)("div",{className:"position-relative",children:[Object(a.jsx)(Nv,{size:40,color:_.white}),"Loading..."]}):Object(a.jsx)(a.Fragment,{children:"No messages found"})}}]),n}(F_.c);function _S(e){var t=e.Component,n=e.dataItem,r=e.field,o=e.cellProps;return Object(a.jsx)("td",Object(c.a)(Object(c.a)({},o),{},{children:Object(a.jsx)(t,{data:n,value:r?j.a.get(n,r):void 0})}))}var wS=Object(O.g)(xS),SS=n(47),kS=n.n(SS);function CS(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n"]);return CS=function(){return e},e}function NS(){var e=Object(f.a)(["\n  margin-top: 5px;\n  color: ",";\n"]);return NS=function(){return e},e}function ES(){var e=Object(f.a)(["\n  width: 100%;\n  height: 50px;\n  position: absolute;\n  top: 10px;\n  background: linear-gradient(to top, ",", transparent);\n"]);return ES=function(){return e},e}function AS(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0px;\n  height: 0px;\n  border-style: solid;\n  border-width: 10px 10px 0 0;\n  border-color: "," transparent transparent transparent;\n  left: 0px;\n  top: 0px;\n"]);return AS=function(){return e},e}function IS(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  // flex: 1;\n  visibility: ",";\n"]);return IS=function(){return e},e}function TS(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  // flex: 1;\n"]);return TS=function(){return e},e}function RS(){var e=Object(f.a)(["\n  padding-left: 20px;\n  // flex: 1;\n"]);return RS=function(){return e},e}function DS(){var e=Object(f.a)(["\n  color: ",";\n  hyphens: auto;\n  position: relative;\n  max-height: 60px;\n  overflow: hidden;\n"]);return DS=function(){return e},e}function MS(){var e=Object(f.a)(["\n  width: 40%;\n  padding-left: 20px;\n"]);return MS=function(){return e},e}function LS(){var e=Object(f.a)(["\n  color: ",";\n"]);return LS=function(){return e},e}function PS(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n"]);return PS=function(){return e},e}function FS(){var e=Object(f.a)(["\n  width: 25%;\n  hyphens: auto;\n"]);return FS=function(){return e},e}function US(){var e=Object(f.a)(["\n  color: #4d4f52;\n  font-size: 1.5rem;\n  margin-right: 10px; \n"]);return US=function(){return e},e}function BS(){var e=Object(f.a)(["\n  max-height: 250px;\n  padding: 15px 10px 15px 26px;\n"]);return BS=function(){return e},e}function VS(){var e=Object(f.a)(["\n  position: relative;\n  border: 1px solid ",";\n  margin-top: -1px;\n  text-decorate: none;\n  background: ",";\n\n  :hover {\n    background: ",";\n    text-decoration: none;\n    cursor: pointer;\n  }\n\n  & *:hover {\n    text-decoration: none;\n  }\n"]);return VS=function(){return e},e}var JS=y.default.div(VS(),_.gray2,_.white,(function(e){return!e.loading&&_.gray0})),qS=y.default.div(BS()),zS=y.default.div(US()),GS=y.default.div(FS()),WS=y.default.div(PS(),_.black1,lm.medium),HS=y.default.div(LS(),_.gray5),YS=y.default.div(MS()),QS=y.default.div(DS(),_.gray3),KS=y.default.div(RS()),ZS=y.default.div(TS(),_.black1),XS=Object(y.default)(gv(["visibility"])("div"))(IS(),_.black1,(function(e){return e.visibility?"visible":"hidden"})),$S=y.default.div(AS(),_.orange2),ek=Object(y.default)(gv(["hover"])("div"))(ES(),(function(e){return e.hover?_.gray0:"white"})),tk=y.default.div(NS(),_.orange2),nk=y.default.div(CS(),_.gray2),rk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,loading:!1,expanded:!1},e.onMouseEnter=function(){e.state.loading||e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e.onClick=function(){var t=e.props,n=t.job,r=t.history;zy.isEmailTemplate(n)?(e.setState({expanded:!e.state.expanded}),e.inquiryEmails||e.loadInquiryEmails(!0)):r.push({pathname:"/job/".concat(n.id,"/details"),state:{breadcrumbs:[{path:e.props.match.url,label:qw[e.props.type]}]}})},e.inquiryEmails=void 0,e.loadInquiryEmails=function(t){var n=e.props.job;t&&n.messages&&(n.messages.forEach((function(e){e.pivot&&(e.pivot.read_at=new Date)})),n.has_new_replies=!1),e.setState({loading:!0}),zy.getMessages(n.id,vw.EMAIL).then((function(r){e.inquiryEmails=r.data,t&&zy.markJobAsRead(n.id),e.setState({loading:!1})}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r,o=this,i=this.props,c=i.job,s=i.type,l=i.fetchJobs,u=this.state,d=u.hover,p=u.loading,h=zy.isEmailTemplate(c),b=null===(e=c.messages)||void 0===e?void 0:e[0],f=this.state.expanded;return Object(a.jsxs)(JS,{children:[Object(a.jsxs)(qS,{className:"d-flex flex-row h-print",onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,onClick:this.onClick,loading:p,children:[zy.shouldHighlight(c)&&Object(a.jsx)($S,{}),Object(a.jsx)(zS,{children:h?(null===b||void 0===b||null===(t=b.pivot)||void 0===t?void 0:t.read_at)?Object(a.jsx)("span",{className:"fa fa-envelope-open"}):Object(a.jsx)("span",{className:"fa fa-envelope"}):Object(a.jsx)("span",{className:"fa fa-tasks"})}),Object(a.jsx)(GS,{className:"d-flex flex-column flex-grow-1",children:h?b?(r=b,r.from_name&&r.from_address?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(WS,{children:r.from_name}),Object(a.jsx)(HS,{children:r.from_address})]}):Object(a.jsx)(HS,{children:r.from_address})):Object(a.jsx)(HS,{children:"Message Sender Not Set"}):Object(a.jsxs)(a.Fragment,{children:[c.site_contact_name?Object(a.jsx)(WS,{children:c.site_contact_name}):Object(a.jsx)(HS,{children:"Site Contact Not Set"}),Object(a.jsx)(HS,{children:(null===c||void 0===c||null===(n=c.site_address)||void 0===n?void 0:n.full_address)||"--"})]})}),Object(a.jsxs)(YS,{className:"flex-grow-1",children:[Object(a.jsxs)(QS,{className:"h-print",children:[this.latestMessage?!f&&Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:this.latestMessage}}):Object(a.jsx)("div",{children:c.description}),Object(a.jsx)(ek,{hover:d||f,className:"print-hide"})]}),c.snoozed_until&&"inbox"!==s&&Object(a.jsxs)(tk,{children:["Snoozed until ",pm()(c.snoozed_until).format("D MMMM YYYY")]})]}),Object(a.jsx)(KS,{children:zy.getJobName(c)}),Object(a.jsx)(ZS,{className:"d-flex flex-column",children:Object(a.jsx)("div",{children:c.latest_status.status})}),Object(a.jsx)(XS,{visibility:!d||f,children:Object(a.jsx)(kS.a,{fromNow:!0,children:c.touched_at})}),Object(a.jsx)(Cw,{pinned_at:c.pinned_at,snoozed_until:c.snoozed_until,job:c,type:s,fetchJobs:l,onAction:function(){o.itemLoading=!0},stopAction:function(){o.itemLoading=!1},show:d||f}),p&&Object(a.jsx)(Nv,{size:30,color:_.gray0})]}),f&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(nk,{}),Object(a.jsx)("div",{className:"px-5 py-3",children:this.inquiryEmails?this.inquiryEmails.length?function(){var e,t=o.inquiryEmails[0];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"mb-3 d-flex justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"From:"})," ",t.from_name&&Object(a.jsx)("span",{className:"mr-1",children:t.from_name})," ",t.from_name&&Object(a.jsx)(a.Fragment,{children:"<"}),t.from_address,t.from_name&&Object(a.jsx)(a.Fragment,{children:">"})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Date:"})," ",pm()(t.created_at).format(lv)]})]}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("strong",{children:["Subject: ",t.subject]})}),Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:xm(t.message_body||"")}}),!!(null===(e=t.documents)||void 0===e?void 0:e.length)&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(Yw,{documents:t.documents})})]})}():"No email found":p&&Object(a.jsx)(Nv,{size:30,color:_.gray0})})]})]})}},{key:"itemLoading",set:function(e){this.setState({loading:e})}},{key:"latestMessage",get:function(){var e=this.props.job.last_message;return e?ym(xm(e,!0)):null}}]),n}(p.PureComponent),ak=Object(O.g)(rk);function ok(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n  margin-bottom: 10px;\n  :not(:first-child){\n    margin-top: 50px;\n  }\n"]);return ok=function(){return e},e}function ik(){var e=Object(f.a)(["\n  overflow-y: auto;\n  height: 100%;\n\n  > div {\n    padding: 0 35px;\n  }\n\n  .grid-wrapper{overflow: auto;}\n\n  > div > div:first-child {\n    margin-top: 0px;\n  }\n"]);return ik=function(){return e},e}function ck(){var e=Object(f.a)(["\n  overflow: hidden;\n  position: relative;\n"]);return ck=function(){return e},e}var sk=y.default.div(ck()),lk=y.default.div(ik()),uk=y.default.div(ok(),_.gray4,lm.medium),dk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).defaultSort={jobs:{sorting_option:"created_at",sortby:"desc"},snoozedJobs:{sorting_option:"created_at",sortby:"desc"}},e.currentSort=j.a.cloneDeep(e.defaultSort),e.defaultFilter={jobs:{},snoozedJobs:{}},e.currentFilter=j.a.cloneDeep(e.defaultFilter),e.defaultPager={jobs:{},snoozedJobs:{}},e.currentPager=j.a.cloneDeep(e.defaultPager),e.data={jobs:[],snoozedJobs:[]},e.jobCreatedEventHandler=function(){e.fetchJobs()},e.fetchJobs=function(t,n){var r=e.props,a=r.jobs,o=r.snoozedJobs;if((a.loading||o.loading)&&!n)return Promise.reject();var i=e.props.match.params.type,c=[];return e.data={jobs:[],snoozedJobs:[]},e.currentPager=j.a.cloneDeep(e.defaultPager),e.currentSort=j.a.cloneDeep(e.defaultSort),c.push(e.fetchUnsnoozedJobs(t)),e.filterable.includes(i)&&c.push(e.fetchSnoozedJobs(t)),Promise.all(c)},e.fetchUnsnoozedJobs=function(t){return e.fetchJobsByType("jobs",t)},e.fetchSnoozedJobs=function(t){return e.fetchJobsByType("snoozedJobs",t)},e.fetchJobsByType=function(t,n){var r=e.props.match.params,a=r.type,o=r.teamId,i="team"===a?{teamId:o}:null,s="closed"===a?{include_closed:1}:null,l=e.filterable.concat(e.filterableType2).includes(a)?Object(c.a)(Object(c.a)({},e.currentSort[t]),e.currentFilter[t]):null,u=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},e.currentPager[t]),l),s),i),n);return e.props[t].fetch(a,u).then((function(n){return e.filterable.includes(a)?e.data[t]=n.data:e.data[t]=[].concat(Object(aj.a)(e.data[t]),Object(aj.a)(n.data)),e.forceUpdate(),n}))},e.loadMore=function(t){return function(){e.fetchJobsByType(t,{current_page:++e.currentPager[t].current_page,per_page:e.currentPager[t].per_page})}},e.applyFilters=function(t){e.currentFilter.jobs=Object(c.a)({},t),e.currentFilter.snoozedJobs=Object(c.a)({},t),e.fetchJobs()},e.pageWrapper=p.createRef(),e.filterWrapper=p.createRef(),e.gridWrapper=p.createRef(),e.setUIPositions=function(){if(e.pageWrapper.current&&e.gridWrapper.current){var t,n=e.pageWrapper.current.clientHeight,r=(null===(t=e.filterWrapper.current)||void 0===t?void 0:t.clientHeight)||0;e.gridWrapper.current.style.height=n-r-2+"px"}},e.filterable=["mine","closed","all"],e.filterableType2=["inbox"],e.jobsCondition=function(e,t){var n=pm()().startOf("day"),r=pm()().startOf("month"),a=pm()(t.touched_at).unix();switch(e){case"today":return a>n.unix()||!!t.pinned_at;case"yesterday":return a>n.subtract(1,"day").unix()&&a<n.unix()&&!t.pinned_at;case"thisWeek":return a>pm()().startOf("week").unix()&&!t.pinned_at;case"thisMonth":return a>r.unix()&&!t.pinned_at;case"earlier":return a<r.unix()&&a<=pm()().startOf("week").unix()&&!t.pinned_at;default:return!0}},e.getTodayJobs=function(t){return t.filter((function(t){return e.jobsCondition("today",t)}))},e.getThisWeekJobs=function(t){return t.filter((function(t){return e.jobsCondition("thisWeek",t)&&!e.jobsCondition("today",t)}))},e.getThisMonthJobs=function(t){return t.filter((function(t){return e.jobsCondition("thisMonth",t)&&!e.jobsCondition("thisWeek",t)&&!e.jobsCondition("today",t)}))},e.getEarlierJobs=function(t){return t.filter((function(t){return e.jobsCondition("earlier",t)}))},e.getJobsWithoutSnoozed=function(e){return e.filter((function(e){return!e.snoozed_until}))},e.getSnoozedJobs=function(e){return e.filter((function(e){return e.snoozed_until}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n;this.defaultPager={jobs:(null===(e=this.props.jobs.initialData)||void 0===e?void 0:e.pagination)||{per_page:10,current_page:1},snoozedJobs:(null===(t=this.props.snoozedJobs.initialData)||void 0===t?void 0:t.pagination)||(null===(n=this.props.jobs.initialData)||void 0===n?void 0:n.pagination)||{per_page:10,current_page:1}},this.currentPager=j.a.cloneDeep(this.defaultPager),this.fetchJobs(),this.setUIPositions(),Gy.listen(Dx.JOB_CREATED,this.jobCreatedEventHandler),window.addEventListener("resize",this.setUIPositions)}},{key:"componentDidUpdate",value:function(e){var t,n,r,a,o=this.props.match.params,i=o.type,c=o.teamId;i!==e.match.params.type&&(this.currentPager=j.a.cloneDeep(this.defaultPager),this.currentSort=j.a.cloneDeep(this.defaultSort),(this.filterable.includes(i)&&!this.filterable.includes(e.match.params.type)||this.filterableType2.includes(i)&&!this.filterableType2.includes(e.match.params.type))&&(this.currentFilter=j.a.cloneDeep(this.defaultFilter))),i===e.match.params.type&&c===e.match.params.teamId&&(null===(t=this.props.location)||void 0===t||null===(n=t.state)||void 0===n?void 0:n.applied)===(null===(r=e.location)||void 0===r||null===(a=r.state)||void 0===a?void 0:a.applied)||this.fetchJobs(void 0,!0).then((function(e){return e})),i!==e.match.params.type&&this.setUIPositions()}},{key:"componentWillUnmount",value:function(){Gy.removeListener(Dx.JOB_CREATED,this.jobCreatedEventHandler),window.removeEventListener("resize",this.setUIPositions)}},{key:"getGridState",value:function(e){var t=this,n=this.props[e].data;return(null===n||void 0===n?void 0:n.data)&&(null===n||void 0===n?void 0:n.pagination)?{data:this.data[e],sortable:{allowUnsort:!1},sort:[{field:this.currentSort[e].sorting_option,dir:this.currentSort[e].sortby}],pageable:{pageSizes:[5,10,20,25,50]},take:+(null===n||void 0===n?void 0:n.pagination.per_page),skip:(((null===n||void 0===n?void 0:n.pagination.current_page)||1)-1)*((null===n||void 0===n?void 0:n.pagination.per_page)||0),total:null===n||void 0===n?void 0:n.pagination.total_items,onPageChange:function(n){t.currentPager[e]={per_page:n.take,current_page:n.skip/n.take+1},t.fetchJobsByType(e)},onSortChange:function(n){t.currentSort[e]=n.length?{sorting_option:n[0].field,sortby:n[0].dir}:null,t.fetchJobsByType(e)}}:{data:this.data[e]}}},{key:"renderJobsGroup",value:function(e,t){var n=this,r=this.props.match.params.type;return 0===e.length?null:Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsx)(uk,{children:t}),e.map((function(e){return Object(a.jsx)(ak,{job:e,type:r,fetchJobs:n.fetchJobs},[e.claim_number,e.id].join("--"))}))]})}},{key:"render",value:function(){var e,t=this,n=this.props.match.params.type,r=this.props.jobs.loading||this.props.snoozedJobs.loading;return Object(a.jsx)(sk,{className:"flex-grow-1 h-100 py-3",children:Object(a.jsxs)(lk,{className:"h-100",ref:this.pageWrapper,children:[(this.filterable.includes(n)||this.filterableType2.includes(n))&&Object(a.jsx)("div",{className:"filters-wrapper",ref:this.filterWrapper,children:Object(a.jsx)("div",{className:"py-4 print-hide",children:this.filterableType2.includes(n)?Object(a.jsx)(P_,{initialValues:this.defaultFilter,onSubmit:this.applyFilters,onReset:this.applyFilters}):Object(a.jsx)(w_,{initialValues:this.defaultFilter,onSubmit:this.applyFilters,onReset:this.applyFilters})})}),r&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"grid-wrapper h-print",ref:this.gridWrapper,children:this.filterable.includes(n)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(wS,{gridState:this.getGridState("jobs"),type:n,fetchJobs:this.fetchJobs}),!!this.data.snoozedJobs.length&&Object(a.jsxs)("div",{className:"mb-3 mt-5",children:[Object(a.jsx)(uk,{children:"Snoozed"}),Object(a.jsx)(wS,{gridState:this.getGridState("snoozedJobs"),type:n,fetchJobs:this.fetchJobs})]})]}):(e=this.getGridState("jobs")||{},Object(a.jsxs)(a.Fragment,{children:["inbox"===n?Object(a.jsxs)("div",{className:"py-3",children:[t.renderJobsGroup(t.getTodayJobs(t.data.jobs),"Today"),t.renderJobsGroup(t.getThisWeekJobs(t.data.jobs),"This week"),t.renderJobsGroup(t.getThisMonthJobs(t.data.jobs),"This month"),t.renderJobsGroup(t.getEarlierJobs(t.data.jobs),"Earlier")]}):Object(a.jsxs)("div",{className:"py-3",children:[t.renderJobsGroup(t.getJobsWithoutSnoozed(t.data.jobs)),t.renderJobsGroup(t.getSnoozedJobs(t.data.jobs),"Snoozed")]}),!!t.data.jobs.length&&t.data.jobs.length<e.total&&Object(a.jsx)("div",{className:"text-center py-3 print-hide",children:Object(a.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:t.loadMore("jobs"),children:"Load More"})})]}))})]})})}}]),n}(p.PureComponent),pk=Object(sg.compose)(oj({jobs:{fetch:function(e,t){switch(e){case"noContact":return zy.getNoContactJobs(t);case"upcomingKPI":return zy.getUpcomingKPIJobs(t);case"inbox":return zy.getInboxJobs(t);case"team":var n=t.teamId,r=Object(rj.a)(t,["teamId"]);return zy.getTeamJobs(n,r)}return zy.filterJobs(Object(c.a)({include_snoozed:0,type:"all"===e?"active":e},t))},initialData:{data:[],pagination:{current_page:1,per_page:10,total_items:0}}},snoozedJobs:{fetch:function(e,t){return zy.filterJobs(Object(c.a)({include_snoozed:1,snoozed_only:1,type:"all"===e?"active":e},t))}}}),O.g)(dk);function hk(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  padding: 7px 26px;\n  color: ",";\n  margin-top: 20px;\n"]);return hk=function(){return e},e}var bk=y.default.div(hk(),_.gray4);var fk=function(e){var t=e.children;return Object(p.useContext)(S).isOpen&&Object(a.jsx)(bk,{children:t})||null};function mk(){var e=Object(f.a)(["\n  margin-right: 26px;\n  cursor: pointer;\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return mk=function(){return e},e}var jk=y.default.div(mk(),_.blue4),vk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.onClick,r=e.size,o=e["data-tip"],i=e["data-for"];return Object(a.jsx)(jk,{onClick:n,"data-for":i,"data-tip":o,children:Object(a.jsx)(cm,{name:t,size:r})})}}]),n}(p.PureComponent);function Ok(){var e=Object(f.a)(["\n  background: ",";\n  padding: 0px 26px;\n  margin-top: 2rem;\n  //overflow: hidden;\n  min-height: 50px;\n  path,\n  circle {\n    stroke: ",";\n  }\n"]);return Ok=function(){return e},e}var gk=y.default.div(Ok(),_.gray2,_.black0),xk=n(26),yk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).refreshJobsInfo=function(){e.props.dispatch(uw())},e.createNewJob=function(){e.props.history.push("/job/new/details")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(uw()),Rm.status("Jobs")}},{key:"componentWillUnmount",value:function(){Rm.reset()}},{key:"getJobsMenuMainItems",value:function(e){var t,n=this;return null===(t=[{path:"/jobs/inbox",label:"Inbox",value:0,icon:Xf.DrawerOpen,isActive:this.isActive("/jobs/inbox"),type:"inbox",disabled:!e.has(vx.JOBS_INBOX_VIEW)},{path:"/jobs/mine",label:"Mine",value:0,icon:Xf.Hand,isActive:this.isActive("/jobs/mine"),type:"mine"},{path:"/jobs/all",label:"All active jobs",value:0,icon:Xf.ManCircle,isActive:this.isActive("/jobs/all"),type:"active"},{path:"/jobs/closed",label:"Closed",value:0,icon:Xf.Archive,isActive:this.isActive("/jobs/closed"),type:"closed"}].filter((function(e){return!e.disabled})))||void 0===t?void 0:t.map((function(e){return e.value=n.props.jobsInfo[e.type],Object.assign({},e)}))}},{key:"getJobsMenuTeamsItems",value:function(){var e=this;return this.props.jobsInfo.teams.map((function(t){return{path:"/jobs/team/".concat(t.id),label:t.name,value:t.jobs_count,icon:Xf.People,isActive:e.isActive("/jobs/team/".concat(t.id)),type:"team"}}))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getJobsSecondMenuItems",value:function(){return[{path:"/jobs/noContact",label:"No contact 24 hours",value:this.props.jobsInfo.no_contact_24_hours,isActive:this.isActive("/jobs/noContact"),type:"no_contact_24_hours"},{path:"/jobs/upcomingKPI",label:"Upcoming KPI",value:this.props.jobsInfo.upcoming_kpi,isActive:this.isActive("/jobs/upcomingKPI"),type:"upcoming_kpi"}]}},{key:"getMenuTemplate",value:function(e){var t=this;return Object(a.jsxs)("div",{children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"jobs-sidebar-tooltip"}),this.getJobsMenuMainItems(e).map((function(e){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),Object(a.jsx)(Wm,{item:e,title:"Jobs - ".concat(e.label),refresh:t.refreshJobsInfo},e.path)]})})),this.props.jobsInfo.teams.length?Object(a.jsx)(fk,{children:"Teams"}):"",this.getJobsMenuTeamsItems().map((function(e){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),Object(a.jsx)(Wm,{item:e,title:"Jobs - ".concat(e.label),refresh:t.refreshJobsInfo},e.path)]})})),Object(a.jsx)(fk,{children:"Folders"}),this.getJobsSecondMenuItems().map((function(e){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),Object(a.jsx)(Wm,{item:e,title:"Jobs - ".concat(e.label),refresh:t.refreshJobsInfo},e.path)]})})),Object(a.jsx)(gk,{className:"d-flex flex-row align-items-center",children:e.has(vx.JOBS_CREATE)&&Object(a.jsx)(vk,{name:Xf.Add,"data-tip":"Create new job","data-for":"jobs-sidebar-tooltip",onClick:this.createNewJob})})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.jobsInfo;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs",children:"Jobs"}),Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(nj,{children:r?e.getMenuTemplate(t):Object(a.jsx)(Nv,{size:40})}),Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"".concat(n.url,"/:type/:teamId?"),component:pk}),t.has(vx.JOBS_INBOX_VIEW)?Object(a.jsx)(O.a,{to:"".concat(n.url,"/inbox")}):Object(a.jsx)(O.a,{to:"".concat(n.url,"/mine")})]})]})}})]})}}]),n}(p.PureComponent),_k=Object(sg.compose)(Object(b.b)((function(e){return{jobsInfo:e.jobsInfo}})),O.g)(yk);function wk(){var e=Object(f.a)(["\n  line-height: 0;\n  padding: 13px 26px;\n  background: ",";\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: transparent;\n  }\n  :hover path,\n  :hover circle,\n  :hover line {\n    stroke: ",";\n  }\n"]);return wk=function(){return e},e}function Sk(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  overflow-x: hidden;\n  width: 72px;\n  position: relative;\n"]);return Sk=function(){return e},e}var kk=y.default.nav(Sk(),_.gray1),Ck=Object(y.default)(v.b)(wk(),(function(e){return e.isActive?_.gray2:"transparent"}),(function(e){return e.isActive?_.blue4:_.black0}),_.blue4),Nk=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setTitle()}},{key:"componentDidUpdate",value:function(){this.setTitle()}},{key:"setTitle",value:function(){var e=this.props.items.find((function(e){return e.isActive}));e&&void 0!==e.title&&Rm.status(e.title)}},{key:"render",value:function(){return Object(a.jsxs)(kk,{className:"flex-shrink-0",children:[this.props.items.length>0&&Object(a.jsx)(um.a,{className:"overlapping",id:"sidebar-menu-tooltip",place:"right",effect:"solid"}),this.props.items.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.hint||e.title}),Object(a.jsx)(Ck,{to:e.path,className:"nav-link",isActive:e.isActive,"data-for":"sidebar-menu-tooltip","data-tip":e.hint||"",children:Object(a.jsx)(cm,{name:e.icon})},e.path)]})})),this.props.children]})}}]),n}(p.PureComponent);function Ek(e){var t=e.customReducers||{},n=t.data||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.loadComplete:return n.payload;case e.reset:return null;default:return t}},r=t.loading||function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.load:return!0;case e.loadComplete:case e.error:case e.reset:return!1;default:return t}},a=t.ready||function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.loadComplete:return!0;case e.reset:return!1;default:return t}},o=t.error||function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(n.type){case e.error:return n.payload;case e.loadComplete:case e.reset:return null;default:return t}};return Object(sg.combineReducers)({data:n,loading:r,ready:a,error:o})}function Ak(e){return{reset:function(){return{type:e.reset}},load:function(){return{type:e.load}},loadComplete:function(t){return{type:e.loadComplete,payload:t}},error:function(t){return{type:e.error,payload:t}}}}function Ik(e){return function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null},r=function(e){return[].concat(Object(aj.a)(t),[e])},a=function(e){return[].concat(Object(aj.a)(t),[e])},o=function(e){return t.filter((function(t){return e!==t}))},i=function(e){return t.filter((function(t){return!Tk(e,t)}))},c=function(e){return!!t.includes(e)},s=function(e){return t.filter((function(t){return Tk(e,t)}))};switch(n.type){case e.toggle:return c(n.payload)?o(n.payload):r(n.payload);case e.toggleEntity:return s(n.payload).length?i(n.payload):a(n.payload);case e.massSelect:return Object(aj.a)(n.payload);case e.resetSelected:return[];default:return t}}}function Tk(e,t){var n,r=Object.getOwnPropertyNames(e),a=Object.getOwnPropertyNames(t);if(r.length!==a.length)return!1;for(n=0;n<r.length;n++){var o=r[n];if(e[o]!==t[o])return!1}return!0}function Rk(e){return{toggleEntity:function(t){return{type:e.toggleEntity,payload:t}},toggle:function(t){return{type:e.toggle,payload:t}},massSelect:function(t){return{type:e.massSelect,payload:t}},resetSelected:function(){return{type:e.resetSelected}}}}function Dk(e,t,n,r){var a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:null;return function(){var o=Object(lj.a)(sj.a.mark((function o(i){var c;return sj.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i({type:e,payload:a}),o.prev=1,o.next=4,r();case 4:return c=o.sent,i({type:t,payload:c}),o.abrupt("return",c);case 9:throw o.prev=9,o.t0=o.catch(1),i({type:n,payload:o.t0}),o.t0;case 13:case"end":return o.stop()}}),o,null,[[1,9]])})));return function(e){return o.apply(this,arguments)}}()}function Mk(e,t){return function(n){n({type:e,payload:t})}}var Lk="Steamatic/Contact/LOAD_LIST",Pk="Steamatic/Contact/LOAD_LIST_COMPLETE",Fk="Steamatic/Contact/RESET",Uk="Steamatic/Contact/ERROR",Bk="Steamatic/Contact/UPDATE_CONTACT",Vk="Steamatic/Contact/ADD_CONTACT",Jk="Steamatic/Contact/REMOVE_CONTACT",qk=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Pk:return t.payload;case Fk:return null;case Bk:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.contactId?Object(c.a)(Object(c.a)({},e),t.payload.data):e}))}):null;case Jk:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.contactId}))}):null;case Vk:return e?Object(c.a)(Object(c.a)({},e),{},{data:[t.payload.contact].concat(Object(aj.a)(e.data))}):null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Uk:return t.payload;case Pk:case Fk:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Lk:return!0;case Pk:case Fk:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Pk:return!0;case Fk:return!1;default:return e}}}),zk=function(e){return Dk(Lk,Pk,Uk,(function(){return hO.getContacts(e)}))},Gk=function(e,t){return{type:Bk,payload:{contactId:e,data:t}}},Wk=function(e){return{type:Vk,payload:{contact:e}}},Hk=function(e){return{type:Jk,payload:{contactId:e}}};function Yk(){var e=Object(f.a)(["\n  animation: spin 0.8s infinite linear;\n  height: ","px;\n  width: ","px;\n  vertical-align: top;\n  box-sizing: border-box;\n  border-radius: 50%;\n  border: 2px solid ",";\n  border-right-color: ",";\n  display: inline-block;\n\n  @keyframes spin {\n    to {\n      transform: rotate(1turn);\n    }\n  }\n"]);return Yk=function(){return e},e}var Qk=Object(y.default)(gv(["size"])("div"))(Yk(),(function(e){return e.size}),(function(e){return e.size}),_.gray2,_.gray5);function Kk(){var e=Object(f.a)(["\n  input {\n    background: ",";\n    border: ",";\n    padding-left: ",";\n  }\n"]);return Kk=function(){return e},e}function Zk(){var e=Object(f.a)(["\n  position: absolute;\n  left: 12px;\n  top: 8px;\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n"]);return Zk=function(){return e},e}function Xk(){var e=Object(f.a)(["\n  position: absolute;\n  right: 7px;\n  top: 8px;\n"]);return Xk=function(){return e},e}function $k(){var e=Object(f.a)(["\n  position: relative;\n\n  input {\n    padding-right: 30px;\n  }\n"]);return $k=function(){return e},e}var eC=y.default.div($k()),tC=Object(y.default)(Qk)(Xk()),nC=Object(y.default)(cm)(Zk(),_.gray4),rC=Object(y.default)(gv(["mode","searchIcon"])("div"))(Kk(),(function(e){return"typeGray"===e.mode?_.gray1:void 0}),(function(e){return"typeGray"===e.mode?"0":void 0}),(function(e){return e.searchIcon?"42px":void 0})),aC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:""},e.input=p.createRef(),e.handleSearch=function(t){var n=t.target.value;e.setState({search:n}),e.props.onSearchValueChange(n)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.focusOnMount,n=e.value;t&&this.input.current&&this.input.current.focus(),n&&this.setState({search:n})}},{key:"render",value:function(){var e=this.props,t=e.loading,n=e.placeholder,r=e.mode,o=e.searchIcon,i=e.disabled,c=e.value,s=void 0===c?this.state.search:c;return Object(a.jsxs)(eC,{children:[o&&Object(a.jsx)(nC,{name:Xf.Search,size:18}),Object(a.jsx)(rC,{mode:r,searchIcon:o,children:Object(a.jsx)("input",{type:"text",value:s,onChange:this.handleSearch,className:"form-control",placeholder:n,ref:this.input,disabled:i})}),t&&Object(a.jsx)(tC,{size:18})]})}}]),n}(p.PureComponent),oC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderControl=function(t,n,r,o){return Object(a.jsx)("li",{className:x()("page-item",{active:r,disabled:o}),children:r||o?Object(a.jsx)("span",{className:"page-link",children:t}):Object(a.jsx)("a",{className:"page-link",onClick:function(){return e.props.onChange(n)},children:t})},n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.pagination,n=t.current_page,r=t.last_page,o=0,i=r;if(r>=10){var c=Math.floor(5),s=Math.ceil(5)-1;n<=c?(o=0,i=10):n+s>=r?(o=r-10+1,i=r):(o=n-c,i=n+s)}return Object(a.jsx)("nav",{children:Object(a.jsxs)("ul",{className:"pagination mb-1",children:[this.renderControl("Previous",n-1,!1,1===n),Object(m.range)(o,i).map((function(t){var r=t+1;return e.renderControl(r,r,r===n,!1)})),this.renderControl("Next",n+1,!1,n===r)]})})}}]),n}(p.PureComponent);function iC(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 45px 30px;\n  border-bottom: 1px solid ",";\n  background-color: ",";\n"]);return iC=function(){return e},e}function cC(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n  padding: ",";\n"]);return cC=function(){return e},e}function sC(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n  font-size: ",";\n  text-overflow: ",";\n  text-transform: ",";\n  line-height: ",";\n  overflow: ",";\n  margin: ",";\n  padding: ",";\n  position: relative;\n"]);return sC=function(){return e},e}function lC(){var e=Object(f.a)(["\n  border-radius: 4px;\n  width: ","px;\n  height: ","px;\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  font-weight: ",";\n  font-size: ",";\n  background-position: center;\n  flex-shrink: 0;\n  background: ",";\n  background-size: cover;\n  margin: ",";\n"]);return lC=function(){return e},e}function uC(){var e=Object(f.a)(["\n  font-size: ",";\n  color: ",";\n  cursor: pointer;\n  opacity: ",";\n  margin: ",";\n\n  &:hover {\n    color: ",";\n    ","\n  }\n"]);return uC=function(){return e},e}var dC=y.default.div(uC(),(function(e){return e.fontSize||sm.smaller}),(function(e){return e.color?e.color:_.blue4}),(function(e){return e.disabled?.5:1}),(function(e){return e.margin}),(function(e){return e.colorOnHover?e.colorOnHover:_.blue5}),(function(e){return!e.noDecoration&&"text-decoration: underline;"})),pC=y.default.div(lC(),(function(e){return e.wh}),(function(e){return e.wh}),(function(e){return e.backgroundUrl?_.transparent:_.gray5}),lm.bold,(function(e){return e.fontSize||"1em"}),(function(e){return e.backgroundUrl?"url(".concat(e.backgroundUrl,")"):e.backgroundColor||_.gray1}),(function(e){return e.margin})),hC=y.default.div(sC(),(function(e){return e.color||"unset"}),(function(e){return e.weight||lm.normal}),(function(e){return e.fontSize||"1.1em"}),(function(e){return e.textOverflow||"unset"}),(function(e){return e.textTransform||"none"}),(function(e){return e.lineHeight||"normal"}),(function(e){return e.overflow||"hidden"}),(function(e){return e.margin}),(function(e){return e.padding})),bC=y.default.div(cC(),_.gray4,lm.medium,(function(e){return e.padding||"0 0 0 0"})),fC=y.default.div(iC(),(function(e){return e.borderColor||_.gray2}),(function(e){return e.background||_.gray1})),mC={Link:dC,AvatarSquare:pC,ColoredDiv:hC,ColoredRow:fC,SortedGroupTitle:bC};function jC(){var e=Object(f.a)(["\n  border-radius: 5px;\n  border: 1px solid ",";\n  height: 24px;\n  width: 24px;\n  text-align: center;\n  margin-right: 5px;\n"]);return jC=function(){return e},e}function vC(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n  :hover {\n    color: ",";\n  }\n"]);return vC=function(){return e},e}function OC(){var e=Object(f.a)(["\n  padding: 0 65px 0 5px;\n  list-style: none;\n  text-align: center;\n  position: sticky;\n  top: 0;\n  width: 20px;\n  bottom: 0;\n  overflow: hidden auto;\n  margin-bottom: 0;\n  margin-right: -50px;\n"]);return OC=function(){return e},e}function gC(){var e=Object(f.a)(["\n  word-wrap: break-word;\n  font-weight: ",";\n  border-bottom: 1px solid ",";\n\n  :last-child {\n    border-bottom: 0;\n  }\n\n  a {\n    padding: 15px 0 15px 5px;\n    display: block;\n    color: ",";\n\n    :hover {\n      background: ",";\n      text-decoration: none;\n    }\n  }\n"]);return gC=function(){return e},e}function xC(){var e=Object(f.a)(["\n  margin-bottom: 0;\n  padding: 0 0 15px 15px;\n  list-style: none;\n  flex-grow: 1;\n  max-width: 100%;\n"]);return xC=function(){return e},e}function yC(){var e=Object(f.a)(["\n  padding: 15px 15px;\n"]);return yC=function(){return e},e}function _C(){var e=Object(f.a)(["\n  padding: 15px;\n"]);return _C=function(){return e},e}function wC(){var e=Object(f.a)(["\n  overflow-y: auto;\n  overflow-x: hidden;\n  flex-grow: 1;\n  position: relative;\n"]);return wC=function(){return e},e}function SC(){var e=Object(f.a)(["\n  width: 320px;\n  background: ",";\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n"]);return SC=function(){return e},e}var kC=y.default.div(SC(),_.gray0,_.gray2),CC=y.default.div(wC()),NC=y.default.div(_C()),EC=y.default.div(yC()),AC=y.default.ul(xC()),IC=y.default.li(gC(),(function(e){return e.isActive?lm.bold:lm.normal}),_.gray2,(function(e){return e.isArchived?_.gray3:_.black0}),_.gray1),TC=y.default.ul(OC()),RC=y.default.li(vC(),_.gray4,_.black0),DC=y.default.div(jC(),_.gray2),MC=mC.ColoredDiv,LC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:"",showAll:!1},e.alphabet="ABCDEFGHIJKLMNOPQRSTUVWXYZ".split(""),e.fetchContacts=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}),r=e.props,a=r.category,o=r.filters;+a&&e.props.dispatch(zk(Object(c.a)(Object(c.a)(Object(c.a)({contact_status:e.state.showAll?[Zg.ACTIVE,Zg.LEAD,Zg.QUAlIFIED]:[Zg.ACTIVE],contact_category_id:e.props.category,term:e.state.search},t),n),o)))},e.debouncedFetch=Object(m.debounce)(e.fetchContacts,300),e.handleSearch=function(t){e.setState({search:t}),e.debouncedFetch({term:t})},e.isActive=function(t){var n=Object(O.f)(e.props.location.pathname,{path:"/contacts/:category/edit/:id"});return n&&parseInt(n.params.id,0)===t},e.scrollTo=function(e){return function(){var t=document.querySelector('[data-letter="'.concat(e,'"]'));t&&t.scrollIntoView&&t.scrollIntoView(!0)}},e.onPaginateClick=function(t){e.fetchContacts({page:t})},e.toggleShowAll=function(){e.setState({showAll:!e.state.showAll}),setTimeout(e.fetchContacts,1)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchContacts(),Gy.listen(Ix.ContactChangedStatus,this.fetchContacts)}},{key:"componentWillUnmount",value:function(){Gy.removeListener(Ix.ContactChangedStatus,this.fetchContacts)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.category,r=t.location,a=t.dispatch,o=t.filters;(n!==e.category||r.search!==e.location.search&&-1===r.search.search(/note|meeting/)||!Object(m.isEqual)(o,e.filters))&&(this.setState({search:""}),a({type:Fk}),this.debouncedFetch())}},{key:"render",value:function(){var e=this,t=this.props.contacts,n=t.ready,r=t.loading,o=t.error,i=t.data,c=bj.parse(this.props.location.search,{ignoreQueryPrefix:!0});return Object(a.jsxs)(kC,{className:"d-flex flex-column h-100 flex-shrink-0",children:[(!n||r)&&Object(a.jsx)(Nv,{size:40,color:_.gray0}),Object(a.jsxs)(NC,{className:"d-flex",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(aC,{value:this.state.search,loading:n&&r,onSearchValueChange:this.handleSearch,placeholder:"Search list..."})}),!(null===c||void 0===c?void 0:c.contact_status)&&!(null===c||void 0===c?void 0:c.active_in_days)&&Object(a.jsxs)("div",{className:"ml-1 align-self-center",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"contact_search_all",effect:"solid",place:"top"}),Object(a.jsxs)("div",{className:"form-check","data-tip":"Show contacts with Lead, Qualified and Active status","data-for":"contact_search_all",children:[Object(a.jsx)("input",{className:"form-check-input",type:"checkbox",checked:this.state.showAll,onChange:this.toggleShowAll,id:"show_all_checkbox"}),Object(a.jsx)("label",{className:"form-check-label",htmlFor:"show_all_checkbox",children:"All"})]})]})]}),Object(a.jsx)(CC,{className:"d-flex flex-row",children:o?Object(a.jsxs)(EC,{children:["Error! ",o.error_message]}):i&&0===i.data.length?Object(a.jsx)(EC,{children:"No results found"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(AC,{children:i&&i.data.map((function(t){var n=t.contact_status.status===Zg.INACTIVE,r=hO.getContactName(t);return Object(a.jsx)(IC,{isActive:e.isActive(t.id),isArchived:n,children:Object(a.jsxs)(v.b,{className:"d-flex align-items-center justify-content-between",to:"/contacts/".concat(e.props.category,"/edit/").concat(t.id),"data-letter":r?r[0].toLowerCase():null,children:[Object(a.jsx)("span",{children:r}),n&&Object(a.jsx)(DC,{className:"d-flex align-items-center justify-content-center",children:"A"})]})},t.id)}))}),Object(a.jsx)(TC,{children:e.alphabet.map((function(t){return Object(a.jsx)(RC,{onClick:e.scrollTo(t.toLowerCase()),children:t},t)}))})]})}),i&&i.pagination&&i.pagination.last_page>1&&Object(a.jsx)(MC,{margin:"15px auto 0px auto",overflow:"visible",children:Object(a.jsx)(oC,{pagination:i.pagination,onChange:this.onPaginateClick})})]})}}]),n}(p.PureComponent),PC=Object(sg.compose)(O.g,Object(b.b)((function(e){var t,n;return{contacts:e.contacts,filters:function(e){var t,n,r,a;return{contact_country_id:null===e||void 0===e||null===(t=e.country)||void 0===t?void 0:t.id,contact_state_id:null===e||void 0===e||null===(n=e.state)||void 0===n?void 0:n.id,contact_suburb_id:null===e||void 0===e||null===(r=e.suburb)||void 0===r?void 0:r.id,contact_type:null===e||void 0===e||null===(a=e.contactType)||void 0===a?void 0:a.value}}(null===(t=e.form)||void 0===t||null===(n=t.ContactFilterForm)||void 0===n?void 0:n.values)}})))(LC);function FC(){var e=Object(f.a)(["\n  overflow-y: auto;\n  @media print {\n    width: auto;\n    height: auto !important;\n    overflow-y: visible;\n  }\n"]);return FC=function(){return e},e}var UC=y.default.div(FC());function BC(){var e=Object(f.a)(["\n  padding: 30px;\n  position: relative;  \n"]);return BC=function(){return e},e}var VC=y.default.div(BC()),JC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.className,r=e.children;return Object(a.jsx)(VC,{style:t,className:n,children:r})}}]),n}(p.PureComponent);function qC(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return qC=function(){return e},e}function zC(){var e=Object(f.a)(["\n  list-style: none;\n  padding: 0;\n"]);return zC=function(){return e},e}function GC(){var e=Object(f.a)(["\n  margin: 5px 0 30px 0;\n"]);return GC=function(){return e},e}var WC=y.default.h2(GC()),HC=y.default.ul(zC()),YC=Object(y.default)(gv(["isActive"])("li"))(qC(),(function(e){return e.isActive?lm.bold:lm.normal})),QC=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchCategory()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.category!==e.match.params.category&&this.fetchCategory()}},{key:"fetchCategory",value:function(){this.props.category.fetch(this.props.match.params.category)}},{key:"isActive",value:function(e){return this.props.location.search===e.query}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.category;return!r.ready||r.loading?Object(a.jsx)("div",{className:"d-flex h-100",style:{position:"relative"},children:Object(a.jsx)(Nv,{size:40,color:_.white})}):Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(JC,{className:"d-flex flex-row",children:[Object(a.jsx)("div",{className:"pr-3",children:Object(a.jsx)(cm,{name:hO.getCategoryIcon(r.data.data.type),size:40})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(WC,{children:r.data.data.name}),Object(a.jsxs)(HC,{children:[t.has(vx.CONTACTS_CREATE)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("li",{children:Object(a.jsx)(v.b,{to:"".concat(n.url,"/create/person"),children:"Add New Person"})}),Object(a.jsx)("li",{children:Object(a.jsx)(v.b,{to:"".concat(n.url,"/create/company"),children:"Add New Company"})})]}),Object(a.jsx)("li",{children:"\xa0"}),t.has(vx.CONTACTS_ACTIVE_LAST_DAYS)&&e.filters.map((function(r){return"Archived"===r.name&&t.has(vx.CONTACTS_ARCHIVED),Object(a.jsx)(YC,{isActive:e.isActive(r),children:Object(a.jsx)(v.b,{to:e.isActive(r)?n.url:"".concat(n.url).concat(r.query),children:r.name})},r.query)}))]})]})]})}})}},{key:"filters",get:function(){return[{query:"?active_in_days=30",name:"Active in last 30 days"},{query:"?active_in_days=60",name:"Active in last 60 days"},{query:"?active_in_days=90",name:"Active in last 90 days"},{query:"?contact_status[]=".concat(Zg.INACTIVE),name:"Archived"}]}}]),n}(p.PureComponent),KC=Object(sg.compose)(O.g,oj({category:{fetch:hO.findCategoryById}}),Object(b.b)())(QC),ZC={searchTags:function(e){return ev.get("/v1/tags/search",e)},getAllTags:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/tags");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createNewTag:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/tags",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatedTag:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/tags/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteTag:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/tags/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},XC=function(){var e=!1;return{isCancelled:function(){return e},doCancel:function(){e=!0},asyncHandler:function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n();case 2:if(r=t.sent,e){t.next=7;break}return t.abrupt("return",r);case 7:throw"PromiseIsCancelled";case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}};function $C(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  margin-left: ",";\n  font-size: 0.8em;\n  vertical-align: top;\n  height: 100%;\n  display: inline-block;\n"]);return $C=function(){return e},e}function eN(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  position: relative;\n  padding: 0 5px;\n  line-height: 20px;\n  height: 20px;\n  text-transform: uppercase;\n  background: ",";\n  color: ",";\n  box-shadow: ",";\n  ","\n"]);return eN=function(){return e},e}var tN=Object(y.default)(gv(["color","mode","notStatic"])("span"))(eN(),sm.smaller,lm.normal,(function(e){return e.color?"outlined"===e.mode?_.white:e.color:_.gray0}),(function(e){return e.color?"outlined"===e.mode?e.color:_.white:_.black0}),(function(e){return"outlined"===e.mode?"0 0 0 1px ".concat(e.color," inset"):"unset"}),(function(e){return e.notStatic&&"cursor: pointer;"})),nN=y.default.span($C(),_.white,sm.small),rN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.asyncPromiseHandler=XC(),e.convertColorValue=function(){var t=e.props.tag;switch(typeof t.color){case"number":return _m(t.color);case"string":return t.color;default:return""}},e.asyncHandler=function(t){return Object(lj.a)(sj.a.mark((function n(){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),n.prev=1,n.next=4,e.asyncPromiseHandler.asyncHandler(t);case 4:return n.prev=4,e.asyncPromiseHandler.isCancelled()||e.setState({loading:!1}),n.finish(4);case 7:case"end":return n.stop()}}),n,null,[[1,,4,7]])})))},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.asyncPromiseHandler.doCancel()}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.tag,r=e.className,o=e.color,i=e.onRemove,s=e.mode,l=e.notStatic,u=e.onTagClick,d=Object(rj.a)(e,["children","tag","className","color","onRemove","mode","notStatic","onTagClick"]),p=this.state.loading;return Object(a.jsxs)(tN,Object(c.a)(Object(c.a)({className:x()("badge",r),mode:s,color:o||this.convertColorValue()||_.black0,notStatic:l},d),{},{onClick:u&&this.asyncHandler((function(){return u(n)})),children:[p&&Object(a.jsx)(Nv,{size:20,color:_.white}),n.name,t,i&&Object(a.jsx)(nN,{onClick:this.asyncHandler((function(){return i(n)})),children:"\u2715"})]}))}}]),n}(p.PureComponent);function aN(){var e=Object(f.a)(["\n  position: relative;\n  min-height: 23px;\n  min-width: 50px;\n"]);return aN=function(){return e},e}function oN(){var e=Object(f.a)(["\n  flex-wrap: wrap;\n  line-height: 23px;\n"]);return oN=function(){return e},e}function iN(){var e=Object(f.a)(["\n  vertical-align: sub;\n  margin-right: 12px;\n\n  & path,\n  circle {\n    stroke: ",";\n  }\n"]);return iN=function(){return e},e}function cN(){var e=Object(f.a)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  opacity: ",";\n"]);return cN=function(){return e},e}function sN(){var e=Object(f.a)(["\n  margin-",": 5px;\n"]);return sN=function(){return e},e}var lN=Object(y.default)(gv(["direction"])(rN))(sN(),(function(e){return e.direction?e.direction:"right"})),uN=y.default.div(cN(),_.orange0,(function(e){return e.loading?".2":"1"})),dN=Object(y.default)(cm)(iN(),_.orange2),pN=y.default.div(oN()),hN=y.default.div(aN()),bN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderAlert=function(){var t=e.props,n=t.tags,r=t.disableAlert,o=t.loading;return Object(a.jsx)(a.Fragment,{children:n&&!r&&n.find((function(e){return e.is_alert}))&&Object(a.jsx)(uN,{loading:o,children:Object(a.jsx)(dN,{name:Xf.Alert,size:18})})})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tags,n=e.loading,r=e.direction,o=e.onRemove,i=e.loadingAreaColor,c=e.onClick;return Object(a.jsxs)(hN,{className:"d-flex flex-row",children:[this.renderAlert(),t&&Object(a.jsx)(pN,{children:t.map((function(e){return Object(a.jsx)(lN,{tag:e,notStatic:!o,direction:r,onTagClick:c,onRemove:o},e.id)}))}),n&&Object(a.jsx)(Nv,{size:20,color:i||_.white})]})}}]),n}(p.PureComponent);function fN(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return fN=function(){return e},e}function mN(){var e=Object(f.a)(["\n  min-width: 265px;\n"]);return mN=function(){return e},e}var jN=y.default.div(mN()),vN=y.default.div(fN()),ON=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.handleSearch=function(t){e.setState({search:t},(function(){return e.props.tags.fetch({type:e.props.type,name:e.state.search})}))},e.debouncedSearch=Object(m.debounce)(e.handleSearch,1e3),e.toggleMenu=function(t){return function(){return e.props.disabled?null:(t.isExpanded||e.props.tags.ready||e.props.tags.loading||e.props.tags.fetch({type:e.props.type}),t.toggle())}},e.renderIconTrigger=function(t){var n=e.props.disabled;return function(r){return Object(a.jsx)(J_,{"data-tip":"Tags","data-for":"".concat(e.props.type,"-menu-tooltip"),onClick:e.toggleMenu(r),disabled:n,children:Object(a.jsx)(cm,{name:t})})}},e.renderTagsMenu=function(t){var n=e.props,r=n.tags.data,o=n.onTagClick,i=n.filter,c=r?r.data.filter((function(e){return!i||!i.find((function(t){return t.id===e.id}))})):[];return Object(a.jsxs)(jN,{className:"px-2",children:[Object(a.jsx)(aC,{loading:e.props.tags.loading,placeholder:"Search...",onSearchValueChange:e.debouncedSearch}),!!c.length&&Object(a.jsx)(vN,{children:Object(a.jsx)(bN,{tags:c,onClick:o,disableAlert:!0})})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(K_,{trigger:this.renderIconTrigger(Xf.Tags),menu:this.renderTagsMenu,onOutside:function(){return e.handleSearch("")}})}}]),n}(p.PureComponent),gN=oj({tags:{fetch:ZC.searchTags}})(ON),xN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleStatusClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.props.disabled){t.next=3;break}return t.next=3,e.props.onStatusClick(n);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderMenuItems=function(){var t=e.props,n=t.statuses,r=t.selectedStatus;return n.map((function(t){return{onClick:t.onClick?t.onClick:function(){return e.handleStatusClick(t)},name:t.name,classNames:t.name===r?"active":""}}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.statuses;return Object(a.jsx)(nw,{disabled:t||0===n.length,iconName:Xf.Flag,tooltipId:"".concat(this.props.type,"-menu-tooltip"),tooltipHint:"Status",items:this.renderMenuItems()})}}]),n}(p.PureComponent);function yN(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  opacity: ",";\n  z-index: ",";\n"]);return yN=function(){return e},e}var _N=y.default.div(yN(),(function(e){return e.color||_.white}),(function(e){return e.opacity||.5}),(function(e){return e.zIndex||100})),wN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.opacity,r=e.zIndex;return Object(a.jsx)(_N,{color:t||_.white,opacity:n||.7,zIndex:r})}}]),n}(p.PureComponent);function SN(){var e=Object(f.a)(["\n  width: 40px;\n  height: 40px;\n  border-radius: 4px;\n  background-color: ",";\n  background-image: url(",");\n  background-position: center;\n  background-size: cover;\n  color: ",";\n  font-size: ",";\n  font-weight: ",";\n  margin-left: 10px;\n"]);return SN=function(){return e},e}function kN(){var e=Object(f.a)(["\n  height: 0;\n"]);return kN=function(){return e},e}var CN=y.default.div(kN()),NN=y.default.div(SN(),_.gray1,(function(e){return e.avatar||"***"}),(function(e){return e.avatar?"transparent":_.gray5}),sm.medium,lm.bold),EN=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={onlineUsers:[]},e.joinChannel=function(){Nj().join(e.props.channel).here((function(t){e.setState({onlineUsers:t})})).joining((function(t){e.setState({onlineUsers:[].concat(Object(aj.a)(e.state.onlineUsers),[t])}),um.a.rebuild()})).leaving((function(t){var n=e.state.onlineUsers.filter((function(e){return e.id!==t.id}));e.setState({onlineUsers:n})}))},e.leaveChannel=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.props.channel;Nj().leave(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.joinChannel()}},{key:"componentDidUpdate",value:function(e){this.props.channel!==e.channel&&(this.leaveChannel(e.channel),this.joinChannel())}},{key:"componentWillUnmount",value:function(){this.leaveChannel()}},{key:"render",value:function(){var e=this.props,t=e.channel,n=e.user,r=this.state.onlineUsers,o="tooltip-".concat(t);return Object(a.jsxs)(a.Fragment,{children:[r.length>0&&Object(a.jsx)(um.a,{className:"overlapping",id:o,place:"left",effect:"solid"}),Object(a.jsx)(CN,{className:"d-flex align-items-center",children:r.filter((function(e){return e.id!==n.id})).map((function(e){return Object(a.jsxs)(NN,{"data-for":o,"data-tip":e.full_name,avatar:e.avatar,className:"d-flex align-items-center justify-content-center",children:[e.full_name&&e.full_name.split(" ")[0][0],e.full_name&&e.full_name.split(" ")[1][0]]},e.id)}))})]})}}]),n}(p.PureComponent),AN=Object(sg.compose)(Object(b.b)((function(e){return{user:e.user.me}})))(EN);function IN(){var e=Object(f.a)(["\n  font-weight: bolder;\n"]);return IN=function(){return e},e}function TN(){var e=Object(f.a)(["\n  background-color: white;\n  margin-bottom: 5px;\n  position: relative;\n  min-height: 125px;\n  padding: 30px 20px 20px 50px;  \n  align-items: center;\n  justify-content: flex-start;  \n"]);return TN=function(){return e},e}function RN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return RN=function(){return e},e}function DN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return DN=function(){return e},e}function MN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return MN=function(){return e},e}function LN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return LN=function(){return e},e}function PN(){var e=Object(f.a)(["\n  min-width: 18px;\n  margin: 5px 0px 5px 0px;\n  fill: #9f9f9e;\n  width: 18px;\n  height: 18px;\n  color: #9f9f9f;\n"]);return PN=function(){return e},e}function FN(){var e=Object(f.a)([""]);return FN=function(){return e},e}function UN(){var e=Object(f.a)(["\n  margin: 20;\n"]);return UN=function(){return e},e}function BN(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  flex: 1;\n"]);return BN=function(){return e},e}function VN(){var e=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  border-top: 1px solid ",";\n"]);return VN=function(){return e},e}function JN(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 30px;\n  width: fit-content;\n"]);return JN=function(){return e},e}function qN(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 30px;\n  width: fit-content;\n"]);return qN=function(){return e},e}function zN(){var e=Object(f.a)(["\n  margin-top: 0%;\n  margin-left: 0%;\n"]);return zN=function(){return e},e}function GN(){var e=Object(f.a)(["\n  background-color: ",";\n  margin-left: 5%;\n  margin-right: 5%;\n  border-left: 1px solid lightgray;\n  border-right: 1px solid lightgray;\n  display: flex;\n  flex-direction: column;\n  // height: 100%;\n  min-height: 100%;\n"]);return GN=function(){return e},e}function WN(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return WN=function(){return e},e}function HN(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return HN=function(){return e},e}function YN(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n"]);return YN=function(){return e},e}function QN(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  margin-right: 10px;\n  align-self: center;\n"]);return QN=function(){return e},e}var KN=Object(y.default)(rN)(QN(),sm.normal),ZN=(y.default.div(YN(),lm.medium,sm.medium,_.yellow),y.default.div(HN())),XN=y.default.div(WN()),$N=y.default.div(GN(),_.white),eE=y.default.div(zN()),tE=y.default.h2(qN()),nE=y.default.h3(JN()),rE=y.default.div(VN(),_.gray2),aE=(y.default.h4(BN()),y.default.div(UN())),oE=y.default.div(FN()),iE=Object(y.default)(cm)(PN()),cE=Object(y.default)(cm)(LN()),sE=Object(y.default)(cm)(MN()),lE=(Object(y.default)(cm)(DN()),Object(y.default)(cm)(RN())),uE=y.default.div(TN()),dE=y.default.label(IN());function pE(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  font-weight: 400;\n  position: relative;\n  padding: 0 5px;\n  text-transform: uppercase;\n  background: white;\n  color: ",";\n  box-shadow: unset;\n  position: absolute;\n  right: 30px;\n  border-radius: 0.25rem;\n"]);return pE=function(){return e},e}var hE=y.default.span(pE(),sm.normal,_.gray4),bE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={lastStatus:void 0},e.onTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.contact.id){t.next=5;break}return t.next=3,hO.assignTag(e.props.contact.id,n.id);case 3:return t.next=5,e.props.onTagsUpdate();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStatusClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.contact,o=r.onUpdate,!a.id){t.next=15;break}return t.prev=2,t.next=5,hO.changeContactStatus(a.id,n.type);case 5:return t.next=7,Object(dw.delay)(100);case 7:e.setState({lastStatus:n.type}),o(),Gy.emit(Ix.ContactChangedStatus),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),Oj(uj.Danger,"This status can't be applied");case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.typeCheckers={instanceOfPerson:function(e){return e.hasOwnProperty("first_name")&&e.hasOwnProperty("last_name")},instanceOfCompany:function(e){return e.hasOwnProperty("abn")&&e.hasOwnProperty("legal_name")}},e.duplicateContact=function(){var t=e.props.contact;return t?e.props.history.push({pathname:"/contacts/".concat(t.contact_category_id,"/create/").concat(t.contact_type===wv.person?"person":"company"),state:{contact:Object(c.a)(Object(c.a)({},t),{},{id:void 0})}}):Promise.reject(!0)},e.deleteContact=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.contact,a=n.dispatch,!r.id){t.next=10;break}return t.next=4,a(iw("Confirm","Delete contact?"));case 4:if(!t.sent){t.next=9;break}return t.abrupt("return",hO.deleteContact(+r.id).then((function(){e.props.dispatch(Hk(r.id)),e.props.match.params.id&&e.props.history.replace("/contacts/".concat(e.props.match.params.category))})));case 9:case 10:return t.abrupt("return",Promise.resolve());case 11:case"end":return t.stop()}}),t)}))),e.getDropdownMenuItems=function(t){return[{name:"Duplicate",visible:t.has(vx.CONTACTS_CREATE),onClick:e.duplicateContact},{type:"divider",visible:t.has(vx.CONTACTS_CREATE)&&t.has(vx.CONTACTS_DELETE)},{name:"Delete",visible:t.has(vx.CONTACTS_DELETE),onClick:e.deleteContact}].filter((function(e){return e.visible}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){um.a.rebuild()}},{key:"componentDidMount",value:function(){var e=this,t=this.props.contact;t.id&&hO.getContactById(t.id).then((function(t){"contact_status"in t.data&&e.setState({lastStatus:t.data.contact_status.status})}))}},{key:"render",value:function(){var e=this,t=(this.props.statuses.data||[]).map((function(e,t){return{id:t,name:ux[e],type:e}})),n=this.props,r=n.newContact,o=n.contact,i=n.contactTags;return Object(a.jsx)(Cx.Consumer,{children:function(n){var c,s,l=e.getDropdownMenuItems(n);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"contact-menu-tooltip",effect:"solid"}),Object(a.jsxs)(q_,{className:"d-flex align-items-center justify-content-between",children:[(!o||r)&&Object(a.jsx)(wN,{opacity:.9}),Object(a.jsxs)("div",{children:[Object(a.jsx)(xN,{loading:e.props.statuses.loading,statuses:t,type:"contact",onStatusClick:e.onStatusClick,selectedStatus:ux[e.state.lastStatus||(null===(c=o.contact_status)||void 0===c?void 0:c.status)||""],disabled:!n.has(vx.CONTACTS_UPDATE)}),n.has(vx.CONTACTS_UPDATE)&&n.has(vx.NOTES_CREATE)&&Object(a.jsx)(J_,{"data-tip":"Add note","data-for":"contact-menu-tooltip",children:Object(a.jsx)(cm,{name:Xf.AddNote,onClick:e.props.onNoteAdd})}),n.has(vx.MEETINGS_CREATE)&&Object(a.jsx)(J_,{"data-tip":"Add meeting","data-for":"contact-menu-tooltip",children:Object(a.jsx)(cm,{name:Xf.Calendar,onClick:e.props.onMeetingAdd})}),n.has(vx.TAGS_VIEW)&&n.has(vx.CONTACTS_UPDATE)&&Object(a.jsx)(gN,{type:"contact",filter:i,onTagClick:e.onTagClick}),l.length>0&&Object(a.jsx)(nw,{items:l})]}),Object(a.jsx)(hE,{children:Object(a.jsx)(KN,{tag:{name:ux[e.state.lastStatus||(null===(s=o.contact_status)||void 0===s?void 0:s.status)||""],color:_.gray4}})}),Object(a.jsx)(AN,{channel:"online-contact-".concat(o.id)})]})]})}})}}]),n}(p.PureComponent),fE=Object(sg.compose)(O.g,Object(b.b)((function(e){return{statuses:e.contactStatuses.statuses}})))(bE),mE=(n(875),n(575)),jE=n.n(mE),vE=n(410),OE=n.n(vE),gE=n(603);function xE(){var e=Object(f.a)(["\n  margin: 8px;\n  cursor: pointer;\n\n  path {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return xE=function(){return e},e}var yE=Object(y.default)(gv(["isActive"])(cm))(xE(),(function(e){return e.isActive?_.black0:_.gray5}),_.black0),_E=function(e){return Object(a.jsx)(yE,Object(c.a)(Object(c.a)({},e),{},{size:18}))};function wE(){var e=Object(f.a)(["\n  padding: 0 1.5rem;\n  text-align: right;\n\n  a {\n    color: ","!important;\n    font-size: ",";\n    cursor: pointer;\n  }\n"]);return wE=function(){return e},e}y.default.div(wE(),_.blue4,sm.smaller);var SE,kE=[{name:"Job Scheduled",content:"<strong>Job Scheduled</strong><br/><br/>Some content"},{name:"Unable to contact you",content:"<strong>Unable to contact you!!!</strong>"},{name:"Welcome",content:"<strong>Welcome</strong><ul><li>Important Note</li><li><u>Something else</u></li></ul><div><i>Sincerely yours,<br/>John Smith</i></div>"}],CE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).selectTemplate=function(t,n){e.props.onSelect(t),n.close()},e.renderTemplatesTrigger=function(t){return Object(a.jsx)(_E,{isActive:!1,name:Xf.Comment,onClick:t.toggle,"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.renderTemplatesMenu=function(t){return Object(a.jsx)(a.Fragment,{children:kE.map((function(n,r){return Object(a.jsx)("a",{className:"dropdown-item",onClick:function(){return e.selectTemplate(n,t)},children:n.name},r)}))})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(K_,{trigger:this.renderTemplatesTrigger,menu:this.renderTemplatesMenu})}}]),n}(p.PureComponent),NE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/users/".concat(t),n,r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),EE=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.length>0&&void 0!==r[0]?r[0]:{per_page:35},n=r.length>1?r[1]:void 0,e.next=4,ev.get("/v1/users",t,n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),AE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/users/all",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),IE=function(e,t){return ev.get("/v1/users/".concat(e,"/roles"),null,t)},TE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/users/search/mentions",t,n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RE=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=new FormData).append("file",t),e.next=4,ev.postFormData("/v1/me/avatar",n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DE=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/me/notifications?per_page=10");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),ME=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/me/notifications");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),LE=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/me/notifications/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),PE=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/roles",null,t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),FE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]&&a[2],e.abrupt("return",ev.post("/v1/locations/".concat(n,"/users/").concat(t),{primary:r}));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),UE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/locations/".concat(n,"/users/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BE=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/me/locations",{per_page:_g.Huge});case 2:return t=e.sent,e.abrupt("return",Object(m.orderBy)(t.data,["name"],["asc"]));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),VE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/users/".concat(t,"/roles"),{roles:n},r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),JE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/users/".concat(t,"/roles"),{roles:n},r));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qE=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/locations/".concat(t,"/users"),null,n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zE={getUsersWithControl:Wj(EE,2),getSearchedUsers:Wj(TE,2),getUserWithControl:Wj(NE,3),getRolesWithControl:Wj(PE,1),getUserRoleWithControl:Wj(IE,2),removeRoleFromUserWC:Wj(JE,3),addRoleToUserWC:Wj(VE,3),searchUsers:TE,getUser:NE,getUserList:EE,getUserRoles:IE,getRoles:PE,addRoleToUser:VE,updateUserData:function(e,t){return ev.patch("/v1/users/".concat(e),t)},chainLocationToUser:FE,unchainLocationToUser:UE,setAvatar:RE,deleteUser:function(e){return ev.remove("/v1/users/".concat(e))},getMyUnreadNotifications:DE,removeNotification:LE,removeAllNotifications:ME,getLocations:BE,getUsersByLocation:qE,AddNewUser:function(e){return ev.post("/v1/users",e)},getWorkerList:AE};!function(e){e[e.uploadFromComputer=0]="uploadFromComputer"}(SE||(SE={}));var GE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderTemplatesTrigger=function(){return Object(a.jsx)(_E,{isActive:!1,name:Xf.Attachment,"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.renderOnlyIcon=function(){var t=e.props.onSelect;return Object(a.jsx)(_E,{isActive:!1,name:Xf.Attachment,onClick:t,"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.uploadingMenuItems=[{name:"Invoice",disabled:!0},{name:"Purchase Order",disabled:!0},{type:"divider"},{name:"Assessment Reports",disabled:!0},{name:"Photos",disabled:!0},{type:"divider"},{name:"From computer",onClick:e.props.onSelect}],e}return Object(l.a)(n,[{key:"render",value:function(){return"icon"===this.props.mode?this.renderOnlyIcon():Object(a.jsx)(nw,{trigger:this.renderTemplatesTrigger,items:this.uploadingMenuItems})}}]),n}(p.PureComponent);function WE(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: relative;\n"]);return WE=function(){return e},e}function HE(){var e=Object(f.a)(["\n  display: inline-block;\n  margin-left: -15px;\n  min-width: 120px;\n"]);return HE=function(){return e},e}function YE(){var e=Object(f.a)(["\n  display: inline-block;\n  padding-left: 5px;\n  font-weight: ",";\n  color: ",";\n"]);return YE=function(){return e},e}var QE=y.default.div(YE(),lm.normal,_.gray4),KE=y.default.div(HE()),ZE=y.default.div(WE()),XE=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.handleClick=function(){e.props.onClick&&(e.setState({loading:!0}),e.props.onClick().finally((function(){return e.setState({loading:!1})})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.firstName,n=e.lastName,r=e.className,o=e.locations,i=Object(rj.a)(e,["firstName","lastName","className","locations"]),s=this.state.loading;return Object(a.jsxs)(ZE,{children:[Object(a.jsxs)("div",Object(c.a)(Object(c.a)({className:x()("dropdown-item",r),onClick:this.handleClick},i),{},{children:[Object(a.jsxs)(KE,{children:[Object(a.jsx)("strong",{children:t})," ",n]}),o&&Object(a.jsx)(QE,{children:o})]})),s&&Object(a.jsx)(Nv,{size:20,color:_.white})]})}}]),n}(p.PureComponent);function $E(){var e=Object(f.a)(["\n  color: ",";\n"]);return $E=function(){return e},e}function eA(){var e=Object(f.a)(["\n  padding-bottom: 10px;\n"]);return eA=function(){return e},e}function tA(){var e=Object(f.a)(["\n  width: 265px;\n"]);return tA=function(){return e},e}var nA=y.default.div(tA()),rA=y.default.div(eA()),aA=y.default.span($E(),_.gray3),oA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleSearch=function(t){t&&t.length>1&&e.props.onChangeSearch(t)},e.debouncedSearch=Object(m.debounce)(e.handleSearch,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.mentionsUsers,r=e.onSelectMentionsUser;return Object(a.jsxs)(nA,{children:[Object(a.jsx)(rA,{className:"px-2",children:Object(a.jsx)(aC,{loading:t||!1,onSearchValueChange:this.debouncedSearch,placeholder:"Search...",focusOnMount:!0})}),!(n&&n.length>0)&&Object(a.jsx)(aA,{className:"px-2",children:"No users found"}),n&&n.map((function(e){return Object(a.jsx)(XE,{firstName:e.first_name,lastName:e.last_name,locations:e.locations&&e.locations.join(" "),onClick:function(){return r(e)}},e.id)}))]})}}]),n}(p.PureComponent),iA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).menuProps=void 0,e.clearAndToggle=function(t){t.isExpanded||e.props.onClearSearch(),t.toggle()},e.renderTrigger=function(t){return Object(a.jsx)(_E,{isActive:!1,name:Xf.Mention,onClick:function(){return e.clearAndToggle(t)},"data-tip":e.props["data-tip"],"data-for":e.props["data-for"]})},e.onSelect=function(t){return e.props.onSelect(t),e.menuProps&&e.menuProps.close(),Promise.resolve()},e.renderUsersMenu=function(t){e.menuProps=t;var n=e.props,r=n.loading,o=n.users;return Object(a.jsx)(oA,{loading:r,mentionsUsers:o,onSelectMentionsUser:e.onSelect,onChangeSearch:e.props.onChangeSearch,onClearSearch:e.props.onClearSearch})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(K_,{trigger:this.renderTrigger,menu:this.renderUsersMenu})}}]),n}(p.PureComponent);function cA(){var e=Object(f.a)(["\n  float: right;\n  padding-left: 5px;\n  font-weight: ",";\n  color: ",";\n"]);return cA=function(){return e},e}function sA(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  min-width: 220px;\n  padding: 5px 15px;\n"]);return sA=function(){return e},e}function lA(){var e=Object(f.a)(["\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 5px;\n  height: 45px;\n"]);return lA=function(){return e},e}function uA(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n\n  span > span > span {\n    color: ",";\n    background: transparent;\n    text-decoration: underline;\n    text-decoration-style: dashed;\n  }\n\n  ."," > span > span {\n    color: "," !important;\n    background: transparent !important;\n    text-decoration: none !important;\n  }\n\n  ."," {\n    z-index: 2;\n    position: absolute;\n    padding: 5px;\n    border: 1px solid ",";\n    border-radius: 4px;\n    margin-top: 0.4em;\n    background: ",";\n  }\n\n  ."," {\n    box-shadow: none;\n    padding-top: 5px;\n    cursor: pointer;\n  }\n\n  ."," {\n    background: ",";\n  }\n\n  .DraftEditor-root {\n    position: relative;\n  }\n\n  .DraftEditor-editorContainer {\n    padding: ","px;\n    min-height: 120px;\n    max-height: 500px;\n    overflow: auto;\n    z-index: 1;\n    position: relative;\n  }\n\n  .public-DraftEditorPlaceholder-root {\n    color: ",";\n    position: absolute;\n    top: ","px;\n    left: ","px;\n  }\n"]);return uA=function(){return e},e}var dA={mention:"MENTIONS_THEME_MENTION_CLASS",mentionSuggestions:"MENTIONS_THEME_MENTION_SUGGESTIONS_CLASS",mentionSuggestionsEntryContainer:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_CONTAINER",mentionSuggestionsEntry:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_CLASS",mentionSuggestionsEntryFocused:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_FOCUSED_CLASS",mentionSuggestionsEntryActive:"MENTIONS_THEME_MENTION_SUGGESTIONS_ENTRY_CLASS"},pA=y.default.div(uA(),_.gray2,_.red1,dA.mention,_.green2,dA.mentionSuggestions,_.gray2,_.white,dA.mentionSuggestionsEntry,dA.mentionSuggestionsEntryFocused,_.gray0,10,_.gray4,10,10),hA=y.default.div(lA(),(function(e){return e.color}),_.gray2),bA=y.default.div(sA(),sm.normal,lm.normal),fA=y.default.div(cA(),lm.normal,_.gray4),mA=function(e){var t=e.mention,n=(e.searchValue,e.isFocused,Object(rj.a)(e,["mention","searchValue","isFocused"]));return Object(a.jsxs)(bA,Object(c.a)(Object(c.a)({},n),{},{children:[Object(a.jsx)("strong",{children:t.first_name})," ",t.last_name,Object(a.jsx)(fA,{children:t.locations&&t.locations.join(" ")})]}))},jA=[{icon:Xf.TextBold,style:"BOLD",title:"Bold"},{icon:Xf.TextItalic,style:"ITALIC",title:"Italic"},{icon:Xf.TextUnderlined,style:"UNDERLINE",title:"Underline"}],vA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).editor=p.createRef(),e.upload=p.createRef(),e.initMentionPlugin=function(){return OE()({mentionPrefix:"@",theme:dA})},e.mentionPlugin=e.initMentionPlugin(),e.state={editorState:Ev.EditorState.createWithContent(Object(Av.a)(e.props.initValue||"")),suggestions:[]},e.onChange=function(t){e.setState({editorState:t});var n=e.getHTML();e.props.value!==n&&e.props.onChange&&e.props.onChange(n)},e.onChangeFile=function(t){var n=e.props.postDocument;n&&n(t.target.files)},e.getHTML=function(){var t=e.state.editorState.getCurrentContent();return Object(gE.a)({entityToHTML:function(e,t){return"mention"===e.type?"[USER_ID:".concat(e.data.mention.id,"]"):t}})(t)},e.onSearchMentionChange=function(){var t=Object(lj.a)(sj.a.mark((function t(r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r.value.length>=n.mentionLengthForSearch)){t.next=7;break}return t.next=3,e.getSuggestions(r.value);case 3:a=t.sent,e.setState({suggestions:Object(vE.defaultSuggestionsFilter)(r.value,a)}),t.next=8;break;case 7:0===r.value.length&&e.clearMentionsState();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAddMention=function(t){e.clearMentionsState(),e.onClearUserSearch()},e.onClearUserSearch=function(){e.props.users.reset()},e.clearMentionsState=function(){e.setState({suggestions:[]})},e.fetchDebounced=Object(m.debounce)(function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.users.fetch(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),350,{leading:!0}),e.getSuggestions=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchDebounced(n);case 2:return r=e.props.users.data,t.abrupt("return",r&&r.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:"".concat(e.first_name," ").concat(e.last_name)})}))||[]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleInlineStyle=function(t){e.focusEditor(),setTimeout((function(){e.onChange(Ev.RichUtils.toggleInlineStyle(e.state.editorState,t))}),0)},e.toggleBulletList=function(){e.focusEditor(),setTimeout((function(){e.onChange(Ev.RichUtils.toggleBlockType(e.state.editorState,"unordered-list-item"))}),0)},e.isActive=function(t){return e.state.editorState.getCurrentInlineStyle().has(t)},e.isActiveBulletList=function(){var t=e.state.editorState,n=t.getSelection();return"unordered-list-item"===t.getCurrentContent().getBlockForKey(n.getStartKey()).getType()},e.useTemplate=function(t){e.onChange(Ev.EditorState.createWithContent(Object(Av.a)(t.content)))},e.openAttachmentDialog=function(){var t=e.upload.current;t&&t.click()},e.onSelectMentionUser=function(t){var n=e.state.editorState,r=n.getCurrentContent(),a=n.getSelection(),o=r.createEntity("mention","SEGMENTED",{mention:t}),i=o.getLastCreatedEntityKey(),c=Ev.Modifier.replaceText(o,a,"@".concat(t.full_name),void 0,i);e.setState({editorState:Ev.EditorState.push(n,c,"apply-entity")})},e.onDrop=function(t){var n=e.props,r=n.postDocument,a=n.disableAttachments;t.preventDefault(),t.dataTransfer.files.length>0&&r&&!a&&r(t.dataTransfer.files)},e.onDragOver=function(t){t.preventDefault(),e.focusEditor()},e.onClick=function(t){e.focusEditor()},e.setExternalDisabledCondition=function(){var t=e.props.externalDisableListener;t&&t(!e.state.editorState.getCurrentContent().getPlainText())},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setExternalDisabledCondition()}},{key:"componentDidUpdate",value:function(e){this.setExternalDisabledCondition(),this.props.initValue!==e.initValue&&this.setState({editorState:Ev.EditorState.createWithContent(Object(Av.a)(this.props.initValue||"")),suggestions:[]})}},{key:"focusEditor",value:function(){this.editor.current&&this.editor.current.focus()}},{key:"render",value:function(){var e=this,t=this.props,n=t.disableAttachments,r=t.disableMentionControl,o=t.disableTemplatesControl,i=t.disableTextFormatting,c=t.attachmentMode,s=t.hideCheckIcon,l=this.isActiveBulletList(),u=this.mentionPlugin.MentionSuggestions,d=[this.mentionPlugin],p=this.props.users.data&&this.props.users.data.data,h=[];return this.state.suggestions.forEach((function(e){var t=!0;h.forEach((function(n){n.email===e.email&&(t=!1)})),t&&h.push(e)})),Object(a.jsxs)(pA,{onDragOver:this.onDragOver,onDrop:this.onDrop,onClick:this.onClick,children:[Object(a.jsxs)(hA,{color:this.props.color,className:"d-flex justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"editor-menu-tooltip",effect:"solid",place:"top"},Date.now()),!i&&jA.map((function(t){return Object(a.jsx)(_E,{isActive:e.isActive(t.style),name:t.icon,onClick:function(){return e.toggleInlineStyle(t.style)},"data-tip":t.title,"data-for":"editor-menu-tooltip"},t.style)})),!i&&Object(a.jsx)(_E,{isActive:l,name:Xf.BulletList,onClick:this.toggleBulletList,"data-tip":"Bullet list","data-for":"editor-menu-tooltip"}),!n&&Object(a.jsx)(GE,{onSelect:this.openAttachmentDialog,mode:c||"","data-tip":"Files & images","data-for":"editor-menu-tooltip"}),!r&&Object(a.jsx)(iA,{loading:this.props.users.loading,onSelect:this.onSelectMentionUser,onChangeSearch:this.getSuggestions,onClearSearch:this.onClearUserSearch,users:p,"data-tip":"Mention people","data-for":"editor-menu-tooltip"}),!o&&Object(a.jsx)(CE,{onSelect:this.useTemplate,"data-tip":"Templates","data-for":"editor-menu-tooltip"})]}),Object(a.jsxs)("div",{children:[this.props.onSave&&!s&&Object(a.jsx)(_E,{isActive:!1,name:Xf.Check,onClick:this.props.onSave,"data-tip":"Save draft","data-for":"editor-menu-tooltip"}),this.props.onCancel&&Object(a.jsx)(_E,{isActive:!1,name:Xf.Trash,onClick:this.props.onCancel,"data-tip":"Trash","data-for":"editor-menu-tooltip"})]})]}),Object(a.jsx)("div",{style:{cursor:"text"},children:Object(a.jsx)(jE.a,{ref:this.editor,placeholder:l?"":this.props.placeholder,editorState:this.state.editorState,onChange:this.onChange,plugins:d,spellCheck:!0})}),Object(a.jsx)(u,{onSearchChange:this.onSearchMentionChange,onAddMention:this.onAddMention,suggestions:h,entryComponent:mA}),Object(a.jsx)("input",{id:"fileUpload",type:"file",ref:this.upload,onChange:this.onChangeFile,style:{display:"none"}}),this.props.children?Object(a.jsx)("div",{style:{padding:"10px"},children:this.props.children}):null]})}}],[{key:"getDerivedStateFromProps",value:function(e,t){return""===e.value?{editorState:Ev.EditorState.createWithContent(Object(Av.a)(""))}:null}}]),n}(p.Component);vA.mentionLengthForSearch=3;var OA=Object(sg.compose)(Object(b.b)(),oj({users:{fetch:function(e){return zE.searchUsers({name:e})}}}))(vA),gA=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/notes"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),xA=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/notes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yA=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/notes",Object(c.a)({note:t},n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),_A=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/notes/".concat(t),Object(c.a)({note:n},r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),wA=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/notes/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),SA=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(n,"/notes/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),kA=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/contacts/".concat(n,"/notes/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),CA=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),NA=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/messages"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),EA=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),AA=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/messages",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),IA=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/messages/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),TA=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/messages/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RA={getJobNotes:gA,addNoteToJob:SA,detachNoteFromJob:CA,getNote:xA,postNote:yA,updateNote:_A,removeNote:wA,getJobMessages:NA,addMessageToJob:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(n,"/messages/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeMessageFromJob:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(n,"/messages/").concat(t),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sendJobMessage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(n,"/messages/").concat(t,"/send"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getMessage:EA,postMessage:AA,updateMessage:IA,removeMessage:TA,getJobNotesAndMessages:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/notes-and-messages"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addNoteToContact:kA,getContactNotesAndMeetings:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/".concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function DA(){var e=Object(f.a)(["\n  border: 1px solid ",";\n"]);return DA=function(){return e},e}function MA(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  padding: 0 25px;\n  border: 0;\n  border-radius: 0;\n  height: 100%;\n  cursor: pointer;\n"]);return MA=function(){return e},e}function LA(){var e=Object(f.a)(["\n  background: ",";\n  text-align: right;\n  height: 45px;\n"]);return LA=function(){return e},e}function PA(){var e=Object(f.a)(["\n  position: relative;\n"]);return PA=function(){return e},e}var FA,UA=y.default.div(PA()),BA=y.default.div(LA(),_.orange0),VA=y.default.button(MA(),_.orange1,_.white),JA=y.default.div(DA(),_.gray2),qA=mC.ColoredDiv,zA=/\B@[a-z0-9_-]+/gi,GA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e,r){var a;Object(s.a)(this,n),(a=t.call(this,e,r)).state={loading:!1,noteText:"",documents:[],disabled:!1},a.existedDocumentIds=[],a.handleAsyncAction=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.setState({loading:!0}),e.prev=1,e.next=4,t();case 4:return e.prev=4,a.setState({loading:!1}),e.finish(4);case 7:case"end":return e.stop()}}),e,null,[[1,,4,7]])})));return function(t){return e.apply(this,arguments)}}(),a.handleNoteChange=function(e){a.setState({noteText:e})},a.isContainInvalidMentions=function(){return!!a.state.noteText.match(zA)},a.postNoteDocument=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t||!t.length){e.next=5;break}return e.next=3,Fw.postDocument(t[0]);case 3:n=e.sent,a.setState({documents:[].concat(Object(aj.a)(a.state.documents),[n.data])});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.removeDocument=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.setState({documents:a.state.documents.filter((function(e){return t!==e.id}))});case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.onSave=Object(lj.a)(sj.a.mark((function e(){var t,n,r,o,i,c,s,l,u,d,p,h,b;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=a.props,n=t.afterSave,r=t.edit,o=t.note,i=t.beforeSave,c=t.saveWith,s=a.state,l=s.noteText,u=s.documents,!i){e.next=5;break}return e.next=5,i();case 5:if(!r){e.next=11;break}return e.next=8,RA.updateNote(o.id,l,c);case 8:e.t0=e.sent,e.next=14;break;case 11:return e.next=13,RA.postNote(l,c);case 13:e.t0=e.sent;case 14:return d=e.t0,p=u.filter((function(e){return!a.existedDocumentIds.includes(e.id)})).map((function(e){return Fw.attachDocumentToNote(d.data.id,e.id)})),h=u.map((function(e){return e.id})),b=a.existedDocumentIds.filter((function(e){return!h.includes(e)})).map((function(e){return Fw.detachDocumentFromNote(d.data.id,e)})),e.next=20,Promise.all([Promise.all([p]),Promise.all([b])]);case 20:setTimeout((function(){n&&n(d.data)}),10);case 21:case"end":return e.stop()}}),e)}))),a.setDisableSate=function(e){a.setState({disabled:e})};var o=e.edit,i=e.note;return o&&i?(a.setState({noteText:i.note}),a.setState({documents:i.documents}),a.existedDocumentIds=i.documents.map((function(e){return e.id}))):a.existedDocumentIds=[],a}return Object(l.a)(n,[{key:"componentWillMount",value:function(){var e=this.props,t=e.edit,n=e.note;t&&n?(this.setState({noteText:n.note}),this.setState({documents:n.documents}),this.existedDocumentIds=n.documents.map((function(e){return e.id}))):this.existedDocumentIds=[]}},{key:"componentDidUpdate",value:function(e){var t=this.props.triggerToSave;t&&t!==e.triggerToSave&&this.handleAsyncAction(this.onSave)}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,r=t.color,o=t.buttonPlaceholder,i=t.loadingColor,s=t.hideBottom,l=t.initValue,u=t.attachmentMode,d=t.externalDisableListener,p=this.state,h=p.loading,b=p.noteText,f=p.documents,m=p.disabled;return Object(a.jsxs)(UA,{children:[h&&Object(a.jsx)(Nv,{size:40,color:i||_.white,zIndex:2}),Object(a.jsxs)(JA,{children:[Object(a.jsx)(OA,Object(c.a)(Object(c.a)({},this.props),{},{value:b,initValue:l,onChange:this.handleNoteChange,postDocument:function(t){return e.handleAsyncAction((function(){return e.postNoteDocument(t)}))},placeholder:n||"Write your note here...",color:r||_.orange0,externalDisableListener:d||this.setDisableSate,attachmentMode:u})),!s&&Object(a.jsx)(BA,{children:Object(a.jsx)(VA,{onClick:function(){return e.handleAsyncAction(e.onSave)},disabled:m||this.isContainInvalidMentions(),children:o||"Add Note"})})]}),f&&f.length>0&&Object(a.jsx)(qA,{margin:"15px 0 0 0",children:Object(a.jsx)(Yw,{documents:f,onRemove:this.removeDocument})})]})}}]),n}(p.PureComponent),WA=Object(b.b)()(GA),HA=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.disableAttachments,n=e.disableMentionControl,r=e.disableTemplatesControl,o=e.disableTextFormatting,i=e.attachmentMode,c=e.hideCheckIcon,s=e.meta,l=s.touched&&s.error;return Object(a.jsx)(OA,{color:this.props.color,postDocument:this.props.postDocument,onChange:this.props.input.onChange,value:this.props.input.value,initValue:this.props.initialValue,placeholder:this.props.placeholder,onCancel:this.props.onCancel,onSave:this.props.onSave,disableAttachments:t,disableMentionControl:n,disableTemplatesControl:r,disableTextFormatting:o,attachmentMode:i,hideCheckIcon:c,children:l&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:s.error})})}}]),n}(p.PureComponent);function YA(){var e=Object(f.a)(["\n  order: ",";\n  margin-left: ",";\n  margin-top: ",";\n"]);return YA=function(){return e},e}function QA(){var e=Object(f.a)(["\n  position: absolute;\n"]);return QA=function(){return e},e}function KA(){var e=Object(f.a)(["\n  color: ",";\n  flex-direction: ",";\n  align-items: ",";\n"]);return KA=function(){return e},e}function ZA(){var e=Object(f.a)(["\n  border: ",";\n  border-radius: 0.25em;\n  display: block;\n  background: ",";\n  position: relative;\n  margin-bottom: 0;\n  order: ",";\n\n  & > input {\n    opacity: 0 !important;\n    height: ","px;\n    width: ","px;\n  }\n\n  path {\n    stroke: ",";\n    fill: ",";\n    stroke: ",";\n    fill: ",";\n  }\n"]);return ZA=function(){return e},e}!function(e){e.horizontal="horizontal",e.verical="vertical"}(FA||(FA={}));var XA=Object(y.default)(gv(["size","checked","color","background","checkedBackground","hasBorder","disabled"])("div"))(ZA(),(function(e){return e.hasBorder?"1px solid ".concat(e.color):"1px solid ".concat(_.gray2," !important")}),(function(e){return e.checked&&!e.disabled?e.checkedBackground:e.background}),1,(function(e){return e.size}),(function(e){return e.size}),_.white,_.white,(function(e){return e.color}),(function(e){return e.color})),$A=y.default.label(KA(),(function(e){return e.color||_.gray4}),(function(e){return e.isHorizontal?"row":"column"}),(function(e){return e.isHorizontal&&"center"})),eI=Object(y.default)(cm)(QA()),tI=y.default.div(YA(),(function(e){return e.isHorizontal?2:0}),(function(e){return e.isHorizontal&&"14px"}),(function(e){return e.isHorizontal&&"-2px"})),nI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){!e.props.propsForForm&&e.props.onChange&&e.props.onChange(t.target.checked)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.value,n=e.size,r=e.propsForForm,o=e.label,i=e.disabled,s=e.unremovable,l=e.direction,u=void 0===l?FA.verical:l,d=e.onClick,p=this.props.inversedColors?_.gray3:_.white,h=this.props.inversedColors?"transparent":_.gray1,b=this.props.inversedColors?_.white:_.blue2,f=(r||{}).value||t||s,m=!!i||!!s,j=u===FA.horizontal;return Object(a.jsxs)($A,{isHorizontal:j,className:"m-0 d-flex align-items-start checkbox-item".concat(f?" checked":""),children:[o&&Object(a.jsx)(tI,{className:"flex-grow-1",isHorizontal:j,children:o}),Object(a.jsxs)(XA,{className:"print-hide",size:n||18,checked:!!f,hasBorder:this.props.inversedColors,color:p,background:h,checkedBackground:b,disabled:m,children:[f&&Object(a.jsx)(eI,{name:Xf.CheckSimple,size:n||18}),Object(a.jsx)("input",Object(c.a)({type:"checkbox",className:"form-control",checked:!!f,disabled:i,onChange:this.handleChange,onClick:d},r))]}),Object(a.jsx)("input",{type:"checkbox",className:"print-only"})]})}}]),n}(p.PureComponent),rI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleChange=function(t){e.props.input.onChange(t.target.checked)},e.handleBlur=function(t){e.props.input.onBlur(t.target.checked)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.meta,n=e.label,r=e.direction,o=e.disabled,i=e.size,s=t.touched&&t.error,l=x()("form-group",this.props.wrapperClassName),u=Object(c.a)(Object(c.a)({},this.props.input),{},{onChange:this.handleChange,onBlur:this.handleBlur,className:x()("form-control",this.props.className,{"is-invalid":s}),defaultChecked:this.props.optionValue});return Object(a.jsxs)("div",{className:l,children:[Object(a.jsx)(nI,{propsForForm:u,label:n,direction:r,disabled:o,size:i}),s&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:t.error})]})}}]),n}(p.PureComponent);function aI(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  padding: 0 25px;\n  border: 0;\n  border-radius: 0;\n  height: 100%;\n  cursor: pointer;\n"]);return aI=function(){return e},e}function oI(){var e=Object(f.a)(["\n  background: ",";\n  text-align: right;\n  height: 45px;\n"]);return oI=function(){return e},e}function iI(){var e=Object(f.a)(["\n  margin-top: 25px;\n  border: 1px solid ",";\n"]);return iI=function(){return e},e}var cI="MeetingForm",sI=y.default.div(iI(),_.gray2),lI=y.default.div(oI(),_.orange0),uI=y.default.button(aI(),_.orange1,_.white),dI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.change,n=e.initialValues;n&&"meeting_date"in n||t("meeting_date",pm()())}},{key:"render",value:function(){var e=this.props,t=e.hideFooter,n=e.initialValues;return Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,autoComplete:"off",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"contact-meeting-form-tooltip",effect:"solid"}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-lg-4 col-md-6",children:Object(a.jsx)(Hv.a,{name:"meeting_date",label:"Meeting Date",validate:Dv,futureEnabled:!0,showTime:!0,component:s_})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)("div",{className:"d-inline-block","data-tip":"This will be added as follow up","data-for":"contact-meeting-form-tooltip",children:Object(a.jsx)(Hv.a,{name:"follow_up",label:Object(a.jsx)("span",{children:"Follow Up"}),component:rI,direction:FA.horizontal,defaultChecked:null===n||void 0===n?void 0:n.follow_up})})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)(sI,{children:[Object(a.jsx)(Hv.a,{name:"note",placeholder:"Enter text here...",postDocument:function(){return null},color:_.orange0,validate:Uv,disableAttachments:!0,disableMentionControl:!0,disableTemplatesControl:!0,onCancel:this.props.onCancel,component:HA,initialValue:null===n||void 0===n?void 0:n.note}),!t&&Object(a.jsx)(lI,{children:Object(a.jsx)(uI,{type:"submit",children:"Add Meeting"})})]})})})]})}}]),n}(p.PureComponent),pI=Object(sg.compose)(Object(jv.a)({form:cI}))(dI),hI=function(e){return{title:e.note,scheduled_at:fv(e.meeting_date,!0)||"---",follow_up:e.follow_up}},bI={createMeeting:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/meetings",hI(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateMeeting:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/meetings/".concat(t),hI(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),dehydrate:hI};function fI(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return fI=function(){return e},e}function mI(){var e=Object(f.a)(["\n  word-break: break-word;\n"]);return mI=function(){return e},e}var jI=y.default.div(mI()),vI=y.default.div(fI(),sm.big),OI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeTag=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.company.id){t.next=5;break}return t.next=3,hO.removeTag(e.props.company.id,n.id);case 3:return t.next=5,e.props.loadTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.company,r=t.tags,o=t.disabled;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(jI,{className:"d-flex align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(vI,{children:n.legal_name}),t.has(vx.TAGS_VIEW)&&Object(a.jsx)(bN,{tags:r||[],onRemove:o?void 0:e.removeTag})]})})}})}}]),n}(p.PureComponent);function gI(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n"]);return gI=function(){return e},e}function xI(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return xI=function(){return e},e}function yI(){var e=Object(f.a)(["\n  word-break: break-word;\n"]);return yI=function(){return e},e}var _I=y.default.div(yI()),wI=y.default.div(xI(),sm.big),SI=y.default.div(gI(),sm.medium,lm.light),kI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeTag=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.person.id){t.next=5;break}return t.next=3,hO.removeTag(e.props.person.id,n.id);case 3:return t.next=5,e.props.loadTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"getCompanyDescription",value:function(){var e=this.props.person;return Object(m.compact)([e.parent_company&&e.parent_company.legal_name,e.job_title]).join(", ")}},{key:"render",value:function(){var e=this,t=this.props,n=t.person,r=t.tags,o=t.disabled;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(_I,{className:"d-flex align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsxs)(wI,{children:[n.first_name," ",n.last_name]}),Object(a.jsx)(SI,{children:e.getCompanyDescription()}),r&&t.has(vx.TAGS_VIEW)&&Object(a.jsx)(bN,{tags:r,onRemove:o?void 0:e.removeTag})]})})}})}}]),n}(p.PureComponent),CI={address_line_1:[Dv],suburb:[Pv]},NI=Tv({legal_name:[Dv],abn:[Dv],payment_term_id:[Dv],business_phone:[Dv],address:CI},(function(e,t){return e.mailing_address&&(e.mailing_address.suburb||e.mailing_address.address_line_1)&&(t.mailing_address=Tv(CI)(e.mailing_address)),t})),EI=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a={term:t.legal_name,contact_type:wv.company},e.next=3,hO.searchContacts(a);case 3:if(o=e.sent,i={},!o.data.find((function(e){var n=e;return n.legal_name===t.legal_name&&n.id!==r.company.id}))){e.next=9;break}return i.legal_name="Company with this name already exists",e.abrupt("return",Promise.reject(i));case 9:return e.abrupt("return",Promise.resolve());case 10:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();function AI(){var e=Object(f.a)(["\n  color: ","\n"]);return AI=function(){return e},e}var II,TI=y.default.div(AI(),_.gray4),RI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={members:e.props.initialValue||[],selectedValue:null,selectedIds:function(){var t={};return j.a.forEach(e.props.initialValue,(function(e){t[e.id]=!0})),t}()},e.loadCompanies=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,hO.getContacts({term:n,contact_type:wv.company,exclude_contact_group:1});case 3:return r=t.sent,t.abrupt("return",r.data.filter((function(t){return!e.state.selectedIds[t.id]})));case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadComapnies=Qv()(e.loadCompanies,250),e.publishValue=function(t){var n,r;e.props.valuePrimitive?null===(n=e.props.input)||void 0===n||n.onChange(t):null===(r=e.props.input)||void 0===r||r.onChange(j.a.map(t,"id"))},e.handleChange=function(t){var n=t,r=e.state.members;(null===n||void 0===n?void 0:n.id)&&(r=[n].concat(Object(aj.a)(r)),e.setState({members:r,selectedIds:Object(c.a)(Object(c.a)({},e.state.selectedIds),{},Object(k.a)({},n.id,!0))})),e.publishValue(r)},e.removeMember=function(t){return function(){var n=e.state.members.filter((function(e){return e.id!==t.id}));e.setState({members:n,selectedIds:Object(c.a)(Object(c.a)({},e.state.selectedIds),{},Object(k.a)({},t.id,!1))}),e.publishValue(n)}},e.getCompanyLabel=function(e){var t=j.a.find(e.addresses,{type:Sv.mailing});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:e.legal_name}),t&&Object(a.jsx)(TI,{className:"text-grey text-sm mt-1",children:t.full_address})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{children:[!this.props.disabled&&Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsx)(yO.a,{placeholder:this.props.placeholder,menuPlacement:"top",value:this.state.selectedValue,loadOptions:this.debouncedLoadComapnies,noOptionsMessage:function(){return"Start typing..."},getOptionValue:function(e){return e.id.toString()},formatOptionLabel:this.getCompanyLabel,onChange:this.handleChange})}),this.state.members.length?Object(a.jsxs)("div",{className:"border rounded",children:[Object(a.jsx)(qg,{className:"p-2 m-0",children:"Members"}),Object(a.jsx)("div",{className:"border border-bottom-0 border-left-0 border-right-0 "}),this.state.members.map((function(t,n,r){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row p-2 pr-3 m-0",children:[Object(a.jsx)("div",{className:"col pl-0",children:e.getCompanyLabel(t)}),!e.props.disabled&&Object(a.jsx)("div",{className:"float-right text-lg",children:Object(a.jsx)("span",{className:"cursor-pointer",title:"Remove",onClick:e.removeMember(t),children:"\xd7"})})]},n),n<r.length-1&&Object(a.jsx)("div",{className:"border border-bottom-0 border-left-0 border-right-0 "})]})}))]}):null]})}}]),n}(p.PureComponent),DI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).copyAddress=function(){var t,n=Object(m.pick)(e.props.address,["address_line_1","address_line_2","postcode","suburb","state","country"]);e.props.change("mailing_address",Object(c.a)(Object(c.a)({},n),{},{type:Sv.mailing,id:null===(t=e.props.company.mailing_address)||void 0===t?void 0:t.id})),e.scheduleUpdate()},e.scheduleUpdate=Object(m.debounce)((function(){e.isNewCompany||e.handleSubmitForm()}),1e3),e.handleSubmitForm=function(){var t=e.props,n=t.handleSubmit,r=t.onSubmit;return e.props.submitting?(e.scheduleUpdate(),Promise.resolve()):n(r)()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(Vg,{isNew:e.isNewCompany,children:Object(a.jsxs)("form",{onSubmit:e.props.handleSubmit,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:e.props.disabled,children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"legal_name",label:"Legal Company Name",placeholder:"Legal Company Name",component:yg,onChange:e.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"trading_name",label:"Trading Name",placeholder:"Trading Name",component:yg,onChange:e.scheduleUpdate})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"abn",label:"ABN",placeholder:"ABN",component:yg,mask:"99 999 999 999",onChange:e.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"payment_term",label:"Default Payment Terms",placeholder:"Select Payment Terms",component:xO,options:e.props.paymentTerms,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.description},onChange:e.scheduleUpdate})})]}),Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"email",label:"Email",placeholder:"Email",component:yg,onChange:e.scheduleUpdate})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"business_phone",label:"Business Phone",placeholder:"Business Phone",component:yg,mask:$g,onChange:e.scheduleUpdate})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"website",label:"Website",placeholder:"Website",component:yg,onChange:e.scheduleUpdate})})}),Object(a.jsx)(Ov,{}),Object(a.jsxs)(lg.a,{name:"address",children:[Object(a.jsxs)(qg,{children:["Street Address ",Object(a.jsx)("sup",{children:"*"})]}),Object(a.jsx)(Ug,{name:"address",change:e.props.change,onChange:e.scheduleUpdate})]}),Object(a.jsx)(Ov,{}),Object(a.jsxs)(lg.a,{name:"mailing_address",children:[Object(a.jsxs)(qg,{children:["Mailing Address",!e.props.disabled&&Object(a.jsx)(Yg,{onClick:e.copyAddress,children:"Copy from above"})]}),Object(a.jsx)(Ug,{name:"mailing_address",change:e.props.change,onChange:e.scheduleUpdate})]}),t.has(vx.CONTACT_GROUPS_CREATE)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{children:[!e.props.disabled&&Object(a.jsx)(qg,{children:"Add Member"}),Object(a.jsx)(Hv.a,{initialValue:e.props.initialValues.subsidiaries,name:"group_of_companies",placeholder:"Select Members",component:RI,onChange:e.scheduleUpdate,disabled:e.props.disabled})]})]})]}),e.isNewCompany&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ov,{}),Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",disabled:e.props.submitting,children:"Create"}),Object(a.jsx)(Ov,{})]})]})})}})}},{key:"isNewCompany",get:function(){var e=this.props.company;return null===e.id||void 0===e.id}}]),n}(p.PureComponent),MI=Object(sg.compose)(Object(jv.a)({form:"CompanyForm",validate:NI,asyncValidate:EI,asyncBlurFields:["legal_name"],shouldAsyncValidate:function(e){return!e.initialized},enableReinitialize:!1}),Object(ug.a)({address:"address"}))(DI),LI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,saving:!1},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.onClose,o=r.afterSuccess;try{o&&o(n),setTimeout((function(){a()}))}finally{e.setState({loading:!1})}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.startToSave=function(){e.setState({loading:!0,saving:!0})},e.setDisableSate=function(t){e.setState({disabled:t})},e.renderBody=function(){var t=e.props,n=t.note,r=t.disableTemplatesControl,o=t.saveWith,i=Object(rj.a)(t,["note","disableTemplatesControl","saveWith"]),s=e.state.saving;return Object(a.jsx)(WA,Object(c.a)({afterSave:e.saveNoteDraft,note:n,color:_.orange0,placeholder:"Write your note here...",hideBottom:!0,disableTemplatesControl:r,edit:!!n,triggerToSave:s,initValue:null===n||void 0===n?void 0:n.note_resolved,saveWith:o,externalDisableListener:e.setDisableSate},i))},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",onClick:this.startToSave,disabled:this.state.disabled,children:"Save"})}},{key:"render",value:function(){var e=this.props,t=e.note,n=e.isOpen,r=e.onClose,o=this.state.loading;return Object(a.jsx)(qO,{isOpen:n,children:Object(a.jsx)(cg,{onClose:r,loading:o,footer:this.renderFooter(),body:this.renderBody(),title:t?"Edit Note":"Add Note"})})}}]),n}(p.PureComponent),PI=Object(b.b)()(LI),FI=n(503),UI=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={saving:!1},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,o=r.note,i=r.onClose,c=r.onSave,!a(Object(FI.a)(cI))){t.next=31;break}if(e.setState({saving:!0}),l=!(null===o||void 0===o||null===(s=o.meeting)||void 0===s?void 0:s.id),t.prev=4,!l){t.next=11;break}return t.next=8,bI.createMeeting(n);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,bI.updateMeeting(o.meeting.id,n);case 13:t.t0=t.sent;case 14:if(u=t.t0,!l){t.next=21;break}return t.next=18,RA.postNote(n.note);case 18:d=t.sent.data,t.next=24;break;case 21:return t.next=23,RA.updateNote(o.id,n.note);case 23:d=t.sent.data;case 24:return t.prev=24,e.setState({saving:!1}),t.finish(24);case 27:return p={meeting:u,note:d},null===c||void 0===c||c(p),null===i||void 0===i||i(),t.abrupt("return",p);case 31:throw Error("There are validation errors");case 32:case"end":return t.stop()}}),t,null,[[4,,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.saveMeeting=function(){(0,e.props.dispatch)(Object(Wv.c)(cI))},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",onClick:e.saveMeeting,children:"Save"})},e.renderBody=function(){var t,n=e.props.note;return Object(a.jsx)(pI,{onSubmit:e.onSubmit,hideFooter:!0,initialValues:{note:null===n||void 0===n?void 0:n.note_resolved,follow_up:(null===n||void 0===n?void 0:n.meeting)?n.meeting.follow_up:void 0,meeting_date:(null===n||void 0===n?void 0:n.meeting)?pm()(null===n||void 0===n||null===(t=n.meeting)||void 0===t?void 0:t.scheduled_at):void 0}})},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.note,r=t.isOpen,o=t.loading,i=t.onClose,c=this.state.saving,s=!(null===n||void 0===n||null===(e=n.meeting)||void 0===e?void 0:e.id);return Object(a.jsx)("div",{children:Object(a.jsx)(qO,{isOpen:r,children:Object(a.jsx)(cg,{onClose:i,loading:o||c,footer:this.renderFooter(),body:this.renderBody(),title:s?"Create Meeting":"Edit Meeting"})})})}}]),n}(p.Component),BI=Object(sg.compose)(Object(b.b)())(UI);function VI(){var e=Object(f.a)(["\nmargin - right: 21px;\nwidth: 20px;\n"]);return VI=function(){return e},e}function JI(){var e=Object(f.a)(["\nwidth: 140px;\nfont - size: ",";\nmargin - right: 21px;\n"]);return JI=function(){return e},e}function qI(){var e=Object(f.a)(["\n  margin-left: ","px;\n  margin-bottom: 1rem;\n  display: flex;\n\n  font-size: 1.1rem;\n  font-weight: ",";\n\n  & .title {\n    font-weight: ",";\n  }\n\n  & .action {\n    padding-left: 10px;\n    color: ",";\n  }\n"]);return qI=function(){return e},e}function zI(){var e=Object(f.a)(["\n  word-break: break-all;\n  p {\n    margin-bottom: 0;\n  }\n"]);return zI=function(){return e},e}function GI(){var e=Object(f.a)(["\n  margin-left: ","px;\n"]);return GI=function(){return e},e}function WI(){var e=Object(f.a)(["\n  background-color: ",";\n  border-radius: 3px;\n  padding: .1rem .5rem;\n  :not(:last-child){margin-right: .25rem;}\n"]);return WI=function(){return e},e}function HI(){var e=Object(f.a)(["\n  margin-left: ","px;\n  margin-bottom: 1rem;\n"]);return HI=function(){return e},e}function YI(){var e=Object(f.a)(["\n  height: ","px;\n"]);return YI=function(){return e},e}function QI(){var e=Object(f.a)(["\n  width: ","px;\n  height: ","px;\n  line-height: ","px;\n  margin-left: ","px;\n  border-radius: 4px;\n  overflow: hidden;\n  background-color: ",";\n  background-image: ",";\n  background-size: cover;\n  text-align: center;\n  font-size: 130%;\n  font-weight: ",";\n  color: ",";\n"]);return QI=function(){return e},e}function KI(){var e=Object(f.a)(["\n  color: ",";\n  padding: 21px 0;\n  border-bottom: 1px solid ",";\n  border-left: ","px solid\n    ",";\n  ","\n"]);return KI=function(){return e},e}var ZI=y.default.div(KI(),_.gray5,_.gray2,4,(function(e){return e.isFollowUp&&_.purple0||e.isMeeting&&_.purple2||e.isReply&&_.gray4||_.orange2}),(function(e){return e.isHighlighted&&"background: ".concat(_.blue0,";")})),XI=y.default.div(QI(),40,40,40,24,(function(e){return e.backgroundImage?"transparent":_.green0}),(function(e){return e.backgroundImage?"url(".concat(e.backgroundImage,")"):"none"}),lm.bold,(function(e){return e.backgroundImage?"transparent":_.white})),$I=y.default.div(YI(),40),eT=y.default.div(HI(),88),tT=y.default.span(WI(),_.gray1),nT=y.default.div(GI(),88),rT=y.default.div(zI()),aT=y.default.div(qI(),(function(e){return e.isReply?88:24}),lm.medium,lm.bold,(function(e){return e.isFollowUp&&_.purple0||e.isMeeting&&_.purple2||e.isReply&&_.gray4||_.orange2})),oT=y.default.div(JI(),sm.smaller),iT=y.default.div(VI()),cT=mC.ColoredDiv,sT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showSubject:!1,showEditModal:!1},e.parseNote=function(e){return ym(xm(e))},e.onEdit=function(){var t,n;e.isReply?null===(t=(n=e.props).onEditMessage)||void 0===t||t.call(n,e.props.noteOrReply):e.setState({showEditModal:!0})},e.renderMenu=function(t){var n=[],r=e.props,a=r.onDelete,o=r.editable,i=r.noteOrReply;return e.isReply&&(i.message_type===vw.EMAIL&&n.push({name:e.state.showSubject?"Hide Subject":"Show Subject",onClick:e.toggleSubject}),i.is_incoming&&n.push({name:"Reply To All",onClick:function(){return e.props.onReply&&e.props.onReply(i)}})),o&&(!e.isReply&&t.has(vx.NOTES_UPDATE)||e.isDraft&&t.has(vx.NOTES_UPDATE))&&n.push({name:"Edit",onClick:e.onEdit}),a&&t.has(vx.NOTES_DELETE)&&n.push({name:"Delete",onClick:a}),n},e.toggleSubject=function(){e.setState({showSubject:!e.state.showSubject})},e.isMeeting=function(){return!!e.props.noteOrReply.meeting},e.isFollowUp=function(){var t;return!!(null===(t=e.props.noteOrReply.meeting)||void 0===t?void 0:t.follow_up)},e.closeEditNoteModal=function(){e.setState({showEditModal:!1})},e}return Object(l.a)(n,[{key:"renderHeadLine",value:function(e,t){var n=this,r=mm(e.user||e.sender),o=r.name,i=e.from_name,c=e.user&&e.user.avatar&&e.user.avatar.url,s=r.initials;return Object(a.jsx)(Cx.Consumer,{children:function(l){var u,d,p,h,b,f;return Object(a.jsxs)("div",{className:"d-flex",children:[t||r.invalid?Object(a.jsx)($I,{}):Object(a.jsx)(XI,{className:"flex-shrink-0",backgroundImage:c,children:s}),!t&&Object(a.jsxs)(aT,{isReply:t,isFollowUp:n.isFollowUp(),isMeeting:n.isMeeting(),className:"flex-grow-1",children:[Object(a.jsx)("span",{className:"title",children:o}),Object(a.jsx)("div",{className:"action",children:n.isFollowUp()?Object(a.jsxs)(a.Fragment,{children:["added a follow up for ",e.contact.name]}):n.isMeeting()?Object(a.jsxs)(a.Fragment,{children:["added a meeting to ",e.contact.name]}):Object(a.jsx)(a.Fragment,{children:"added a note"})})]}),t&&Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)(aT,{isReply:t,children:[Object(a.jsx)("span",{className:"title",children:e.is_incoming?i:o}),Object(a.jsx)("div",{className:"action",children:n.addReplyPhrase})]}),n.state.showSubject&&Object(a.jsx)(eT,{children:e.subject?"Subject: ".concat(e.subject," "):"No Subject"}),(f=null===(u=e.recipients)||void 0===u?void 0:u.filter((function(e){return"to"===e.type})),f.length?Object(a.jsxs)(eT,{children:["To: ",f.map((function(e){return Object(a.jsx)(tT,{children:e.address})}))]}):null),function(e){return e.length?Object(a.jsxs)(eT,{children:["Cc: ",e.map((function(e){return Object(a.jsx)(tT,{children:e.address})}))]}):null}(null===(d=e.recipients)||void 0===d?void 0:d.filter((function(e){return"cc"===e.type}))),!e.is_incoming&&(null===(p=e.sender)||void 0===p?void 0:p.id)===(null===(h=l.user)||void 0===h?void 0:h.id)&&function(e){return e.length?Object(a.jsxs)(eT,{children:["Bcc: ",e.map((function(e){return Object(a.jsx)(tT,{children:e.address})}))]}):null}(null===(b=e.recipients)||void 0===b?void 0:b.filter((function(e){return"bcc"===e.type})))]}),Object(a.jsx)(oT,{children:pm()(e.updated_at||e.created_at).format(lv)})]})}})}},{key:"render",value:function(){var e=this,t=this.props,n=t.noteOrReply,r=t.highlightedItemId,o=t.afterEditSuccess,i=t.saveWith,c=n,s=!(!c.note_resolved&&!c.message_body_resolved),l=this.isReply,u=l&&c.id===r||!l&&c.id===r,d=this.state.showEditModal;return Object(a.jsx)(Cx.Consumer,{children:function(t){var r=e.renderMenu(t);return Object(a.jsxs)(a.Fragment,{children:[!l&&!e.isMeeting()&&d&&Object(a.jsx)(PI,{isOpen:d,onClose:e.closeEditNoteModal,note:n,disableTemplatesControl:!0,afterSuccess:o,saveWith:i}),!l&&e.isMeeting()&&d&&Object(a.jsx)(BI,{isOpen:d,onClose:e.closeEditNoteModal,note:n,onSave:o}),Object(a.jsxs)(ZI,{isHighlighted:u,isReply:l,isFollowUp:e.isFollowUp(),isMeeting:e.isMeeting(),className:"d-flex flex-row align-items-end",id:"".concat(l?"message":"note"," -").concat(c.id," "),children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[e.renderHeadLine(c,l),Object(a.jsx)(nT,{className:"flex-column",children:Object(a.jsxs)(rT,{children:[e.isMeeting()&&Object(a.jsx)(cT,{weight:lm.bold,children:pm()(c.meeting.scheduled_at).format("dddd Do MMMM YYYY, h:mma")}),s&&Object(a.jsx)("div",{dangerouslySetInnerHTML:{__html:e.parseNote(c.note_resolved||c.message_body_resolved||"")}}),Object(a.jsx)("br",{}),c.documents&&!!c.documents.length&&Object(a.jsx)(Yw,{documents:c.documents})]})})]}),Object(a.jsx)(iT,{className:"flex-shrink-0 align-self-start",children:r.length>0&&Object(a.jsx)(nw,{iconName:Xf.MenuVertical,items:r})})]})]})}})}},{key:"isDraft",get:function(){var e;return(null===(e=this.props.noteOrReply.latest_status)||void 0===e?void 0:e.status)===gw.DRAFT}},{key:"addReplyPhrase",get:function(){var e=this.props.noteOrReply;return e.is_incoming?n.replyPhrases.incoming:e.message_type===vw.EMAIL?this.isDraft?n.replyPhrases.email_draft:n.replyPhrases.email:e.message_type===vw.SMS?this.isDraft?n.replyPhrases.sms_draft:n.replyPhrases.sms:n.replyPhrases[e.message_type]||null}},{key:"isReply",get:function(){return!!this.props.noteOrReply.message_body_resolved}}]),n}(p.PureComponent);sT.replyPhrases=(II={incoming:"sent an Email",email:"replied via Email"},Object(k.a)(II,vw.RA_EMAIL,"sent Risk Assessment"),Object(k.a)(II,"email_draft","Draft Email"),Object(k.a)(II,"sms","replied via SMS"),Object(k.a)(II,"sms_draft","Draft SMS"),II);var lT=sT;function uT(){var e=Object(f.a)(["\n  width: 140px;\n  font-size: ",";\n  margin-right: 62px;\n"]);return uT=function(){return e},e}function dT(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  border-bottom: 1px solid ",";\n  background: ",";\n  color: ",";\n  height: 50px;\n  padding-left: ","px;\n  margin-top: -1px;\n"]);return dT=function(){return e},e}var pT=y.default.div(dT(),_.gray2,_.gray2,_.gray0,_.gray5,92),hT=y.default.div(uT(),sm.smaller),bT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getStatusOfChanging",value:function(){var e=this.props.status,t=e.status,n=e.user,r=mm(n);return"Status changed to \u2018".concat(t,"\u2019 ").concat(n?"by ".concat(r.name):"")}},{key:"getStatusOfCreating",value:function(){var e=this.props,t=e.status.user,n=e.itemTypeName,r=mm(t);return"".concat(n," created ").concat(t?"by ".concat(r.name):"")}},{key:"render",value:function(){return Object(a.jsxs)(pT,{className:"d-flex flex-row align-items-end",children:[Object(a.jsx)("div",{className:"d-flex flex-column align-self-center flex-grow-1",children:this.renderStatusLabel}),Object(a.jsx)(hT,{className:"d-flex flex-column align-self-center",children:pm()(this.props.status.created_at||"").format(lv)})]})}},{key:"renderStatusLabel",get:function(){switch(this.props.status.status.toLowerCase()){case"created":return this.getStatusOfCreating();default:return this.getStatusOfChanging()}}}]),n}(p.PureComponent);function fT(){var e=Object(f.a)(["\n  position: relative;\n  min-height: 50px;\n"]);return fT=function(){return e},e}var mT=y.default.div(fT()),jT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).typeCheckers={instanceOfJobStatus:function(e){return e.hasOwnProperty("status")&&e.hasOwnProperty("created_at")},instanceOfNote:function(e){return e.hasOwnProperty("note")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("id")}},e}return Object(l.a)(n,[{key:"allowAction",value:function(e){var t,n,r=this.props.user;return!!r&&((null===(t=r.me)||void 0===t?void 0:t.id)===e.user_id||/^administrator$|^admin$/i.test((null===(n=r.me)||void 0===n?void 0:n.role)||""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.notes,r=t.statuses,o=t.onNoteDelete,i=t.onNoteEdit,c=t.loading,s=t.loadingColor,l=t.highlightedItemId,u=t.afterEditSuccess,d=r?[].concat(n).concat(r).sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})):n;return Object(a.jsxs)(mT,{children:[c&&Object(a.jsx)(Nv,{size:40,color:s||_.white}),Object(a.jsx)(Cx.Consumer,{children:function(t){return d.map((function(n,r){return e.typeCheckers.instanceOfJobStatus(n)?Object(a.jsx)(bT,{status:n},r):t.has(vx.NOTES_VIEW)&&e.typeCheckers.instanceOfNote(n)?Object(a.jsx)(lT,{highlightedItemId:l,noteOrReply:n,onEdit:e.allowAction(n)&&i?function(){return i()}:void 0,editable:!!e.allowAction(n),afterEditSuccess:u,onDelete:e.allowAction(n)&&o?function(){return o(n.id)}:void 0},n.id):null}))}})]})}}]),n}(p.PureComponent);function vT(){var e=Object(f.a)(["\n  font-size: ",";\n  display: ",";\n"]);return vT=function(){return e},e}function OT(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n"]);return OT=function(){return e},e}function gT(){var e=Object(f.a)(["\n  float: right;\n  cursor: pointer;\n  margin-top: -3px;\n  margin-right: -8px;\n"]);return gT=function(){return e},e}function xT(){var e=Object(f.a)(["\n  width: 280px;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 4px;\n  border-color: ",";\n  background: ",";\n  margin: 10px auto;\n  padding: 12px;\n  padding-right: 20px;\n  position: relative;\n  overflow: ",";\n  position: relative;\n"]);return xT=function(){return e},e}var yT=Object(y.default)(gv(["collapsed","overflow"])("div"))(xT(),(function(e){return e.collapsed?"transparent":_.gray2}),(function(e){return e.collapsed?"transparent":_.white}),(function(e){return e.overflow?e.overflow:"hidden"})),_T=y.default.div(gT()),wT=y.default.div(OT(),lm.bold),ST=Object(y.default)(gv(["collapsed"])("div"))(vT(),sm.smaller,(function(e){return e.collapsed?"none":"block"})),kT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state=void 0,r.toggleCollapsed=function(){r.setState({collapsed:!r.state.collapsed})},r.state={collapsed:e.defaultCollapsed||!1,overflow:e.overflow||"hidden"},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.loading,t=this.state,r=t.collapsed,o=t.overflow;return Object(a.jsxs)(yT,{collapsed:r,overflow:o,children:[e&&Object(a.jsx)(Nv,{size:30,color:r?_.gray1:_.white}),this.props.collapsable&&Object(a.jsx)(_T,{onClick:this.toggleCollapsed,children:Object(a.jsx)(cm,{name:this.collapseIconName,size:n.iconSize})}),this.props.hasMenu&&Object(a.jsx)(_T,{children:Object(a.jsx)(cm,{name:Xf.MenuVertical,size:n.iconSize})}),Object(a.jsx)(wT,{children:this.props.caption}),Object(a.jsx)(ST,{collapsed:this.state.collapsed,children:this.props.children})]})}},{key:"collapseIconName",get:function(){return this.state.collapsed?Xf.ArrowDown:Xf.ArrowUp}}]),n}(p.PureComponent);kT.iconSize=16;var CT=kT;function NT(){var e=Object(f.a)(["\n  margin: 5px 0;\n"]);return NT=function(){return e},e}var ET=y.default.div(NT()),AT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(CT,{caption:"Jobs",collapsable:!0,children:[this.props.referrals&&this.props.referrals.map((function(e){return Object(a.jsxs)(ET,{children:[Object(a.jsx)("strong",{children:e.year}),Object(a.jsxs)("p",{children:["Referrals: ",e.referrals,Object(a.jsx)("br",{}),"Jobs (invoice to): ",e.invoice]})]},e.year)})),Object(a.jsx)("div",{children:Object(a.jsx)(v.b,{to:"",children:"View jobs"})}),Object(a.jsx)("div",{children:Object(a.jsx)(v.b,{to:"",children:"View referrals"})})]})}}]),n}(p.PureComponent);function IT(){var e=Object(f.a)(["\n  font-weight: ",";\n  td {\n    padding-top: 20px;\n  }\n"]);return IT=function(){return e},e}function TT(){var e=Object(f.a)(["\n  text-align: right;\n"]);return TT=function(){return e},e}function RT(){var e=Object(f.a)(["\n  text-align: left;\n"]);return RT=function(){return e},e}function DT(){var e=Object(f.a)(["\n  width: 100%;\n  table-layout: fixed;\n"]);return DT=function(){return e},e}var MT=y.default.table(DT()),LT=y.default.td(RT()),PT=y.default.td(TT()),FT=y.default.tr(IT(),lm.bold),UT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(CT,{caption:this.props.caption,collapsable:!0,children:Object(a.jsx)(MT,{children:Object(a.jsxs)("tbody",{children:[this.props.receivables&&this.props.receivables.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(LT,{children:e.name}),Object(a.jsx)(PT,{children:e.value})]},e.name)})),Object(a.jsxs)(FT,{children:[Object(a.jsx)(LT,{children:"Total:"}),Object(a.jsx)(PT,{children:this.props.total})]})]})})})}}]),n}(p.PureComponent);function BT(){var e=Object(f.a)(["\n  color: ",";\n"]);return BT=function(){return e},e}function VT(){var e=Object(f.a)(["\n  margin-top: 15px;\n"]);return VT=function(){return e},e}var JT=y.default.div(VT()),qT=y.default.div(BT(),_.gray5),zT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.companyName,n=e.people;return Object(a.jsxs)(CT,{caption:"People at ".concat(t),collapsable:!0,children:[!n.length&&Object(a.jsxs)(JT,{children:["No people at ",t]}),n.map((function(e,t){return Object(a.jsxs)(JT,{children:[Object(a.jsxs)(v.b,{to:"/contacts/".concat(e.contact_category.id,"/edit/").concat(e.id),children:[e.first_name," ",e.last_name]}),Object(a.jsx)(qT,{children:e.job_title})]},t)}))]})}}]),n}(p.PureComponent);function GT(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return GT=function(){return e},e}var WT=y.default.div(GT(),_.blue4,sm.smaller),HT=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).menuProps=void 0,e.clearAndToggle=function(t){t.isExpanded||e.props.onClearSearch(),t.toggle()},e.onSelect=function(t){return e.props.onSelect(t),e.menuProps&&e.menuProps.close(),Promise.resolve()},e.renderUsersMenu=function(t){e.menuProps=t;var n=e.props,r=n.loading,o=n.users;return Object(a.jsx)(oA,{loading:r,mentionsUsers:o,onSelectMentionsUser:e.onSelect,onChangeSearch:e.props.onChangeSearch,onClearSearch:e.props.onClearSearch})},e.renderTrigger=function(t){return Object(a.jsx)(WT,{onClick:function(){return e.clearAndToggle(t)},children:"Add staff"})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(K_,{trigger:this.renderTrigger,menu:this.renderUsersMenu})}}]),n}(p.PureComponent);function YT(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return YT=function(){return e},e}function QT(){var e=Object(f.a)(["\n  margin-top: -15px;\n  padding-bottom: 15px;\n"]);return QT=function(){return e},e}function KT(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return KT=function(){return e},e}var ZT,XT=y.default.div(KT()),$T=y.default.div(QT()),eR=y.default.div(YT(),_.blue4,sm.smaller);!function(e){e.addUser="add",e.deleteUser="delete"}(ZT||(ZT={}));var tR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,value:e.props.managedAccounts},e.fetchDebounced=Object(m.debounce)(function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.users.fetch(n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),350,{leading:!0}),e.getSuggestions=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchDebounced(n);case 2:return r=e.props.users.data,t.abrupt("return",r&&r.data.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{name:"".concat(e.full_name)})}))||[]);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClearUserSearch=function(){e.props.users.reset()},e.addManageAcc=function(t){var n=e.state.value;return hO.createManagedAccount(e.props.contactId,t.id).then((function(){return n&&[].concat(Object(aj.a)(n),[t])}))},e.handleChange=function(t){return function(n){e.setState({loading:!0});var r=Promise.resolve(e.state.value);switch(t){case ZT.addUser:r=e.addManageAcc(n);break;case ZT.deleteUser:r=e.deleteManageAcc(n)}r.then((function(t){return e.setState({value:t})})).finally((function(){e.props.onUpdate().then((function(){return e.setState({loading:!1})}))}))}},e.handleDelete=e.handleChange(ZT.deleteUser),e.handleAdd=e.handleChange(ZT.addUser),e}return Object(l.a)(n,[{key:"deleteManageAcc",value:function(e){var t=this.state.value;return hO.deleteManagedAccount(this.props.contactId,e.id).then((function(){return t&&t.filter((function(t){return t.id!==e.id}))}))}},{key:"render",value:function(){var e=this,t=this.state.value,n=this.state.loading,r=this.props.users.data&&this.props.users.data.data;return Object(a.jsx)(CT,{caption:"Account Management",collapsable:!1,overflow:"visible",children:n?Object(a.jsx)(Nv,{size:40,color:_.white}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($T,{children:Object(a.jsx)(HT,{loading:this.props.users.loading,onSelect:this.handleAdd,onChangeSearch:this.getSuggestions,onClearSearch:this.onClearUserSearch,users:r})}),t&&t.length>0?t.map((function(t){return Object(a.jsxs)(XT,{children:[Object(a.jsx)("span",{children:t.full_name}),Object(a.jsx)(eR,{onClick:function(){return e.handleDelete(t)},children:"remove"})]},t.id)})):""]})})}}]),n}(p.PureComponent),nR=Object(sg.compose)(oj({users:{fetch:function(e){return zE.searchUsers({name:e})}}}))(tR),rR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getPeopleAtCompany=function(){return(e.props.company.subsidiaries||[]).filter((function(e){return!!e.first_name}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.company,r=t.receivables,o=t.referrals,i=t.onLoadTags;return Object(a.jsx)(Cx.Consumer,{children:function(t){return n.id&&n.legal_name&&Object(a.jsxs)(a.Fragment,{children:[t.has(vx.CONTACTS_UPDATE)&&Object(a.jsx)(nR,{managedAccounts:n.managed_accounts,contactId:n.id,onUpdate:i,contactLoading:e.props.contactLoading}),t.has(vx.JOBS_VIEW)&&o&&o.length>0&&Object(a.jsx)(AT,{referrals:o}),r&&0!==Object.keys(r).length&&Object(a.jsx)(UT,{receivables:r.rows,total:r.total,caption:"Aged Receivables"}),Object(a.jsx)(zT,{companyName:n.legal_name,people:e.getPeopleAtCompany()})]})}})}}]),n}(p.PureComponent),aR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.person,r=t.receivables,o=t.referrals,i=t.onLoadTags;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[n.id&&t.has(vx.CONTACTS_UPDATE)&&Object(a.jsx)(nR,{managedAccounts:n.managed_accounts,contactId:n.id,onUpdate:i,contactLoading:e.props.contactLoading}),n.parent_company&&Object(a.jsxs)(CT,{caption:"Company",children:[Object(a.jsx)("p",{children:n.parent_company.legal_name}),Object(a.jsx)(v.b,{to:"/contacts/".concat(n.parent_company.contact_category.id,"/edit/").concat(n.parent_company.id),children:"View company"})]}),n.id&&Object(a.jsxs)(a.Fragment,{children:[t.has(vx.JOBS_VIEW)&&o&&o.length>0&&Object(a.jsx)(AT,{referrals:o}),r&&0!==Object.keys(r).length&&Object(a.jsx)(UT,{receivables:r.rows,total:r.total,caption:"Aged Receivables (Company)"})]})]})}})}}]),n}(p.PureComponent),oR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).scrollToHighlightedItem=function(e){if(e){var t=document.getElementById(e);t&&t.scrollIntoView&&t.scrollIntoView(!0)}},e.getHighlightedItem=function(){var t=bj.parse(e.props.location.search,{ignoreQueryPrefix:!0});return{note:+t.note,message:+t.message,itemId:+t.note||+t.message}},e}return n}(p.PureComponent),iR="/v1/finance/payment-terms",cR={getAllPaymentTerm:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(iR),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPaymentTerm:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(iR,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createPaymentTerm:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(iR),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePaymentTerm:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("".concat(iR,"/").concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deletePaymentTerm:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(iR,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function sR(){var e=Object(f.a)(["\n  width: 300px;\n  border-left: 1px solid ",";\n  background: ",";\n"]);return sR=function(){return e},e}function lR(){var e=Object(f.a)(["\n  position: relative;\n  margin: 0 -30px -30px;\n  min-height: 100px;\n  border-top: 1px solid ",";\n"]);return lR=function(){return e},e}function uR(){var e=Object(f.a)(["\n  padding: 0 0 10px 0;\n  margin: 0 0 10px 0;\n  border-bottom: 1px solid ",";\n  cursor: pointer;\n\n  :last-of-type {\n    border: 0;\n    margin: 0;\n  }\n"]);return uR=function(){return e},e}function dR(){var e=Object(f.a)(["\n  margin-bottom: 80px;\n"]);return dR=function(){return e},e}function pR(){var e=Object(f.a)(["\n  margin: 10px -30px 40px -30px;\n  padding: 0 30px 40px 30px;\n  overflow: hidden;\n  position: relative;\n  border-bottom: 1px solid ",";\n"]);return pR=function(){return e},e}var hR=y.default.div(pR(),_.gray2),bR=y.default.div(dR()),fR=y.default.div(uR(),_.gray2),mR=y.default.div(lR(),_.gray2),jR=y.default.div(sR(),_.gray2,_.gray1),vR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={note:"",meetingNote:"",loading:!1,savingMeeting:!1,updateByMe:!1},e.newEntityPosted=!1,e.notesCounter=function(e){return e.contactNotes.data?e.contactNotes.data.data.length:0},e.joinContactChannels=function(){var t=e.props,n=t.match,r=t.user,a=n.params.id;Nj().private("contact-".concat(a)).listen(".contact.updated",(function(t){r.me&&e.setState({updateByMe:r.me.id===t.notification.sender.id}),e.debouncedFetchContact(!0)}))},e.loadContactTags=function(){var t=e.props,n=t.match;return t.tags.fetch(n.params.id)},e.fetchContact=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s=arguments;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=s.length>0&&void 0!==s[0]&&s[0],r=e.props,a=r.contactNotes,o=r.match,i=r.contact,!o.params.id){t.next=11;break}if(!n){t.next=9;break}return e.loadContactTags(),a.fetch(o.params.id),t.next=8,i.fetch(o.params.id);case 8:e.setState({updateByMe:!1});case 9:t.next=14;break;case 11:c={data:{contact_type:o.params.type,default_payment_terms_days:30,contact_category:{id:+o.params.category},address:{type:Sv.street},mailing_address:{type:Sv.mailing}}},i.init(c),e.setState({updateByMe:!1});case 14:case"end":return t.stop()}}),t)}))),e.debouncedFetchContact=Object(m.debounce)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];e.fetchContact(t)}),500),e.updateContact=function(t){return e.newEntityPosted=!1,e.createOrUpdateContactAndAddresses(t).then(e.handlePartialUpdates).then(e.linkEntitiesToContact(t)).then((function(t){t&&t.data.id&&!e.props.match.params.id?e.props.history.push("/contacts/".concat(e.props.match.params.category,"/edit/").concat(t.data.id)):e.newEntityPosted&&e.fetchContact()}))},e.needToUpdateContact=function(t){var r=e.props.contact.data.data;return!!(t.contact_type===wv.person?n.commonContactFields.concat(n.personContactFields):n.commonContactFields.concat(n.companyContactFields)).find((function(e){return!Object(m.isEqual)(t[e],r[e])}))},e.needToUpdateEntity=function(t,n){var r=e.props.contact.data.data;return!(!t[n]||r[n]&&!Object.keys(t[n]).find((function(e){return t[n][e]!==r[n][e]})))},e.createOrUpdateContactAndAddresses=function(t){var n=[],r=e.needToUpdateContact(t),a=!!t.address&&e.needToUpdateEntity(t,"address"),o=!!t.mailing_address&&e.needToUpdateEntity(t,"mailing_address");return r&&n.push(e.createOrUpdateContact(t).catch(cx)),a&&n.push(e.createOrUpdateAddress(t.address).catch(cx)),o&&n.push(e.createOrUpdateAddress(t.mailing_address).catch(cx)),Promise.all(n).then((function(e){return{contact:r?e.shift():void 0,address:a?e.shift():void 0,mailingAddress:o?e.shift():void 0}}))},e.updateWithoutFetch=function(t,n,r){var a=t&&t.data,o=n&&Rg.expandAddress(n),i=r&&Rg.expandAddress(r),s=a||{};o&&(s.address=Object(c.a)(Object(c.a)({},o),{},{type:e.props.contact.data.data.address.type})),i&&(s.mailing_address=Object(c.a)(Object(c.a)({},i),{},{type:e.props.contact.data.data.mailing_address.type})),e.props.contact.init({data:Object(c.a)(Object(c.a)({},e.props.contact.data.data),s)})},e.createOrUpdateContact=function(t){var n=e.props.contact.data.data.id;return(n?hO.update(n,eO(t)):e.createContact(t)).then((function(e){return hO.getContactById(e.data.id)})).then((function(t){var r=n?Gk(t.data.id,t.data):Wk(t.data);return e.props.dispatch(r),e.newEntityPosted=e.newEntityPosted||!n,t}))},e.createContact=function(e){var t=Object(c.a)(Object(c.a)({},e),{},{contact_category_id:e.contact_category&&e.contact_category.id});return e.contact_type===wv.company?hO.createCompany(eO(t)):hO.createPerson(eO(t))},e.createOrUpdateAddress=function(t){if(!t||!t.suburb&&!t.address_line_1)return Promise.resolve();var n=t.id?Rg.update(t.id,t):Rg.create(t);return e.newEntityPosted=e.newEntityPosted||!t.id,n},e.handlePartialUpdates=function(t){var n,r,a,o,i="error_code",c=t.address,s=t.mailingAddress,l=t.contact;return c&&c.hasOwnProperty(i)&&(n=c),s&&s.hasOwnProperty(i)&&(r=s),l&&l.hasOwnProperty(i)&&(a=l),n||r||a?(o=a?a.fields:{},n&&(o.address=n.fields),r&&(o.mailing_address=r.fields),sx(o)):(e.newEntityPosted||e.updateWithoutFetch(l,c,s),Promise.resolve(t))},e.linkEntitiesToContact=function(t){return function(n){var r,a,o=e.props.contact.data.data,i=!!(null===(r=o.address)||void 0===r?void 0:r.id),s=!!(null===(a=o.mailing_address)||void 0===a?void 0:a.id),l=e.wasChangedCompany(t),u=n.contact,d=n.address,p=n.mailingAddress,h=u?u.data.id:o.id,b=[];if(h&&!i&&d&&b.push(hO.addContactAddress(h,d.data,Sv.street)),h&&!s&&p&&b.push(hO.addContactAddress(h,p.data,Sv.mailing)),h&&l){var f=t.parent_company;if(f)b.push(hO.linkPersonToCompany(h,f).then((function(){e.props.contact.init({data:Object(c.a)(Object(c.a)({},e.props.contact.data.data),{},{parent_company:f})})})));else{var m=e.props.contact.data.data.parent_company;m&&b.push(hO.unlinkPersonFromCompany(h,m))}}return Promise.all(b).then((function(){return u}))}},e.wasChangedCompany=function(t){if(t.contact_type===wv.person){var n=t,r=e.props.contact.data.data;return!n.parent_company||n.parent_company.id!==(r.parent_company&&r.parent_company.id)}},e.redirectToNotes=function(){e.props.history.push("/contacts/".concat(e.props.match.params.category,"/edit/").concat(e.props.match.params.id,"?note=true"))},e.redirectToMeetings=function(){e.props.history.push("/contacts/".concat(e.props.match.params.category,"/edit/").concat(e.props.match.params.id,"?meeting=true"))},e.isNoteEditorVisible=function(){return"true"===bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.isMeetingEditorVisible=function(){return"true"===bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}).meeting},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.contact.data,o=r.contactNotes,i=r.match,!a||!a.data.id){t.next=7;break}return t.next=4,RA.addNoteToContact(n.id,a.data.id);case 4:return t.next=6,o.fetch(a.data.id);case 6:e.props.history.replace("/contacts/".concat(i.params.category,"/edit/").concat(i.params.id));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmitMeeting=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.contactNotes,o=r.match,i=r.contact.data,c=i.data,e.setState({savingMeeting:!0}),t.prev=3,t.next=6,bI.createMeeting(n);case 6:if(s=t.sent,!c.id){t.next=18;break}return t.next=10,RA.postNote(n.note);case 10:return l=t.sent,u=l.data,t.next=14,RA.addNoteToContact(u.id,c.id,{meeting_id:s.data.id});case 14:return e.setState({savingMeeting:!1}),e.props.history.replace("/contacts/".concat(o.params.category,"/edit/").concat(o.params.id)),t.next=18,a.fetch(c.id);case 18:t.next=23;break;case 20:t.prev=20,t.t0=t.catch(3),e.setState({savingMeeting:!1});case 23:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e.beforeSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.match.url.includes("/create/"),o=+(e.props.match.params.category||""),i=e.props.dispatch,r){t.next=5;break}return t.abrupt("return",e.updateContact(n));case 5:return e.setState({loading:!0}),t.next=8,hO.getContacts({contact_category_id:o,contact_type:n.contact_type,term:"".concat(n.legal_name)});case 8:if(!((c=t.sent).data.length>0)){t.next=15;break}return t.next=12,i(iw("Confirm","Do you really want to create new contact?",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(hC,{margin:"0 0 20px 0",children:["Similar ",c.data.length," ",1===c.data.length?"company":"companies"," found:"," "]}),c.data.map((function(e){return Object(a.jsxs)(fR,{onClick:function(){window.open("/contacts/".concat(o,"/edit/").concat(e.id))},children:[Object(a.jsx)(hC,{color:_.black0,weight:lm.bold,children:hO.getContactName(e)}),Object(a.jsx)(hC,{color:_.gray5,children:e.addresses[0]&&e.addresses[0].full_address}),Object(a.jsx)(hC,{color:_.gray5,children:e.website})]},e.id)}))]})));case 12:s=t.sent,t.next=16;break;case 15:s=!0;case 16:if(!s){t.next=18;break}return t.abrupt("return",e.updateContact(n).then((function(){e.setState({loading:!1})})));case 18:return e.setState({loading:!1}),t.abrupt("return",Promise.resolve(!0));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSortedNotes=function(){var t=e.props.contactNotes;return t.data?t.data.data.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})):[]},e.loadContactNotes=function(){e.props.contactNotes.fetch(e.props.match.params.id)},e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.joinContactChannels(),this.fetchContact(!0),this.scrollToHighlightedItem(this.getHighlightedItemSelector()),this.props.paymentTerms.fetch()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.id,n=e.match.params.id;t!==n&&(this.props.contact.reset(),Nj().leave("contact-".concat(n)),this.joinContactChannels(),this.fetchContact(!0)),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.id;Nj().leave("contact-".concat(e))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.contact,o=n.tags,i=n.contactNotes,s=n.user,l=n.match,u=n.paymentTerms,d=r.data,p=r.loading,h=this.state,b=h.updateByMe,f=h.savingMeeting,m={tags:o.data.data,onSubmit:this.updateContact,onUpdate:this.debouncedFetchContact,loading:p,redirectToNotes:this.redirectToNotes,redirectToMeetings:this.redirectToMeetings,categoryId:+(l.params.category||""),isNew:this.props.match.url.includes("/create/"),paymentTerms:null===(e=u.data)||void 0===e?void 0:e.data};return d?Object(a.jsx)(Cx.Consumer,{children:function(e){var n=!e.has(m.isNew?vx.CONTACTS_CREATE:vx.CONTACTS_UPDATE),r=e.has(vx.MEETINGS_CREATE);return Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:l.url,children:d.data.id?d.data.id:"Create new"}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[d.data.id&&Object(a.jsx)(fE,{contact:d.data,contactTags:o.data?o.data.data:[],onNoteAdd:t.redirectToNotes,onMeetingAdd:t.redirectToMeetings,newContact:m.loading&&!b,onUpdate:t.debouncedFetchContact,onTagsUpdate:t.loadContactTags}),Object(a.jsxs)(JC,{children:[Object(a.jsxs)("div",{style:{position:"relative"},children:[m.loading&&!b&&Object(a.jsx)(Nv,{size:40,color:_.white}),t.isNoteEditorVisible()&&Object(a.jsx)(hR,{children:Object(a.jsx)(WA,{afterSave:t.saveNoteDraft,color:_.orange0,disableTemplatesControl:!0,onCancel:t.revertBackToNotes})}),t.isMeetingEditorVisible()&&r&&Object(a.jsxs)(hR,{children:[f&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(pI,{onSubmit:t.onSubmitMeeting})]}),Object(a.jsx)(bR,{children:d?d.data.contact_type===wv.company?d.data.id?Object(a.jsx)(OI,{tags:m.tags,company:d.data,onUpdate:t.debouncedFetchContact,disabled:n,loadTags:t.loadContactTags}):Object(a.jsx)("h2",{children:"New company"}):d.data.id?Object(a.jsx)(kI,{person:d.data,tags:o.data.data,onUpdate:t.debouncedFetchContact,disabled:n,loadTags:t.loadContactTags}):Object(a.jsx)("h2",{children:"New contact"}):null}),function(){var e,r,o,i;return d?d.data.contact_type===wv.company?Object(a.jsx)(MI,{company:Object(c.a)(Object(c.a)({},d.data),null===(e=t.props.location.state)||void 0===e?void 0:e.contact),initialValues:Object(c.a)(Object(c.a)({},d.data),null===(r=t.props.location.state)||void 0===r?void 0:r.contact),onSubmit:t.beforeSubmit,disabled:n,paymentTerms:m.paymentTerms}):Object(a.jsx)(rx,{person:Object(c.a)(Object(c.a)({},d.data),null===(o=t.props.location.state)||void 0===o?void 0:o.contact),initialValues:Object(c.a)(Object(c.a)({},d.data),null===(i=t.props.location.state)||void 0===i?void 0:i.contact),onSubmit:t.beforeSubmit,contactCategory:m.categoryId,disabled:n,paymentTerms:m.paymentTerms}):null}()]}),i.data&&(i.loading||i.data.data&&i.data.data.length>0)&&Object(a.jsx)(mR,{children:Object(a.jsx)(jT,{notes:t.getSortedNotes(),user:s,loading:i.loading,highlightedItemId:t.getHighlightedItem().itemId,afterEditSuccess:t.loadContactNotes})})]})]}),Object(a.jsx)(jR,{className:"flex-shrink-0",children:d?d.data.contact_type===wv.company?Object(a.jsx)(rR,{company:d.data,onLoadTags:t.loadContactTags,contactLoading:m.loading&&!b,receivables:{},referrals:[]}):Object(a.jsx)(aR,{person:d.data,onLoadTags:t.loadContactTags,contactLoading:m.loading&&!b,receivables:{},referrals:[]}):null})]})}}):Object(a.jsx)("div",{className:"d-flex h-100",style:{position:"relative"},children:Object(a.jsx)(Nv,{size:40,color:_.white})})}}]),n}(oR);vR.personContactFields=["first_name","last_name","job_title","direct_phone","mobile_phone","payment_term"],vR.companyContactFields=["legal_name","default_payment_terms_days","payment_term","abn","website","trading_name","group_of_companies"],vR.commonContactFields=["id","email","business_phone"];var OR=Object(sg.compose)(O.g,Object(b.b)((function(e){return{user:e.user}})),oj({contact:{fetch:hO.findById},tags:{fetch:hO.getTags,initialData:{data:[]}},contactNotes:{fetch:RA.getContactNotesAndMeetings,initialData:{data:[]}},paymentTerms:{fetch:cR.getAllPaymentTerm}}))(vR),gR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.component,n=e.exact,r=e.path;return this.isAllowAccess?Object(a.jsx)(O.b,{exact:n,path:r,component:t}):Object(a.jsx)(O.a,{to:"/unauthorized"})}},{key:"isAllowAccess",get:function(){var e=this.props.permission;switch(typeof e){case"function":return e(this.context.has);default:return this.context.has(e)}}}]),n}(p.PureComponent);gR.contextType=Cx;var xR=gR,yR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(PC,{category:e.params.category}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:e.path,component:KC}),Object(a.jsx)(xR,{exact:!0,path:"".concat(e.path,"/create/:type"),component:OR,permission:vx.CONTACTS_CREATE}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(e.path,"/edit/:id"),component:OR}),Object(a.jsx)(O.a,{to:e.url})]})})})]})}}]),n}(p.PureComponent),_R=Object(sg.compose)(O.g,oj({category:{fetch:hO.findCategoryById}}))(yR);function wR(){var e=Object(f.a)(["\n  height: ","px;\n  background: ",";\n  display: inherit;\n  justify-content: space-between;\n  align-items: center;\n  padding: 10px;\n"]);return wR=function(){return e},e}var SR=y.default.div(wR(),50,_.purple1),kR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(SR,{className:this.props.className,children:this.props.children})}}]),n}(h.a.PureComponent),CR=n(558);function NR(){var e=Object(f.a)(["\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  color: ",";\n  display: block;\n  height: calc(2.25rem + 2px);\n"]);return NR=function(){return e},e}function ER(){var e=Object(f.a)(["\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  color: ",";\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]);return ER=function(){return e},e}var AR=y.default.div(ER(),_.white,_.white),IR=y.default.div(NR(),_.white,_.white);function TR(){var e=Object(f.a)(["\n  max-width: 100%;\n  white-space: normal;\n  word-break: break-word;\n  display: block;\n"]);return TR=function(){return e},e}function RR(){var e=Object(f.a)([""]);return RR=function(){return e},e}function DR(){var e=Object(f.a)(["\n  color: #e7e7e7;\n  top: 50%;\n  font-weight: bold;\n"]);return DR=function(){return e},e}var MR,LR,PR=y.default.label(DR()),FR=y.default.span(RR()),UR=(y.default.div(TR()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={opened:!1},e.loadSuburbs=function(t){var n,r,a,o,i=null===(n=e.props.state)||void 0===n||null===(r=n.id)||void 0===r?void 0:r.toString(),c=null===(a=e.props.country)||void 0===a||null===(o=a.id)||void 0===o?void 0:o.toString();return Rg.searchSuburbs(t||"",c,i,20).then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name||e.name===t.name&&+e.postcode>+t.postcode?1:-1})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.loadCountries=function(t){return Rg.searchByCountry(t||"").then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name?1:n})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.loadStates=function(t){var n,r,a=null===(n=e.props.country)||void 0===n||null===(r=n.id)||void 0===r?void 0:r.toString();return console.log(a),Rg.searchByStates(t||"",a).then((function(t){var n=Object.assign([],t.data);return n=n.sort((function(e,t){return e.name>t.name?1:n})),e.addShowPostcodeFlag(n)})).catch((function(){return[]}))},e.handleCountryChange=function(t){t&&(e.props.change("state",null),e.props.change("suburb",null))},e.handleStateChange=function(t){t&&e.props.change("suburb",null)},e.handleSuburbChange=function(e){},e.debouncedLoadCountries=Qv()(e.loadCountries,1e3),e.debouncedLoadStates=Qv()(e.loadStates,1e3),e.debouncedLoadSuburbs=Qv()(e.loadSuburbs,1e3),e.addShowPostcodeFlag=function(e){return e.map((function(e,t){return Object(c.a)(Object(c.a)({},e),{},{showPostcode:!1,label:e.name,value:e.id})}))},e.getSuburbOptionLabel=function(t){if(!t.id)return"";var n=t,r=e.props.states.data&&e.props.states.data.data.find((function(e){return e.id===n.state_id}));return Object(a.jsx)(DO,{children:Object(a.jsxs)("div",{className:"text-truncate",children:[t.name," ",Object(a.jsxs)(FR,{children:[r&&r.code," ",t.postcode]})]})})},e.toggleView=function(){var t=e.state.opened;e.setState({opened:!t}),t&&e.resetFilters()},e.resetFilters=function(){var t=e.props.change;t("country",null),t("state",null),t("suburb",null),t("contactType",null)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.opened;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"row m-0 d-flex align-items-center h-100",children:[Object(a.jsx)("div",{className:"col-2 pr-0",children:Object(a.jsx)(IR,{children:Object(a.jsx)(PR,{children:"Contacts"})})}),Object(a.jsx)("div",{className:"col-1 p-0",children:Object(a.jsx)(IR,{children:Object(a.jsx)(vk,{name:Xf.Filter,onClick:this.toggleView,"data-tip":"Filter","data-for":"jobs-sidebar-tooltip"})})}),e?Object(a.jsx)("div",{className:"col-9",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3 p-0",children:Object(a.jsx)(IR,{children:Object(a.jsx)(Hv.a,{name:"country",placeholder:"Select Country",component:NO,loadOptions:this.debouncedLoadCountries,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:this.handleCountryChange,isClearable:!0,className:"m-0"})})}),Object(a.jsx)("div",{className:"col-3 p-0",children:Object(a.jsx)(IR,{children:Object(a.jsx)(Hv.a,{name:"state",placeholder:"Select State",loadOptions:this.debouncedLoadStates,getOptionValue:function(e){return null!==e.id?e.id.toString():null},getOptionLabel:function(e){return e.name},component:NO,onChange:this.handleStateChange,isClearable:!0,className:"m-0"})})}),Object(a.jsx)("div",{className:"col-3 p-0",children:Object(a.jsx)(IR,{children:Object(a.jsx)(Hv.a,{name:"suburb",placeholder:"Select Suburb",loadOptions:this.debouncedLoadSuburbs,getOptionValue:function(e){return e.id&&e.id.toString()},getOptionLabel:this.getSuburbOptionLabel,onChange:this.handleSuburbChange,component:NO,isClearable:!0,className:"m-0"})})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"contactType",placeholder:"Select Type",onChange:this.handleSuburbChange,component:xO,isClearable:!0,isSearchable:!1,options:[{value:wv.person,label:"Persons"},{value:wv.company,label:"Companies"}],className:"m-0"})})]})}):null]})})}}]),n}(p.PureComponent)),BR=Object(sg.compose)(Object(jv.a)({form:"ContactFilterForm"}),Object(b.b)((function(e){return Object(c.a)({states:e.allStates,countries:e.allCountries},{country:(t=Object(CR.a)("ContactFilterForm"))(e,"country"),state:t(e,"state"),suburb:t(e,"suburb"),contactType:t(e,"contactType")});var t})))(UR);!function(e){e[e.customer=0]="customer",e[e.staff=1]="staff",e[e.supplier=2]="supplier",e[e.insurer=3]="insurer",e[e.broker=4]="broker",e[e.loss_adjustor=5]="loss_adjustor",e[e.company_location=6]="company_location"}(LR||(LR={}));var VR=(MR={},Object(k.a)(MR,LR.customer,"Customers"),Object(k.a)(MR,LR.staff,"Staff"),Object(k.a)(MR,LR.supplier,"Suppliers"),Object(k.a)(MR,LR.insurer,"Insurers"),Object(k.a)(MR,LR.broker,"Broker"),Object(k.a)(MR,LR.loss_adjustor,"Loss adjustor"),Object(k.a)(MR,LR.company_location,"Company location"),MR),JR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onContactFilterChange=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Rm.status("Contacts"),this.props.categories.fetch()}},{key:"componentWillUnmount",value:function(){Rm.reset()}},{key:"getContactsMenuItems",value:function(){var e=this;return this.props.categories.data?this.props.categories.data.data.sort((function(e,t){return LR[e.type]<LR[t.type]?-1:1})).map((function(t){var n="/contacts/".concat(t.id),r=hO.getCategoryIcon(t.type),a=!!Object(O.f)(e.props.location.pathname,{path:n}),o=VR[LR[t.type]];return{path:n,icon:r,isActive:a,hint:o,title:"Contacts - ".concat(o)}})):[]}},{key:"render",value:function(){var e=this.props,t=e.match,n=e.categories;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/contacts",children:"Contacts"}),Object(a.jsx)(kR,{className:"sub-header p-0",children:Object(a.jsx)(BR,{})}),Object(a.jsxs)("div",{className:"d-flex flex-row align-items-stretch content",children:[Object(a.jsx)(Nk,{items:this.getContactsMenuItems(),children:n.loading&&Object(a.jsx)(Nv,{size:40,color:_.gray1})}),Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(t.url,"/:category"),component:_R}),n.data&&n.data.data.length>0&&Object(a.jsx)(O.a,{to:"".concat(t.url,"/").concat(n.data.data[0].id)})]})]})]})}}]),n}(p.PureComponent),qR=Object(sg.compose)(O.g,oj({categories:{fetch:hO.getCategories}}))(JR);function zR(){var e=Object(f.a)(["\n  background: ",";\n  padding: 20px;\n  color: ",";\n"]);return zR=function(){return e},e}var GR=y.default.h1(zR(),_.red1,_.white),WR=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"container h-100",children:Object(a.jsx)("div",{className:"row align-items-center justify-content-center h-100",children:Object(a.jsxs)("div",{className:"col-lg-12",children:[Object(a.jsx)(GR,{children:"Page not found"}),"Please try following links:",Object(a.jsx)("div",{children:Object(a.jsx)(v.b,{to:"/login",children:"Login"})})]})})})}}]),n}(p.PureComponent),HR=Object(O.g)(WR);function YR(){var e=Object(f.a)(["\n  line-height: 0;\n  padding: "," 20px;\n  background: transparent;\n  color: ",";\n  font-weight: ",";\n"]);return YR=function(){return e},e}function QR(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  padding: .25rem 20px;\n  color: ",";\n  font-size: 12px;\n  :not(:first-child){\n    margin-top: 10px;\n  }\n"]);return QR=function(){return e},e}function KR(){var e=Object(f.a)(["\n  line-height: ",";\n"]);return KR=function(){return e},e}function ZR(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  border-right: 1px solid ",";\n  width: 210px;\n"]);return ZR=function(){return e},e}var XR=y.default.nav(ZR(),_.gray0,_.gray2),$R=y.default.div(KR(),sm.normal),eD=y.default.div(QR(),_.gray4),tD=Object(y.default)(v.b)(YR(),sm.normal,(function(e){return e.isActive?_.blue4:_.black0}),lm.normal),nD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(XR,{className:"flex-shrink-0",children:[this.props.items.map((function(e){return Object(a.jsxs)(p.Fragment,{children:[e.header&&Object(a.jsx)(eD,{children:e.header}),Object(a.jsx)(tD,{to:e.path,className:"nav-link",isActive:e.isActive,children:Object(a.jsx)("div",{className:"d-flex flex-row align-items-center",children:Object(a.jsx)($R,{children:e.label})})},e.path)]},e.path)})),this.props.children]})}}]),n}(p.PureComponent);function rD(){var e=Object(f.a)(["\n  width: 300px;\n  border-left: 1px solid ",";\n  background: ",";\n  min-height: 100%;\n  position: relative;\n"]);return rD=function(){return e},e}var aD,oD=y.default.div(rD(),_.gray2,_.gray1),iD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(oD,{className:"flex-shrink-0",children:this.props.children})}}]),n}(p.PureComponent);function cD(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 15px 0 10px;\n  height: 1px;\n  border-top: 1px solid ",";\n"]);return cD=function(){return e},e}function sD(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 20px;\n  padding: 5px 8px;\n  border-radius: 5px;\n  border: 2px solid ",";\n  background: ",";\n  font-weight: ",";\n"]);return sD=function(){return e},e}function lD(){var e=Object(f.a)(["\n  line-height: 1.5;\n  font-weight: ",";\n"]);return lD=function(){return e},e}function uD(){var e=Object(f.a)(["\n  margin: 8px 0;\n  font-weight: ",";\n"]);return uD=function(){return e},e}function dD(){var e=Object(f.a)(["\n  display: flex;\n  .financiels-reference-label {\n    flex-basis: 100%;\n  }\n"]);return dD=function(){return e},e}var pD,hD=y.default.div(dD()),bD=Object(y.default)(hD)(uD(),lm.bold),fD=Object(y.default)(hD)(lD(),lm.bold),mD=Object(y.default)(hD)(sD(),(function(e){return e.profit>=55?_.green1:_.orange1}),(function(e){return e.profit>=55?_.green0:_.orange0}),lm.bold),jD=y.default.div(cD(),_.gray2);!function(e){e.Labour="Labour",e.Equipment="Equipment",e.Materials="Materials",e.PO="PO",e.Required="Required",e.Budget="Budget",e.Used="Used",e.Remaining="Remaining",e.GrossProfit="GrossProfit"}(pD||(pD={}));var vD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).topValues=[pD.Labour,pD.Equipment,pD.Materials,pD.PO],e.budgetValues=[pD.Used,pD.Remaining],e}return Object(l.a)(n,[{key:"renderLabelAndValue",value:function(e){var t=n.fields[e],r=t.label,o=t.key,i=t.percents,c=this.props.financials[o];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",children:r}),c&&Object(a.jsx)("div",{className:"financiels-reference-value",children:this.formatValue(c,i)})]})}},{key:"formatValue",value:function(e,t){return t?"".concat(e,"%"):vm(e)}},{key:"renderRows",value:function(e){var t=this;return e.map((function(e){return Object(a.jsx)(hD,{children:t.renderLabelAndValue(e)},"fnc-".concat(e))}))}},{key:"render",value:function(){var e=this.props.financials.grossProfit;return Object(a.jsxs)(CT,{caption:"Financials",collapsable:!0,defaultCollapsed:!0,children:[this.renderRows(this.topValues),Object(a.jsx)(bD,{children:this.renderLabelAndValue(pD.Required)}),Object(a.jsx)(jD,{}),Object(a.jsx)(fD,{children:this.renderLabelAndValue(pD.Budget)}),this.renderRows(this.budgetValues),Object(a.jsx)(mD,{profit:e,children:this.renderLabelAndValue(pD.GrossProfit)})]})}}]),n}(p.PureComponent);vD.fields=(aD={},Object(k.a)(aD,pD.Labour,{label:"Labour",key:"labour",percents:!0}),Object(k.a)(aD,pD.Equipment,{label:"Equipment",key:"equipment",percents:!0}),Object(k.a)(aD,pD.Materials,{label:"Materials",key:"materials",percents:!0}),Object(k.a)(aD,pD.PO,{label:"PO and Others",key:"purchase_orders",percents:!0}),Object(k.a)(aD,pD.Required,{label:"Required to meet GP",key:"required",percents:!1}),Object(k.a)(aD,pD.Budget,{label:"Budget",key:"budget",percents:!1}),Object(k.a)(aD,pD.Used,{label:"Used",key:"used",percents:!1}),Object(k.a)(aD,pD.Remaining,{label:"Remaining",key:"remaining",percents:!1}),Object(k.a)(aD,pD.GrossProfit,{label:"Gross Profit",key:"used",percents:!1}),aD);var OD=vD;function gD(){var e=Object(f.a)(["\n  vertical-align: sub;\n  margin-right: 4px;\n\n  & path,\n  circle {\n    stroke: ",";\n  }\n"]);return gD=function(){return e},e}function xD(){var e=Object(f.a)(["\n  margin-top: 5px;\n  color: ",";\n"]);return xD=function(){return e},e}function yD(){var e=Object(f.a)(["\n  list-style-type: none;\n  padding-left: 0;\n  margin: 0;\n"]);return yD=function(){return e},e}function _D(){var e=Object(f.a)(["\n  display: inline-block;\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return _D=function(){return e},e}function wD(){var e=Object(f.a)(["\n  color: ",";\n  font-size: ",";\n  margin-right: 10px;\n"]);return wD=function(){return e},e}var SD=y.default.span(wD(),_.gray4,sm.smaller),kD=y.default.div(_D(),_.blue4,sm.smaller),CD=y.default.ul(yD()),ND=y.default.div(xD(),_.orange2),ED=Object(y.default)(cm)(gD(),_.orange2),AD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showMoreInfo:!1},e.toggleMoreInfo=function(){e.setState({showMoreInfo:!e.state.showMoreInfo})},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n=this.props.contact,r=n.mobile_phone,o=n.direct_phone,i=n.business_phone,c=n.mailing_address,s=n.addresses,l=n.email,u=n.assignment_type,d=n.website,p=n.tags,h=l||i||r||o||d,b=s&&s.find((function(e){return e.type===Sv.street}))||c,f=(null===(e=this.props.entity)||void 0===e?void 0:e.recipient_name)||hO.getContactName(this.props.contact)||l||"";return Object(a.jsxs)(CT,{caption:f,hasMenu:!1,children:[(null===(t=this.props.entity)||void 0===t?void 0:t.recipient_address)||b&&b.full_address,this.state.showMoreInfo&&h&&Object(a.jsxs)(CD,{children:[i&&Object(a.jsx)("li",{children:"Business Phone: ".concat(i)}),r&&Object(a.jsx)("li",{children:"Mobile Phone: ".concat(r)}),o&&Object(a.jsx)("li",{children:"Direct Phone: ".concat(o)}),l&&Object(a.jsxs)("li",{children:["Email: ",Object(a.jsx)("a",{href:"mailto:".concat(l),target:"_blank",rel:"noreferrer",children:l})]}),d&&Object(a.jsxs)("li",{children:["Website: ",Object(a.jsx)("a",{href:d,target:"_blank",rel:"noreferrer",children:d})]})]}),Object(a.jsxs)("div",{children:[u&&Object(a.jsx)(SD,{children:u.name}),h&&Object(a.jsx)(kD,{onClick:this.toggleMoreInfo,children:this.state.showMoreInfo?"less":"more"}),p&&p.find((function(e){return e.is_alert}))&&Object(a.jsxs)(ND,{children:[Object(a.jsx)(ED,{name:Xf.Alert,size:18})," Alerts"]})]})]})}}]),n}(p.PureComponent),ID="Steamatic/CurrentJob/LOAD_JOB",TD="Steamatic/CurrentJob/LOAD_JOB_COMPLETE",RD="Steamatic/CurrentJob/RESET",DD="Steamatic/CurrentJob/ERROR",MD="Steamatic/CurrentJob/UPDATE_JOB",LD="Steamatic/CurrentJob/ASSIGN_TAG",PD="Steamatic/CurrentJob/REMOVE_TAG",FD="Steamatic/CurrentJob/UPDATE_LINKED_JOBS",UD=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case TD:return t.payload;case RD:return null;case MD:return e?Object(c.a)(Object(c.a)({},e),{},{site_address:t.payload.data.site_address,site_address_id:t.payload.data.site_address_id,site_address_lat:t.payload.data.site_address_lat,site_address_lng:t.payload.data.site_address_lng}):null;case LD:return e?Object(c.a)(Object(c.a)({},e),{},{tags:Object(m.uniqBy)([].concat(Object(aj.a)(e.tags),[t.payload]),"id")}):null;case PD:return e?Object(c.a)(Object(c.a)({},e),{},{tags:e.tags.filter((function(e){return e.id!==t.payload.id}))}):null;case FD:return e?Object(c.a)(Object(c.a)({},e),{},{linked_jobs:t.payload}):null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case DD:return t.payload;case TD:case RD:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ID:return!0;case TD:case RD:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case TD:return!0;case RD:return!1;default:return e}}}),BD=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o,i,c,s,l;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),(null===(o=s.currentJob)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id)===+e&&!t||(null===(c=s.currentJob)||void 0===c?void 0:c.loading)){n.next=5;break}return n.abrupt("return",Dk(ID,TD,DD,(function(){return zy.findById(e)}))(r));case 5:return n.abrupt("return",null===(l=s.currentJob)||void 0===l?void 0:l.data);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},VD=function(){return{type:RD}},JD=function(e){return{type:MD,payload:{data:e}}},qD=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,zy.assignTag(e,t.id);case 3:r({type:LD,payload:t}),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},zD=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,zy.removeTag(e,t.id);case 3:r({type:PD,payload:t}),n.next=8;break;case 6:n.prev=6,n.t0=n.catch(0);case 8:case"end":return n.stop()}}),n,null,[[0,6]])})));return function(e){return n.apply(this,arguments)}}()},GD=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zy.getLinkedJobs(e);case 2:r=t.sent,n({type:FD,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},WD=function(e,t){return function(n){var r=[];return t.forEach((function(t){r.push(zy.linkJobs(e,t))})),Promise.all(r).then((function(){n(GD(e))}))}},HD=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,zy.removeLink(e,t.id);case 2:void 0!==n.sent&&r(GD(e));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()};function YD(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n"]);return YD=function(){return e},e}function QD(){var e=Object(f.a)(["\n  display: inline;\n"]);return QD=function(){return e},e}var KD=Object(y.default)(v.b)(QD()),ZD=y.default.div(YD()),XD=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={isRemoving:!1},e.removeHandler=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,o=n.jobId,i=n.linkedJob,t.next=3,r(iw("Confirm","Remove Linked Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove linked Job ",Object(a.jsx)("strong",{children:zy.getJobName(i)}),"?"]})));case 3:if(!t.sent){t.next=14;break}return t.prev=5,t.next=8,r(HD(o,i));case 8:return t.abrupt("return",Promise.resolve());case 9:return t.prev=9,e.setState({isRemoving:!0}),t.finish(9);case 12:t.next=15;break;case 14:return t.abrupt("return",Promise.reject(!0));case 15:case"end":return t.stop()}}),t,null,[[5,,9,12]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.linkedJob,n=e.disabled,r=this.state.isRemoving;return Object(a.jsxs)(ZD,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(KD,{to:"/job/".concat(t.id,"/details"),children:zy.getJobName(t)}),": ".concat(t.latest_status.status)]}),r&&Object(a.jsx)(KD,{to:"#",children:"removing..."}),!r&&!n&&Object(a.jsx)(KD,{to:"#",onClick:this.removeHandler,children:"remove"})]})}}]),n}(p.PureComponent),$D=Object(b.b)()(XD);function eM(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  align-items: flex-end;\n"]);return eM=function(){return e},e}function tM(){var e=Object(f.a)(["\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  margin-bottom: 2px;\n"]);return tM=function(){return e},e}function nM(){var e=Object(f.a)(["\n  color: ",";\n"]);return nM=function(){return e},e}function rM(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-weight: ",";\n"]);return rM=function(){return e},e}function aM(){var e=Object(f.a)(["\n  padding: 10px 0;\n  border-top: 1px solid ","\n  display: flex;\n  justify-content: space-between;\n  cursor: pointer;\n  \n  :last-child {\n    border-bottom: 0;\n  }\n"]);return aM=function(){return e},e}var oM=y.default.div(aM(),_.gray2),iM=y.default.div(rM(),lm.bold),cM=y.default.div(nM(),_.gray5),sM=Object(y.default)(rN)(tM(),sm.normal),lM=y.default.div(eM()),uM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleClick=function(){var t=e.props,n=t.checkbox,r=t.job;!n&&e.props.onSelectJob&&e.props.onSelectJob(!0,r.id)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.tags.fetch(this.props.job.id)}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.tags,r=n.data,o=n.loading;return Object(a.jsxs)(oM,{onClick:this.handleClick,children:[Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{style:{display:"flex"},children:[Object(a.jsxs)("div",{children:["#",t.id]}),Object(a.jsx)(iM,{children:t.site_address&&t.site_address.contact_name})]}),Object(a.jsx)(cM,{children:t.site_address&&t.site_address.full_address})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(lM,{children:[Object(a.jsx)(sM,{tag:{name:t.latest_status?t.latest_status.status:"",color:_.gray4},mode:"outlined"}),Object(a.jsx)(bN,{loading:o,tags:r&&r.data,direction:"left"})]})})]})}}]),n}(p.PureComponent),dM=oj({tags:{fetch:zy.getTags}})(uM);function pM(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return pM=function(){return e},e}var hM=y.default.div(pM()),bM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobsForLinking:[],loading:!1},e.searchJobsById=function(t){e.props.jobs.fetch(t,{per_page:20,include_closed:!0})},e.searchById=function(t){t?e.debouncedSearch(t):e.debouncedSearch.cancel()},e.debouncedSearch=Object(m.debounce)(e.searchJobsById,1e3),e.linkJobs=function(){if(e.props.currentJob.data){e.setState({loading:!0});try{e.props.dispatch(WD(e.props.currentJob.data.id,e.state.jobsForLinking))}finally{e.props.onClose(),e.setState({loading:!1})}}},e.processSelectedJob=function(t,n){t?e.state.jobsForLinking.includes(n)||(e.setState({jobsForLinking:e.state.jobsForLinking.concat(n)}),setTimeout((function(){e.linkJobs()}))):e.state.jobsForLinking.includes(n)&&e.removeJobFromSelected(n)},e.removeJobFromSelected=function(t){var n=e.state.jobsForLinking;n.splice(n.indexOf(t),1),e.setState({jobsForLinking:Array.from(n)})},e.onClose=function(){var t=e.props,n=t.onClose,r=t.jobs.reset;n(),r()},e.sortJobs=function(){var t=e.props.jobs.data;if(t){var n=t.filter((function(e){var t;return(null===(t=e.latest_status)||void 0===t?void 0:t.status)!==zj.Cancelled}));return Object(m.orderBy)(n,[function(e){var t;return nv[null===(t=e.latest_status)||void 0===t?void 0:t.status]},function(e){return pm()(e.created_at).unix()}],["asc","asc"])}return[]},e}return Object(l.a)(n,[{key:"renderBody",value:function(){var e=this,t=this.props.jobs,n=t.loading,r=t.error,o=this.props.currentJob.loading;return Object(a.jsx)(a.Fragment,{children:o?"Loading...":Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(aC,{searchIcon:!0,loading:n,placeholder:"Search...",onSearchValueChange:this.searchById,mode:"typeGray"}),!r&&Object(a.jsx)(hM,{children:this.sortJobs().map((function(t){return Object(a.jsx)(dM,{checked:e.state.jobsForLinking.includes(t.id),onSelectJob:e.processSelectedJob,job:t},t.id)}))})]})})}},{key:"render",value:function(){var e=this.props.isOpen;return Object(a.jsx)(qO,{isOpen:e,children:Object(a.jsx)(cg,{onClose:this.onClose,title:"Link to Jobs",body:this.renderBody(),loading:this.state.loading})})}}]),n}(p.PureComponent),fM=Object(sg.compose)(oj({jobs:{fetch:zy.searchJobs,initialData:null}}),Object(b.b)((function(e){return{currentJob:e.currentJob}})))(bM),mM="Steamatic/NotesAndReplies/LOAD_JOB_NOTES",jM="Steamatic/NotesAndReplies/LOAD_JOB_NOTES_COMPLETE",vM="Steamatic/NotesAndReplies/RESET",OM="Steamatic/NotesAndReplies/ERROR",gM=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case jM:return t.payload;case vM:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case OM:return t.payload;case jM:case vM:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case mM:return!0;case jM:case vM:return!1;default:return e}}}),xM=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:mM}),n.prev=1,n.next=4,RA.getJobNotesAndMessages(e,t);case 4:a=n.sent,r({type:jM,payload:a.data}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r({type:OM,payload:n.t0}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},yM=function(e,t,n,r){return function(){var a=Object(lj.a)(sj.a.mark((function a(o){return sj.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,RA.addNoteToJob(t,e,n);case 3:!1!==r&&o(xM(e,r)),a.next=10;break;case 6:throw a.prev=6,a.t0=a.catch(0),o({type:OM,payload:a.t0}),a.t0;case 10:case"end":return a.stop()}}),a,null,[[0,6]])})));return function(e){return a.apply(this,arguments)}}()},_M=function(e,t,n){return function(){var r=Object(lj.a)(sj.a.mark((function r(a){return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,RA.addMessageToJob(t,e,n);case 3:return r.abrupt("return",a(xM(e)));case 6:throw r.prev=6,r.t0=r.catch(0),a({type:OM,payload:r.t0}),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()},wM=function(e,t,n){return function(){var r=Object(lj.a)(sj.a.mark((function r(a){return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return r.prev=0,r.next=3,RA.sendJobMessage(t,e,n);case 3:return r.abrupt("return",a(xM(e)));case 6:throw r.prev=6,r.t0=r.catch(0),a({type:OM,payload:r.t0}),r.t0;case 10:case"end":return r.stop()}}),r,null,[[0,6]])})));return function(e){return r.apply(this,arguments)}}()};function SM(){var e=Object(f.a)(["\n  margin-bottom: 25px;\n  font-size: 14px;\n"]);return SM=function(){return e},e}function kM(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return kM=function(){return e},e}var CM=y.default.div(kM()),NM=y.default.div(SM()),EM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.searchJobsById=function(t){t?e.props.jobs.fetch(t):e.debouncedSearch.cancel()},e.debouncedSearch=Object(m.debounce)(e.searchJobsById,500),e.mergeJobs=function(t,n){if(e.props.sourceJobId&&e.props.jobs.data){var r=e.props,a=r.sourceJobId,o=r.dispatch;e.setState({loading:!0}),zy.mergeJobs(a,n).then((function(){e.props.onClose(),e.setState({loading:!1}),o(xM(a)),o(BD(a,!0))})).catch((function(){e.props.onClose(),e.setState({loading:!1})}))}},e.onClose=function(){var t=e.props,n=t.onClose,r=t.jobs.reset;n(),r()},e}return Object(l.a)(n,[{key:"renderBody",value:function(){var e=this,t=this.props.jobs,n=t.loading,r=t.data,o=t.error;return Object(a.jsx)(a.Fragment,{children:this.props.sourceJobId?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(NM,{children:"This option will merge all current notes, emails, attendances, etc. from this job into the selected job below. The Job Details of the job selected below will remain and not be overwritten. Once complete this job will automatically be set to cancelled status."}),Object(a.jsx)(aC,{searchIcon:!0,loading:n,placeholder:"Search...",onSearchValueChange:this.debouncedSearch,mode:"typeGray"}),!o&&r&&Object(a.jsx)(CM,{children:r.map((function(t){return Object(a.jsx)(dM,{onSelectJob:e.mergeJobs,job:t},t.id)}))})]}):"Loading..."})}},{key:"render",value:function(){var e=this.props.isOpen;return Object(a.jsx)(qO,{isOpen:e,children:Object(a.jsx)(cg,{onClose:this.onClose,title:"Merge with Job",body:this.renderBody(),loading:this.state.loading})})}}]),n}(p.PureComponent),AM=Object(sg.compose)(oj({jobs:{fetch:zy.searchJobs,initialData:null}}),Object(b.b)())(EM);function IM(){var e=Object(f.a)(["\n  position: relative;\n  padding: .25rem .5rem;\n  :hover{\n    background-color: ","\n  }\n"]);return IM=function(){return e},e}function TM(){var e=Object(f.a)(["\n  color: ",";\n"]);return TM=function(){return e},e}function RM(){var e=Object(f.a)(["\n  margin-top: 20px;\n"]);return RM=function(){return e},e}function DM(){var e=Object(f.a)(["\n  margin-top: 15px;\n  font-weight: ",";\n  font-size: ",";\n"]);return DM=function(){return e},e}function MM(){var e=Object(f.a)(["\n  position: relative;\n  ul {\n    list-style-type: none;\n    padding-left: 0;\n    margin: 0;\n  }\n"]);return MM=function(){return e},e}var LM=y.default.div(MM()),PM=y.default.div(DM(),lm.bold,sm.smaller),FM=y.default.div(RM()),UM=y.default.div(TM(),_.gray5),BM=y.default.li(IM(),_.gray1),VM=mC.Link,JM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={stateLinkJobsModal:!1,stateMergeJobsModal:!1,isDuplicating:!1,removingContact:!1},e.openModal=function(t){e.setState(Object(k.a)({},t,!0))},e.closeModal=function(t){e.setState(Object(k.a)({},t,!1))},e.duplicateJob=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.job,o=n.match.params.id,i=n.location,c=n.history,s=i.pathname,!a||+a.id!==+o){t.next=22;break}return t.next=5,r(iw("Confirm","Duplicate job #".concat(a.id,"?")));case 5:if(!t.sent){t.next=22;break}return e.setState({isDuplicating:!0}),t.prev=8,t.next=11,zy.duplicateJob(a.id);case 11:l=t.sent,u=l.data,e.props.history.location.pathname===s?c.push("/job/".concat(u.id,"/details")):Oj(uj.Success,"New job #".concat(u.id," has been created (duplicate of #").concat(a.id,")")),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(8),Oj(uj.Danger,"This job can't be duplicated");case 19:return t.prev=19,e.setState({isDuplicating:!1}),t.finish(19);case 22:case"end":return t.stop()}}),t,null,[[8,16,19,22]])}))),e.deselectContact=function(t){return Object(lj.a)(sj.a.mark((function n(){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({removingContact:!0}),n.prev=1,n.next=4,e.confirmAndDeselectContact(t);case 4:n.next=8;break;case 6:n.prev=6,n.t0=n.catch(1);case 8:setTimeout((function(){e.setState({removingContact:!1})}),500);case 9:case"end":return n.stop()}}),n,null,[[1,6]])})))},e.confirmAndDeselectContact=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.dispatch,i=r.job,t.next=3,o(iw("Confirm","Unassign Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to revoke assigment of Job ",Object(a.jsx)("strong",{children:zy.getJobName(i)})," from ",Object(a.jsx)("strong",{children:n.name}),"?"]})));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",Promise.reject());case 6:return t.abrupt("return",zy.removeUserOrTeam(i.id,n.id,n.type).then(e.props.onUpdate));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.contacts,o=t.withoutActions,i=t.showJobLink,c=r.find((function(e){return e.invoice_to})),s=this.state,l=s.stateLinkJobsModal,u=s.stateMergeJobsModal,d=s.isDuplicating,p=s.removingContact;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(CT,{caption:"Job Details",collapsable:!0,children:[i&&n.id&&Object(a.jsx)(v.b,{to:"/job/".concat(n.id,"/details"),children:zy.getJobName(n)}),c&&Object(a.jsxs)("div",{children:["Invoice to: ",c.assignment_type.name]}),n.insurer&&Object(a.jsxs)("div",{children:["Insurer: ",n.insurer.legal_name]}),n.claim_number&&Object(a.jsxs)("div",{children:["Claim No. ",n.claim_number]}),Object(a.jsx)("div",{children:n.claim_type&&Object(a.jsxs)("span",{children:["(",n.claim_type.value,")"]})}),n.assigned_to.length>0&&Object(a.jsxs)(LM,{children:[Object(a.jsx)(PM,{children:"Assigned To"}),Object(a.jsx)(um.a,{className:"overlapping",id:"job-sidebar-contacts-tooltip",effect:"solid",place:"left"}),Object(a.jsx)("ul",{children:n.assigned_to.map((function(n){return Object(a.jsx)(BM,{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{className:"col p-0",children:n.name}),t.has(vx.JOBS_UPDATE)&&Object(a.jsx)("div",{className:"cursor-pointer position-relative",onClick:e.deselectContact(n),children:Object(a.jsx)(cm,{name:Xf.Remove,size:15,"data-tip":"Unassign job","data-for":"job-sidebar-contacts-tooltip"})})]})},"".concat(n.id,"_").concat(n.type))}))}),p&&Object(a.jsx)(Nv,{size:20,color:_.white})]}),Object(a.jsxs)(LM,{children:[Object(a.jsx)(PM,{children:"Linked Jobs"}),n.linked_jobs&&n.linked_jobs.length?n.linked_jobs.map((function(e){return Object(a.jsx)($D,{linkedJob:e,jobId:n.id,disabled:!t.has(vx.JOBS_MANAGE_JOBS)||!!o},e.id)})):Object(a.jsx)(UM,{children:"No linked jobs"})]}),!o&&Object(a.jsxs)(FM,{children:[t.has(vx.JOBS_MANAGE_JOBS)&&Object(a.jsx)(VM,{onClick:function(){return e.openModal("stateLinkJobsModal")},children:"Link to other job"}),t.has(vx.JOBS_CREATE)&&Object(a.jsx)(VM,{disabled:d,onClick:d?void 0:e.duplicateJob,children:"Duplicate this job"}),t.has(vx.JOBS_MANAGE_JOBS)&&Object(a.jsx)(VM,{onClick:function(){return e.openModal("stateMergeJobsModal")},children:"Merge with job"})]})]}),l&&Object(a.jsx)(fM,{isOpen:l,onClose:function(){return e.closeModal("stateLinkJobsModal")}}),u&&Object(a.jsx)(AM,{isOpen:u,onClose:function(){return e.closeModal("stateMergeJobsModal")},sourceJobId:n.id})]})}})}}]),n}(p.PureComponent),qM=Object(sg.compose)(O.g,Object(b.b)())(JM),zM=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.loading,n=e.items;return Object(a.jsx)(CT,{caption:"Previous Jobs",loading:t,collapsable:!0,children:n.map((function(e){return Object(a.jsxs)("div",{children:[Object(a.jsxs)(v.b,{to:"/job/".concat(e.id,"/notes-and-replies"),children:["#",e.id,":"]})," ",e.description]},e.id)}))})}}]),n}(p.PureComponent),GM=n(559);function WM(){var e=Object(f.a)(["\n  position: relative;\n  top: 5px;\n"]);return WM=function(){return e},e}function HM(){var e=Object(f.a)(["\n  color: ",";\n"]);return HM=function(){return e},e}function YM(){var e=Object(f.a)(["\n  ","\n"]);return YM=function(){return e},e}function QM(){var e=Object(f.a)(["\n  background: ",";\n  border-radius: 4px;\n  border: none;\n\n  &::placeholder {\n    font-weight: lighter;\n    color: ",";\n  }\n"]);return QM=function(){return e},e}var KM=Object(y.css)(QM(),_.gray1,_.gray4),ZM=y.default.input(YM(),KM),XM=y.default.label(HM(),_.gray4),$M=y.default.div(WM()),eL=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isExpanded:!1,isHoverHint:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.meta,r=t.hint,o=this.state,i=o.isExpanded,s=o.isHoverHint,l=n.touched&&n.error;return Object(a.jsxs)("div",{className:"form-group",children:[this.props.label&&Object(a.jsx)(XM,{children:this.props.label}),Object(a.jsx)(ZM,Object(c.a)(Object(c.a)({},this.props.input),{},{className:x()("form-control",this.props.className,{"is-invalid":l}),placeholder:this.props.placeholder,type:this.props.type,disabled:!!this.props.disabled,onFocus:function(){e.setExpanded=!0},onBlur:function(){e.setExpanded=!1}})),Object(a.jsx)($M,{children:(i||s)&&r&&Object(a.jsx)("div",{className:"dropdown-menu show",onMouseOver:function(){e.setHoverHint=!0},onMouseOut:function(){e.setHoverHint=!1},onClick:function(){e.setHoverHint=!1},children:r})}),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:n.error})]})}},{key:"setExpanded",set:function(e){this.setState({isExpanded:e})}},{key:"setHoverHint",set:function(e){this.setState({isHoverHint:e})}}]),n}(p.PureComponent),tL=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderHintForToField=function(){var t=e.props,n=t.assignedContacts,r=t.loading;if(!n)return null;var o=n.filter((function(t){return e.includeInFullName(t)||e.includeInFields(t)}));return r?Object(a.jsx)("div",{className:"dropdown-header",children:"Loading..."}):o.length?o.sort((function(e){return+!!e.disabled})).map((function(t,n){return Object(a.jsx)("div",{className:"dropdown-item",onClick:function(){return e.selectContact(t)},children:Object(a.jsx)(MO,{contact:t,disabled:t.disabled})},"drd-i-".concat(n))})):null},e.selectContact=function(t){!t.disabled&&e.props.onSelect&&e.props.onSelect(t)},e}return Object(l.a)(n,[{key:"includeInFullName",value:function(e){return e.first_name&&e.last_name&&this.includeInContact("".concat(e.first_name," ").concat(e.last_name))}},{key:"includeInFields",value:function(e){var t=this;return["first_name","last_name","legal_name","email","mobile_phone"].find((function(n){return t.includeInContact(e[n])}))}},{key:"includeInContact",value:function(e){if(!this.props.contactValue||!e)return!1;if(this.props.multiple){var t=this.props.contactValue.split(",").map((function(e){return e.trim()})).pop();return!!t&&e.toLowerCase().includes(t.toLowerCase())}return e.toLowerCase().includes(this.props.contactValue.toLowerCase())}},{key:"render",value:function(){return Object(a.jsx)(eL,{input:this.props.input,meta:this.props.meta,placeholder:"Select...",label:this.props.label,className:this.props.className,hint:this.renderHintForToField(),disabled:this.props.disabled})}}]),n}(p.PureComponent),nL="Steamatic/EditedReply/UPDATE_EDITED_REPLY",rL="Steamatic/EditedReply/ADD_DOCUMENT_TO_EDITED_REPLY",aL="Steamatic/EditedReply/REMOVE_DOCUMENT_FROM_EDITED_REPLY",oL="Steamatic/EditedReply/SAVE_EDITED_REPLY",iL="Steamatic/EditedReply/SAVE_EDITED_REPLY_COMPLETE",cL="Steamatic/EditedReply/DELETE_EDITED_REPLY",sL="Steamatic/EditedReply/DELETE_EDITED_REPLY_COMPLETE",lL="Steamatic/EditedReply/RESET_EDITED_REPLY",uL="Steamatic/EditedReply/ERROR",dL={savedReply:null,documents:[],loading:!1,error:null},pL=function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:dL,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null};switch(n.type){case uL:return Object(c.a)(Object(c.a)({},t),{},{savedReply:null,loading:!1,error:n.payload});case lL:case sL:return Object(c.a)({},dL);case nL:return Object(c.a)(Object(c.a)({},t),{},{body:n.payload});case oL:case cL:return Object(c.a)(Object(c.a)({},t),{},{loading:!0});case iL:return Object(c.a)(Object(c.a)({},t),{},{loading:!1,error:null,savedReply:n.payload});case rL:var r=t.documents||[];return e=n.payload?[].concat(Object(aj.a)(r),[n.payload]):r,Object(c.a)(Object(c.a)({},t||{}),{},{documents:e});case aL:var a=(e=t.documents||[]).findIndex((function(e){return e.id===n.payload}));return a>=0&&e.splice(a,1),Object(c.a)(Object(c.a)({},t),{},{documents:e});default:return t}},hL=function(){return{type:lL}},bL=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Fw.postDocument(e);case 2:r=t.sent,n({type:rL,payload:r.data});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},fL=function(e){var t=e.type.value===vw.EMAIL,n=Object.keys(Ow).filter((function(t){return!!e[Ow[t]]})).reduce((function(n,r){var a=Ow[r],o=e[Ow[r]];return t?o.forEach((function(e){return n.push({type:a,address:(null===e||void 0===e?void 0:e.email)||(null===e||void 0===e?void 0:e.value)||e})})):o.split(",").map((function(e){return e.trim()})).forEach((function(e){return n.push({type:a,address:e})})),n}),[]);return{body:e.body,subject:t?e.subject:void 0,type:e.type.value,recipients:n}},mL=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o,i,s,l,u,d;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:oL}),o=a(),i=o.editedReply,s=i.savedReply,l=i.documents,u=Object(c.a)(Object(c.a)({},fL(e)),t),n.prev=3,null!==s){n.next=10;break}return n.next=7,RA.postMessage(u);case 7:n.t0=n.sent,n.next=13;break;case 10:return n.next=12,RA.updateMessage(s.id,u);case 12:n.t0=n.sent;case 13:d=n.t0,l&&d.data&&l.forEach(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Fw.attachDocumentToMessage(d.data.id,t.id);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),r({type:iL,payload:d.data}),n.next=22;break;case 18:throw n.prev=18,n.t1=n.catch(3),r({type:uL,payload:n.t1}),n.t1;case 22:case"end":return n.stop()}}),n,null,[[3,18]])})));return function(e,t){return n.apply(this,arguments)}}()},jL=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=n(),a=r.editedReply,a.savedReply,o=a.documents,t({type:cL}),!o){e.next=10;break}i=0;case 4:if(!(i<o.length)){e.next=10;break}return e.next=7,Fw.remove(o[i].id);case 7:i++,e.next=4;break;case 10:t({type:sL});case 12:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},vL=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Fw.remove(e);case 3:n({type:aL,payload:e}),t.next=10;break;case 6:throw t.prev=6,t.t0=t.catch(0),n({type:uL,payload:t.t0}),t.t0;case 10:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e){return t.apply(this,arguments)}}()};function OL(){var e=Object(f.a)(["\n  vertical-align: sub;\n  margin-right: 12px;\n"]);return OL=function(){return e},e}function gL(){var e=Object(f.a)(["\n  color: ",";\n  background: ",";\n  border-radius: 0;\n  border-color: ",";\n  border-left-width: 8px;\n  margin-top: 20px;\n"]);return gL=function(){return e},e}var xL=y.default.div(gL(),_.black0,_.orange0,_.orange1),yL=Object(y.default)(cm)(OL()),_L=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)(xL,{className:"alert",children:[Object(a.jsx)(yL,{name:Xf.Alert,size:18}),this.props.children]})}}]),n}(p.PureComponent),wL=n(309);function SL(){var e=Object(f.a)(["\n  color: ",";\n"]);return SL=function(){return e},e}function kL(){var e=Object(f.a)(["\n  >div>div{max-height: initial;}\n  .form-control{height:initial;}\n  .fcc__value-container .trim{display: none;}\n"]);return kL=function(){return e},e}var CL=y.default.div(kL()),NL=y.default.label(SL(),_.gray4),EL=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).handleBlur=function(){e.props.input.onBlur(e.props.input.value)},e.getStyles=function(){return Object(c.a)(Object(c.a)({},mO),e.props.selectStyles)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=Object(c.a)(Object(c.a)({},n.defaultOptions),this.props),t=e.meta,r=e.className,o=e.labelClassName,i=e.valueClassName,s=Object(rj.a)(e,["meta","className","labelClassName","valueClassName"]),l=t.touched&&t.error;return Object(a.jsxs)("div",{className:x()("form-group",r),children:[this.props.label&&Object(a.jsx)(NL,{className:o,children:this.props.label}),Object(a.jsxs)(CL,{className:i,children:[Object(a.jsx)(wL.a,Object(c.a)(Object(c.a)({},this.props.input),{},{onBlur:this.handleBlur,styles:this.getStyles(),className:x()("p-0 form-control",{"is-invalid":l}),classNamePrefix:"fcc",isDisabled:this.props.disabled},s)),l&&Object(a.jsx)("div",{className:"invalid-feedback",children:t.error})]})]})}}]),n}(p.PureComponent);EL.defaultOptions={};var AL=EL;function IL(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: center;\n  align-content: center;\n  flex-direction: column;\n  padding-left: 10px;\n  color: ",";\n  float: left;\n  height: 100%;\n"]);return IL=function(){return e},e}function TL(){var e=Object(f.a)(["\n  margin-top: 5px;\n"]);return TL=function(){return e},e}function RL(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  padding: 0 25px;\n  border: 0;\n  border-radius: 0;\n  height: 100%;\n  cursor: pointer;\n"]);return RL=function(){return e},e}function DL(){var e=Object(f.a)(["\n  text-align: right;\n  background: ",";\n  height: 45px;\n"]);return DL=function(){return e},e}function ML(){var e=Object(f.a)(["\n  margin-top: 25px;\n  border: 1px solid ",";\n"]);return ML=function(){return e},e}function LL(){var e=Object(f.a)(["\n  color: ",";\n"]);return LL=function(){return e},e}var PL=y.default.label(LL(),_.gray4),FL=y.default.div(ML(),_.gray2),UL=y.default.div(DL(),_.blue0),BL=y.default.button(RL(),_.blue1,_.white),VL=y.default.div(TL()),JL=y.default.div(IL(),_.gray5),qL=[{value:vw.EMAIL,label:"Email"},{value:vw.SMS,label:"SMS"}],zL=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var o=arguments.length,i=new Array(o),c=0;c<o;c++)i[c]=arguments[c];return(r=t.call.apply(t,[this].concat(i))).state={hasInvalidMention:!1},r.hasInvalidMention=function(e){return/(^@|\s@|<[^.]+>@)[a-z0-9]{1,}\b/gim.test(e)},r.saveDraft=function(){r.props.handleSubmit(r.props.onSave)()},r.clickOnHintItem=(e={},Object(k.a)(e,vw.EMAIL,(function(e,t){var n;r.props.change(t,e.email);var a,o=null===(n=r.props.formData.subject)||void 0===n?void 0:n.split("-");2===(null===o||void 0===o?void 0:o.length)?a="".concat(o[0],"- ").concat(e.first_name+" "+e.last_name," -").concat(o[1]):3===(null===o||void 0===o?void 0:o.length)&&(a="".concat(o[0],"- ").concat(e.first_name+" "+e.last_name," -").concat(o[2])),r.props.change("subject",a)})),Object(k.a)(e,vw.SMS,(function(e,t){r.props.change(t,e.mobile_phone)})),e),r.removeDocumentFromReply=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,r.props.dispatch(vL(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.onMultipleSelectContact=function(e,t){var n=(r.props.formData[t]||"").split(",").map((function(e){return e.trim()})).filter((function(t){return!!t&&t!==e.email&&!Jv(t)}));n.push(e.email),r.props.change(t,n.join(", "))},r.emailOptionLabel=function(e){var t=hO.getContactName(e);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"trim mr-2",children:e.email}),Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"trim",children:"<"}),t,Object(a.jsx)("span",{className:"trim",children:">"})]})]}):(null===e||void 0===e?void 0:e.email)?e.email:Jv(null===e||void 0===e?void 0:e.value)?void 0:e.value},r.emailOptionValue=function(e,t){return(null===e||void 0===e?void 0:e.email)?e.email:Jv(null===e||void 0===e?void 0:e.value)||null===e||void 0===e?void 0:e.value},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.change("type",this.props.initialValues.type||qL[0])}},{key:"componentDidUpdate",value:function(e){var t=this.props.formData.body;if(t){var n=this.hasInvalidMention(t);n!==this.state.hasInvalidMention&&this.setState({hasInvalidMention:n})}}},{key:"render",value:function(){var e,t,n,r,o=this,i=this.clickOnHintItem[(this.props.formData.type||{}).value||vw.EMAIL],c=this.props.formData.type,s=this.props,l=s.handleSubmit,u=s.submitting,d=c&&c.value===vw.EMAIL,p=!c||!!c&&c.value===vw.SMS;return Object(a.jsxs)(a.Fragment,{children:[u&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("form",{onSubmit:l,autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(PL,{className:"col-2 col-form-label",children:"Send As:"}),Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)(Hv.a,{name:"type",placeholder:"Select...",validate:Dv,component:xO,options:qL,disabled:this.props.disabled,onChange:function(){o.props.change("to","")}})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(PL,{className:"col-2 col-form-label",children:"To:"}),Object(a.jsx)("div",{className:d?"col":"col-5",children:d?Object(a.jsx)(Hv.a,{name:"to",placeholder:"Select...",validate:[Dv],component:AL,options:(null===(e=this.props.contacts.data)||void 0===e?void 0:e.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel,disabled:this.props.disabled}):Object(a.jsx)(Hv.a,{name:"to",placeholder:"Select...",validate:[Dv],component:tL,onSelect:function(e){return i(e,"to")},assignedContacts:this.assignedContacts,contactValue:this.props.formData.to,loading:this.props.contacts.loading,disabled:this.props.disabled})})]}),d&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(PL,{className:"col-2 col-form-label",children:"Cc:"}),Object(a.jsx)("div",{className:d?"col":"col-5",children:Object(a.jsx)(Hv.a,{name:"cc",placeholder:"Select...",component:AL,options:(null===(t=this.props.contacts.data)||void 0===t?void 0:t.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel,disabled:this.props.disabled})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(PL,{className:"col-2 col-form-label",children:"Bcc:"}),Object(a.jsx)("div",{className:d?"col":"col-5",children:Object(a.jsx)(Hv.a,{name:"bcc",placeholder:"Select...",component:AL,options:(null===(n=this.props.contacts.data)||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel,disabled:this.props.disabled})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)(PL,{className:"col-2 col-form-label",children:"Subject:"}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"subject",placeholder:"Subject...",component:yg,validate:d?Dv:void 0,disabled:this.props.disabled})})]})]}),c&&Object(a.jsxs)(_L,{children:["This message will be sent to the specified"," ",c.value===vw.EMAIL?"email addresses":"phone number","."," ",Object(a.jsx)("strong",{children:"Switch to a Note"})," if you want to reply with an internal note."]}),Object(a.jsxs)(FL,{children:[Object(a.jsx)(Hv.a,{name:"body",placeholder:"Enter body here...",component:HA,initialValue:null===(r=this.props.initialValues)||void 0===r?void 0:r.body,color:_.blue0,onCancel:this.props.onCancel,onSave:this.saveDraft,postDocument:this.props.postDocument,validate:Uv,disableAttachments:p,disableTextFormatting:!d,disableMentionControl:!d,attachmentMode:"icon",hideCheckIcon:this.state.hasInvalidMention}),Object(a.jsxs)(UL,{children:[c&&c.value===vw.SMS&&Object(a.jsx)(JL,{children:"160 characters = 1 SMS"}),Object(a.jsxs)(BL,{type:"submit",disabled:this.props.submitting||this.state.hasInvalidMention,children:["Send ",c&&(c.value===vw.EMAIL?"Email":"SMS")]})]})]}),!p&&Object(a.jsx)(VL,{children:Object(a.jsx)(Yw,{documents:this.props.documents,onRemove:this.removeDocumentFromReply})})]})]})}},{key:"assignedContacts",get:function(){var e=this;return this.props.contacts.data?this.props.contacts.data.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{disabled:e.props.formData.type&&e.props.formData.type.value===vw.SMS?!t.mobile_phone:!t.email})})):[]}}]),n}(p.PureComponent),GL=Tv({},(function(e,t){var n,r,a,o,i,c,s;(null===(n=e.type)||void 0===n?void 0:n.value)===vw.EMAIL&&(t.to=j.a.some(null===(r=e.to)||void 0===r||null===(a=r.map)||void 0===a?void 0:a.call(r,(function(e){return null===e||void 0===e?void 0:e.email})),Jv)?"Invalid e-mail addresses":void 0,t.cc=j.a.some(null===(o=e.cc)||void 0===o||null===(i=o.map)||void 0===i?void 0:i.call(o,(function(e){return null===e||void 0===e?void 0:e.email})),Jv)?"Invalid e-mail addresses":void 0,t.bcc=j.a.some(null===(c=e.bcc)||void 0===c||null===(s=c.map)||void 0===s?void 0:s.call(c,(function(e){return null===e||void 0===e?void 0:e.email})),Jv)?"Invalid e-mail addresses":void 0);return t})),WL=Object(sg.compose)(Object(jv.a)({form:"EmailReplyForm",validate:GL,enableReinitialize:!0}),Object(b.b)((function(e){return{formData:Object(GM.a)("EmailReplyForm")(e),contacts:e.currentJobContacts,editedReply:e.editedReply}})))(zL);function HL(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n  position: relative;\n"]);return HL=function(){return e},e}var YL,QL=Object(y.default)(hC)(HL(),_.gray2),KL=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"computeCreator",value:function(){var e=this.props.status,t=e.user;switch(e.type){case YL.user:return mm(t).name;case YL.email:return"incoming email";default:return null}}},{key:"getStatusOfCreating",value:function(){var e=this.computeCreator();return"Job created ".concat(e?"by ".concat(e):"")}}]),n}(bT);!function(e){e.user="user",e.email="email",e.recurring="recurring"}(YL||(YL={}));var ZL,XL=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={replyMessage:null,editMessage:null,loading:!1,removing:!1},e.notesAndRepliesCounter=function(e){return e.notesAndReplies.data?e.notesAndReplies.data.notes.length+e.notesAndReplies.data.messages.length:0},e.markJobAsReadIfAllowed=function(){var t=e.props,n=t.job,r=t.match;n.data&&!n.data.edit_forbidden&&zy.markJobAsRead(+r.params.id)},e.revertBackToNotes=function(){e.props.dispatch(hL()),e.props.history.push(e.props.location.pathname)},e.cancelNote=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.revertBackToNotes();case 1:case"end":return t.stop()}}),t)}))),e.cancelReply=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.job,a=n.editedReply.savedReply,e.setState({removing:!0}),!a){t.next=5;break}return t.next=5,RA.removeMessageFromJob(a.id,r.data.id);case 5:return t.next=7,e.props.dispatch(jL());case 7:e.revertBackToNotes(),a&&e.getJobNotesAndReplies(),e.setState({removing:!1});case 10:case"end":return t.stop()}}),t)}))),e.sendReply=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.dispatch,o=null===(r=e.props.editedReply)||void 0===r?void 0:r.savedReply,t.next=4,a(mL(n,{job_id:e.props.job.data.id}));case 4:if(i=e.props,c=i.job,!(s=i.editedReply.savedReply)){t.next=14;break}if(!o){t.next=11;break}return t.next=9,a(wM(c.data.id,s.id));case 9:t.next=13;break;case 11:return t.next=13,a(_M(c.data.id,s.id));case 13:a(hL());case 14:e.revertBackToNotes();case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveReplyDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.dispatch,o=null===(r=e.props.editedReply)||void 0===r?void 0:r.savedReply,t.next=4,a(mL(n,{job_id:e.props.job.data.id}));case 4:i=e.props,c=i.job,(s=i.editedReply.savedReply)&&a(o?xM(c.data.id):_M(c.data.id,s.id,{send_immediately:!1})),Oj(uj.Info,"Draft saved");case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,a=e.props.job,e.cancelNote(),t.next=5,r(yM(a.data.id,n.id,{job_id:a.data.id}));case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.postReplyDocument=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n||!n.length){t.next=3;break}return t.next=3,e.props.dispatch(bL(n[0]));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.typeCheckers={instanceOfJobStatus:function(e){return e.hasOwnProperty("status")&&e.hasOwnProperty("created_at")},instanceOfNote:function(e){return e.hasOwnProperty("note")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("id")},instanceOfMessage:function(e){return e.hasOwnProperty("sender")&&e.hasOwnProperty("created_at")&&e.hasOwnProperty("id")&&e.hasOwnProperty("subject")}},e._isEmailReplyVisible=function(t){return"true"===bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}).reply},e.onReplyMessage=function(t){e.props.dispatch(hL()),e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?reply=true")),e.setState({replyMessage:t}),setTimeout((function(){var t;null===(t=e.replyForm.current)||void 0===t||t.scrollIntoView()}))},e.onEditMessage=function(t){var n,r=e.props.dispatch;r(hL()),r({type:iL,payload:t}),(null===(n=t.documents)||void 0===n?void 0:n.length)&&t.documents.forEach((function(e){r({type:rL,payload:e})})),e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?reply=true")),e.setState({editMessage:t}),setTimeout((function(){var t;null===(t=e.replyForm.current)||void 0===t||t.scrollIntoView()}))},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note?t="note-".concat(n.note):n.message&&(t="message-".concat(n.message)),t},e.getJobNotesAndReplies=function(){return e.props.dispatch(xM(e.props.match.params.id))},e.replyForm=p.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getJobNotesAndReplies().then(this.markJobAsReadIfAllowed),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props,r=n.job,a=n.dispatch;!e.job.data&&r.data&&this.markJobAsReadIfAllowed(),this.notesAndRepliesCounter(this.props)!==this.notesAndRepliesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector()),(!this.isEmailReplyVisible&&this.state.editMessage||e.location.search&&!this.props.location.search)&&(this.setState({editMessage:null}),a(hL())),!e.location.search&&this.props.location.search&&setTimeout((function(){var e;null===(e=t.replyForm.current)||void 0===e||e.scrollIntoView()}))}},{key:"deleteJobNote",value:function(e){var t,n,r=this.props,a=r.job;(0,r.dispatch)((t=a.data.id,n=e,function(){var e=Object(lj.a)(sj.a.mark((function e(r){var a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,RA.getNote(n);case 3:return a=e.sent,(o=a.data&&a.data.documents)&&o.forEach(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Fw.remove(t.id));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.next=8,RA.detachNoteFromJob(n,t);case 8:return e.abrupt("return",r(xM(t)));case 11:throw e.prev=11,e.t0=e.catch(0),r({type:OM,payload:e.t0}),e.t0;case 15:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t){return e.apply(this,arguments)}}()))}},{key:"canDeleteNote",value:function(e){var t=this.props,n=t.job,r=t.user,a=n.data&&n.data.edit_forbidden;return!!r&&(r.me&&r.me.id===e.user.id&&!a)}},{key:"computeJobCreatorType",value:function(e){var t=this.props.job.data;return e&&e.user?YL.user:t&&t.recurring_job_id?YL.recurring:YL.email}},{key:"getAll",value:function(e,t){var n=this.getStatuses(),r=n[n.length-1],a=n.slice(0,n.length-1).concat(this.getNotesAndReplies(e,t)).sort((function(e,t){return pm()(t.updated_at||t.created_at||"").diff(e.updated_at||e.created_at||"")}));return[].concat(Object(aj.a)(a),[{user:r&&r.status===zj.New&&r.user||void 0,created_at:fv(this.props.job.data.created_at),type:this.computeJobCreatorType(r),status:zj.Created}])}},{key:"getStatuses",value:function(){var e=this.props.job;return e&&e.data.statuses||[]}},{key:"getNotesAndReplies",value:function(e,t){var n=this.props.notesAndReplies.data;if(n){var r=n.notes,a=n.messages;return[].concat(Object(aj.a)(r&&e?r:[]),Object(aj.a)(a&&t?a:[]))}return[]}},{key:"render",value:function(){var e=this,t=this.props,n=t.notesAndReplies,r=t.job,o=r.data&&r.data.edit_forbidden;return Object(a.jsx)(Cx.Consumer,{children:function(t){var i=t.has(vx.NOTES_VIEW),c=t.has(vx.MESSAGES_VIEW),s=t.has(vx.NOTES_CREATE),l=t.has(vx.MESSAGES_MANAGE);return r.data&&Object(a.jsxs)("div",{style:{position:"relative"},className:"flex-grow-1",children:[e.state.loading&&Object(a.jsx)(Nv,{size:40,color:_.white}),e.isNoteEditorVisible&&!o&&s&&Object(a.jsx)(QL,{padding:"40px 30px",overflow:"visible",children:Object(a.jsx)(WA,{afterSave:e.saveNoteDraft,color:_.orange0,onCancel:e.cancelNote,attachmentMode:"icon",saveWith:{job_id:r.data.id}})}),e.isEmailReplyVisible&&!o&&l&&Object(a.jsxs)(QL,{ref:e.replyForm,padding:"40px 30px 70px 30px",children:[e.state.removing&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(WL,{documents:e.props.editedReply.documents,onSubmit:e.sendReply,onSave:e.saveReplyDraft,onCancel:e.cancelReply,postDocument:e.postReplyDocument,disabled:!!o,initialValues:e.emailReplyFormInitialValues,editMessage:e.state.editMessage})]}),n&&Object(a.jsxs)("div",{style:{position:"relative"},children:[n.loading&&Object(a.jsx)(Nv,{size:40,color:_.white}),e.getAll(i,c).map((function(t,n){return e.typeCheckers.instanceOfJobStatus(t)?Object(a.jsx)(KL,{status:t},n):e.typeCheckers.instanceOfNote(t)?Object(a.jsx)(lT,{highlightedItemId:e.getHighlightedItem().note,noteOrReply:t,onDelete:e.canDeleteNote(t)?function(){return e.deleteJobNote(t.id)}:void 0,editable:!!e.canDeleteNote(t),afterEditSuccess:e.getJobNotesAndReplies,saveWith:{job_id:r.data.id}},"note-".concat(t.id)):e.typeCheckers.instanceOfMessage(t)?e.isEmailReplyVisible&&t.id===(null===(i=e.state.editMessage)||void 0===i?void 0:i.id)?null:Object(a.jsx)(lT,{noteOrReply:t,onReply:e.onReplyMessage,onEditMessage:e.onEditMessage,highlightedItemId:e.getHighlightedItem().message,editable:!o},"reply-".concat(t.id)):null;var i}))]})]})}})}},{key:"isNoteEditorVisible",get:function(){return"true"===bj.parse(this.props.location.search,{ignoreQueryPrefix:!0}).note}},{key:"isEmailReplyVisible",get:function(){return this._isEmailReplyVisible(this.props)}},{key:"emailReplyFormInitialValues",get:function(){var e=this.props.job,t=Object();if(e.data&&e.data.id){var n,r,a=this.state.replyMessage||this.state.editMessage;if(this.state.replyMessage)t.subject=a?"".concat(e.data.claim_number," - ").concat(a.from_name," - Job No. #").concat(e.data.id):"".concat(e.data.claim_number," - Job No. #").concat(e.data.id),t.type=qL.find((function(e){return e.value===vw.EMAIL})),t.to=null===(n=a.recipients)||void 0===n?void 0:n.filter((function(e){return"to"===e.type})).map((function(e){return{email:e.address}})),t.cc=null===(r=a.recipients)||void 0===r?void 0:r.filter((function(e){return"cc"===e.type})).map((function(e){return{email:e.address}}));else if(this.state.editMessage){var o,i,c,s;if(t.id=a.id,t.subject=a.subject,t.body=a.message_body_resolved||a.message_body,t.type=qL.find((function(e){return e.value===a.message_type})),a.message_type===vw.EMAIL)t.to=null===(o=a.recipients)||void 0===o?void 0:o.filter((function(e){return"to"===e.type})).map((function(e){return{email:e.address}})),t.cc=null===(i=a.recipients)||void 0===i?void 0:i.filter((function(e){return"cc"===e.type})).map((function(e){return{email:e.address}})),t.bcc=null===(c=a.recipients)||void 0===c?void 0:c.filter((function(e){return"bcc"===e.type})).map((function(e){return{email:e.address}}));else t.to=null===(s=a.recipients)||void 0===s?void 0:s.filter((function(e){return"to"===e.type})).map((function(e){return e.address})).toString()}}return t}}]),n}(oR),$L=Object(b.b)((function(e){return{editedReply:e.editedReply,notesAndReplies:e.notesAndReplies,job:e.currentJob,user:e.user}}))(XL),eP=Tv({},(function(e,t){var n;if(e.anticipated_revenue&&e.anticipated_revenue.length>0){var r=e.anticipated_revenue;r[r.length-1].match(/(\d|\.)/g)||(e.anticipated_revenue=r.slice(0,r.length-1))}if(e.expected_excess_payment&&e.expected_excess_payment.length>0){var a=e.expected_excess_payment;a[a.length-1].match(/(\d|\.)/g)||(e.expected_excess_payment=a.slice(0,a.length-1))}if(e.insurer&&(t.date_of_loss=Dv(e.date_of_loss),t.cause_of_loss=Dv(e.cause_of_loss)),null===(n=e.contacts)||void 0===n?void 0:n.length){var o=e.contacts.find((function(e){return e.assignment_type.name===tv.SITE_CONTACT}));if(o){var i,c,s=null===o||void 0===o||null===(i=o.contact)||void 0===i||null===(c=i.addresses[0])||void 0===c?void 0:c.id;s&&(e.site_address_id=s)}}return t}));!function(e){e.ContentsOnly="Contents Only",e.StructureOnly="Structure Only",e.ContentsAndStructure="Contents and Structure"}(ZL||(ZL={}));var tP,nP=[{value:ZL.ContentsOnly,label:ZL.ContentsOnly},{value:ZL.StructureOnly,label:ZL.StructureOnly},{value:ZL.ContentsAndStructure,label:ZL.ContentsAndStructure}];!function(e){e.Critical="Critical",e.NonCritical="Non-Critical",e.SemiCritical="Semi-Critical"}(tP||(tP={}));var rP=[{value:tP.Critical,label:tP.Critical},{value:tP.NonCritical,label:tP.NonCritical},{value:tP.SemiCritical,label:tP.SemiCritical}],aP=document.querySelector("body"),oP="beacon-script";function iP(){if(!document.querySelector("#".concat(oP)))try{var e=document.createElement("script");e.type="text/javascript",e.id=oP;var t=document.createElement("script");t.src="/beacon.js",aP.appendChild(t),t.onload=function(){aP.appendChild(e)}}catch(n){throw new Error("Beacon error")}}var cP="Steamatic/User/SET_USER",sP="Steamatic/User/SET_USER_NOTIFICATIONS",lP="Steamatic/User/SET_USER_LOCATIONS",uP="Steamatic/User/START_LOAD_USER_NOTIFICATIONS",dP="Steamatic/User/SET_USERS_BY_LOCATION",pP="Steamatic/User/SET_IS_SUPERVISOR_DISABLED",hP=function(e){return{type:cP,payload:e}},bP={me:null,locations:[],userNotifications:{data:{data:[]},loading:!1},usersByLocations:[],isSupervisorDisabled:!0},fP=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:bP,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case cP:return Object(c.a)(Object(c.a)({},e),{},{me:Object(c.a)(Object(c.a)({},e.me),t.payload)});case sP:return Object(c.a)(Object(c.a)({},e),{},{userNotifications:{data:t.payload,loading:!1}});case lP:return Object(c.a)(Object(c.a)({},e),{},{locations:t.payload});case uP:return Object(c.a)(Object(c.a)({},e),{},{userNotifications:{data:e.userNotifications.data,loading:!0}});case dP:return Object(c.a)(Object(c.a)({},e),{},{usersByLocations:t.payload});case pP:return Object(c.a)(Object(c.a)({},e),{},{isSupervisorDisabled:t.is_disabled});default:return e}},mP=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Jj.getCurrentUser();case 2:return n=e.sent,iP(),t(hP(n.data)),e.abrupt("return",n.data);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},jP=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:uP}),e.next=3,zE.getMyUnreadNotifications();case 3:n=e.sent,t({type:sP,payload:n});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},vP=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE.getLocations();case 2:n=e.sent,t({type:lP,payload:n});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function OP(e){var t=e.user;return t.me&&t.me.id}function gP(e){var t=e.user;return t.me&&t.me.locations.find((function(e){return e.primary}))||null}function xP(e){var t=e.user;return t.me?t.me.locations:[]}var yP=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:pP,is_disabled:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},_P=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zE.getUsersByLocation(e);case 2:r=t.sent,n({type:dP,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function wP(){var e=Object(f.a)(["\n  margin-bottom: ",";\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return wP=function(){return e},e}var SP=y.default.span(wP(),sm.smaller,_.blue4),kP=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loadedInsurersData:[],companyLocations:[]},e.scheduledUpdateTimer=null,e.loadInsurers=function(e){var t={term:e,contact_type:wv.company,contact_category_type:_v.Insurer};return hO.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadInsurers=Qv()(e.loadInsurers,1e3),e.loadCompanyLocations=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",hO.getCompanyLocationsByLocationId(t).then((function(e){return e.data})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadCompanyLocations=Qv()(e.loadCompanyLocations,1e3),e.scheduleUpdate=function(t){var n=e.props.formData;t&&t.target&&"anticipated_revenue"===t.target.name&&n&&(t.preventDefault(),void 0!==n.anticipated_revenue&&e.props.change("anticipated_revenue",Number(n.anticipated_revenue).toFixed(2))),t&&t.target&&"expected_excess_payment"===t.target.name&&n&&(t.preventDefault(),void 0!==n.expected_excess_payment&&e.props.change("expected_excess_payment",Number(n.expected_excess_payment).toFixed(2)));var r=e.props.job;e.scheduledUpdateTimer&&clearTimeout(e.scheduledUpdateTimer),r&&!zy.isEmailTemplate(r)&&(e.scheduledUpdateTimer=setTimeout(e.handleSubmitForm,1e3))},e.handleLocationChange=function(t,n){var r=e.props,a=r.ownerLocation,o=r.assignedLocation,i=r.change,c=r.userLocations,s=r.locations;if(!a){var l=s.data&&s.data.data.find((function(e){return e.id===n.id}));l&&i("owner_location",l)}if(!o){var u=c&&c.find((function(e){return e.id===n.id}));u&&i("assigned_location",u)}"assigned_location"===t&&(i("company_location",null),setTimeout((function(){clearTimeout(e.scheduledUpdateTimer)}),1),e.setState({companyLocations:[]}),(null===n||void 0===n?void 0:n.id)?e.debouncedLoadCompanyLocations(n.id).then((function(t){e.setState({companyLocations:t}),1===t.length&&e.props.change("company_location",t[0]),e.scheduleUpdate()})):e.scheduleUpdate())},e.handleSubmitForm=function(){var t=e.props,n=t.handleSubmit,r=t.onSubmit;return t.submitting?(e.scheduleUpdate(),Promise.resolve()):n(r)()},e.addContact=function(t){var n=e.props.assignmentTypes.find((function(e){return!e.is_unique}));return function(){return t.push({assignment_type:n})}},e.renderContactsList=function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(kx,Object(c.a)(Object(c.a)({},t),{},{assignmentTypes:e.props.assignmentTypes})),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6 offset-2 offset-xl-3",children:Object(a.jsx)(SP,{onClick:e.addContact(t.fields),children:"Add another contact"})})})]})},e.fetchTemplatedContact=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.job,t.prev=1,t.next=4,zy.getTemplatedContact(n.id);case 4:(null===(a=t.sent)||void 0===a||null===(r=a.contact_category)||void 0===r?void 0:r.id)&&e.setState({templatedContact:a}),t.next=10;break;case 8:t.prev=8,t.t0=t.catch(1);case 10:case"end":return t.stop()}}),t,null,[[1,8]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.locations.fetch({per_page:999}),this.props.jobServices.fetch(),this.loadInsurers("").then((function(t){t.sort((function(e,t){return e.legal_name>t.legal_name?1:-1})),e.setState({loadedInsurersData:t})}));var t=this.props,n=t.job,r=t.initialValues.contacts;zy.isEmailTemplate(n)&&(j.a.some(r,(function(e){return!!e.contact}))||this.fetchTemplatedContact())}},{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.job)||void 0===t?void 0:t.id)!==(null===(n=this.props.job)||void 0===n?void 0:n.id)&&this.props.reset()}},{key:"componentWillUnmount",value:function(){this.scheduledUpdateTimer&&clearTimeout(this.scheduledUpdateTimer)}},{key:"componentWillReceiveProps",value:function(e){if(void 0===this.props.formData&&e.formData){var t=e.formData;t&&t.anticipated_revenue&&this.props.change("anticipated_revenue",Number(t.anticipated_revenue).toFixed(2)),t&&t.expected_excess_payment&&this.props.change("expected_excess_payment",Number(t.expected_excess_payment).toFixed(2)),t&&t.created_at&&this.props.change("created_at",pm()(new Date(t.created_at._i).toLocaleString()))}}},{key:"render",value:function(){var e=this,t=this.props,n=(t.locations,t.jobServices),r=t.job,o=t.handleSubmit,i=t.userLocations,c=t.usersByLocations,s=t.isSupervisorDisabled,l=t.assignedLocation,u=[];c.data&&(u=c.data.sort((function(e,t){return e.full_name>t.full_name?1:t.full_name>e.full_name?-1:0})));var d=this.state,p=d.companyLocations,h=d.templatedContact,b=!r,f=zy.isEmailTemplate(r);return Object(a.jsx)(Cx.Consumer,{children:function(t){var c=r&&r.edit_forbidden||!t.has(vx.JOBS_UPDATE);return Object(a.jsx)(Vg,{isNew:b||f,children:Object(a.jsxs)("form",{onSubmit:o,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:c,children:[(b||f)&&t.has(vx.JOBS_MANAGE_CONTACTS)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(mv.a,{name:"contacts",template:h,component:e.renderContactsList,onChange:e.scheduleUpdate})})}),Object(a.jsx)(Ov,{})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"date_of_loss",label:"Date of Loss",placeholder:"Date of Loss",component:s_,onChange:e.scheduleUpdate,disabled:c})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"cause_of_loss",label:"Cause of Loss",placeholder:"Cause of Loss",component:yg,onChange:e.scheduleUpdate,disabled:c})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"service",label:"Service Type",placeholder:"Select...",component:xO,options:n.data&&n.data.data,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:e.scheduleUpdate,disabled:c,validate:Dv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"initial_contact_at",label:"Initial Contact",placeholder:"Initial Contact",component:s_,showTime:!0,onChange:e.scheduleUpdate,disabled:c,validate:Dv,viewDate:new Date})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)(Hv.a,{name:"description",label:"Job Description",placeholder:"Job Description",component:yg,onChange:e.scheduleUpdate,disabled:c,validate:Dv})})}),Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"assigned_location",label:"Assigned to Location",placeholder:"Select...",component:xO,options:i,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.handleLocationChange("assigned_location",n),e.props.dispatch(yP(!1)),e.props.dispatch(_P(n.id)),e.props.change("supervisor",null);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),disabled:c,validate:Dv})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"owner_location",label:"Belongs to Location",placeholder:"Select...",component:xO,options:i||[],getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(t){e.handleLocationChange("owner_location",t),e.scheduleUpdate()},disabled:c,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"company_location",label:"Company",placeholder:"Select...",component:xO,options:p||[],getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return hO.getContactName(e)},onChange:e.scheduleUpdate,disabled:c||!l})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"supervisor",label:"Supervisor",placeholder:"Select...",component:xO,options:u,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.full_name},onChange:e.scheduleUpdate,disabled:c||s,isClearable:!0})})]}),Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"insurer",label:"Insurance / Contract",placeholder:"Select...",component:NO,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.legal_name},loadOptions:e.debouncedLoadInsurers,onChange:e.scheduleUpdate,disabled:c,isClearable:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"claim_number",label:"Claim No.",placeholder:"Claim No.",component:yg,onChange:e.scheduleUpdate,disabled:c})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"reference_number",label:"Reference No.",placeholder:"Reference No.",component:yg,onChange:e.scheduleUpdate,disabled:c})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"claim_type",label:"Claim Type",placeholder:"Select...",component:xO,options:nP,onChange:e.scheduleUpdate,disabled:c,isClearable:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"criticality",label:"Criticality",placeholder:"Select...",component:xO,options:rP,onChange:e.scheduleUpdate,disabled:c,isClearable:!0})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"expected_excess_payment",label:"Excess payment",placeholder:"Excess payment",component:yg,currency:!0,onBlur:e.scheduleUpdate,disabled:c})})}),Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"anticipated_revenue",label:"Anticipated Revenue",placeholder:"Anticipated Revenue",component:yg,onBlur:e.scheduleUpdate,currency:!0,disabled:c})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"anticipated_invoice_date",label:"Anticipated Invoice Date",placeholder:"Anticipated Invoice Date",component:s_,onChange:e.scheduleUpdate,disabled:c,futureEnabled:!0,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"created_at",label:"Job Received",placeholder:"Job Received",disabled:!(b||f),component:s_,showTime:!0,onChange:e.scheduleUpdate,viewDate:new Date,defaultDate:new Date,validate:Dv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"authority_received_at",label:"Authority Received",placeholder:"Authority Received",component:s_,showTime:!0,onChange:e.scheduleUpdate,disabled:c,viewDate:new Date})})]})]}),(b||f)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Ov,{}),Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",disabled:e.props.submitting,children:"Create"})]})]})})}})}}]),n}(p.PureComponent),CP="JobForm",NP=Object(sg.compose)(Object(b.b)((function(e){return{userLocations:e.user.locations,usersByLocations:e.user.usersByLocations,isSupervisorDisabled:e.user.isSupervisorDisabled,assignedLocation:Object(CR.a)(CP)(e,"assigned_location"),ownerLocation:Object(CR.a)(CP)(e,"owner_location"),formData:Object(GM.a)("JobForm")(e),assignmentTypes:e.constants.jobAssignmentTypes,contacts:e.currentJobContacts}})),Object(jv.a)({form:CP,validate:eP,enableReinitialize:!0}),oj({locations:{fetch:Rg.searchLocations},jobServices:{fetch:zy.getServices}}))(kP),EP="Steamatic/CurrentJobContacts/LOAD",AP="Steamatic/CurrentJobContacts/LOAD_COMPLETE",IP="Steamatic/CurrentJobContacts/RESET",TP="Steamatic/CurrentJobContacts/ERROR",RP=Ek({load:EP,loadComplete:AP,reset:IP,error:TP}),DP=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o,i,c,s,l;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(s=a(),(null===(o=s.currentJobContacts)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.id)===+e&&!t||(null===(c=s.currentJobContacts)||void 0===c?void 0:c.loading)){n.next=5;break}return n.abrupt("return",Dk(EP,AP,TP,(function(){return zy.getContacts(e)}))(r));case 5:return n.abrupt("return",null===(l=s.currentJobContacts)||void 0===l?void 0:l.data);case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},MP=function(){return{type:IP}},LP=[tv.CUSTOMER],PP=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={updating:!1},e.asyncPromiseHandler=XC(),e.submitContacts=function(t){var n=e.props.contacts.data||[],r=t.contacts.filter((function(e){return e.contact&&e.assignment_type})),a=Object(m.keyBy)(n,Mx),o=Object(m.keyBy)(r,Mx),i=n.filter((function(e){return!o[Mx(e)]})),c=r.filter((function(e){return!a[Mx(e)]})),s=Promise.resolve(),l=n.find((function(e){var n=Mx(e);return o[n]&&n===t.invoiceToKey&&!e.invoice_to}));return l&&(s=e.markAsInvoiceTo(l)),e.asyncPromiseHandler.asyncHandler((function(){return Promise.all(i.map(e.removeAssignment)).then((function(){return Promise.all([].concat(Object(aj.a)(c.map((function(n){return e.createAssignment(n,Mx(n)===t.invoiceToKey)}))),[s]))})).then(e.updateJobSiteAddressIfNeeded(r))})).then((function(){e.closeContacts(),e.props.dispatch(DP(e.props.job.id,!0))}))},e.debouncedSubmitContacts=Qv()(e.submitContacts,300),e.updateJobSiteAddressIfNeeded=function(t,n){return function(){var r,a,o,i;n||(n=e.props.job);var c=n.site_address_id||null,s=t.find((function(e){return e.assignment_type.name===tv.SITE_CONTACT})),l=t.find((function(e){return e.assignment_type.name===tv.CUSTOMER})),u=(null===s||void 0===s||null===(r=s.contact)||void 0===r||null===(a=r.addresses[0])||void 0===a?void 0:a.id)||(null===l||void 0===l||null===(o=l.contact)||void 0===o||null===(i=o.addresses[0])||void 0===i?void 0:i.id)||null;return(u||c)&&u!==c?zy.update(n.id,{site_address_id:u||null}).then((function(t){return e.props.dispatch(JD(t))})):Promise.resolve()}},e.closeContacts=function(){e.props.job&&e.props.history.push("/job/".concat(e.props.job.id,"/details"))},e.removeAssignment=function(t){var n=e.props.job,r=t.assignment_type,a=t.contact;return zy.removeAssignment(n.id,a.id,{assignment_type_id:r.id})},e.createAssignment=function(t,n){var r=e.props.job;return zy.createAssignment(r.id,t.contact.id,{invoice_to:n,assignment_type_id:t.assignment_type.id})},e.markAsInvoiceTo=function(t){var n=e.props.job;return zy.updateAssignment(n.id,t.contact.id,{invoice_to:!0,assignment_type_id:t.assignment_type.id})},e.onDetailsUpdate=function(t){var n=e.props.job;return e.props.dispatch(yP(!0)),n?zy.deprecatedUpdate(n.id,t).then((function(){e.props.dispatch(BD(n.id,!0))})).catch(ix):zy.createJob(t).then(function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(a=t.contacts)||void 0===a?void 0:a.length)){n.next=3;break}return n.next=3,e.updateJobSiteAddressIfNeeded(t.contacts,r.data)();case 3:e.props.history.push("/job/".concat(r.data.id,"/details"));case 4:case"end":return n.stop()}}),n)})));return function(e){return n.apply(this,arguments)}}()).catch(ix)},e.getInitialContactsValues=function(){var t=e.props,n=t.contacts,r=t.assignmentTypes;if(n.data&&n.data.length){var a=n.data,o=a.find((function(e){return e.invoice_to}));return{contacts:a.map((function(e){return{assignment_type:e.assignment_type,contact:e}})),invoiceToKey:o?Mx(o):null}}return{invoiceToKey:null,contacts:LP.map((function(e){return{assignment_type:r.find((function(t){return t.name===e}))}})).filter((function(e){return!!e.assignment_type}))}},e.fetchUsersByLocation=function(t){(null===t||void 0===t?void 0:t.assigned_location_id)?(e.props.dispatch(yP(!1)),e.props.dispatch(_P(t.assigned_location_id))):e.props.dispatch(yP(!0))},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.asyncPromiseHandler.doCancel()}},{key:"componentDidUpdate",value:function(e){JSON.stringify(e.job)!=JSON.stringify(this.props.job)&&this.fetchUsersByLocation(this.props.job)}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.contacts,r=e.assignmentTypes;return Object(a.jsxs)(JC,{children:[this.isContactsFormVisible&&n.ready&&Object(a.jsx)(Ux,{job:t,assignmentTypes:r,initialValues:this.getInitialContactsValues(),onSubmit:this.debouncedSubmitContacts,onFieldChange:this.debouncedSubmitContacts}),Object(a.jsx)(NP,{job:t,initialValues:Object(c.a)(Object(c.a)({},t),this.getInitialContactsValues()),onSubmit:this.onDetailsUpdate})]})}},{key:"isContactsFormVisible",get:function(){var e=this.props.job;return!(!e||!e.id||zy.isEmailTemplate(e)||e.edit_forbidden)}}]),n}(p.PureComponent),FP=Object(sg.compose)(Object(b.b)((function(e){return{job:e.currentJob.data,assignmentTypes:e.constants.jobAssignmentTypes,contacts:e.currentJobContacts}})),O.g)(PP),UP=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/assessment-reports/flooring-types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),BP=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,ev.get("/v1/assessment-reports/".concat(t),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VP=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=n.length>0&&void 0!==n[0]?n[0]:{},e.next=3,ev.get("/v1/suburbs",t);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),JP={getFlooringTypes:UP,getFormOptionsData:BP,deleteFormOptionsData:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("suburbs"===t){e.next=6;break}return e.next=3,ev.remove("/v1/assessment-reports/".concat(t,"/").concat(n));case 3:return e.abrupt("return",e.sent);case 6:return e.next=8,ev.remove("/v1/suburbs/".concat(n));case 8:return e.abrupt("return",e.sent);case 9:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),addFormOptionsData:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=r.length>1&&void 0!==r[1]?r[1]:{},"suburbs"===t){e.next=7;break}return e.next=4,ev.post("/v1/assessment-reports/".concat(t),n);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,ev.post("/v1/suburbs",n);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateFormOptionsData:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=a.length>2&&void 0!==a[2]?a[2]:{},"suburbs"===t){e.next=7;break}return e.next=4,ev.patch("/v1/assessment-reports/".concat(t,"/").concat(n),r);case 4:return e.abrupt("return",e.sent);case 7:return e.next=9,ev.patch("/v1/suburbs/".concat(n),r);case 9:return e.abrupt("return",e.sent);case 10:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getSuburbsFormOptionsData:VP},qP={getJobSurvey:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/site-survey"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),attachQuestionOption:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,ev.post("/v1/jobs/".concat(t,"/site-survey/questions/").concat(n),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),detachQuestionOption:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=a.length>2&&void 0!==a[2]?a[2]:{},e.next=3,ev.remove("/v1/jobs/".concat(t,"/site-survey/questions/").concat(n),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),postJobRooms:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,ev.post("/v1/jobs/".concat(t,"/areas"),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateJobRooms:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=a.length>1&&void 0!==a[1]?a[1]:{},r=a.length>2?a[2]:void 0,e.next=4,ev.patch("/v1/jobs/".concat(t,"/areas/").concat(r),n);case 4:return e.abrupt("return",e.sent);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeJobRooms:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/areas/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},zP="Steamatic/CurrentJobSurvey/LOAD_SITE_SURVEY",GP="Steamatic/CurrentJobSurvey/LOAD_SITE_SURVEY_COMPLETE",WP="Steamatic/CurrentJobSurvey/LOAD_FLOORING_TYPES",HP="Steamatic/CurrentJobSurvey/LOAD_FLOORING_TYPES_COMPLETE",YP="Steamatic/CurrentJobSurvey/SEND_SURVEY_ANSWER",QP="Steamatic/CurrentJobSurvey/SEND_SURVEY_ANSWER_COMPLETE",KP="Steamatic/CurrentJobSurvey/SEND_JOB_ROOM",ZP="Steamatic/CurrentJobSurvey/REQUEST_REMOVE_JOB_ROOM",XP="Steamatic/CurrentJobSurvey/SEND_JOB_ROOM_COMPLETE",$P="Steamatic/CurrentJobSurvey/REMOVE_JOB_ROOM_COMPLETE",eF="Steamatic/CurrentJobSurvey/RESET",tF="Steamatic/CurrentJobSurvey/ERROR",nF={data:{allQuestions:[],jobQuestions:[],jobRooms:[],flooringTypes:[]},error:null,removing:{rooms:[]},loading:!1,ready:{surveyIsReady:!1,flooringIsReady:!1}},rF=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nF.data,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case HP:return Object(c.a)(Object(c.a)({},e),{},{flooringTypes:t.payload});case GP:return Object(c.a)(Object(c.a)({},e),t.payload);case XP:return Object(c.a)(Object(c.a)({},e),{},{jobRooms:[].concat(Object(aj.a)(e.jobRooms),[t.payload])});case $P:return Object(c.a)(Object(c.a)({},e),{},{jobRooms:e.jobRooms.filter((function(e){return e.id!==t.payload}))});case eF:return nF.data;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nF.error,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case tF:return t.payload;case GP:case eF:return nF.error;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nF.loading,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case WP:case zP:case YP:case KP:return!0;case HP:case GP:case QP:case XP:case tF:return!1;case eF:return nF.loading;default:return e}},removing:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nF.removing,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case ZP:return Object(c.a)(Object(c.a)({},e),{},{rooms:[].concat(Object(aj.a)(e.rooms),[t.payload])});case $P:return Object(c.a)(Object(c.a)({},e),{},{rooms:e.rooms.filter((function(e){return e!==t.payload}))});default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:nF.ready,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case HP:return{surveyIsReady:e.surveyIsReady,flooringIsReady:!0};case GP:return{surveyIsReady:!0,flooringIsReady:e.flooringIsReady};case eF:return nF.ready;default:return e}}}),aF=function(){return{type:eF}},oF=function(e){return{type:tF,payload:e}},iF=function(){return{type:zP}},cF=function(e){return{type:ZP,payload:Number(e)}},sF=function(e){return{type:GP,payload:e}},lF=function(e){return{type:$P,payload:Number(e)}},uF=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n().currentJobSurvey.ready.flooringIsReady){e.next=6;break}return e.next=4,JP.getFlooringTypes();case 4:r=e.sent,t((a=r.data,{type:HP,payload:a}));case 6:case"end":return e.stop()}var a}),e)})));return function(t,n){return e.apply(this,arguments)}}()},dF=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[qP.getJobSurvey(e),n(uF())],n(iF()),t.prev=2,t.next=5,Promise.all(r);case 5:a=t.sent,o=a[0].data,n(sF(o)),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),n(oF(t.t0)),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},pF=function(e,t,n){var r=n.optionId,a=n.answer;return function(){var n=Object(lj.a)(sj.a.mark((function n(o){var i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return i={},r&&(i.site_survey_question_option_id=r),a&&(i.answer=a),o({type:YP}),n.prev=4,n.next=7,qP.attachQuestionOption(e,t,i);case 7:o({type:QP}),n.next=14;break;case 10:throw n.prev=10,n.t0=n.catch(4),o(oF(n.t0)),n.t0;case 14:case"end":return n.stop()}}),n,null,[[4,10]])})));return function(e){return n.apply(this,arguments)}}()},hF=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a,o,i,c;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r({type:KP}),n.prev=1,!t.area_id){n.next=21;break}return n.next=5,qP.updateJobRooms(e,t,t.area_id);case 5:return a=[qP.getJobSurvey(t.job_id),r(uF())],r(iF()),n.prev=7,n.next=10,Promise.all(a);case 10:o=n.sent,i=o[0].data,r(sF(i)),n.next=19;break;case 15:throw n.prev=15,n.t0=n.catch(7),r(oF(n.t0)),n.t0;case 19:n.next=25;break;case 21:return n.next=23,qP.postJobRooms(e,t);case 23:c=n.sent,r((s=c.data,{type:XP,payload:s}));case 25:n.next=31;break;case 27:throw n.prev=27,n.t1=n.catch(1),r(oF(n.t1)),n.t1;case 31:case"end":return n.stop()}var s}),n,null,[[1,27],[7,15]])})));return function(e){return n.apply(this,arguments)}}()},bF=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(cF(t)),n.prev=1,n.next=4,qP.removeJobRooms(e,t);case 4:r(lF(t)),n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(1),r(oF(n.t0)),n.t0;case 11:case"end":return n.stop()}}),n,null,[[1,7]])})));return function(e){return n.apply(this,arguments)}}()};function fF(){var e=Object(f.a)(["\n  display: table-row;\n  color: unset;\n  &:not(:last-of-type) "," {\n    border-bottom: ",";\n  }\n  &:hover {\n    color: unset;\n    text-decoration: none;\n  }\n"]);return fF=function(){return e},e}function mF(){var e=Object(f.a)(["\n  display: table-row;\n  &:not(:last-of-type) "," {\n    border-bottom: ",";\n  }\n"]);return mF=function(){return e},e}function jF(){var e=Object(f.a)(["\n  display: table-cell;\n  ",";\n"]);return jF=function(){return e},e}function vF(){var e=Object(f.a)(["\n  display: table-row-group;\n"]);return vF=function(){return e},e}function OF(){var e=Object(f.a)(["\n  display: table-cell;\n  ",";\n  border-bottom: ",";\n"]);return OF=function(){return e},e}function gF(){var e=Object(f.a)(["\n  display: table-header-group;\n"]);return gF=function(){return e},e}function xF(){var e=Object(f.a)(["\n  display: table;\n  border: ",";\n"]);return xF=function(){return e},e}function yF(){var e=Object(f.a)(["\n  padding: 0.75em;\n"]);return yF=function(){return e},e}var _F="1px solid ".concat(_.gray2," !important"),wF=Object(y.css)(yF()),SF=y.default.div(xF(),_F),kF=y.default.div(gF()),CF=y.default.div(OF(),wF,_F),NF=y.default.div(vF()),EF=y.default.div(jF(),wF),AF=y.default.div(mF(),EF,_F),IF=Object(y.default)(v.b)(fF(),EF,_F);function TF(){var e=Object(f.a)(["\n  display: table-row;\n  background: ",";\n  cursor: pointer;\n  &:not(:last-of-type) "," {\n    border-bottom: 1px solid "," !important;\n  }\n  &:hover {\n    background-color: ",";\n  }\n"]);return TF=function(){return e},e}function RF(){var e=Object(f.a)(["\n  font-weight: normal;\n  color: ",";\n"]);return RF=function(){return e},e}function DF(){var e=Object(f.a)(["\n  font-weight: bold;\n  color: ",";\n"]);return DF=function(){return e},e}function MF(){var e=Object(f.a)(["\n  float: right;\n"]);return MF=function(){return e},e}function LF(){var e=Object(f.a)(["\n  min-width: 200px;\n"]);return LF=function(){return e},e}var PF=y.default.div(LF()),FF=y.default.div(MF()),UF=y.default.div(DF(),_.black0),BF=(y.default.div(RF(),_.black0),y.default.div(TF(),(function(e){return e.selected?_.gray2:""}),EF,_.gray2,(function(e){return e.selected?_.gray2:_.semiGray})));function VF(){var e=Object(f.a)(["\n  ","\n  position: relative;\n  ",", ",", "," {\n    ","\n  }\n  "," {\n    ","\n  }\n  "," ",", "," {\n    ","\n  }\n  "," {\n    "," {\n      "," {\n        ","\n      }\n    }\n  }\n  .no-items {\n    color: ",";\n    display: flex;\n    justify-content: center;\n    align-items: center;\n    text-align: center;\n    position: absolute;\n    height: ","px;\n    left: 0;\n    right: 0;\n    bottom: 0;\n    pointer-events: none;\n  }\n"]);return VF=function(){return e},e}function JF(){var e=Object(f.a)(["\n  ","\n  tr {\n    ","\n  }\n  td {\n    ","\n  }\n  tbody tr {\n    ","\n  }\n  thead {\n    tr {\n      th {\n        ","\n      }\n    }\n  }\n  .no-items {\n    color: ",";\n    text-align: center;\n  }\n"]);return JF=function(){return e},e}function qF(){var e=Object(f.a)(["\n  color: ",";\n  ","\n"]);return qF=function(){return e},e}function zF(){var e=Object(f.a)(["\n  cursor: pointer;\n  &.selected-row {\n    background-color: ",";\n    &:hover {\n      opacity: 0.75;\n    }\n  }\n  &:hover {\n    background-color: ",";\n  }\n"]);return zF=function(){return e},e}function GF(){var e=Object(f.a)(["\n  padding: 5px 15px;\n  vertical-align: middle;\n  &:first-child {\n    padding-left: 20px;\n  }\n"]);return GF=function(){return e},e}function WF(){var e=Object(f.a)(["\n  height: ","px;\n"]);return WF=function(){return e},e}function HF(){var e=Object(f.a)(["\n  border: 1px solid ",";\n  width: 100%;\n"]);return HF=function(){return e},e}var YF=Object(y.css)(HF(),_.gray2),QF=Object(y.css)(WF(),50),KF=Object(y.css)(GF()),ZF=Object(y.css)(zF(),_.blue0,_.semiGray),XF=Object(y.css)(qF(),_.gray4,KF),$F=y.default.table(JF(),YF,QF,KF,ZF,XF,_.gray4),eU=Object(y.default)(SF)(VF(),YF,AF,IF,BF,QF,EF,KF,NF,AF,IF,ZF,kF,AF,CF,XF,_.gray4,50),tU=$F;function nU(){var e=Object(f.a)(["\n  thead tr {\n    height: 50px;\n  }\n  tbody tr:nth-of-type(odd) {\n    background: ",";\n  }\n  input {\n    background: white;\n    border: 1px solid ",";\n  }\n  .form-group {\n    margin-bottom: 0;\n  }\n"]);return nU=function(){return e},e}var rU,aU=Object(y.default)(tU)(nU(),_.gray0,_.gray2);!function(e){e.Question="question",e.Answer="answer",e.QuestionAnswer="question_answer"}(rU||(rU={}));var oU="AddQuestionToJobForm",iU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={answerOptions:[],question:void 0},e.onQuestionChange=function(t){var n=t;e.setState({question:n}),e.setState({answerOptions:n.site_survey_question_options||[]})},e.renderBody=function(){var t=e.props,n=t.questions,r=t.handleSubmit,o=e.state,i=o.question,c=o.answerOptions;return Object(a.jsx)("form",{id:oU,onSubmit:r,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(Hv.a,{name:rU.Question,component:xO,options:n,placeholder:"Select question",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},label:"Question",validate:Dv,onChange:e.onQuestionChange})}),i&&Object(a.jsx)("div",{className:"col-5",children:c.length>0?Object(a.jsx)(Hv.a,{name:rU.QuestionAnswer,component:xO,options:c,placeholder:"Select Answer",getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},label:"Answer",validate:Dv}):Object(a.jsx)(Hv.a,{name:rU.Answer,component:yg,placeholder:"Type answer",label:"Answer",validate:Dv})})]})})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",form:oU,children:"Save"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,loading:r,footer:this.renderFooter(),body:this.renderBody(),title:"Add Question"})})}}]),n}(p.PureComponent),cU=Object(jv.a)({form:oU})(iU);function sU(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  margin-top: 60px;\n"]);return sU=function(){return e},e}function lU(){var e=Object(f.a)(["\n  margin-bottom: ",";\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n  }\n"]);return lU=function(){return e},e}function uU(){var e=Object(f.a)(["\n  .form-group {\n    max-width: 200px;\n  }\n  th {\n    &:first-child {\n      width: 50%;\n      max-width: 320px;\n    }\n    &:last-child {\n      width: 78px;\n    }\n  }\n  td:first-child {\n    input {\n      max-width: 250px;\n    }\n  }\n"]);return uU=function(){return e},e}function dU(){var e=Object(f.a)(["\n  th:last-child {\n    width: 30%;\n    min-width: 160px;\n    padding-right: 80px;\n  }\n  td:first-child {\n    font-weight: ",";\n    &.no-items {\n      color: ",";\n      font-weight: ",";\n      text-align: center;\n    }\n  }\n  .form-group {\n    max-width: 200px;\n  }\n"]);return dU=function(){return e},e}function pU(){var e=Object(f.a)(["\n  cursor: pointer;\n  opacity: ",";\n  display: flex;\n  justify-content: space-between;\n  .icon {\n    padding: 4px;\n  }\n"]);return pU=function(){return e},e}var hU=y.default.div(pU(),(function(e){return e.disabled?.3:1})),bU=Object(y.default)(aU)(dU(),lm.bold,_.gray4,lm.normal),fU=Object(y.default)(aU)(uU()),mU=y.default.span(lU(),sm.smaller,_.blue4),jU=y.default.h2(sU(),lm.bold,sm.normal,_.gray4),vU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).scheduledUpdateTimer=null,e.state={addNewRoom:!1,edited:!1,showModal:!1,editingId:null},e.roomsCountTouched=!1,e.clippedRoom={},e.addNewRoom=function(){e.state.edited||e.setState({addNewRoom:!0})},e.onSaveRoom=function(t){return function(n){var r=e.state,a=r.edited,o=r.editingId,i=n.rooms[t];return i.name&&i.flooring_type?(e.setState({edited:!1,editingId:null}),e.props.onSubmit({rooms:[i],edited:a,editingId:o})):Promise.reject()}},e.onSaveQuestions=function(t){var n=t.questions.filter((function(t,n){var r=e.props.initialValues.questions[n];return!!t.site_survey_question_option_id&&r&&(t.site_survey_question_option_id.value!==r.site_survey_question_option_id.value||t.answer!==r.answer)}));e.props.onSubmit({questions:n})},e.renderNoQuestions=function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:3,children:"No questions..."})})},e.renderNoRooms=function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:3,children:"No rooms..."})})},e.renderQuestionsRows=function(t){return function(r){var o=!t.has(vx.JOBS_UPDATE),i=r.fields,c=i.getAll();c&&0!==c.length||e.props.initialValues.questions.forEach((function(e){return i.push(e)}));var s=i.map((function(t,r){var c=i.getAll()[r];return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:c.name}),Object(a.jsx)("td",{children:c.site_survey_question_options.length?Object(a.jsx)(Hv.a,{name:"".concat(t,".site_survey_question_option_id"),placeholder:"Select",component:xO,options:c.site_survey_question_options.map((function(e){return{value:e.id,label:e.name}})),onChange:function(){return setTimeout(e.props.handleSubmit(e.onSaveQuestions))},selectStyles:n.customTypeSelectStyles,disabled:o}):Object(a.jsx)(Hv.a,{name:"".concat(t,".answer"),placeholder:"Answer",component:yg,onChange:e.scheduleUpdate(r),disabled:o})}),Object(a.jsx)("td",{children:Object(a.jsx)(hU,{children:!o&&Object(a.jsx)(cm,{name:Xf.Remove,onClick:function(){return e.removeQuestion(c)}})})})]},"qn-row-".concat(r))}));return Object(a.jsx)(a.Fragment,{children:s})}},e.scheduleUpdate=function(t){return function(n){!function e(){document.getElementsByName("questions[".concat(t,"].answer"))[0].onblur=function(n){n.relatedTarget||setTimeout((function(){document.getElementsByName("questions[".concat(t,"].answer"))[0].focus(),e()}))}}();var r=e.props.job;e.scheduledUpdateTimer&&clearTimeout(e.scheduledUpdateTimer),r&&(e.scheduledUpdateTimer=setTimeout(e.handleSubmitForm(t),1e3))}},e.handleSubmitForm=function(t){return function(){var n=e.props,r=n.handleSubmit;return n.submitting?(e.scheduleUpdate(t),Promise.resolve()):r(e.onSaveQuestions)()}},e.renderRoomFields=function(){return function(t){var r=t.fields;e.state.addNewRoom&&(r.push(e.clippedRoom),e.clippedRoom={},e.setState({addNewRoom:!1}));var o=r.map((function(t,o){var i=function(t){e.props.handleSubmit(e.onSaveRoom(o))().then((function(){return r.remove(o)}))};return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(Hv.a,{name:"".concat(t,".name"),placeholder:"Enter a name...",component:yg,onBlur:i})}),Object(a.jsx)("td",{children:Object(a.jsx)(Hv.a,{name:"".concat(t,".flooring_type"),placeholder:"Select type",component:xO,options:e.flooringOptions,onBlur:i,selectStyles:n.customTypeSelectStyles})}),Object(a.jsx)("td",{children:e.renderRoomControls((function(){r.remove(o),e.setState({edited:!1,editingId:null})}),(function(){}),(function(){}))})]},"rooms-row-".concat(o))}));return Object(a.jsx)(a.Fragment,{children:o})}},e.renderRoomsRows=function(t){return e.props.jobRooms?e.props.jobRooms.map((function(n,r){var o=e.props.flooringTypes.find((function(e){return e.id===n.flooring_type_id})),i=e.props.removingRooms.includes(Number(n.id)),c=function(){var t=Object(lj.a)(sj.a.mark((function t(){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(iw("Confirm","Delete Room!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to permanently delete room ",Object(a.jsx)("strong",{children:n.name})," of type ",Object(a.jsx)("strong",{children:(null===o||void 0===o?void 0:o.name)||"Unknown"}),"? This action cannot be undone!"]})));case 3:if(!t.sent){t.next=9;break}return e.props.onRemoveRoom(n.id),t.abrupt("return",Promise.resolve());case 9:return t.abrupt("return",Promise.reject(!0));case 10:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:n.name}),Object(a.jsx)("td",{children:o?o.name:"Unknown"}),Object(a.jsx)("td",{children:t&&e.renderRoomControls(c,(function(){e.state.edited||e.copyExistRoom({name:n.name,flooring_type:e.flooringOptions.find((function(e){return e.value===n.flooring_type_id}))})}),(function(){e.editExistRoom({name:n.name,flooring_type:e.flooringOptions.find((function(e){return e.value===n.flooring_type_id})),areaId:n.id})}),i)})]},"room-tr-".concat(r))})):null},e.copyExistRoom=function(t){e.clippedRoom=t,e.addNewRoom()},e.editExistRoom=function(t){e.setState({edited:!0,editingId:t.areaId}),e.clippedRoom=t,e.addNewRoom()},e.renderRoomControls=function(t,n,r){var o=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=o?function(){return null}:t,c=o?function(){return null}:n||function(){return null};return Object(a.jsxs)(hU,{disabled:o||e.props.disabled,children:[Object(a.jsx)("div",{className:"icon",children:Object(a.jsx)(cm,{name:Xf.CopyPaste,onClick:c})}),Object(a.jsx)("div",{className:"icon",children:Object(a.jsx)(cm,{name:Xf.Remove,onClick:i})})]})},e.removeQuestion=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.loadSurvey,t.next=3,a(iw("Confirm","Delete question?"));case 3:if(!t.sent){t.next=8;break}return t.next=7,qP.detachQuestionOption(n.job_id,n.id);case 7:o(n.job_id);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.openModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.onQuestionAdd=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.job,o=r.loadSurvey,i={},n[rU.Answer]&&(i.answer=n[rU.Answer]),n[rU.QuestionAnswer]&&(i.site_survey_question_option_id=n[rU.QuestionAnswer].id),!a){t.next=9;break}return t.next=7,qP.attachQuestionOption(a.id,n[rU.Question].id,i);case 7:e.closeModal(),o(a.id);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.scheduledUpdateTimer&&clearTimeout(this.scheduledUpdateTimer)}},{key:"componentDidUpdate",value:function(e){this.props.disabled||!e.surveyIsReady&&this.props.surveyIsReady&&!this.roomsCountTouched&&0===this.props.jobRooms.length&&(this.addNewRoom(),this.roomsCountTouched=!0)}},{key:"render",value:function(){var e=this,t=this.props.questionsForAdd,n=this.state.showModal;return Object(a.jsx)(Cx.Consumer,{children:function(r){return Object(a.jsxs)(a.Fragment,{children:[n&&r.has(vx.JOBS_UPDATE)&&Object(a.jsx)(cU,{isOpen:n,onClose:e.closeModal,questions:t,onSubmit:e.onQuestionAdd}),Object(a.jsxs)("form",{children:[Object(a.jsx)(jU,{children:"Triage questions"}),Object(a.jsxs)(bU,{className:"table table-striped",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Question"}),Object(a.jsx)("th",{scope:"col",colSpan:2,children:"Customer Response"})]})}),Object(a.jsx)("tbody",{children:e.props.initialValues.questions.length>0?Object(a.jsx)(mv.a,{name:"questions",component:e.renderQuestionsRows(r)}):e.renderNoQuestions()})]}),!e.props.disabled&&r.has(vx.JOBS_UPDATE)&&Object(a.jsx)(mU,{onClick:e.openModal,children:"Add question"}),Object(a.jsx)(jU,{children:"Rooms"}),Object(a.jsxs)(fU,{className:"table table-striped",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{scope:"col",children:"Name"}),Object(a.jsx)("th",{scope:"col",children:"Flooring Type"}),Object(a.jsx)("th",{})]})}),Object(a.jsxs)("tbody",{children:[e.props.disabled&&0===e.props.jobRooms.length?e.renderNoRooms():e.renderRoomsRows(r.has(vx.JOBS_AREAS_MANAGE)&&r.has(vx.JOBS_UPDATE)),Object(a.jsx)(mv.a,{name:"rooms",component:e.renderRoomFields()})]})]}),!e.props.disabled&&r.has(vx.JOBS_AREAS_MANAGE)&&Object(a.jsx)(mU,{onClick:e.addNewRoom,children:"Add room"})]})]})}})}},{key:"flooringOptions",get:function(){return this.props.flooringTypes.map((function(e){return{value:e.id,label:e.name}}))}}]),n}(p.PureComponent);vU.customTypeSelectStyles={control:function(e){return Object(c.a)(Object(c.a)({},e),{},{maxWidth:"200px",borderColor:_.gray2})}};var OU=Object(sg.compose)(Object(jv.a)({form:"JobSiteSurveyForm",enableReinitialize:!0}),Object(b.b)())(vU);function gU(){var e=Object(f.a)(["\n  margin: 45px auto;\n"]);return gU=function(){return e},e}var xU=y.default.div(gU()),yU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadSurvey=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,!r.currentJobSurvey.loading){t.next=3;break}return t.abrupt("return",Promise.resolve());case 3:return a(aF()),t.next=6,a(dF(n));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.submitSurveyForm=function(t){var n=[];return t.rooms&&(t.edited?n.push(e.submitRooms(t.rooms,t.editingId)):n.push(e.submitRooms(t.rooms))),t.questions&&n.push(e.submitQuestions(t.questions)),Promise.all(n)},e.submitRooms=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.dispatch,i=a.currentJob,c=i.data.id,s=n.map((function(e){var t={flooring_type_id:e.flooring_type.value,name:e.name,job_id:c,area_id:r};return o(hF(c,t))})),t.abrupt("return",Promise.all(s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.submitQuestions=function(t){var n=e.props,r=n.dispatch,a=n.currentJob.data.id,o=t.map((function(e){var t=e.site_survey_question_option_id,n=e.answer;return t&&t.value||n?r(pF(a,e.id,{optionId:t.value,answer:n})):Promise.resolve()}));return Promise.all(o)},e.removeRoom=function(t){var n=e.props,r=n.dispatch,a=n.currentJob.data.id;r(bF(a,t))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match;this.loadSurvey(e.params.id)}},{key:"componentDidUpdate",value:function(e){var t=this.props.match,n=e.match.params.id;t.params.id!==n&&this.loadSurvey(t.params.id)}},{key:"render",value:function(){var e=this,t=this.props.currentJobSurvey.data,n=t.jobRooms,r=t.flooringTypes,o=t.allQuestions,i=this.props.currentJobSurvey,c=i.loading,s=i.ready,l=this.props.currentJobSurvey.removing.rooms,u=this.props.currentJob.data&&this.props.currentJob.data.edit_forbidden;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(hC,{padding:"0 30px",overflow:"visible",children:Object(a.jsxs)(xU,{children:[c&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(OU,{job:e.props.currentJob.data,onSubmit:e.submitSurveyForm,onRemoveRoom:e.removeRoom,removingRooms:l,jobRooms:n,flooringTypes:r,surveyIsReady:s.surveyIsReady,initialValues:e.formInitialValues,disabled:!!u||!t.has(vx.JOBS_UPDATE),questionsForAdd:o||[],loadSurvey:e.loadSurvey})]})})}})}},{key:"questions",get:function(){var e=this.props.currentJobSurvey.data,t=e.allQuestions,n=e.jobQuestions;return n&&t?n.map((function(e){return Object(c.a)(Object(c.a)({},e),t.find((function(t){return t.id===e.site_survey_question_id})))})):[]}},{key:"formInitialValues",get:function(){return{questions:this.questions.map((function(e){var t=e.site_survey_question_options.find((function(t){return t.id===e.site_survey_question_option_id})),n=t&&t.name,r={value:e.site_survey_question_option_id,label:n};return Object(c.a)(Object(c.a)({},e),{},{site_survey_question_option_id:r})})).sort((function(e,t){return e.site_survey_question_id-t.site_survey_question_id}))}}}]),n}(p.PureComponent),_U=Object(sg.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,currentJobSurvey:e.currentJobSurvey}})),O.g)(yU),wU=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/search/users-and-teams?term=".concat(t),n,r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),SU={searchTeamUserWC:Wj(wU,3),searchTeamUser:wU};function kU(){var e=Object(f.a)(["\n  display: inline-block;\n  margin-left: 12px;\n  text-transform: uppercase;\n  color: ",";\n"]);return kU=function(){return e},e}function CU(){var e=Object(f.a)(["\n  cursor: pointer;\n  position: relative;\n"]);return CU=function(){return e},e}function NU(){var e=Object(f.a)(["\n  display: inline-block;\n  margin-left: -15px;\n  font-weight: ",";\n"]);return NU=function(){return e},e}var EU=Object(y.default)(gv(["bold"])("div"))(NU(),(function(e){return e.bold&&lm.bold})),AU=y.default.div(CU()),IU=y.default.div(kU(),_.gray4),TU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.handleClick=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.onItemClick){t.next=5;break}return e.setState({loading:!0}),t.next=4,e.props.onItemClick();case 4:e.setState({loading:!1});case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.className,r=e.bold,o=e.locationCode,i=this.state.loading;return Object(a.jsxs)(AU,{children:[Object(a.jsxs)("div",{className:x()("dropdown-item",n),onClick:this.handleClick,children:[Object(a.jsx)(EU,{bold:r,children:t}),o&&Object(a.jsx)(IU,{children:o})]}),i&&Object(a.jsx)(Nv,{size:20,color:_.white})]})}}]),n}(p.PureComponent);function RU(){var e=Object(f.a)(["\n  color: ",";\n"]);return RU=function(){return e},e}function DU(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return DU=function(){return e},e}function MU(){var e=Object(f.a)(["\n  width: 265px;\n  position: relative;\n"]);return MU=function(){return e},e}var LU=y.default.div(MU()),PU=y.default.div(DU()),FU=y.default.span(RU(),_.gray3),UU={users:[],teams:[]},BU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={usersTeams:UU,isLoading:!1,isTouched:!1},e.activeRequest=void 0,e.handleSearch=function(t){if(e.activeRequest&&e.activeRequest.abort(),t){var n=SU.searchTeamUserWC(t),r=n.promise,a=n.controller;e.activeRequest=a,e.setState({isLoading:!0}),r.then((function(t){return e.setState({isLoading:!1,usersTeams:t,isTouched:!0})})).catch((function(t){"AbortError"!==t.name&&(e.setState({isLoading:!1,usersTeams:UU}),Oj(uj.Warning,"Search failed"))}))}else e.setState({usersTeams:UU,isTouched:!1,isLoading:!1})},e.debouncedSearch=Object(m.debounce)(e.handleSearch,500),e.renderIconTrigger=function(t){var n=e.props.disabled;return Object(a.jsx)(J_,{"data-tip":"Assign to","data-for":"job-menu-tooltip",onClick:n?function(){return null}:t.toggle,disabled:n,children:Object(a.jsx)(cm,{name:Xf.EditPerson})})},e.selectUserOrTeam=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onUserTeamClick(n);case 2:r.close();case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.deselectUserOrTeam=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.onSelectedUserTeamClick(n);case 3:t.next=7;break;case 5:t.prev=5,t.t0=t.catch(0);case 7:r.close();case 8:case"end":return t.stop()}}),t,null,[[0,5]])})));return function(e,n){return t.apply(this,arguments)}}(),e.renderUsersMenu=function(t){var n=e.state,r=n.usersTeams,o=n.isLoading,i=n.isTouched,c=e.props.selectedUsersTeams,s=r?r.users.concat(r.teams).filter((function(e){return!c.some((function(t){return e.id===t.id&&e.type===t.type}))})).map((function(e){return{item:e,assigned:!1}})):[],l=c.map((function(e){return{item:e,assigned:!0}})),u=Object(m.orderBy)(s.concat(l),[function(e){return e.item.name}],["asc"]);return Object(a.jsxs)(LU,{children:[Object(a.jsx)("div",{className:"px-2",children:Object(a.jsx)(aC,{loading:o,onSearchValueChange:e.debouncedSearch,placeholder:"Search..."})}),0===s.length&&i&&!o&&Object(a.jsx)(PU,{children:Object(a.jsx)(FU,{className:"px-2",children:"No users or teams found"})}),u.length>0&&Object(a.jsx)(PU,{children:u.map((function(n){return Object(a.jsx)(TU,{name:n.item.name,bold:n.assigned,locationCode:n.item.primary_location&&n.item.primary_location.code,onItemClick:n.assigned?function(){return e.deselectUserOrTeam(n.item,t)}:function(){return e.selectUserOrTeam(n.item,t)}},"".concat(n.item.id,"-").concat(n.item.type))}))})]})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.activeRequest&&this.activeRequest.abort()}},{key:"render",value:function(){return Object(a.jsx)(K_,{trigger:this.renderIconTrigger,menu:this.renderUsersMenu})}}]),n}(p.PureComponent);function VU(){var e=Object(f.a)(["\n  color: ",";\n"]);return VU=function(){return e},e}var JU=y.default.label(VU(),_.gray4);function qU(){var e=Object(f.a)(["\n  margin-right: 10px;\n"]);return qU=function(){return e},e}function zU(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  width: fit-content;\n  :not(:last-child){\n    margin-right: ","\n  }\n  input {\n    margin-right: 10px;\n  }\n"]);return zU=function(){return e},e}var GU,WU=y.default.label(zU(),(function(e){return"horizontal"===e.direction?"25px":"auto"})),HU=y.default.div(qU()),YU=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.meta,o=t.size,i=t.direction,s=t.disabled,l=t.input,u=r.touched&&r.error;return Object(a.jsxs)("div",{className:"form-group",children:[this.props.label&&Object(a.jsx)(JU,{children:this.props.label}),Object(a.jsx)("div",{className:"horizontal"===i?"d-flex":void 0,children:n&&n.map((function(t,n){return Object(a.jsxs)(WU,{id:"".concat(l.name,"_").concat(t.value),direction:i,className:"radio-list-item-wrapper ".concat(e.props.input.value===t.value?"checked":""),children:[Object(a.jsx)(HU,{children:Object(a.jsx)(FO,Object(c.a)(Object(c.a)({},e.props.input),{},{size:o||16,value:t.value,checked:e.props.input.value===t.value,disabled:t.disabled||s}))}),Object(a.jsx)("div",{children:t.label})]},n)}))}),u&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:r.error})]})}}]),n}(p.PureComponent),QU=n(52);function KU(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  margin: 0 -","px;\n  padding: 0 ","px;\n  padding-top: 20px;\n  margin-top: 40px;\n"]);return KU=function(){return e},e}function ZU(){var e=Object(f.a)(["\n  flex-grow: 1;\n"]);return ZU=function(){return e},e}function XU(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: column;\n  min-height: ","px;\n"]);return XU=function(){return e},e}var $U=y.default.div(XU(),GO),eB=y.default.form(ZU()),tB=y.default.div(KU(),_.gray2,zO,zO),nB={daily:"DAILY",weakly:"WEEKLY",fortnightly:"FORTNIGHTLY",monthly:"MONTHLY",yearly:"YEARLY",custom:"CUSTOM"},rB=[{value:nB.weakly,label:"Every Week"},{value:nB.fortnightly,label:"Every Fortnight"},{value:nB.monthly,label:"Every Month"},{value:nB.yearly,label:"Every Year"},{value:nB.custom,label:"Custom"}],aB=[{value:nB.daily,label:"Daily"},{value:nB.weakly,label:"Weekly"},{value:nB.monthly,label:"Monthly"},{value:nB.yearly,label:"Yearly"}],oB=(GU={},Object(k.a)(GU,nB.daily,"Day"),Object(k.a)(GU,nB.weakly,"Week"),Object(k.a)(GU,nB.monthly,"Month"),Object(k.a)(GU,nB.yearly,"Year"),GU);function iB(e){return(e.repeat!==nB.custom?QU.a.optionsToString({freq:QU.a[e.repeat!==nB.fortnightly?e.repeat:nB.weakly],interval:e.repeat!==nB.fortnightly?1:2,dtstart:new Date(1e3*e.start_date.add(1,"d").unix())}):QU.a.optionsToString({freq:QU.a[e.frequency.value],interval:e.every,dtstart:new Date(1e3*e.start_date.add(1,"d").unix()),until:new Date(1e3*e.end_date.add(1,"d").unix())})).split("\n").join(";").replace("RRULE:","").replace("DTSTART:","DTSTART=")}var cB=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,form:{}},e.handleFormChange=function(){setTimeout((function(){e.props.handleSubmit(e.setData)()}))},e.setData=function(t){e.setState({form:t})},e.createRecurringJob=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.currentJob.data)){t.next=15;break}return e.setState({loading:!0}),t.prev=3,t.next=6,zy.createRecurringJob({recurrence_rule:iB(e.state.form),job_service_id:n.job_service_id||0,insurer_id:n.insurer_id||0,site_address_id:n.site_address_id||0,owner_location_id:n.owner_location_id||0,description:n.description||"---",job_id:n.id||0,user_id:e.props.userId});case 6:e.setState({loading:!1}),Oj(uj.Success,"Recurring job successfully created!"),e.onClose(),t.next=15;break;case 11:t.prev=11,t.t0=t.catch(3),e.setState({loading:!1}),Oj(uj.Danger,Object(a.jsx)(a.Fragment,{children:Object.entries(t.t0.fields).map((function(e,t){return Object(a.jsx)("div",{children:e[1]},t)}))}));case 15:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.setEvery=function(){var t=e.state.form;if(t){var n=t.frequency;return oB[(n||{}).value]||""}return""},e.onClose=function(){var t=e.props,n=t.onClose,r=t.reset;e.setState({loading:!1,form:{}}),r(),n()},e.customHintRenderCondition=function(){var t=e.state.form,n=t.frequency,r=t.every,a=n.value===nB.daily,o=[nB.weakly,nB.monthly,nB.yearly].includes(n.value)&&r;return a||o},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.initialize({every:1})}},{key:"renderHint",value:function(){var e=this.state.form;if(!e)return"";var t=e,n=t.frequency,r=t.start_date;switch((n||{}).value){case"2":return r.format("dddd");default:return""}}},{key:"renderBody",value:function(){var e=this.state.form,t=e.repeat,n=e.start_date,r=e.end_date,o=e.every,i=e.frequency;return Object(a.jsxs)($U,{children:[Object(a.jsxs)(eB,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"start_date",label:"Start Date",placeholder:"Start Date",component:s_,futureEnabled:!0,onChange:this.handleFormChange})})}),t!==nB.custom&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"repeat",label:"Repeat",list:rB,direction:"vertical",component:YU,onChange:this.handleFormChange})})})}),t===nB.custom&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"frequency",label:"Frequency",placeholder:"Frequency",options:aB,component:xO,onChange:this.handleFormChange})}),i&&i.value!==nB.daily&&Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"every",label:"Every X ".concat(this.setEvery().toLowerCase(),"(s)"),type:"number",min:1,component:yg,onChange:this.handleFormChange})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"end_date",label:"Until Date",placeholder:"Until Date",component:s_,futureEnabled:!0,onChange:this.handleFormChange})})})]})]}),t&&t!==nB.custom&&n&&Object(a.jsxs)(tB,{children:["This job will automatically reoccur ",Object(a.jsx)("strong",{children:t.toLowerCase()})," on"," ",Object(a.jsx)("strong",{children:n.format("dddd")})," starting"," ",Object(a.jsx)("strong",{children:bv(n,"D MMM YYYY")})," with no end date."]}),t&&t===nB.custom&&n&&r&&i&&this.customHintRenderCondition()&&Object(a.jsxs)(tB,{children:["This job will automatically reoccur"," ",Object(a.jsxs)("strong",{children:["every ",o>1&&i.value!==nB.daily?o:""," ",this.setEvery().toLowerCase(),o>1&&i.value!==nB.daily?"s":""]})," ",i.value!==nB.daily?"on ":"",Object(a.jsx)("strong",{children:this.renderHint()})," starting"," ",Object(a.jsx)("strong",{children:bv(n,"D MMM YYYY")})," and stop on"," ",Object(a.jsx)("strong",{children:bv(r,"D MMM YYYY")}),"."]})]})}},{key:"renderFooter",value:function(){var e=this.state.form,t=e.repeat,n=e.start_date,r=e.end_date,o=e.frequency;return Object(a.jsx)(Xg,{className:"btn btn-primary",onClick:this.createRecurringJob,disabled:!(t&&n&&(t!==nB.custom||t===nB.custom&&r&&o&&this.customHintRenderCondition())),children:"Create"})}},{key:"render",value:function(){var e=this.props.isOpen;return Object(a.jsx)(qO,{isOpen:e,children:Object(a.jsx)(cg,{onClose:this.onClose,title:"Create Recurring Job",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent),sB=Object(sg.compose)(Object(jv.a)({form:"RecurringJobForm"}),Object(b.b)((function(e){return{currentJob:e.currentJob,userId:OP(e)}})))(cB),lB=function(e){var t=Object(c.a)(Object(c.a)({},e),{},{date:bv(e.date),items:e.items||[]});return e.location&&(t.location_id=e.location.id),e.recipient_contact&&(t.recipient_contact_id=e.recipient_contact.id),e.job&&(t.job_id=e.job.id),e.reference&&(t.reference=e.reference),e.invoice_template_id&&e.invoice_template_id>0&&(t.invoice_template_id=e.invoice_template_id),delete t.job,delete t.location,delete t.recipient_contact,0===t.invoice_template_id&&delete t.invoice_template_id,t},uB=function(e){var t=Object(c.a)({},e);return t.fields&&(t.fields={location:e.fields.location_id,recipient_contact:e.fields.recipient_contact_id,job:e.fields.job_id,date:e.fields.date,reference:e.fields.reference}),t},dB=function(e){var t={description:e.description,unit_cost:e.unit_cost,quantity:e.quantity};return e.job&&(t.job_id=e.job.id),e.gs_code&&(t.gs_code_id=e.gs_code.id),e.gl_account&&(t.gl_account_id=e.gl_account.id),e.tax_rate&&(t.tax_rate_id=e.tax_rate.id),t},pB=function(e){var t=Object(c.a)(Object(c.a)({},e.data),{},{date:pv(e.data.date),due_at:pv(e.data.due_at)});return e.data.job&&(t.job=Vx(e.data.job)),{data:t}},hB=function(e){var t;return Object(c.a)(Object(c.a)({},lB(e)),{},{due_at:fv(e.due_at),payment_term_id:null===e||void 0===e||null===(t=e.payment_term)||void 0===t?void 0:t.id,description:null===e||void 0===e?void 0:e.description,reference:e.reference?e.reference:void 0})},bB=function(e){var t=uB(e);return t.fields&&(t.fields.due_at=e.fields.due_at),t},fB=function(e){return Object(c.a)(Object(c.a)({},dB(e)),{},{discount:e.discount||0,position:(null===e||void 0===e?void 0:e.position)||0})},mB=function(e,t){return void 0!==t?e.find((function(e){return e.id===t})):void 0};function jB(e,t){var n=[];for(var r in t)t.hasOwnProperty(r)&&n.push({name:r,path:t[r]});return Object(c.a)(Object(c.a)({},function(e,t){var n={};return t.forEach((function(t){var r=t.name,a=t.path;n[r]=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ev.get("".concat(e,"/").concat(a),n);case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()})),n}(e,n)),{},{getInfo:function(){var t=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ev.get("".concat(e,"/info"));case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()})}var vB="/v1/finance/invoices",OB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(vB,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",pB(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("".concat(vB,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=fB(n),e.next=3,ev.post("".concat(vB,"/").concat(t,"/items"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),yB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=fB(r),e.next=3,ev.patch("".concat(vB,"/").concat(t,"/items/").concat(n),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),_B=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(vB,"/").concat(t,"/items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),wB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(vB,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),SB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(vB,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),kB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(vB,"/").concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),CB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(vB,"/").concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),NB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(vB,"/").concat(t,"/approve-requests"),{approver_list:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),EB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("".concat(vB,"/").concat(t),{recipient_address:n,recipient_name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),AB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(vB,"/").concat(t,"/approve"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),IB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(vB,"/").concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),TB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(vB,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(vB,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),DB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.downloadFile("".concat(vB,"/").concat(t,"/document"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),MB=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("".concat(vB,"/listings/search"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("".concat(vB,"/").concat(t,"/items/positions"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),PB=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/invoice-templates");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),FB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/attach/invoice-item"),{bulkdata:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),UB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/finance/invoices/".concat(t,"/send"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BB=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/finance/invoices/".concat(t,"/declined"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),VB=jB("".concat(vB,"/listings"),{getDraft:"draft",getAll:"all",getUnpaid:"unpaid",getOverdue:"overdue",getPaid:"paid",search:"search"}),JB=Object(c.a)(Object(c.a)({},VB),{},{findById:OB,create:function(e){var t=hB(e);return ev.post(vB,t).then(pB).catch((function(e){return Promise.reject(bB(e))}))},update:function(e,t){var n=hB(t);return ev.patch("".concat(vB,"/").concat(e),n).then(pB).catch((function(e){return Promise.reject(bB(e))}))},createItem:xB,updateItem:yB,removeItem:_B,addNoteToInvoice:wB,getInvoiceNotes:kB,removeNoteFromInvoice:SB,getApproverList:CB,sendApproveRequest:NB,adjustInvoice:EB,approveInvoice:AB,getInvoiceTags:IB,addTag:TB,removeTag:RB,remove:gB,forPrint:DB,getFilterInvoices:MB,invoiceItemsPositionUpdate:LB,getInvoicetemplates:PB,setInvoiceItemToJobCostingItem:FB,sendInvoiceToCustomer:UB,invoiceDecline:BB}),qB=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={stateCreateRecurringJobModal:!1},e.onUserClick=function(t){return zy.assignUserOrTeam(e.props.job.id,t.id,t.type).then(e.props.onUpdate)},e.onSelectedUserClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.dispatch,i=r.job,t.next=3,o(iw("Confirm","Unassign Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to revoke assigment of Job ",Object(a.jsx)("strong",{children:zy.getJobName(i)})," from ",Object(a.jsx)("strong",{children:n.name}),"?"]})));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",Promise.reject(!0));case 6:return t.abrupt("return",zy.removeUserOrTeam(e.props.job.id,n.id,n.type).then(e.props.onUpdate));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.dispatch(qD(e.props.job.id,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onStatusClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,zy.applyNewJobStatus(e.props.job.id,{status:n.name,note:"---"});case 3:e.props.nextStatuses.fetch(e.props.job.id),e.props.onUpdate(),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Oj(uj.Danger,"This status can't be applied");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.openModal=function(t){e.setState(Object(k.a)({},t,!0))},e.closeModal=function(t){e.setState(Object(k.a)({},t,!1))},e.deleteJob=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.history,o=n.job,i=n.dispatch,t.next=3,i(iw("Confirm","Delete Job!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to permanently delete Job ",Object(a.jsx)("strong",{children:zy.getJobName(o)}),"? This action cannot be undone!"]})));case 3:if(t.sent){t.next=6;break}return t.abrupt("return",Promise.reject(!0));case 6:return t.abrupt("return",zy.removeJob(o.id).then((function(){window.location.pathname.startsWith("/job/".concat(o.id))&&r.replace("/jobs/inbox")})));case 7:case"end":return t.stop()}}),t)}))),e.followJob=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.onUpdate,t.next=3,zy.followJob(r.id);case 3:return o=t.sent,a(),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),e.unfollowJob=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.onUpdate,t.next=3,zy.unfollowJob(r.id);case 3:return o=t.sent,a(),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)}))),e.canICreateRecurringJob=function(){var t=e.props.job;return t.job_service_id&&t.insurer_id&&t.site_address_id&&t.owner_location_id},e.createInvoiceFromJob=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.currentJobContacts,o=n.history,t.prev=1,t.next=4,JB.create({location:{id:r.assigned_location_id},recipient_contact:a.data.find((function(e){return e.invoice_to})),job:{id:r.id},date:pm()(),due_at:pm()().add(1,"d")});case 4:(i=t.sent)&&o.push("/finance/invoices/details/".concat(i.data.id)),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Oj(uj.Danger,"Could not create invoice");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.createPOFromJob=function(){var t=e.props,n=t.job;t.history.push("/finance/purchase-orders/create?form_job_id=".concat(n.id,"&form_location_id=").concat(n.assigned_location_id))},e.createCNFromJob=function(){var t=e.props,n=t.job;t.history.push("/finance/credit-notes/create?form_job_id=".concat(n.id,"&form_location_id=").concat(n.assigned_location_id))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.job;e.nextStatuses.fetch(t.id)}},{key:"componentDidUpdate",value:function(e){um.a.rebuild()}},{key:"getNextStatuses",value:function(){var e=this.props,t=e.nextStatuses,n=e.jobInvoices;if(t&&t.data){var r=!n||!!n&&n.filter((function(e){return e.virtual_status===am.unpaid})).length>0;return t.data.data.map((function(e,t){return{id:t,name:e,onClick:r&&[zj.Cancelled,zj.Closed].includes(e)?function(){return Oj(uj.Warning,"There are outstanding invoices that have not been paid.")}:void 0}}))}return[]}},{key:"getRestMenuItems",value:function(e){var t=this,n=this.props,r=n.job,a=n.userId,o=(n.location,n.currentJobContacts.data),i=(n.onContactsToggle,(r.followers||[]).map((function(e){return e.id})).includes(a)),c=!(!o||!o.find((function(e){return e.invoice_to})));return[{name:i?"Unfollow job":"Follow job",onClick:i?this.unfollowJob:this.followJob,disabled:r.edit_forbidden||!e.has(vx.JOBS_VIEW)||!a},{name:"Create recurring job",disabled:!this.canICreateRecurringJob()||!e.has(vx.JOBS_MANAGE_RECURRING),onClick:function(){t.openModal("stateCreateRecurringJobModal")}},{type:"divider"},{name:"Create Invoice...",disabled:!e.has(vx.FINANCE_INVOICES_MANAGE)||!c,onClick:this.createInvoiceFromJob},{name:"Create PO...",disabled:!e.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE)||!c,onClick:this.createPOFromJob},{name:"Create CN...",disabled:!e.has(vx.FINANCE_CREDIT_NOTES_MANAGE)||!c,onClick:this.createCNFromJob},{type:"divider"},{name:"Delete",onClick:this.deleteJob,disabled:!e.has(vx.JOBS_DELETE)}]}},{key:"render",value:function(){var e=this,t=this.props.job,n=this.state.stateCreateRecurringJobModal,r=t.edit_forbidden,o=!!(t.assigned_location_id&&t.assigned_location_id>0),i=!!(t.owner_location_id&&t.owner_location_id>0);return Object(a.jsx)(Cx.Consumer,{children:function(c){var s=e.getRestMenuItems(c);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"job-menu-tooltip",effect:"solid",place:"left"}),Object(a.jsxs)(q_,{className:"d-flex align-items-center justify-content-between print-hide",children:[Object(a.jsxs)("div",{children:[c.has(vx.JOBS_MANAGE_MESSAGES)&&Object(a.jsx)(J_,{"data-tip":"Reply","data-for":"job-menu-tooltip",disabled:r,children:Object(a.jsx)(cm,{name:Xf.EmailReply,onClick:r?function(){return null}:e.props.onEmailReply})}),c.has(vx.JOBS_MANAGE_NOTES)&&Object(a.jsx)(J_,{"data-tip":"Add note","data-for":"job-menu-tooltip",disabled:r,children:Object(a.jsx)(cm,{name:Xf.AddNote,onClick:r?function(){return null}:e.props.onNoteAdd})}),c.has(vx.JOBS_UPDATE)&&Object(a.jsx)(xN,{loading:e.props.nextStatuses.loading,type:"job",statuses:e.getNextStatuses(),onStatusClick:e.onStatusClick}),c.has(vx.USERS_VIEW)&&Object(a.jsx)(BU,{onUserTeamClick:e.onUserClick,onSelectedUserTeamClick:e.onSelectedUserClick,selectedUsersTeams:t.assigned_to,disabled:r||!c.has(vx.JOBS_ASSIGN_STAFF)||!o||!i}),c.has(vx.TAGS_VIEW)&&c.has(vx.JOBS_MANAGE_TAGS)&&Object(a.jsx)(gN,{type:"job",filter:t.tags,onTagClick:e.onTagClick,disabled:r}),s.length>0&&Object(a.jsx)(nw,{items:s,disabled:r})]}),Object(a.jsx)(AN,{channel:"online-job-".concat(t.id)})]}),n&&Object(a.jsx)(sB,{isOpen:n,onClose:function(){return e.closeModal("stateCreateRecurringJobModal")}})]})}})}}]),n}(p.PureComponent),zB=Object(sg.compose)(O.g,Object(b.b)((function(e){return{userId:OP(e),currentJobContacts:e.currentJobContacts}})),oj({nextStatuses:{fetch:zy.getJobNextStatuses}}))(qB);function GB(){var e=Object(f.a)(["\n  margin-left: 30px;\n"]);return GB=function(){return e},e}function WB(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n"]);return WB=function(){return e},e}function HB(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  text-align: right;\n  white-space: nowrap;\n"]);return HB=function(){return e},e}function YB(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  margin-right: ",";\n"]);return YB=function(){return e},e}function QB(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n"]);return QB=function(){return e},e}function KB(){var e=Object(f.a)(["\n  padding: 32px 30px 17px 30px;\n  border-bottom: 1px solid ",";\n"]);return KB=function(){return e},e}var ZB=y.default.div(KB(),_.gray2),XB=y.default.div(QB(),lm.light,sm.medium),$B=y.default.div(YB(),lm.bold,sm.medium,sm.smaller),eV=y.default.div(HB(),lm.bold,sm.medium),tV=Object(y.default)(rN)(WB(),sm.normal),nV=y.default.div(GB()),rV=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).removeTag=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.dispatch(zD(e.props.job.id,n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.loading,o=t.disabled;return Object(a.jsx)(ZB,{className:"d-flex flex-row",children:Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)($B,{children:"Customer Address"}),Object(a.jsx)(XB,{children:n.site_address?n.site_address.full_address:"No Site Address Specified"}),t.has(vx.TAGS_VIEW)&&Object(a.jsx)(nV,{children:Object(a.jsx)(bN,{tags:n.tags,onRemove:o||n.edit_forbidden?void 0:e.removeTag,loading:r})}),Object(a.jsx)(eV,{className:"flex-grow-1",children:zy.getJobName(n)}),Object(a.jsx)(tV,{tag:{name:n.latest_status.status,color:_.gray4}})]})}})})}}]),n}(p.PureComponent),aV=Object(b.b)()(rV),oV=n(78),iV="Steamatic/CurrentJob/Photos/LOAD_PHOTOS",cV="Steamatic/CurrentJob/Photos/LOAD_PHOTOS_COMPLETE",sV="Steamatic/CurrentJob/Photos/RESET",lV="Steamatic/CurrentJob/Photos/ERROR",uV="Steamatic/CurrentJob/Photos/SELECTED_PHOTOS",dV="Steamatic/CurrentJob/Photos/RESET_SELECTED_PHOTOS",pV=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case cV:return t.payload;case sV:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case lV:return t.payload;case cV:case sV:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case iV:return!0;case cV:case sV:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case cV:return!0;case sV:return!1;default:return e}},params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case iV:return t.payload;case sV:return{};default:return e}},selectedPhotos:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case uV:return t.payload;case sV:case dV:return[];default:return e}}}),hV=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||r().currentJobPhotos.params,n({type:iV,payload:a}),t.prev=2,t.next=5,zy.getJobPhotos(e);case 5:return o=t.sent,n({type:cV,payload:o}),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(2),n({type:lV,payload:t.t0}),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()},bV=function(){return{type:dV}};function fV(){var e=Object(f.a)(["\n  margin: 0 5px;\n  font-size: ",";\n"]);return fV=function(){return e},e}function mV(){var e=Object(f.a)(["\n  height: 20px;\n  min-width: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: 100px;\n  background: ",";\n  z-index: 5;\n  color: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  * {\n    stroke-width: 2.5px !important;\n  }\n"]);return mV=function(){return e},e}function jV(){var e=Object(f.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n\n  > * {\n    margin-left: 5px;\n  }\n"]);return jV=function(){return e},e}function vV(){var e=Object(f.a)(["\n  padding: 10px;\n  border: 0;\n  width: 100%;\n  font-weight: ",";\n  font-size: ",";\n  outline: none;\n  background: ",";\n  color: ",";\n"]);return vV=function(){return e},e}function OV(){var e=Object(f.a)(["\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: ",";\n  background-image: url(",");\n  width: 100%;\n  height: 150px;\n  position: relative;\n  .photo-title{\n    position: absolute;\n    // display: none;\n    left: 0px;\n    bottom: 0px;\n    width: 100%;\n    text-align: center;\n    background: #000;\n    opacity: 0.6;\n    color: #fff;\n  }\n"]);return OV=function(){return e},e}function gV(){var e=Object(f.a)(["\n  width: 230px;\n  margin: 0 20px 20px 0;\n  overflow: hidden;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 0 0 0 1px ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n\n    & .tools {\n      visibility: visible !important;\n    }\n    .photo-title{display: block}\n  }\n"]);return gV=function(){return e},e}var xV=y.default.div(gV(),_.gray2,_.blue0),yV=y.default.div(OV(),_.gray0,(function(e){return e.backgroundImage})),_V=Object(y.default)(gv(["selected"])("input"))(vV(),lm.medium,sm.smaller,(function(e){return e.selected?_.blue0:"transparent"}),(function(e){return e.selected?_.black1:_.gray5})),wV=y.default.div(jV()),SV=Object(y.default)(gv(["br","color"])("div"))(mV(),(function(e){return e.bg}),(function(e){return e.color?e.color:_.white}),(function(e){return e.color?e.color:_.white})),kV=y.default.span(fV(),sm.smaller),CV=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={description:e.props.photo.description,thumbnailUrl:"",loading:!1,url:e.props.photo.url},e.counter=0,e.startUpdate=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onDescriptionChangeInternal=function(t){e.setState({description:t.target.value}),e.debouncedDescriptionChange(t.target.value)},e.debouncedDescriptionChange=Object(m.debounce)((function(t){var n=e.props,r=n.onDescriptionChange,a=n.photo.id;e.setState({loading:!0}),r(t,a).finally((function(){e.setState({loading:!1})}))}),1500),e.uploadPhoto=function(t){var n=e.props,r=n.photo.id,a=n.onPhotoUpdate,o=new FormData;o.append("file",t),a(o,r).finally((function(){e.setState({loading:!1})}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhoto(t.target.files[0]))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.photo.thumbnails;(null===e||void 0===e?void 0:e.length)?this.setState({thumbnailUrl:e[0].url,url:e[0].url}):e&&e[0]&&e[0].url||this.startUpdate()}},{key:"componentDidUpdate",value:function(e){e.photo.url!==this.props.photo.url&&this.setState({url:this.props.photo.url}),e.rotated!==this.props.rotated&&!0===this.props.rotated&&this.props.photo.id===this.props.rotateImageId&&this.setState({url:this.props.photo.url})}},{key:"render",value:function(){var e=this.props,t=e.photo.id,n=e.onExpand,r=e.photo,o=e.selected,i=e.dispatch,c=e.noUpdate,s=this.state,l=s.description,u=s.loading,d=s.thumbnailUrl,p=s.url;return Object(a.jsxs)(xV,{children:[Object(a.jsxs)(wV,{className:"tools",children:[Object(a.jsx)(SV,{bg:_.gray1,color:_.black0,onClick:function(){return n(t)},children:Object(a.jsx)(cm,{name:Xf.Expand,size:10})}),!c&&Object(a.jsx)(SV,{bg:_.blue5,color:_.white,onClick:this.onUploadLinkClick,children:Object(a.jsx)(kV,{children:"Update"})})]}),Object(a.jsxs)(yV,{backgroundImage:""!==p||void 0!==p?"".concat(p):d,onClick:c?void 0:function(){return i(function(e){return function(t,n){var r=n().currentJobPhotos.selectedPhotos,a=r.slice(0);r.find((function(t){return t.id===e.id}))?a.splice(r.map((function(e){return e.id})).indexOf(e.id),1):a.push(e),t({type:uV,payload:a})}}(r))},children:[Object(a.jsx)(um.a,{className:"overlapping text-left",id:"photo_title",effect:"solid"}),Object(a.jsx)("div",{className:"photo-title text-truncate p-2","data-for":"photo_title","data-tip":r.file_name,children:r.file_name})]}),Object(a.jsx)(_V,{type:"text",onChange:this.onDescriptionChangeInternal,value:l,selected:o,disabled:c,placeholder:c?"Editing is disabled":"Enter a short description..."}),u&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("input",{type:"file",accept:uJ,hidden:!0,disabled:c,onChange:this.onFileInputChange,ref:this.inputRef})]})}}]),n}(p.PureComponent),NV=Object(b.b)()(CV),EV=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.postFormData("/v1/photos",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),AV=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.postFormData("/v1/photos/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),IV=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,TV(t);case 2:r=e.sent,Pw(r,n);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),TV=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.downloadFile("/v1/photos/".concat(t,"/download"),!1);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RV={uploadPhoto:EV,downloadPhoto:IV,getPhotoData:TV,deletePhoto:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/photos/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updatePhoto:AV,getPhotoInfo:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/photos/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),rotatePhoto:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/photos/".concat(t,"/update"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},DV=n(114),MV=n.n(DV);function LV(){var e=Object(f.a)(["\n  transform: rotate(","deg);\n  cursor: pointer;\n  path,\n  circle,\n  line,\n  polyline,\n  polygon,\n  rect {\n    stroke: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle,\n  :hover polygon,\n  :hover rect,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return LV=function(){return e},e}function PV(){var e=Object(f.a)(["\n  height: 50px;\n  padding: 20px;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  bottom: 20px;\n  position: absolute;\n  overflow: hidden;\n"]);return PV=function(){return e},e}function FV(){var e=Object(f.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: 0;\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n"]);return FV=function(){return e},e}function UV(){var e=Object(f.a)(["\n  position: relative;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: ","px;\n  height: ","px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return UV=function(){return e},e}function BV(){var e=Object(f.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n"]);return BV=function(){return e},e}function VV(){var e=Object(f.a)(["\n  display: flex;\n  min-height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 20px 0 90px 0;\n"]);return VV=function(){return e},e}function JV(){var e=Object(f.a)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n"]);return JV=function(){return e},e}function qV(){var e=Object(f.a)(["\n  color: ",";\n"]);return qV=function(){return e},e}function zV(){var e=Object(f.a)(["\n  position: relative;\n  top: 0px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: ","px;\n  padding: 0 30px;\n  background: ",";\n  text-align: right;\n  z-index: 100;\n  border-bottom: 1px solid ",";\n"]);return zV=function(){return e},e}function GV(){var e=Object(f.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n"]);return GV=function(){return e},e}var WV=y.default.div(GV()),HV=y.default.div(zV(),WO,_.white,_.gray2),YV=y.default.div(qV(),_.gray5),QV=y.default.div(JV()),KV=y.default.div(VV()),ZV=y.default.div(BV()),XV=y.default.div(UV(),(function(e){return e.width?e.width:0}),(function(e){return e.height?e.height:0})),$V=y.default.div(FV()),eJ=y.default.div(PV(),_.menu,_.white),tJ=Object(y.default)(gv(["color","rotate"])(cm))(LV(),(function(e){return e.rotate}),(function(e){return e.color?e.color:_.black1}),_.blue4),nJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCurrentPhotoIndex=function(){var t=e.props,n=t.photos,r=t.currentPhotoId,a=n.map((function(e){return e.id})).indexOf(r);return a>-1?a:0},e.state={currentIndex:e.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1},e.zoomDelta=.2,e.setZoom=function(t){"+"===t&&e.setState({zoom:e.state.zoom+e.zoomDelta}),"-"===t&&e.state.zoom>1.1*e.zoomDelta&&e.setState({zoom:e.state.zoom-e.zoomDelta})},e.setPhoto=function(t){var n=e.props.photos;"+"===t&&e.state.currentIndex<n.length-1&&e.setState({currentIndex:e.state.currentIndex+1}),"-"===t&&e.state.currentIndex>0&&e.setState({currentIndex:e.state.currentIndex-1})},e.rotateImage=function(){var t=e.props,n=t.photos,r=t.rotatedImage,a=n[e.state.currentIndex];e.setState({bottomToolsLoading:!0}),e.setState({rotateDegrees:e.state.rotateDegrees+1},(function(){RV.rotatePhoto(a.id,{degree:90,level:1}).then((function(t){r(t.data),e.setState({bottomToolsLoading:!1})}))}))},e.downloadPhoto=function(){var t=e.props,n=t.job,r=t.photos[e.state.currentIndex];e.setState({bottomToolsLoading:!0}),RV.downloadPhoto(r.id,"".concat(n.id,"_").concat(r.description.split(" ").join("_"),"_").concat(pm()(r.updated_at).format("YYYYMMDD"),".").concat(r.mime_type.split("/")[1])).then((function(){e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.printPhoto=function(){var t=e.props.photos[e.state.currentIndex];e.setState({bottomToolsLoading:!0}),RV.getPhotoData(t.id).then((function(t){MV()({printable:window.URL.createObjectURL(t),type:"image"}),e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.deletePhoto=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.photos,o=n.job,i=n.updateParentPhotos,c=n.dispatch,s=r[e.state.currentIndex],t.next=4,c(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:"Do you really want to delete this photo from this job?"})));case 4:if(!t.sent){t.next=18;break}return e.setState({bottomToolsLoading:!0}),t.prev=7,t.next=10,zy.detachPhoto(o.id,s.id);case 10:return t.next=12,i();case 12:e.setState({bottomToolsLoading:!1}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.setState({bottomToolsLoading:!1});case 18:case"end":return t.stop()}}),t,null,[[7,15]])}))),e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.currentPhotoId,a=n.photos,o=n.onClose;r===e.currentPhotoId&&a.length===e.photos.length||this.setState({currentIndex:this.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),this.state.currentIndex!==t.currentIndex&&this.setState({zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),a.length<1&&o()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,o=t.customModal,i=t.job,c=t.photos,s=t.noUpdate,l=this.state,u=l.currentIndex,d=l.zoom,p=l.rotateDegrees,h=l.bottomToolsLoading,b=c[u];return Object(a.jsx)(qO,{isOpen:n,children:Object(a.jsx)(cg,{onClose:r,customModal:o,children:Object(a.jsx)(WV,{children:b&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsxs)(HV,{className:"align-items-center",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(tJ,{name:Xf.Chevron,size:20,rotate:45,color:_.black1,onClick:r}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:b.description})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:zy.getJobName(i)}),Object(a.jsx)(YV,{children:b.created_at===b.updated_at?"Created ".concat(pm()(b.created_at).format(lv)," by ").concat(mm(b.creator).name):"Modified ".concat(pm()(b.updated_at).format(lv)," ").concat(b.modified_by?mm(b.modified_by).name:"")})]})]})}),Object(a.jsx)(QV,{children:Object(a.jsxs)(KV,{children:[Object(a.jsx)(ZV,{onClick:r}),Object(a.jsxs)(XV,{width:p%2>0?b.height*d:b.width*d,className:"d-flex align-items-center justify-content-center",height:p%2>0?b.width*d:b.height*d,children:[Object(a.jsx)("div",{style:{width:"".concat(p%2>0?b.height*d:b.width*d,"px"),height:"".concat(p%2>0?b.width*d:b.height*d,"px")}}),Object(a.jsx)(XV,{width:b.width*d,height:b.height*d,style:{position:"absolute"},children:Object(a.jsx)("img",{src:"".concat(b.url)},b.id)},b.id)]},b.id)]})}),Object(a.jsx)($V,{children:Object(a.jsxs)(eJ,{children:[h&&Object(a.jsx)(Nv,{size:40,color:_.menu}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(tJ,{name:Xf.Chevron,size:20,rotate:45,color:_.white,onClick:function(){return e.setPhoto("-")}}),Object(a.jsxs)("div",{style:{margin:"0 10px"},children:[u+1," of ",c.length]}),Object(a.jsx)(tJ,{name:Xf.Chevron,size:20,rotate:-135,color:_.white,onClick:function(){return e.setPhoto("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center",style:{margin:"0 50px"},children:[Object(a.jsx)(tJ,{name:Xf.SubtractCircle,size:20,rotate:0,color:_.white,onClick:function(){return e.setZoom("-")}}),Object(a.jsxs)("div",{style:{margin:"0 15px"},children:[(100*d).toFixed(0),"%"]}),Object(a.jsx)(tJ,{name:Xf.AddCircle,size:20,rotate:0,color:_.white,onClick:function(){return e.setZoom("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{width:"150px"},children:[Object(a.jsx)(tJ,{name:Xf.Rotate,size:20,rotate:0,color:_.white,onClick:this.rotateImage}),Object(a.jsx)(tJ,{name:Xf.Download,size:20,rotate:0,color:_.white,onClick:this.downloadPhoto}),Object(a.jsx)(tJ,{name:Xf.Printer,size:20,rotate:0,color:_.white,onClick:this.printPhoto}),!s&&Object(a.jsx)(tJ,{name:Xf.Trash,size:20,rotate:0,color:_.white,onClick:this.deletePhoto})]})]})})]})})})})}}]),n}(p.PureComponent),rJ=Object(b.b)()(nJ);function aJ(){var e=Object(f.a)(["\n  position: absolute;\n  top: 20px;\n  right: 30px;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n\n  :hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return aJ=function(){return e},e}function oJ(){var e=Object(f.a)(["\n  color: transparent;\n  filter: grayscale(1);\n"]);return oJ=function(){return e},e}function iJ(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return iJ=function(){return e},e}function cJ(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return cJ=function(){return e},e}function sJ(){var e=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 10px 0 40px 0;\n"]);return sJ=function(){return e},e}function lJ(){var e=Object(f.a)(["\n  padding: 40px 30px 30px 30px;\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return lJ=function(){return e},e}var uJ="image/jpeg,image/png",dJ=y.default.div(lJ()),pJ=y.default.div(sJ()),hJ=mC.SortedGroupTitle,bJ=y.default.div(cJ(),lm.bold),fJ=y.default.span(iJ(),_.blue4,_.blue5),mJ=y.default.div(oJ()),jJ=y.default.div(aJ(),_.blue4,sm.smaller,_.blue5),vJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,filmstrip:!1,currentPhotoId:void 0,blockLoading:!1,sortedPhotosGroups:e.groupedPhotos,rotateImage:!1,rotateImageId:0},e.loadPhotos=function(){var t=e.props,n=t.match;return(0,t.dispatch)(hV(n.params.id))},e.handleDrop=function(t){var n=e.props.currentJob.data,r=n&&n.edit_forbidden;t.preventDefault(),!r&&t.dataTransfer.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files))},e.uploadPhotos=function(t){var n,r=e.props.match,o=[],i=["png","jpeg","jpg"],c=Object(oV.a)(t);try{for(c.s();!(n=c.n()).done;){var s=n.value,l=(s.name.split(".").pop()||"").toLowerCase();if(i.includes(l)){var u=new FormData;u.append("file",s),o.push(RV.uploadPhoto(u).then((function(e){return zy.attachPhoto(r.params.id,e.data.id,{description:""})})))}else Oj(uj.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",l]})," is not supported!"]}))}}catch(d){c.e(d)}finally{c.f()}0===o.length?e.setState({loading:!1}):Promise.all(o).then((function(){setTimeout((function(){e.loadPhotos(),e.setState({loading:!1})}),500)})).catch((function(){e.setState({loading:!1})}))},e.onDragOver=function(e){e.preventDefault()},e.callGroupedPhoto=function(t){var n=t.id;e.setState({sortedPhotosGroups:e.groupedPhotos,rotateImage:!e.state.rotateImage,rotateImageId:n}),e.loadPhotos()},e.changeDescription=function(t,n){var r=e.props.match;return zy.updateAttachedPhoto(r.params.id,n,{description:t})},e.onPhotoUpdate=function(t,n){return RV.updatePhoto(n,t).then((function(){return e.setState({blockLoading:!0}),e.loadPhotos().then((function(){e.setState({blockLoading:!1})})).catch((function(){e.setState({blockLoading:!1})}))}))},e.openFilmstrip=function(t){e.setState({currentPhotoId:t,filmstrip:!0})},e.closeFilmstrip=function(){e.setState({filmstrip:!1})},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.target.files))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadPhotos()}},{key:"componentDidUpdate",value:function(e){e.currentJobPhotos!==this.props.currentJobPhotos&&this.setState({sortedPhotosGroups:this.groupedPhotos})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:sV})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentJobPhotos,r=n.loading,o=n.data,i=n.selectedPhotos,c=t.currentJob.data,s=this.state,l=s.loading,u=s.filmstrip,d=s.currentPhotoId,p=s.blockLoading,h=s.sortedPhotosGroups,b=c&&c.edit_forbidden;return Object(a.jsx)(dJ,{onDragOver:this.onDragOver,onDrop:this.handleDrop,children:Object(a.jsx)(Cx.Consumer,{children:function(t){t.has(vx.JOBS_UPDATE);return Object(a.jsxs)(a.Fragment,{children:[o&&c&&Object(a.jsxs)(a.Fragment,{children:[h.length>0?Object(a.jsxs)(a.Fragment,{children:[!b&&t.has(vx.JOBS_PHOTOS_CREATE)&&Object(a.jsx)(jJ,{onClick:e.onUploadLinkClick,children:"Add photos"}),h.map((function(n,r){return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(hJ,{children:pm()(1e3*n.unix).format("ddd, D MMM YYYY")}),Object(a.jsx)(pJ,{children:n.items.map((function(n){return Object(a.jsx)(NV,{photo:n,selected:!!i.find((function(e){return e.id===n.id})),noUpdate:!!b||!t.has(vx.JOBS_PHOTOS_UPDATE),onExpand:e.openFilmstrip,onDescriptionChange:e.changeDescription,onPhotoUpdate:e.onPhotoUpdate,rotated:e.state.rotateImage,rotateImageId:e.state.rotateImageId},n.id)}))})]},r)}))]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(mJ,{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(cm,{name:Xf.Barista,size:200})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(bJ,{children:"No photos have been uploaded"})}),!b&&t.has(vx.JOBS_PHOTOS_CREATE)&&Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:["Drag and drop to add photos or ",Object(a.jsx)(fJ,{onClick:e.onUploadLinkClick,children:"click here"})," to"," ",Object(a.jsx)("br",{})," upload the old fashioned way."]})})]}),d&&Object(a.jsx)(rJ,{isOpen:u,job:c,customModal:!0,noUpdate:!!b||!t.has(vx.JOBS_PHOTOS_UPDATE),photos:e.sortedPhotos,currentPhotoId:d||0,updateParentPhotos:e.loadPhotos,onClose:e.closeFilmstrip,rotatedImage:e.callGroupedPhoto})]}),(r||l)&&!p&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("input",{type:"file",accept:uJ,multiple:!0,hidden:!0,onChange:e.onFileInputChange,ref:e.inputRef})]})}})})}},{key:"groupedPhotos",get:function(){var e=this.props.currentJobPhotos.data;return e?jm(e.data,"created_at"):[]}},{key:"sortedPhotos",get:function(){var e=this.props.currentJobPhotos.data;return e?e.data.sort((function(e,t){return pm()(e.created_at)>pm()(t.created_at)?-1:1})):[]}}]),n}(p.PureComponent),OJ=Object(sg.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,currentJobPhotos:e.currentJobPhotos}})),O.g)(vJ);function gJ(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n  margin-top: 10px;\n  display: inline-block;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return gJ=function(){return e},e}function xJ(){var e=Object(f.a)(["\n  color: ",";\n  margin-bottom: 30px;\n"]);return xJ=function(){return e},e}function yJ(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n"]);return yJ=function(){return e},e}function _J(){var e=Object(f.a)(["\n  padding: 15px;\n  position: fixed;\n  margin-top: 60px;\n"]);return _J=function(){return e},e}var wJ,SJ=y.default.div(_J()),kJ=y.default.div(yJ(),sm.medium,lm.medium),CJ=y.default.div(xJ(),_.gray4),NJ=y.default.div(gJ(),_.blue4,_.blue5),EJ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.downloadPhotos=function(){var t=e.props,n=t.currentJobPhotos.selectedPhotos,r=t.job,a=t.dispatch;if(n.length>0){var o=[];e.setState({loading:!0});var i,c=Object(oV.a)(n);try{for(c.s();!(i=c.n()).done;){var s=i.value;o.push(RV.downloadPhoto(s.id,"".concat(r.id,"_").concat(s.description.split(" ").join("_"),"_").concat(pm()(s.updated_at).format("YYYYMMDD"),".").concat(s.mime_type.split("/")[1])))}}catch(l){c.e(l)}finally{c.f()}Promise.all(o).then((function(){a(bV()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},e.detachPhotos=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currentJobPhotos.selectedPhotos,a=n.job,o=n.dispatch,t.next=3,o(iw("Confirm","Delete Photo"+(r.length>1?"s":""),"Do you really want to delete ".concat(r.length>1?"these photos":"this photo"," from this job?")));case 3:if(t.sent){i=[],e.setState({loading:!0}),c=Object(oV.a)(r);try{for(c.s();!(s=c.n()).done;)l=s.value,i.push(zy.detachPhoto(a.id,l.id))}catch(u){c.e(u)}finally{c.f()}Promise.all(i).then((function(){o(hV(a.id)),o(bV()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.currentJobPhotos.selectedPhotos,n=this.state.loading;return Object(a.jsxs)(SJ,{children:[Object(a.jsx)(kJ,{children:"Manage Photos"}),Object(a.jsxs)(CJ,{children:[t.length," ",t.length>1?"items":"item"," selected"]}),Object(a.jsx)(Xg,{className:"btn",onClick:this.downloadPhotos,children:"Download"}),Object(a.jsx)("br",{}),Object(a.jsx)(NJ,{onClick:function(){e.detachPhotos()},children:"Delete"}),n&&Object(a.jsx)(Nv,{size:40,color:_.gray1})]})}}]),n}(p.PureComponent),AJ=Object(b.b)((function(e){return{currentJobPhotos:e.currentJobPhotos}}))(EJ);!function(e){e.Active="Active",e.Completed="Completed"}(wJ||(wJ={}));var IJ=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/tasks/types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),TJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/tasks/types",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/tasks"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/tasks/").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),MJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/tasks"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),LJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/tasks/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),PJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/tasks/adhoc",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),FJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/tasks/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),UJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/tasks/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),BJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/slots/".concat(t,"/crew/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),VJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/slots/".concat(t,"/crew/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),JJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/slots/".concat(t,"/teams/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/slots/".concat(t,"/teams/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/tasks/").concat(n,"/status"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),GJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/tasks/").concat(n,"/status/scheduled"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),WJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/tasks/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),HJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/tasks/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/tasks",{location_id:t});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),QJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/".concat(t,"/tasks/").concat(n,"/slot"),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),KJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/slots/".concat(n),Object(c.a)(Object(c.a)({},r),{},{job_run_id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),ZJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/slots/".concat(n,"/move"),Object(c.a)(Object(c.a)({},r),{},{job_run_id:t}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),XJ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/".concat(t,"/tasks/").concat(n,"/slot/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),$J=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/sub-tasks/types");case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),eq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/tasks/".concat(t,"/sub-tasks/types"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/sub-tasks/types",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/sub-tasks/types/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/sub-tasks/types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/tasks/types/".concat(n),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),oq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/tasks/types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),iq={getTaskTypes:IJ,createTaskType:TJ,getJobTasks:RJ,getJobTask:DJ,createJobTask:MJ,updateJobTask:LJ,createAdhocTask:PJ,updateAdhocTask:FJ,removeAdhocTask:UJ,assignUserToScheduledTaskSlot:BJ,removeUserFromScheduledTaskSlot:VJ,assignTeamToScheduledTaskSlot:JJ,removeTeamFromScheduledTaskSlot:qJ,changeTaskStatus:zJ,changeTaskScheduledStatus:GJ,removeTaskFromJob:WJ,searchTasks:HJ,addTaskSlotToRun:QJ,updateTaskSlotToRun:KJ,moveTaskSlotToRun:ZJ,removeTaskSlotFromRun:XJ,getTasksFromLocation:YJ,snoozeTask:function(e,t,n){return ev.post("/v1/jobs/".concat(e,"/tasks/").concat(t,"/snooze"),n)},unsnoozeTask:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/tasks/").concat(t,"/unsnooze"))},getSubTaskTypes:$J,removeTaskTypes:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/tasks/types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),removeSubTaskTypes:rq,createSubTaskType:tq,getSubTaskOfTask:eq,updateSubTaskType:nq,updateTaskType:aq,getTaskTypesDetail:oq,isCustomTask:function(e){return/adhoc|other|custom/i.test((null===e||void 0===e?void 0:e.name)||"")}};function cq(){var e=Object(f.a)(["\n  border-radius: 0px;\n  background: ",";\n  height: ","px;\n  width: ","px;\n  position: absolute;\n  top: 23px;\n  left: 7px;\n"]);return cq=function(){return e},e}function sq(){var e=Object(f.a)(["\n  padding: 0 30px;\n  height: 60px;\n"]);return sq=function(){return e},e}function lq(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  background: ",";\n  box-shadow: 4px 0 0 0 "," inset;\n  position: relative;\n"]);return lq=function(){return e},e}var uq=Object(y.default)(gv(["color"])("div"))(lq(),_.gray2,_.white,(function(e){return e.color})),dq=y.default.div(sq()),pq=Object(y.default)(gv(["color","height"])("div"))(cq(),(function(e){return e.color}),(function(e){return e.height}),(function(e){return e.height})),hq=mC.ColoredDiv,bq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showNote:!1},e.menuItems=function(t){var n=e.props,r=n.onTaskEdit,a=n.task,o=n.jobId,i=n.fetch,c=n.deleteTask,s=e.isTaskCompleted();return[{name:"Edit",onClick:function(){return r(a)},remove:!t.has(vx.JOBS_TASKS_MANAGE)},{type:"divider",remove:!t.has(vx.JOBS_TASKS_MANAGE)},{name:"Mark task ".concat(s?"incomplete":"done"),onClick:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iq.changeTaskStatus(o,a.id,{status:s?wJ.Active:wJ.Completed});case 2:i();case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),remove:!t.has(vx.JOBS_TASKS_MANAGE)},{type:"divider",remove:!t.has(vx.JOBS_TASKS_MANAGE)},{name:"Delete",onClick:c,remove:!t.has(vx.JOBS_TASKS_MANAGE)}].filter((function(e){return!e.remove}))},e.isTaskCompleted=function(){var t=e.props.task;return!!t.latest_status&&t.latest_status.status===wJ.Completed},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.task,r=t.slot,o=t.jobId,i=this.state.showNote;return Object(a.jsx)(Cx.Consumer,{children:function(t){var c,s,l,u,d=e.menuItems(t),p=/attendance/i.test(n.name)&&!/adhoc/i.test(null===(c=n.type)||void 0===c?void 0:c.name);return Object(a.jsxs)(uq,{color:_.white,children:[Object(a.jsx)(pq,{color:n.type.color?_m(n.type.color):_.white,height:16}),Object(a.jsxs)(dq,{className:"d-flex align-items-center justify-content-between",children:[Object(a.jsx)(hq,{margin:"0 20px 0 0",weight:lm.bold,children:n.name||n.type.name}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsxs)(hq,{className:"d-flex align-items-center",padding:"0 0 0 30px",children:[Object(a.jsx)(hq,{className:"d-flex align-items-center",margin:"0 0 0 30px",children:n.due_at&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(hq,{margin:"0 20px 0 0",weight:"500",fontSize:"16px",color:e.isWasted?_.red1:_.black1,children:["Due: ",pm()(n.due_at).format("D MMM, hh:mm A")]})})}),((null===r||void 0===r?void 0:r.starts_at)||(null===(s=n.assigned_slots)||void 0===s?void 0:s.length)>0)&&Object(a.jsx)(hq,{className:"d-flex align-items-center",margin:"0 0 0 30px",children:Object(a.jsxs)(hq,{margin:"0 20px 0 0",fontSize:"16px",color:_.black1,weight:"500",children:["Scheduled: ",pm()((null===r||void 0===r?void 0:r.starts_at)||(null===(l=n.assigned_slots)||void 0===l||null===(u=l[0])||void 0===u?void 0:u.starts_at)).format(iv)]})})]}),Object(a.jsxs)(hq,{className:"d-flex align-items-center justify-content-end",overflow:"visible",margin:"0 0 0 30px",style:{width:"260px"},children:[(n.internal_note||(null===r||void 0===r?void 0:r.assigned_users.length)>0||((null===r||void 0===r?void 0:r.assigned_teams)||[]).length>0)&&Object(a.jsx)(J_,{onClick:function(){return e.setState({showNote:!e.state.showNote})},children:Object(a.jsx)(cm,{name:Xf.MessageChat})}),p&&Object(a.jsx)("div",{className:"d-flex justify-content-center mx-2",children:n.work_completed_date?Object(a.jsx)("span",{className:"badge badge-success",children:"Completed"}):n.work_start_date?Object(a.jsx)("span",{className:"badge badge-info",children:"In Progress"}):Object(a.jsx)("span",{className:"badge badge-primary",children:"New"})}),p&&Object(a.jsx)(J_,{children:Object(a.jsxs)(v.c,{className:"btn btn-outline-dark",to:"/jobs/".concat(o,"/work-order/").concat(n.id),children:[n.work_start_date?"View":"Start"," Work Order"]})}),Object(a.jsx)(nw,{iconName:Xf.MenuVertical,items:d,noMargin:!0})]})]})]}),i&&Object(a.jsxs)(hq,{padding:"5px 30px 15px 30px",color:_.gray5,children:[n.internal_note,Object(a.jsx)(hq,{weight:lm.bold,color:_.gray5,children:((null===r||void 0===r?void 0:r.assigned_teams)||[]).map((function(e){return e.name})).concat(null===r||void 0===r?void 0:r.assigned_users.map((function(e){return e.full_name}))).join(", ")})]})]})}})}},{key:"isWasted",get:function(){var e=this.props.task;return pm()().isAfter(pm()(e.due_at))}}]),n}(p.PureComponent),fq=Object(O.g)(bq);function mq(){var e=Object(f.a)(["\n  color: ",";\n"]);return mq=function(){return e},e}function jq(){var e=Object(f.a)(["\n  min-height: 90px;\n  resize: none;\n  ","\n"]);return jq=function(){return e},e}var vq=y.default.textarea(jq(),vg),Oq=y.default.label(mq(),_.gray4),gq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.meta,t=e.touched&&e.error;return Object(a.jsxs)("div",{className:x()("form-group",this.props.className),children:[this.props.label&&Object(a.jsx)(Oq,{className:this.props.labelClassName,children:this.props.label}),Object(a.jsxs)("div",{className:this.props.valueClassName,children:[Object(a.jsx)(vq,Object(c.a)(Object(c.a)({},this.props.input),{},{className:x()("form-control",{"is-invalid":t}),placeholder:this.props.placeholder,disabled:this.props.disabled})),t&&Object(a.jsx)("div",{className:"invalid-feedback",children:e.error})]})]})}}]),n}(p.PureComponent),xq=Tv({},(function(e,t,n){var r=n.addTaskToRunConfig;if(e.starts_at&&e.ends_at){if(pm.a.isMoment(e.starts_at)){if(pm.a.isMoment(e.ends_at)&&e.starts_at.isSameOrAfter(e.ends_at))t.starts_at="Start date must be before end date";else if(r){var a=pm()(r.date).startOf("day");e.starts_at.isBefore(a)&&(t.starts_at="Start date cannot be before ".concat(a.format(iv)))}}else t.starts_at="Incorrect start date";if(pm.a.isMoment(e.ends_at)){if(pm.a.isMoment(e.starts_at)&&e.ends_at.isSameOrBefore(e.starts_at))t.ends_at="End date must be after start date ";else if(r){var o=pm()(r.date).endOf("day");e.ends_at.isAfter(o)&&(t.ends_at="End date cannot be after ".concat(o.format(iv)))}}else t.ends_at="Incorrect end date"}return t}));function yq(){var e=Object(f.a)(["\n  .d-flex{flex-direction: row-reverse;}\n  .d-flex>:first-child{margin-left: 15px;}\n"]);return yq=function(){return e},e}var _q=y.default.div(yq()),wq="JobTaskDetailsForm",Sq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={canBeScheduled:!1,kpiHours:0,notes:"",customTask:iq.isCustomTask(e.props.initialValues.type)},e.onChangeType=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.change("kpi_time","".concat(n.kpi_hours," hours")),e.setState({canBeScheduled:n.can_be_scheduled,kpiHours:n.kpi_hours||0,customTask:iq.isCustomTask(n)},(function(){e.setDueDateAuto()})),t.next=4,e.props.getSubTaskTypes(n);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeSubTask=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:""===e.state.notes&&(""!=n.default_crew_note||null!=n.default_crew_note?e.props.change("scheduling_note",n.default_crew_note):e.props.change("scheduling_note",""));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeNotes=function(t){e.setState({notes:t.currentTarget.defaultValue})},e.setDueDateAuto=function(){var t=e.state.kpiHours;t?e.props.change("due_at",pm()(pm()().add(t,"h"))):e.props.change("due_at",pm()(pm()().add(48,"h")))},e.validateDate=function(t){var n=e.props.addTaskToRunConfig;return!!n&&pm()(t).isSame(n.date)},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=Object(m.debounce)(e.searchJobsById,100),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.props.reset()}},{key:"render",value:function(){var e=this,t=this.props,n=t.taskTypes,r=t.kpiIsMissed,o=t.edit,i=t.handleSubmit,c=t.canBeScheduled,s=t.canEditDueDate,l=t.isSchedulingActive,u=t.mode,d=t.subTaskTypes,p=t.addTaskToRunConfig,h=t.initialValues,b=null===p||void 0===p?void 0:p.assigned_slot,f=this.state,m=f.canBeScheduled,j=f.customTask,v=c||m,O=!u||u&&u!==dz.ADD_TASK_TO_RUN;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:i,children:[O&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"type",label:"Task",options:n,validate:Dv,onChange:e.onChangeType,disabled:o||!t.has(vx.OPERATIONS_RUNS_MANAGE),getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},component:xO})}),d.length>0?Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"subtype",label:"Sub Task",options:d,validate:Dv,onChange:e.onChangeSubTask,disabled:!o||0===d.length||!t.has(vx.OPERATIONS_RUNS_MANAGE),getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},component:xO})}):j&&Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"name",label:"Task Name",component:yg,validate:Dv,disabled:!t.has(vx.OPERATIONS_RUNS_MANAGE)})})||null]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"internal_note",label:"Notes",component:gq,disabled:!t.has(vx.OPERATIONS_RUNS_MANAGE)})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"due_at",validate:Dv,showTime:!0,futureEnabled:!0,component:s_,disabled:o&&!s||!t.has(vx.OPERATIONS_RUNS_MANAGE),label:"Task Due"})}),Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)(Hv.a,{name:"kpi_time",disabled:!0,component:yg,label:"KPI Time"})}),o&&r&&Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"kpi_missed_reason",component:yg,label:"Reason KPI Missed",disabled:!t.has(vx.OPERATIONS_RUNS_MANAGE)})})]}),o&&!h.job_id&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"job",label:"Link to job",placeholder:"Select...",component:NO,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return zy.getJobName(e)},loadOptions:e.searchJobsById,isClearable:!0,disabled:!t.has(vx.OPERATIONS_RUNS_MANAGE)})})})]}),v&&(b||p)&&Object(a.jsxs)(a.Fragment,{children:[O&&Object(a.jsx)(Ov,{}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"starts_at",showTime:!0,futureEnabled:!0,component:s_,disabled:!l||!t.has(vx.OPERATIONS_RUNS_MANAGE),validate:l?[Dv]:void 0,label:"Scheduled From",isValidDate:e.validateDate})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"ends_at",showTime:!0,futureEnabled:!0,component:s_,disabled:!l||!t.has(vx.OPERATIONS_RUNS_MANAGE),validate:l?[Dv]:void 0,label:"Scheduled To",isValidDate:e.validateDate})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(_q,{children:Object(a.jsx)(Hv.a,{name:"is_confirmed",label:"Attendance Confirmed",component:rI,disabled:!t.has(vx.OPERATIONS_RUNS_MANAGE)})})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"scheduling_note",className:"mb-0",label:"Crew Notes",component:gq,onChange:e.onChangeNotes})})})]})]})}})}}]),n}(p.PureComponent),kq=Object(sg.compose)(Object(jv.a)({form:wq,enableReinitialize:!0,validate:xq}),Object(ug.a)({startsAt:"starts_at",endsAt:"ends_at"}),oj({jobs:{fetch:zy.searchJobs,initialData:null}}))(Sq);function Cq(){var e=Object(f.a)(["\n  border-width: 1px 1px 0 1px;\n  border-style: solid;\n  border-color: ",";\n  padding: 15px 10px;\n  display: flex;\n  flex-wrap: wrap;\n  overflow: hidden;\n  justify-content: space-between;\n  align-items: center;\n  background: ",";\n\n  &:last-child {\n    border-width: 1px 1px 1px 1px;\n  }\n"]);return Cq=function(){return e},e}var Nq=Object(y.default)(gv(["selected"])("div"))(Cq(),_.gray2,(function(e){return e.selected?_.blue0:_.white})),Eq=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.assignee,n=e.selected,r=e.isTeam,o=e.onClick,i=e.children,c=e.context,s=c&&c.has(vx.OPERATIONS_RUNS_MANAGE);return Object(a.jsxs)(Nq,{selected:n,children:[Object(a.jsx)("div",{children:t.full_name||t.name}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(hC,{color:_.gray5,children:r&&"Team"}),Object(a.jsx)(hC,{color:_.gray4,margin:"0 0 0 15px",children:i})]}),Object(a.jsxs)("div",{onClick:o,className:"cursor-pointer",children:[n&&s&&Object(a.jsx)(cm,{name:Xf.Trash}),!n&&s&&Object(a.jsx)(cm,{name:Xf.Add})]})]})}}]),n}(p.PureComponent),Aq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/runs",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Iq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Tq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/".concat(t,"/clone/slot"),Object(c.a)(Object(c.a)({},n),r));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Rq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Dq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/runs/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Mq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/runs/templates",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Lq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/templates",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Pq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/runs/templates/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Fq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/templates/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Uq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/runs/templates/".concat(t,"/runs"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Bq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/from-template/".concat(t,"/"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Vq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/templates/".concat(t,"/runs"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),Jq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/runs/templates/".concat(t,"/runs/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/templates/".concat(t,"/runs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/crew/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Gq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/crew/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Wq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/vehicles/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Hq=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/templates/".concat(t,"/").concat(n,"/vehicles/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Yq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/staff/search",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Qq=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/staff",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Kq={getRuns:Aq,createRun:Iq,cloneRun:Tq,removeRun:Rq,searchStaff:Yq,assignStaffToRun:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/".concat(t,"/crew/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeStaffFromRun:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/".concat(t,"/crew/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateRun:Dq,assignVehicleToRun:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/runs/".concat(t,"/vehicles/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),removeVehicleFromRun:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/runs/".concat(t,"/vehicles/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getStaffList:Qq,getRunsTemplates:Mq,createRunTemplate:Lq,updateRunTemplate:Pq,removeRunTemplate:Fq,createRunsFromTemplate:Bq,getTemplatedRuns:Uq,createTemplatedRun:Vq,updateTemplatedRun:Jq,removeTemplatedRun:qq,assignStaffToTemplatedRun:zq,removeStaffFromTemplatedRun:Gq,assignVehicleToTemplatedRun:Wq,removeVehicleFromTemplatedRun:Hq};function Zq(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return Zq=function(){return e},e}var Xq="JobTaskAssignToForm",$q=y.default.div(Zq()),ez=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",selectedUsers:[],selectedTeams:[]},e.onSearchValueChange=function(t){e.setState({search:t}),t?e.debouncedSearch(t):e.debouncedSearch.cancel()},e.isUserSelected=function(t){return e.state.selectedUsers.map((function(e){return e.id})).includes(t)},e.isTeamSelected=function(t){return e.state.selectedTeams.map((function(e){return e.id})).includes(t)},e.loadUsersAndTeams=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.searchStaff,o=r.usersTeams,i=r.locationId,c=r.date,t.prev=1,t.next=4,Promise.all([a.fetch({name:n,location_id:i,date:c}),o.fetch(n)]);case 4:t.next=8;break;case 6:t.prev=6,t.t0=t.catch(1);case 8:case"end":return t.stop()}}),t,null,[[1,6]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Object(m.debounce)(e.loadUsersAndTeams,500),e.onUserClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!e.isUserSelected(n.id)){t.next=8;break}return t.next=4,r(iw("Confirm","Remove User",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",Object(a.jsx)("strong",{children:n.full_name})," from this schedule?"]})));case 4:t.sent&&e.setState({selectedUsers:e.state.selectedUsers.filter((function(e){return e.id!==n.id}))}),t.next=9;break;case 8:e.setState({selectedUsers:e.state.selectedUsers.concat(n)});case 9:setTimeout((function(){return e.props.change("selectedUsers",e.state.selectedUsers)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onTeamClick=function(t){e.isTeamSelected(t.id)?e.setState({selectedTeams:e.state.selectedTeams.filter((function(e){return e.id!==t.id}))}):e.setState({selectedTeams:e.state.selectedTeams.concat(t)}),setTimeout((function(){return e.props.change("selectedTeams",e.state.selectedTeams)}))},e.getAssignedUsersAndTeams=function(){var t=e.state,n=t.selectedUsers,r=t.selectedTeams;return Object(m.orderBy)(r,["name"],["asc"]).map((function(e){return Object.assign({isTeam:!0},e)})).concat(Object(m.orderBy)(n,[function(e){return e.name||e.full_name}],["asc"]))},e.getSearchUsersAndTeams=function(){var t=e.props,n=t.usersTeams.data,r=t.searchStaff.data;return n?Object(m.orderBy)(n.teams,[function(e){return e.name||e.full_name}],["asc"]).map((function(e){return Object.assign({isTeam:!0},e)})).concat(Object(m.orderBy)(r,[function(e){return e.name||e.full_name}],["asc"])):[]},e.renderAssignee=function(t,n){return Object(a.jsx)(Eq,{onClick:function(){return t.isTeam?e.onTeamClick(t):e.onUserClick(t)},selected:t.isTeam?e.isTeamSelected(t.id):e.isUserSelected(t.id),isTeam:t.isTeam,assignee:t,context:n,children:!t.isTeam&&!!t.working_hours_per_week&&t.date_hours>=t.working_hours_per_week/5&&"Booked"},"".concat(t.id,"-").concat(t.isTeam?"team":"user"))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.task,n=e.slot,r=e.change;t&&(this.setState({selectedUsers:(null===n||void 0===n?void 0:n.assigned_users)||[],selectedTeams:(null===n||void 0===n?void 0:n.assigned_teams)||[]}),r("selectedUsers",(null===n||void 0===n?void 0:n.assigned_users)||[]),r("selectedTeams",(null===n||void 0===n?void 0:n.assigned_teams)||[]))}},{key:"render",value:function(){var e=this,t=this.props,n=t.usersTeams.loading,r=t.searchStaff.loading,o=t.handleSubmit,i=t.locationId,c=this.state.search;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:o,children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(aC,{loading:n||r,placeholder:"Search...",searchIcon:!0,mode:"typeGray",disabled:!i||!t.has(vx.OPERATIONS_RUNS_MANAGE),onSearchValueChange:e.onSearchValueChange})})}),Object(a.jsxs)($q,{children:[!c&&e.getAssignedUsersAndTeams().map((function(n){return e.renderAssignee(n,t)})),c&&e.getSearchUsersAndTeams().map((function(n){return e.renderAssignee(n,t)}))]})]})}})}}]),n}(p.PureComponent),tz=Object(sg.compose)(Object(jv.a)({form:Xq}),oj({searchStaff:{fetch:Kq.searchStaff},usersTeams:{fetch:SU.searchTeamUser}}))(ez);function nz(){var e=Object(f.a)(["\n  padding: 0 20px;\n  height: 100%;\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  opacity: ",";\n  color: ",";\n  font-weight: ",";\n  box-shadow: ",";\n"]);return nz=function(){return e},e}function rz(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return rz=function(){return e},e}var az=y.default.div(rz()),oz=Object(y.default)(gv(["active","disabled"])("div"))(nz(),(function(e){return e.disabled?".4":"1"}),_.gray5,(function(e){return e.active&&lm.bold}),(function(e){return e.active&&"0 -3px 0 ".concat(_.blue2," inset")})),iz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.items,n=e.selectedTabId;return Object(a.jsx)(az,{children:t.map((function(e,t){return Object(a.jsx)(oz,{active:n===e.id,disabled:e.disabled,onClick:function(){return!e.disabled&&e.onClick&&n!==e.id?e.onClick(e):void 0},children:e.name},t)}))})}}]),n}(p.PureComponent),cz=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{id:e.id,job_id:e.job_id||(null===(t=e.job)||void 0===t?void 0:t.id),job:void 0,type:void 0,job_task_type_id:+e.type.id,name:iq.isCustomTask(e.type)?e.name:e.type.name,internal_note:e.internal_note,kpi_missed_reason:e.kpi_missed_reason||"",due_at:fv(e.due_at,!0),starts_at:e.starts_at&&fv(e.starts_at,!0)||"",ends_at:e.ends_at&&fv(e.ends_at,!0)||""})},sz=function(e){var t=Object.assign({},e);return t.due_at=hv(e.due_at),t.starts_at=hv(e.starts_at),t.ends_at=hv(e.ends_at),Object.assign({kpi_time:"".concat(t.type.kpi_hours||0," hours")},t)};function lz(){var e=Object(f.a)(["\n  padding: 0 ","px;\n  height: 60px;\n  margin: -30px -","px 30px;\n  border-bottom: 1px solid ",";\n  display: flex;\n  justify-content: space-between;\n"]);return lz=function(){return e},e}function uz(){var e=Object(f.a)(["\n  padding: 1rem;\n  &:not(:last-child){\n    border-bottom: 1px solid ",";\n  }\n  &:first-child{padding-top: 0px;}\n"]);return uz=function(){return e},e}var dz,pz,hz=y.default.div(uz(),_.gray2);!function(e){e.ADD_TASK_TO_RUN="ADD_TASK_TO_RUN"}(dz||(dz={})),function(e){e[e.Details=0]="Details",e[e.AssignedTo=1]="AssignedTo",e[e.Contacts=2]="Contacts"}(pz||(pz={}));var bz=y.default.div(lz(),zO,zO,_.gray2),fz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,activeTabId:pz.Details,detailsValues:null,assignedToValues:null,addTaskToRunFormValues:{},subTaskTypes:[]},e.onDetailsSubmit=function(t){t.hasOwnProperty("subtype")&&t.subtype&&(t.job_sub_task_type_id=t.subtype.id),e.setState({detailsValues:t})},e.onAssignedToSubmit=function(t){e.setState({assignedToValues:t})},e.submitCombine=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d,p,h,b;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,a=n.onSave,o=n.onClose,i=n.doAssign,c=n.task,s=n.doSave,l=n.validateForm,r(Object(Wv.c)(wq)),r(Object(Wv.c)(Xq)),t.next=5,Object(dw.delay)(100);case 5:if(!l(wq)){t.next=26;break}if(u=e.state,d=u.detailsValues,p=u.assignedToValues,e.setState({loading:!0}),t.prev=8,!s){t.next=17;break}return t.next=12,e.onInternalSave();case 12:if(b=t.sent,h=b.data,!i||!c&&!h){t.next=17;break}return t.next=17,e.onInternalAssign(c||h);case 17:if(!a){t.next=20;break}return t.next=20,a(d,p);case 20:Gy.emit(Ix.TaskWasUpdated),setTimeout(o);case 22:return t.prev=22,e.setState({loading:!1}),e.props.onClose(),t.finish(22);case 26:case"end":return t.stop()}}),t,null,[[8,,22,26]])}))),e.onInternalSave=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.edit,a=n.task,o=n.jobId,!(i=e.state.detailsValues)){t.next=26;break}if(c=cz(i),r){t.next=16;break}if(!o){t.next=11;break}return t.next=8,iq.createJobTask(o,c);case 8:return t.abrupt("return",t.sent);case 11:return t.next=13,iq.createAdhocTask(c);case 13:return t.abrupt("return",t.sent);case 14:t.next=26;break;case 16:if(!a){t.next=26;break}if(!a.job_id){t.next=23;break}return t.next=20,iq.updateJobTask(a.job_id,a.id,c);case 20:return t.abrupt("return",t.sent);case 23:return t.next=25,iq.updateAdhocTask(a.id,c);case 25:return t.abrupt("return",t.sent);case 26:return t.abrupt("return");case 27:case"end":return t.stop()}}),t)}))),e.onInternalAssign=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o,i,c,s,l,u,d,p,h,b,f,j,v,O;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.assignedToValues,o=e.props,i=o.addTaskToRunConfig,o.dispatch,c=null===i||void 0===i?void 0:i.assigned_slot,!(r&&n&&c)){t.next=28;break}return s=(c.assigned_users||[]).map((function(e){return e.id})),l=(r.selectedUsers||[]).map((function(e){return e.id})),u=(c.assigned_teams||[]).map((function(e){return e.id})),d=(r.selectedTeams||[]).map((function(e){return e.id})),p=Object(m.intersection)(s,l),h=Object(m.intersection)(u,d),b=Object(m.difference)(l,p),f=Object(m.difference)(s,p),j=Object(m.difference)(d,h),v=Object(m.difference)(u,h),t.next=16,Promise.all([Promise.all(f.map((function(e){return iq.removeUserFromScheduledTaskSlot(c.id,e)}))),Promise.all(j.map((function(e){return iq.assignTeamToScheduledTaskSlot(c.id,e)}))),Promise.all(v.map((function(e){return iq.removeTeamFromScheduledTaskSlot(c.id,e)})))]);case 16:return O=[],t.next=19,Promise.all(b.map((function(e){return iq.assignUserToScheduledTaskSlot(c.id,e,{assign_user:1}).catch((function(t){405===t.status_code&&O.push(r.selectedUsers.find((function(t){return t.id===e})))}))})));case 19:if(!O.length){t.next=27;break}return console.log(c),t.next=23,e.props.dispatch(iw("Confirm","Assign Staff to Task",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:[1===O.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:O[0].full_name})," is"]}):Object(a.jsx)(a.Fragment,{children:"Following staff members are"})," already booked between ",pm()(c.starts_at).format(sv)," to ",pm()(c.ends_at).format(sv),"."]}),O.length>1&&Object(a.jsx)("p",{children:O.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:e.user.full_name})})}))}),Object(a.jsx)("p",{children:"Are you sure you want to assign them to this task?"})]})));case 23:if(!t.sent){t.next=27;break}return t.next=27,Promise.all(O.map((function(e){return iq.assignUserToScheduledTaskSlot(c.id,e.id)})));case 27:Gy.emit(Ix.StaffAssignedToTask);case 28:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isKPIMissed=function(){var t=e.props.task;return!!t&&pm()().isAfter(pm()(t.due_at).subtract(t.type.kpi_hours||0,"h"))},e.tabs=j.a.compact([{name:"Details",id:pz.Details,onClick:function(){return e.setState({activeTabId:pz.Details})}},{name:"Assigned To",id:pz.AssignedTo,onClick:function(){return e.setState({activeTabId:pz.AssignedTo})},disabled:!!e.props.mode&&e.props.mode===dz.ADD_TASK_TO_RUN||!e.props.locationId||!e.props.assignStaffDate},function(t){var n=t.edit,r=t.task;return n&&(null===r||void 0===r?void 0:r.job)&&{name:"Contact Info",id:pz.Contacts,onClick:function(){return e.setState({activeTabId:pz.Contacts})}}}(e.props)]),e.applyScheduleValues=function(){var t=e.props,n=t.task,r=t.addTaskToRunConfig,a=null===r||void 0===r?void 0:r.assigned_slot;return a&&a.starts_at&&a.ends_at?Object(c.a)(Object(c.a)({},n),{},{is_confirmed:!!a.is_confirmed,scheduling_note:a.scheduling_note,starts_at:pm()(a.starts_at),ends_at:pm()(a.ends_at)}):n||{}},e.getSubTaskTypes=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,iq.getSubTaskOfTask(n.id).then(function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({subTaskTypes:n.data});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(t){e.setState({subTaskTypes:[]}),Oj(uj.Danger,t)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t,n=e.props,r=n.taskTypes,o=n.edit,i=n.task,c=n.isSchedulingActive,s=n.addTaskToRunConfig,l=n.mode,u=n.locationId,d=n.assignStaffDate,p=e.state,h=p.activeTabId,b=p.addTaskToRunFormValues,f=e.isKPIMissed(),m=!l||l&&l!==dz.ADD_TASK_TO_RUN;return Object(a.jsxs)(a.Fragment,{children:[m&&Object(a.jsx)(bz,{children:Object(a.jsx)(iz,{selectedTabId:h,items:e.tabs})}),Object(a.jsx)("div",{style:{display:h===pz.Details?"block":"none"},children:Object(a.jsx)(kq,{taskTypes:r,kpiIsMissed:f,canBeScheduled:i&&i.type.can_be_scheduled,canEditDueDate:i&&i.type.allow_edit_due_date,initialValues:Object.assign(e.applyScheduleValues(),b,{location_id:u}),addTaskToRunConfig:s,mode:l,onSubmit:e.onDetailsSubmit,isSchedulingActive:!!c,edit:o,subTaskTypes:e.state.subTaskTypes,getSubTaskTypes:e.getSubTaskTypes})}),Object(a.jsx)("div",{style:{display:h===pz.AssignedTo?"block":"none"},children:Object(a.jsx)(tz,{slot:null===s||void 0===s?void 0:s.assigned_slot,task:i,onSubmit:e.onAssignedToSubmit,locationId:u,date:d})}),o&&(null===i||void 0===i?void 0:i.job)&&h===pz.Contacts&&Object(a.jsx)("div",{children:null===(t=e.props.contacts.data)||void 0===t?void 0:t.filter((function(e){return[tv.CUSTOMER,tv.SITE_CONTACT].includes(e.assignment_type.name)})).map((function(e){return Object(a.jsxs)(hz,{children:[Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)("strong",{children:e.assignment_type.name})}),Object(a.jsx)("div",{children:hO.getContactName(e)}),e.addresses.length&&Object(a.jsx)("div",{children:e.addresses[0].full_address}),e.mobile_phone&&Object(a.jsxs)("div",{children:["Mobile Phone: ",e.mobile_phone]}),e.email&&Object(a.jsxs)("div",{children:["Email: ",Object(a.jsx)("a",{href:"mailto:".concat(e.email),target:"_blank",children:e.email})]})]})}))})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn",onClick:e.submitCombine,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.addTaskToRunConfig;if(this.props.task){if(this.props.task.hasOwnProperty("subtype")&&this.props.task.subtype){var t=[];t.push(this.props.task.subtype),this.setState({subTaskTypes:t})}this.props.task.job&&this.props.contacts.fetch(this.props.task.job.id)}if(e&&e.startHour){var n=e.assigned_slot,r=pm()(e.date).hours(+e.startHour),a=pm()(r);if(n){var o=Number(pm()(n.starts_at).format("mm"));r.add(o,"m");var i=pm()(n.ends_at).diff(pm()(n.starts_at));a.add(o,"m").add(i,"ms")}else a.add(60,"m");this.setState({addTaskToRunFormValues:{starts_at:r,ends_at:a}})}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.edit,o=e.task,i=e.addTaskToRunConfig,c=e.mode,s=(i||{}).assigned_slot,l=!c||c&&c!==dz.ADD_TASK_TO_RUN;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(a.jsxs)("span",{children:[s&&!l?"Re-schedule":i&&!l?"Schedule":r?"Edit":"Add"," Task"]})," ",(null===o||void 0===o?void 0:o.job)&&Object(a.jsx)("a",{href:"/job/".concat(o.job.id,"/details"),target:"_blank",children:"View Job Details"})]}),body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent),mz=Object(sg.compose)(Object(b.b)((function(e){return{validateForm:function(t){return Object(FI.a)(t)(e)}}})),oj({contacts:{fetch:zy.getContacts}}))(fz);function jz(){var e=Object(f.a)(["\n  margin-top: 30px;\n  position: relative;\n  width: 100%;\n  min-height: 60px;\n"]);return jz=function(){return e},e}function vz(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n  margin-bottom: 30px;\n"]);return vz=function(){return e},e}function Oz(){var e=Object(f.a)(["\n  padding: 17px 30px 0;\n"]);return Oz=function(){return e},e}function gz(){var e=Object(f.a)(["\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  background: ",";\n"]);return gz=function(){return e},e}var xz=y.default.div(gz(),_.gray0),yz=y.default.div(Oz()),_z=y.default.div(vz(),_.gray2),wz=y.default.div(jz()),Sz=mC.SortedGroupTitle,kz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,editTask:!1,task:{}},e.convertTaskTypes=function(){var t=e.props.taskTypes.data;return t?t.data:[]},e.onSave=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.match.params.id,(0,n.tasks.fetch)(r);case 2:case"end":return t.stop()}}),t)}))),e.getSortedTasks=function(){var t=e.props.tasks.data,n={completed:[],notCompleted:[]};return t&&(n.completed=t.data.filter((function(e){return e.latest_status.status===wJ.Completed})),n.notCompleted=t.data.filter((function(e){return e.latest_status.status===wJ.Active}))),n},e.editTask=function(t){e.setState({showModal:!0,editTask:!0,task:t})},e.deleteTask=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,i=r.tasks.fetch,t.next=3,a(iw("Confirm","Delete task #".concat(n.id," ").concat(n.name,"?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,iq.removeTaskFromJob(o,n.id);case 7:i(o);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showAddNewTaskModal=function(){e.setState({editTask:!1,showModal:!0})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id,n=e.tasks.fetch,r=e.taskTypes.fetch;n(t),r()}},{key:"render",value:function(){var e=this,t=this.state,n=t.showModal,r=t.editTask,o=t.task,i=this.props,c=i.tasks,s=c.loading,l=c.fetch,u=i.match.params.id,d=i.currentJob.data,p=this.getSortedTasks();return Object(a.jsx)(Cx.Consumer,{children:function(t){var i=t.has(vx.JOBS_TASKS_MANAGE),c=d&&d.id===+u&&d.assigned_location_id||void 0;return Object(a.jsxs)(xz,{children:[n&&Object(a.jsx)(mz,{locationId:c,jobId:+u,edit:r,task:r?sz(o):null,isOpen:n,onClose:function(){return e.setState({showModal:!1})},onSave:e.onSave,doAssign:!0,doSave:!0,taskTypes:e.convertTaskTypes()}),i&&Object(a.jsx)(yz,{className:"d-flex justify-content-end w-100",children:Object(a.jsx)(Xg,{className:"btn",onClick:e.showAddNewTaskModal,disabled:!!d&&d.edit_forbidden,children:"Add Task"})}),Object(a.jsxs)(wz,{children:[s&&Object(a.jsx)(Nv,{size:40,color:_.gray0}),p.notCompleted.length>0&&Object(a.jsx)(_z,{style:{width:"100%"},children:p.notCompleted.map((function(t){return Object(a.jsx)(fq,{onTaskEdit:function(){return e.editTask(t)},jobId:+u,fetch:function(){return l(u)},deleteTask:function(){return e.deleteTask(t)},task:t},t.id)}))}),p.completed.length>0&&Object(a.jsxs)(_z,{style:{width:"100%"},children:[Object(a.jsx)(Sz,{padding:"0 30px 10px 30px",children:"Completed"}),p.completed.map((function(t){return Object(a.jsx)(fq,{onTaskEdit:function(){return e.editTask(t)},jobId:+u,fetch:function(){return l(u)},deleteTask:function(){return e.deleteTask(t)},task:t},t.id)}))]})]})]})}})}}]),n}(p.PureComponent),Cz=Object(sg.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob}})),O.g,oj({tasks:{fetch:iq.getJobTasks},taskTypes:{fetch:iq.getTaskTypes}}))(kz),Nz="Steamatic/CurrentJob/Documents/LOAD_DOCUMENTS",Ez="Steamatic/CurrentJob/Documents/LOAD_DOCUMENTS_COMPLETE",Az="Steamatic/CurrentJob/Documents/RESET",Iz="Steamatic/CurrentJob/Documents/ERROR",Tz="Steamatic/CurrentJob/Documents/SELECTED_DOCUMENTS",Rz="Steamatic/CurrentJob/Documents/RESET_SELECTED_DOCUMENTS",Dz=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Ez:return t.payload;case Az:return null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Iz:return t.payload;case Ez:case Az:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Nz:return!0;case Ez:case Az:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Ez:return!0;case Az:return!1;default:return e}},params:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Nz:return t.payload;case Az:return{};default:return e}},selectedDocuments:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case Tz:return t.payload;case Az:case Rz:return[];default:return e}}}),Mz=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e||r().currentJobDocuments.params,n({type:Nz,payload:a}),t.prev=2,t.next=5,zy.getJobDocuments(e);case 5:return o=t.sent,n({type:Ez,payload:o}),t.abrupt("return",o);case 10:throw t.prev=10,t.t0=t.catch(2),n({type:Iz,payload:t.t0}),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e,n){return t.apply(this,arguments)}}()},Lz=function(){return{type:Rz}};function Pz(){var e=Object(f.a)(["\n  margin: 0 5px;\n  font-size: ",";\n"]);return Pz=function(){return e},e}function Fz(){var e=Object(f.a)(["\n  height: 20px;\n  min-width: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: 100px;\n  background: ",";\n  z-index: 5;\n  color: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  * {\n    stroke-width: 2.5px !important;\n  }\n"]);return Fz=function(){return e},e}function Uz(){var e=Object(f.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n\n  > * {\n    margin-left: 5px;\n  }\n"]);return Uz=function(){return e},e}function Bz(){var e=Object(f.a)(["\n  padding: 10px;\n  border: 0;\n  width: 100%;\n  font-weight: ",";\n  font-size: ",";\n  outline: none;\n  background: ",";\n  color: ",";\n"]);return Bz=function(){return e},e}function Vz(){var e=Object(f.a)(["\n  background-size: cover;\n  background-position: center;\n  background-color: ",";\n  position: relative;\n  width: 100%;\n  height: 150px;\n  .doc-icon{\n    font-size: 100px;\n  }\n  .doc-title{\n    position: absolute;\n    left: 0px;\n    bottom: 0px;\n    width: 100%;\n    text-align: center;\n    background: #000;\n    opacity: 0.7;\n    color: #fff;\n  }\n"]);return Vz=function(){return e},e}function Jz(){var e=Object(f.a)(["\n  width: 230px;\n  margin: 0 20px 20px 0;\n  overflow: hidden;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 0 0 0 1px ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n\n    & .tools {\n      visibility: visible !important;\n    }\n  }\n"]);return Jz=function(){return e},e}var qz={jpg:"fa-file-image text-info",jpeg:"fa-file-image text-info",png:"fa-file-image text-info",gif:"fa-file-image text-info",xls:"fa-file-excel text-success",xlsx:"fa-file-excel text-success",xlt:"fa-file-excel text-success",xltx:"fa-file-excel text-success",xlm:"fa-file-excel text-success",xlsm:"fa-file-excel text-success",doc:"fa-file-word text-primary",docx:"fa-file-word text-primary",dot:"fa-file-word text-primary",dotx:"fa-file-word text-primary",wbk:"fa-file-word text-primary",docm:"fa-file-word text-primary",docb:"fa-file-word text-primary",pdf:"fa-file-pdf text-danger",zip:"fa-file-archive text-dark",file:"fa-file text-dark"},zz=y.default.div(Jz(),_.gray2,_.blue0),Gz=y.default.div(Vz(),_.gray0),Wz=Object(y.default)(gv(["selected"])("input"))(Bz(),lm.medium,sm.smaller,(function(e){return e.selected?_.blue0:"transparent"}),(function(e){return e.selected?_.black1:_.gray5})),Hz=y.default.div(Uz()),Yz=Object(y.default)(gv(["br","color"])("div"))(Fz(),(function(e){return e.bg}),(function(e){return e.color?e.color:_.white}),(function(e){return e.color?e.color:_.white})),Qz=y.default.span(Pz(),sm.smaller),Kz=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={description:e.props.doc.description,loading:!1,url:e.props.doc.url},e.onDescriptionChangeInternal=function(t){e.setState({description:t.target.value}),e.debouncedDescriptionChange(t.target.value)},e.debouncedDescriptionChange=Object(m.debounce)((function(t){var n=e.props,r=n.onDescriptionChange,a=n.doc.id;e.setState({loading:!0}),r(t,a).finally((function(){e.setState({loading:!1})}))}),1500),e.uploadDoc=function(t){var n=e.props,r=n.doc.id,a=n.onDocUpdate,o=new FormData;o.append("file",t),a(o,r).finally((function(){e.setState({loading:!1})}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadDoc(t.target.files[0]))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.doc,n=(t.id,t.file_name),r=(e.onExpand,e.doc),o=e.selected,i=e.dispatch,c=e.noUpdate,s=this.state,l=s.description,u=s.loading,d=(null===n||void 0===n?void 0:n.split(".").pop())||"file",p=qz[d]||qz.file;return Object(a.jsxs)(zz,{children:[Object(a.jsx)(Hz,{className:"tools",children:!c&&Object(a.jsx)(Yz,{bg:_.blue5,color:_.white,onClick:this.onUploadLinkClick,children:Object(a.jsx)(Qz,{children:"Update"})})}),Object(a.jsxs)(Gz,{className:"d-flex p-2 justify-content-center",onClick:c?void 0:function(){return i(function(e){return function(t,n){var r=n().currentJobDocuments.selectedDocuments,a=r.slice(0);r.find((function(t){return t.id===e.id}))?a.splice(r.map((function(e){return e.id})).indexOf(e.id),1):a.push(e),t({type:Tz,payload:a})}}(r))},children:[Object(a.jsx)("span",{className:"doc-icon fas ".concat(p," text-center")}),Object(a.jsx)(um.a,{className:"overlapping text-left",id:"doc_title",effect:"solid"}),Object(a.jsx)("div",{className:"doc-title text-truncate p-2","data-for":"doc_title","data-tip":r.file_name,children:r.file_name})]}),Object(a.jsx)(Wz,{type:"text",onChange:this.onDescriptionChangeInternal,value:l,selected:o,disabled:c,placeholder:c?"Editing is disabled":"Enter a short description..."}),u&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("input",{type:"file",accept:aG,hidden:!0,disabled:c,onChange:this.onFileInputChange,ref:this.inputRef})]})}}]),n}(p.PureComponent),Zz=Object(b.b)()(Kz);function Xz(){var e=Object(f.a)(["\n  position: absolute;\n  top: 20px;\n  right: 30px;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n\n  :hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return Xz=function(){return e},e}function $z(){var e=Object(f.a)(["\n  color: transparent;\n  filter: grayscale(1);\n"]);return $z=function(){return e},e}function eG(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return eG=function(){return e},e}function tG(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return tG=function(){return e},e}function nG(){var e=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 10px 0 40px 0;\n"]);return nG=function(){return e},e}function rG(){var e=Object(f.a)(["\n  padding: 40px 30px 30px 30px;\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return rG=function(){return e},e}var aG="*",oG=y.default.div(rG()),iG=y.default.div(nG()),cG=mC.SortedGroupTitle,sG=y.default.div(tG(),lm.bold),lG=y.default.span(eG(),_.blue4,_.blue5),uG=y.default.div($z()),dG=y.default.div(Xz(),_.blue4,sm.smaller,_.blue5),pG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,filmstrip:!1,currentDocId:void 0,blockLoading:!1,sortedDocsGroups:e.groupedDocs,rotateImage:!1,rotateImageId:0},e.loadDocs=function(){var t=e.props,n=t.match;return(0,t.dispatch)(Mz(n.params.id))},e.handleDrop=function(t){var n=e.props.currentJob.data,r=n&&n.edit_forbidden;t.preventDefault(),!r&&t.dataTransfer.files.length>0&&(e.setState({loading:!0}),e.uploadDocuments(t.dataTransfer.files))},e.uploadDocuments=function(t){var n,r=e.props.match,o=[],i=["pdf","doc","docx","dot","dotx","wbk","docm","docb","xls","xlsx","xlt","xltx","xlm","xlsm","zip","jpg","jpeg","png"],c=Object(oV.a)(t);try{for(c.s();!(n=c.n()).done;){var s=n.value,l=(s.name.split(".").pop()||"").toLowerCase();i.includes(l)?o.push(Fw.postDocument(s).then((function(e){return zy.attachDocument(r.params.id,e.data.id,{description:""})}))):Oj(uj.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",l]})," is not supported!"]}))}}catch(u){c.e(u)}finally{c.f()}0===o.length?e.setState({loading:!1}):Promise.all(o).then((function(){setTimeout((function(){e.loadDocs(),e.setState({loading:!1})}),500)})).catch((function(){e.setState({loading:!1})}))},e.onDragOver=function(e){e.preventDefault()},e.changeDescription=function(t,n){var r=e.props.match;return zy.updateAttachedDocument(r.params.id,n,{description:t})},e.onDocUpdate=function(t,n){return Fw.updateDocument(n,t).then((function(){return e.setState({blockLoading:!0}),e.loadDocs().then((function(){e.setState({blockLoading:!1})})).catch((function(){e.setState({blockLoading:!1})}))}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadDocuments(t.target.files))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadDocs()}},{key:"componentDidUpdate",value:function(e){e.currentJobDocuments!==this.props.currentJobDocuments&&this.setState({sortedDocsGroups:this.groupedDocs})}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:Az})}},{key:"render",value:function(){var e=this,t=this.props,n=t.currentJobDocuments,r=n.loading,o=n.data,i=n.selectedDocuments,c=t.currentJob.data,s=this.state,l=s.loading,u=s.blockLoading,d=s.sortedDocsGroups,p=c&&c.edit_forbidden;return Object(a.jsx)(oG,{onDragOver:this.onDragOver,onDrop:this.handleDrop,children:Object(a.jsx)(Cx.Consumer,{children:function(t){t.has(vx.JOBS_UPDATE);return Object(a.jsxs)(a.Fragment,{children:[o&&c&&Object(a.jsx)(a.Fragment,{children:d.length>0?Object(a.jsxs)(a.Fragment,{children:[!p&&t.has(vx.JOBS_DOCUMENTS_CREATE)&&Object(a.jsx)(dG,{onClick:e.onUploadLinkClick,children:"Add documents"}),d.map((function(n,r){return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)(cG,{children:pm()(1e3*n.unix).format("ddd, D MMM YYYY")}),Object(a.jsx)(iG,{children:n.items.map((function(n){return Object(a.jsx)(Zz,{doc:n,selected:!!i.find((function(e){return e.id===n.id})),noUpdate:!!p||!t.has(vx.JOBS_DOCUMENTS_UPDATE),onDescriptionChange:e.changeDescription,onDocUpdate:e.onDocUpdate},n.id)}))})]},r)}))]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(uG,{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(cm,{name:Xf.Barista,size:200})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsx)(sG,{children:"No documents have been uploaded"})}),!p&&t.has(vx.JOBS_DOCUMENTS_CREATE)&&Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:["Drag and drop to add documents or ",Object(a.jsx)(lG,{onClick:e.onUploadLinkClick,children:"click here"})," ","to ",Object(a.jsx)("br",{})," upload the old fashioned way."]})})]})}),(r||l)&&!u&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("input",{type:"file",accept:aG,multiple:!0,hidden:!0,onChange:e.onFileInputChange,ref:e.inputRef})]})}})})}},{key:"groupedDocs",get:function(){var e=this.props.currentJobDocuments.data;return e?jm(e.data,"created_at"):[]}}]),n}(p.PureComponent),hG=Object(sg.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,currentJobDocuments:e.currentJobDocuments}})),O.g)(pG);function bG(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n  margin-top: 10px;\n  display: inline-block;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return bG=function(){return e},e}function fG(){var e=Object(f.a)(["\n  color: ",";\n  margin-bottom: 30px;\n"]);return fG=function(){return e},e}function mG(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n"]);return mG=function(){return e},e}function jG(){var e=Object(f.a)(["\n  padding: 15px;\n  position: fixed;\n  margin-top: 60px;\n"]);return jG=function(){return e},e}var vG=y.default.div(jG()),OG=y.default.div(mG(),sm.medium,lm.medium),gG=y.default.div(fG(),_.gray4),xG=y.default.div(bG(),_.blue4,_.blue5),yG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.downloadDocuments=function(){var t=e.props,n=t.currentJobDocuments.selectedDocuments,r=(t.job,t.dispatch);if(n.length>0){var a=[];e.setState({loading:!0});var o,i=Object(oV.a)(n);try{for(i.s();!(o=i.n()).done;){var c=o.value;a.push(Fw.downloadDocument(c.id,c.file_name))}}catch(s){i.e(s)}finally{i.f()}Promise.all(a).then((function(){r(Lz()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}},e.detachDocuments=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.currentJobDocuments.selectedDocuments,a=n.job,o=n.dispatch,t.next=3,o(iw("Confirm","Delete Document"+(r.length>1?"s":""),"Do you really want to delete ".concat(r.length>1?"these documents":"this document"," from this job?")));case 3:if(t.sent){i=[],e.setState({loading:!0}),c=Object(oV.a)(r);try{for(c.s();!(s=c.n()).done;)l=s.value,i.push(zy.detachDocument(a.id,l.id))}catch(u){c.e(u)}finally{c.f()}Promise.all(i).then((function(){o(Mz(a.id)),o(Lz()),e.setState({loading:!1})})).catch((function(){e.setState({loading:!1})}))}case 5:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.currentJobDocuments.selectedDocuments,n=this.state.loading;return Object(a.jsxs)(vG,{children:[Object(a.jsx)(OG,{children:"Manage Documents"}),Object(a.jsxs)(gG,{children:[t.length," ",t.length>1?"items":"item"," selected"]}),Object(a.jsx)(Xg,{className:"btn",onClick:this.downloadDocuments,children:"Download"}),Object(a.jsx)("br",{}),Object(a.jsx)(xG,{onClick:function(){e.detachDocuments()},children:"Delete"}),n&&Object(a.jsx)(Nv,{size:40,color:_.gray1})]})}}]),n}(p.PureComponent),_G=Object(b.b)((function(e){return{currentJobDocuments:e.currentJobDocuments}}))(yG);function wG(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  display: flex;\n  align-items: center;\n"]);return wG=function(){return e},e}function SG(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  padding-left: 26px;\n  display: flex;\n  align-items: center;\n  margin-right: ",";\n"]);return SG=function(){return e},e}function kG(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return kG=function(){return e},e}function CG(){var e=Object(f.a)(["\n  height: 55px;\n  background: ",";\n  border: 1px "," solid;\n  padding: 27px 0;\n  display: flex;\n  justify-content: space-between;\n  align-content: center;\n"]);return CG=function(){return e},e}function NG(){var e=Object(f.a)(["\n  padding: 0px 25px;\n  display: flex;\n  align-items: center;\n  justify-content: flex-end;\n"]);return NG=function(){return e},e}var EG=y.default.div(NG()),AG=y.default.div(CG(),_.white,_.gray2),IG=y.default.div(kG()),TG=y.default.div(SG(),lm.bold,sm.medium,sm.big),RG=y.default.div(wG(),lm.light,sm.medium),DG=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.siteAddress,n=e.additionalHeaderLayout,r=e.customHeaderTitle,o=e.reportId;return Object(a.jsxs)(AG,{children:[Object(a.jsxs)(IG,{children:[Object(a.jsx)(TG,{className:" print-hide",children:r||"Job Usage, Actuals, Reports"}),Object(a.jsxs)(RG,{children:[o&&Object(a.jsxs)(TG,{children:["Quotation #",o]}),t]})]}),Object(a.jsx)(EG,{className:"flex-grow-1 print-hide",children:n})]})}}]),n}(p.PureComponent),MG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/usages-all?usedtype=").concat(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),LG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/assessment-reports/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),PG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/assessment-reports/").concat(n,"/status-and-total"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),FG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/assessment-reports/").concat(n,"/statuses"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),UG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/assessment-reports/").concat(n,"/duplicate"));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/assessment-reports/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),VG=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/assessment-reports/".concat(t,"/cost-items"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),JG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/".concat(t,"/cost-items/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),qG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(t,"/cost-items"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zG=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/cost_items/mapping-data",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),GG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/cost_items/".concat(t,"/mapping-data"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),WG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/assessment-reports/".concat(t,"/cost-items/positions"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),HG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/assessment-reports/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),YG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/assessment-reports/".concat(t,"/cost-items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),QG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),KG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(t,"/sections"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ZG=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/assessment-reports/".concat(t,"/sections/positions"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XG={getAllImportModal:MG,assessmentReportsGet:LG,assessmentReportsGetStatusAndTotal:PG,assessmentReportStatusUpdate:FG,assessmentReportDuplicate:UG,assessmentReportDelete:BG,costItemList:VG,costItemCreate:qG,costItemListUpdate:JG,costItemPositionUpdate:WG,costItemDelete:YG,assessmentReportHeading:HG,assessmentReportSectionHeadingUpdate:QG,assessmentReportSectionDelete:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/assessment-reports/".concat(t,"/sections/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportSectionPositionUpdate:ZG,assessmentReportSectionDuplicate:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/duplicate"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportAttachImage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/images"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdateImage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a){var o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/images/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),assessmentReportDeleteImage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/images/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAttachPhotos:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/photos"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdatePhotos:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a){var o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/photos/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),assessmentReportDeletePhotos:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/photos/").concat(r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAddPhotosFromJob:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/photos/add-from-job"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAddBulkItems:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/bulk"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportAddSingleItems:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdateSingleItems:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a){var o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),assessmentReportDeleteSingleItems:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/").concat(r));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportUpdatePositionItems:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/assessment-reports/".concat(n,"/sections/").concat(t,"/text-blocks/positions"),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),assessmentReportSectionCreate:KG,addScopeOfWorkServiceList:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/services",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addScopeOfWorkCategory:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/work_categories");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),addScopeOfWorkList:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/works",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addScopeOfWorkListFilter:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/works?term=".concat(t,"&work_category_id=").concat(n,"&job_service_id=").concat(r));case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getAreas:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/areas"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),newReportCreate:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/assessment-reports/with-cost-item"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),setMarkAsUsed:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/assessment-reports/update-job-usages-counter"),n);case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportCoastingSatges:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/assessment-reports/".concat(t,"/costing-stages"));case 2:return n=e.sent,e.abrupt("return",null===n||void 0===n?void 0:n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createStage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(t,"/costing-stages"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateStage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/assessment-reports/".concat(t,"/costing-stages/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),deleteStage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/assessment-reports/".concat(t,"/costing-stages/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),positionUpdateStage:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/assessment-reports/".concat(t,"/costing-stages/positions"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),costItemsApplyMarkups:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/assessment-reports/".concat(t,"/cost-items/apply-markups"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getApproverList:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/assessment-reports/".concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),sendApproveRequest:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/assessment-reports/".concat(t,"/approve-requests"),{approver_list:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),assessmentReportUpdateRoomSection:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a){var o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/assessment-reports/".concat(t,"/sections/").concat(n,"/rooms/").concat(r),a);case 2:return o=e.sent,e.abrupt("return",o.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),costItemTNMMapCreate:zG,costItemTNMMapUpdate:GG},$G={getAllowanceTypes:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/allowance-types");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),createAllowance:function(e){var t=e.job_id;return ev.post("/v1/jobs/".concat(t,"/allowances"),e)},updateAllowance:function(e){var t=e.job_id,n=e.id;return ev.patch("/v1/jobs/".concat(t,"/allowances/").concat(n),e)},getJobAllowances:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/allowances"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["date_given","user.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteJobAllowance:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/allowances/").concat(t))},approveAllowance:function(e){var t=e.job_id,n=e.id;return ev.post("/v1/jobs/".concat(t,"/allowances/").concat(n,"/approve"))},deleteBulkJobAllowance:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/allowances/bulk"),{ids:Object(aj.a)(t)})},markAsUsedBulkJobAllowance:function(e,t){return ev.post("/v1/jobs/".concat(e,"/assessment-reports/update-job-usages-counter"),{id:Object(aj.a)(t),in_report_used_count:1,modal:"job_allowance"})},approveBulkJobAllowance:function(e,t){return ev.post("/v1/jobs/".concat(e,"/allowances/approve/bulk"),{ids:Object(aj.a)(t)})}},eW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/labours"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["started_at_override","worker_id"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),tW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/usage-and-actuals/labour-types",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/usage-and-actuals/labour-types/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/usage-and-actuals/labour-types/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),aW={getJobLabours:eW,createJobLabour:function(e){return ev.post("/v1/jobs/".concat(e.job_id,"/labours"),e)},deleteJobLabour:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/labours/").concat(t))},updateJobLabour:function(e,t,n){return ev.patch("/v1/jobs/".concat(e,"/labours/").concat(t),n)},getLabourTypes:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/labour-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateJobLabourStatus:function(e,t,n){return ev.patch("/v1/jobs/".concat(e,"/labours/").concat(t,"/status"),{status:n})},createLabourType:tW,updateLabourType:nW,deleteLabourType:rW,markAsUsedBulkJobLabour:function(e,t){return ev.post("/v1/jobs/".concat(e,"/assessment-reports/update-job-usages-counter"),{id:Object(aj.a)(t),in_report_used_count:1,modal:"job_labour"})},updateJobLabourInBulk:function(e,t,n){return ev.patch("/v1/jobs/".concat(e,"/labours/bulk"),Object(c.a)({ids:Object(aj.a)(t)},n))},approveJobLabour:function(e,t){return ev.post("/v1/jobs/".concat(e,"/labours/").concat(t,"/approve"))},approveBulkJobLabour:function(e,t){return ev.post("/v1/jobs/".concat(e,"/labours/approve/bulk"),{ids:Object(aj.a)(t)})}},oW={createReimbursement:function(e){var t=e.job_id;return ev.post("/v1/jobs/".concat(t,"/reimbursements"),e)},getJobReimbursements:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/reimbursements"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["date_of_expense","user.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteJobReimbursement:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/reimbursements/").concat(t))},updateReimbursement:function(e){var t=e.job_id,n=e.id;return ev.patch("/v1/jobs/".concat(t,"/reimbursements/").concat(n),e)},approveReimbursement:function(e){var t=e.job_id,n=e.id;return ev.post("/v1/jobs/".concat(t,"/reimbursements/").concat(n,"/approve"))},deleteBulkJobReimbursement:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/reimbursements/bulk"),{ids:Object(aj.a)(t)})},markAsUsedBulkJobReimbursement:function(e,t){return ev.post("/v1/jobs/".concat(e,"/assessment-reports/update-job-usages-counter"),{id:Object(aj.a)(t),in_report_used_count:1,modal:"job_reimbursement"})},approveBulkJobReimbursement:function(e,t){return ev.post("/v1/jobs/".concat(e,"/reimbursements/approve/bulk"),{ids:Object(aj.a)(t)})}},iW={createLaha:function(e){var t=e.job_id;return ev.post("/v1/jobs/".concat(t,"/laha"),e)},getJobLahas:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/laha"),n);case 2:return r=e.sent,e.abrupt("return",{data:Object(m.orderBy)(r.data,["date_started","user.full_name"],["desc","asc"]),pagination:r.pagination});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),updateJobLaha:function(e){var t=e.job_id,n=e.id;return ev.patch("/v1/jobs/".concat(t,"/laha/").concat(n),e)},deleteJobLaha:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/laha/").concat(t))},getLahaCompensations:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/laha-compensations");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),approveLaha:function(e){var t=e.job_id,n=e.id;return ev.post("/v1/jobs/".concat(t,"/laha/").concat(n,"/approve"))},deleteBulkJobLaha:function(e,t){return ev.remove("/v1/jobs/".concat(e,"/laha/bulk"),{ids:Object(aj.a)(t)})},markAsUsedBulkJobLaha:function(e,t){return ev.post("/v1/jobs/".concat(e,"/assessment-reports/update-job-usages-counter"),{id:Object(aj.a)(t),in_report_used_count:1,modal:"job_laha_compensation"})},approveBulkJobLaha:function(e,t){return ev.post("/v1/jobs/".concat(e,"/laha/approve/bulk"),{ids:Object(aj.a)(t)})}},cW=function(e){var t,n,r=(null===(t=e.charging_interval)||void 0===t?void 0:t.value)||e.charging_interval;return Object(c.a)(Object(c.a)({},e),{},{type:(null===(n=e.type)||void 0===n?void 0:n.value)||e.type||null,charging_interval:r,max_count_to_day_next_interval:"hour"===r?e.max_count_to_the_next_interval:void 0,max_count_to_the_next_interval:"hour"===r?e.max_count_to_day_next_interval:e.max_count_to_the_next_interval,charging_intervals:void 0})},sW=function(e){var t,n,r;return Object(c.a)(Object(c.a)({},e),{},{equipment_category_id:null===(t=e.equipment_category)||void 0===t?void 0:t.id,location_id:(null===(n=e.location)||void 0===n?void 0:n.id)||null,status:(null===(r=e.status)||void 0===r?void 0:r.value)||e.status||null,last_test_tag_at:pm.a.isMoment(e.last_test_tag_at)?fv(e.last_test_tag_at,!0):e.last_test_tag_at||null,next_test_tag_at:pm.a.isMoment(e.next_test_tag_at)?fv(e.next_test_tag_at,!0):e.next_test_tag_at||null,equipment_category:void 0,location:void 0,job_equipment:void 0})},lW=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{charging_interval:(null===(t=e.charging_interval)||void 0===t?void 0:t.value)||e.charging_interval||null})},uW=function(e){var t,n,r;return{name:null===(t=e.equipment)||void 0===t||null===(n=t.equipment_category)||void 0===n?void 0:n.name,equipment:e.equipment,total_amount:e.total_charge,unit_cost_to_me:e.buy_cost_per_interval,unit_price_to_charge:null===(r=e.charging_interval)||void 0===r?void 0:r.charging_rate_per_interval,started_at:pm()(e.started_at),ended_at:pm()(e.ended_at),intervals_count_override:e.intervals_count_override}},dW=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{measure_unit_id:null===(t=e.measure_unit)||void 0===t?void 0:t.id,measure_unit:void 0})},pW=function(e){return{buy_cost_per_unit:+e.default_buy_cost_per_unit,sell_cost_per_unit:+e.default_sell_cost_per_unit,quantity_used_override:e.count,used_at:e.used_at.format(ov),material_id:e.material.id}},hW=function(){return{used_at:pm()()}},bW=function(e){return{used_at:pm()(e.used_at),material:e.material,default_buy_cost_per_unit:e.buy_cost_per_unit,default_sell_cost_per_unit:e.sell_cost_per_unit,count:e.quantity_used_override}},fW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/materials",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),mW=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/measure-units"));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),jW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/usage-and-actuals/materials",dW(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/usage-and-actuals/materials/".concat(t),dW(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),OW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/materials/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/usage-and-actuals/materials/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),xW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/materials/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),yW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_W=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/usage-and-actuals/equipment",sW(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),wW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/usage-and-actuals/equipment/".concat(t),sW(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),SW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/usage-and-actuals/equipment/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),kW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment/search",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),CW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/equipment/".concat(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),NW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment-categories",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),EW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment-categories/search",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),AW=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/insurer-contract-material");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),IW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/usage-and-actuals/insurer-contract-material/".concat(t,"/").concat(n),r);case 2:return a=e.sent,e.abrupt("return",a.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),TW=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/insurer-contracts");case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),RW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/usage-and-actuals/equipment-categories",cW(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/usage-and-actuals/equipment-categories/".concat(t),cW(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),MW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/usage-and-actuals/equipment-categories/".concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/equipment-categories/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),PW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval"),lW(Object(c.a)({equipment_category_id:t},n)));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),FW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval/").concat(n),lW(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),UW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval/").concat(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),VW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment-categories/".concat(t,"/charging-interval"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),JW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/usage-and-actuals/equipment/".concat(t,"/placement/start"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),qW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/usage-and-actuals/equipment/".concat(t,"/placement/stop")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment/".concat(t,"/placements"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),GW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment/".concat(t,"/equipment-history"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),WW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/usage-and-actuals/equipment/".concat(t,"/qr-history"),Object(c.a)({equipment_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),HW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment/".concat(t,"/qr-history"),n));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),YW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/equipment/equipments-last-qr-history",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),QW=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/usage-and-actuals/expenses/search",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),KW=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/operations/inventory-items/job",Object(c.a)({job:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ZW=Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},XG),$G),aW),oW),iW),{},{getAllMaterials:fW,getAllMeasureUnits:mW,createMaterial:jW,updateMaterial:vW,deleteMaterial:gW,getMaterial:xW,searchMaterials:OW,getAllEquipments:yW,createEquipment:_W,updateEquipment:wW,deleteEquipment:SW,searchEquipment:kW,getEquipmentInfo:CW,getEquipmentCategories:NW,searchEquipmentCategories:EW,getAllContracts:AW,Updatecontract:IW,getListInsurerContracts:TW,createEquipmentCategory:RW,updateEquipmentCategory:DW,deleteEquipmentCategory:MW,getEquipmentCategory:LW,createEquipmentChargingInterval:PW,updateEquipmentChargingInterval:FW,deleteEquipmentChargingInterval:UW,getEquipmentChargingInterval:BW,getEquipmentChargingIntervals:VW,startEquipmentPlacement:JW,stopEquipmentPlacement:qW,getEquipmentPlacements:zW,getEquipmentDeployemntHistory:GW,saveEquipmentScannedLocation:WW,getEquipmentScannedLocation:HW,getEquipmentsScannedLocations:YW,searchExpenses:QW,getJobStorageItems:KW,isEditable:function(e,t,n){return n.has(vx.ASSESSMENT_REPORTS_MANAGE)&&!["client_approved","cancelled","client_cancelled"].includes(t)&&e.data&&e.data.latest_status.status!==zj.Closed}});function XW(e){return{load:"Steamatic/Job/".concat(e,"/LOAD"),loadComplete:"Steamatic/Job/".concat(e,"/LOAD_COMPLETE"),reset:"Steamatic/Job/".concat(e,"/RESET"),error:"Steamatic/Job/".concat(e,"/ERROR")}}var $W=XW("Costings"),eH=Ek({load:$W.load,loadComplete:$W.loadComplete,reset:$W.reset,error:$W.error}),tH=XW("Allowances"),nH=Ek({load:tH.load,loadComplete:tH.loadComplete,reset:tH.reset,error:tH.error}),rH=XW("Equipments"),aH=Ek({load:rH.load,loadComplete:rH.loadComplete,reset:rH.reset,error:rH.error}),oH=XW("Materials"),iH=Ek({load:oH.load,loadComplete:oH.loadComplete,reset:oH.reset,error:oH.error}),cH=XW("Reimbursements"),sH=Ek({load:cH.load,loadComplete:cH.loadComplete,reset:cH.reset,error:cH.error}),lH=XW("Lahas"),uH=Ek({load:lH.load,loadComplete:lH.loadComplete,reset:lH.reset,error:lH.error}),dH=XW("Labours"),pH={toggle:"Steamatic/Job/Labour/TOGGLE_LABOUR",resetSelected:"Steamatic/Job/Labour/RESET_SELECTED_LABOUR",massSelect:"Steamatic/Job/Labour/MASS_SELECT_LABOUR"},hH=Ek({load:dH.load,loadComplete:dH.loadComplete,reset:dH.reset,error:dH.error}),bH=XW("CostingCounters"),fH=Ek({load:bH.load,loadComplete:bH.loadComplete,reset:bH.reset,error:bH.error}),mH=function(){return Mk($W.load,null)},jH=function(e){return Dk($W.load,$W.loadComplete,$W.error,(function(){return zy.getJobUsageSummary(e)}))},vH=function(e){return Dk(rH.load,rH.loadComplete,rH.error,(function(){return zy.getJobEquipments(e)}))},OH=function(e){return Dk(oH.load,oH.loadComplete,oH.error,(function(){return zy.getJobMaterials(e,{sortby:"asc"})}))},gH=function(e){return Dk(bH.load,bH.loadComplete,bH.error,(function(){return zy.getJobCostingCounters(e)}))},xH=Rk(pH),yH=Ik(pH),_H=xH.resetSelected,wH=function(e){return xH.toggle(e.id)},SH=function(e){return xH.massSelect(e.map((function(e){return e.id})))},kH=Object(sg.combineReducers)({summary:eH,equipments:aH,materials:iH,labourAllowances:nH,labourReimbursements:sH,labours:hH,costingCounters:fH,labourLahas:uH,selectedLabourIds:yH});function CH(){var e=Object(f.a)(["\n  margin-top: 21px;\n"]);return CH=function(){return e},e}function NH(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n  overflow: auto;\n"]);return NH=function(){return e},e}var EH,AH,IH,TH=y.default.div(NH()),RH=y.default.div(CH()),DH=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loadingReport:!1},e.onAddReport=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,r={date:new Date,savetype:"Stage 1",value:[]},e.setState({loadingReport:!0}),t.next=5,ZW.newReportCreate(parseInt(n),r);case 5:a=t.sent,e.props.history.push("/usage-and-actuals/".concat(n,"/buildCosting/").concat(a.id)),e.setState({loadingReport:!1});case 8:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.job,n=e.match.params.id,r=e.dispatch;(!t.data||t.data&&t.data.id!==+n)&&(r(BD(n)),r(DP(n)),r(gH(+n)))}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.job,r=t.match.params.id,a=t.dispatch,o=e.match.params.id;n.data&&r===o||a(BD(r))}},{key:"getMenuItems",value:function(){var e=this,t=this.props.match.params.id;return[{path:"/usage-and-actuals/".concat(t,"/summary"),label:"Summary",icon:Xf.AnalyticsBar,isActive:this.isActive("/usage-and-actuals/".concat(t,"/summary")),type:"summary"},{path:"/usage-and-actuals/".concat(t,"/report"),label:"Reports",icon:Xf.AnalyticsBar,isActive:this.isActive("/usage-and-actuals/".concat(t,"/report")),type:"report"},{path:"/usage-and-actuals/".concat(t,"/labour"),label:"Time",icon:Xf.Stopwatch,isActive:this.isActive("/usage-and-actuals/".concat(t,"/labour")),type:"time",value:0},{path:"/usage-and-actuals/".concat(t,"/equipment"),label:"Equipment",icon:Xf.Tools,isActive:this.isActive("/usage-and-actuals/".concat(t,"/equipment")),type:"equipment",value:0},{path:"/usage-and-actuals/".concat(t,"/materials"),label:"Materials",icon:Xf.Materials,isActive:this.isActive("/usage-and-actuals/".concat(t,"/materials")),type:"materials",value:0},{path:"/usage-and-actuals/".concat(t,"/purchase-order"),label:"PO's, Storage",icon:Xf.File,isActive:this.isActive("/usage-and-actuals/".concat(t,"/purchase-order")),type:"purchase_orders",value:0},{path:"/usage-and-actuals/".concat(t,"/others"),label:"Others",icon:Xf.LayoutBullets,isActive:this.isActive("/usage-and-actuals/".concat(t,"/others")),type:"others",value:0}].map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"getAssessmentReportMenu",value:function(){var e,t,n=this,r=this.props,a=r.match.params.id,o=r.currentJobUsageSummary.data;return(null===o||void 0===o||null===(e=o.data)||void 0===e||null===(t=e.assessment_reports)||void 0===t?void 0:t.map((function(e){return{path:"/usage-and-actuals/".concat(a,"/buildCosting/").concat(e.id),label:"".concat(e.report||"Assessment Report"),icon:Xf.FileCash,isActive:n.isActive("/usage-and-actuals/".concat(a,"/buildCosting/").concat(e.id)),type:"",value:vm(e.total_amount||0)}})))||[]}},{key:"getMenu2Items",value:function(){var e=this.props.match.params.id;return[{path:"/usage-and-actuals/".concat(e,"/crew-report"),label:"Crew Report",icon:Xf.File,isActive:this.isActive("/usage-and-actuals/".concat(e,"/crew-report")),type:"crew-report"},{path:"/usage-and-actuals/".concat(e,"/risk-assessment"),label:"Risk Assessment",icon:Xf.File,isActive:this.isActive("/usage-and-actuals/".concat(e,"/risk-assessment")),type:"risk-assessment"}]}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.contentLayout,r=e.additionalHeaderLayout,o=e.customHeaderTitle,i=e.customMenuElements,c=e.sidebar,s=(e.match.params.id,t.data),l=s?zy.getJobAddress(s):"",u=s&&zy.getJobName(s);return u&&(l+=" | ".concat(u)),Object(a.jsxs)(TH,{className:"d-flex flex-column flex-grow-1",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs",children:"Jobs"}),u&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(s.id),children:u}),Object(a.jsx)(DG,{customHeaderTitle:o,siteAddress:l,additionalHeaderLayout:r}),Object(a.jsxs)(UC,{className:"h-100 d-flex flex-row min-100",children:[!1!==c&&Object(a.jsx)(nj,{children:i||Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(fk,{children:"Usage and Actuals"}),this.getMenuItems().map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)})),Object(a.jsxs)("div",{className:"d-flex flex-row min-100 align-items-center",style:{justifyContent:"space-between"},children:[Object(a.jsx)(fk,{children:"Quotations "}),Object(a.jsxs)(RH,{children:[this.state.loadingReport&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(vk,{name:Xf.Add,"data-tip":"","data-for":"report-sidebar-tooltip",onClick:this.onAddReport})]})]}),this.getAssessmentReportMenu().map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)})),Object(a.jsx)(fk,{children:"On-Site Data & Contracts"}),this.getMenu2Items().map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)}))]})}),Object(a.jsx)(TH,{children:n})]})]})}}]),n}(p.PureComponent),MH=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters,currentJobUsageSummary:e.currentJobUsageAndActuals.summary}})))(DH);!function(e){e.GENERAL_AUTHORITY="general_authority",e.JOB_CONTRACT="job_contract",e.PRE_START_CHECK="pre_start_check",e.ADDITIONAL_WORKS="additional_work",e.CONTENTS_INVENTORY="contents_inventory",e.WORK_COMPLETION="work_completion",e.JOB_FORM_WORK_COMPLETION="job_form_statement_of_work_complete",e.JOB_FORM_PRE_START_CHECK="job_form_non_restorable_floor_covering",e.JOB_FORM_CONTENTS_INVENTORY="job_form_contents_inventory",e.INVENTORY_FORM_DISPOSED="disposal_authoirty",e.INVENTORY_FORM_RETURNED="returned"}(AH||(AH={})),function(e){e.NEW="new",e.AWAITING_SIGNATURE="awaiting_signature",e.SIGNED="signed",e.CANCELED="canceled"}(IH||(IH={}));var LH=(EH={},Object(k.a)(EH,IH.NEW,"New"),Object(k.a)(EH,IH.AWAITING_SIGNATURE,"Awaiting Signature"),Object(k.a)(EH,IH.SIGNED,"Signed"),Object(k.a)(EH,IH.CANCELED,"Cancelled"),EH),PH=function(e,t){var n,r,a;if(!e)return null;var o={job:Object(c.a)(Object(c.a)({},e.job),t),id:e.id,inventory_id:e.inventory_id,inventory:e.inventory,created_at:e.created_at,status:e.status,hash:e.hash,type:null===(n=e.contract_template)||void 0===n||null===(r=n.contract)||void 0===r||null===(a=r.contract_type)||void 0===a?void 0:a.name,template:e.contract_template,signatures:(e.contract_template_signature||[]).map((function(e){return Object(c.a)(Object(c.a)({},e),{},{meta:e.field_data,field_data:void 0})})),meta:j.a.isString(e.field_data)?JSON.parse(e.field_data):e.field_data||{}};return j.a.forEach(o.signatures,(function(e){var t,n;(null===(t=o.meta)||void 0===t||null===(n=t.signature)||void 0===n?void 0:n[e.type])&&(o.meta.signature[e.type].meta=e.meta)})),o};function FH(e,t){return UH.apply(this,arguments)}function UH(){return(UH=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts",Object(c.a)({type:t},n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function BH(e){return VH.apply(this,arguments)}function VH(){return(VH=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/".concat(t,"/template"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function JH(e,t,n){return qH.apply(this,arguments)}function qH(){return(qH=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/jobs/search",Object(c.a)({contract_type:n,job_id:t},r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function zH(e,t,n){return GH.apply(this,arguments)}function GH(){return(GH=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/jobs/search-latest",Object(c.a)({contract_type:n,job_id:t,per_page:1,latest:1},r));case 2:if(e.t0=e.sent.data[0],e.t0){e.next=5;break}e.t0=null;case 5:return e.abrupt("return",e.t0);case 6:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function WH(e,t,n){return HH.apply(this,arguments)}function HH(){return(HH=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/contracts/".concat(n,"/job/").concat(t),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function YH(e,t){return QH.apply(this,arguments)}function QH(){return(QH=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/job/contracts/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function KH(e,t){return ZH.apply(this,arguments)}function ZH(){return(ZH=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/external/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function XH(e,t){return $H.apply(this,arguments)}function $H(){return($H=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/contracts/job/contracts/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function eY(e,t){return tY.apply(this,arguments)}function tY(){return(tY=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/contracts/job/contracts/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function nY(e,t){return rY.apply(this,arguments)}function rY(){return(rY=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/contracts/job/contracts/".concat(t,"/email"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function aY(e,t,n,r,a,o){return oY.apply(this,arguments)}function oY(){return(oY=Object(lj.a)(sj.a.mark((function e(t,n,r,a,o,i){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post(o?"/v1/contracts/job/contracts/".concat(r,"/signature"):"/v1/contracts/signature/external/".concat(i),Object(c.a)({type:t,signature:n},a));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var iY=n(169),cY={onchange:"onChange",onclick:"onClick",class:"className",classname:"className",for:"htmlFor",defaultchecked:"defaultChecked",defaultvalue:"defaultValue",maxlength:"maxLength"},sY=/{{\s*([\w_.-]+)\s*}}/g,lY=function e(t,n,r,a){return t.map((function(t,o){var i={key:o},s=t.attributes,l=t.localName,u=t.childNodes,d=t.nodeValue;if(s){var p={};j.a.forEach(s,(function(e){p[e.name]=e.nodeValue})),Array.from(s).forEach((function(e){var t=e.name;if(t in cY&&(t=cY[t]),"style"===t){var n=e.nodeValue.split(";"),o={};n.forEach((function(e){var t=e.split(":"),n=Object(w.a)(t,2),r=n[0],a=n[1];o[r]=a})),i[t]=o}else{var c=j.a.isString(e.nodeValue)?e.nodeValue.match(/{{([\w_]+)}}/):null;if(j.a.has(r,t)||j.a.has(a,t))i[t]=j.a.get(r,t,j.a.get(a,t));else if(c&&(j.a.has(r,c[1])||j.a.has(a,c[1]))){var s=j.a.get(r,c[1],j.a.get(a,c[1]));j.a.isFunction(s)&&!/^on[A-Z]/.test(t)?i[t]=s(p):i[t]=s}else""===e.nodeValue&&["checked","disabled"].includes(t)?i[t]=!0:i[t]=e.nodeValue}}))}return l?(l in n&&(l=n[l],i=Object(c.a)(Object(c.a)(Object(c.a)({},i),a),{},{bindings:r})),h.a.createElement(l,i,u&&Array.isArray(Array.from(u))&&u.length?e(Array.from(u),n,r,a):null)):j.a.isString(d)?uY(d,n,r,a):d}))},uY=function(e,t,n,r){var o,i=[],s=0,l=0;do{if(o=sY.exec(e)){var u=o[1],d=e.substring(s,o.index);d&&i.push(d);var p=t[u];p?i.push(Object(a.jsx)(p,Object(c.a)(Object(c.a)({},r),{},{bindings:n}),l++)):j.a.has(n,u)?j.a.isFunction(j.a.get(n,u))?i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(n,u)(r)},l++)):i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(n,u)||""},l++)):j.a.has(r,u)?j.a.isFunction(j.a.get(r,u))?i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(r,u)(r)},l++)):i.push(Object(a.jsx)(h.a.Fragment,{children:j.a.get(r,u)||""},l++)):i.push(Object(a.jsx)(h.a.Fragment,{children:"{{".concat(u,"}}")},l++)),s=o.index+o[0].length}}while(o);if(s){var b=e.substr(s);b&&i.push(Object(a.jsx)(h.a.Fragment,{children:b},l++))}return i.length?i:e},dY=function(e){var t,n=e.template,r=e.components,a=e.bindings,o=e.props,i={};return j.a.forEach(r,(function(e,t){i[t.toLowerCase()]=e})),lY(Array.from((t=n,(new DOMParser).parseFromString(t,"text/html").body.childNodes)),i,a,o)},pY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a)))._eval=function(t){if(j.a.isFunction(t))return t(e.props);if(j.a.isString(t)&&t){var n=t.match(/([^=]+)[=]+((.)+)/);if(n){var r=j.a.get(e.props,n[1]),a=n[2];return"boolean"===typeof r?a=Im(a):"number"===typeof r&&(a=parseFloat(a)),r===a}return j.a.get(e.props,t)}return t},e}return Object(l.a)(n,[{key:"eval",value:function(e){var t=this.props,n=t.if,r=t.not;return void 0===n||this._eval(n)?this._eval(r)?null:e:null}}]),n}(p.Component),hY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return this.eval(this.props.children)}}]),n}(pY),bY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.default,r=e.jobContract.meta;return Object(a.jsxs)(a.Fragment,{children:[this.eval(Object(a.jsx)("span",{children:j.a.get(r,t,n)||""})),this.props.children]})}}]),n}(pY),fY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onMetaInputChange=function(t){return function(n){var r,a,o=n.target,i=o.value;"checkbox"!==o.type||n.target.checked||(i=null),null===(r=(a=e.props).onChange)||void 0===r||r.call(a,t,i)}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.name,r=t.jobContract.meta,o=(t.bindings,t.errors),i=j.a.get(r,n),s=j.a.get(o,n),l=h.a.Children.map(this.props.children,(function(t){if(h.a.isValidElement(t)){var r={onChange:e.onMetaInputChange(n)};switch(s&&(r.className=(t.props.className||"")+" is-invalid",r.title=s),t.props.type){case"checkbox":r.defaultChecked=i;break;case"radio":r.defaultChecked=i===t.props.value;break;default:r.defaultValue=i}return Object(a.jsxs)(a.Fragment,{children:["textarea"===t.props.type?Object(a.jsx)("textarea",Object(c.a)(Object(c.a)({},t.props),r)):h.a.cloneElement(t,r),Object(a.jsx)("div",{className:"text-danger",children:s})]})}return t}));return Object(a.jsx)(a.Fragment,{children:this.eval(Object(a.jsx)(a.Fragment,{children:l}))})}}]),n}(pY),mY=n(577);function jY(){var e=Object(f.a)(["\n  .btn{\n    border-width: 0;\n    box-shadow: none;\n    border-radius: 0;\n  }\n"]);return jY=function(){return e},e}function vY(){var e=Object(f.a)(["\nborder: 1px solid ",";\n// overflow: hidden;\n"]);return vY=function(){return e},e}var OY=y.default.div(vY(),(function(e){return e.borderColor||_.gray3})),gY=y.default.div(jY()),xY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).canvas=h.a.createRef(),e.pad=null,e.resizeCanvas=function(){var t=e.canvas.current.getContext("2d");t.canvas.width=0,t.canvas.height=0;var n=e.canvas.current.parentElement;t.canvas.width=n.clientWidth,t.canvas.height=n.clientHeight,e.clear()},e.clear=function(){var t;null===(t=e.pad)||void 0===t||t.clear()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n=this,r=this.props.color,a=void 0===r?"#000000":r;this.pad=new mY.a(this.canvas.current,{dotSize:2,penColor:a}),this.pad._toDataURL=this.pad.toDataURL.bind(this.pad),this.pad.toDataURL=function(){return function(e){var t=document.createElement("canvas"),n=t.getContext("2d");t.width=e.width,t.height=e.height,n.drawImage(e,0,0);var r,a,o,i=t.width,c=t.height,s={x:[],y:[]},l=n.getImageData(0,0,t.width,t.height);for(a=0;a<c;a++)for(r=0;r<i;r++)o=4*(a*i+r),l.data[o+3]>0&&(s.x.push(r),s.y.push(a));s.x.sort((function(e,t){return e-t})),s.y.sort((function(e,t){return e-t}));var u=s.x.length-1;i=s.x[u]-s.x[0],c=s.y[u]-s.y[0];var d=n.getImageData(s.x[0],s.y[0],i,c);return t.width=i,t.height=c,n.putImageData(d,0,0),t.toDataURL()}(n.canvas.current)},null===(e=(t=this.props).onRender)||void 0===e||e.call(t,this.pad),this.resizeCanvas(),window.addEventListener("resize",this.resizeCanvas)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.resizeCanvas)}},{key:"render",value:function(){var e=this.props.toolbar,t=void 0===e||e;return Object(a.jsxs)("div",{className:"w-100 h-100 d-flex flex-column",children:[Object(a.jsx)(OY,{className:"flex-grow-1",borderColor:this.props.borderColor,children:Object(a.jsx)("div",{className:"h-100 w-100",children:Object(a.jsx)("canvas",{ref:this.canvas,className:"h-100 max-h-100 w-100 max-w-100"})})}),t&&Object(a.jsx)(gY,{className:"d-flex justify-content-end",children:Object(a.jsx)("button",{type:"button",className:"btn btn-sm btn-outline-dark",onClick:this.clear,children:"Clear"})})]})}}]),n}(p.Component);function yY(){var e=Object(f.a)(["\n  height: 200px;\n  width: 500px;\n  max-width: 100%;\n"]);return yY=function(){return e},e}var _Y,wY,SY,kY,CY=y.default.div(yY()),NY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={invalid:!1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.type,r=t.onSignatureRender,o=t.jobContract,i=j.a.find(null===o||void 0===o?void 0:o.signatures,{type:n});return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"my-3",children:[i?Object(a.jsx)("img",{src:i.url,alt:"Signature",style:{maxHeight:"100px",maxWidth:"100%"}}):Object(a.jsx)(CY,{children:Object(a.jsx)(xY,{borderColor:this.state.invalid?_.red1:_.black0,color:_.black0,onRender:function(t){t.setInvalid=function(t){e.setState({invalid:!0,error:t})},null===r||void 0===r||r(n,t)}})}),this.state.error&&Object(a.jsx)("div",{className:"text-danger",children:this.state.error})]}),this.props.children]})}}]),n}(pY),EY=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.type,r=j.a.get(this.props,t);if(r)switch(n){case"date":return pm()(r).format(iv);case"datetime":case"date_time":return pm()(r).format(lv);case"currency":return Tm(r)}return""}}]),n}(pY);!function(e){e.IN_PROGRESS="In-Progress",e.DISPOSED="Disposed",e.COMPLETED="Completed",e.PROCESSED="Processed",e.NEW="New"}(_Y||(_Y={})),function(e){e.NEW="New",e.IN_PROGRESS="In-Progress",e.AWAITING_DISPOSAL_AUTHORITY="Awaiting Disposal Authority",e.READY_FOR_RETURN="Ready For Return",e.READY_TO_DISPOSE="Ready To Dispose",e.DISPOSED="Disposed",e.CLIENT_PICKED_UP="Client Picked Up",e.RETURNED="Returned",e.PACKED="Packed",e.LEFT_ON_SITE="Left On Site",e.STORAGE="Storage"}(wY||(wY={})),function(e){e.RESTORABLE="Restorable",e.NON_RESTORABLE="Non Restorable",e.TO_BE_DETERMINED="To Be Determined"}(SY||(SY={})),function(e){e.DISPOSED="Disposed",e.CLIENT_PICKED_UP="Client Picked Up",e.RETURNED="Returned"}(kY||(kY={}));var AY=function(e){var t,n,r,a,o,i,s,l,u,d,p;return Object(c.a)(Object(c.a)({},e),{},{current_status:(null===(t=e.current_status)||void 0===t?void 0:t.value)||(null===(n=e.current_status)||void 0===n?void 0:n.status)||e.current_status,status:(null===(r=e.current_status)||void 0===r?void 0:r.value)||(null===(a=e.current_status)||void 0===a?void 0:a.status)||e.current_status,condition:(null===(o=e.condition)||void 0===o?void 0:o.value)||e.condition,restoration_hours:(null===(i=e.restoration_hours)||void 0===i?void 0:i.value)||e.restoration_hours,job_id:(null===(s=e.inventory)||void 0===s||null===(l=s.job)||void 0===l?void 0:l.id)||(null===(u=e.job)||void 0===u?void 0:u.id)||e.job_id,inventory_id:(null===(d=e.inventory)||void 0===d?void 0:d.id)||e.inventory_id,inventory_item_standard_type_id:(null===(p=e.standard_type)||void 0===p?void 0:p.id)||e.inventory_item_standard_type_id,inventory:void 0,job:void 0,container:void 0,space:void 0,standard_type:void 0})},IY="/v1/operations/inventories",TY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(IY,"/search?location_id=").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),RY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(IY),{job_id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),DY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(IY,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),MY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(IY,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),LY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(IY,"/").concat(t,"/items"),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),PY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contracts/external/inventory-items/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),FY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-items/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),UY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-items/".concat(t,"/notes"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),BY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-items/".concat(t,"/placements"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-item-statuses",{inventory_item_id:t,user_id:n,status:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),JY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/inventory-items/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qY=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-items",AY(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),zY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/inventory-items/".concat(t),AY(n));case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),GY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-items/".concat(t,"/photos"),Object(c.a)({inventory_item_id:t,photo_id:n},r));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),WY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/inventory-items/".concat(t,"/photos/").concat(n),r);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),HY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-items/".concat(t,"/photos"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),YY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/inventory-items/".concat(t,"/photos/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),QY=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-standard-items");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),KY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-todo/item/".concat(t),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),ZY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-todo/".concat(t,"/complete"),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),XY=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-todo/".concat(t,"/incomplete"),n);case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),$Y=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/inventory-todo/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),eQ={getInventoryListByLocationID:TY,getInventoryInfo:MY,getInventoryItems:LY,getInventoryItemsByContractUid:PY,createNewInventory:RY,deleteInventory:DY,getInventoryItem:FY,getInventoryItemNotes:UY,getInventoryItemPlacements:BY,markInventoryItemStatus:VY,removeInventoryItem:JY,createInventoryItem:qY,updateInventoryItem:zY,attachPhoto:GY,updateAttachedPhoto:WY,getAttachedPhotos:HY,detachPhoto:YY,getItemStandardTypes:QY,addTodoGroupToInventoryItem:KY,getItemToDoList:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-todo/item/".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),addNoteToInventoryItem:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-item-notes",{inventory_item_id:n,note_id:t});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),getInventoryReport:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventories/inventory-report-by-code?code=".concat(t));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getReportLink:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventories/".concat(t,"/inventory-report-get-code"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getContainers:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-containers");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getSpaces:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-spaces");case 2:return t=e.sent,e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),startPlacement:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-items/".concat(t.inventory_item_id,"/placement/start"),t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),stopPlacement:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-items/".concat(t,"/placement/stop"));case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),markToDoItemAsCompleted:ZY,markToDoItemAsInComplete:XY,deleteToDoItem:$Y,assignChargingIntervalToPlacement:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-item-placement-charging-intervals",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateChargingIntervalToPlacement:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/inventory-item-placement-charging-intervals/".concat(t,"/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),removeChargingIntervalFromPlacement:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/operations/inventory-item-placement-charging-intervals/".concat(t,"/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},tQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={gridState:{data:[]}},e.componentDidMount=function(){e.loadData()},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.user,a=n.jobContract,o=a.type,i=a.hash,c=a.status,s=a.meta,l=a.inventory,u=a.inventory_id,t.next=3,eQ[r?"getInventoryItems":"getInventoryItemsByContractUid"](r?(null===l||void 0===l?void 0:l.id)||u:i,{model:"inventory",statuses:o===AH.INVENTORY_FORM_RETURNED?[wY.READY_FOR_RETURN,wY.RETURNED]:[wY.READY_TO_DISPOSE,wY.DISPOSED],per_page:100,ids:c===IH.NEW?void 0:(null===s||void 0===s?void 0:s.items)||[-1]});case 3:d=t.sent.data,e.setState((function(e){return e.gridState.data=d,e}));case 5:case"end":return t.stop()}}),t)}))),e.selectionChange=function(t){var n=e.state.gridState.data.find((function(e){return e===t.dataItem}));n&&(n.selected=!n.selected,e.setState({gridState:Object(c.a)({},e.state.gridState)},(function(){e.onSelectionChange()})))},e.headerSelectionChange=function(t){var n=t.syntheticEvent.target.checked;e.state.gridState.data.forEach((function(e){e.selected=n})),e.setState({gridState:Object(c.a)({},e.state.gridState)},(function(){e.onSelectionChange()}))},e.onSelectionChange=function(){var t,n;null===(t=(n=e.props).onChange)||void 0===t||t.call(n,"items",e.state.gridState.data.filter((function(e){return e.selected})).map((function(e){return e.id})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.gridState,t=this.props.jobContract,n=t.status,r=t.type===AH.INVENTORY_FORM_RETURNED;return Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({scrollable:"none",selectedField:"selected",onSelectionChange:this.selectionChange,onHeaderSelectionChange:this.headerSelectionChange,className:"d-flex flex-column"},e),{},{children:[n===IH.NEW&&!!e.data.length&&Object(a.jsx)(F_.b,{field:"selected",width:"50px",headerSelectionValue:-1===this.state.gridState.data.findIndex((function(e){return!e.selected}))}),Object(a.jsx)(F_.b,{field:"id",title:"Item #"}),Object(a.jsx)(F_.b,{field:"quantity",title:"Qty"}),Object(a.jsx)(F_.b,{field:"name",title:"Name"}),r&&Object(a.jsx)(F_.b,{field:"item_location",title:"Item Location"}),Object(a.jsx)(F_.b,{field:"model",title:"Model"}),r&&Object(a.jsx)(F_.b,{field:"tag",title:"Tag"}),r&&Object(a.jsx)(F_.b,{field:"current_status.status",title:"Status"})]}))}}]),n}(pY),nQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={value:j.a.get(e.props.jobContract.meta,e.props.name)},e.onChange=function(t){var n,r,a=t.target.value;e.setState({value:a}),null===(n=(r=e.props).onChange)||void 0===n||n.call(r,e.props.name,a)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.value,t=this.props,n=t.name,r=t.on,o=void 0===r?"Yes":r,i=t.off,c=void 0===i?"No":i,s=Im(e),l=!s;return this.eval(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"margin-left-10 btn-group btn-group-raised ",children:[Object(a.jsxs)("label",{className:"btn btn-".concat(s?"":"outline-","primary"),htmlFor:"switch_".concat(n,"_yes"),children:[Object(a.jsx)("input",{type:"radio",name:"switch_".concat(n),id:"switch_".concat(n,"_yes"),className:"d-none",value:"1",checked:s,onChange:this.onChange})," ",o]}),Object(a.jsxs)("label",{className:"btn btn-".concat(l?"":"outline-","primary"),htmlFor:"switch_".concat(n,"_no"),children:[Object(a.jsx)("input",{type:"radio",name:"switch_".concat(n),id:"switch_".concat(n,"_no"),className:"d-none",value:"0",checked:l,onChange:this.onChange})," ",c]})]}),this.props.children]}))}}]),n}(pY),rQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.value,r=e.jobContract.meta;return Im(j.a.get(r,t))===Im(n)?this.eval(Object(a.jsx)(a.Fragment,{children:this.props.children})):null}}]),n}(pY),aQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={data:[]},e.fetchData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:t.t0=n,t.next="insurer"===t.t0?3:4;break;case 3:return t.abrupt("return",e.loadInsurers());case 4:return t.abrupt("return",[]);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadInsurers=Object(lj.a)(sj.a.mark((function e(){var t,n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t={term:"",contact_type:wv.company,contact_category_type:_v.Insurer},e.next=3,hO.searchContacts(t).then((function(e){return e.data}));case 3:return n=e.sent,e.abrupt("return",j.a.map(j.a.sortBy(n,"legal_name"),(function(e){return{text:e.legal_name,value:e.id}})));case 5:case"end":return e.stop()}}),e)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.type;this.fetchData(t).then((function(t){e.setState({data:t})}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.placeholder,r=t.name,o=t.jobContract.meta,i=t.errors,c=t.onChange,s=j.a.get(o,r)||"",l=j.a.get(i,r);return this.eval(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("select",{className:"form-control ".concat(l?"is-invalid":""),title:l||"",value:(null===s||void 0===s?void 0:s.value)||"",onChange:function(t){null===c||void 0===c||c(r,j.a.find(e.state.data,{value:t.target.value})||j.a.find(e.state.data,{value:+t.target.value}))},style:{},children:[n?Object(a.jsx)("option",{style:{display:"none"},children:n}):null,this.state.data.map((function(e){return Object(a.jsx)("option",{value:e.value,children:e.text},e.value)}))]}),l&&Object(a.jsx)("div",{className:"text-danger",children:l}),this.props.children]}))}}]),n}(pY),oQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.name,r=e.jobContract.meta,o=e.errors,i=e.onChange,s=j.a.get(r,n),l=j.a.get(o,n);return this.eval(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Qy.a,{initialValue:s?pm()(s):void 0,dateFormat:iv,timeFormat:!1,inputProps:{placeholder:t||""},onChange:function(e){null===i||void 0===i||i(n,e)},closeOnSelect:!0,renderInput:function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"input-group",children:[Object(a.jsx)("input",Object(c.a)(Object(c.a)({},e),{},{className:(e.className||"")+(l?" is-invalid":" aaa")})),Object(a.jsx)("div",{className:"input-group-append",children:Object(a.jsx)("span",{className:"input-group-text",onClick:function(){t()},children:Object(a.jsx)(cm,{name:Xf.Calendar})})})]}),l&&Object(a.jsx)("div",{className:"text-danger",children:l})]})}}),this.props.children]}))}}]),n}(pY),iQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.jobContract,r=t.jobContract.meta,o=t.bindings,i=t.cancel;return n.status===IH.CANCELED?null:Object(a.jsxs)("div",{className:"p-3 min-h-100",style:{backgroundColor:_.gray1,border:"1px solid ".concat(_.gray2)},children:[Object(a.jsxs)("div",{children:[n.status!==IH.SIGNED&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Customer Details:"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(fY,Object(c.a)(Object(c.a)({},this.props),{},{name:"email.send.to",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address"})}))}),n.status!==IH.NEW?Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:o.resendEmail,children:"Resend"})}):null]}),Object(a.jsx)("hr",{})]}),n.status!==IH.NEW&&Object(a.jsx)("div",{className:"my-3",children:Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("button",{className:"btn btn-danger",onClick:i,children:"Cancel this Contract"})})}),n.status!==IH.NEW&&Object(a.jsxs)("div",{className:"text-muted margin-top-5",children:["Sent at ",pm()((null===r||void 0===r||null===(e=r.email)||void 0===e?void 0:e.sent_at)||n.created_at).format(lv)," "]})]}),n.status===IH.NEW&&Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"mt-3",children:[Object(a.jsx)("label",{children:"Date of contract:"}),Object(a.jsx)(oQ,Object(c.a)(Object(c.a)({},this.props),{},{name:"contract.date"}))]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Steamatic Contact Details:"}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-12 form-group",children:Object(a.jsx)(fY,Object(c.a)(Object(c.a)({},this.props),{},{name:"contact.full_name",children:Object(a.jsx)("input",{className:"form-control",placeholder:"Full name",maxLength:255})}))}),Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(fY,Object(c.a)(Object(c.a)({},this.props),{},{name:"contact.email",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",maxLength:1024})}))})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"margin-top-20",children:[Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"Cost Ex GST:"}),Object(a.jsx)("div",{className:"input-dollar",children:Object(a.jsx)(fY,Object(c.a)(Object(c.a)({},this.props),{},{name:"contract.cost",children:Object(a.jsx)("input",{className:"form-control text-left",placeholder:"0.00"})}))})]}),Object(a.jsxs)("div",{className:"form-group",children:[Object(a.jsx)("label",{children:"GST %:"}),Object(a.jsx)(fY,Object(c.a)(Object(c.a)({},this.props),{},{name:"contract.gst",children:Object(a.jsx)("input",{type:"number",className:"form-control",name:"contract.gst",min:"0",max:"100"})}))]})]}),Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:o.submitContract,children:"Ready"})})]})]})}}]),n}(pY);function cQ(){var e=Object(f.a)(['\n  .is-invalid{background-image: none;}\n  .form-control.is-invalid{padding-right: .75rem;}\n  input[type=checkbox].is-invalid+label,input[type=radio].is-invalid+label{color: #dc3545; }\n  ol {\n    counter-reset: item;\n    padding-inline-start: 20px;\n  }\n  li {\n    display: block\n  }\n  li:before {\n    content: counters(item, ".") ". ";\n    counter-increment: item\n  }\n  li ol li:before {\n    content: counters(item, ".") " ";\n  }\n  .contract-list>li{font-weight: bold; margin-top: 20px;}\n  .contract-list>li li, .contract-list>li div{font-weight: normal;}\n']);return cQ=function(){return e},e}var sQ=y.default.div(cQ()),lQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var o=arguments.length,c=new Array(o),l=0;l<o;l++)c[l]=arguments[l];return(e=t.call.apply(t,[this].concat(c))).signaturePad={},e.state={jobContract:e.defaultContract},e.onMetaInputChange=function(t){var n=t.target,r=n.name,a=n.value;"checkbox"!==n.type||t.target.checked||(a=null),e.onMetaChange(r,a)},e.onMetaChange=function(t,n){var r=e.state.jobContract,a=j.a.get(r,"meta.".concat(t));if(typeof a!==typeof n)switch(typeof a){case"boolean":n=!!["1","true","on",!0,1].includes(n);break;case"number":n=isNaN(parseFloat(n))?0:parseFloat(n)}j.a.set(r,"meta.".concat(t),n),e.setState({jobContract:r})},e.isMetaInputChecked=function(t){var n=e.state.jobContract,r=t.value,a=j.a.get(n.meta,t.name);return void 0!==r?r===a:Im(a)},e.getMetaValue=function(t){var n=e.state.jobContract;return j.a.get(n.meta,t.name)||""},e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e.uploadSignature=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.model,a=[],j.a.forEach(e.signaturePad,(function(t,o){var i={model:r,field_data:JSON.stringify(j.a.get(n.meta,"signature.".concat(o,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash).concat(r?"/".concat(r):""),full_name:hO.getContactName(e.customer),customer_email:n.meta.email.send.to};a.push(aY(o,t.toDataURL(),n.id,i,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(a));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.validateSignature=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(t,r){if(e.props.beforeSign){var a=e.props.beforeSign(r,e.state.jobContract.meta,e.props.job);!0===a?e.setState({errors:{}}):(n=!1,e.setState({errors:a}))}if(t.isEmpty())throw t.setInvalid("Signature is required"),n=!1,Oj(uj.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.submit=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.job,a=n.user,o=n.model,c=n.beforeSubmit,s=n.afterSubmit,e.setState({working:!0}),t.prev=2,l=!0,u=e.state.jobContract,!c){t.next=18;break}return t.prev=6,t.next=9,c(u,u.meta,r);case 9:d=t.sent,(l=!0===d)?e.setState({errors:{}}):(e.setState({errors:d}),Oj(uj.Danger,"There are validation errors."),setTimeout((function(){var t,n,r=i.a.findDOMNode(Object(iY.a)(e));null===r||void 0===r||null===(t=r.getElementsByClassName("is-invalid"))||void 0===t||null===(n=t[0])||void 0===n||n.focus()}),1)),t.next=18;break;case 14:t.prev=14,t.t0=t.catch(6),l=!1,Oj(uj.Danger,t.t0.message);case 18:if(!l){t.next=45;break}if(u.type!==AH.GENERAL_AUTHORITY){t.next=22;break}return t.next=22,e.validateSignature();case 22:if(p=null,!u.id){t.next=33;break}if(!a){t.next=30;break}return t.next=27,XH(u.id,{model:o,field_data:JSON.stringify(u.meta)});case 27:p=t.sent,t.next=31;break;case 30:p=u;case 31:t.next=37;break;case 33:if(!a){t.next=37;break}return t.next=36,WH(r.id,u.template.contract.id,{model:o,field_data:JSON.stringify(u.meta),contract_date:(h=j.a.get(u.meta,"contract.date"),h?pm()(h).format(av):u.contract_date)});case 36:p=t.sent;case 37:if(!p){t.next=45;break}if(a&&(p=PH(p,r)),!a){t.next=43;break}return t.next=42,e.sendEmail(p);case 42:p=t.sent;case 43:e.setState({jobContract:p}),u.type===AH.GENERAL_AUTHORITY?setTimeout(Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!p){t.next=4;break}return t.next=3,e.lockSignature();case 3:setTimeout((function(){null===s||void 0===s||s(e.state.jobContract)}),1);case 4:case"end":return t.stop()}}),t)}))),1):null===s||void 0===s||s(p);case 45:t.next=49;break;case 47:t.prev=47,t.t1=t.catch(2);case 49:return t.prev=49,e.setState({working:!1}),t.finish(49);case 52:case"end":return t.stop()}var h}),t,null,[[2,47,49,52],[6,14]])}))),e.lockSignature=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),n=e.state.jobContract,t.next=5,e.validateSignature();case 5:return t.next=7,e.uploadSignature(n);case 7:r=t.sent,n.signatures=n.signatures.concat(r),e.setState({jobContract:n}),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(0),setTimeout((function(){var t,n,r=i.a.findDOMNode(Object(iY.a)(e));null===r||void 0===r||null===(t=r.getElementsByClassName("is-invalid"))||void 0===t||null===(n=t[0])||void 0===n||n.focus()}),1);case 15:return t.prev=15,setTimeout((function(){e.setState({working:!1})}),100),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[0,12,15,18]])}))),e.sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.model,o=j.a.get(n.meta,"email.send.to"),t.next=4,e._sendEmail(o,n);case 4:if(!n.id||n.type!==AH.JOB_CONTRACT){t.next=8;break}return j.a.set(n,"meta.email.sent_at",new Date),t.next=8,XH(n.id,{field_data:JSON.stringify(n.meta)});case 8:return t.t0=r,t.next=11,YH(n.id,{model:a});case 11:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),e.setState({jobContract:i}),t.abrupt("return",i);case 16:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.resendEmail=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.model,r=e.state,a=r.jobContract,o=r.jobContract.meta,i=j.a.get(o,"email.send.to")){t.next=7;break}e.setState({errors:{email:{send:{to:"Email is required"}}}}),t.next=23;break;case 7:if(!Jv(i)){t.next=11;break}e.setState({errors:{email:{send:{to:"Email format is not correct"}}}}),t.next=23;break;case 11:return e.setState({working:!0,errors:{}}),t.prev=12,t.next=15,e._sendEmail(i,a);case 15:if(!a.id){t.next=19;break}return j.a.set(o,"email.sent_at",new Date),t.next=19,XH(a.id,{model:n,field_data:JSON.stringify(o)});case 19:Oj(uj.Info,"Email sent");case 20:return t.prev=20,e.setState({working:!1}),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[12,,20,23]])}))),e._sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=e.props.model,c=r.meta,s=r.hash,l={model:i,link:window.location.origin+"/external/job/contract/".concat(s).concat(i?"/".concat(i):""),name:hO.getContactName(e.customer),email:n},(null===c||void 0===c||null===(a=c.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(l.cc=c.email.cc.requested.to),t.next=6,nY(r.id,l);case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.cancelContract=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.jobContract,r=e.props,o=r.dispatch,i=r.onDelete,n.type!==AH.GENERAL_AUTHORITY){t.next=17;break}return t.next=5,o(iw("Confirm","Cancel General Authority!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to cancel general authority? This action can not be undone."})));case 5:if(!t.sent){t.next=15;break}return e.setState({working:!0}),c=e.state.jobContract,t.next=11,eY(c.id);case 11:if(!i){t.next=14;break}return t.next=14,i();case 14:e.setState({working:!1});case 15:t.next=27;break;case 17:return t.next=19,e.props.dispatch(iw("Confirm","Cancel Contract!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to cancel this contract? This action can not be undone."})));case 19:if(!t.sent){t.next=27;break}return e.setState({working:!0}),s=e.state.jobContract,t.next=25,XH(s.id,{status:IH.CANCELED});case 25:l=t.sent,e.setState({working:!1,jobContract:PH(l,e.props.job)});case 27:case"end":return t.stop()}}),t)}))),e.FTA={NSW:"Fair Trading Act 1987",SA:"Fair Trading Act 1987",WA:"Fair Trading Act 2010",TAS:"Australian Consumer Law (Tasmania) Act 2010",QLD:"Fair Trading Act 1989",ACT:"Fair Trading (Australian Consumer Law) Act 1992"},e.WHSA={NSW:"Work Health and Safety Act 2011",SA:"Work Health and Safety Act 2012",WA:"Occupational Safety and Health Act 1984",TAS:"Work Health and Safety Act 2012",QLD:"Work Health and Safety Act 2011",ACT:"Work Health and Safety Act 2011"},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){e.jobContract.id!==this.props.jobContract.id&&this.setState({jobContract:this.defaultContract})}},{key:"extractContact",value:function(e){var t=this.props.jobContacts;return zy.extractContact(e,t)}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.jobContract,o=n.working,i=n.jobContract,s=i.signatures,l=i.meta,u=n.errors,d=this.props,p=d.a4,h=d.user,b=d.Sidebar,f=b||(r.type===AH.JOB_CONTRACT?iQ:null);return Object(a.jsxs)(sQ,{className:"position-relative h-100",children:[o&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("div",{className:"d-flex flex-row h-100",children:[h&&f&&r.status!==IH.CANCELED&&Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("div",{className:"h-100",style:{width:300,overflow:"auto"},children:Object(a.jsx)(f,Object(c.a)(Object(c.a)({},this.props),{},{jobContract:r,errors:u,bindings:this.bindings,onChange:this.onMetaChange,cancel:this.cancelContract}))})}),Object(a.jsx)("div",{className:"d-flex flex-column flex-grow-1 h-100",children:Object(a.jsx)("div",{className:"h-100 py-3",style:{overflow:"auto"},children:Object(a.jsxs)("div",{className:"py-4 px-5",style:p?{maxWidth:"210mm",margin:"auto",backgroundColor:"#fff",border:"1px solid ".concat(_.gray2)}:void 0,children:[r.type===AH.JOB_CONTRACT&&Object(a.jsx)("h3",{className:"mb-5 text-center",children:Object(a.jsxs)("strong",{children:[r.status===IH.CANCELED?Object(a.jsx)("span",{className:"text-danger",children:"Cancelled:"}):""," Steamatic ",r.template.contract.name]})}),Object(a.jsx)(dY,{template:r.template.content,components:{Container:hY,C:hY,MetaText:bY,Field:fY,Switch:nQ,SwitchData:rQ,Signature:NY,DropDownList:aQ,DatePicker:oQ,Formatter:EY,InventoryItems:tQ},bindings:this.bindings,props:Object(c.a)(Object(c.a)(Object(c.a)({},this.props),this.CONST_PROPS),{},{jobContract:r,errors:u,meta:l,signature:{customer:(e=j.a.findLast(s,{type:"customer"}),Object(c.a)(Object(c.a)({},e),{},{meta:j.a.merge({full_name:hO.getContactName(t.customer)},null===e||void 0===e?void 0:e.field_data,null===e||void 0===e?void 0:e.meta)})),staff:function(e){return Object(c.a)(Object(c.a)({},e),{},{meta:j.a.merge({full_name:""},null===e||void 0===e?void 0:e.field_data)})}(j.a.findLast(s,{type:"staff"}))},onChange:this.onMetaChange,onSignatureRender:this.onSignatureRender})})]})})})]})]})}},{key:"defaultContract",get:function(){var e,t=this.props.jobContract;return j.a.merge({meta:{email:{send:{to:null===(e=this.customer)||void 0===e?void 0:e.email}},signature:{customer:{meta:{full_name:hO.getContactName(this.customer)}}}}},{meta:this.props.defaultMeta},t)}},{key:"sitContact",get:function(){return this.extractContact(tv.SITE_CONTACT)}},{key:"customer",get:function(){return this.extractContact(tv.CUSTOMER)}},{key:"referrer",get:function(){return this.extractContact(tv.REFERRER)}},{key:"losAdustor",get:function(){return this.extractContact(tv.LOS_ADJUSTOR)}},{key:"broker",get:function(){return this.extractContact(tv.BROKER)}},{key:"invoiceTo",get:function(){var e=this.props.jobContacts;return null===e||void 0===e?void 0:e.find((function(e){return e.invoice_to}))}},{key:"franchise",get:function(){return this.state.jobContract.job.company_location}},{key:"CONST_PROPS",get:function(){var e,t,n,r,a,o,i,c,s,l,u,d,p,h,b,f,m,v,O,g,x,y,_,w,S,k,C=this,N=this.props,E=N.job,A=N.user,I=N.model,T=this.state.jobContract,R=T.signatures,D=T.meta,M=T.hash;return{FRANCHISE_LEGAL_NAME:null===(e=this.franchise)||void 0===e?void 0:e.legal_name,FRANCHISE_ABN:null===(t=this.franchise)||void 0===t?void 0:t.abn,FRANCHISE_ADDRESS:(null===(n=this.franchise)||void 0===n||null===(r=n.addresses)||void 0===r||null===(a=r.find((function(e){return e.type===Sv.street})))||void 0===a?void 0:a.full_address)||"",FRANCHISE_PHONE:null===(o=this.franchise)||void 0===o?void 0:o.business_phone,CONTACT_NAME:null===(i=this.franchise)||void 0===i?void 0:i.trading_name,CONTACT_EMAIL:null===(c=this.franchise)||void 0===c?void 0:c.email,CUSTOMER_NAME:hO.getContactName(this.customer),CUSTOMER_ADDRESS:(null===(s=this.sitContact||this.customer)||void 0===s||null===(l=s.addresses)||void 0===l||null===(u=l.find((function(e){return e.type===Sv.street})))||void 0===u?void 0:u.full_address)||"",CUSTOMER_ABN:null===(d=this.customer)||void 0===d?void 0:d.abn,INVOICE_TO_NAME:hO.getContactName(this.invoiceTo),INVOICE_TO_ADDRESS:(null===(p=this.invoiceTo)||void 0===p||null===(h=p.addresses)||void 0===h||null===(b=h.find((function(e){return e.type===Sv.street})))||void 0===b?void 0:b.full_address)||"",INVOICE_TO_ABN:null===(f=this.invoiceTo)||void 0===f?void 0:f.abn,SITE_ADDRESS:(null===(m=this.sitContact||this.customer)||void 0===m||null===(v=m.addresses)||void 0===v||null===(O=v.find((function(e){return e.type===Sv.street})))||void 0===O?void 0:O.full_address)||"",REFERRED_BY:hO.getContactName(this.referrer),SERVICE_NAME:null===(g=E.service)||void 0===g?void 0:g.name,INQUIRY_SERVICE:null===(x=E.service)||void 0===x?void 0:x.name,BILLING_COMPANY:hO.getContactName(this.invoiceTo),COLLECT_EXCESS_PAYMENT:+E.expected_excess_payment>0,EXCESS_PAYMENT_TYPE:function(e){switch(e.toLowerCase()){case"cash":return"Cash";case"credit":return"Credit Card";case"debit":return"Debit Card";case"cheque":return"Cheque"}return"N/A"}((null===D||void 0===D||null===(y=D.excess_payment)||void 0===y?void 0:y.type)||""),EXCESS_PAYMENT_RECEIVED_AT:(k=(null===D||void 0===D||null===(_=D.excess_payment)||void 0===_?void 0:_.received_at)||"",k?pm()(k).format(iv):""),IS_STAFF:!!A,IS_CUSTOMER:!A,STAFF_SIGNED_AT:function(e){return e?pm()(e).format(lv):""}(null===(w=j.a.findLast(R,{type:"staff"}))||void 0===w?void 0:w.created_at),CUSTOMER_SIGNED_AT:function(e){return e?pm()(e).format(lv):""}(null===(S=j.a.findLast(R,{type:"customer"}))||void 0===S?void 0:S.created_at),CONTRACT_COST:Tm(j.a.get(D,"contract.cost")),CONTRACT_GST_AMOUNT:Tm(parseFloat(j.a.get(D,"contract.gst")||"10")/100*parseFloat(j.a.get(D,"contract.cost")||"0")),CONTRACT_TOTAL:Tm(parseFloat(j.a.get(D,"contract.gst")||"10")/100*parseFloat(j.a.get(D,"contract.cost")||"0")+parseFloat(j.a.get(D,"contract.cost")||"0")),CONTRACT_URL:"/external/job/contract/".concat(M).concat(I?"/".concat(I):""),FTA:function(){var e;return j.a.get(C.FTA,(null===(e=E.assigned_location)||void 0===e?void 0:e.code)||"","")},WHSA:function(){var e;return j.a.get(C.WHSA,(null===(e=E.assigned_location)||void 0===e?void 0:e.code)||"","")}}}},{key:"bindings",get:function(){return{onMetaInputChange:this.onMetaInputChange,metaChecked:this.isMetaInputChecked,metaValue:this.getMetaValue,submitContract:this.submit,lockSignature:this.lockSignature,resendEmail:this.resendEmail,cancelContract:this.cancelContract}}}]),n}(p.Component),uQ=Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me}}))(lQ),dQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobContract:null},e.loadContract=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.contractId,o=r.type,i=r.job,c=r.defaultTemplate,s=r.model,t.prev=1,!a&&!n){t.next=11;break}return t.next=5,YH(n||a,{model:s});case 5:l=t.sent,!(u=PH(l,i)).template.content&&c&&(u.template.content=c),e.setState({jobContract:u}),t.next=18;break;case 11:return t.next=13,FH(o);case 13:return d=t.sent[0],t.next=16,BH(d.id);case 16:p=t.sent,e.setState({jobContract:{job:i,type:o,template:p}});case 18:t.next=22;break;case 20:t.prev=20,t.t0=t.catch(1);case 22:case"end":return t.stop()}}),t,null,[[1,20]])})));return function(e){return t.apply(this,arguments)}}(),e.afterSubmit=function(t){var n,r;e.setState({jobContract:t}),console.log("jobContract.template.content",t.template.content),null===(n=(r=e.props).afterSubmit)||void 0===n||n.call(r,t)},e.onDelete=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(null===(n=(r=e.props).onDelete)||void 0===n||n.call(r),e.props.type!==AH.GENERAL_AUTHORITY){t.next=4;break}return t.next=4,e.loadContract();case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadContract()}},{key:"componentDidUpdate",value:function(e){e.job.id!==this.props.job.id&&this.loadContract()}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.jobContacts,r=e.defaultMeta,o=e.Sidebar,i=e.beforeSubmit,c=e.beforeSign,s=e.match,l=e.model,u=this.state.jobContract;return u?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"".concat(s.url),children:"Contract Details"}),Object(a.jsx)(uQ,{job:t,jobContacts:n,jobContract:u,defaultMeta:r,beforeSubmit:i,onDelete:this.onDelete,beforeSign:c,afterSubmit:this.afterSubmit,Sidebar:o,model:l})]}):Object(a.jsx)(Nv,{size:40})}}]),n}(p.Component),pQ=Object(O.g)(dQ),hQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadJobContract=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.job,!(null===(n=r.data)||void 0===n?void 0:n.id)){t.next=3;break}return t.abrupt("return",JH(e.props.job.data.id,AH.GENERAL_AUTHORITY,{latest:1}).then((function(t){var n=j.a.last(t);e.setState({contract:n?PH(n,r.data):null})})));case 3:return t.abrupt("return",null);case 4:case"end":return t.stop()}}),t)}))),e._loadJobContract=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContract();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContract=Qv()(e._loadJobContract,100),e.beforeContractSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(r,a,o){var i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,n.validate(a,o,e.props.user);case 2:if(!0!==(i=t.sent)){t.next=24;break}if(c=e.props.job,!a.insured){t.next=24;break}return s={insurer_id:a.insurance.insurer.value,date_of_loss:bv(pm()(a.insurance.date_of_loss)),claim_number:a.insurance.claim_no,cause_of_loss:c.data.cause_of_loss||"-"},t.prev=7,t.next=10,zy.generalAuthorityUpdate(c.data.id,s);case 10:return t.abrupt("return",!0);case 13:if(t.prev=13,t.t0=t.catch(7),(null===(l=t.t0)||void 0===l?void 0:l.status_code)!==ox){t.next=23;break}return u=n.fields,d={},l.fields.insurer_id&&(d[u.insurer]=l.fields.insurer_id[0]),l.fields.date_of_loss&&(d[u.date_of_loss]=l.fields.date_of_loss[0]),l.fields.claim_number&&(d[u.claim_no]=l.fields.claim_number[0]),t.abrupt("return",d);case 23:return t.abrupt("return",{});case 24:return t.abrupt("return",i);case 25:case"end":return t.stop()}}),t,null,[[7,13]])})));return function(e,n,r){return t.apply(this,arguments)}}(),e.onDelete=function(){e.setState({contract:null})},e.afterSubmit=function(t){t.meta&&t.meta.insured&&e.props.dispatch(BD(t.job.id,!0))},e.debouncedUpdateJob=Qv()(zy.update,1e3),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadJobContract()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.job.data)||void 0===t?void 0:t.id)!==(null===(n=this.props.job.data)||void 0===n?void 0:n.id)&&this.debouncedLoadJobContract()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params.id;return Object(a.jsx)("div",{children:Object(a.jsx)(v.b,{to:"/job/".concat(e,"/details"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Details"})})})}},{key:"renderContentPage",value:function(){var e,t,n=this.props,r=n.job,o=n.contacts,i=this.state.contract;return Object(a.jsxs)("div",{className:"h-100",children:[r.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(r.data.id,"/general-authority"),children:"General Authority"}),r.data&&o.data&&void 0!==i?Object(a.jsx)(pQ,{type:AH.GENERAL_AUTHORITY,job:r.data,jobContacts:o.data,contractId:null===i||void 0===i?void 0:i.id,defaultTemplate:'\n<h3 class="mb-5"><strong>General Authority to Commence Works</strong></h3>\n<div>\n  I,\n  <C not="jobContract.id">\n    <div class="d-inline-block mx-2">\n      <Field name="contact.full_name">\n        <input type="text" class="form-control" maxlength="255" />\n      </Field>\n    </div>\n  </C>\n  <C if="jobContract.id"><span>{{meta.contact.full_name}}</span></C> , authorise {{FRANCHISE_LEGAL_NAME}} to undertake {{SERVICE_NAME}} restoration work on my building and/or contents located at {{CUSTOMER_ADDRESS}}.\n</div>\n\n<p>I give this authority in my capacity as the owner or lawful occupier of the damaged\n  property, or I am the authorised agent of the owner or occupier.</p>\n\n<hr class="my-4" />\n\n<h5 class="mb-3 font-weight-bold">Terms</h5>\n\n<div>\n  <span class="mr-3">I have an insurance policy:</span>\n  <C if="jobContract.id">\n    <span>\n      <C if="meta.insured">Yes</C>\n      <C not="meta.insured">No</C>\n    </span>\n  </C>\n  <C not="jobContract.id">\n    <Switch name="insured" />\n  </C>\n</div>\n\n<C if="meta.insured">\n  <div>\n    <div>\n      <p><strong>Insurance Terms and Details</strong></p>\n      <ol>\n        <li>I have made or will make a claim with my insurer, {{BILLING_COMPANY}} to be\n          indemnified for costs\n          incurred in undertaking\n          restoration works to my property and/or contents.</li>\n        <li>I authorise and direct my insurer to make payment directly to Steamatic for the\n          restoration work undertaken\n          as invoiced by Steamatic.<br>\n          I request Steamatic to forward all invoices to my insurer or to {{REFERRED_BY}}\n          Insurance Loss\n          Adjusters.</li>\n        <li>I acknowledge that if my insurer pays your invoice less the GST component, then I will be\n          responsible for\n          the payment of the GST component.<br>\n          NOTE: This clause only applies to commercial/business customers.</li>\n        <li>If my insurer pays me the amount Steamatic has invoiced then I understand and agree that I\n          will be liable to\n          reimburse Steamatic immediately\n          upon receiving this amount.</li>\n        <C not="meta.is_suncorp">\n          <li>In the event my insurer fails to pay Steamatic\'s invoice\n            within 30 days\n            from the date invoiced, or in the event my insurer fails to pay\n            Steamatic\'s invoice at all (including but not limited to non acceptance of the claim), then\n            I agree I will be\n            responsible to immediately\n            pay Steamatic the amount of the invoice. Upon payment to Steamatic you may potentially be\n            entitled to claim a\n            reimbursement for this amount\n            from your insurer, it is your sole responsibility to seek further clarification from your\n            insurer.</li>\n        </C>\n        <C if="meta.is_qbe">\n          <li>QBE and Steamatic are acting on a without prejudice basis and\n            any mitigation\n            works completed does not imply\n            acceptance of the claim (whole or part) nor mean either party is responsible for\n            rectification of mitigation\n            works.</li>\n        </C>\n      </ol>\n    </div>\n    <div class="my-3">\n      <div class="form-group">\n        <div class="row">\n          <div class="col-2 text-right">\n            <label class="m-0 pt-2">Insurer Name:</label>\n          </div>\n          <div class="col-5">\n            <C not="jobContract.id">\n              <DropDownList name="insurance.insurer" type="insurer" placeholder="Choose insurance company name" />\n            </C>\n            <C if="jobContract.id">\n              <label class="m-0 pt-2">{{meta.insurance.insurer.text}}</label>\n            </C>\n          </div>\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="row">\n          <div class="col-2 text-right">\n            <label class="m-0 pt-2">Claim Number:</label>\n          </div>\n          <div class="col-3">\n            <C not="jobContract.id">\n              <Field name="insurance.claim_no">\n                <input type="text" maxLength="255" placeholder="Claim Number" class="form-control" />\n              </Field>\n            </C>\n            <C if="jobContract.id">\n              <label class="m-0 pt-2">{{meta.insurance.claim_no}}</label>\n            </C>\n          </div>\n        </div>\n      </div>\n      <div class="form-group">\n        <div class="row">\n          <div class="col-2 text-right">\n            <label class="m-0 pt-2">Date of Loss:</label>\n          </div>\n          <div class="col-3">\n            <C not="jobContract.id">\n              <DatePicker name="insurance.date_of_loss" />\n            </C>\n            <C if="jobContract.id">\n              <label class="m-0 pt-2"><Formatter name="meta.insurance.date_of_loss" type="date" /></label>\n            </C>\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>\n</C>\n\n<div class="mt-4">\n  <ol class="pl-0">\n    <li>\n      <strong>Pre Existing Damage</strong>\n      <ol>\n        <li>Steamatic does not accept responsibility for any form of\n          pre-existing damage that occurred prior to the\n          event that caused damage to which Steamatic is repairing/restoring\n          currently.</li>\n        <li>It is also your responsibility to notify Steamatic if you are\n          aware of pre existing damage that is not\n          visible. Failure to do so can result in you becoming personally\n          liable for the cost of restoration works\n          undertaken to repair you pre existing damage.</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Carpet Damage</strong>\n      <ol>\n        <li>Although Steamatic takes every possible precaution to minimise\n          the risk of damage to the structure of your\n          carpets (if you have carpet)\n          it cannot take responsibility for the list below of structural\n          damage as this damage is primarily due to the\n          existing nature and\n          condition of your carpets. Steamatic does not accept\n          responsibility for:</li>\n        <li>any removal of discolouration which has caused dye structure\n          changes\n          <ol>\n            <li>shrinkage or buckling of rugs/carpets woven on a wool base\n            </li>\n            <li>separation of the primary and secondary backings of\n              carpets/rugs of this design/running of colours in\n              rugs/carpets/upholstery containing non colour-fast fibres\n              including, in upholstery, bleeding of colour\n              from materials under the fabric</li>\n            <li>any pre-existing damage and/or hidden conditions including\n              improperly made seams or damaged\n              heating/cooling systems not specifically brought to our\n              attention</li>\n            <li>any damaged caused to the goods other than as can be\n              established has occurred solely as a result of\n              Steamatic undertaking cleaning and/or restoration in a\n              negligent manner.</li>\n          </ol>\n        </li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Steamatic Signage</strong>\n      <ol>\n        <li>If the completion of your restoration works is expected to\n          exceed 5 days, we may erect a temporary sign\n          outside your property\n          for the duration of our work for marketing purposes.</li>\n        <li>Steamatic maintains ownership of the temporary signage and\n          will be responsible for its installation and\n          removal from your property.</li>\n        <li>If you do not wish to have a temporary sign erected on\n          your property you can make a request to this effect\n          to your client manager</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Liability for our equipment</strong>\n      <ol>\n        <li>In some instances our technician will need to install\n          and leave equipment in your property to continue the\n          restoration process after they have left your property.\n          In such cases it is your sole responsibility to\n          ensure the security of the equipment and you will be\n          liable to compensate Steamatic in the event of theft,\n          damage or other loss, should it occur.</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Warranties</strong>\n      <ol>\n        <li>Steamatic undertakes to exercise due skill and\n          care in the restoration of all goods and warrants\n          its\n          restoration work for a period of one year from the\n          provision of such service. The warranty shall also\n          be\n          limited to re-performance of Steamatic\'s services or\n          refund of the service price.</li>\n        <li>Our warranty excludes any damage that occurs as a\n          result of the defective manufacturing of a product\n          used\n          during the restoration process.</li>\n        <li if="$is_iag">IAG and Steamatic are\n          acting on a without prejudice basis and any\n          mitigation\n          works completed does not imply acceptance of the\n          claim\n          (whole or part) nor mean either party is responsible\n          for rectification of mitigation works.</li>\n      </ol>\n    </li>\n\n    <li if="isQLD">\n      <span>Right of sale/disposal of uncollected\n        goods</span>\n      <ol>\n        <li>I hereby acknowledge that goods accepted by\n          Steamatic for repair or other treatment under\n          the customer\n          service agreement is subject to\n          the Disposal of Uncollected Goods Act (1967) QLD\n          which covers inspection, custody, storage,\n          repair and other\n          treatment of goods.\n          Under this Act, uncollected goods may be sold\n          six months after the date on which they were\n          ready for\n          collection.</li>\n      </ol>\n    </li>\n\n    <li>\n      <strong>Chemicals</strong>\n      <ol>\n        <li>In some instances our technician will need\n          to use chemicals in your property as part of\n          the cleaning and\n          restoration process.</li>\n        <li>Safety Data\n          Sheets are available to be viewed and/or\n          emailed by Steamatic upon\n          request.</li>\n        <li>If you do not wish to have chemicals used\n          in your property, or have occupants that may\n          be chemically\n          sensitive please advise the technician\n          immediately.</li>\n      </ol>\n    </li>\n\n  </ol>\n</div>\n<C if="COLLECT_EXCESS_PAYMENT">\n  <hr class="my-4" />\n  <div>\n    <h5 class="mb-3 font-weight-bold">Excess Payment</h5>\n    <div>\n      <div class="d-flex align-items-center">\n        <label class="mr-4 mb-0">Payment Type:</label>\n        <C if="jobContract.id">\n          <span>{{EXCESS_PAYMENT_TYPE}}</span>\n        </C>\n        <C not="jobContract.id">\n          <div class="d-flex">\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_na" value="" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_na">\n                N/A\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_cash" value="cash" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_cash">\n                Cash\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_cheque" value="cheque" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_cheque">\n                Cheque\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_credit" value="credit" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_credit">\n                Credit Card\n              </label>\n            </div>\n            <div class="mr-4 mb-0">\n              <Field name="excess_payment.type">\n                <input type="radio" name="excess_payment.type" id="opt_ga_payment_debit" value="debit" />\n              </Field>\n              <label class="mb-0" for="opt_ga_payment_debit">\n                Debit Card\n              </label>\n            </div>\n          </div>\n        </C>\n      </div>\n      <C if="meta.excess_payment.type">\n        <div class="mt-3">\n          <div class="form-group">\n            <div class="row">\n              <div class="col-2 text-right">\n                <label class="m-0 pt-2">Amount Received:</label>\n              </div>\n              <div class="col-3">\n                <C not="jobContract.id">\n                  <div>\n                    <div class="input-group">\n                      <div class="input-group-prepend"><span class="input-group-text">$</span></div>\n                      <Field name="excess_payment.amount_received">\n                        <input type="number" class="form-control" step="0.01" placeholder="0.00" />\n                      </Field>\n                    </div>\n                  </div>\n                </C>\n                <C if="jobContract.id">\n                  <div class="m-0 pt-2">$&nbsp;<Formatter name="meta.excess_payment.amount_received" type="currency" /></div>\n                </C>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="row">\n              <div class="col-2 text-right">\n                <label class="m-0 pt-2">Date Received:</label>\n              </div>\n              <div class="col-3">\n                <C not="jobContract.id">\n                  <Datepicker name="excess_payment.received_at" />\n                </C>\n                <C if="meta.excess_payment.type">\n                  <C if="jobContract.id">\n                    <div class="m-0 pt-2"><Formatter name="meta.excess_payment.received_at" type="date" /></div>\n                  </C>\n                </C>\n              </div>\n            </div>\n          </div>\n\n          <div class="form-group">\n            <div class="row">\n              <div class="col-2 text-right">\n                <label class="m-0 pt-2">Receipt Number:</label>\n              </div>\n              <div class="col-3">\n                <C not="jobContract.id">\n                  <Field name="excess_payment.receipt_book_no">\n                    <input type="text" maxlength="255" class="form-control" />\n                  </Field>\n                </C>\n                <C if="jobContract.id">\n                  <C if="meta.excess_payment.receipt_book_no">\n                    <div class="m-0 pt-2">{{meta.excess_payment.receipt_book_no}}</div>\n                  </C>\n                  <C not="meta.excess_payment.receipt_book_no">\n                    <div class="m-0 pt-2">N/A</div>\n                  </C>\n                </C>\n              </div>\n            </div>\n          </div>\n        </div>\n      </C>\n    </div>\n  </div>\n</C>\n<C not="CUSTOMER_SIGNED_AT">\n  <C if="jobContract.id">\n    <hr class="my-4" />\n    <p><strong><span>SIGNATURE</span></strong></p>\n    <C if="IS_CUSTOMER">\n      <div class="py-3 px-5">\n        <Field name="signature.customer.meta.acknowledged">\n          <input type="checkbox" id="gen_auth_ack" />\n        </Field>\n        &nbsp; <label for="gen_auth_ack">I acknowledge and have read the terms and conditions and agree to abide by\n          them.</label>\n        <Signature type="customer" />\n        <div class="d-flex align-items-start">\n          <div class="text-nowrap mr-3">\n            <Field name="signature.customer.meta.responsible_party">\n              <input type="radio" name="signature.customer.meta.responsible_party" id="opt_ga_responsible_party_owner" value="owner" />\n            </Field>\n            <label class=" mb-0" for="opt_ga_responsible_party_owner">\n              I am the owner\n            </label>\n          </div>\n          <div>\n            <Field name="signature.customer.meta.responsible_party">\n            <input type="radio" name="signature.customer.meta.responsible_party" id="opt_ga_responsible_party_agent" value="agent" />\n            </Field>\n            <label class="mb-0" for="opt_ga_responsible_party_agent">\n              I am an authorised agent of the owner\n            </label>\n            <C if="meta.signature.customer.meta.responsible_party=agent">\n              <div class="d-inline-block mt-3">\n                <Field name="signature.customer.meta.agent_relation">\n                  <input type="text" placeholder="Relationship with owner" class="form-control" style="width: 300px;" maxLength="200" />\n                </Field>\n              </div>\n            </C>\n          </div>\n        </div>\n      </div>\n    </C>\n    <C if="IS_STAFF">\n      <p class="text-center"><a href={{CONTRACT_URL}} target="_blank" class="btn btn-outline-primary">Get Customer Signature</a></p>\n    </C>\n  </C>\n  <hr class="my-4 print-hide" />\n  <C if="IS_STAFF">\n    <C not="jobContract.id">\n      <div class="mt-5 d-flex justify-content-center print-hide">\n        <button class="btn btn-primary" onClick={{submitContract}}>Send Authority Form</button>\n      </div>\n    </C>\n    <C if="jobContract.id">\n      <div class="d-flex align-items-center print-hide">\n        <div>Resend this form to:</div>\n        <div class=\'mx-3\'>\n          <div class="d-inline-block">\n            <Field name="email.send.to">\n              <input type="email" placeholder="Email address" class="form-control" style="width: 300px;" maxLength="200" />\n            </Field>\n          </div>\n        </div>\n        <div>\n          <button class="btn btn-primary" onClick={{resendEmail}}>Resend Authority Form</button>\n        </div>\n      </div>\n    </C>\n  </C>\n  <C if="IS_CUSTOMER">\n    <div class="mt-3 d-flex justify-content-center print-hide">\n      <button class="btn btn-primary" onClick={{submitContract}}>Submit Authority</button>\n    </div>\n  </C>\n</C>\n<C if="CUSTOMER_SIGNED_AT">\n  <hr class="my-4" />\n  <C if="signature.customer.meta.acknowledged">\n    <p>I acknowledge and have read the terms and conditions and agree to abide by them.</p>\n  </C>\n  <C not="signature.customer.meta.acknowledged">\n    <p>I do not acknowledge and have not read the terms and conditions and do not agree to abide by them.</p>\n  </C>\n  <p><strong><span>SIGNATURE</span></strong></p>\n  <Signature type="customer" />\n  <div><strong>Signed At:</strong> {{CUSTOMER_SIGNED_AT}}</div>\n  <div class="mt-3">\n    <C if="signature.customer.meta.responsible_party=owner">I am the owner.</C>\n    <C if="signature.customer.meta.responsible_party=agent">I am an authorised agent of the owner. Relationship with owner is {{signature.customer.meta.agent_relation}}.</C>\n  </div>\n</C>\n<C if="jobContract.id">\n  <C if="IS_STAFF">\n    <hr class="my-4 print-hide" />\n    <div class="mt-3 d-flex justify-content-center print-hide">\n      <button class="ml-3 btn btn-danger" onClick={{cancelContract}}>Cancel General Authority</button>\n    </div>\n  </C>\n</C>\n',defaultMeta:{contact:{full_name:hO.getContactName(zy.extractContact(tv.CUSTOMER,o.data))},insured:!1,signature:{customer:{meta:{acknowledged:!1,responsible_party:"owner"}}},insurance:{insurer:{value:(null===(e=r.data.insurer)||void 0===e?void 0:e.id)||"",text:(null===(t=r.data.insurer)||void 0===t?void 0:t.legal_name)||""},claim_no:r.data.claim_number||"",date_of_loss:r.data.date_of_loss||""},email:{cc:{requested:!1,to:""}},excess_payment:{type:void 0,amount_received:r.data.expected_excess_payment||"",received_at:""}},beforeSubmit:this.beforeContractSubmit,afterSubmit:this.afterSubmit,onDelete:this.onDelete}):Object(a.jsx)(Nv,{size:40})]})}},{key:"render",value:function(){return Object(a.jsx)(MH,{customHeaderTitle:"General Authority",sidebar:!1,contentLayout:this.renderContentPage()})}}]),n}(p.PureComponent);hQ.fields={name:"contact.full_name",insured:"insured",insurer:"insurance.insurer",claim_no:"insurance.claim_no",date_of_loss:"insurance.date_of_loss",payment_type:"excess_payment.type",amount_received:"excess_payment.amount_received",amount_received_at:"excess_payment.received_at",receipt_book_no:"excess_payment.receipt_book_no",acknowledged:"signature.customer.meta.acknowledged",responsible_party:"signature.customer.meta.responsible_party",agent_relation:"signature.customer.meta.agent_relation",email_send_to:"email.send.to"},hQ.validate=function(e,t,n){var r=hQ.fields,a={};j.a.forEach(r,(function(t,n){a[n]=j.a.get(e,t),j.a.isString(a[n])&&(a[n]=a[n].trim())}));var o={};if(n){var i;if(a.name||j.a.set(o,r.name,"This field is required"),a.insured)(null===(i=a.insurer)||void 0===i?void 0:i.value)||j.a.set(o,r.insurer,"This field is required"),a.claim_no||j.a.set(o,r.claim_no,"This field is required"),a.date_of_loss?pm()(a.date_of_loss).isValid()||j.a.set(o,r.date_of_loss,"Date format is not correct"):j.a.set(o,r.date_of_loss,"This field is required");+t.expected_excess_payment>0&&void 0===a.payment_type&&j.a.set(o,r.payment_type,"This field is required"),a.payment_type&&(a.amount_received||j.a.set(o,r.amount_received,"This field is required"),a.amount_received_at?pm.a.isMoment(a.amount_received_at)||j.a.set(o,r.amount_received_at,"Date format is not correct"):j.a.set(o,r.amount_received_at,"This field is required"))}else"agent"===a.responsible_party&&(a.agent_relation||j.a.set(o,r.agent_relation,"This field is required")),a.acknowledged||j.a.set(o,r.acknowledged,"This field is required");return!!j.a.isEmpty(o)||o};var bQ=Object(sg.compose)(O.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(hQ),fQ=n(33);function mQ(){var e=Object(f.a)(["\n  padding: 5px;\n  cursor: pointer;\n  opacity: 0.7;\n  :hover{\n    opacity: 1;\n  }\n"]);return mQ=function(){return e},e}function jQ(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return jQ=function(){return e},e}var vQ=y.default.div(jQ()),OQ=y.default.div(mQ()),gQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.data,scrollable:"none"}},e.deleteContract=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,o,i,c;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.dispatch,i=r.onDelete,c=r.model,n.next=3,o(iw("Confirm","Delete ".concat("inventory"===c?"Inventory":"Job"," Contract!"),Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete ","inventory"===c?"inventory":"job"," contract ",Object(a.jsx)("strong",{children:j.a.get(t,"contract_template.contract.name")}),"?"]})));case 3:if(!n.sent){n.next=10;break}return e.setState({loading:!0}),n.next=8,eY(t.id,{model:c});case 8:null===i||void 0===i||i(t),e.setState({loading:!1});case 10:case"end":return n.stop()}}),n)})))},e.onCellClick=function(t){return function(){e.props.history.push({pathname:"".concat(e.props.match.url,"/").concat(t.id),state:e.props.state})}},e.Name=function(t){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{className:"cursor-pointer",children:j.a.get(t,"contract_template.contract.name")})}}))},e.Date=function(t){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data,n=j.a.get(t,"contract_date");return Object(a.jsx)("div",{className:"cursor-pointer",children:n?pm()(n).format(iv):""})}}))},e.Status=function(t){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({cellProps:{onClick:e.onCellClick(t.dataItem)}},t),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{className:"cursor-pointer",children:LH[j.a.get(t,"status")||"NEW"]})}}))},e.Actions=function(t){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data;return Object(a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:!(n.status===IH.SIGNED||n.status===IH.CANCELED)&&Object(a.jsx)(OQ,{onClick:e.deleteContract(n),children:Object(a.jsx)(cm,{name:Xf.Delete,size:20})})})}}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this;this.props.data!==this.state.gridState.data&&this.setState((function(t){return t.gridState.data=e.props.data,t}))}},{key:"render",value:function(){var e=this.state.loading;return Object(a.jsxs)(vQ,{className:"h-100",children:[e&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{className:"d-flex flex-column",children:[Object(a.jsx)(F_.b,{field:"id",title:"Name",cell:this.Name}),Object(a.jsx)(F_.b,{field:"customer_name",title:"Contract Date",width:"250px",cell:this.Date}),Object(a.jsx)(F_.b,{field:"invoice_to_contact_name",title:"Status",width:"150px",cell:this.Status}),Object(a.jsx)(F_.b,{width:"110px",cell:this.Actions,sortable:!1})]}))]})}}]),n}(p.Component);function xQ(e){var t=e.Component,n=e.dataItem,r=e.field,o=e.cellProps;return Object(a.jsx)("td",Object(c.a)(Object(c.a)({},o),{},{children:Object(a.jsx)(t,{data:n,value:r?j.a.get(n,r):void 0})}))}var yQ=Object(sg.compose)(Object(b.b)(),O.g)(gQ),_Q='\n<p>\n  <strong>Parties:</strong><br>\n  {{CUSTOMER_NAME}} of {{INVOICE_TO_ADDRESS}} <C if="">{{CUSTOMER_ABN}}</C> <br>\n  <strong>(\'The Customer\')</strong>\n</p>\n\n<p>And</p>\n\n<p>\n  {{FRANCHISE_LEGAL_NAME}} trading as Steamatic, ABN: {{FRANCHISE_ABN}}<br>\n  <strong>(\'Steamatic\')</strong><br>\n  Address: {{FRANCHISE_ADDRESS}}<br>\n  Phone number: {{FRANCHISE_PHONE}}<br>\n  Contact person details: {{meta.contact.full_name}}<br>\n  Email: {{meta.contact.email}}\n</p>\n\n<p>Steamatic is an experienced cleaning and restoration business that assists customers that have suffered an Event so\n  that where practicable, the Property the subject of the Event is restored to as near as practicable to its pre-Event\n  condition.</p>\n\n<p>\n  <strong>Scope of Works</strong><br>\n  This scope of works details the Services to be provided to the Customer under this Contract.\n</p>\n\n<p>\n  <strong>Location of Property</strong><br>\n  {{SITE_ADDRESS}}\n</p>\n\n<p>\n  <strong>Time and Materials</strong><br>\n  All work performed under this Contract will be priced in accordance with Steamatic\'s Time and Materials Schedule\n  (Schedule). The Schedule is attached to this contract.\n</p>\n\nThe Customer <b>authorises</b> Steamatic:\n<ol class="split start">\n  <li>To complete the Services at the property location as stated above;</li>\n  <li>To complete any Variation to the Services in respect of approved changes to the Property; and,</li>\n  <li>To provide confirmation of Variations to the Customer electronically.</li>\n</ol>\nThe Customer <b>agrees</b>:\n<ol class="split">\n  <li>To make a claim under their insurance policy to cover the Works agreed to be performed under this Contract.</li>\n  <li>Upon receipt of payment of the insurance claim, the Customer will forward such payment forthwith to Steamatic.\n  </li>\n  <li>If there is any difference between the amount due by the Customer to Steamatic under this Contract and the amount\n    paid by the Insurer to the Customer, the Customer will pay the difference to Steamatic.</li>\n  <li>Where the Customer\'s Insurer requests the Customer to do so, the Customer will pay any excess (as defined in the\n    insurance policy) to Steamatic.</li>\n  <li>The Customer acknowledges that in cases where the Customer is not insured for the Services the Customer is\n    responsible for payment of the Services to Steamatic calculated in accordance with this Contract.</li>\n</ol>\n\n<div class="row">\n  <div class="col-6">\n    <div class="mb-3">\n      <strong>Customer</strong>\n    </div>\n    <div class="mb-3">\n      <C not="CUSTOMER_SIGNED_AT">\n        <C if="IS_CUSTOMER">\n          <Field name="signature.customer.meta.full_name"><input type="text" class="form-control" placeholder="Full name" /></Field>\n        </C>\n        <C not="IS_CUSTOMER">\n          <strong>Name:</strong> {{signature.customer.meta.full_name}}\n        </C>\n      </C>\n      <C if="CUSTOMER_SIGNED_AT">\n        <strong>Name:</strong> {{signature.customer.meta.full_name}}\n      </C>\n    </div>\n    <div class="mb-3">\n      <div>\n        <strong>Signature:</strong><C not="CUSTOMER_SIGNED_AT"><C not="IS_CUSTOMER"> (Not signed yet) </C></C>\n      </div>\n      <div>\n      <C if="CUSTOMER_SIGNED_AT">\n        <Signature type="customer" />\n      </C>\n      <C not="CUSTOMER_SIGNED_AT">\n        <C if="IS_CUSTOMER">\n          <Signature type="customer" />\n        </C>\n      </C>\n      </div>\n      <div>\n        <C not="CUSTOMER_SIGNED_AT">\n          <C if="IS_CUSTOMER">\n            <button class="btn btn-primary" onClick={{lockSignature}}>I Agree</button>\n          </C>\n        </C>\n        <C if="CUSTOMER_SIGNED_AT">\n          <strong>Signed At:</strong> {{CUSTOMER_SIGNED_AT}}\n        </C>\n      </div>\n    </div>\n  </div>\n  <div class="col-6">\n    <div class="mb-3">\n      <strong>Steamatic</strong>\n    </div>\n    <div class="mb-3">\n      <C not="STAFF_SIGNED_AT">\n        <C if="IS_STAFF">\n        <Field name="signature.staff.meta.full_name"><input type="text" class="form-control" placeholder="Full name" /></Field>\n        </C>\n      </C>\n      <C if="STAFF_SIGNED_AT">\n        <strong>Name:</strong> {{signature.staff.meta.full_name}}\n      </C>\n    </div>\n    <div class="mb-3">\n      <div>\n        <strong>Signature:</strong>\n      </div>\n      <div>\n      <C if="STAFF_SIGNED_AT">\n        <Signature type="staff" />\n      </C>\n      <C not="STAFF_SIGNED_AT">\n        <C if="IS_STAFF">\n          <Signature type="staff" />\n        </C>\n      </C>\n      </div>\n      <div>\n        <C not="STAFF_SIGNED_AT">\n          <C if="IS_STAFF">\n            <button class="btn btn-primary" onClick={{lockSignature}}>I Agree</button>\n          </C>\n        </C>\n        <C if="STAFF_SIGNED_AT">\n          <strong>Signed At:</strong> {{STAFF_SIGNED_AT}}\n        </C>\n      </div>\n    </div>\n  </div>\n</div>\n\n\n<p><b><u>Defined Terms</u></b></p>\n\n<p><b>\'Contract\'</b> means this Service Contract.</p>\n\n<p><b>\'Customer\'</b> means any person or company that is provided with Services by Steamatic under this Contract.</p>\n\n<p><b>\'Event\'</b> means the action, activity, incident, or happening including but not limited to fire, storm, flood or\n  malicious damage, that results in damage to the Customer\'s Property.</p>\n\n<p><b>\'Goods\'</b> \u2013 means the contents of the customer\'s property, and includes personal property.</p>\n\n<p><b>\'Insured\'</b> means the party to an insurance arrangement to whom the insurer agrees to provide cover against\n  specified losses, or to render services, subject to the terms of the insurance contract.</p>\n\n<p><b>\'Insurer\'</b> means the party to an insurance arrangement who undertakes to provide cover or to render services,\n  on the happening of specified events.</p>\n\n<p><b>\'Policy\'</b> means the Product Disclosure Statement and the policy schedule.</p>\n\n<p><b>\'Property\'</b> means the Customer\'s property the subject of an Event which may include Goods.</p>\n\n<p><b>\'Services\'</b> means all of the services supplied to the Customer in accordance with this Contract including but\n  not limited to:</p>\n<ul>\n  <li>liaising with loss assessors to establish the total loss or otherwise of the Customer\'s Property;</li>\n  <li>cleaning;</li>\n  <li>decontamination</li>\n  <li>restoration;</li>\n  <li>repair;</li>\n  <li>replacement of damaged and unserviceable parts with new Goods.</li>\n</ul>\n\n<p><b>\'Steamatic\'</b> means any person(s) or sub-contractor(s) who perform the Services.</p>\n\n<p><b>\'Variation\'</b> means a change to the Services to be supplied under this Contract as agreed by the parties from\n  time to time.</p>\n\n<p><b>\'Works\'</b> refers to the Services to be provided to the Customer to return the Property to as near as practicable\n  to its pre-Event condition.</p>\n\n<ol class="margin-top-30 contract-list">\n  <li><u>This Contract is between The Customer and Steamatic</u>\n    <ol>\n      <li>This Contract states the terms on which Steamatic will supply Services to the Customer.</li>\n      <li>The terms of this Contract cannot be waived or varied unless agreed in writing between the Customer and\n        Steamatic.</li>\n      <li>Steamatic may in its absolute discretion subcontract part or all of its obligations relating to this Contract.\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Insurance policy claims</u>\n    <ol>\n      <li>The Customer hereby authorises and directs the Customer\'s insurers to make payment directly to Steamatic in\n        respect of any Services rendered and/or work undertaken by Steamatic.</li>\n      <li>If Steamatic\'s charges for the Services are not reimbursed by the Insurers within 30 days from the date of\n        Steamatic\'s invoice the Customer agrees to pay the invoice within seven days of a written request to do so.</li>\n      <li>The Customer will be liable for any reasonable legal fees and interest incurred by Steamatic as a result of\n        delay in receipt of payment from the Insurer, and interest (see cl 5).</li>\n    </ol>\n  </li>\n\n  <li><u>Variation</u>\n    <ol>\n      <li>The Customer agrees to pay for any Variation calculated as follows:\n        <ol>\n          <li>If Steamatic has quoted an amount for such Variation, the amount quoted; or</li>\n          <li>If Steamatic has not provided a quote, an amount calculated for the Variation in accordance with\n            Steamatic\'s\n            Time and Materials Schedule as applicable at the time that the Services are provided.\n            Steamatic\'s standard rates are attached to this Contract.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Invoicing and Payment</u>\n    <ol>\n      <li>Steamatic will invoice the Customer upon completion of the Services.</li>\n      <li>Where the Services are not completed within one month, Steamatic will invoice the Customer at suitable\n        intervals, at Steamatic\'s sole discretion.</li>\n      <li>Invoices are payable within 14 days of the date of issue of the invoice(s).</li>\n    </ol>\n  </li>\n\n  <li><u>Interest on Overdue amounts</u>\n    <ol>\n      <li>Where the Customer or the Insurer fails to make payment by the invoice due date, the Customer may be charged\n        interest at the Penalty Interest Rate equivalent to the Reserve Bank of Australia Cash Rate plus 2%, calculated\n        from the date of invoice.</li>\n      <li>Steamatic reserves the right to suspend work until payment of the overdue invoice is received.</li>\n      <li>Steamatic will not be liable for any loss or damage that the Customer may suffer as a result of the suspension\n        of works for non-payment.</li>\n    </ol>\n  </li>\n\n  <li><u>GST</u>\n    <ol>\n      <li>Any amount payable under this Contract, unless specifically described in this Contract as \'GST inclusive\',\n        does not include any amount on account of GST. If GST is payable on any amount payable under this Contract the\n        Customer must pay to Steamatic an additional amount equal to the GST payable on the supply (GST Amount). The GST\n        Amount is payable at the same time as the GST exclusive amount is paid, subject to Steamatic issuing the\n        Customer with a tax invoice for the supply to which the payment relates.</li>\n      <li>The Customer acknowledges that if the Customer\'s insurers pay Steamatic\'s invoice less the GST component, the\n        Customer will be responsible for the payment of the GST in accordance with the payment terms specified in this\n        Contract.</li>\n    </ol>\n  </li>\n\n  <li><u>Storage and Disposal</u>\n    <ol>\n      <li>The Customer acknowledges that as part of providing the Services under this Contract to the Customer,\n        Steamatic may need to remove Goods from the Customer\'s premises, for storage and/or restoration.</li>\n      <li>Goods removed under this Contract will commence accruing storage charges immediately.</li>\n      <li>Storage charges will be invoiced every 30 days.</li>\n      <li>Where the Customer\'s Goods have been assessed as non-restorable, Steamatic will provide notice to the Customer\n        requesting the Customer\n        either collect or accept delivery of the Goods where practicable and pay the relevant charges, or seek the\n        Customer\'s authority to dispose\n        of the non-restorable Goods.</li>\n      <li>Storage charges will continue to accrue on non-restorable Goods until the Customer either arranges for\n        collection or delivery of\n        the non-restorable Goods or authorizes Steamatic to dispose of the non-restorable Goods.</li>\n      <li>The Customer acknowledges that where Steamatic does not receive notice referred to in clause 7.5,\n        Steamatic will dispose of the Goods as provided for under the <i>Australian Consumer Law and {{FTA}} (Fair\n          Trading Act)</i>.</li>\n      <li>Costs incurred by Steamatic in storing the Goods, and in disposing of the Goods will be payable by the\n        Customer in accordance with the <i>Fair Trading Act</i>.</li>\n    </ol>\n  </li>\n\n  <li><u>The Customer\'s obligations</u>\n    <ol>\n      <li>The Customer will:\n        <ol>\n          <li>Provide Steamatic with access to the site for purposes of providing the Services detailed in this\n            Contract; and,</li>\n          <li>At all times provide a safe working environment in accordance with the <i>{{WHSA}}</i> or the equivalent\n            legislation in the State or Territory in which the Services are performed; and,</li>\n          <li>Provide adequate facilities at the site at no cost to Steamatic, including but not limited to parking,\n            water, toilets and power; and,</li>\n          <li>Advise Steamatic if the value of any one Good has a value in excess of $10,000.00.</li>\n        </ol>\n      </li>\n      <li>Where Steamatic removes Goods from the Customer\'s premises for either assessment, restoration or storage as\n        part of the Services, it is the Customer\'s responsibility to inform their Insurer that covered Goods are\n        temporarily relocated and ensure that the insurance policy will continue to apply to the relocated Goods.</li>\n      <li>The Customer releases and indemnifies Steamatic against any claims of whatsoever nature (including costs and\n        interest) and consequential loss and damage (including claims by third parties) for:\n        <ol>\n          <li>scuffing and other marking to surrounding areas outside the Service area; and,</li>\n          <li>loss or damage to a single item of an otherwise incomplete set, where Steamatic\'s responsibility is\n            limited to replacing the lost or damaged item; and,</li>\n          <li>damage to Goods in transit, where Goods damaged by an Event require transportation, and transit results in\n            damage, or previously undetected damage becoming evident; and,</li>\n          <li>any electronic or mechanical malfunction occasioned by the transportation of the Goods; and,</li>\n          <li>damage and disappearance of images in cases of restoration of thermographic paper; and,</li>\n          <li>non-event related mould damage to other areas of the site not specifically forming part of the areas\n            treated under the Services; and,</li>\n          <li>occurrence of secondary damage, such as mould or bacteria growth as a result of recommended irradiation\n            services not being taken up by the Customer; and,</li>\n          <li>missing inventory items where the Customer does not confirm contents of inventory prior to the inventory\n            items being transported off-site by Steamatic as part of the Services; and,</li>\n          <li>For the purposes of this sub-clause 8.3 in transit and transportation are taken to include loading and\n            unloading.</li>\n        </ol>\n      </li>\n      <li>The Customer releases and indemnifies Steamatic of any claim or cause of action of whatsoever nature including\n        consequential loss where:\n        <ol>\n          <li>the repair of Goods capable of retaining user-generated data has resulted in a loss of the data; and,</li>\n          <li>commissioning or decommissioning of equipment has caused secondary damage; and,</li>\n          <li>containment of a site has been established by Steamatic which is then breached by an unauthorized person.\n          </li>\n        </ol>\n      </li>\n      <li>The Customer acknowledges that it is not the responsibility of Steamatic to:\n        <ol>\n          <li>re-install electrical equipment such as televisions, refrigerators, audio and sound equipment and the\n            like; and,</li>\n          <li>warranty any floor covering on concrete floors which have not been dried adequately.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Warranty and Claims (Commercial Customers)</u>\n    <ol>\n      <li>The Customer must inspect Services provided under this Contract within 7 days of completion of the Works.\n        Where the Customer believes that the Services provided are defective, the Customer must give written notice to\n        Steamatic of the particulars of the alleged defects within a further 14 days.\n        <ol>\n          <li>If on inspection Steamatic accepts the defects as being a result of Steamatic failing to provide the\n            Services in accordance with its obligation under this Contract then Steamatic will rectify the Services.\n          </li>\n          <li>Where Steamatic cannot rectify the Services, Steamatic will refund the amount paid by the Customer for the\n            Services that cannot be rectified.</li>\n        </ol>\n      </li>\n\n      <li>Steamatic has no obligation to rectify any Services where it does not receive written notice of the defect\n        within 21 days of completion of the Services. Notwithstanding the warranty claim, the Customer will remain\n        liable to pay Steamatic\'s charges under this Contract.</li>\n      <li>The Customer agrees that Steamatic is not liable under this clause to the extent that any defect or damage to\n        the Goods arises out of the Customer\'s negligence, fault, neglect, abuse, incorrect use of the Goods or as a\n        result of vandalism, fire, water damage, or any other circumstance outside of Steamatic\'s control.</li>\n      <li>Notwithstanding anything in this clause, Steamatic can elect to reimburse the Customer the cost of the\n        Services in full and complete discharge of its obligations to the Customer under this warranty.</li>\n    </ol>\n  </li>\n\n  <li><u>Best Endeavours</u>\n    <ol>\n      <li>In the event that Goods restored or repaired by Steamatic under this Contract fail within 12 months of\n        Steamatic\'s restoration or repair, Steamatic agrees to restore or repair the Goods to pre-loss condition, but\n        where this is deemed as not practicable by Steamatic due to commercial and economic factors, then Steamatic will\n        refund the amount paid by the Customer for the Services in respect of those Goods incapable of restoration.</li>\n      <li>Subject to Steamatic using its best endeavours in accordance with sub-clause 10.2 Steamatic is not liable for\n        any loss or damage including any consequential loss or damage arising out of the failure to restore or repair\n        the Goods to its pre-loss condition.</li>\n    </ol>\n  </li>\n\n  <li><u>Warranty \u2013 Consumer Services Only</u>\n    <ol>\n      <li>This clause only applies if the Customer is a consumer for the purposes of the <i>Competition and Consumer Act\n          2010 (Cth) (the Act)</i>.</li>\n      <li>If the Customer is a consumer as defined in the Australian Consumer Law (ACL), the consumer guarantees apply.\n        Nothing in this Contract limits or excludes the application of the Act.</li>\n      <li>Steamatic\'s Services come with guarantees that cannot be excluded under the ACL. The Customer is entitled to a\n        refund for a major failure and for compensation for any other reasonably foreseeable loss or damage. The\n        Customer is also entitled to have the parts supplied with the Services repaired or replaced if the parts fail to\n        be of acceptable quality, and/or the Services resupplied if the Services fail to be of acceptable quality, and\n        the failure does not amount to a major failure.</li>\n      <li>The benefits to the consumer given by this warranty are in addition to other rights and remedies of the\n        consumer under applicable laws relating to the Goods or Service.</li>\n      <li>If there is a defect in the parts or Service the Customer is entitled to submit a warranty claim by providing\n        written notice and delivering it to the address shown. Any reasonable expenses incurred in transportation and\n        return of Goods will be to Steamatic\'s expense where a defect is shown to have occurred. The expenses must be\n        included in your claim.</li>\n      <li>\n        The warranty claim must provide an original or copy of the proof of purchase and where possible provide an\n        explanation of the problem the subject of the warranty claim.\n        <div class="margin-bottom-20">\n          Details for lodging the warranty claim are as follows:<br>\n          Contact Name: Service and Warranties<br>\n          Address: 10-11 Walker Street, Braeside, VIC 3195<br>\n          Phone: 03 9587 6333<br>\n          Email: admin@steamatic.com.au\n        </div>\n      </li>\n\n      <li>If the Goods are capable of retaining user-generated data, the repair of the Goods may result in a loss of the\n        data.</li>\n      <li>The following warranty periods apply:\n        <ol>\n          <li>In respect of the Services provided, a period of 12 months from completion; and,</li>\n          <li>In respect of Goods that are provided under this Contract which are new and not refurbished then the\n            manufacturer\'s warranty period applies.</li>\n        </ol>\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Insurances of Goods removed by Steamatic</u>\n    <ol>\n      <li>Steamatic is not liable for the damage, loss, theft or any other action that may occur as a result of the\n        Customer\'s failure to obtain current insurance cover on any Goods requiring transport under this Contract.</li>\n      <li>The Customer must advise Steamatic if the monetary value of any single transportable Good is in excess of\n        Three Hundred and Fifty Thousand Dollars ($350,000).</li>\n      <li>Where any such Good is in excess of $350,000 it is the Customer\'s sole responsibility to obtain specific\n        insurance coverage for the item whilst it is in transit.</li>\n      <li>Steamatic will not cover electronic or mechanical derangement whilst in transit or loading/unloading, and will\n        not be held liable for any such alleged damages. The Customer agrees to obtain insurance cover for this\n        circumstance.</li>\n    </ol>\n  </li>\n\n  <li><u>Limitations</u>\n    <div>Notwithstanding any other terms in this Contract, the following limitations apply:</div>\n    <ol>\n      <li>All terms, conditions, representations and warranties expressed or implied by statute, the common law, equity,\n        trade, custom or usage or otherwise are expressly excluded to the maximum extent permitted by law.</li>\n      <li>Steamatic\'s liability under any warranty, expressed or implied, will be limited to re-performance of services\n        or refund of the price paid under this Contract. Steamatic will not be liable for replacement cost of any\n        equipment nor the reinstatement cost of any of the Customer\'s premises, nor will Steamatic be responsible for\n        damages related to loss of use of the Customer\'s premises or equipment or any other consequential damage.</li>\n      <li>Steamatic\'s liability to the Customer, whether for any breach of the Contract or for negligence or any other\n        tort or otherwise, will not in any event exceed the price paid by the Customer for the work performed.</li>\n    </ol>\n  </li>\n\n  <li><u>Force Majeure</u>\n    <div>Neither party will be liable for any breach of this Contract arising from any circumstance beyond that party\'s\n      reasonable control or the control of that party\'s employees, contractors, sub-contractors and officers, including\n      but not limited to, natural disasters, military operations, acts of war, terrorism, civil commotion, strikes, acts\n      or omissions of government, malicious damage, or shortages or delays in delivery by a third party of any goods or\n      services.</div>\n  </li>\n\n  <li><u>Entire Agreement</u>\n    <div>The Contract and any written variation in accordance with clause 3 comprises the complete agreement of the\n      parties in respect of the Services to be performed. No engagements, promises, representations, or warranties have\n      been made by either party except as is expressly stated in this Contract, and/or the parties hereby expressly\n      disclaim all implied warranties.</div>\n  </li>\n\n  <li><u>Other</u>\n    <ol>\n      <li>Steamatic\'s rights pursuant to this Contract are cumulative and additional to any other rights Steamatic may\n        have whether express or implied by contract or by law.</li>\n      <li>No delay or failure by Steamatic to enforce any of its rights under this Contract will amount to a waiver of\n        that right. Any waiver by Steamatic of any term or breach of this Contract is not to be taken as a continuing\n        waiver, and is capable of being revoked at the discretion of Steamatic and such a waiver by Steamatic will not\n        prejudice Steamatic\'s rights in respect of any subsequent breach of this Contract by the Customer.</li>\n      <li>The Customer will not be entitled to off-set any amount whatsoever against Steamatic notwithstanding any\n        default or alleged default by Steamatic under this Contract or any other agreement or contract.</li>\n      <li>If any term or provision in this Contract will in whole or in part be held to any extent to be illegal or\n        unenforceable under any enactment or rule of law that term or provision or part will be excluded from this\n        Contract and the enforceability of the remainder of this Contract will not be affected.</li>\n      <li>Time is of the essence in respect of anything that needs to be done by the Customer pursuant to this Contract.\n      </li>\n    </ol>\n  </li>\n\n  <li><u>Privacy</u>\n    <div>Please refer to our privacy statement on our website, Steamatic.com.au.</div>\n  </li>\n\n  <li><u>Jurisdiction</u>\n    <div>This Contract is governed by the laws of Victoria. Each party irrevocably submits to the non-exclusive\n      jurisdiction of the Courts of Victoria.</div>\n  </li>\n</ol>\n';function wQ(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return wQ=function(){return e},e}var SQ=y.default.div(wQ()),kQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.addContract=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,a=r.match,o=r.job.data,e.setState({loading:!0,creating:!0}),n.prev=2,n.next=5,WH(o.id,t.id,{contract_date:pm()().format(av),field_data:JSON.stringify({contract:{date:new Date}})});case 5:i=n.sent,e.props.history.push("".concat(a.url,"/").concat(i.id));case 7:return n.prev=7,e.setState({loading:!1,creating:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[2,,7,10]])})))},e.loadContractsList=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FH(AH.JOB_CONTRACT);case 2:return n=t.sent,e.setState({contracts:n}),t.abrupt("return",n);case 5:case"end":return t.stop()}}),t)}))),e.loadJobContracts=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.job,!(null===(n=r.data)||void 0===n?void 0:n.id)){t.next=7;break}return t.next=4,JH(e.props.job.data.id,AH.JOB_CONTRACT);case 4:return a=t.sent,e.setState({jobContracts:a}),t.abrupt("return",a);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),e._loadJobContracts=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContracts();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContracts=Qv()(e._loadJobContracts,100),e.onContractDelete=function(t){var n=e.state.jobContracts;e.setState({jobContracts:null===n||void 0===n?void 0:n.filter((function(e){return e.id!==t.id}))})},e.beforeContractSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(r,a,o){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.validate(a,o,e.props.user));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t,n;((null===(t=e.job.data)||void 0===t?void 0:t.id)!==(null===(n=this.props.job.data)||void 0===n?void 0:n.id)||e.match.params.contract_id&&!this.props.match.params.contract_id)&&this.debouncedLoadJobContracts()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params,t=e.id,n=e.contract_id;return n?Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)(v.b,{to:"/job/".concat(t,"/details"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Details"})}),n&&Object(a.jsx)(v.b,{to:"/job/".concat(t,"/job-contract"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Contracts"})})]}):null}},{key:"renderContentPage",value:function(){var e=this,t=this.props,r=t.job,o=t.contacts,i=t.match.params.contract_id,c=this.state,s=c.loading,l=c.creating,u=c.contracts,d=c.jobContracts;return Object(a.jsxs)(SQ,{className:"h-100 d-flex flex-column",children:[r.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(r.data.id,"/job-contract"),children:"Job Contracts"}),i&&Object(a.jsxs)(xk.BreadcrumbsItem,{to:"/job/".concat(r.data.id,"/job-contract/").concat(i),children:["Contract #",i]}),r.data&&o.data?Object(a.jsxs)(a.Fragment,{children:[s&&Object(a.jsx)(Nv,{size:40}),i?Object(a.jsx)(SQ,{className:"h-100",children:Object(a.jsx)(pQ,{type:AH.JOB_CONTRACT,job:r.data,jobContacts:o.data,defaultTemplate:_Q,beforeSubmit:this.beforeContractSubmit,beforeSign:n.validateSignatureMeta,defaultMeta:{contact:{full_name:"",email:""},contract:{cost:"",gst:10}},contractId:+i})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"px-5 my-4 d-flex align-items-center",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:"Job Contracts"})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end print-hide",children:Object(a.jsxs)(fQ.e,{children:[Object(a.jsxs)(fQ.h,{caret:!0,color:"primary",className:"position-relative",disabled:!u||l,children:[(!u||l)&&Object(a.jsx)(Nv,{size:30}),"Add New"]}),Object(a.jsx)(fQ.g,{basic:!0,right:!0,children:null===u||void 0===u?void 0:u.map((function(t){return Object(a.jsx)(fQ.f,{onClick:e.addContract(t),children:t.name},t.id)}))})]})})]}),Object(a.jsx)(SQ,{className:"flex-grow-1 h-100 px-3 pb-3",children:Object(a.jsx)(yQ,{job:r.data,data:d||[],onDelete:this.onContractDelete})})]})]}):Object(a.jsx)(Nv,{size:40})]})}},{key:"render",value:function(){return Object(a.jsx)(MH,{customHeaderTitle:"Job Contracts",sidebar:!1,contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent);kQ.validate=function(e,t,n){var r={name:"contact.full_name",email:"contact.email",cost:"contract.cost",date:"contract.date",gst:"contract.gst",email_send_to:"email.send.to"},a={};j.a.forEach(r,(function(t,n){a[n]=j.a.get(e,t),j.a.isString(a[n])&&(a[n]=a[n].trim())}));var o={};return n&&(a.name||j.a.set(o,r.name,"This field is required"),a.email?Jv(a.email)&&j.a.set(o,r.email,"Email format is not correct"):j.a.set(o,r.email,"This field is required"),a.email_send_to?Jv(a.email_send_to)&&j.a.set(o,r.email_send_to,"Email format is not correct"):j.a.set(o,r.email_send_to,"This field is required"),a.cost||j.a.set(o,r.cost,"This field is required"),a.gst||j.a.set(o,r.gst,"This field is required"),a.date?pm()(a.date).isValid()||j.a.set(o,r.date,"Date format is not correct"):j.a.set(o,r.date,"This field is required")),!!j.a.isEmpty(o)||o},kQ.validateSignatureMeta=function(e,t,n,r){var a={name:"signature."+e+".meta.full_name"},o={};j.a.forEach(a,(function(e,n){o[n]=j.a.get(t,e),j.a.isString(o[n])&&(o[n]=o[n].trim())}));var i={};return o.name||j.a.set(i,a.name,"This field is required"),!!j.a.isEmpty(i)||i};var CQ=Object(sg.compose)(O.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(kQ),NQ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.jobContract,r=t.jobContract.meta,o=t.bindings;t.cancel;return n.status===IH.CANCELED?null:Object(a.jsx)("div",{className:"p-3 min-h-100",style:{backgroundColor:_.gray1,border:"1px solid ".concat(_.gray2)},children:Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("label",{children:"Customer Details:"}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsx)(fY,Object(c.a)(Object(c.a)({},this.props),{},{name:"email.send.to",children:Object(a.jsx)("input",{type:"email",className:"form-control",placeholder:"Email address",disabled:n.status!==IH.NEW})}))})]}),Object(a.jsx)("hr",{}),n.status===IH.NEW&&Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:o.submitContract,children:"Send"})})}),n.status!==IH.NEW&&Object(a.jsxs)("div",{className:"text-muted margin-top-5",children:["Sent at ",pm()((null===r||void 0===r||null===(e=r.email)||void 0===e?void 0:e.sent_at)||n.created_at).format(lv)," "]})]})})}}]),n}(pY),EQ=function(e){var t,n,r,a,o,i,s,l;return Object(c.a)(Object(c.a)({},e),{},{flooring_type_id:(null===(t=e.flooring_type)||void 0===t?void 0:t.id)||null,flooring_subtype_id:(null===(n=e.flooring_subtype)||void 0===n?void 0:n.id)||null,non_restorable_reason_id:(null===(r=e.non_restorable_reason)||void 0===r?void 0:r.id)||null,carpet_type_id:(null===(a=e.carpet_type)||void 0===a?void 0:a.id)||null,carpet_age_id:(null===(o=e.carpet_age)||void 0===o?void 0:o.id)||null,carpet_face_fibre_id:(null===(i=e.carpet_face_fibre)||void 0===i?void 0:i.id)||null,underlay_type_id:(null===(s=e.underlay_type)||void 0===s?void 0:s.id)||null,carpet_construction_type_id:(null===(l=e.carpet_construction_type)||void 0===l?void 0:l.id)||null,job:void 0,flooring_type:void 0,flooring_subtype:void 0,non_restorable_reason:void 0,carpet_type:void 0,carpet_age:void 0,carpet_face_fibre:void 0,underlay_type:void 0,carpet_construction_type:void 0,params:void 0})},AQ=function(e){return Object(c.a)(Object(c.a)({},e),{},{group_at:e.group_at?fv(pm()(e.group_at),!0):void 0})},IQ=function(e){if(e&&(e.temp||e.rh)){var t=1.8*(e.temp||0)+32;return 4353.86/(29.92/((e.rh||0)/100*Math.exp(17.863-9621/(t+460)))-1)}return null},TQ=function(e){var t=IQ(e);return null!==t?t/7:null},RQ=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{trade_id:(null===(t=e.trade)||void 0===t?void 0:t.id)||e.trade,trade:void 0,job:void 0,created_by:void 0})},DQ=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{area_manager_user_id:null===(t=e.area_manager)||void 0===t?void 0:t.id,job:void 0,area_manager:void 0})},MQ=function(e){return Object(c.a)(Object(c.a)({},e),{},{secondary_damage:e.secondary_damage?"1":"0",area_manager_contacted:e.area_manager_contacted?"1":"0",heavy_furniture:e.heavy_furniture?"1":"0",truck_required:e.truck_required?"1":"0",disposal:e.disposal?parseFloat(e.disposal):null,area_manager:e.area_manager_user,area_manager_user:void 0})},LQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/rooms"),EQ(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),PQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/jobs/".concat(t,"/rooms/").concat(n),EQ(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),FQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/rooms/").concat(n,"/duplicate"),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),UQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/jobs/".concat(t,"/rooms/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/jobs/".concat(t,"/rooms")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),VQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/readings"),AQ(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),JQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/jobs/".concat(t,"/readings")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/moisture-areas"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/jobs/".concat(t,"/moisture-areas/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),GQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/jobs/".concat(t,"/moisture-areas/").concat(n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),WQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/jobs/".concat(t,"/moisture-areas")));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),HQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/jobs/surface-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),YQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/flooring-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),QQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/flooring-subtypes",Object(c.a)({flooring_type_id:t},n)));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),KQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/carpet-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),ZQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/carpet-ages",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),XQ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/carpet-construction-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$Q=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/carpet-face-fibres",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),eK=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/underlay-types",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),tK=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/assessment-reports/non-restorable-reasons",t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),nK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/work_categories",Object(c.a)({service_id:t},n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),rK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/works"),Object(c.a)({job_room_id:n},r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),aK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/works/").concat(n),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),oK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/jobs/".concat(t,"/works/search"),Object(c.a)({job_room_id:n},r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),iK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/jobs/".concat(t,"/works/").concat(n),{job_room_id:r}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),cK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("/v1/jobs/".concat(t,"/works/bulk"),{job_room_id:r,job_work_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),sK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.post("/v1/jobs/".concat(t,"/works/copy-to-room"),Object(c.a)({from_room_id:n,to_room_id:r},a)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r,a){return e.apply(this,arguments)}}(),lK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/works",{work_category_id:t,service_id:n}));case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),uK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("/v1/work_groups/search",Object(c.a)({job_service_id:t,floor_type_id:n},r)));case 1:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),dK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/rooms/").concat(n,"/floor-plan"),r);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),pK=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/services",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),hK=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/trades");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),bK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/third-party-trades"),RQ(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),fK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/jobs/".concat(t,"/third-party-trades/").concat(n),RQ(r));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),mK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/jobs/".concat(t,"/third-party-trades/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),jK=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/third-party-trades"));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),vK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/jobs/".concat(t,"/job-additional-works"),DQ(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),OK=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/".concat(t,"/job-additional-works"),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),gK="Steamatic/WaterForm/SET_SURFACE_TYPE",xK="Steamatic/WaterForm/SET_FLOOR_TYPE",yK="Steamatic/WaterForm/SET_FLOOR_SUB_TYPE",_K="Steamatic/WaterForm/SET_CARPET_TYPE",wK="Steamatic/WaterForm/SET_CARPET_AGES",SK="Steamatic/WaterForm/SET_CARPET_CONSTRUCT_TYPE",kK="Steamatic/WaterForm/SET_CARPET_FACE_FIBER",CK="Steamatic/WaterForm/SET_UNDERLAY_TYPE",NK="Steamatic/WaterForm/SET_NON_RESTORABLE_REASON",EK="Steamatic/WaterForm/SET_SERVICE",AK="Steamatic/WaterForm/SET_PRE_START_CHECK",IK="Steamatic/WaterForm/SET_GENERAL_AUTHORITY",TK="Steamatic/WaterForm/SET_WORK_COMPLETION",RK="Steamatic/WaterForm/SET_TRADE",DK={surfaceTypes:[],floorTypes:[],floorSubTypes:{},carpetTypes:[],carpetAges:[],carpetConstructTypes:[],carpetFaceFyber:[],underlayTypes:[],services:[],trades:[],nonRestroableReasons:[]},MK=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:DK,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case gK:return Object(c.a)(Object(c.a)({},e),{},{surfaceTypes:t.payload});case xK:return Object(c.a)(Object(c.a)({},e),{},{floorTypes:t.payload});case yK:return Object(c.a)(Object(c.a)({},e),{},{floorSubTypes:Object(c.a)(Object(c.a)({},e.floorSubTypes),{},Object(k.a)({},t.payload.floorTypeId,t.payload.data))});case _K:return Object(c.a)(Object(c.a)({},e),{},{carpetTypes:t.payload});case wK:return Object(c.a)(Object(c.a)({},e),{},{carpetAges:t.payload});case SK:return Object(c.a)(Object(c.a)({},e),{},{carpetConstructTypes:t.payload});case kK:return Object(c.a)(Object(c.a)({},e),{},{carpetFaceFyber:t.payload});case CK:return Object(c.a)(Object(c.a)({},e),{},{underlayTypes:t.payload});case NK:return Object(c.a)(Object(c.a)({},e),{},{nonRestroableReasons:t.payload});case EK:return Object(c.a)(Object(c.a)({},e),{},{services:t.payload});case AK:return Object(c.a)(Object(c.a)({},e),{},{preStartCheck:t.payload});case IK:return Object(c.a)(Object(c.a)({},e),{},{generalAuthority:t.payload});case TK:return Object(c.a)(Object(c.a)({},e),{},{workCompletion:t.payload});case RK:return Object(c.a)(Object(c.a)({},e),{},{trades:t.payload});default:return e}},LK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.surfaceTypes.length&&!t){n.next=6;break}return n.next=4,HQ(e);case 4:o=n.sent,r({type:gK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},PK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.floorTypes.length&&!t){n.next=6;break}return n.next=4,YQ(e);case 4:o=n.sent,r({type:xK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},FK=function(e,t,n){return function(){var r=Object(lj.a)(sj.a.mark((function r(a,o){var i,c,s;return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(c=o(),(null===(i=c.waterForm.floorSubTypes[e])||void 0===i?void 0:i.length)&&!n){r.next=6;break}return r.next=4,QQ(e,t);case 4:s=r.sent,a({type:yK,payload:{floorTypeId:e,data:s.data}});case 6:case"end":return r.stop()}}),r)})));return function(e,t){return r.apply(this,arguments)}}()},UK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetTypes.length&&!t){n.next=6;break}return n.next=4,KQ(e);case 4:o=n.sent,r({type:_K,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},BK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetAges.length&&!t){n.next=6;break}return n.next=4,ZQ(e);case 4:o=n.sent,r({type:wK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},VK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetConstructTypes.length&&!t){n.next=6;break}return n.next=4,XQ(e);case 4:o=n.sent,r({type:SK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},JK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.carpetFaceFyber.length&&!t){n.next=6;break}return n.next=4,$Q(e);case 4:o=n.sent,r({type:kK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},qK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.underlayTypes.length&&!t){n.next=6;break}return n.next=4,eK(e);case 4:o=n.sent,r({type:CK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},zK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.nonRestroableReasons.length&&!t){n.next=6;break}return n.next=4,tK(e);case 4:o=n.sent,r({type:NK,payload:o.data});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},GK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(a().waterForm.services.length&&!t){n.next=6;break}return n.next=4,pK(e);case 4:o=n.sent,r({type:EK,payload:o});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},WK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(void 0===(o=a()).waterForm.preStartCheck||o.waterForm.preStartCheck&&o.waterForm.preStartCheck.job.id!==e.id||t)){n.next=6;break}return n.next=4,zH(e.id,AH.PRE_START_CHECK);case 4:i=n.sent,r({type:AK,payload:i?PH(i,e):null});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},HK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(void 0===(o=a()).waterForm.generalAuthority||o.waterForm.generalAuthority&&o.waterForm.generalAuthority.job.id!==e.id||t)){n.next=6;break}return n.next=4,zH(e.id,AH.GENERAL_AUTHORITY);case 4:i=n.sent,r({type:IK,payload:i?PH(i,e):null});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()},YK=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){var o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(void 0===(o=a()).waterForm.workCompletion||o.waterForm.workCompletion&&o.waterForm.workCompletion.job.id!==e.id||t)){n.next=6;break}return n.next=4,zH(e.id,AH.WORK_COMPLETION);case 4:i=n.sent,r({type:TK,payload:i?PH(i,e):null});case 6:case"end":return n.stop()}}),n)})));return function(e,t){return n.apply(this,arguments)}}()};function QK(){var e=Object(f.a)(["\n  input[type='radio']{\n    position: relative; top: 2px; margin-right: 5px;\n  }\n"]);return QK=function(){return e},e}var KK=y.default.div(QK()),ZK="PRE_START_CHECK_FORM",XK=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobContract:e.props.jobContract},e.signaturePad={},e.validateSignature=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(e,t){if(e.isEmpty())throw e.setInvalid(),n=!1,Oj(uj.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.lockSignature=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:return t.next=6,e.uploadSignature(n);case 6:r=t.sent,n.signatures=n.signatures.concat(r);case 8:return t.prev=8,setTimeout((function(){e.setState({working:!1})}),100),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e.uploadSignature=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],j.a.forEach(e.signaturePad,(function(t,a){var o,i={field_data:JSON.stringify(j.a.get(n.meta,"signature.".concat(a,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:hO.getContactName(e.customer),customer_email:null===(o=e.customer)||void 0===o?void 0:o.email};r.push(aY(a,t.toDataURL(),n.id,i,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(a=e.customer)||void 0===a?void 0:a.email)){t.next=13;break}return t.next=4,e._sendEmail(o,n);case 4:return t.t0=r,t.next=7,YH(n.id);case 7:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),t.abrupt("return",i);case 13:return Oj(uj.Danger,"Customer email address is not set"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:hO.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.abrupt("return",nY(r.id,s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.saveContract=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=e.props,o=a.user,i=a.job,c=a.dispatch,t.prev=1,s=null,t.next=13;break;case 7:s=t.sent,t.next=11;break;case 10:s=n;case 11:t.next=21;break;case 13:if(!o){t.next=20;break}return t.next=16,WH(e.props.job.id,n.template.contract.id,{field_data:JSON.stringify(r),contract_date:pm()().format(av)});case 16:s=t.sent,c(WK(i,!0)),t.next=21;break;case 20:s=n;case 21:if(!s){t.next=37;break}if(o&&(s=PH(s,i)),"1"!==r.non_restoreable_floor_covering){t.next=36;break}if(!o){t.next=34;break}return t.prev=25,t.next=28,e.sendEmail(s);case 28:t.next=32;break;case 30:t.prev=30,t.t0=t.catch(25);case 32:t.next=36;break;case 34:return t.next=36,e.lockSignature(s);case 36:e.setState({jobContract:s});case 37:t.next=42;break;case 39:t.prev=39,t.t1=t.catch(1),console.log(t.t1);case 42:case"end":return t.stop()}}),t,null,[[1,39],[25,30]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:if(!e.state.jobContract){t.next=9;break}return t.next=7,e.saveContract(e.state.jobContract,n);case 7:t.next=14;break;case 9:return t.next=11,e.getJobContract();case 11:return r=t.sent,t.next=14,e.saveContract(r,n);case 14:return t.prev=14,e.setState({working:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,,14,17]])})));return function(e){return t.apply(this,arguments)}}(),e.getJobContract=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FH(AH.PRE_START_CHECK);case 2:return n=t.sent[0],t.next=5,BH(n.id);case 5:return r=t.sent,t.abrupt("return",{job:e.props.job,type:AH.PRE_START_CHECK,template:r});case 7:case"end":return t.stop()}}),t)}))),e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e}return Object(l.a)(n,[{key:"extractContact",value:function(e){var t=this.props.jobContacts;return zy.extractContact(e,t)}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.job,o=n.formData,i=void 0===o?{}:o,c=n.user,s=n.submitting,l=n.locked,u=this.state,d=u.working,p=u.jobContract,h=j.a.find(null===p||void 0===p?void 0:p.signatures,{type:"customer"});return Object(a.jsxs)(KK,{children:[(s||d)&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit(this.onSubmit),children:[!!c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("section",{children:[Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{children:"Date of Loss:"})}),Object(a.jsx)("div",{className:"col",children:r.date_of_loss?r.date_of_loss.format(iv):"Date not available"})]})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"pt-2",children:"Cause of Loss:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"cause_of_loss",component:gq,validate:Dv,disabled:l||!c})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"pt-2",children:"Origin of Damage:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"origin_of_damage",component:yg,type:"text",validate:Dv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Problem Source Repaired:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"source_repaired",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"},{value:"-1",label:"Not Applicable"}],disabled:l||!c})})]}),"0"===i.source_repaired&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"pt-2",children:"Comments:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"source_repaired_comments",component:gq,validate:Dv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Category:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"category_id",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"1",label:"Cat 1 (Clean)"},{value:"2",label:"Cat 2 (Grey)"},{value:"3",label:"Cat 3 (Black)"},{value:"-1",label:"N/A"}],disabled:l||!c})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Class:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"class_id",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"1",label:"Class 1"},{value:"2",label:"Class 2"},{value:"3",label:"Class 3"},{value:"4",label:"Class 4"}],disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Is Mould Damage Present?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"mould_present",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:l||!c})})]}),"1"===i.mould_present&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Is the mould damage related to the incident?"})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{children:Object(a.jsx)(Hv.a,{name:"mould_present_related",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:l||!c})}),"1"===i.mould_present_related&&Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"badge badge-warning",children:"Call the office to notify of mould!"})})]})]})})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Is the Property Habitable:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"property_habitable",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"1",label:"Yes"},{value:"0",label:"No"}],disabled:l||!c})})]}),"0"===i.property_habitable&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Reason:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"property_habitable_comments",component:gq,validate:Dv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Have you pointed out any pre-existing damage?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"pre_existing_damage_notified",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"},{value:"-1",label:"Not Applicable"}],disabled:l||!c})})]}),"1"===i.pre_existing_damage_notified&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Pre-existing damages:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"pre_existing_damage_comments",component:gq,validate:Dv,disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Has the work plan been explained to the customer as per below scope?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"work_plan_notified",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"},{value:"-1",label:"Not Applicable"}],disabled:l||!c})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Has non-restorable floor covering been identified on the premises?"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"non_restoreable_floor_covering",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],onChange:function(e){"0"===e.target.value&&delete t.signaturePad.customer},disabled:l||!c})})]}),"1"===i.non_restoreable_floor_covering&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Non-Restorable Areas:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"non_restoreable_floor_covering_comments",component:gq,disabled:l||!c})})]})]})]}),(!c||h)&&"1"===i.non_restoreable_floor_covering&&Object(a.jsxs)("section",{children:[!!c&&Object(a.jsx)("hr",{className:""}),!c&&i.non_restoreable_floor_covering_comments&&Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{className:"mr-3",children:"Non-Restorable Areas:"}),i.non_restoreable_floor_covering_comments]}),Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Customer Signature for Non-Restorable Floor Covering:"})}),Object(a.jsx)("p",{children:"I acknowledge that the list of non-restorable floor coverings is complete and accurate and if indicated will be removed from the property to process as per the Scope of Work."}),Object(a.jsx)("p",{children:"Authority is hereby given to Steamatic to remove the affected Non-Restorable Floor Covering(s) for disposal, knowing that the Non-Restorable Floor Covering(s) may not be replaced/covered by my Insurance Company or Steamatic."}),Object(a.jsxs)("div",{style:{maxWidth:"400px",margin:"auto"},children:[Object(a.jsx)(NY,{job:r,jobContract:p,bindings:{},type:"customer",onSignatureRender:this.onSignatureRender}),h&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Signed At: "}),pm()(h.created_at).format(lv)]})]})]}),!l&&c&&!h&&"1"===i.non_restoreable_floor_covering&&"1"===(null===p||void 0===p||null===(e=p.meta)||void 0===e?void 0:e.non_restoreable_floor_covering)&&(null===p||void 0===p?void 0:p.id)&&Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("p",{className:"text-center",children:Object(a.jsx)("a",{href:"/external/job/contract/".concat(p.hash),target:"_blank",className:"btn btn-outline-primary",children:"Get Customer Signature"})})]}),!l&&(c||"1"===i.non_restoreable_floor_covering&&!h)&&Object(a.jsxs)("section",{className:"print-hide",children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:s||d,children:["Save ",(s||d)&&Object(a.jsx)(Nv,{size:20})]})})]})]})]})}},{key:"customer",get:function(){return this.extractContact(tv.CUSTOMER)}}]),n}(p.PureComponent),$K=Object(sg.compose)(Object(jv.a)({form:ZK,enableReinitialize:!0,onSubmitFail:function(e){Oj(uj.Danger,"There are validation errors")}}),O.g,Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me,formData:Object(GM.a)(ZK)(e)}})))(XK);function eZ(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return eZ=function(){return e},e}var tZ=y.default.div(eZ()),nZ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(tZ,{className:"h-100 d-flex flex-column",children:this.props.children})}}]),n}(p.Component),rZ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.job,r=e.contacts,o=e.preStartCheck,i=e.locked,c=e.match.params.job_task_id;return Object(a.jsxs)(nZ,{children:[t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs/".concat(t.data.id,"/work-order/").concat(c,"/pre-start-check"),children:"Pre-Start Check"}),t.data&&r.data&&void 0!==o?Object(a.jsxs)("div",{className:"pr-4 pb-4",children:[Object(a.jsx)("h3",{className:"mb-5",children:Object(a.jsx)("strong",{children:"Pre-Start Check"})}),Object(a.jsx)($K,{job:t.data,locked:i,jobContacts:r.data,jobContract:o,initialValues:(null===o||void 0===o?void 0:o.meta)||n.getDefaultValue(t.data)})]}):Object(a.jsx)(Nv,{size:40})]})}}]),n}(p.PureComponent);rZ.getDefaultValue=function(e){return{cause_of_loss:e.cause_of_loss,source_repaired:"0",category_id:"1",class_id:"1",mould_present:"0",property_habitable:"1",pre_existing_damage_notified:"0",work_plan_notified:"0",non_restoreable_floor_covering:"0",non_restoreable_floor_covering_comments:""}};var aZ=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,preStartCheck:e.waterForm.preStartCheck,contacts:e.currentJobContacts}})))(rZ);function oZ(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return oZ=function(){return e},e}var iZ,cZ,sZ,lZ=y.default.div(oZ());(cZ=iZ||(iZ={}))[cZ["pre-start-check"]=AH.JOB_FORM_PRE_START_CHECK]="pre-start-check",cZ[cZ["work-completion"]=AH.JOB_FORM_WORK_COMPLETION]="work-completion",cZ[cZ.inventory=AH.JOB_FORM_CONTENTS_INVENTORY]="inventory",function(e){e["pre-start-check"]="Non-Restorable Floor Covering",e["work-completion"]="Statement of Work Complete",e.inventory="Contents Inventory"}(sZ||(sZ={}));var uZ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.addContract=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,a=r.match,o=r.job.data,e.setState({loading:!0,creating:!0}),n.prev=2,n.next=5,WH(o.id,t.id,{contract_date:pm()().format(av),field_data:JSON.stringify({contract:{date:new Date}})});case 5:i=n.sent,e.props.history.push("".concat(a.url,"/").concat(i.id));case 7:return n.prev=7,e.setState({loading:!1,creating:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[2,,7,10]])})))},e.loadContractsList=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.form_type,t.next=3,FH(iZ[n]);case 3:return r=t.sent,e.setState({contracts:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),e.loadJobContracts=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.job,o=r.match.params.form_type,!(null===(n=a.data)||void 0===n?void 0:n.id)){t.next=7;break}return t.next=4,JH(e.props.job.data.id,iZ[o]);case 4:return i=t.sent,e.setState({jobContracts:i}),t.abrupt("return",i);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),e._loadJobContracts=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContracts();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContracts=Qv()(e._loadJobContracts,100),e.onContractDelete=function(t){var n=e.state.jobContracts;e.setState({jobContracts:null===n||void 0===n?void 0:n.filter((function(e){return e.id!==t.id}))})},e.beforeContractSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(r,a,o){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.validate(a,o,e.props.user));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t,n,r=this,a=this.props,o=a.match.params,i=o.form_type,c=o.contract_id,s=a.job,l=e.match.params,u=l.form_type,d=l.contract_id,p=e.job;i!==u?(this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){r.setState({loading:!1})}))):((null===(t=p.data)||void 0===t?void 0:t.id)!==(null===(n=s.data)||void 0===n?void 0:n.id)||d&&!c)&&this.debouncedLoadJobContracts()}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params,t=e.id,n=e.contract_id,r=e.form_type;return n?Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)(v.b,{to:"/job/".concat(t,"/details"),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Job Details"})}),n&&Object(a.jsx)(v.b,{to:"/job/".concat(t,"/job-form/").concat(r),children:Object(a.jsx)("button",{className:"ml-3 btn btn-outline-primary",children:"View Forms"})})]}):null}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,r=e.contacts,o=e.match.params,i=o.contract_id,c=o.form_type,s=this.state,l=s.loading,u=s.creating,d=s.contracts,p=s.jobContracts,h=iZ[c],b=sZ[c];return Object(a.jsx)(lZ,{className:"h-100 d-flex flex-column",children:t.data&&r.data?Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(Nv,{size:40}),i?Object(a.jsx)(lZ,{className:"h-100",children:Object(a.jsx)(pQ,{type:h,job:t.data,jobContacts:r.data,beforeSubmit:this.beforeContractSubmit,beforeSign:n.validateSignatureMeta,defaultMeta:this.defaultMeta,contractId:+i,Sidebar:NQ})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"px-5 my-4 d-flex align-items-center",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:b})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end print-hide",children:Object(a.jsxs)("button",{className:"btn btn-primary position-relative",disabled:!(null===d||void 0===d?void 0:d.length),onClick:this.addContract(null===d||void 0===d?void 0:d[0]),children:[(!d||u)&&Object(a.jsx)(Nv,{size:30}),"Add New"]})})]}),Object(a.jsx)(lZ,{className:"flex-grow-1 h-100 px-3 pb-3",children:Object(a.jsx)(yQ,{job:t.data,data:p||[],onDelete:this.onContractDelete})})]})]}):Object(a.jsx)(Nv,{size:40})})}},{key:"render",value:function(){return Object(a.jsx)(MH,{customHeaderTitle:"Job Forms",sidebar:!1,contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}},{key:"defaultMeta",get:function(){var e=this.props,t=e.job,n=e.match.params.form_type;switch(iZ[n]){case AH.JOB_FORM_PRE_START_CHECK:return Object(c.a)(Object(c.a)({},rZ.getDefaultValue(t.data)),{},{non_restoreable_floor_covering:"1"})}}}]),n}(p.PureComponent);uZ.validate=function(e,t,n){var r={email_send_to:"email.send.to"},a={};j.a.forEach(r,(function(t,n){a[n]=j.a.get(e,t),j.a.isString(a[n])&&(a[n]=a[n].trim())}));var o={};return n&&(a.email_send_to?Jv(a.email_send_to)&&j.a.set(o,r.email_send_to,"Email format is not correct"):j.a.set(o,r.email_send_to,"This field is required")),!!j.a.isEmpty(o)||o},uZ.validateSignatureMeta=function(e,t,n,r){if(r.type===AH.JOB_FORM_WORK_COMPLETION){var a={satisfied:"signature."+e+".meta.satisfied",acknowledged:"signature."+e+".meta.acknowledged",responsible_party:"signature."+e+".meta.responsible_party",agent_relation:"signature."+e+".meta.agent_relation",agent_name:"signature."+e+".meta.agent_name"},o={};j.a.forEach(a,(function(e,n){o[n]=j.a.get(t,e),j.a.isString(o[n])&&(o[n]=o[n].trim())}));var i={};return o.satisfied||j.a.set(i,a.satisfied,"This field is required"),o.acknowledged||j.a.set(i,a.acknowledged,"This field is required"),o.responsible_party||j.a.set(i,a.responsible_party,"This field is required"),o.agent_name||j.a.set(i,a.agent_name,"This field is required"),"agent"!==o.responsible_party||o.agent_relation||j.a.set(i,a.agent_relation,"This field is required"),!!j.a.isEmpty(i)||i}return!0};var dZ=Object(sg.compose)(O.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(uZ);function pZ(){var e=Object(f.a)(["\n  "," {\n    font-weight: ",";\n  }\n  ",", "," {\n    ",":first-of-type {\n      \n    }\n  }\n"]);return pZ=function(){return e},e}function hZ(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  th:first-child {\n    \n  }\n  th:nth-child(2) ~ th {\n    text-align: right;\n  }\n  tbody tr {\n    td:first-child {\n      \n    }\n    td:nth-child(2) {\n      font-weight: ",";\n    }\n    td:nth-child(3) ~ td {\n      text-align: right;\n    }\n  }\n"]);return hZ=function(){return e},e}Object(y.default)(tU)(hZ(),lm.normal,lm.bold);var bZ=Object(y.default)(eU)(pZ(),CF,lm.normal,AF,IF,EF),fZ="Steamatic/Finance/Invoices/LOAD",mZ="Steamatic/Finance/Invoices/LOAD_COMPLETE",jZ="Steamatic/Finance/Invoices/ERROR",vZ=Ek({load:fZ,loadComplete:mZ,reset:"Steamatic/Finance/Invoices/RESET",error:jZ}),OZ=function(e,t){switch(e){case am.draft:return JB.getDraft(t);case am.unpaid:return JB.getUnpaid(t);case am.overdue:return JB.getOverdue(t);case am.paid:return JB.getPaid(t);default:return JB.getAll(t)}},gZ=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:fZ}),n.prev=1,n.next=4,OZ(e,t);case 4:a=n.sent,r({type:mZ,payload:a}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r({type:jZ,payload:n.t0}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},xZ=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:fZ}),t.prev=1,r=wZ(e.type),t.next=5,JB.search({id:e.term,virtual_status:r.virtualStatus,page:e.page,status:r.status});case 5:a=t.sent,n({type:mZ,payload:a}),t.next=13;break;case 9:throw t.prev=9,t.t0=t.catch(1),n({type:jZ,payload:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},yZ=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:fZ}),t.prev=1,r=wZ(null===e||void 0===e?void 0:e.virtual_status),a=Object(c.a)({},e),"draft"===e.virtual_status&&(a.status=r.status,a.virtual_status=""),t.next=7,JB.getFilterInvoices(a);case 7:o=t.sent,n({type:mZ,payload:o}),t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(1),n({type:jZ,payload:t.t0}),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()},_Z=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:fZ}),t.prev=1,r=wZ(e.type),a={virtual_status:r.virtualStatus,page:e.page?e.page:1,per_page:20,sortby:"desc"},"draft"===e.type&&(a.status=r.status),t.next=7,JB.search(a);case 7:o=t.sent,n({type:mZ,payload:o}),t.next=15;break;case 11:throw t.prev=11,t.t0=t.catch(1),n({type:jZ,payload:t.t0}),t.t0;case 15:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}()};function wZ(e){var t=e&&am[e],n=e&&im[e];return e===im.draft&&(t=void 0,n=e),{virtualStatus:t,status:n}}function SZ(){var e=Object(f.a)(["\n  margin: 45px auto;\n"]);return SZ=function(){return e},e}y.default.div(SZ());var kZ=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadInvoices=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,!(o=r.match.params.id)){t.next=4;break}return t.next=4,a(yZ({per_page:10,page:n||1,sortby:"desc",jobs:[o]}));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePagination=function(t){return e.loadInvoices(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadInvoices()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match,n=e.match.params.id;t.params.id!==n&&this.loadInvoices()}},{key:"renderTags",value:function(e){var t=am.all;return wm(e).map((function(e){return"approved"===e&&"all"===t?Object(a.jsx)("div",{},e):Object(a.jsx)(KN,{tag:{name:hm[e],color:Sm(e)}},e)}))}},{key:"renderInvoicesRows",value:function(e){var t=this,n=this.props.invoices.data.data;return n?n.map((function(e){return Object(a.jsxs)(IF,{to:{pathname:"/finance/invoices/details/".concat(e.id)},children:[Object(a.jsxs)(EF,{children:["#",e.id]}),Object(a.jsxs)(EF,{children:[Object(a.jsx)("span",{children:e.recipient_name}),t.renderTags(e)]}),Object(a.jsx)(EF,{children:Object(a.jsx)(kS.a,{format:iv,children:e.due_at})}),Object(a.jsx)(EF,{children:vm(e.total_amount)}),Object(a.jsx)(EF,{children:vm(e.balance_due)})]},e.id)})):null}},{key:"renderNoInvoices",value:function(e){return Object(a.jsx)(AF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Invoices..."})})}},{key:"render",value:function(){var e=this,t=this.props.invoices,n=t.data,r=t.loading,o=(null===n||void 0===n?void 0:n.data)&&n.data.length>0||!1;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[r&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(JC,{children:[Object(a.jsx)("div",{className:"pb-3"}),Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Invoice"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Due Date"}),Object(a.jsx)(CF,{children:"Total Amount"}),Object(a.jsx)(CF,{children:"Balance Due"})]})}),Object(a.jsx)(NF,{children:o?e.renderInvoicesRows(t):e.renderNoInvoices(t)})]}),o&&(null===n||void 0===n?void 0:n.pagination)&&Object(a.jsx)(oC,{pagination:null===n||void 0===n?void 0:n.pagination,onChange:e.handlePagination})]})})]})}})}}]),n}(p.PureComponent),CZ=Object(sg.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,invoices:e.invoices}})),O.g)(kZ),NZ={hydrate:function(e){var t=Object(c.a)(Object(c.a)({},e.data),{},{date:pv(e.data.date)});return e.data.job&&(t.job=Vx(e.data.job)),{data:t}},dehydrate:function(e){return Object(c.a)(Object(c.a)({},lB(e)),{},{credit_note_items:[],reference:e.reference?e.reference:void 0})},dehydrateItem:dB},EZ="/v1/finance/credit-notes",AZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(EZ,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",NZ.hydrate(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),IZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("".concat(EZ,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),TZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=NZ.dehydrateItem(n),e.next=3,ev.post("".concat(EZ,"/").concat(t,"/items"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),RZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=NZ.dehydrateItem(r),e.next=3,ev.patch("".concat(EZ,"/").concat(t,"/items/").concat(n),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),DZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(EZ,"/").concat(t,"/items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),MZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(EZ,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),LZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(EZ,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),PZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(EZ,"/").concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),FZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(EZ,"/").concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),UZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(EZ,"/").concat(t,"/approve-requests"),{approver_list:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),BZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("".concat(EZ,"/").concat(t),{recipient_address:n,recipient_name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),VZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(EZ,"/").concat(t,"/approve"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),JZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(EZ,"/").concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),qZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(EZ,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),zZ=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(EZ,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),GZ=jB("".concat(EZ,"/listings"),{getDraft:"draft",getPendingApproval:"pending-approval",getApproved:"approved",getAll:"all",search:"search"}),WZ=Object(c.a)(Object(c.a)({},GZ),{},{findById:AZ,create:function(e){var t=NZ.dehydrate(e);return ev.post(EZ,t).then(NZ.hydrate).catch((function(e){return Promise.reject(uB(e))}))},update:function(e,t){var n=NZ.dehydrate(t);return ev.patch("".concat(EZ,"/").concat(e),n).then(NZ.hydrate).catch((function(e){return Promise.reject(uB(e))}))},createItem:TZ,updateItem:RZ,removeItem:DZ,addNoteToCreditNote:MZ,removeNoteFromCreditNote:LZ,getCreditNoteNotes:PZ,getApproverList:FZ,sendApproveRequest:UZ,adjustCreditNote:BZ,approveCreditNote:VZ,getCreditNoteTags:JZ,addTag:qZ,removeTag:zZ,remove:IZ,forPrint:function(e){return ev.downloadFile("".concat(EZ,"/").concat(e,"/document"),!1)},applyCreditNoteToInvoices:function(e,t){return ev.post("".concat(EZ,"/").concat(e,"/payment"),{payment_items:t})},getFilterCreditNotes:function(e){return ev.get("".concat(EZ,"/listings/search"),e)},creditNoteItemsPositionUpdate:function(e,t){return ev.post("".concat(EZ,"/").concat(e,"/items/positions"),t)},creditNoteDeclined:function(e,t){return ev.post("".concat(EZ,"/").concat(e,"/declined"),t)}}),HZ={load:"Steamatic/Finance/CreditNotes/LOAD",loadComplete:"Steamatic/Finance/CreditNotes/LOAD_COMPLETE",reset:"Steamatic/Finance/CreditNotes/RESET",error:"Steamatic/Finance/CreditNotes/ERROR"},YZ=Ek(HZ),QZ=Ak(HZ),KZ=function(e,t){switch(e){case im.draft:return WZ.getDraft(t);case am.pending_approval:return WZ.getPendingApproval(t);case im.approved:return WZ.getApproved(t);default:return WZ.getAll(t)}},ZZ=(QZ.reset(),function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r(QZ.load()),n.prev=1,n.next=4,KZ(e,t);case 4:a=n.sent,r(QZ.loadComplete(a)),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r(QZ.error(n.t0)),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()}),XZ=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(QZ.load()),t.prev=1,t.next=4,WZ.getFilterCreditNotes(e);case 4:r=t.sent,n(QZ.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(QZ.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},$Z=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(QZ.load()),t.prev=1,t.next=4,WZ.search(e);case 4:r=t.sent,n(QZ.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(QZ.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},eX=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).loadCreditNotes=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.dispatch,(o=r.match.params.id)&&a(XZ({per_page:10,page:n||1,sortby:"desc",jobs:[o]}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handlePagination=function(t){e.loadCreditNotes(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadCreditNotes()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match,n=e.match.params.id;t.params.id!==n&&this.loadCreditNotes()}},{key:"renderTags",value:function(e){return wm(e,[]).map((function(e){return Object(a.jsx)(KN,{tag:{name:hm[e],color:Sm(e)}},e)}))}},{key:"renderCreditNotesRows",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsxs)(IF,{to:{pathname:"/finance/credit-notes/details/".concat(e.id)},children:[Object(a.jsxs)(EF,{children:["CN #",e.id]}),Object(a.jsxs)(EF,{children:[Object(a.jsx)("span",{children:e.recipient_name}),t.renderTags(e)]}),Object(a.jsx)(EF,{children:Object(a.jsx)(kS.a,{format:iv,children:e.date})}),Object(a.jsx)(EF,{children:vm(e.total_amount)})]},"cn-tr-".concat(e.id))})):null}},{key:"renderNoCreditNotes",value:function(){return Object(a.jsx)(AF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Credit Notes..."})})}},{key:"render",value:function(){var e=this,t=this.props.creditNotes,n=t.loading,r=t.data,o=(null===r||void 0===r?void 0:r.data)&&r.data.length>0||!1;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(JC,{children:[Object(a.jsx)("div",{className:"pb-3"}),Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Credit Note"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Date"}),Object(a.jsx)(CF,{children:"Total Amount"})]})}),Object(a.jsx)(NF,{children:o?e.renderCreditNotesRows((null===r||void 0===r?void 0:r.data)||[]):e.renderNoCreditNotes()})]}),o&&(null===r||void 0===r?void 0:r.pagination)&&Object(a.jsx)(oC,{pagination:r.pagination,onChange:e.handlePagination})]})})]})}})}}]),n}(p.PureComponent),tX=Object(sg.compose)(Object(b.b)((function(e){return{currentJob:e.currentJob,creditNotes:e.creditNotes}})),O.g)(eX);function nX(){var e=Object(f.a)(["\n  min-height: 100%;\n"]);return nX=function(){return e},e}function rX(){var e=Object(f.a)(["\n  position: relative;\n"]);return rX=function(){return e},e}var aX=y.default.div(rX()),oX=y.default.div(nX()),iX=function(e){return"true"===bj.parse(e.search,{ignoreQueryPrefix:!0}).contacts},cX=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobInvoices:null},e.getJobInvoices=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!+(n=e.props.match.params.id)){t.next=6;break}return t.next=4,JB.getAll({job_id:n});case 4:r=t.sent,e.setState({jobInvoices:r.data});case 6:case"end":return t.stop()}}),t)}))),e.isCreateNewJob=function(){return"new"===e.props.match.params.id.toLowerCase()},e.isTemplated=function(){var t=e.props.job.data;return zy.isEmailTemplate(t)},e.fetchJob=function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0],n=arguments.length>1?arguments[1]:void 0,r=e.props.match.params.id;return e.isCreateNewJob()?Promise.resolve(!0):Promise.all([e.props.dispatch(BD(r,n)),e.props.dispatch(DP(r,n))]).then((function(n){var r=Object(w.a)(n,1)[0];Rm.status("Job "+zy.getJobName(r)),t&&e.props.dispatch(Object(Wv.b)(CP,e.props.job.data))}))},e.debouncedFetchJob=Object(m.debounce)((function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.fetchJob(t,!0)}),500),e.joinJobChannels=function(){var t=e.props,n=t.match,r=t.user,a=n.params.id;Rm.status("Job #".concat(a)),Nj().private("job-".concat(a)).listen(".job.updated",(function(t){r.id!==t.notification.sender.id&&e.debouncedFetchJob(!0)}))},e.redirectToNotes=function(){e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?note=true"))},e.redirectToReply=function(){e.props.history.push("/job/".concat(e.props.match.params.id,"/notes-and-replies?reply=true"))},e.toggleContacts=function(){var t=e.props,n=t.history,r=t.location,a=t.match,o=bj.stringify({contacts:!iX(r)});n.push("/job/".concat(a.params.id,"/details?").concat(o))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.joinJobChannels(),this.isCreateNewJob()||(this.fetchJob(),this.getJobInvoices())}},{key:"componentWillUnmount",value:function(){var e=this.props.match.params.id;this.props.dispatch(VD()),this.props.dispatch(MP()),Nj().leave("job-".concat(e)),Rm.reset()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.id,n=e.match.params.id;t!==n&&(Nj().leave("job-".concat(n)),this.joinJobChannels(),this.props.dispatch(VD()),this.props.dispatch(MP()),this.isCreateNewJob()||(this.fetchJob(),this.getJobInvoices()))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getJobsMenuItems",value:function(){return[{path:"/jobs/inbox",icon:Xf.DrawerOpen,isActive:this.isActive("/jobs/inbox"),hint:"Inbox"},{path:"/jobs/mine",icon:Xf.Hand,isActive:this.isActive("/jobs/mine"),hint:"Mine"},{path:"/jobs/all",icon:Xf.ManCircle,isActive:this.isActive("/jobs/all"),hint:"All active jobs"},{path:"/jobs/closed",icon:Xf.Archive,isActive:this.isActive("/jobs/closed"),hint:"Closed"}]}},{key:"getJobsSubmenuItems",value:function(e){if(this.props.job.loading)return[];var t=this.props.match.params.id;return this.isCreateNewJob()||this.isTemplated()?[{path:"/job/".concat(t,"/details"),label:"Job Details",isActive:this.isActive("/job/".concat(t,"/details"))}]:[{path:"/job/".concat(t,"/details"),label:"Job Details",isActive:this.isActive("/job/".concat(t,"/details")),removed:!e.has(vx.JOBS_VIEW)},{path:"/job/".concat(t,"/notes-and-replies"),label:"Notes and Replies",isActive:this.isActive("/job/".concat(t,"/notes-and-replies")),removed:!e.has(vx.JOBS_VIEW)},{path:"/job/".concat(t,"/schedule-and-tasks"),label:"Schedule & Tasks",isActive:this.isActive("/job/".concat(t,"/schedule-and-tasks")),removed:!e.has(vx.OPERATIONS_TASKS_VIEW)},{path:"/usage-and-actuals/".concat(t),label:"Job Costings",isActive:this.isActive("/usage-and-actuals/".concat(t)),removed:!e.has(vx.ASSESSMENT_REPORTS_VIEW)},{path:"/job/".concat(t,"/storage-and-inventory"),label:"Storage & Inventory",isActive:this.isActive("/job/".concat(t,"/storage-and-inventory")),removed:!0},{path:"/job/".concat(t,"/site-survey"),label:"Site Survey",isActive:this.isActive("/job/".concat(t,"/site-survey")),removed:!e.has(vx.JOBS_VIEW)},{path:"/job/".concat(t,"/photos"),label:"Photos",isActive:this.isActive("/job/".concat(t,"/photos")),removed:!e.has(vx.JOBS_PHOTOS_VIEW)},{path:"/job/".concat(t,"/documents"),label:"Documents",isActive:this.isActive("/job/".concat(t,"/documents")),removed:!e.has(vx.JOBS_DOCUMENTS_VIEW)},{path:"/job/".concat(t,"/invoices"),label:"Invoices",isActive:this.isActive("/job/".concat(t,"/invoices"))},{path:"/job/".concat(t,"/credit-notes"),label:"Credit Notes",isActive:this.isActive("/job/".concat(t,"/credit-notes"))},{header:"Job Forms",path:"/job/".concat(t,"/job-form/pre-start-check"),label:"Non-Restorable Floor Covering",isActive:this.isActive("/job/".concat(t,"/job-form/pre-start-check"))},{path:"/job/".concat(t,"/job-form/inventory"),label:"Contents Inventory",isActive:this.isActive("/job/".concat(t,"/job-form/inventory"))},{path:"/job/".concat(t,"/job-form/work-completion"),label:"Work Complete",isActive:this.isActive("/job/".concat(t,"/job-form/work-completion"))},{header:"On-Site Data & Contracts",path:"/job/".concat(t,"/general-authority"),label:"General Authority",isActive:this.isActive("/job/".concat(t,"/general-authority")),removed:!e.has(vx.JOBS_GENERAL_AUTHORITY_CREATE)},{path:"/job/".concat(t,"/job-contract"),label:"Job Contracts",isActive:this.isActive("/job/".concat(t,"/job-contract"))}].filter((function(e){return!e.removed}))}},{key:"renderReferenceBarContacts",value:function(){return this.props.contacts.data?this.props.contacts.data.map((function(e,t){return Object(a.jsx)(AD,{contact:e},"cnt-".concat(e.type,"-").concat(t))})):null}},{key:"render",value:function(){var e,t,n,r=this,o=this.props,i=o.match,c=o.job,s=c.data,l=c.loading,u=o.currentJobPhotos.selectedPhotos,d=o.currentJobDocuments.selectedDocuments,p=s,h=this.isCreateNewJob(),b=p&&(this.isActive("/job/".concat(p.id,"/job-contract/:contract_id"))||this.isActive("/job/".concat(p.id,"/job-form/:type/:contract_id"))),f=p&&(b||this.isActive("/job/".concat(p.id,"/general-authority"))||this.isActive("/job/".concat(p.id,"/job-contract"))||this.isActive("/job/".concat(p.id,"/job-form")));return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[!f&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs",children:"Jobs"}),null===(e=this.props.location)||void 0===e||null===(t=e.state)||void 0===t||null===(n=t.breadcrumbs)||void 0===n?void 0:n.map((function(e){return e&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label})})),!f&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(i.params.id),children:h?"Create New":zy.getJobName(p)}),Object(a.jsx)(Nk,{items:this.getJobsMenuItems()}),Object(a.jsx)(Cx.Consumer,{children:function(e){return Object(a.jsxs)(a.Fragment,{children:[!b&&Object(a.jsx)(nD,{items:r.getJobsSubmenuItems(e)}),Object(a.jsx)("div",{className:"flex-grow-1 h-100",children:Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(oX,{className:"d-flex flex-row min-100 ".concat(f?"h-100":""),children:[Object(a.jsxs)(aX,{className:"d-flex flex-column flex-grow-1",children:[r.isBlockingLoading&&Object(a.jsx)(Nv,{zIndex:200,size:40,color:_.white}),p&&!h&&!f&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(zB,{onNoteAdd:r.redirectToNotes,onEmailReply:r.redirectToReply,onContactsToggle:r.toggleContacts,onUpdate:r.debouncedFetchJob,job:p,jobInvoices:r.state.jobInvoices}),Object(a.jsx)(aV,{job:p,disabled:!e.has(vx.JOBS_MANAGE_TAGS),loading:l})]}),(h||p)&&Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/details"),component:FP}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/notes-and-replies"),component:$L}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/schedule-and-tasks"),component:Cz}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/site-survey"),component:_U}),e.has(vx.JOBS_PHOTOS_VIEW)&&Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/photos"),component:OJ}),e.has(vx.JOBS_DOCUMENTS_VIEW)&&Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/documents"),component:hG}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/invoices"),component:CZ}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/credit-notes"),component:tX}),Object(a.jsx)(O.b,{exact:!0,path:"".concat(i.path,"/general-authority"),component:bQ}),Object(a.jsx)(O.b,{path:"".concat(i.path,"/job-contract/:contract_id?"),component:CQ}),Object(a.jsx)(O.b,{path:"".concat(i.path,"/job-form/:form_type?/:contract_id?"),component:dZ}),Object(a.jsx)(O.a,{to:"".concat(i.url,"/notes-and-replies")})]})]}),!f&&Object(a.jsxs)(iD,{children:[l&&Object(a.jsx)(Nv,{size:40,color:_.gray1}),p&&!r.isCreateNewJob()&&0===u.length&&0===d.length&&Object(a.jsxs)(a.Fragment,{children:[r.renderReferenceBarContacts(),Object(a.jsx)(qM,{job:p,contacts:r.props.contacts.data||[],onUpdate:r.debouncedFetchJob}),p.previous_jobs&&p.previous_jobs.length>0&&Object(a.jsx)(zM,{items:p.previous_jobs}),Object(a.jsx)(OD,{financials:{}})]}),p&&u.length>0&&Object(a.jsx)(AJ,{job:p}),p&&d.length>0&&Object(a.jsx)(_G,{job:p})]})]})})})]})}})]},i.params.id)}},{key:"isBlockingLoading",get:function(){var e=this.props,t=e.job,n=e.match;return t.loading&&(!t.data||String(t.data.id)!==n.params.id)}}]),n}(p.Component),sX=Object(sg.compose)(Object(b.b)((function(e){return{job:e.currentJob,contacts:e.currentJobContacts,currentJobPhotos:e.currentJobPhotos,currentJobDocuments:e.currentJobDocuments,user:e.user.me}})),O.g)(cX);function lX(){var e=Object(f.a)(["\n  width: 30px;\n  height: 30px;\n  border-radius: 4px;\n  background-color: ",";\n  background-image: url(",");\n  background-size: cover;\n  background-position: center;\n  margin: 0 0 0 10px;\n  text-transform: uppercase;\n  justify-content: center;\n  display: flex;\n  align-items: center;\n  color: ",";\n  overflow: hidden;\n  position: relative;\n  cursor: ",";\n\n  > input {\n    opacity: 0;\n    cursor: pointer;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n  }\n"]);return lX=function(){return e},e}var uX=y.default.label(lX(),_.green0,(function(e){return e.backgroundImage}),_.white,(function(e){return e.active?"pointer":"unset"})),dX=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onClick=function(){var t=e.props,n=t.history,r=t.user;r.me&&n.push("/manage/user/".concat(r.me.id))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.user;return Object(a.jsx)(Cx.Consumer,{children:function(n){var r,o=n.has(vx.USERS_VIEW);return Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)(c8,{to:"/manage/user/".concat(null===t||void 0===t||null===(r=t.me)||void 0===r?void 0:r.id),className:"nav-link",children:"Settings"}),Object(a.jsx)(uX,{backgroundImage:t.me&&t.me.avatar&&t.me.avatar.url,active:o,onClick:o?e.onClick:void 0,children:t.me&&!t.me.avatar&&"".concat((t.me.first_name||" ")[0]).concat((t.me.last_name||" ")[0])})]})}})}}]),n}(p.PureComponent),pX=Object(sg.compose)(Object(b.b)((function(e){return{user:e.user}})),O.g)(dX),hX=n(581),bX=n(582),fX=n(556);function mX(e,t){var n=function(e,t){return function(){var n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(r.type){case t.loadComplete:return r.payload;case t.reset:return Object.assign({},e);case t.createItem:return n.items?Object.assign({},n,{items:[].concat(Object(aj.a)(n.items),[r.payload])}):Object.assign({},n,{items:[r.payload]});case t.updateItem:return n.items?Object.assign({},n,{items:n.items.map((function(e){return e.id===r.payload.id?Object(c.a)(Object(c.a)({},e),r.payload.data):e}))}):n;case t.updateItems:return n.items?Object.assign({},n,{items:r.payload}):n;case t.removeItem:return n.items?Object.assign({},n,{items:n.items.filter((function(e){return e.id!==r.payload.id}))}):n;case t.updateTotals:return Object.assign({},n,{sub_total:r.payload.sub_total,taxes:r.payload.taxes,amount_due:r.payload.amount_due,total_amount:r.payload.total_amount,gst:r.payload.gst||0,total_exclude_gst:r.payload.total_exclude_gst||0,total_include_gst:r.payload.total_include_gst||0});default:return n}}}(t,e);return Ek({load:e.load,loadComplete:e.loadComplete,reset:e.reset,error:e.error,customReducers:{data:n}})}var jX,vX,OX="invoice_item_",gX="Steamatic/Invoice/LOAD",xX="Steamatic/Invoice/LOAD_COMPLETE",yX="Steamatic/Invoice/RESET",_X="Steamatic/Invoice/ERROR",wX="Steamatic/Invoice/CREATE_ITEM",SX="Steamatic/Invoice/UPDATE_ITEM",kX="Steamatic/Invoice/UPDATE_ITEMS",CX="Steamatic/Invoice/REMOVE_ITEM",NX="Steamatic/Invoice/UPDATE_TOTALS",EX={},AX=mX({load:gX,loadComplete:xX,reset:yX,error:_X,createItem:wX,updateItem:SX,updateItems:kX,removeItem:CX,updateTotals:NX},EX),IX=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:gX,payload:{id:e}}),t.prev=1,!e){t.next=8;break}return t.next=5,JB.findById(e);case 5:r=t.sent,t.next=9;break;case 8:r={data:Object(c.a)({},EX)};case 9:return n({type:xX,payload:r.data}),t.abrupt("return",r.data);case 13:throw t.prev=13,t.t0=t.catch(1),n({type:_X,payload:t.t0}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},TX=function(e,t){return Dk(gX,xX,_X,(function(){return JB.update(e,t).then((function(e){return e.data}))}),{id:e})},RX=function(){return function(e,t){var n=t().invoice.data;return n&&n.id?JB.findById(n.id).then((function(t){e({type:NX,payload:t.data})})):Promise.reject("Invoice doesn't exist")}},DX=function(e){return function(t,n){t({type:NX,payload:e})}},MX=function(){var e={id:Object(m.uniqueId)(OX),total_amount:0,dirty:!0};return{type:wX,payload:e}},LX=function(e){return{type:wX,payload:e}},PX=function(e,t,n){return{type:SX,payload:{id:e,data:Object(c.a)(Object(c.a)({},t),{},{dirty:n})}}},FX=function(e){return{type:kX,payload:e}},UX=function(e){return function(t,n){var r=n().invoice.data;if(!r||!r.id)return Promise.reject("Invoice doesn't exist");var a=r.items.find((function(t){return t.id===e}));return a?Dv(a.gs_code)||Dv(a.description)||Dv(a.unit_cost)||Dv(a.quantity)||Dv(a.gl_account)||Dv(a.tax_rate)?Promise.reject("Validation errors"):(String(a.id).startsWith(OX)?JB.createItem(r.id,a):JB.updateItem(r.id,a.id,a)).then((function(n){t(PX(e,n.data,!1)),t(RX())})):Promise.reject("Item doesn't exist")}},BX=function(e){return function(t,n){var r=n().invoice.data;return r&&r.id?(t({type:CX,payload:{id:e}}),String(e).startsWith(OX)?Promise.resolve():JB.removeItem(r.id,e).then((function(){return t(RX())}))):Promise.reject("Invoice doesn't exist")}},VX=function(e){return function(t){return t({type:CX,payload:{id:e}}),Promise.resolve()}},JX="Steamatic/Finance/InvoicesInfo/LOAD",qX="Steamatic/Finance/InvoicesInfo/LOAD_COMPLETE",zX="Steamatic/Finance/InvoicesInfo/RESET",GX=Ek({load:JX,loadComplete:qX,reset:zX,error:"Steamatic/Finance/InvoicesInfo/ERROR"}),WX=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:JX}),e.prev=1,e.next=4,JB.getInfo();case 4:n=e.sent,t((r=n.data,{type:qX,payload:r})),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}var r}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()},HX="Steamatic/Finance/CreditNotesInfo/LOAD",YX="Steamatic/Finance/CreditNotesInfo/LOAD_COMPLETE",QX="Steamatic/Finance/CreditNotesInfo/RESET",KX=Ek({load:HX,loadComplete:YX,reset:QX,error:"Steamatic/Finance/CreditNotesInfo/ERROR"}),ZX="credite_note_item_",XX="Steamatic/CreditNote/LOAD",$X="Steamatic/CreditNote/LOAD_COMPLETE",e$="Steamatic/CreditNote/RESET",t$="Steamatic/CreditNote/ERROR",n$="Steamatic/CreditNote/CREATE_ITEM",r$="Steamatic/CreditNote/UPDATE_ITEM",a$="Steamatic/CreditNote/UPDATE_ITEMS",o$="Steamatic/CreditNote/REMOVE_ITEM",i$="Steamatic/CreditNote/UPDATE_TOTALS",c$={},s$=mX({load:XX,loadComplete:$X,reset:e$,error:t$,createItem:n$,updateItem:r$,updateItems:a$,removeItem:o$,updateTotals:i$},c$),l$=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:XX,payload:{id:e}}),t.prev=1,!e){t.next=8;break}return t.next=5,WZ.findById(e);case 5:r=t.sent,t.next=9;break;case 8:r={data:Object(c.a)({},c$)};case 9:return n({type:$X,payload:r.data}),t.abrupt("return",r.data);case 13:throw t.prev=13,t.t0=t.catch(1),n({type:t$,payload:t.t0}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()},u$=function(e,t){return Dk(XX,$X,t$,(function(){return WZ.update(e,t).then((function(e){return e.data}))}),{id:e})},d$=function(){return function(e,t){var n=t().creditNote.data;return n&&n.id?WZ.findById(n.id).then((function(t){e({type:i$,payload:t.data})})):Promise.reject("Credit note doesn't exist")}},p$=function(){var e={id:Object(m.uniqueId)(ZX),dirty:!0};return{type:n$,payload:e}},h$=function(e,t,n){return{type:r$,payload:{id:e,data:Object(c.a)(Object(c.a)({},t),{},{dirty:n})}}},b$=function(e){return{type:a$,payload:e}},f$=function(e){return function(t,n){var r=n().creditNote.data;if(!r||!r.id)return Promise.reject("Credit note doesn't exist");var a=r.items.find((function(t){return t.id===e}));return a?Dv(a.gs_code)||Dv(a.description)||Dv(a.unit_cost)||Dv(a.quantity)||Dv(a.gl_account)||Dv(a.tax_rate)?Promise.reject("Validation errors"):(String(a.id).startsWith(ZX)?WZ.createItem(r.id,a):WZ.updateItem(r.id,a.id,a)).then((function(n){t(h$(e,n.data,!1)),t(d$())})):Promise.reject("Credit note item doesn't exist")}},m$=function(e){return function(t,n){var r=n().creditNote.data;return r&&r.id?(t({type:o$,payload:{id:e}}),String(e).startsWith(ZX)?Promise.resolve():WZ.removeItem(r.id,e).then((function(){return t(d$())}))):Promise.reject("Credit Note doesn't exist")}},j$=function(e){var t=Object(c.a)(Object(c.a)({},e.data),{},{date:pv(e.data.date)});return e.data.job&&(t.job=Vx(e.data.job)),{data:t}},v$=function(e){return Object(c.a)(Object(c.a)({},lB(e)),{},{purchase_orders_items:[],reference:e.reference?e.reference:void 0})},O$=function(e){return Object(c.a)(Object(c.a)({},dB(e)),{},{markup:e.markup||0,is_job_detail:e.is_job_detail,inquiry_amount:e.inquiry_amount||0})},g$="/v1/finance/purchase-orders",x$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(g$,"/").concat(t));case 2:return n=e.sent,e.abrupt("return",j$(n));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.remove("".concat(g$,"/").concat(t)));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),_$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=O$(n),e.next=3,ev.post("".concat(g$,"/").concat(t,"/items"),r);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),w$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=O$(r),e.next=3,ev.patch("".concat(g$,"/").concat(t,"/items/").concat(n),a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),S$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(g$,"/").concat(t,"/items/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),k$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(g$,"/").concat(t,"/notes"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),C$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(g$,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),N$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(g$,"/").concat(n,"/notes/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),E$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(g$,"/").concat(t,"/approver-list"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),A$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(g$,"/").concat(t,"/approve-requests"),{approver_ids:n});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("".concat(g$,"/").concat(t),{recipient_address:n,recipient_name:r});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),T$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(g$,"/").concat(t,"/approve"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),R$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(g$,"/").concat(t,"/tags"));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(g$,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(g$,"/").concat(n,"/tags/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),L$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.downloadFile("".concat(g$,"/").concat(t,"/document"),!1));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P$=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",ev.get("".concat(g$,"/listings/search"),t));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(g$,"/").concat(t,"/items/positions"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),U$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(g$,"-items/").concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B$=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(g$,"/").concat(t,"/declined"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),V$=jB("".concat(g$,"/listings"),{getDraft:"draft",getPendingApproval:"pending-approval",getApproved:"approved",getAll:"all",getFoundPurchaseOrders:"search"}),J$=Object(c.a)(Object(c.a)({},V$),{},{findById:x$,create:function(e){var t=v$(e);return ev.post(g$,t).then(j$).catch((function(e){return Promise.reject(uB(e))}))},update:function(e,t){var n=v$(t);return ev.patch("".concat(g$,"/").concat(e),n).then(j$).catch((function(e){return Promise.reject(uB(e))}))},createItem:_$,updateItem:w$,removeItem:S$,getPurchaseOrderNotes:k$,addNoteToPurchaseOrder:C$,removeNoteFromPurchaseOrder:N$,getApproverList:E$,sendApproveRequest:A$,adjustPurchaseOrder:I$,approvePurchaseOrder:T$,getPurchaseOrderTags:R$,addTag:D$,removeTag:M$,remove:y$,forPrint:L$,getFilterPurchaseOrders:P$,purchaseOrderItemsPositionUpdate:F$,jobPurchaseOrderItems:U$,purchaseOrderDeclined:B$}),q$="Steamatic/Finance/PurchaseOrdersInfo/LOAD",z$="Steamatic/Finance/PurchaseOrdersInfo/LOAD_COMPLETE",G$="Steamatic/Finance/PurchaseOrdersInfo/ERROR",W$="Steamatic/Finance/PurchaseOrders/LOAD",H$="Steamatic/Finance/PurchaseOrders/LOAD_COMPLETE",Y$="Steamatic/Finance/PurchaseOrders/ERROR",Q$=Ek({load:q$,loadComplete:z$,reset:"Steamatic/Finance/PurchaseOrdersInfo/RESET",error:G$}),K$=Ek({load:W$,loadComplete:H$,reset:"Steamatic/Finance/PurchaseOrders/RESET",error:Y$}),Z$=function(e,t){switch(e){case am.draft:return J$.getDraft(t);case am.pending_approval:return J$.getPendingApproval(t);case im.approved:return J$.getApproved(t);default:return J$.getAll(t)}},X$=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:q$}),e.prev=1,e.next=4,J$.getInfo();case 4:return n=e.sent,t({type:z$,payload:n}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),t({type:G$,payload:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()},$$=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:W$}),n.prev=1,n.next=4,Z$(e,t);case 4:a=n.sent,r({type:H$,payload:a}),n.next=12;break;case 8:throw n.prev=8,n.t0=n.catch(1),r({type:Y$,payload:n.t0}),n.t0;case 12:case"end":return n.stop()}}),n,null,[[1,8]])})));return function(e){return n.apply(this,arguments)}}()},e0=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:W$}),t.prev=1,t.next=4,J$.getFoundPurchaseOrders(e);case 4:r=t.sent,n({type:H$,payload:r}),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n({type:Y$,payload:t.t0}),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},t0=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:W$}),t.prev=1,t.next=4,J$.getFilterPurchaseOrders(e);case 4:r=t.sent,n({type:H$,payload:r}),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n({type:Y$,payload:t.t0}),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},n0="purchase_order_item_",r0="Steamatic/PurchaseOrder/LOAD",a0="Steamatic/PurchaseOrder/LOAD_COMPLETE",o0="Steamatic/PurchaseOrder/RESET",i0="Steamatic/PurchaseOrder/ERROR",c0="Steamatic/PurchaseOrder/CREATE_ITEM",s0="Steamatic/PurchaseOrder/UPDATE_ITEM",l0="Steamatic/PurchaseOrder/UPDATE_ITEMS",u0="Steamatic/PurchaseOrder/REMOVE_ITEM",d0="Steamatic/PurchaseOrder/UPDATE_TOTALS",p0={},h0=mX({load:r0,loadComplete:a0,reset:o0,error:i0,createItem:c0,updateItem:s0,updateItems:l0,removeItem:u0,updateTotals:d0},p0),b0=function(e,t){return Dk(r0,a0,i0,(function(){return J$.update(e,t).then((function(e){return e.data}))}),{id:e})},f0=function(){return function(e,t){var n=t().purchaseOrder.data;return n&&n.id?J$.findById(n.id).then((function(t){e({type:d0,payload:t.data})})):Promise.reject("Purchase Order doesn't exist")}},m0=function(){var e={id:Object(m.uniqueId)(n0),dirty:!0};return{type:c0,payload:e}},j0=function(e,t,n){return{type:s0,payload:{id:e,data:Object(c.a)(Object(c.a)({},t),{},{dirty:n})}}},v0=function(e){return{type:l0,payload:e}},O0=function(e){return function(t,n){var r=n().purchaseOrder.data;if(!r||!r.id)return Promise.reject("Purchase Order doesn't exist");var a=r.items.find((function(t){return t.id===e}));return a?Dv(a.gs_code)||Dv(a.description)||Dv(a.unit_cost)||Dv(a.quantity)||Dv(a.gl_account)||Dv(a.tax_rate)?Promise.reject("Validation errors"):(String(a.id).startsWith(n0)?J$.createItem(r.id,a):J$.updateItem(r.id,a.id,a)).then((function(n){t(j0(e,n.data,!1)),t(f0())})):Promise.reject("PO item doesn't exist")}},g0=function(e){return function(t,n){var r=n().purchaseOrder.data;return r&&r.id?(t({type:u0,payload:{id:e}}),String(e).startsWith(n0)?Promise.resolve():J$.removeItem(r.id,e).then((function(){return t(f0())}))):Promise.reject("Purchase Order doesn't exist")}},x0=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/accounting-organizations/".concat(t,"/gl-accounts"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),y0=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/accounting-organizations-currentUser",{per_page:_g.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),_0=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/locations/".concat(t,"/accounting-organization"));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),w0=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/tax-rates",{per_page:_g.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S0=function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/gs-codes",{per_page:_g.Huge});case 2:return t=e.sent,e.abrupt("return",t.data);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),k0={getAccountingOrganizations:y0,getAccountingOrganizationsForLocation:_0,getGLAccounts:x0,searchGLAccounts:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/gl-accounts/search",t);case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getTaxRates:w0,getGSCodes:S0,isEditable:function(e,t,n,r,a){var o=(n.latest_status?n.latest_status.status:im.draft)===im.draft,i=n.locked;return o&&!a?r.has(e)&&o&&!i:!(!o||!a)&&(r.has(e)&&i)},getGLAccountLabel:function(e){return"".concat(e.name).concat(e.code?": ".concat(e.code):"")}},C0="Steamatic/Finance/LOAD_COMPLETE",N0="Steamatic/Finance/ERROR",E0="Steamatic/Finance/RESET_ENTITY";!function(e){e.accountingOrganizations="accountingOrganizations",e.glAccounts="glAccounts",e.glAccountsForUser="glAccountsForUser",e.taxRates="taxRates",e.gsCodes="gsCodes"}(vX||(vX={}));var A0=(jX={},Object(k.a)(jX,vX.accountingOrganizations,[]),Object(k.a)(jX,vX.glAccounts,[]),Object(k.a)(jX,vX.taxRates,[]),Object(k.a)(jX,vX.gsCodes,[]),Object(k.a)(jX,"error",null),jX),I0=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:A0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case C0:return Object(c.a)(Object(c.a)({},e),t.payload);case N0:return Object(c.a)(Object(c.a)({},e),{},{error:t.payload});case E0:return Object(c.a)(Object(c.a)({},e),{},Object(k.a)({},t.payload,[]));default:return e}},T0=function(e){return{type:E0,payload:e}},R0=function(e,t){return{type:C0,payload:Object(k.a)({},e,t)}},D0=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,t(T0(n)),e.next=4,r();case 4:a=e.sent,t(R0(n,a)),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(0),t((o=e.t0,{type:N0,payload:o})),e.t0;case 12:case"end":return e.stop()}var o}),e,null,[[0,8]])})));return function(t,n,r){return e.apply(this,arguments)}}(),M0=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D0(n,vX.glAccounts,(function(){return k0.getGLAccounts(e)}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},L0=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:D0(n,vX.glAccounts,Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,k0.searchGLAccounts({locations:e});case 3:return t.abrupt("return",t.sent);case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",Promise.resolve([]));case 9:case"end":return t.stop()}}),t,null,[[0,6]])}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()};function P0(e){return e.finance[vX.glAccounts]}var F0=function(e){return Object(c.a)(Object(c.a)({},e.data),{},{created_at:hv(e.data.created_at),paid_at:hv(e.data.paid_at),updated_at:hv(e.data.updated_at)})},U0=function(e){return{name:e.name,cvv:+e.cvv,number:e.number.replace(/\D/g,""),expiry_month:e.expiry_month.value.toString(),expiry_year:e.expiry_year.value.toString(),billing_address1:e.billing_address1,billing_city:e.billing_city,billing_country:e.billing_country,email:e.email}},B0=F0,V0=function(e){return Object(c.a)(Object(c.a)({},e),{},{paid_at:bv(e.paid_at),gl_account_id:e.gl_account_id.id,amount:z0(e.amount)})},J0=F0,q0=function(e,t){return{payment_data:Object(c.a)(Object(c.a)({},e),{},{paid_at:fv(e.paid_at),dst_gl_account_id:e.dst_gl_account.id}),invoices_list:t}};function z0(e){return+e.replace(/[^\d\.]/g,"")}var G0,W0={forwardPayments:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/finance/payments/forward",Object(c.a)(Object(c.a)({},t),{},{transferred_at:fv(t.transferred_at)}));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getPaymentsToForward:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/invoices/listings/unforwarded",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getForwardedPayments:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve({data:[]});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getForwardedPaymentsInfo:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.resolve({year:0,month:0,overall:0});case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),receiveWithCreditCard:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/finance/invoices/".concat(t,"/payments/receive/credit-card"),U0(n));case 2:return r=e.sent,e.abrupt("return",B0(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),receiveDirectDeposit:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/finance/invoices/".concat(t,"/payments/receive/direct-deposit"),V0(n));case 2:return r=e.sent,e.abrupt("return",J0(r));case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),receivePayment:function(e,t){return ev.post("/v1/finance/payments/transfers/receive",q0(e,t))},paymentTransferInfo:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/reports/payments/transfers/info?location_id=".concat(t.toString(),"&date_from=").concat(pm()(n).format(av),"&date_to=").concat(pm()(r).format(av)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getPaymentTransfersList:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/reports/payments/transfers?location_id=".concat(t.toString(),"&date_from=").concat(pm()(n).format(av),"&date_to=").concat(pm()(r).format(av)));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),getForwardPaymentTransfersList:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/payments/forward",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},H0="Steamatic/Finance/ForwardPayments/LOAD_COMPLETE",Y0="Steamatic/Finance/ForwardPayments/RESET",Q0={load:"Steamatic/Finance/ForwardPayments/LOAD_JOB",loadComplete:H0,reset:Y0,error:"Steamatic/Finance/ForwardPayments/ERROR"},K0={toggle:"Steamatic/Finance/ForwardPayments/TOGGLE_INVOICE_PAYMENT",massSelect:"Steamatic/Finance/ForwardPayments/MASS_SELECT_INVOICE_PAYMENT",resetSelected:"Steamatic/Finance/ForwardPayments/RESET_SELECTED_INVOICE_PAYMENT"},Z0=Ek(Object(c.a)(Object(c.a)({},Q0),{},{customReducers:{data:Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null};switch(t.type){case H0:return t.payload.data;case Y0:return[];default:return e}},selectedIds:Ik(K0)})}})),X0=Ak(Q0),$0=Rk(K0),e1=$0.resetSelected,t1=function(e){return $0.toggle(e.id)},n1=function(e){return $0.massSelect(e.map((function(e){return e.id})))},r1=(X0.reset(),function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t($0.resetSelected()),t(X0.reset()),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),t(X0.error(e.t0)),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()}),a1=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(X0.load()),t.prev=1,t.next=4,W0.getPaymentsToForward(e);case 4:r=t.sent,n(X0.loadComplete(r)),t.next=12;break;case 8:throw t.prev=8,t.t0=t.catch(1),n(X0.error(t.t0)),t.t0;case 12:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},o1=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r,a){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,r(X0.load()),n.next=4,W0.forwardPayments(Object(c.a)(Object(c.a)({},e),{},{invoices_ids:a().forwardPayments.data.selectedIds}));case 4:Oj(uj.Success,"Forward invoice payments received"),n.next=11;break;case 7:throw n.prev=7,n.t0=n.catch(0),r(X0.error(n.t0)),n.t0;case 11:return n.next=13,r(a1(t));case 13:return n.abrupt("return",n.sent);case 14:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e,t){return n.apply(this,arguments)}}()},i1=Z0,c1={load:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_JOB",loadComplete:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_COMPLETE",reset:"Steamatic/Finance/ForwardPaymentsReceived/RESET",error:"Steamatic/Finance/ForwardPaymentsReceived/ERROR"},s1={load:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_JOB_INFO",loadComplete:"Steamatic/Finance/ForwardPaymentsReceived/LOAD_COMPLETE_INFO",reset:"Steamatic/Finance/ForwardPaymentsReceived/RESET_INFO",error:"Steamatic/Finance/ForwardPaymentsReceived/ERROR_INFO"},l1=Ek(c1),u1=(Ak(c1),Ek(s1));Ak(s1);!function(e){e.DP="DP",e.FP="FP"}(G0||(G0={}));var d1,p1,h1,b1="Steamatic/Finance/ReceivePayments/LOAD_COMPLETE",f1="Steamatic/Finance/ReceivePayments/RESET",m1="Steamatic/Finance/ReceivePayments/SET_PAYMENT_TYPE",j1="Steamatic/Finance/ReceivePayments/SET_AMOUNT",v1={load:"Steamatic/Finance/ReceivePayments/LOAD",loadComplete:b1,reset:f1,error:"Steamatic/Finance/ReceivePayments/ERROR"},O1={toggle:"Steamatic/Finance/ReceivePayments/TOGGLE_INVOICE",resetSelected:"Steamatic/Finance/ReceivePayments/RESET_SELECTED_INVOICES",massSelect:"Steamatic/Finance/ReceivePayments/MASS_SELECT_INVOICES"},g1=function(e){return Object(c.a)(Object(c.a)({},e),{},{payment_type:G0.DP,payment_amount:0})},x1=Ek(Object(c.a)(Object(c.a)({},v1),{},{customReducers:{data:Object(sg.combineReducers)({data:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null,payload:null},r=function(e){return t.findIndex((function(t){return t.id===e}))};switch(n.type){case b1:return n.payload.data.map(g1);case m1:return(e=r(n.payload.id))>=0&&(t[e].payment_type=n.payload.payment_type),Object(aj.a)(t);case j1:return(e=r(n.payload.id))>=0&&(t[e].payment_amount=n.payload.amount),Object(aj.a)(t);case f1:return[];default:return t}},selectedIds:Ik(O1)})}})),y1=Ak(v1),_1=Rk(O1),w1=(_1.resetSelected,function(e){return _1.toggle(e.id)}),S1=(y1.reset(),function(e,t){return{type:m1,payload:{id:e,payment_type:t}}}),k1=function(e,t){return{type:j1,payload:{id:e,amount:t}}},C1=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n(_1.resetSelected()),n(y1.load()),t.prev=2,t.next=5,JB.search({invoices:e,jobs:e,virtual_status:["unpaid","overdue"],sortby:"desc"});case 5:(r=t.sent).data&&r.data.forEach((function(e){n(w1(e))})),n(y1.loadComplete(r)),t.next=14;break;case 10:throw t.prev=10,t.t0=t.catch(2),n(y1.error(t.t0)),t.t0;case 14:case"end":return t.stop()}}),t,null,[[2,10]])})));return function(e){return t.apply(this,arguments)}}()},N1=function(){return function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:e.prev=0,t(_1.resetSelected()),t(y1.reset()),e.next=9;break;case 5:throw e.prev=5,e.t0=e.catch(0),t(y1.error(e.t0)),e.t0;case 9:case"end":return e.stop()}}),e,null,[[0,5]])})));return function(t){return e.apply(this,arguments)}}()},E1=x1,A1={getAccountTransactionsByGlAccountId:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat("/v1/finance/reports/gl-accounts","/").concat(t,"/").concat("transactions/info"),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},I1="Steamatic/Finance/Reports/GlAccounts/LOAD",T1="Steamatic/Finance/Reports/GlAccounts/LOAD_COMPLETE",R1="Steamatic/Finance/Reports/GlAccounts/ERROR",D1=Ek({load:I1,loadComplete:T1,reset:"Steamatic/Finance/Reports/GlAccounts/RESET",error:R1}),M1=function(e,t){return Dk(I1,T1,R1,(function(){return A1.getAccountTransactionsByGlAccountId(e,t)}))},L1="Steamatic/Operations/Runs/LOAD",P1="Steamatic/Operations/Runs/LOAD_COMPLETE",F1="Steamatic/Operations/Runs/RESET",U1="Steamatic/Operations/Runs/ERROR",B1=Ek({load:L1,loadComplete:P1,reset:F1,error:U1}),V1=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:L1}),t.prev=1,t.next=4,Kq.getRuns(e);case 4:return r=t.sent,n({type:P1,payload:r}),t.abrupt("return",r);case 9:throw t.prev=9,t.t0=t.catch(1),n({type:U1,payload:t.t0}),t.t0;case 13:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},J1="Steamatic/Constants/LOAD_COMPLETE",q1={jobAssignmentTypes:[]},z1=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:q1,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case J1:return t.payload;default:return e}},G1="Steamatic/UsageAndActuals/Materials/LOAD",W1="Steamatic/UsageAndActuals/Materials/LOAD_COMPLETE",H1="Steamatic/UsageAndActuals/Materials/ERROR",Y1=Ek({load:G1,loadComplete:W1,reset:"Steamatic/UsageAndActuals/Materials/RESET",error:H1}),Q1="Steamatic/UsageAndActuals/MeasureUnits/LOAD",K1="Steamatic/UsageAndActuals/MeasureUnits/LOAD_COMPLETE",Z1="Steamatic/UsageAndActuals/MeasureUnits/ERROR",X1=Ek({load:Q1,loadComplete:K1,reset:"Steamatic/UsageAndActuals/MeasureUnits/RESET",error:Z1}),$1="Steamatic/Contacts/Statuses/LOAD",e2="Steamatic/Contacts/Statuses/LOAD_COMPLETE",t2="Steamatic/Contacts/Statuses/ERROR",n2=Ek({load:$1,loadComplete:e2,reset:"Steamatic/Contacts/Statuses/RESET",error:t2}),r2=Object(sg.combineReducers)({statuses:n2}),a2={getInvoicePayments:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat("/v1/finance/reports/invoices/payments"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o2="Steamatic/Finance/Reports/InvoicePayment/LOAD",i2="Steamatic/Finance/Reports/InvoicePayment/LOAD_COMPLETE",c2="Steamatic/Finance/Reports/InvoicePayment/ERROR",s2=Ek({load:o2,loadComplete:i2,reset:"Steamatic/Finance/Reports/InvoicePayment/RESET",error:c2}),l2="Steamatic/UsageAndActuals/Equipment/LOAD",u2="Steamatic/UsageAndActuals/Equipment/LOAD_COMPLETE",d2="Steamatic/UsageAndActuals/Equipment/ERROR",p2=Ek({load:l2,loadComplete:u2,reset:"Steamatic/UsageAndActuals/Equipment/RESET",error:d2}),h2=function(e){return Object(c.a)(Object(c.a)({},e),{},{current_date_from:bv(e.current_date_from),current_date_to:bv(e.current_date_to),previous_date_from:bv(e.previous_date_from),previous_date_to:bv(e.previous_date_to)})},b2={getVolume:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/reports/financial/volume",h2(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getRevenue:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/reports/financial/revenue",h2(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),gerAccountsReceivable:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/finance/reports/financial/accounts_receivables",h2(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()};function f2(e,t){return"".concat("Steamatic/FinancialReports/").concat(e,"/").concat(t)}!function(e){e.revenue="revenue",e.volume="volume",e.accounts_receivables="accounts_receivables"}(p1||(p1={})),function(e){e.load="load",e.loadComplete="loadComplete",e.reset="reset",e.error="error"}(h1||(h1={}));var m2=[h1.load,h1.loadComplete,h1.reset,h1.error];function j2(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m2;return t.reduce((function(t,n){return Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n,f2(e,n)))}),{})}var v2=Object(sg.combineReducers)((d1={},Object(k.a)(d1,p1.revenue,Ek(j2(p1.revenue))),Object(k.a)(d1,p1.accounts_receivables,Ek(j2(p1.accounts_receivables))),Object(k.a)(d1,p1.volume,Ek(j2(p1.volume))),d1)),O2=j2(p1.volume,[h1.load,h1.loadComplete,h1.error]),g2=j2(p1.revenue,[h1.load,h1.loadComplete,h1.error]),x2=function(e){return Dk(g2[h1.load],g2[h1.loadComplete],g2[h1.error],(function(){return b2.getRevenue(e)}))},y2=j2(p1.accounts_receivables,[h1.load,h1.loadComplete,h1.error]),_2=function(e){return Dk(y2[h1.load],y2[h1.loadComplete],y2[h1.error],(function(){return b2.gerAccountsReceivable(e)}))};function w2(e,t){return e.financialReport[t]}function S2(e){return w2(e,p1.volume)}function k2(e){return w2(e,p1.revenue)}function C2(e){return w2(e,p1.accounts_receivables)}var N2,E2,A2,I2,T2,R2="Steamatic/Contacts/Countries/LOAD",D2="Steamatic/Contacts/Countries/LOAD_COMPLETE",M2="Steamatic/Contacts/Countries/ERROR",L2=Ek({load:R2,loadComplete:D2,reset:"Steamatic/Contacts/Countries/RESET",error:M2}),P2="Steamatic/Contacts/States/LOAD",F2="Steamatic/States/Countries/LOAD_COMPLETE",U2="Steamatic/Contacts/States/ERROR",B2=Ek({load:P2,loadComplete:F2,reset:"Steamatic/Contacts/States/RESET",error:U2}),V2={getITrialBalance:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat("/v1/finance/reports/gl-accounts/trial-report"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},J2="Steamatic/Finance/Reports/TrialBalance/LOAD",q2="Steamatic/Finance/Reports/TrialBalance/LOAD_COMPLETE",z2="Steamatic/Finance/Reports/TrialBalance/ERROR",G2=Ek({load:J2,loadComplete:q2,reset:"Steamatic/Finance/Reports/TrialBalance/RESET",error:z2}),W2=function(e){return ev.get("".concat("/v1/finance/reports/gst"),e)},H2="Steamatic/Finance/Reports/GstSummary/LOAD",Y2="Steamatic/Finance/Reports/GstSummary/LOAD_COMPLETE",Q2="Steamatic/Finance/Reports/GstSummary/ERROR",K2=Ek({load:H2,loadComplete:Y2,reset:"Steamatic/Finance/Reports/GstSummary/RESET",error:Q2}),Z2="Steamatic/Tags/Job/LOAD",X2="Steamatic/Tags/Job/LOAD_COMPLETE",$2="Steamatic/Tags/Job/ERROR",e5=Ek({load:Z2,loadComplete:X2,reset:"Steamatic/Tags/Job/RESET",error:$2}),t5=function(){return Dk(Z2,X2,$2,(function(){return ZC.searchTags({type:"job"})}))},n5="CurrentAS/",r5="Steamatic/UsageAndActuals/AssessmentReports/",a5="".concat(r5).concat(n5,"Load"),o5="".concat(r5).concat(n5,"LoadComplete"),i5="".concat(r5).concat(n5,"Reset"),c5="".concat(r5).concat(n5,"Error"),s5=Ek({load:a5,loadComplete:o5,reset:i5,error:c5}),l5=Object(sg.combineReducers)({currentAR:s5}),u5="Steamatic/UserRoles/",d5="".concat(u5,"Load"),p5="".concat(u5,"LoadComplete"),h5="".concat(u5,"Reset"),b5="".concat(u5,"Error"),f5=Ek({load:d5,loadComplete:p5,reset:h5,error:b5}),m5="Steamatic/Warehouse/Inventories/LOAD",j5="Steamatic/Warehouse/Inventories/LOAD_COMPLETE",v5="Steamatic/Warehouse/Inventories/ERROR",O5=Ek({load:m5,loadComplete:j5,reset:"Steamatic/Warehouse/Inventories/RESET",error:v5}),g5=function(e){var t,n;return Object(c.a)(Object(c.a)({},e),{},{location_id:(null===(t=e.location)||void 0===t?void 0:t.id)||null,location:void 0,inventory_storage_space_type_id:(null===(n=e.inventory_storage_space_type)||void 0===n?void 0:n.id)||null,inventory_storage_space_type:void 0})},x5=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{inventory_storage_container_type_id:(null===(t=e.inventory_storage_container_type)||void 0===t?void 0:t.id)||null,inventory_storage_container_type:void 0})},y5=function(e){var t,n;return Object(c.a)(Object(c.a)({},e),{},{charging_interval:(null===(t=e.charging_interval)||void 0===t?void 0:t.value)||e.charging_interval||null,inventory_storage_space_type_id:(null===(n=e.inventory_storage_space_type)||void 0===n?void 0:n.id)||null,inventory_storage_space_type:void 0})},_5=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{inventory_standard_item_group_id:(null===(t=e.inventory_standard_item_group)||void 0===t?void 0:t.id)||null,inventory_standard_item_group:void 0})},w5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventories/search",Object(c.a)({location_id:t,per_page:_g.Big,page:r},n));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),S5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-items/locations",Object(c.a)({location_id:t,per_page:_g.Middle,page:r},n));case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),k5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-location-usage",{location_id:t,per_page:_g.Middle,page:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),C5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventories/ready-for-return-dispose",{location_id:t,per_page:_g.Middle,job_id:r,page:n});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),N5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-items/returned-disposed",{location_id:t,per_page:_g.Middle,job_id:n.job_id,status:n.status,page:r});case 2:return a=e.sent,e.abrupt("return",a);case 4:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),E5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/inventory-items/ready-for-return-dispose",{location_id:t,per_page:_g.Huge,page:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),A5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/jobs/inventory-items/returned-disposed",{location_id:t,per_page:_g.Huge,page:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),I5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventories/info",{location_id:t});case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),T5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-items/scan-to-placement",{inventoryStorageSpaceId:t,inventoryItemIds:n});case 2:return r=e.sent,e.abrupt("return",r);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),R5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/storage-spaces",g5(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/storage-spaces/".concat(t),g5(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),M5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/storage-spaces/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),L5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-spaces/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),P5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-spaces",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),F5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/storage-space-types",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),U5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/storage-space-types/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),B5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/storage-space-types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),V5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-space-types/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),J5=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-space-types");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/storage-container-types",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),z5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/storage-container-types/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),G5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/storage-container-types/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),W5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-container-types/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),H5=function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-container-types");case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),Y5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/storage-containers",x5(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Q5=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/storage-containers/".concat(t),x5(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),K5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/storage-containers/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),Z5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-containers/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),X5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/storage-containers",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),$5=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-storage-space-type-charging-intervals",y5(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e3=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/inventory-storage-space-type-charging-intervals/".concat(t),y5(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/inventory-storage-space-type-charging-intervals/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),n3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-storage-space-type-charging-intervals/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-storage-space-type-charging-intervals/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-standard-item-groups",t);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),o3=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/inventory-standard-item-groups/".concat(t),n);case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),i3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/inventory-standard-item-groups/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),c3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-standard-item-groups/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),s3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-standard-item-groups",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),l3=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-standard-item-groups/search",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),u3={getInventories:w5,getReadyToReturn:C5,getStorageItems:S5,getToReturnDisposeJobs:E5,getReturnedDisposedJobs:A5,getReturned:N5,getWarehouseInfo:I5,getStorageUsage:k5,createStorageSpace:R5,updateStorageSpace:D5,deleteStorageSpace:M5,getStorageSpace:L5,getStorageSpaces:P5,scanToLocation:T5,createStorageSpaceType:F5,updateStorageSpaceType:U5,deleteStorageSpaceType:B5,getStorageSpaceType:V5,getStorageSpaceTypes:J5,createStorageContainerType:q5,updateStorageContainerType:z5,deleteStorageContainerType:G5,getStorageContainerType:W5,getStorageContainerTypes:H5,createStorageContainer:Y5,updateStorageContainer:Q5,deleteStorageContainer:K5,getStorageContainer:Z5,getStorageContainers:X5,createChargingInterval:$5,updateChargingInterval:e3,deleteChargingInterval:t3,getChargingInterval:n3,getChargingIntervals:r3,createStandardItem:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/operations/inventory-standard-items",_5(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateStandardItem:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.patch("/v1/operations/inventory-standard-items/".concat(t),_5(n));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteStandardItem:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/inventory-standard-items/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStandardItem:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-standard-items/".concat(t));case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getStandardItems:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/inventory-standard-items",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createStandardItemGroup:a3,updateStandardItemGroup:o3,deleteStandardItemGroup:i3,getStandardItemGroup:c3,getStandardItemGroups:s3,searchStandardItemGroups:l3,getToDoGroups:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/todo-groups",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},d3="Steamatic/Warehousing/",p3="Steamatic/Warehousing/Steamatic/Finance/setLocation",h3="Steamatic/Finance/ReceivePayments/TOGGLE_ENTITY";!function(e){e.selectedLocation="selectedLocation",e.selectedInventoryJob="selectedInventoryJob"}(A2||(A2={})),function(e){e.inventories="inventories",e.readyToReturn="readyToReturn",e.itemsInStorage="itemsInStorage",e.toReturnDisposeJobs="toReturnDisposeJobs",e.returnedDisposedJobs="returnedDisposedJobs",e.options="options",e.returnedItems="returnedItems",e.selectedGroup="selectedGroup",e.selectedPlacements="selectedPlacements",e.warehouseInfo="warehouseInfo",e.storageUsage="storageUsage",e.jobsNewInventory="jobsNewInventory",e.storageSpaces="storageSpaces"}(I2||(I2={})),function(e){e.load="load",e.loadComplete="loadComplete",e.reset="reset",e.error="error"}(T2||(T2={}));var b3={toggleEntity:h3,toggle:"Steamatic/Finance/ReceivePayments/TOGGLE_PLACEMENT",resetSelected:"Steamatic/Finance/ReceivePayments/RESET_SELECTED_PLACEMENT",massSelect:"Steamatic/Finance/ReceivePayments/MASS_SELECT_PLACEMENTS"},f3={toggleEntity:h3,toggle:"Steamatic/Finance/ReceivePayments/TOGGLE_GROUP",resetSelected:"Steamatic/Finance/ReceivePayments/RESET_SELECTED_GROUP",massSelect:"Steamatic/Finance/ReceivePayments/MASS_SELECT_GROUP"},m3=(N2={},Object(k.a)(N2,A2.selectedLocation,null),Object(k.a)(N2,A2.selectedInventoryJob,null),N2);function j3(e,t){return"".concat(d3).concat(e,"/").concat(t)}var v3=[T2.load,T2.loadComplete,T2.reset,T2.error];function O3(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:v3;return t.reduce((function(t,n){return Object(c.a)(Object(c.a)({},t),{},Object(k.a)({},n,j3(e,n)))}),{})}var g3=Object(sg.combineReducers)((E2={},Object(k.a)(E2,I2.inventories,Ek(O3(I2.inventories))),Object(k.a)(E2,I2.readyToReturn,Ek(O3(I2.readyToReturn))),Object(k.a)(E2,I2.returnedItems,Ek(O3(I2.returnedItems))),Object(k.a)(E2,I2.itemsInStorage,Ek(O3(I2.itemsInStorage))),Object(k.a)(E2,I2.storageUsage,Ek(O3(I2.storageUsage))),Object(k.a)(E2,I2.toReturnDisposeJobs,Ek(O3(I2.toReturnDisposeJobs))),Object(k.a)(E2,I2.returnedDisposedJobs,Ek(O3(I2.returnedDisposedJobs))),Object(k.a)(E2,I2.warehouseInfo,Ek(O3(I2.warehouseInfo))),Object(k.a)(E2,I2.jobsNewInventory,Ek(O3(I2.jobsNewInventory))),Object(k.a)(E2,I2.storageSpaces,Ek(O3(I2.storageSpaces))),Object(k.a)(E2,I2.selectedGroup,Ik(f3)),Object(k.a)(E2,I2.selectedPlacements,Ik(b3)),Object(k.a)(E2,I2.options,(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:m3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case p3:return Object(c.a)(Object(c.a)({},e),t.payload);default:return e}})),E2)),x3=O3(I2.inventories,[T2.load,T2.loadComplete,T2.error]),y3=O3(I2.readyToReturn,[T2.load,T2.loadComplete,T2.error]),_3=O3(I2.returnedItems,[T2.load,T2.loadComplete,T2.error]),w3=O3(I2.itemsInStorage,[T2.load,T2.loadComplete,T2.error]),S3=O3(I2.storageUsage,[T2.load,T2.loadComplete,T2.error]),k3=O3(I2.toReturnDisposeJobs,[T2.load,T2.loadComplete,T2.error]),C3=O3(I2.returnedDisposedJobs,[T2.load,T2.loadComplete,T2.error]),N3=O3(I2.warehouseInfo,[T2.load,T2.loadComplete,T2.error]),E3=(O3(I2.jobsNewInventory,[T2.load,T2.loadComplete,T2.error]),O3(I2.storageSpaces,[T2.load,T2.loadComplete,T2.error]),function(e,t,n){return Dk(x3[T2.load],x3[T2.loadComplete],x3[T2.error],(function(){return u3.getInventories(e,t,n)}))}),A3=function(e,t,n){return Dk(w3[T2.load],w3[T2.loadComplete],w3[T2.error],(function(){return u3.getStorageItems(e,t,n)}))},I3=function(e,t,n){return Dk(y3[T2.load],y3[T2.loadComplete],y3[T2.error],(function(){return u3.getReadyToReturn(e,t,n)}))},T3=function(e,t,n){return Dk(_3[T2.load],_3[T2.loadComplete],_3[T2.error],(function(){return u3.getReturned(e,t,n)}))},R3=function(e,t){return Dk(S3[T2.load],S3[T2.loadComplete],S3[T2.error],(function(){return u3.getStorageUsage(e,t)}))},D3=function(e,t){return Dk(k3[T2.load],k3[T2.loadComplete],k3[T2.error],(function(){return u3.getToReturnDisposeJobs(e,t)}))},M3=function(e,t){return Dk(C3[T2.load],C3[T2.loadComplete],C3[T2.error],(function(){return u3.getReturnedDisposedJobs(e,t)}))},L3=function(e){return Dk(N3[T2.load],N3[T2.loadComplete],N3[T2.error],(function(){return u3.getWarehouseInfo(e)}))},P3=function(e){return Mk(p3,e)};function F3(e,t){return e.warehousing[t]}function U3(e){return F3(e,I2.options)}var B3=Rk(f3),V3=function(e){return B3.toggle(e.id)},J3=Rk(b3),q3=function(e){return J3.toggleEntity({itemId:e.inventory_item.id,containerId:e.container.id})},z3="Steamatic/Manage/FormOptions/SET_FORM_OPTIONS_DATA",G3="Steamatic/Manage/FormOptions/SET_FLOORING_TYPES",W3="Steamatic/Manage/FormOptions/SET_BELONGS_TO_LOCATION",H3="Steamatic/Manage/FormOptions/SET_SELECTED_TASK_DATA",Y3="Steamatic/Manage/FormOptions/SET_TASK_OPTIONS_DATA",Q3="Steamatic/Manage/FormOptions/SET_SUB_TASK_OPTIONS_DATA",K3="Steamatic/Manage/FormOptions/SET_SELECTED_SUB_TASK_DATA",Z3="Steamatic/Manage/FormOptions/SET_SUB_TASK_OF_TASK_DATA",X3={formOptionData:[],flooringTypes:[],locations:[],tasksOptions:[],selectedTask:{id:0,name:"",can_be_scheduled:!1,default_duration_minutes:0,kpi_hours:0,kpi_include_afterhours:!1,deleted_at:null,color:"#000000",allow_edit_due_date:!1,can_be_scheduled_obj:{id:2,value:!1,name:"No"},allow_edit_due_date_obj:{id:2,value:!1,name:"Unable to edit due date"},kpi_include_afterhours_obj:{id:2,value:!1,name:"No"}},subTasksOptions:[],selectedSubTask:{id:0,job_task_type_id:0,name:"",default_crew_note:"",job_task_type:{},deleted_at:null,created_at:null,updated_at:null},subTaskOfTaskList:[]},$3=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:X3,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case z3:return Object(c.a)(Object(c.a)({},e),{},{formOptionData:Object(c.a)(Object(c.a)({},e.formOptionData),t.payload)});case G3:return Object(c.a)(Object(c.a)({},e),{},{flooringTypes:Object(c.a)(Object(c.a)({},e.flooringTypes),t.payload)});case W3:return Object(c.a)(Object(c.a)({},e),{},{locations:t.payload});case Y3:return Object(c.a)(Object(c.a)({},e),{},{tasksOptions:t.payload});case H3:return Object(c.a)(Object(c.a)({},e),{},{selectedTask:t.payload});case Q3:return Object(c.a)(Object(c.a)({},e),{},{subTasksOptions:t.payload});case K3:return Object(c.a)(Object(c.a)({},e),{},{selectedSubTask:t.payload});case Z3:return Object(c.a)(Object(c.a)({},e),{},{subTaskOfTaskList:t.payload});default:return e}},e4="TEXTHEADING",t4="FONTSTYLE",n4="FONTCOLOR",r4="TEXTHEADING_BULLET",a4="FONTSTYLE_BULLET",o4="FONTCOLOR_BULLET",i4="TEXTDESC",c4="UPDATE_NUMERICAL_LIST",s4="UPDATE_BULLET_LIST",l4="DRAG_START",u4="REQUESTCOSTLIST",d4="REQUESTCOSTLIST_SUCCESS",p4="REQUESTCOSTLIST_FAIL",h4="REQUESTCOSTITEMUPDATE",b4="REQUESTCOSTITEMCREATE",f4="REQUESTCOSTITEMREMOVE",m4="AR_REPORT_REQUEST",j4="AR_REPORT_SUCCESS",v4="AR_REPORT_FAIL",O4="SET_TOGGLE_SELECTED",g4="REQUESTSTAGESLIST",x4="REQUESTSTAGESLIST_SUCCESS",y4="REQUESTSTAGESLIST_FAIL",_4="UPDATE_TOTALS",w4="QUOTE_STATUS",S4="build_cost_item_",k4={heading:{text:"Enter your text here...",id:""},fontStyleData:{style:"normal",id:""},fontColorData:{color:"#000000",id:""},description:"",numericList:[],bulletList:[],isDragStart:!1,isCostListLoad:!1,costListRes:[],isStagesListLoad:!1,costStagesListRes:[],costListError:void 0,stagesListError:void 0,isArLoad:!1,arReport:[],arReportError:void 0,selectedItems:[],sub_total:0,taxes:0,total_amount:0,latest_status:""},C4=function(e,t){if(e.costStagesListRes){var n=e.costStagesListRes,r=n.find((function(e){return e.id===t.assessment_report_costing_stage_id}));if(r){r.cost_items.push(t);var a=n.indexOf(r);return e.costStagesListRes[a]=r,Object.assign({},e,{costStagesListRes:n})}}return e},N4=function(e,t){if(e.costStagesListRes){var n=e.costStagesListRes,r=n.find((function(e){return e.id===t.stageId}));if(r){r.cost_items=r.cost_items.map((function(e){return e.id===t.id?Object(c.a)(Object(c.a)({},e),t.data):e}));var a=n.indexOf(r);return n[a]=r,Object.assign({},e,{costStagesListRes:n})}}return e},E4=function(e,t){if(e.costStagesListRes){var n=e.costStagesListRes,r=n.find((function(e){return e.id===t.stageId}));if(r){r.cost_items=r.cost_items.filter((function(e){return e.id!==t.id}));var a=n.indexOf(r);return n[a]=r,Object.assign({},e,{costStagesListRes:n})}}return e},A4=function(e){if(e.costStagesListRes){var t,n={sub_total:0,taxes:0,total_amount:0};return null===(t=e.costStagesListRes)||void 0===t||t.map((function(e){n.sub_total+=(null===e||void 0===e?void 0:e.sub_total)||0,n.taxes+=(null===e||void 0===e?void 0:e.tax)||0,n.total_amount+=(null===e||void 0===e?void 0:e.total)||0})),Object.assign({},e,{sub_total:n.sub_total,taxes:n.taxes,total_amount:n.total_amount})}return e},I4=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:k4,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case e4:return Object(c.a)(Object(c.a)({},e),{},{heading:t.payload});case t4:return Object(c.a)(Object(c.a)({},e),{},{fontStyleData:t.payload});case n4:return Object(c.a)(Object(c.a)({},e),{},{fontColorData:t.payload});case r4:return Object(c.a)(Object(c.a)({},e),{},{heading:t.payload});case a4:return Object(c.a)(Object(c.a)({},e),{},{fontStyleData:t.payload});case o4:return Object(c.a)(Object(c.a)({},e),{},{fontColorData:t.payload});case i4:return Object(c.a)(Object(c.a)({},e),{},{description:t.payload});case c4:return Object(c.a)(Object(c.a)({},e),{},{numericList:t.payload});case s4:return Object(c.a)(Object(c.a)({},e),{},{bulletList:t.payload});case l4:return Object(c.a)(Object(c.a)({},e),{},{isDragStart:t.payload});case u4:return Object(c.a)(Object(c.a)({},e),{},{isCostListLoad:!0});case d4:return Object(c.a)(Object(c.a)({},e),{},{isCostListLoad:!1,costListRes:t.payload});case p4:case u4:return Object(c.a)(Object(c.a)({},e),{},{isCostListLoad:!1,costListError:t.payload});case g4:return Object(c.a)(Object(c.a)({},e),{},{isStagesListLoad:!0});case x4:return Object(c.a)(Object(c.a)({},e),{},{isStagesListLoad:!1,costStagesListRes:t.payload});case y4:case g4:return Object(c.a)(Object(c.a)({},e),{},{isStagesListLoad:!1,stagesListError:t.payload});case m4:return Object(c.a)(Object(c.a)({},e),{},{isArLoad:t.payload});case j4:return Object(c.a)(Object(c.a)({},e),{},{isArLoad:!1,arReport:t.payload});case v4:return Object(c.a)(Object(c.a)({},e),{},{isArLoad:!1,arReportError:t.payload});case O4:return Object(c.a)(Object(c.a)({},e),{},{selectedItems:t.payload});case b4:return C4(e,t.payload);case h4:return N4(e,t.payload);case _4:return A4(e);case f4:return E4(e,t.payload);case w4:return Object(c.a)(Object(c.a)({},e),{},{latest_status:t.payload});default:return e}}}),T4=function(e){return{type:e4,payload:e}},R4=function(e){return{type:t4,payload:e}},D4=function(e){return{type:n4,payload:e}},M4=function(e){return{type:r4,payload:e}},L4=function(e){return{type:a4,payload:e}},P4=function(e){return{type:o4,payload:e}},F4=function(e){return{type:i4,payload:e}},U4=function(e){return{type:c4,payload:e}},B4=function(e){return{type:s4,payload:e}},V4=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:u4}),t.prev=1,t.next=4,ZW.costItemList(e);case 4:r=t.sent,n({type:d4,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:p4,payload:null});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},J4=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:g4}),t.prev=1,t.next=4,XG.assessmentReportCoastingSatges(e);case 4:r=t.sent,n({type:x4,payload:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),n({type:y4,payload:null});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}()},q4=function(e,t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.prev=0,n.next=3,ZW.assessmentReportsGet(e,t);case 3:a=n.sent,r({type:j4,payload:a}),n.next=10;break;case 7:n.prev=7,n.t0=n.catch(0),r({type:v4,payload:null});case 10:case"end":return n.stop()}}),n,null,[[0,7]])})));return function(e){return n.apply(this,arguments)}}()},z4=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:m4,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},G4=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:O4,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},W4=function(e,t){var n={id:Object(m.uniqueId)(S4),assessment_report_costing_stage_id:e,assessment_report_id:t,discount:0,markup:0,dirty:!0};return{type:b4,payload:n}},H4=function(e,t,n,r){return{type:h4,payload:{id:e,stageId:t,data:Object(c.a)(Object(c.a)({},n),{},{dirty:r})}}},Y4=function(){return{type:_4,payload:null}},Q4=function(e){return{type:w4,payload:e}},K4=function(e,t){return{type:f4,payload:{stageId:e,id:t}}},Z4={searchVehicles:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/operations/vehicles",{location_id:t,date:n});case 2:return r=e.sent,e.abrupt("return",r.data);case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),createVehicle:function(e){return ev.post("/v1/operations/vehicles",e)},deleteVehcile:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/operations/vehicles/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateVehcile:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,ev.patch("/v1/operations/vehicles/".concat(t),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateVehicleStatus:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=arguments;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.length>1&&void 0!==r[1]?r[1]:{},e.next=3,ev.patch("/v1/operations/vehicles/".concat(t,"/status"),n);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},X4="Steamatic/Manage/FormOptions/SET_VEHCILE_DATA",$4="Steamatic/Manage/FormOptions/SET_BELONGS_TO_LOCATION",e7={vehcileFormData:[],locations:[]},t7=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e7,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case X4:return Object(c.a)(Object(c.a)({},e),{},{vehcileFormData:t.payload});case $4:return Object(c.a)(Object(c.a)({},e),{},{locations:t.payload});default:return e}},n7=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z4.searchVehicles(e);case 2:r=t.sent,n({type:X4,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},r7=function(e){return function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n({type:X4,payload:e});case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()},a7={getAllLocations:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/locations",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLocation:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/locations/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createLocation:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/locations",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateLocation:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/locations/".concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteLocation:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/locations/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},o7="Steamatic/Settings/Locations/LOAD",i7="Steamatic/Settings/Locations/LOAD_COMPLETE",c7="Steamatic/Settings/Locations/RESET",s7="Steamatic/Settings/Locations/ERROR",l7="Steamatic/Settings/Locations/CREATE_LOCATION",u7="Steamatic/Settings/Locations/UPDATE_LOCATION",d7="Steamatic/Settings/Locations/REMOVE_LOCATION",p7=Object(sg.combineReducers)({data:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case i7:return t.payload;case c7:return null;case u7:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.map((function(e){return e.id===t.payload.id?Object(c.a)(Object(c.a)({},e),t.payload.data):e}))}):null;case d7:return e?Object(c.a)(Object(c.a)({},e),{},{data:e.data.filter((function(e){return e.id!==t.payload.id}))}):null;case l7:return e?Object(c.a)(Object(c.a)({},e),{},{data:[t.payload.locations].concat(Object(aj.a)(e.data))}):null;default:return e}},error:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case s7:return t.payload;case i7:case c7:return null;default:return e}},loading:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case o7:return!0;case i7:case c7:return!1;default:return e}},ready:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{type:null};switch(t.type){case i7:return!0;case c7:return!1;default:return e}}}),h7=Object(sg.combineReducers)({form:fX.a,user:fP,jobsInfo:lw,contacts:qk,notesAndReplies:gM,editedReply:pL,currentJob:UD,currentJobPhotos:pV,currentJobDocuments:Dz,currentJobSurvey:rF,currentJobContacts:RP,invoices:vZ,invoice:AX,invoicesInfo:GX,purchaseOrdersInfo:Q$,purchaseOrders:K$,purchaseOrder:h0,creditNotesInfo:KX,creditNotes:YZ,creditNote:s$,modal:ow,forwardPayments:i1,forwardPaymentsReceived:l1,forwardPaymentsReceivedInfo:u1,receivePayments:E1,finance:I0,accountTransactions:D1,runsFromLocation:B1,constants:z1,invoicePayments:s2,materials:Y1,measureUnits:X1,contactStatuses:r2,financialReport:v2,eqipments:p2,allCountries:L2,allStates:B2,trialBalance:G2,gstSummary:K2,jobTags:e5,assessmentReports:l5,currentJobUsageAndActuals:kH,userRoles:f5,inventories:O5,warehousing:g3,formOption:$3,vehcileFormOption:t7,document:I4,waterForm:MK,locations:p7}),b7=(n(904),[bX.a]),f7=Object(sg.createStore)(h7,Object(hX.composeWithDevTools)(sg.applyMiddleware.apply(void 0,b7))),m7=function(e){var t;try{t=JSON.parse(e.body)}catch(n){t={sender:{},context:{},target:{}}}return{id:e.id,user_id:e.user_id,body:t,created_at:e.created_at,deleted_at:e.deleted_at,type:e.type}};function j7(){var e=Object(f.a)(["\n  color: ",";\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  background: ","\n  width: 36px;\n  height: 36px;\n  border-radius: 99px;\n  border: 10px solid ","4a;\n  background-clip: padding-box;\n  margin-right: 8px;\n"]);return j7=function(){return e},e}var v7=mC.ColoredDiv,O7=y.default.div(j7(),_.white,_.orange1,_.orange1),g7=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",n=arguments.length>2?arguments[2]:void 0;return Object(a.jsx)("table",{onClick:n,children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:Object(a.jsx)(O7,{children:"!"})}),Object(a.jsx)("td",{children:Object(a.jsx)(v7,{weight:lm.medium,fontSize:sm.medium,children:e})})]}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsx)(v7,{color:_.gray5,children:t})})]})]})})};function x7(e){var t=e.title,n=void 0===t?"Notification":t,r=e.body,a=e.icon,o=e.onClick;if(document.hasFocus())Oj(uj.Info,g7(n,r,o),{autoClose:2e4});else if("Notification"in window)if("granted"===Notification.permission){var i=new Notification(n,{body:r,icon:a});o&&(i.onclick=o)}else"denied"!==Notification.permission&&Notification.requestPermission((function(e){var t=new Notification(n,{body:r,icon:a});o&&(t.onclick=o)}));else Oj(uj.Info,g7(n,r,o),{autoClose:1e4});y7()}var y7=Object(m.debounce)((function(){f7.dispatch(jP())}),1e3);function _7(e,t){var n=[];for(var r in Dx)Dx[r]&&n.push(Dx[r]);var a=Nj().private("user-".concat(e));n.forEach((function(e){a.listen(".".concat(e),(function(n){e===Dx.JOB_CREATED&&"/jobs/inbox"===t.location.pathname&&Gy.emit(Dx.JOB_CREATED),function(e,t){var n=m7(e.notification);if(n.body){var r=n.body,a=r.text,o=r.sender;x7({body:a,icon:o&&o.avatar&&o.avatar.url,onClick:w7(n,t,!0)})}}(n,t)}))})),[".inventory_item.created",".inventory_item.deleted","inventory_item.status_changed"].forEach((function(e){})),a.listen(".inventory_item.created",(function(e){Gy.emit(Ix.WarehousingInventoryItemAdded,e.target)})),a.listen(".inventory_item.deleted",(function(e){Gy.emit(Ix.WarehousingInventoryItemRemoved,e.target)})),a.listen(".inventory_item.status_changed",(function(e){Gy.emit(Ix.WarehousingInventoryItemUpdated,e.target)}))}function w7(e,t,n){var r=function(r){return Object(lj.a)(sj.a.mark((function a(){return sj.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(t.push(r),!n){a.next=5;break}return a.next=4,zE.removeNotification(e.id);case 4:f7.dispatch(jP());case 5:case"end":return a.stop()}}),a)})))},a=[Dx.JOB_CREATED,Dx.JOB_USER_ASSIGNED,Dx.JOB_UPDATED,Dx.JOB_TEAM_ASSIGNED],o=[Dx.JOB_MESSAGE_ATTACHED,Dx.JOB_NOTE_ATTACHED],i=[Dx.INVOICE_NOTE_ATTACHED,Dx.INVOICE_APPROVE_REQUEST],c=[Dx.PURCHASE_ORDER_NOTE_ATTACHED,Dx.PURCHASE_ORDER_APPROVE_REQUEST],s=[Dx.CREDIT_NOTE_NOTE_ATTACHED,Dx.CREDIT_NOTE_APPROVE_REQUEST],l=[Dx.ASSESSMENT_REPORT_APPROVE_REQUEST],u=e.body.context&&e.body.context.type,d=e.body.context&&e.body.context.id,p=e.body.target&&e.body.target.id,h="/job/".concat(p,"/details"),b="/job/".concat(p,"/notes-and-replies?").concat(u,"=").concat(d),f="/contacts/category/edit/".concat(p,"?").concat(u,"=").concat(d),m="/finance/invoices/details/".concat(p,"?").concat(u,"=").concat(d),j="/finance/purchase-orders/details/".concat(p,"?").concat(u,"=").concat(d),v="/finance/credit-notes/details/".concat(p,"?").concat(u,"=").concat(d),O="/usage-and-actuals/".concat(d,"/buildCosting/").concat(p);if(a.includes(e.type))return r(h);if(o.includes(e.type))return r(b);if(Dx.CONTACT_NOTE_ATTACHED===e.type)return r(f);if(i.includes(e.type))return r(m);if(c.includes(e.type))return r(j);if(s.includes(e.type))return r(v);if(l.includes(e.type))return r(O);if([Dx.USER_MENTIONED].includes(e.type))switch(e.body.target.type){case Rx.Job:return r(b);case Rx.Contact:return r(f);case Rx.Invoice:return r(m);case Rx.PurchaseOrder:return r(j);case Rx.CreditNote:return r(v);case Rx.AssessmentReport:return r(O)}return function(){return null}}function S7(){var e=Object(f.a)(["\n  overflow-y: auto;\n  max-height: calc(100vh - 160px);\n"]);return S7=function(){return e},e}function k7(){var e=Object(f.a)(["\n  padding: 10px 20px;\n  border-bottom: 1px solid ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n  }\n\n  :last-child {\n    border: 0;\n  }\n"]);return k7=function(){return e},e}function C7(){var e=Object(f.a)(["\n  padding: 0 20px;\n  height: 60px;\n  border-bottom: 1px solid ",";\n\n  & > .title {\n    font-size: ",";\n  }\n"]);return C7=function(){return e},e}function N7(){var e=Object(f.a)(["\n  width: 420px;\n  position: absolute;\n  overflow: hidden;\n  right: -30px;\n  top: 0;\n  background: ",";\n  color: ",";\n  border-bottom-right-radius: 4px;\n  border-bottom-left-radius: 4px;\n  box-shadow: 0 5px 20px rgba(0, 0, 0, 0.1);\n"]);return N7=function(){return e},e}function E7(){var e=Object(f.a)(["\n  width: 100%;\n  position: relative;\n  top: 0px;\n\n  :before {\n    content: '';\n    position: absolute;\n    bottom: 0;\n    width: 0;\n    height: 0;\n    border-style: solid;\n    border-width: 0 8px 8px 8px;\n    border-color: transparent transparent "," transparent;\n    z-index: 99;\n  }\n"]);return E7=function(){return e},e}var A7=y.default.div(E7(),_.white),I7=y.default.div(N7(),_.white,_.black0),T7=y.default.div(C7(),_.gray2,sm.medium),R7=y.default.div(k7(),_.gray2,_.gray0),D7=y.default.div(S7()),M7=mC.Link,L7=mC.AvatarSquare,P7=mC.ColoredDiv,F7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.showNotification=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=m7(n),a=e.props,o=a.dispatch,i=a.closeDropDown,c=a.history,e.setState({loading:!0}),w7(r,c)(),i(),n.deleted_at){t.next=10;break}return t.next=8,zE.removeNotification(n.id);case 8:return t.next=10,o(jP());case 10:e.setState({loading:!1});case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showTheseAll=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.notifications.forEach((function(e){x7({body:m7(e).body.text})})),e.markAllAsRead();case 3:case"end":return t.stop()}}),t)}))),e.markAllAsRead=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.dispatch,!((r=e.getUnreadNotifications().map((function(e){return zE.removeNotification(e.id)}))).length>0)){t.next=9;break}return e.setState({loading:!0}),t.next=6,Promise.all(r);case 6:return t.next=8,n(jP());case 8:e.setState({loading:!1});case 9:case"end":return t.stop()}}),t)}))),e.getUnreadNotifications=function(){return e.props.notifications.filter((function(e){return!e.deleted_at}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.notifications,r=t.user.userNotifications.loading,o=this.state.loading,i=this.getUnreadNotifications().length;return Object(a.jsx)(A7,{className:"d-flex justify-content-center",children:Object(a.jsxs)(I7,{children:[Object(a.jsxs)(T7,{className:"d-flex align-items-center justify-content-between",children:[Object(a.jsx)("div",{className:"title",children:"Notifications"}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(M7,{onClick:this.showTheseAll,margin:"0 15px 0 0",children:"Show all"}),i>0&&Object(a.jsx)(M7,{onClick:this.markAllAsRead,children:"Mark all as read"})]})]}),Object(a.jsx)(D7,{children:n&&n.map((function(t){var n=m7(t).body,r=n.text,o=n.sender,i=mm(o);return Object(a.jsxs)(R7,{className:"d-flex align-items-center",onClick:function(){return e.showNotification(t)},children:[Object(a.jsx)(L7,{wh:35,margin:"0 20px 0 0",backgroundColor:o?void 0:"transparent",backgroundUrl:o&&o.avatar&&o.avatar.url,fontSize:sm.medium,children:!i.invalid&&i.initials}),Object(a.jsxs)("div",{children:[Object(a.jsx)(P7,{weight:t.deleted_at?lm.normal:lm.bold,textOverflow:"ellipsis",children:r}),Object(a.jsxs)(P7,{color:_.gray5,textOverflow:"ellipsis",children:[!i.invalid&&"".concat(i.full_name,", "),pm()(t.created_at).format(lv)]})]})]},t.id)}))}),(r||o)&&Object(a.jsx)(Nv,{size:40,color:_.white})]})})}}]),n}(p.PureComponent),U7=Object(sg.compose)(O.g,Object(b.b)((function(e){return{user:e.user}})))(F7);function B7(){var e=Object(f.a)(["\n  & * {\n    stroke: "," !important;\n    fill: "," !important;\n  }\n\n  &:hover * {\n    stroke: "," !important;\n    fill: "," !important;\n  }\n"]);return B7=function(){return e},e}var V7,J7,q7=Object(y.default)(gv(["color","fill","hoverColor"])(cm))(B7(),(function(e){return e.color}),(function(e){return e.fill&&e.color}),(function(e){return e.hoverColor?e.hoverColor:e.color}),(function(e){return e.fill&&(e.hoverColor?e.hoverColor:e.color)})),z7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.fill,r=e.hoverColor;return Object(a.jsx)(q7,Object(c.a)(Object(c.a)({},this.props),{},{color:t,fill:n,hoverColor:r}))}}]),n}(p.PureComponent),G7=n(197),W7=n.n(G7);!function(e){e.space="wh:s",e.container="wh:c",e.inventory="wh:i",e.inventory_item="wh:ii",e.equipment="lme:eq"}(J7||(J7={}));var H7=(V7={},Object(k.a)(V7,J7.space,"space"),Object(k.a)(V7,J7.container,"container"),Object(k.a)(V7,J7.inventory,"inventory"),Object(k.a)(V7,J7.inventory_item,"inventory item"),Object(k.a)(V7,J7.equipment,"equipment"),V7),Y7=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.processing=!1,e.handleScan=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing){t.next=24;break}if(e.processing=!0,e.setState({working:!0}),!n){t.next=22;break}if(t.prev=4,r=JSON.parse(atob(n)),(o=Object.keys(J7).map((function(e){return J7[e]}))).includes(r.t)){t.next=11;break}e.setState({error:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Unsupported type ",H7[r.t]||r.t," in global scan. Please try another QR Code."]}),Object(a.jsx)("p",{className:"text-info",children:"Only following types can be scanned using global scan option"}),Object(a.jsx)("ul",{className:"text-info pl-0",children:o.map((function(e){return Object(a.jsx)("ol",{children:H7[e]},e)}))})]})}),t.next=16;break;case 11:return t.next=13,e.fetchScannedItem(r);case 13:i=t.sent,e.setState({error:void 0,result:Object(c.a)(Object(c.a)({},r),{},{item:i})}),e.publishScanHistory(r.t,i);case 16:t.next=22;break;case 18:t.prev=18,t.t0=t.catch(4),console.log(t.t0),e.setState({error:"Invalid QR Code. Please try another QR Code."});case 22:e.processing=!1,e.setState({working:!1});case 24:case"end":return t.stop()}}),t,null,[[4,18]])})));return function(e){return t.apply(this,arguments)}}(),e.handleError=function(t){e.setState({error:t.message}),console.error(t.message)},e.publishScanHistory=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Dm();case 3:r=e.sent,e.t0=t,e.next=e.t0===J7.equipment?7:9;break;case 7:return ZW.saveEquipmentScannedLocation(n.id,{location:"(".concat(r.coords.latitude,",").concat(r.coords.longitude,")")}),e.abrupt("break",9);case 9:e.next=13;break;case 11:e.prev=11,e.t1=e.catch(0);case 13:case"end":return e.stop()}}),e,null,[[0,11]])})));return function(t,n){return e.apply(this,arguments)}}(),e.fetchScannedItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n||e.state.result||{},a=r.t,o=r.id,r.pid,t.t0=a,t.next=t.t0===J7.inventory?4:t.t0===J7.inventory_item?7:t.t0===J7.equipment?10:t.t0===J7.space?13:t.t0===J7.container?16:19;break;case 4:return t.next=6,eQ.getInventoryInfo(o);case 6:return t.abrupt("return",t.sent.data);case 7:return t.next=9,eQ.getInventoryItem(o);case 9:return t.abrupt("return",t.sent.data);case 10:return t.next=12,ZW.getEquipmentInfo(o);case 12:return t.abrupt("return",t.sent);case 13:return t.next=15,u3.getStorageSpace(o);case 15:return t.abrupt("return",t.sent);case 16:return t.next=18,u3.getStorageContainer(o);case 18:return t.abrupt("return",t.sent);case 19:return t.abrupt("return",null);case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleLink=function(t){t.preventDefault();var n=t.currentTarget.getAttribute("href");n&&e.props.history.push(n),e.props.onClose()},e.renderScanResult=function(t){var n=t||e.state.result||{},r=n.t,o=(n.id,n.pid,n.item),i=null;switch(r){case J7.inventory:return i=o.status===_Y.NEW?"new":"continued",Object(a.jsxs)("a",{href:"/operations/inventories/".concat(i,"/").concat(o.id,"/items"),onClick:e.handleLink,children:["View details of inventory #",o.id]});case J7.inventory_item:return i="continued",Object(a.jsxs)("a",{href:"/operations/inventories/".concat(i,"/").concat(o.inventory_id,"/item/").concat(o.id,"/details"),onClick:e.handleLink,children:["View details of inventory item #",o.id]});case J7.equipment:return Object(a.jsxs)("a",{href:"/operations/warehousing/equipment/".concat(o.id,"/details"),onClick:e.handleLink,children:["View details of equipment #",o.id," - ",o.equipment_category.name]});case J7.space:return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Storage Location"})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Location: "})," ",o.location.name]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Storage Type: "})," ",o.inventory_storage_space_type.name," [",Object(a.jsxs)("span",{className:"badge badge-warning",children:[o.inventory_storage_space_type.is_chargeable?"":"Not ","Chargeable"]}),"]"]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Name: "})," ",o.name]})]});case J7.container:return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Storage Container"})}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Container Type: "})," ",o.inventory_storage_container_type.name]}),Object(a.jsxs)("p",{children:[Object(a.jsx)("strong",{children:"Label: "})," ",o.label]})]})}return null},e.renderModalBody=function(){var t=e.state,n=t.error,r=t.result;return Object(a.jsxs)("div",{className:"qr-reader-wrapper",children:[n&&Object(a.jsx)("p",{className:"p-3 text-danger",children:n}),r&&Object(a.jsx)("div",{className:"p-3",children:e.renderScanResult(r)}),!r&&Object(a.jsx)(W7.a,{delay:300,onError:e.handleError,onScan:e.handleScan,onImageLoad:function(e){console.log("a",e)},style:{width:"100%"}})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=(e.title,e.onClose),r=this.state.working;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{bodyClass:"p-0",onClose:n,loading:r,title:"Scan QR Code",body:this.renderModalBody()})})}}]),n}(p.PureComponent),Q7=Object(O.g)(Y7);function K7(){var e=Object(f.a)(["\n  color: ",";\n  :hover {\n    color: ",";\n  }\n"]);return K7=function(){return e},e}function Z7(){var e=Object(f.a)(["\n  color: ",";\n  :hover {\n    color: ",";\n  }\n"]);return Z7=function(){return e},e}function X7(){var e=Object(f.a)(["\n  position: absolute;\n  width: 8px;\n  height: 8px;\n  right: 1px;\n  top: 1px;\n  border-radius: 9px;\n  border: 1.1px solid ",";\n  background: ",";\n"]);return X7=function(){return e},e}function $7(){var e=Object(f.a)(["\n  position: relative;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  margin: 10px;\n"]);return $7=function(){return e},e}function e8(){var e=Object(f.a)(["\n  cursor: pointer;\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n    fill: none;\n  }\n  ","\n"]);return e8=function(){return e},e}function t8(){var e=Object(f.a)(["\n  background: ",";\n  height: 55px;\n  padding: 0 15px;\n"]);return t8=function(){return e},e}var n8=y.default.nav(t8(),_.menu),r8=Object(y.default)(cm)(e8(),_.white,(function(e){var t=e.brightness;return t?"filter: brightness(".concat(t,")"):""})),a8=y.default.div($7()),o8=y.default.div(X7(),_.white,_.red1),i8=Object(vj.css)({"& .dropdown-menu":{border:"0",background:"transparent",padding:"0"}}),c8=Object(y.default)(v.b)(Z7(),(function(e){return e.active?_.white:_.gray2}),_.white),s8=Object(y.default)(gv(["active"])("span"))(K7(),(function(e){return e.active?_.white:_.gray2}),_.white),l8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showNotifications:!1},e.isRouteItemActive=function(t){return t.isActive?t.isActive():Object(O.f)(e.props.location.pathname,{path:t.path})},e.renderNotificationMenu=function(t){return Object(a.jsx)(U7,{closeDropDown:t.close,notifications:e.props.user.userNotifications.data.data})},e.getUnreadNotifications=function(){return e.props.user.userNotifications.data.data.filter((function(e){return!e.deleted_at}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"scan":return Object(a.jsx)(Q7,Object(c.a)({onClose:e.hideModal,isOpen:!0},r))}return null},e.renderDropdownTrigger=function(t){return function(n){return Object(a.jsx)(s8,{active:!!e.isRouteItemActive(t),className:"nav-link".concat(e.isRouteItemActive(t)?" active":""),onClick:n.toggle,style:{cursor:"pointer"},children:t.name})}},e.renderDropdownItems=function(t){return function(n){return Object(a.jsx)(a.Fragment,{children:t.items.map((function(t,r){return Object(a.jsxs)(p.Fragment,{children:[0!==r&&Object(a.jsx)("div",{className:"dropdown-divider"}),t.map((function(t){var r=x()("dropdown-item",{active:e.isRouteItemActive(t)}),o=x()("dropdown-item",{disabled:null===t||void 0===t?void 0:t.disabled});return Object(a.jsx)(v.b,{to:t.path,className:(null===t||void 0===t?void 0:t.disabled)?o:r,onClick:n.close,children:t.name},t.path)}))]},r)}))})}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(jP())}},{key:"render",value:function(){var e=this,t=this.props,n=t.routes,r=t.user.userNotifications,o=r.data,i=r.loading,c=t.location.pathname,s=this.getUnreadNotifications().length;return Object(a.jsxs)(n8,{className:"navbar navbar-expand-lg navbar-dark fixed-top justify-content-between flex-nowrap",children:[this.renderModal(),Object(a.jsx)("div",{className:"h-100 d-flex align-items-center flex-nowrap",children:n.map((function(t){return Object(a.jsx)("div",{children:t.items?Object(a.jsx)(K_,{trigger:e.renderDropdownTrigger(t),menu:e.renderDropdownItems(t)}):Object(a.jsx)(c8,{active:!!e.isRouteItemActive(t),to:t.path,className:"nav-link",children:t.name})},t.path)}))}),Object(a.jsxs)("div",{className:"d-flex align-items-center h-100",children:[Object(a.jsx)(a8,{children:Object(a.jsx)(z7,{style:{cursor:"pointer"},color:_.white,fill:!0,name:Xf.QRCode,onClick:this.showModal("scan")})}),Object(a.jsx)(a8,{children:!c.startsWith("/operations/schedule/")&&Object(a.jsx)(z7,{style:{cursor:"pointer"},color:_.white,name:Xf.Printer,onClick:window.print})}),Object(a.jsx)(nw,{direction:"right",className:"".concat(i8),trigger:function(){return Object(a.jsxs)(a8,{children:[i&&Object(a.jsx)(Nv,{size:30,color:_.menu}),o.data.length>0&&Object(a.jsx)(um.a,{className:"overlapping",id:"user-notifications",place:"left",effect:"solid"}),s>0&&Object(a.jsx)(o8,{}),Object(a.jsx)(r8,{name:Xf.Notification,"data-tip":o.data&&(s>0?"You have ".concat(s>9?"more than ":"").concat(s," unread notification").concat(s>1?"s":""):""),"data-for":"user-notifications",size:20})]})},renderInternal:this.renderNotificationMenu}),Object(a.jsx)(a8,{children:Object(a.jsx)(r8,{name:Xf.Search,size:20})}),Object(a.jsx)(pX,{})]})]})}}]),n}(p.PureComponent),u8=Object(sg.compose)(O.g,Object(b.b)((function(e){return{user:e.user}})))(l8),d8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onClose=function(){var t=e.props,n=t.onClose,r=t.onReject,a=t.hash;r&&r();var o=new CustomEvent("modal-confirm-".concat(a||""),{detail:!1});window.dispatchEvent(o),n()},e.onSuccess=function(){var t=e.props,n=t.onClose,r=t.onResolve,a=t.hash;r&&r();var o=new CustomEvent("modal-confirm-".concat(a||""),{detail:!0});window.dispatchEvent(o),n()},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary btn-confirm",onClick:this.onSuccess,autoFocus:!0,children:"Confirm"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.body,o=e.width;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:this.onClose,footer:this.renderFooter(),body:r,title:n||"",width:o||void 0})})}}]),n}(p.PureComponent);function p8(){var e=Object(f.a)(["\n  background: ",";\n  padding: 20px;\n  color: ",";\n"]);return p8=function(){return e},e}var h8=y.default.h1(p8(),_.red1,_.white),b8=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"container h-100",children:Object(a.jsx)("div",{className:"row align-items-center justify-content-center h-100",children:Object(a.jsxs)("div",{className:"col-lg-12",children:[Object(a.jsx)(h8,{children:"Unauthorized Access"}),"You don't have permission to access this page"]})})})}}]),n}(p.PureComponent);var f8=function(e){var t=e.loading,n=e.searchPlaceholder,r=e.disableActions,o=e.children,i=e.hint,c=e.onAddAction,s=e.searchLoading,l=e.onSearch,u=e.otherActions;return Object(a.jsxs)(nj,{children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"finance-sidebar-tooltip"}),Object(a.jsx)(S.Consumer,{children:function(e){return e.isOpen&&Object(a.jsx)("div",{className:"pl-4 pr-5 my-4",children:Object(a.jsx)(aC,{loading:!!s,onSearchValueChange:l,placeholder:n||"Search..."})})}}),Object(a.jsxs)("div",{className:"position-relative",children:[t&&Object(a.jsx)(Nv,{size:40,color:_.gray1}),o]}),Object(a.jsx)(gk,{className:"d-flex flex-row align-items-center",children:r?Object(a.jsx)(a.Fragment,{}):u&&(null===u||void 0===u?void 0:u.length)<=0?Object(a.jsx)(vk,{name:Xf.Add,"data-tip":i,"data-for":"finance-sidebar-tooltip",onClick:c}):Object(a.jsx)(nw,{iconName:Xf.Add,items:u,disabled:!(null===u||void 0===u?void 0:u.length)})})]})};function m8(){var e=Object(f.a)(["\n  color: ",";\n"]);return m8=function(){return e},e}var j8=y.default.span(m8(),_.gray5),v8=function(e){var t=e.job,n=e.withoutName,r=e.locationOnly,o=!(void 0!==r&&r)&&t&&t.insurer?t.insurer.contact_name||t.insurer.legal_name:"",i=t&&t.assigned_location&&t.assigned_location.code;return Object(a.jsx)(j8,{children:t?Object(a.jsxs)(a.Fragment,{children:[t.id,i&&"-".concat(i),n?"":o&&": ".concat(o)]}):Object(a.jsx)(a.Fragment,{children:"\xa0\xa0\xa0\u2014\xa0\xa0\xa0"})})};function O8(e){return e.substr(0,23).replace(/[^\d\s]|\s(?=\s)/g,"").replace(/(^\d{4}|\s+\d{4})(\d)/g,"$1 $2")}function g8(e){return function(e){return e.toUpperCase()}(e).replace(/[^a-zA-Z\s\.'-]/g,"").replace(/\s+/g," ")}function x8(e){return e&&e.charAt(0).toUpperCase()+e.slice(1)}function y8(e){var t=Om(e.replace(/[^\d\.]/g,"").replace(/(\.\d\d)(\d)/g,"$1"));return t?"$ ".concat(t):""}function _8(e){return e.replace(/[^\d\.]/g,"").replace(/(\.)(\d*)(\.)$/g,"$1$2")}function w8(e){var t,n=null===e||void 0===e||null===(t=e.replace(/[^\d\.]/g,""))||void 0===t?void 0:t.replace(/(\.)(\d*)(\.)$/g,"$1$2");return n?"$ ".concat(n):""}function S8(e){var t=_8(e);return parseFloat(t)>100?"100":t}function k8(e){return e.replace(/[^0-9.]/g,"").replace(/\.{2,}/g,".").replace(/(\d*\.\d{1,2}).*/g,"$1")}function C8(){var e=Object(f.a)(["\n  font-size: ",";\n  line-height: 0.7;\n"]);return C8=function(){return e},e}function N8(){var e=Object(f.a)(["\n  color: ",";\n"]);return N8=function(){return e},e}function E8(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return E8=function(){return e},e}function A8(){var e=Object(f.a)(["\n  line-height: 1.75;\n  font-size: ",";\n"]);return A8=function(){return e},e}function I8(){var e=Object(f.a)(["\n  flex-basis: 210px;\n  text-align: left;\n  background: ",";\n  padding: 15px 20px;\n"]);return I8=function(){return e},e}function T8(){var e=Object(f.a)(["\n  flex-basis: 100%;\n  background: ",";\n  border-bottom: 1px solid ",";\n  padding: 15px 20px;\n"]);return T8=function(){return e},e}function R8(){var e=Object(f.a)(["\n  display: flex;\n  width: calc(100% + 40px);\n  margin: -30px -20px 15px;\n"]);return R8=function(){return e},e}var D8=y.default.div(R8()),M8=y.default.div(T8(),_.gray1,_.gray2),L8=y.default.div(I8(),_.gray2),P8=y.default.span(A8(),sm.medium),F8=y.default.div(E8(),lm.bold),U8=y.default.div(N8(),_.gray4),B8=Object(y.default)(U8)(C8(),sm.smaller),V8=function(e){var t=e.invoiceData,n=e.showRate;return Object(a.jsxs)(D8,{children:[Object(a.jsxs)(M8,{children:[Object(a.jsxs)(F8,{children:["Invoice No. #",t.id]}),Object(a.jsx)(F8,{children:t.recipient_name}),t.job&&Object(a.jsxs)(U8,{children:["Job No. #",t.job.id,t.job.assigned_location&&Object(a.jsxs)("span",{children:["\u2013",t.job.assigned_location.code]})]})]}),Object(a.jsxs)(L8,{children:[Object(a.jsx)("div",{children:"AMOUNT TO PAY"}),Object(a.jsx)(F8,{children:Object(a.jsx)(P8,{children:t.amount_due&&vm(t.amount_due)})}),n&&Object(a.jsx)(B8,{children:"PLUS 1.75% + 30c"})]})]})};function J8(){var e=Object(f.a)(["\n  margin-top: 20px;\n  padding-top: 35px;\n  border-top: 1px solid ",";\n"]);return J8=function(){return e},e}function q8(){var e=Object(f.a)(["\n  margin-top: -3px;\n  margin-right: 12px;\n"]);return q8=function(){return e},e}function z8(){var e=Object(f.a)(["\n  background: ",";\n  border-color: ",";\n"]);return z8=function(){return e},e}function G8(){var e=Object(f.a)(["\n  background: ",";\n  border-color: ",";\n"]);return G8=function(){return e},e}function W8(){var e=Object(f.a)(["\n  width: 100%;\n  margin-top: 25px;\n  padding: 10px 15px;\n  border-style: solid;\n  border-width: 1px 1px 1px 8px;\n"]);return W8=function(){return e},e}function H8(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return H8=function(){return e},e}var Y8=y.default.form(H8()),Q8=y.default.div(W8()),K8=Object(y.default)(Q8)(G8(),_.orange0,_.orange1),Z8=Object(y.default)(Q8)(z8(),_.green1,_.green2),X8=Object(y.default)(cm)(q8()),$8=y.default.div(J8(),_.gray2),e6=function(e){var t=e.message;return Object(a.jsxs)(K8,{children:[Object(a.jsx)(X8,{name:Xf.Alert,size:18}),t]})},t6=function(){return Object(a.jsx)(Z8,{children:"Your payment was successful."})},n6=function(e){var t=e.receipt;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row mt-5",children:[Object(a.jsx)("div",{className:"col-3",children:"Date Paid:"}),Object(a.jsx)("div",{className:"col-3",children:t.paid_at.format(iv)})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Receipt Number:"}),Object(a.jsx)("div",{className:"col-3",children:t.external_transaction_id||t.transaction_id})]}),Object(a.jsxs)("div",{className:"row mt-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Amount:"}),Object(a.jsx)("div",{className:"col-3",children:vm(t.amount)})]})]})},r6=n(584),a6=n.n(r6);function o6(){var e=Object(f.a)(["\n  max-width: 120px;\n  flex-basis: 40%;\n  margin: 0 5px;\n  &:first-child {\n    margin-right: 25px;\n  }\n  &.no-label-input {\n    margin-top: 2rem;\n  }\n"]);return o6=function(){return e},e}var i6=y.default.div(o6()),c6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hasReceipt:!1,errorMessage:"",securityLabel:"CVV",securityMask:ex},e.receipt=void 0,e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.onSubmit(n);case 3:return e.receipt=t.sent,e.setState({hasReceipt:!0,errorMessage:""}),t.abrupt("return",e.receipt);case 8:return t.prev=8,t.t0=t.catch(0),e.setState({errorMessage:t.t0.error_message,fieldErrors:t.t0.fields}),t.abrupt("return",Promise.reject());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.receipt=void 0,e.setState({hasReceipt:!1,errorMessage:""}),e.props.reset(),e.props.onClose()},e.onChangeCardNumber=function(t){var n,r=a6.a.number(null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value);if(r.isValid){var a,o,i,c,s=3===(null===(a=r.card)||void 0===a||null===(o=a.code)||void 0===o?void 0:o.size)?"999":ex;e.setState({securityLabel:null===(i=r.card)||void 0===i||null===(c=i.code)||void 0===c?void 0:c.name,securityMask:s})}},e.renderError=function(){var t,n,r,o=e.state,i=o.fieldErrors,c=o.errorMessage,s=[];i?(null===(t=i.cvv)||void 0===t||t.filter((function(e){return s.push(Object(a.jsx)(e6,{message:e}))})),null===(n=i.expiry_month)||void 0===n||n.filter((function(e){return s.push(Object(a.jsx)(e6,{message:e}))})),null===(r=i.expiry_year)||void 0===r||r.filter((function(e){return s.push(Object(a.jsx)(e6,{message:e}))}))):s.push(Object(a.jsx)(e6,{message:c}));return s},e.renderBody=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(V8,{invoiceData:e.props.invoiceData,showRate:!0}),Object(a.jsx)(mC.Link,{onClick:e.props.onSwitchPaymentType,children:"Change to direct deposit payment"}),e.state.errorMessage&&e.renderError(),e.state.hasReceipt&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(t6,{}),e.receipt&&Object(a.jsx)(n6,{receipt:e.receipt})]}),!e.state.hasReceipt&&Object(a.jsxs)(Y8,{onSubmit:e.props.handleSubmit(e.onSubmit),autoComplete:"off",id:"CreditCardPaymentModalForm",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(Hv.a,{name:"name",component:yg,validate:[Dv,zv],normalize:g8,label:"Name"}),Object(a.jsx)(Hv.a,{name:"number",component:yg,validate:[Dv,qv],normalize:O8,label:"Card Number",onChange:e.onChangeCardNumber})]})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"d-flex col-9",children:[Object(a.jsx)(i6,{children:Object(a.jsx)(Hv.a,{name:"cvv",component:yg,validate:Dv,mask:e.state.securityMask,maskChar:null,label:e.state.securityLabel})}),Object(a.jsx)(i6,{children:Object(a.jsx)(Hv.a,{name:"expiry_month",component:xO,options:n.months,validate:Dv,label:"Expiry"})}),Object(a.jsx)(i6,{className:"no-label-input",children:Object(a.jsx)(Hv.a,{name:"expiry_year",component:xO,options:n.years,validate:Dv})})]})}),Object(a.jsxs)($8,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"billing_address1",component:yg,validate:Dv,label:"Billing Address"})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"billing_city",component:yg,validate:Dv,label:"City"})}),Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"billing_country",component:yg,validate:Dv,label:"Country"})})]})]}),Object(a.jsx)($8,{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"email",validate:[Jv],component:yg,label:"Email receipt to:"})})})})]})]})},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",type:"submit",form:"CreditCardPaymentModalForm",disabled:this.props.submitting||this.props.invalid||this.props.invoiceData.amount_due<0,children:"Pay Now"})}},{key:"render",value:function(){return Object(a.jsx)(qO,{isOpen:this.props.isOpen,children:Object(a.jsx)(cg,{onClose:this.onClose,footer:this.state.hasReceipt?void 0:this.renderFooter(),closeCaption:this.state.hasReceipt?"Close":"Cancel",body:this.renderBody(),loading:this.props.submitting,title:"Payment: Credit Card"})})}}]),n}(p.PureComponent);c6.months=Object(m.range)(1,13).map((function(e){return{value:e,label:e<10?"0".concat(e):"".concat(e)}})),c6.years=function(){var e=(new Date).getFullYear();return Object(m.range)(e,e+10).map((function(e){return{value:e,label:e}}))}();var s6=Object(jv.a)({form:"InvoicePaymentCreditCard"})(c6);function l6(){var e=Object(f.a)(["\n  margin-top: 23px;\n  color: ",";\n"]);return l6=function(){return e},e}var u6,d6=y.default.div(l6(),_.gray4),p6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={glAccountInfoLine1:"",glAccountInfoLine2:"",hasReceipt:!1,errorMessage:""},e.receipt=void 0,e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.onSubmit(n);case 3:return e.receipt=t.sent,e.setState({hasReceipt:!0}),t.abrupt("return",e.receipt);case 8:return t.prev=8,t.t0=t.catch(0),e.setState({errorMessage:t.t0.error_message}),t.abrupt("return",Promise.reject());case 12:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.receipt=void 0,e.setState({hasReceipt:!1,errorMessage:""}),e.props.reset(),e.props.onClose()},e.onChangeGLAccount=function(t){e.setState({glAccountInfoLine1:"Name: ".concat(t.name),glAccountInfoLine2:"BSB: ".concat(t.bank_bsb||"-",", Account No: ").concat(t.bank_account_number||"-")})},e.validateAmount=function(t){var n=e.props.invoiceData,r=z0(t);return r<0?"Amount can't be less than 0":r>n.amount_due?"Amount can't be more than ".concat(vm(n.amount_due)):void 0},e.renderBody=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(V8,{invoiceData:e.props.invoiceData}),Object(a.jsx)(mC.Link,{onClick:e.props.onSwitchPaymentType,children:"Change to credit card"}),e.state.errorMessage&&Object(a.jsx)(e6,{message:e.state.errorMessage}),e.state.hasReceipt&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(t6,{}),e.receipt&&Object(a.jsx)(n6,{receipt:e.receipt})]}),!e.state.hasReceipt&&Object(a.jsxs)(Y8,{onSubmit:e.props.handleSubmit(e.onSubmit),autoComplete:"off",id:"DirectDepositModalForm",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"amount",component:yg,validate:[Dv,e.validateAmount],label:"Amount",normalize:y8})})}),Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"paid_at",label:"Date",placeholder:"Date",component:s_,futureEnabled:!0})})}),Object(a.jsxs)("div",{className:"row mt-1",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"gl_account_id",label:"Paid into Account",placeholder:"Select account...",component:xO,options:e.props.glAccounts,validate:Dv,getOptionLabel:k0.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},onChange:e.onChangeGLAccount})}),Object(a.jsxs)(d6,{className:"col-6",children:[Object(a.jsx)("div",{children:e.state.glAccountInfoLine1}),Object(a.jsx)("div",{children:e.state.glAccountInfoLine2})]})]}),Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"reference",component:yg,label:"Reference",placeholder:"Optional reference number or description"})})}),Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{label:"Email receipt to:",name:"email",component:yg,validate:Jv,onChange:function(t){var n;e.props.change("email",null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value)}})})})]})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.initialValues.gl_account_id;e&&this.onChangeGLAccount(e)}},{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",type:"submit",form:"DirectDepositModalForm",disabled:this.props.submitting||this.props.invalid||this.props.invoiceData.amount_due<0,children:"Add Payment"})}},{key:"render",value:function(){return Object(a.jsx)(qO,{isOpen:this.props.isOpen,children:Object(a.jsx)(cg,{onClose:this.onClose,footer:this.state.hasReceipt?void 0:this.renderFooter(),closeCaption:this.state.hasReceipt?"Close":"Cancel",body:this.renderBody(),loading:this.props.submitting,title:"Payment: Direct Deposit"})})}}]),n}(p.PureComponent),h6=Object(jv.a)({form:"PaymentDirectDeposit"})(p6);!function(e){e[e.DirectDeposit=0]="DirectDeposit",e[e.CreditCard=1]="CreditCard"}(u6||(u6={}));var b6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={paymentType:u6.CreditCard},e.receiveCreditCardPayment=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.receivePayment(n,W0.receiveWithCreditCard));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.receiveDirectDepositPayment=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.receivePayment(n,W0.receiveDirectDeposit));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.receivePayment=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r(e.props.invoice.id,n);case 2:return a=t.sent,e.props.onPaymentReceive&&e.props.onPaymentReceive(),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.switchPaymentWindow=function(){e.setState((function(e){return{paymentType:e.paymentType===u6.CreditCard?u6.DirectDeposit:u6.CreditCard}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(M0(this.props.invoice.accounting_organization_id))}},{key:"render",value:function(){var e=this.props,t=e.invoice,n=e.onClose,r=this.state.paymentType,o=t.recipient_contact&&t.recipient_contact.mailing_address;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(h6,{invoiceData:t,onSubmit:this.receiveDirectDepositPayment,isOpen:r===u6.DirectDeposit,onClose:n,onSwitchPaymentType:this.switchPaymentWindow,glAccounts:this.payableAccounts,initialValues:{email:t.recipient_contact&&t.recipient_contact.email,paid_at:pm()(),amount:void 0!==t.amount_due?vm(t.amount_due):void 0,gl_account_id:this.payableAccounts&&this.payableAccounts.length>0&&this.payableAccounts[0]||void 0}}),Object(a.jsx)(s6,{initialValues:{email:t.recipient_contact&&t.recipient_contact.email,billing_address1:o&&o.address_line_1,billing_city:o&&o.suburb&&o.suburb.name,billing_country:o&&o.country?o.country.name:"Australia"},invoiceData:t,isOpen:r===u6.CreditCard,onSubmit:this.receiveCreditCardPayment,onClose:n,onSwitchPaymentType:this.switchPaymentWindow})]})}},{key:"payableAccounts",get:function(){return this.props.glAccounts.filter((function(e){return e.enable_payments_to_account&&"Current Liability"!==e.account_type.name&&"Revenue"!==e.account_type.name}))}}]),n}(p.PureComponent),f6=Object(b.b)((function(e){return{glAccounts:e.finance.glAccounts}}))(b6),m6=n(57);function j6(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return j6=function(){return e},e}function v6(){var e=Object(f.a)(["\n  color: ",";\n  margin-bottom: 7px;\n"]);return v6=function(){return e},e}function O6(){var e=Object(f.a)(["\n  margin-right: 10px;\n"]);return O6=function(){return e},e}function g6(){var e=Object(f.a)(["\n  color: "," !important;\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline !important;\n  }\n"]);return g6=function(){return e},e}function x6(){var e=Object(f.a)(["\n  display: ",";\n  justify-content: flex-start;\n  align-items: center;\n  flex-shrink: 0;\n  margin-top: 10px;\n"]);return x6=function(){return e},e}function y6(){var e=Object(f.a)(["\n  margin-bottom: 0px;\n"]);return y6=function(){return e},e}var _6=y.default.div(y6()),w6=y.default.div(x6(),(function(e){return e.visible?"flex":"none"})),S6=y.default.a(g6(),_.blue1),k6=y.default.div(O6()),C6=y.default.div(v6(),_.gray3),N6=y.default.input(j6()),E6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={expanded:!1,inputVal:{}},e.toogleBar=function(){e.setState({expanded:!e.state.expanded})},e.getFilterStyle=function(){return Object(c.a)(Object(c.a)({},mO),{},{container:function(e){return Object(c.a)(Object(c.a)({},e),{},{minWidth:"156px",zIndex:99})}})},e.resetFilter=function(){e.props.resetFilter&&e.props.resetFilter(),e.setState({inputVal:{}}),e.props.handleChange("all")},e.onChangeHandle=function(t,n){e.setState((function(e){var r=e.inputVal;return r[t]=(null===n||void 0===n?void 0:n.target)?n.target.value:n||"",r})),e.props.handleChange(t,n)},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){e.resetFilterBar&&e.resetFilterBar!==this.props.resetFilterBar&&this.setState({inputVal:{}})}},{key:"render",value:function(){var e=this,t=this.state.expanded,n=this.props.filters;return Object(a.jsxs)(_6,{className:"print-hide",children:[Object(a.jsx)(S6,{onClick:this.toogleBar,children:t?"Hide Filter":"Show Filter"})," ".concat(t?"|":""," "),Object(a.jsx)(S6,{onClick:this.resetFilter,children:t?"Reset Filter":""}),Object(a.jsxs)(w6,{visible:t,children:[" ",n.map((function(t){var n=t.label,r=t.filterKey,o=Object(rj.a)(t,["label","filterKey"]);return Object(a.jsxs)(k6,{children:[Object(a.jsx)(C6,{children:n}),"text"===t.type||"date"===t.type?Object(a.jsx)(N6,Object(c.a)({type:t.type,onChange:function(t){return e.onChangeHandle(r,t)},defaultValue:t.defaultValue||"",value:e.state.inputVal[r]||""},o)):t.loadOptions?Object(a.jsx)(yO.a,Object(c.a)({styles:e.getFilterStyle(),onChange:function(t){return e.onChangeHandle(r,t)},value:e.state.inputVal[r]||"",isClearable:!0},o)):Object(a.jsx)(m6.a,Object(c.a)({styles:e.getFilterStyle(),onChange:function(t){return e.onChangeHandle(r,t)},value:e.state.inputVal[r]||"",isClearable:!0},o))]},n)}))]})]})}}]),n}(p.Component),A6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hasReceipt:!1,errorMessage:""},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.invoiceData,t.prev=1,t.next=4,JB.sendInvoiceToCustomer(r.id,n);case 4:return a=t.sent,e.props.onClose(),Oj(uj.Success,"Invoice send to customer successfully"),t.abrupt("return",Promise.resolve(a));case 10:return t.prev=10,t.t0=t.catch(1),e.setState({errorMessage:t.t0.error_message}),t.abrupt("return",Promise.reject());case 14:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.setState({hasReceipt:!1,errorMessage:""}),e.props.reset(),e.props.onClose()},e.renderBody=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(V8,{invoiceData:e.props.invoiceData}),e.state.errorMessage&&Object(a.jsx)(e6,{message:e.state.errorMessage}),Object(a.jsx)(Y8,{onSubmit:e.props.handleSubmit(e.onSubmit),autoComplete:"off",id:"DirectDepositModalForm",children:Object(a.jsx)("div",{className:"row mt-1",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{label:"Email receipt to:",name:"email",component:yg,validate:[Jv,Dv],onChange:function(t){var n;e.props.change("email",null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value)}})})})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",type:"submit",form:"DirectDepositModalForm",disabled:this.props.submitting||this.props.invalid,children:"Send"})}},{key:"render",value:function(){return Object(a.jsx)(qO,{isOpen:this.props.isOpen,children:Object(a.jsx)(cg,{onClose:this.onClose,footer:this.state.hasReceipt?void 0:this.renderFooter(),closeCaption:this.state.hasReceipt?"Close":"Cancel",body:this.renderBody(),loading:this.props.submitting,title:"Send Invoice to Customer"})})}}]),n}(p.PureComponent),I6=Object(jv.a)({form:"PaymentInvoiceSend"})(A6);function T6(){var e=Object(f.a)(["\n  margin-right: 8px;\n"]);return T6=function(){return e},e}function R6(){var e=Object(f.a)(["\n  margin-right: 8px;\n  font-size: ",";\n  vertical-align: top;\n"]);return R6=function(){return e},e}var D6=Object(y.default)(rN)(R6(),sm.normal),M6=y.default.span(T6()),L6=[],P6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={searchLoading:!1,invoiceForPayment:null,invoiceForSend:null,invoiceLoading:!1,invoiceTemplates:[],filters:{locations:L6,recipient_contact_id:null,from_date:"",to_date:"",jobs:L6,virtual_status:""},resetFilterBar:!1},e.searchString="",e.debouncedSearch=Object(m.debounce)((function(t){e.getInvoices(t)}),1e3,{trailing:!0}),e.handleSearch=function(t){e.searchString=t,t?e.debouncedSearch(t):(e.debouncedSearch.cancel(),e.getInvoices())},e.handlePagination=function(t){return e.getInvoices(e.searchString,t)},e.getInvoices=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.match.params.type,!n){t.next=8;break}return e.setState({searchLoading:!0}),t.next=5,e.props.dispatch(xZ({term:n,type:a,page:r}));case 5:e.setState({searchLoading:!1}),t.next=19;break;case 8:if(e.setState({invoiceLoading:!0}),"all"!==a){t.next=14;break}return t.next=12,e.props.dispatch(gZ(a,{per_page:20,page:r||1,sortby:"desc"}));case 12:t.next=16;break;case 14:return t.next=16,e.props.dispatch(_Z({type:a,page:r}));case 16:return t.next=18,e.props.dispatch(WX());case 18:e.setState({invoiceLoading:!1});case 19:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.createInvoice=function(t){t?e.props.history.push("/finance/invoices/create/".concat(t)):e.props.history.push("/finance/invoices/create")},e.openPaymentModal=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),e.setState({invoiceLoading:!0}),n.prev=2,n.next=5,JB.findById(t.id);case 5:a=n.sent,e.setState({invoiceForPayment:a.data,invoiceLoading:!1}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),e.setState({invoiceLoading:!1});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},e.closePaymentModal=function(){e.setState({invoiceForPayment:null})},e.openInvoiceSendModal=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r.preventDefault(),e.setState({invoiceLoading:!0}),n.prev=2,n.next=5,JB.findById(t.id);case 5:a=n.sent,e.setState({invoiceForSend:a.data,invoiceLoading:!1}),n.next=12;break;case 9:n.prev=9,n.t0=n.catch(2),e.setState({invoiceLoading:!1});case 12:case"end":return n.stop()}}),n,null,[[2,9]])})));return function(e){return n.apply(this,arguments)}}()},e.closeInvoiceSendModal=function(){e.setState({invoiceForSend:null})},e.isPayColumnShown=function(t){var n=e.props.match.params.type;return t.has(vx.FINANCE_PAYMENTS_RECEIVE)&&n!==am.draft},e.getActiveMenuItem=function(){var t=e.props.match.params.type;return e.getMenuItems().find((function(e){return e.type===t}))},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=Qv()(e.searchJobsById,1e3),e.loadContacts=function(e){var t={term:e,contact_status:["active"]};return hO.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadContacts=Qv()(e.loadContacts,1e3),e.getFilterInvoices=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.filters,a=e.props.dispatch,e.setState({invoiceLoading:!0}),t.next=5,a(yZ(Object(c.a)(Object(c.a)({per_page:20,page:n||1},r),{},{sortby:"desc"})));case 5:e.setState({invoiceLoading:!1});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilters=function(){var t=e.props,n=t.match.params.type,r=t.locations,a=[{value:om.draft,label:om.draft},{value:om.paid,label:om.paid},{value:om.unpaid,label:om.unpaid},{value:am.overdue,label:am.overdue}];return[{label:"Location",filterKey:"location",options:r,placeholder:"Type to search",getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}},{label:"Contact",filterKey:"contact",loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return hO.getContactName(e)},placeholder:"Type to search"},{label:"From",type:"date",filterKey:"dueDateFrom"},{label:"To",type:"date",filterKey:"dueDateTo"},{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return zy.getJobName(e)},placeholder:"Type to search"},"all"===n&&{label:"Status",filterKey:"status",options:a,getOptionValue:function(e){return null===e||void 0===e?void 0:e.value},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.label},placeholder:"Select..."}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters,a=e.props.match.params.type;switch(t){case"status":r.virtual_status=null===n||void 0===n?void 0:n.value;break;case"location":r.locations=[null===n||void 0===n?void 0:n.id]||!1;break;case"contact":r.recipient_contact_id=null===n||void 0===n?void 0:n.id;break;case"dueDateFrom":if(""!==n.currentTarget.value){var o=pm.a.utc(n.currentTarget.value).format(ov);r.from_date=o}else r.from_date="";break;case"dueDateTo":if(""!==n.currentTarget.value){var i=pm.a.utc(n.currentTarget.value).format(ov);r.to_date=i}else r.to_date="";break;case"jobNumber":r.jobs=[null===n||void 0===n?void 0:n.id]}r.virtual_status="all"===a?r.virtual_status:a,e.setState({filters:Object(c.a)({},r)},(function(){e.getFilterInvoices()}))},e.resetFilter=function(){var t=e.props.match.params.type;e.setState({filters:{locations:L6,recipient_contact_id:null,from_date:"",to_date:"",jobs:L6,virtual_status:"all"===t?"":t}},(function(){e.getFilterInvoices()}))},e.getInvoiceTemplate=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,JB.getInvoicetemplates();case 2:(n=t.sent)&&e.setState({invoiceTemplates:null===n||void 0===n?void 0:n.data});case 4:case"end":return t.stop()}}),t)}))),e.onClickTemplate=function(t){e.createInvoice(t)},e.invoiceTemplates=function(){var t,n=[{name:"Blank Invoice",onClick:e.onClickTemplate}];return null===(t=e.state.invoiceTemplates)||void 0===t||t.filter((function(t){n.push({name:t.name,onClick:function(){return e.onClickTemplate(t.id)}})})),n},e}return Object(l.a)(n,[{key:"getMenuItems",value:function(){var e=this.props.invoicesInfo,t=function(t){var n,r,a=t&&e.data&&(null===(n=e.data[t])||void 0===n?void 0:n.count)>0&&(null===(r=e.data[t])||void 0===r?void 0:r.amount);return a&&vm(a)};return[{path:"/finance/invoices/draft",label:"Drafts",icon:Xf.FileEdit,isActive:this.isActive("/finance/invoices/draft"),type:am.draft,value:t(am.draft)},{path:"/finance/invoices/unpaid",label:"Unpaid",icon:Xf.FileCheck,isActive:this.isActive("/finance/invoices/unpaid"),type:am.unpaid,value:t(am.unpaid)},{path:"/finance/invoices/overdue",label:"Overdue",icon:Xf.FileCash,isActive:this.isActive("/finance/invoices/overdue"),type:am.overdue,value:t(am.overdue)},{path:"/finance/invoices/paid",label:"Paid",icon:Xf.FileCash,type:am.paid,isActive:this.isActive("/finance/invoices/paid"),value:t(am.paid)},{path:"/finance/invoices/all",label:"All Invoices",icon:Xf.File,isActive:this.isActive("/finance/invoices/all")}]}},{key:"componentDidMount",value:function(){this.getInvoices(),this.getInvoiceTemplate()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.type;e.match.params.type!==t&&(this.setState({resetFilterBar:!this.state.resetFilterBar}),this.getInvoices(this.searchString))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"renderTags",value:function(e){var t=this.props.match.params.type,n=this.state.invoiceLoading;return wm(e).map((function(e){return"approved"===e&&"all"===t||n?Object(a.jsx)("div",{},e):Object(a.jsx)(D6,{tag:{name:hm[e],color:Sm(e)}},e)}))}},{key:"renderInvoicesRows",value:function(e){var t=this,n=this.props.invoices.data.data;return n?n.map((function(n){return Object(a.jsxs)(IF,{to:{pathname:"/finance/invoices/details/".concat(n.id),state:{breadcrumbs:[t.getActiveMenuItem()]}},children:[Object(a.jsxs)(EF,{children:["#",n.id]}),Object(a.jsxs)(EF,{children:[Object(a.jsx)(M6,{children:n.recipient_name}),t.renderTags(n)]}),Object(a.jsx)(EF,{children:Object(a.jsx)(v8,{job:n.job,locationOnly:!0})}),Object(a.jsx)(EF,{children:Object(a.jsx)(kS.a,{format:iv,children:n.due_at})}),Object(a.jsx)(EF,{children:vm(n.total_amount)}),Object(a.jsx)(EF,{children:vm(n.balance_due)}),t.isPayColumnShown(e)&&Object(a.jsx)(EF,{children:n.latest_status.status===im.approved&&(n.virtual_status===am.unpaid||n.virtual_status===am.overdue)&&Object(a.jsxs)(a.Fragment,{children:[n.balance_due>1&&Object(a.jsx)(dC,{fontSize:sm.normal,onClick:t.openInvoiceSendModal(n),children:"Send Invoice |"}),Object(a.jsx)(dC,{fontSize:sm.normal,onClick:t.openPaymentModal(n),children:"Pay Now"})]})})]},n.id)})):null}},{key:"renderNoInvoices",value:function(e){return Object(a.jsx)(AF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Invoices..."})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.invoices,r=n.ready,o=n.loading,i=t.invoicesInfo.loading,c=this.state,s=c.searchLoading,l=c.invoiceForPayment,u=c.invoiceLoading,d=c.invoiceForSend,p=this.props.invoices.data,h=p&&p.data,b=!!(r&&h&&h.length>0);return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"invoices-sidebar-tooltip"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/invoices",children:"Invoices"}),Object(a.jsx)(f8,{disableActions:!t.has(vx.FINANCE_INVOICES_MANAGE),onAddAction:e.createInvoice,searchPlaceholder:"Search invoice...",searchLoading:s,onSearch:e.handleSearch,loading:i,hint:"Create new invoice",otherActions:e.invoiceTemplates(),children:e.getMenuItems().map((function(e){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),Object(a.jsx)(Wm,{item:e},e.path)]})}))}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(o||u)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(JC,{children:[Object(a.jsx)("div",{className:"pb-3",children:Object(a.jsx)(E6,{filters:e.getFilters(),handleChange:e.handleFilter,resetFilter:e.resetFilter,resetFilterBar:e.state.resetFilterBar})}),Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Invoice"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Job No."}),Object(a.jsx)(CF,{children:"Due Date"}),Object(a.jsx)(CF,{children:"Total Amount"}),Object(a.jsx)(CF,{children:"Balance Due"}),e.isPayColumnShown(t)&&Object(a.jsx)(CF,{})]})}),Object(a.jsx)(NF,{children:b?e.renderInvoicesRows(t):e.renderNoInvoices(t)})]}),p&&p.pagination&&Object(a.jsx)(oC,{pagination:p.pagination,onChange:e.handlePagination})]})})]}),l&&Object(a.jsx)(f6,{invoice:l,onPaymentReceive:e.getInvoices,onClose:e.closePaymentModal}),d&&Object(a.jsx)(I6,{isOpen:!!d,invoiceData:d,onClose:e.closeInvoiceSendModal,initialValues:{email:d.recipient_contact&&d.recipient_contact.email||""}})]})}})}}]),n}(h.a.PureComponent),F6=Object(sg.compose)(Object(b.b)((function(e){return{invoices:e.invoices,invoicesInfo:e.invoicesInfo,locations:e.user.locations}})),O.g,oj({jobs:{fetch:zy.searchJobs,initialData:null}}))(P6);function U6(){var e=Object(f.a)(["\n  margin-left: 30px;\n"]);return U6=function(){return e},e}function B6(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n"]);return B6=function(){return e},e}function V6(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  text-align: right;\n  white-space: nowrap;\n"]);return V6=function(){return e},e}function J6(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  margin-right: ",";\n  text-transform: capitalize;\n"]);return J6=function(){return e},e}function q6(){var e=Object(f.a)(["\n  padding: 32px 30px 17px 30px;\n  border-bottom: 1px solid ",";\n"]);return q6=function(){return e},e}var z6=y.default.div(q6(),_.gray2),G6=y.default.div(J6(),lm.bold,sm.medium,sm.smaller),W6=y.default.div(V6(),lm.bold,sm.medium),H6=Object(y.default)(rN)(B6(),sm.normal),Y6=y.default.div(U6()),Q6=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1},e.removeTag=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.props.onTagRemove)){t.next=9;break}return e.setState({loading:!0}),t.prev=3,t.next=6,r(n);case 6:return t.prev=6,e.setState({loading:!1}),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[3,,6,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.statusList,o=t.entityName,i=t.tags,c=t.loadingTags,s=t.disabled,l=t.isNew,u=this.state.loading,d=r.includes("draft");return Object(a.jsx)(z6,{className:"d-flex flex-row",children:Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(G6,{children:n?"".concat(d?"Draft":""," ").concat(o):"Create Draft ".concat(o)}),!l&&i&&t.has(vx.TAGS_VIEW)&&Object(a.jsx)(Y6,{children:Object(a.jsx)(bN,{tags:i,onRemove:s?void 0:e.removeTag,loading:c||u})}),Object(a.jsx)(W6,{className:"flex-grow-1",children:n&&"#".concat(n)}),r.map((function(e){return Object(a.jsx)(H6,{tag:{color:Sm(e),name:im[e]}},e)}))]})}})})}}]),n}(p.PureComponent);Q6.defaultProps={statusList:[]};var K6=Q6;function Z6(){var e=Object(f.a)(["\n  border: 1px solid ",";\n\n  thead th {\n    font-weight: ",";\n    color: ",";\n    padding: 5px;\n    padding-left: 10px;\n    height: 50px;\n    line-height: 20px;\n    vertical-align: middle;\n  }\n\n  td {\n    vertical-align: middle;\n    &:first-child {\n      width: 3%;\n    }\n    &:last-child {\n      padding-right: 10px;\n      padding-bottom: 7px;\n      cursor: pointer;\n    }\n  }\n\n  tbody tr:nth-of-type(odd) {\n    background: ",";\n  }\n  tbody .no-item {\n    height: 42px;\n    color: ",";\n    text-align: center;\n  }\n  .form-control {\n    background: white;\n    border: 1px solid ",";\n  }\n"]);return Z6=function(){return e},e}var X6=y.default.table(Z6(),_.gray2,lm.normal,_.gray4,_.gray0,_.gray4,_.gray2),$6=function(e){return Object(a.jsx)(X6,{className:"table table-sm table-striped",children:e.children})},e9=n(62),t9=n.n(e9),n9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selectStyles=e.props.customStyles?Object(c.a)(Object(c.a)({},mO),e.props.customStyles):Object(c.a)(Object(c.a)({},mO),{},{control:function(t,n){return Object(c.a)(Object(c.a)({},t),{},{minHeight:"auto",maxHeight:e.props.isMulti?"inherit":33.5,background:_.white,boxShadow:n.isFocused?"0 0 0 0.2rem ".concat(_.bootstrap.boxShadow):"none",borderColor:n.isFocused?"transparent":_.gray2,":hover":{borderColor:n.isFocused?"transparent":_.gray2}})},dropdownIndicator:function(t){return Object(c.a)(Object(c.a)({},t),{},{padding:3,display:e.props.isDisabled?"none":t.display})}},e.props.additionalStyles),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(m6.a,Object(c.a)(Object(c.a)({},this.props),{},{styles:this.selectStyles}))}}]),n}(p.PureComponent);function r9(){var e=Object(f.a)(["\n  border-top: 2px solid ",";\n  display: table-cell;\n  padding: 10px 40px 10px 10px;\n  font-size: ",";\n  font-weight: ",";\n  text-align: right;\n"]);return r9=function(){return e},e}function a9(){var e=Object(f.a)(["\n  border-top: 2px solid ",";\n  display: table-cell;\n  text-align: left;\n  padding: 10px 130px 10px 10px;\n  font-size: ",";\n  font-weight: ",";\n"]);return a9=function(){return e},e}function o9(){var e=Object(f.a)(["\n  display: table-cell;\n  text-align: right;\n  padding: 10px 40px 10px 10px;\n  font-weight: ",";\n"]);return o9=function(){return e},e}function i9(){var e=Object(f.a)(["\n  display: table-cell;\n  text-align: left;\n  padding: 10px 40px 10px 120px;\n  color: ",";\n"]);return i9=function(){return e},e}function c9(){var e=Object(f.a)(["\n  display: table-row;\n"]);return c9=function(){return e},e}function s9(){var e=Object(f.a)(["\n  display: inline-block;\n  text-align: right;\n"]);return s9=function(){return e},e}var l9=y.default.div(s9()),u9=y.default.div(c9()),d9=y.default.div(i9(),_.gray5),p9=y.default.div(o9(),lm.bold),h9=y.default.div(a9(),_.gray2,sm.medium,lm.bold),b9=y.default.div(r9(),_.gray2,sm.medium,lm.bold),f9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.subTotal,n=e.taxes,r=e.total,o=e.balanceDue,i=e.entityType;return Object(a.jsxs)(l9,{children:[Object(a.jsxs)(u9,{children:[Object(a.jsx)(d9,{children:"Sub-total"}),Object(a.jsx)(p9,{children:vm(t)})]}),Object(a.jsxs)(u9,{children:[Object(a.jsx)(d9,{children:"Tax"}),Object(a.jsx)(p9,{children:vm(n)})]}),Object(a.jsxs)(u9,{children:[Object(a.jsx)(d9,{children:"TOTAL"}),Object(a.jsx)(p9,{children:vm(r)})]}),"invoice"===i&&Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(u9,{children:[Object(a.jsx)(h9,{children:"Balance Due"}),Object(a.jsx)(b9,{children:vm(o)})]})})]})}}]),n}(p.PureComponent);function m9(){var e=Object(f.a)(["\n  text-align: right;\n"]);return m9=function(){return e},e}function j9(){var e=Object(f.a)(["\n  text-align: left;\n"]);return j9=function(){return e},e}function v9(){var e=Object(f.a)(["\n  text-align: ",";\n  width: ",";\n"]);return v9=function(){return e},e}var O9=y.default.td(v9(),(function(e){return e.align&&e.align}),(function(e){return e.width&&e.hidden?"0px":e.width})),g9=Object(y.default)(O9)(j9()),x9=Object(y.default)(O9)(m9());function y9(){var e=Object(f.a)(["\n  text-align: right;\n"]);return y9=function(){return e},e}function _9(){var e=Object(f.a)(["\n  text-align: left;\n"]);return _9=function(){return e},e}function w9(){var e=Object(f.a)(["\n  text-align: ",";\n  width: ",";\n  :last-child {\n    border-right: 1px solid #d3dbde;\n  }\n"]);return w9=function(){return e},e}var S9=y.default.th(w9(),(function(e){return e.align&&e.align}),(function(e){return e.width&&e.hidden?"0px":e.width})),k9=Object(y.default)(S9)(_9()),C9=Object(y.default)(S9)(y9());function N9(){var e=Object(f.a)(["\n  background-color: ",";\n"]);return N9=function(){return e},e}function E9(){var e=Object(f.a)(["\n  :hover {\n    background-color: ",";\n  }\n"]);return E9=function(){return e},e}var A9,I9,T9,R9,D9=y.default.tr(E9(),_.gray1),M9=y.default.tr(N9(),_.gray0),L9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={itemSelected:e.props.dataSource,isCollapse:!1},e.isHideQtyAndUnitEx=function(e,t){return!("quantity"!==e||!t)||!("unit_cost"!==e||!t)},e.generateInventoryItems=function(t){var n=e.isRender(t),r=e.getSetInventoryItems(t,n.type);return n.isRender?Object(a.jsx)("tr",{className:"collapse",children:Object(a.jsx)("td",{colSpan:11,children:Object(a.jsxs)("table",{style:{width:"100%"},children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{style:{width:"2%"}}),Object(a.jsx)("th",{style:{width:"5%"},children:"Category"}),Object(a.jsx)("th",{style:{width:"20%"},children:"Name"}),Object(a.jsx)("th",{style:{width:"5%"},children:"Equipment"===n.type?"Duration":"Quantity"}),Object(a.jsx)("th",{style:{width:"5%"},children:"Unit"}),Object(a.jsx)("th",{style:{width:"5%"},children:"Amount"}),Object(a.jsx)("th",{style:{width:"5%"}})]})}),r.map((function(e){return Object(a.jsxs)(M9,{children:[Object(a.jsx)(O9,{}),Object(a.jsx)(O9,{children:null===e||void 0===e?void 0:e.category}),Object(a.jsx)(O9,{children:null===e||void 0===e?void 0:e.name}),Object(a.jsx)(O9,{children:null===e||void 0===e?void 0:e.quantity}),Object(a.jsx)(O9,{children:null===e||void 0===e?void 0:e.unit}),Object(a.jsx)(O9,{children:vm(null===e||void 0===e?void 0:e.price)}),Object(a.jsx)(O9,{})]})}))]})})}):Object(a.jsx)(a.Fragment,{})},e.isRender=function(e){var t={type:"",isRender:!1};return e.jobAllowance&&e.jobAllowance.length>0?(t.type="Allowance",t.isRender=!0):e.jobCustomExpense&&e.jobCustomExpense.length>0?(t.type="Custom Expense",t.isRender=!0):e.jobEquipment&&e.jobEquipment.length>0?(t.type="Equipment",t.isRender=!0):e.jobLabour&&e.jobLabour.length>0?(t.type="Labour",t.isRender=!0):e.jobLahaCompensation&&e.jobLahaCompensation.length>0?(t.type="Laha",t.isRender=!0):e.jobMaterial&&e.jobMaterial.length>0?(t.type="Material",t.isRender=!0):e.jobReimbursement&&e.jobReimbursement.length>0?(t.type="Reimbursement",t.isRender=!0):e.assessmentReportCostingStage&&e.assessmentReportCostingStage.length>0&&(t.type="Stage",t.isRender=!0),t},e.equipmentQuantityAndUnit=function(e){var t={quantity:0,unit:""},n=e.ended_at?e.ended_at:new Date;if("each"===e.interval)t.unit="Each",t.quantity=1;else{var r=pm()(n).diff(pm()(e.started_at),e.interval),a=r>1?e.interval+"s":e.interval;t.quantity=r||r>=0?r+1:0,t.unit=x8(a)}return t},e.getSetInventoryItems=function(t,n){var r=[];return"Allowance"===n?t.jobAllowance.filter((function(e){var t,a,o;r.push({category:n,type:(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.full_name)||"--",name:(null===e||void 0===e||null===(a=e.allowance_type)||void 0===a?void 0:a.name)||"--",price:(null===e||void 0===e?void 0:e.total_amount)||0,unit:(null===e||void 0===e||null===(o=e.allowance_type)||void 0===o?void 0:o.charging_interval)||"--",quantity:parseInt(null===e||void 0===e?void 0:e.amount)||0})})):"Custom Expense"===n?t.jobCustomExpense.filter((function(e){r.push({category:n,type:"",name:(null===e||void 0===e?void 0:e.name)||"--",price:(null===e||void 0===e?void 0:e.amount)||0,unit:"--",quantity:(null===e||void 0===e?void 0:e.quantity)||0})})):"Equipment"===n?t.jobEquipment.filter((function(t){var a,o,i=e.equipmentQuantityAndUnit(t);r.push({category:n,type:(null===t||void 0===t?void 0:t.interval)||"--",name:(null===t||void 0===t||null===(a=t.equipment)||void 0===a||null===(o=a.equipment_category)||void 0===o?void 0:o.name)||"--",price:(null===t||void 0===t?void 0:t.total_charge)||0,unit:null===i||void 0===i?void 0:i.unit,quantity:null===i||void 0===i?void 0:i.quantity})})):"Labour"===n?t.jobLabour.filter((function(e){var t,a;r.push({category:n,type:(null===e||void 0===e||null===(t=e.worker)||void 0===t?void 0:t.full_name)||"--",name:(null===e||void 0===e||null===(a=e.labour_type)||void 0===a?void 0:a.name)||"--",price:(null===e||void 0===e?void 0:e.calculated_total_amount)||0,unit:"Hours",quantity:Cm(e.first_tier_time_amount+e.second_tier_time_amount+e.third_tier_time_amount+e.fourth_tier_time_amount)})})):"Laha"===n?t.jobLahaCompensation.filter((function(e){var t;r.push({category:n,type:(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.full_name)||"--",name:"".concat((null===e||void 0===e?void 0:e.days)||0," - Days"),price:(null===e||void 0===e?void 0:e.total_amount)||0,unit:"Days",quantity:(null===e||void 0===e?void 0:e.days)||"--"})})):"Material"===n?t.jobMaterial.filter((function(e){var t,a,o,i,c;r.push({category:n,type:(null===e||void 0===e||null===(t=e.material)||void 0===t||null===(a=t.measure_unit)||void 0===a?void 0:a.name)||"",name:(null===e||void 0===e||null===(o=e.material)||void 0===o?void 0:o.name)||"--",price:(null===e||void 0===e?void 0:e.amount)||0,unit:(null===e||void 0===e||null===(i=e.material)||void 0===i||null===(c=i.measure_unit)||void 0===c?void 0:c.name)||"--",quantity:(null===e||void 0===e?void 0:e.quantity_used_override)||"--"})})):"Stage"===n&&t.assessmentReportCostingStage.filter((function(e){r.push({category:(null===e||void 0===e?void 0:e.description)||"--",type:"--",name:"--",price:(null===e||void 0===e?void 0:e.total_amount)||0,unit:"--",quantity:(null===e||void 0===e?void 0:e.total_quantity)||"--"})})),"Reimbursement"===n&&t.jobReimbursement.filter((function(e){var t;r.push({category:n,type:(null===e||void 0===e||null===(t=e.user)||void 0===t?void 0:t.full_name)||"--",name:(null===e||void 0===e?void 0:e.description)||"--",price:(null===e||void 0===e?void 0:e.total_amount)||0,unit:"--",quantity:"--"})})),r},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(t,n){for(var r=e.state.itemSelected.slice(),a=-1,o=-1,i=0;i<r.length;i++)"finance_".concat(i)===t.id&&(a=i),"finance_".concat(i)===n.id&&(o=i);if(-1!=a&&-1!=o){var s=Object.assign({},r[a]),l=Object.assign({},r[o]);r[a]=Object(c.a)({},l),r[o]=Object(c.a)({},s),e.setState({itemSelected:r},(function(){e.props.updatedData(e.state.itemSelected)}))}},e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContent")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){e.dataSource!==this.props.dataSource&&this.setState({itemSelected:this.props.dataSource})}},{key:"renderBodyRows",value:function(){var e=this,t=this.props,n=t.columnsDefinition;return t.dataSource.map((function(t,r){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(D9,{id:"finance_".concat(r),children:n.map((function(n){var o,i;return Object(a.jsx)(O9,{onDragOver:function(t){return e.onDragOver(t,"finance_".concat(r))},onDrop:function(t){return e.onDrop(t,"finance_".concat(r))},children:!e.isHideQtyAndUnitEx(n.id,null===(o=e.isRender(t))||void 0===o?void 0:o.isRender)&&n.cell(t,r,null===(i=e.isRender(t))||void 0===i?void 0:i.isRender)},n.id)}))},r),e.generateInventoryItems(t)]})}))}},{key:"renderNodata",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:e.length,children:"No items found"})})}},{key:"renderTHead",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:e.map((function(e){return Object(a.jsx)(S9,{className:e.className,width:"job"===e.id?"11%":void 0,children:e.header},e.id)}))})})}},{key:"renderTBody",value:function(){var e=this.props.dataSource;return Object(a.jsx)("tbody",{children:e&&e.length>0?this.renderBodyRows():this.renderNodata()})}},{key:"render",value:function(){var e=this.props.useCustomStyle;return Object(a.jsx)(a.Fragment,{children:e?Object(a.jsxs)(a.Fragment,{children:[this.renderTHead(),this.renderTBody()]}):Object(a.jsxs)("table",{className:"table",children:[this.renderTHead(),this.renderTBody()]})})}}]),n}(p.PureComponent);!function(e){e.hour="hour",e.day="day"}(A9||(A9={})),function(e){e.AIR_MOVER="AIR MOVER",e.DEHUM="DEHUM",e.WASTE_REMOVER="WASTE REMOVER"}(I9||(I9={})),function(e){e.CHECKED_IN="CHECKED_IN",e.CHECKED_OUT="CHECKED_OUT",e.IN_STORAGE="IN_STORAGE",e.DEPLOYED_ON_SITE="DEPLOYED_ON_SITE"}(T9||(T9={})),function(e){e.ACTIVE="active",e.IN_ACTTIVE="inactive"}(R9||(R9={}));var P9="SETTINGS_WH_CHARGING_INTERVAL",F9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateChargingInterval(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingChargingIntervalUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createChargingInterval(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingChargingIntervalAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.storageType,n=e.submitting,r=e.handleSubmit;return Object(a.jsxs)("form",{id:P9,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsxs)("strong",{children:["Space Type: ",t.name]}),Object(a.jsxs)("span",{className:"badge badge-warning ml-2",children:[t.is_chargeable?"":"Not "," Chargeable"]})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charging_interval",label:"Interval",component:xO,options:Object.keys(A9).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv,itemProp:{autoFocus:!0}})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"cost_per_interval",label:"Unit Cost To Me",component:yg,type:"number",validate:Dv,currency:!0})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charging_rate_per_interval",label:"Rate Per Interval",component:yg,type:"number",validate:Dv,currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval",component:yg,type:"number",validate:Dv})})]}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{className:"mb-3",children:"\xa0"}),Object(a.jsx)(Hv.a,{name:"is_default",label:"Default",direction:"horizontal",component:rI})]})})]})}}]),n}(p.PureComponent),U9=Object(sg.compose)(Object(jv.a)({form:P9,initialValues:{is_default:!1}}))(F9),B9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.body,o=e.id,i=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{bodyClass:"position-static",onClose:i,title:n,body:r,footer:Object(a.jsx)("button",{type:"submit",form:o,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function V9(){var e=Object(f.a)(["\n  "," {\n    font-weight: ",";\n  }\n  ",", "," {\n    ",":first-of-type {\n      // width: 110px;\n    }\n  }\n"]);return V9=function(){return e},e}function J9(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  th:first-child {\n    // min-width: 300px;\n  }\n  th:nth-child(2) ~ th {\n    // text-align: right;\n  }\n  tbody tr {\n    td:first-child {\n      // width: 110px;\n    }\n    td:nth-child(2) {\n      // font-weight: ",";\n    }\n    td:nth-child(3) ~ td {\n      // text-align: right;\n    }\n  }\n"]);return J9=function(){return e},e}Object(y.default)(tU)(J9(),lm.normal,lm.bold);var q9=Object(y.default)(eU)(V9(),CF,lm.normal,AF,IF,EF),z9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingChargingIntervalAdded,(function(){return e.loadIntervals()})),Gy.listen(Ix.WarehousingChargingIntervalDeleted,(function(){return e.loadIntervals()}))],e.componentDidMount=function(){var t=e.props,n=t.storageType,r=t.match.params.type_id;n.fetch(r),e.loadIntervals()},e.loadIntervals=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.chargingIntervals,o=r.match.params.type_id,a.fetch(Object(c.a)({inventory_storage_space_type_id:o},n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"chargingInterval":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Charging Interval",body:Object(a.jsx)(U9,Object(c.a)(Object(c.a)({},r),{},{storageType:e.props.storageType.data,afterSubmit:e.hideModal})),id:P9,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,u3.updateChargingInterval(t.id,r);case 4:if(a=n.sent,t.is_default||!a.is_default){n.next=10;break}return n.next=8,e.loadIntervals();case 8:n.next=11;break;case 10:j.a.merge(t,a);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 16:return n.prev=16,e.setState({working:!1}),n.finish(16);case 19:return n.abrupt("return",Promise.resolve());case 20:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadIntervals({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.storageType,i=r.chargingIntervals,c=this.state.working;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[this.renderModal(),(i.loading||c)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Charging Intervals"})}),Object(a.jsx)("div",{children:o.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Space Type: ",o.data.name," ",Object(a.jsxs)("span",{className:"badge badge-warning",children:[o.data.is_chargeable?"":"Not "," Chargeable"]}),"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("chargingInterval",{initialValues:{inventory_storage_space_type:o.data,is_default:!1}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Interval"}),Object(a.jsx)(CF,{children:"Unit Cost To Me"}),Object(a.jsx)(CF,{children:"Rate / Interval"}),Object(a.jsx)(CF,{children:"Max Count to Next Interval"}),Object(a.jsx)(CF,{children:"Default"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(e=i.data)||void 0===e||null===(t=e.data)||void 0===t?void 0:t.map((function(e){return Object(a.jsx)(H9,{form:"".concat(P9,"_").concat(e.id,"_").concat(e.is_default?"default":""),initialValues:e,item:e,onSubmit:n.onSubmit(e)},e.id+(e.is_default?"default":""))}))})]}),i.data&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:i.data.pagination,onChange:this.handlePagination})})]})]})}}]),n}(p.PureComponent);z9.getPlacementCost=function(e){var t=pm.a.duration(pm()(e.ended_at||new Date).diff(e.started_at)),n=0;switch(e.charging_interval.charging_interval){case"week":n=t.asWeeks();break;case"day":n=t.asDays();break;case"hour":n=t.asHours()}return n=Math.ceil(n),parseFloat((n*e.charging_interval.charging_rate_per_interval||e.charging_interval.charging_rate_per_interval).toFixed(2))},z9.getPlacementDuration=function(e){var t,n=pm.a.duration(pm()(e.ended_at||new Date).diff(e.started_at)),r=0;switch(null===e||void 0===e||null===(t=e.charging_interval)||void 0===t?void 0:t.charging_interval){case"week":r=n.asWeeks();break;case"day":r=n.asDays();break;case"hour":r=n.asHours();break;default:r=1}return(r=Math.ceil(r))+" "+e.charging_interval.charging_interval+(r>1?"s":"")};var G9=Object(sg.compose)(oj({storageType:{fetch:u3.getStorageSpaceType},chargingIntervals:{fetch:u3.getChargingIntervals}}))(z9),W9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{children:"Are you sure you want to delete this charging interval?"})})));case 3:n.sent&&u3.deleteChargingInterval(t.id).then((function(){Gy.emit(Ix.WarehousingChargingIntervalDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item);return j.a.isObject(t.charging_interval)||(t.charging_interval={value:t.charging_interval,label:t.charging_interval}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"charging_interval",component:xO,options:Object.keys(A9).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv,onChange:this.onFieldChange,className:"m-0"})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"cost_per_interval",component:yg,type:"number",validate:Dv,onChange:this.onFieldChange,className:"m-0",currency:!0})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"charging_rate_per_interval",component:yg,type:"number",validate:Dv,onChange:this.onFieldChange,className:"m-0",currency:!0})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"max_count_to_the_next_interval",component:yg,type:"number",validate:Dv,onChange:this.onFieldChange,className:"m-0"})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"is_default",component:rI,onChange:this.onFieldChange,wrapperClassName:"m-0"})}),Object(a.jsx)(EF,{children:Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),H9=Object(sg.compose)(Object(jv.a)({form:P9}))(W9);function Y9(){var e=Object(f.a)(["\n  min-height: 200px;\n  tr.disabled {\n    background-color: "," !important;\n    color: "," !important;\n    cursor: no-drop !important;\n  }\n  tr.disabled .k-checkbox {\n    opacity: 0;\n  }\n"]);return Y9=function(){return e},e}var Q9,K9,Z9=y.default.div(Y9(),_.gray1,_.gray4),X9=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={activeTab:"labour",submitting:!1,selected:{}},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.labour,o=n.allowance,i=n.reimbursement,c=n.laha,s=n.equipment,l=n.material,u=n.po,d=n.storage,p=n.other,t.next=3,Promise.all([a.fetch(r.id,{attach_to_invoice:1}),o.fetch(r.id,{attach_to_invoice:1}),i.fetch(r.id,{attach_to_invoice:1}),c.fetch(r.id,{attach_to_invoice:1}),s.fetch(r.id,{attach_to_invoice:1}),l.fetch(r.id,{attach_to_invoice:1}),u.fetch(r.id,{attach_to_invoice:1}),d.fetch(r.id,{attach_to_invoice:1,placement_ended:1,charging_interval:1}),p.fetch(r.id,{attach_to_invoice:1})]);case 3:e.selectAll();case 4:case"end":return t.stop()}}),t)}))),e.selectAll=function(){var t,n,r,a,o,i,c,s=e.props,l=s.labour,u=s.allowance,d=s.reimbursement,p=s.laha,h=s.equipment,b=s.material,f=s.po,m=s.storage,j=s.other,v={syntheticEvent:{target:{checked:!1}}};e.headerSelectionChange("labour",(null===(t=l.data)||void 0===t?void 0:t.data)||[])(v),e.headerSelectionChange("allowance",(null===(n=u.data)||void 0===n?void 0:n.data)||[])(v),e.headerSelectionChange("reimbursement",(null===(r=d.data)||void 0===r?void 0:r.data.filter((function(e){return e.total_amount=e.is_chargeable?e.total_amount:0})))||[])(v),e.headerSelectionChange("laha",(null===(a=p.data)||void 0===a?void 0:a.data)||[])(v),e.headerSelectionChange("equipment",h.data||[])(v),e.headerSelectionChange("material",b.data||[])(v),e.headerSelectionChange("po",(null===(o=f.data)||void 0===o?void 0:o.data)||[])(v),e.headerSelectionChange("storage",(null===(i=m.data)||void 0===i?void 0:i.data)||[])(v),e.headerSelectionChange("other",(null===(c=j.data)||void 0===c?void 0:c.data)||[])(v)},e.selectTab=function(t){return function(){e.setState({activeTab:t})}},e.renderModalBody=function(){var t,n,r,o,i,c,s,l,u,d,p,h,b,f,m=e.props,v=m.labour,O=m.allowance,g=m.reimbursement,x=m.laha,y=m.equipment,w=m.material,S=m.po,k=m.storage,C=m.other,N=v.loading||y.loading||w.loading||k.loading||C.loading,E=e.state.activeTab;return Object(a.jsxs)(Z9,{children:[N&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(fQ.i,{className:"mx-4 nav-tabs mr-4 print-hide",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[["labour","Labour"],["allowance","Allowance"],["reimbursement","Reimbursement"],["laha","LAHA"],["equipment","Equipment"],["material","Material"],["po","P/O"],["storage","Storage"],["other","Other"]].map((function(t){return Object(a.jsx)(fQ.j,{children:Object(a.jsx)("span",{className:"nav-link cursor-pointer ".concat(E===t[0]?"active":""),onClick:e.selectTab(t[0]),children:t[1]})})}))}),!N&&Object(a.jsxs)(fQ.k,{activeItem:E,className:" px-4 position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:[Object(a.jsxs)(fQ.l,{tabId:"labour",role:"tabpanel",children:[e.renderLabourGrid((null===(t=v.data)||void 0===t?void 0:t.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(n=v.data)||void 0===n?void 0:n.data)||[]).filter((function(e){return e.__selected})).sumBy("calculated_total_amount"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"allowance",role:"tabpanel",children:[e.renderAllowanceGrid((null===(r=O.data)||void 0===r?void 0:r.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(o=O.data)||void 0===o?void 0:o.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"reimbursement",role:"tabpanel",children:[e.renderReimbursementGrid((null===(i=g.data)||void 0===i?void 0:i.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(c=g.data)||void 0===c?void 0:c.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"laha",role:"tabpanel",children:[e.renderLAHAGrid((null===(s=x.data)||void 0===s?void 0:s.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(l=x.data)||void 0===l?void 0:l.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"equipment",role:"tabpanel",children:[e.renderEquipmentGrid(y.data||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()(y.data||[]).filter((function(e){return e.__selected})).sumBy("total_charge"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"material",role:"tabpanel",children:[e.renderMaterialGrid(w.data||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()(w.data||[]).filter((function(e){return e.__selected})).sumBy("amount_override"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"po",role:"tabpanel",children:[e.renderPOGrid((null===(u=S.data)||void 0===u?void 0:u.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(d=S.data)||void 0===d?void 0:d.data)||[]).filter((function(e){return e.__selected})).sumBy("total_amount"))]})]}),Object(a.jsxs)(fQ.l,{tabId:"storage",role:"tabpanel",children:[e.renderStorageGrid((null===(p=k.data)||void 0===p?void 0:p.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(h=k.data)||void 0===h?void 0:h.data)||[]).filter((function(e){return e.__selected})).sumBy((function(e){return z9.getPlacementCost(e)})))]})]}),Object(a.jsxs)(fQ.l,{tabId:"other",role:"tabpanel",children:[e.renderCustomExpenseGrid((null===(b=C.data)||void 0===b?void 0:b.data)||[]),Object(a.jsxs)("div",{className:"mt-3 px-5 text-right",children:[Object(a.jsx)("strong",{children:"Total Amount Ex GST:"})," ",vm(j()((null===(f=C.data)||void 0===f?void 0:f.data)||[]).filter((function(e){return e.__selected})).sumBy((function(e){return e.amount})))]})]})]})]})},e.renderLabourGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("labour",t),onHeaderSelectionChange:e.headerSelectionChange("labour",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"started_at_override",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.started_at_override})})}}),Object(a.jsx)(F_.b,{field:"labour_type.name",title:"Type"}),Object(a.jsx)(F_.b,{field:"worker.full_name",title:"Worker"}),Object(a.jsx)(F_.b,{field:"total_hrs",title:"Total Hours",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Cm(t.first_tier_time_amount+t.second_tier_time_amount+t.third_tier_time_amount+t.fourth_tier_time_amount)})}}),Object(a.jsx)(F_.b,{field:"calculated_total_amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.calculated_total_amount)})}})]})},e.renderAllowanceGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("allowance",t),onHeaderSelectionChange:e.headerSelectionChange("allowance",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"date_given",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.date_given})})}}),Object(a.jsx)(F_.b,{field:"user.full_name",title:"Recipient"}),Object(a.jsx)(F_.b,{field:"allowance_type.name",title:"Allowance Type"}),Object(a.jsx)(F_.b,{field:"total_amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.total_amount)})}})]})},e.renderReimbursementGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("reimbursement",t),onHeaderSelectionChange:e.headerSelectionChange("reimbursement",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"date_of_expense",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.date_of_expense})})}}),Object(a.jsx)(F_.b,{field:"user.full_name",title:"Recipient"}),Object(a.jsx)(F_.b,{field:"description",title:"Description"}),Object(a.jsx)(F_.b,{field:"total_amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.total_amount)})}})]})},e.renderLAHAGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("laha",t),onHeaderSelectionChange:e.headerSelectionChange("laha",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"date_started",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.date_started})})}}),Object(a.jsx)(F_.b,{field:"user.full_name",title:"Recipient"}),Object(a.jsx)(F_.b,{field:"rate_per_day",title:"Rate per Day",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.rate_per_day)})}}),Object(a.jsx)(F_.b,{field:"days",title:"Days"}),Object(a.jsx)(F_.b,{field:"total_amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.total_amount)})}})]})},e.renderEquipmentGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("equipment",t),onHeaderSelectionChange:e.headerSelectionChange("equipment",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"started_at",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.started_at})})}}),Object(a.jsx)(F_.b,{field:"equipment.serial_number",title:"Serial #"}),Object(a.jsx)(F_.b,{field:"equipment.model",title:"Name / Model",cell:function(e){var t,n,r,o=e.dataItem;return Object(a.jsx)("td",{children:"".concat((null===o||void 0===o||null===(t=o.equipment)||void 0===t||null===(n=t.equipment_category)||void 0===n?void 0:n.name)||""," / ").concat((null===o||void 0===o||null===(r=o.equipment)||void 0===r?void 0:r.model)||"")})}}),Object(a.jsx)(F_.b,{field:"total_charge",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.total_charge)})}})]})},e.renderMaterialGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("material",t),onHeaderSelectionChange:e.headerSelectionChange("material",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"used_at",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.used_at})})}}),Object(a.jsx)(F_.b,{field:"material.name",title:"Material"}),Object(a.jsx)(F_.b,{field:"quantity_used_override",title:"Quantity Used"}),Object(a.jsx)(F_.b,{field:"amount_override",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.amount_override)})}})]})},e.renderPOGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("po",t),onHeaderSelectionChange:e.headerSelectionChange("po",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"date",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:t.created_at&&Object(a.jsx)(kS.a,{format:iv,children:t.created_at})})}}),Object(a.jsx)(F_.b,{field:"reference",title:"Description#",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:null===t||void 0===t?void 0:t.description})}}),Object(a.jsx)(F_.b,{field:"inquiry_amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.inquiry_amount)})}})]})},e.renderStorageGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("storage",t),onHeaderSelectionChange:e.headerSelectionChange("storage",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"started_at",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.started_at})})}}),Object(a.jsx)(F_.b,{field:"inventory_item.name",title:"Item Name"}),Object(a.jsx)(F_.b,{field:"ended_at",title:"Date Ended",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.ended_at})})}}),Object(a.jsx)(F_.b,{field:"started_at",title:"Stayed in Location",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:z9.getPlacementDuration(t)})}}),Object(a.jsx)(F_.b,{field:"total_amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(z9.getPlacementCost(t))})}})]})},e.renderCustomExpenseGrid=function(t){return Object(a.jsxs)(F_.a,{data:t,scrollable:"none",selectedField:"__selected",onSelectionChange:e.selectionChange("other",t),onHeaderSelectionChange:e.headerSelectionChange("other",t),rowRender:e.rowRender,children:[t.filter((function(e){return!e.__disabled})).length>0&&Object(a.jsx)(F_.b,{field:"__selected",title:" ",width:"50px",headerSelectionValue:-1===t.filter((function(e){return!e.__disabled})).findIndex((function(e){return!e.__selected}))}),Object(a.jsx)(F_.b,{field:"used_at",title:"Date",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.used_at})})}}),Object(a.jsx)(F_.b,{field:"name",title:"Item Name"}),Object(a.jsx)(F_.b,{field:"quantity",title:"Quantity"}),Object(a.jsx)(F_.b,{field:"amount",title:"Amount Ex GST",cell:function(e){var t=e.dataItem;return Object(a.jsx)("td",{children:vm(t.amount)})}})]})},e.rowRender=function(e,t){var n={selectedField:"aa"};return t.dataItem.__disabled&&(n.className="".concat(e.props.className," disabled")),h.a.cloneElement(e,Object(c.a)({},n),e.props.children)},e.selectionChange=function(t,n){return function(r){var a=n.find((function(e){return e===r.dataItem}));if(a&&1===a.in_report_used_count){a.__selected=!a.__selected;var o=e.state.selected;o[t]||(o[t]={}),a.__selected?o[t][a.id]=a:delete o[t][a.id],0===Object.keys(o[t]).length&&delete o[t],e.setState({selected:Object(c.a)({},o)})}}},e.headerSelectionChange=function(t,n){return function(r){var a=r.syntheticEvent.target.checked;n.forEach((function(e){1===e.in_report_used_count?e.__selected=a:e.__disabled=!0}));var o=e.state.selected;o[t]||(o[t]={}),a?n.forEach((function(e){e.__selected&&(o[t][e.id]=e)})):delete o[t],e.setState({selected:Object(c.a)({},o)})}},e.createInvoice=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({submitting:!0}),n=e.props,r=n.job,a=n.invoiceId,t.prev=2,!a){t.next=10;break}if(t.t0=e.props.submitInvoiceItems,!t.t0){t.next=8;break}return t.next=8,e.props.submitInvoiceItems(a,r,e.state.selected);case 8:t.next=11;break;case 10:e.props.history.push({pathname:"/finance/invoices/create",state:{job:{id:r.id,assigned_location:r.assigned_location,invoice_to_contact:r.invoice_to_contact},jobCosting:e.state.selected}});case 11:t.next=15;break;case 13:t.prev=13,t.t1=t.catch(2);case 15:return t.prev=15,e.setState({submitting:!1}),t.finish(15);case 18:case"end":return t.stop()}}),t,null,[[2,13,15,18]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.data,o=e.onClose,i=this.state,c=i.submitting,s=i.selected,l=r||{},u=l.actuals,d=l.expenses;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,onClose:o,loading:c,title:n||"Create Invoice".concat(u||d?" From ":"").concat(u?"Actuals":"").concat(u&&d?" And ":"").concat(d?"Expenses":""),bodyClass:"px-0 pt-3 pb-0",width:"900px",body:this.renderModalBody(),footer:Object(a.jsx)("button",{className:"btn btn-primary",disabled:0===Object.keys(s).length,onClick:this.createInvoice,children:"Create Invoice"})})})}}]),n}(p.PureComponent),$9=Object(sg.compose)(oj({labour:{fetch:aW.getJobLabours},allowance:{fetch:$G.getJobAllowances},reimbursement:{fetch:oW.getJobReimbursements},laha:{fetch:iW.getJobLahas},equipment:{fetch:zy.getJobEquipments},material:{fetch:zy.getJobMaterials},po:{fetch:J$.jobPurchaseOrderItems},storage:{fetch:ZW.getJobStorageItems},other:{fetch:zy.getCustomExpenses}}),O.g)(X9),eee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selectStyles=e.props.customStyles?Object(c.a)(Object(c.a)({},mO),e.props.customStyles):Object(c.a)(Object(c.a)({},mO),{},{control:function(t,n){return Object(c.a)(Object(c.a)({},t),{},{minHeight:"auto",maxHeight:e.props.isMulti?"inherit":33.5,background:_.white,boxShadow:n.isFocused?"0 0 0 0.2rem ".concat(_.bootstrap.boxShadow):"none",borderColor:n.isFocused?"transparent":_.gray2,":hover":{borderColor:n.isFocused?"transparent":_.gray2}})},dropdownIndicator:function(t){return Object(c.a)(Object(c.a)({},t),{},{padding:3,display:e.props.isDisabled?"none":t.display})}},e.props.additionalStyles),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(yO.a,Object(c.a)(Object(c.a)({},this.props),{},{styles:this.selectStyles}))}}]),n}(p.PureComponent);function tee(){var e=Object(f.a)(["  \n  height: 34px;\n  width: 230px;\n  max-width: 230px;    \n"]);return tee=function(){return e},e}!function(e){e.invoice="invoice",e.purchaseOrder="purchase_order",e.creditNote="credit_note"}(Q9||(Q9={})),function(e){e.MATERIAL="MATERIAL",e.LABOUR="LABOUR",e.EQUIPMENT="EQUIPMENT",e.PO="PO",e.STORAGE="STORAGE",e.ALLOWANCE="ALLOWANCE",e.REIMBURSEMENT="REIMBURSEMENT",e.LAHA="LAHA",e.OTHER="OTHER",e.STAGES="STAGES"}(K9||(K9={}));var nee,ree,aee=y.default.textarea(tee()),oee=function(e){return e.id},iee=function(e){return e.name},cee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showInvoiceModel:!1,toggleIcon:{}},e.onClickDelete=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.isFromJobCosting,o=r.dispatch,!a){t.next=7;break}return t.next=4,o(VX(n));case 4:e.totalCalculation(),t.next=8;break;case 7:e.props.onRemove(n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContent",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.loadJobs=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zy.searchJobs(t);case 2:return n=e.sent,e.abrupt("return",n);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedSearchJobs=Qv()(e.loadJobs,1e3),e.onChangeCheckBox=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.entity,o=0,e.props.onChange(+n.id,Object(k.a)({},"is_job_detail",r)),(a.items||[]).map((function(t){t.id===n.id?t.is_job_detail=r:!0===t.is_job_detail?(t.is_job_detail=!1,o=+t.id,e.props.onChange(+t.id,Object(k.a)({},"is_job_detail",!1))):t.is_job_detail=!1})),t.t0=o>0,!t.t0){t.next=9;break}return t.next=9,e.props.onSubmit(o);case 9:return t.next=11,e.props.onSubmit(n.id);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.allColumns=[{id:"itemDrag",className:t9.a.xs,cell:function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:"#",onDragStart:function(t){return e.onDragStart(t,"finance_".concat(n))},draggable:!0,children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})," "]})}},{id:"singleSelectColumn",className:t9.a.xs,cell:function(t,n){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"po-checkbox-menu-tooltip",effect:"solid",place:"top"}),Object(a.jsx)(J_,{"data-tip":"Select to display this job contact details on the print document","data-for":"po-checkbox-menu-tooltip",children:Object(a.jsx)(nI,{size:15,value:t.is_job_detail,onChange:function(n){return e.onChangeCheckBox(t,n)}})})]})}},{id:"job",className:t9.a.xs,header:"Job",cell:function(t){return Object(a.jsx)(eee,{value:t.job,loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return zy.getJobName(e)},onChange:e.handleSelectChange(t,"job"),isDisabled:e.props.disabled})}},{id:"code",className:t9.a.sm,header:"Code",cell:function(t){return Object(a.jsx)(n9,{value:t.gs_code,options:e.props.entityType===Q9.purchaseOrder?e.props.gsCodes.filter((function(e){return e.is_buy})):e.props.gsCodes.filter((function(e){return e.is_sell})),onChange:e.handleGsCodeChange(t),getOptionValue:oee,getOptionLabel:iee,isDisabled:e.props.disabled})}},{id:"invoiceDescription",className:t9.a.md,header:"Description",cell:function(t){return e.renderInlineInput(t,"invoiceDescription","Description...")}},{id:"description",className:t9.a.md,header:"Description",cell:function(t){return e.renderInlineInput(t,"description","Description...")}},{id:"inquiry_amount",className:t9.a.xs,header:"Inquiry Amount",cell:function(t){return e.renderInlineInput(t,"inquiry_amount","0",k8)}},{id:"quantity",className:t9.a.xs,header:"Qty",cell:function(t){return e.renderInlineInput(t,"quantity","0",k8)}},{id:"unit_cost",className:t9.a.sm,header:e.props.entityType===Q9.purchaseOrder?"Net":"Unit Ex.",cell:function(t){return e.renderInlineInput(t,"unit_cost","$ 0",_8)}},{id:"discount",className:t9.a.xs,header:"Discount %",cell:function(t){return e.renderInlineInput(t,"discount","0",S8)}},{id:"markup",className:t9.a.xs,header:"Markup %",cell:function(t){return e.renderInlineInput(t,"markup","0",S8)}},{id:"account_code",className:t9.a.sm,header:"Account Code",cell:function(t){return Object(a.jsx)(n9,{value:t.gl_account,options:e.props.glAccounts.filter(e.glFilter),onChange:e.handleGlAccountChange(t),getOptionValue:oee,getOptionLabel:k0.getGLAccountLabel,isDisabled:e.props.disabled})}},{id:"tax_code",className:t9.a.sm,header:"Tax Code",cell:function(t){return Object(a.jsx)(n9,{value:t.tax_rate,options:e.props.taxRates,onChange:e.handleSelectChange(t,"tax_rate"),getOptionValue:oee,getOptionLabel:iee,isDisabled:e.props.disabled})}},{id:"gst",className:t9.a.sm,header:"GST",cell:function(e){return Object(a.jsx)("strong",{children:vm(e.gst||0)})}},{id:"amount_ex",className:t9.a.total,header:"Amount Ex.",cell:function(e){return Object(a.jsx)("strong",{children:vm(e.total_amount)})}},{id:"total_amount_inc_gst",className:t9.a.total,header:"Total ",cell:function(e){return Object(a.jsx)("strong",{children:vm(e.total_amount_inc_gst||0)})}},{id:"plus",header:"",cell:function(t,n,r){return e.props.entityType===Q9.invoice&&r?Object(a.jsx)(cm,{name:e.state.toggleIcon[n]?e.state.toggleIcon[n]:Xf.ArrowUp,onClick:function(t){e.onClickCollapse(t,n)}}):Object(a.jsx)(a.Fragment,{})}},{id:"delete",className:t9.a.remove,header:"",cell:function(t,n){return e.props.disabled?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)(cm,{name:Xf.Remove,onClick:function(){e.onClickDelete(t.id)}})}}],e.onClickCollapse=function(t,n){var r=t.currentTarget.closest("tr").nextSibling;if(r){var a,o,i=(null===r||void 0===r||null===(a=r.className)||void 0===a?void 0:a.indexOf("collapse show"))>-1?Xf.ArrowUp:Xf.ArrowDown;e.setState({toggleIcon:Object(c.a)(Object(c.a)({},e.state.toggleIcon),{},Object(k.a)({},n,i))}),null===r||void 0===r||null===(o=r.classList)||void 0===o||o.toggle("show")}},e.handleGlAccountChange=function(t){return function(n){e.handleSelectChange(t,"gl_account")(n),n.tax_rate&&e.handleSelectChange(t,"tax_rate")(n.tax_rate),e.totalCalculation()}},e.handleGsCodeChange=function(t){return function(n){e.props.onChange(t.id,Object(k.a)({},"gs_code",n)),e.props.onChange(null===t||void 0===t?void 0:t.id,Object(k.a)({},"unit_cost",n.amount?parseFloat(n.amount):parseFloat(t.unit_cost))),e.props.onChange(t.id,Object(k.a)({},"description",n.description?n.description:t.description)),e.totalCalculation()}},e.getOrganizationGlAccount=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=7;break}return t.next=3,e.getOrganizationByLocation(null===n||void 0===n?void 0:n.assigned_location.id);case 3:if(!(r=t.sent)){t.next=7;break}return t.next=7,e.props.dispatch(M0(r.id));case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getOrganizationByLocation=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=4;break}return e.next=3,k0.getAccountingOrganizationsForLocation(t);case 3:return e.abrupt("return",e.sent);case 4:return e.abrupt("return",null);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.parsingJobCosting=function(t){var n=[];return j.a.forEach(t,(function(e,t){switch(t){case"labour":j()(e).values().size()>0&&j()(e).values().groupBy("labour_type_id").forEach((function(e,t){n.push({description:e[0].labour_type.name,quantity:1,unit_cost:j.a.sumBy(e,(function(e){return e.calculated_total_amount})),total_amount:j.a.sumBy(e,(function(e){return e.calculated_total_amount})),linked_items:e,linked_items_category:K9.LABOUR})}));break;case"equipment":j()(e).values().size()>0&&n.push({description:"Equipment",quantity:1,unit_cost:j()(e).values().sumBy("total_charge"),total_amount:j()(e).values().sumBy("total_charge"),linked_items:j()(e).values(),linked_items_category:K9.EQUIPMENT});break;case"material":j()(e).values().size()>0&&n.push({description:"Material",quantity:1,unit_cost:j()(e).values().sumBy("amount_override"),total_amount:j()(e).values().sumBy("amount_override"),linked_items:j()(e).values(),linked_items_category:K9.MATERIAL});break;case"storage":var r=0;j()(e).values().forEach((function(e){r+=z9.getPlacementCost(e)})),j()(e).values().size()>0&&n.push({description:"Storage",quantity:1,unit_cost:r,total_amount:r,linked_items:j()(e).values(),linked_items_category:K9.STORAGE});break;case"allowance":j()(e).values().size()>0&&j()(e).values().groupBy("allowance_type_id").forEach((function(e,t){n.push({description:e[0].allowance_type.name,quantity:1,unit_cost:j.a.sumBy(e,(function(e){return e.total_amount})),total_amount:j.a.sumBy(e,(function(e){return e.total_amount})),linked_items:e,linked_items_category:K9.ALLOWANCE})}));break;case"reimbursement":j()(e).values().size()>0&&n.push({description:"Reimbursement",quantity:1,unit_cost:j()(e).values().sumBy("total_amount"),total_amount:j()(e).values().sumBy("total_amount"),linked_items:j()(e).values(),linked_items_category:K9.REIMBURSEMENT});break;case"laha":j()(e).values().size()>0&&n.push({description:"Laha",quantity:1,unit_cost:j()(e).values().sumBy("total_amount"),total_amount:j()(e).values().sumBy("total_amount"),linked_items:j()(e).values(),linked_items_category:K9.LAHA});break;case"po":j()(e).values().size()>0&&j()(e).values().forEach((function(e){n.push({description:(null===e||void 0===e?void 0:e.description)||"",quantity:(null===e||void 0===e?void 0:e.quantity)||0,unit_cost:(null===e||void 0===e?void 0:e.unit_cost)||0,total_amount:(null===e||void 0===e?void 0:e.inquiry_amount)||0,linked_items:[e],linked_items_category:K9.PO})}));break;case"other":j()(e).values().size()>0&&n.push({description:"Other Expense",quantity:1,unit_cost:j()(e).values().sumBy("amount"),total_amount:j()(e).values().sumBy("amount"),linked_items:j()(e).values(),linked_items_category:K9.OTHER})}})),n=n.map((function(t){var n;return t.gs_code=e.props.gsCodes.find((function(e){return e.description.toLocaleLowerCase().trim()===t.linked_items_category.toLocaleLowerCase().trim()&&!0===e.is_sell})),t.gl_account=e.props.glAccounts.find((function(e){var n;return(null===e||void 0===e||null===(n=e.type)||void 0===n?void 0:n.toLocaleLowerCase().trim())===t.linked_items_category.toLocaleLowerCase().trim()})),t.tax_rate=null===(n=t.gl_account)||void 0===n?void 0:n.tax_rate,t}))},e.parseJobCostingItems=function(t){var n=[];n=(n=e.parsingJobCosting(t)).map((function(t){return e.createItemInState(t),t})),e.setState({jobCostingItems:n}),e.totalCalculation()},e.debounceJobCostingItems=Qv()(e.parseJobCostingItems,1e3),e.createItemInState=function(t){var n,r={id:Object(m.uniqueId)(OX),total_amount:t.total_amount,dirty:!0,description:t.description,quantity:t.quantity,unit_cost:t.unit_cost,gs_code:t.gs_code,gl_account:t.gl_account,tax_rate:t.tax_rate,jobCostinItemType:t.linked_items_category,jobCostinItemTypeIds:null===(n=t.linked_items)||void 0===n?void 0:n.map((function(e){return e.id}))};e.props.dispatch(LX(r))},e.parseStagesItems=function(t){(null===t||void 0===t?void 0:t.map((function(t){var n;return t.gs_code=e.props.gsCodes.find((function(e){return"STG001"===e.name&&!0===e.is_sell})),t.gl_account=e.props.glAccounts.find((function(e){var t;return"stage"===(null===e||void 0===e||null===(t=e.type)||void 0===t?void 0:t.toLocaleLowerCase().trim())})),t.tax_rate=null===(n=t.gl_account)||void 0===n?void 0:n.tax_rate,t}))).map((function(t){return e.createItemInState(t),t})),e.totalCalculation()},e.debounceStagesItems=Qv()(e.parseStagesItems,1e3),e.updateItemsInState=function(t){e.props.dispatch(FX(t))},e.handleSelectChange=function(t,n){return function(r){e.props.isFromJobCosting?(r.quantity&&r.unit_cost&&(r.total_amount=r.quantity*r.unit_cost),e.props.onChange(t.id,Object(k.a)({},n,r)),"tax_rate"===n&&e.totalCalculation()):(e.props.onChange(t.id,Object(k.a)({},n,r)),e.debounceSubmit(t.id))}},e.debounceSubmit=Qv()(e.props.onSubmit,500),e.handleInputChange=function(t,n,r){var a=t.id;return function(t){var o=r?r(t.target.value):t.target.value;e.props.onChange(a,Object(k.a)({},n,o))}},e.handleInputBlur=function(t){return function(){e.props.isFromJobCosting&&e.totalCalculation(),t.dirty&&!e.props.isFromJobCosting&&e.props.onSubmit(t.id)}},e.renderInlineInput=function(t,n,r,o){var i;switch(n){case"unit_cost":return Object(a.jsx)("input",{type:"text",placeholder:r,value:w8(null===(i=t[n])||void 0===i?void 0:i.toString()),onChange:e.handleInputChange(t,n,o),onBlur:e.handleInputBlur(t),disabled:e.props.disabled,className:"form-control"});case"invoiceDescription":return Object(a.jsx)(aee,{type:"text",placeholder:r,value:t.description,onChange:e.handleInputChange(t,"description",o),onBlur:e.handleInputBlur(t),disabled:e.props.disabled,className:"form-control",rows:1});default:return Object(a.jsx)("input",{type:"text",placeholder:r,value:t[n],onChange:e.handleInputChange(t,n,o),onBlur:e.handleInputBlur(t),disabled:e.props.disabled,className:"form-control"})}},e.DragDropPositionUpdate=function(t){e.props.isFromJobCosting?e.updateItemsInState(t):e.props.handlePositionUpdatedData(t)},e.invoiceLineItemsCalculation=function(){var t=e.props,n=t.financeEntity.data,r=t.dispatch,a=(t.isFromJobCosting,{sub_total:0,taxes:0,amount_due:0,total_amount:0});n.items&&j.a.forEach(n.items,(function(e){if(e.unit_cost&&e.quantity){var t,n=parseFloat(e.unit_cost)*parseFloat(e.quantity);a.sub_total=a.sub_total+n;var o=e.discount?n*e.discount/100:0,i=(null===e||void 0===e||null===(t=e.tax_rate)||void 0===t?void 0:t.rate)?e.tax_rate.rate:0;a.taxes=a.taxes+n*Math.abs(i),a.total_amount=a.total_amount+n-o,a.amount_due=a.amount_due+n-o,e.total_amount=n-o,r(PX(e.id,e,!0))}})),a.total_amount=a.total_amount+a.taxes,a.amount_due=a.amount_due+a.taxes,r(DX(a))},e.totalCalculation=Qv()(e.invoiceLineItemsCalculation,500),e.showInvoiceModel=function(){e.setState({showInvoiceModel:!0,modal:"new_invoice"})},e.renderModal=function(){var t=e.props.entity;switch(e.state.modal){case"new_invoice":return Object(a.jsx)($9,{isOpen:e.state.showInvoiceModel,onClose:e.hideInvoiceModel,job:t.job,invoiceId:t.id,data:{actuals:!0,expenses:!0},submitInvoiceItems:e.onClickInvoiceCreateModal})}return null},e.hideInvoiceModel=function(){e.setState({showInvoiceModel:!1,modal:void 0})},e.onClickInvoiceCreateModal=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r,a){var o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=[],t.prev=1,!((i=e.parsingJobCosting(a)||[]).length<=0)){t.next=6;break}return Oj(uj.Danger,"Job costing items does not exist"),t.abrupt("return");case 6:if(!e.jobCostingItemsVaidate(i)){t.next=9;break}return Oj(uj.Danger,"Validation error"),t.abrupt("return");case 9:c=Object(oV.a)(i),t.prev=10,l=sj.a.mark((function e(){var t,r,a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=s.value,e.next=3,JB.createItem(n,t);case 3:r=e.sent,t.linked_items&&(null===(a=t.linked_items)||void 0===a||a.forEach((function(e){o.push({type:t.linked_items_category,id:e.id,invoice_item_id:r.data.id})})));case 5:case"end":return e.stop()}}),e)})),c.s();case 13:if((s=c.n()).done){t.next=17;break}return t.delegateYield(l(),"t0",15);case 15:t.next=13;break;case 17:t.next=22;break;case 19:t.prev=19,t.t1=t.catch(10),c.e(t.t1);case 22:return t.prev=22,c.f(),t.finish(22);case 25:if(t.t2=o.length>0,!t.t2){t.next=29;break}return t.next=29,JB.setInvoiceItemToJobCostingItem(r.id,o);case 29:e.props.dispatch(IX(n)),e.hideInvoiceModel(),t.next=36;break;case 33:t.prev=33,t.t3=t.catch(1),Oj(uj.Danger,"Server Error");case 36:return t.prev=36,t.finish(36);case 38:case"end":return t.stop()}}),t,null,[[1,33,36,38],[10,19,22,25]])})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n,r,a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobFromJobCosting,a=n.jobCosting,o=n.isFromStages,i=n.stagesItems,!a){e.next=8;break}if(!r){e.next=6;break}return e.next=5,this.getOrganizationGlAccount(r);case 5:this.debounceJobCostingItems(a);case 6:e.next=13;break;case 8:if(!o){e.next=13;break}if(!r){e.next=13;break}return e.next=12,this.getOrganizationGlAccount(r);case 12:this.debounceStagesItems(i);case 13:(null===(t=this.props.entity)||void 0===t?void 0:t.accounting_organization_id)&&this.props.dispatch(M0(this.props.entity.accounting_organization_id));case 14:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"jobCostingItemsVaidate",value:function(e){var t=!1;return j.a.forEach(e,(function(e){return!(Dv(e.gs_code)||Dv(e.description)||Dv(e.unit_cost)||Dv(e.quantity)||Dv(e.gl_account)||Dv(e.tax_rate))||(t=!0,!1)})),t}},{key:"render",value:function(){var e=this.props,t=e.entity,n=e.entityType,r=t.items||[];return Object(a.jsxs)("div",{children:[this.renderModal(),Object(a.jsx)($6,{children:Object(a.jsx)(L9,{dataSource:r,columnsDefinition:this.columns,useCustomStyle:!0,updatedData:this.DragDropPositionUpdate})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-4 pl-2",children:[!this.props.disabled&&Object(a.jsx)("button",{type:"button",className:"btn btn-link",onClick:this.props.onCreate,children:"Add Item"}),!this.props.disabled&&!!t.job&&this.props.entityType===Q9.invoice&&Object(a.jsx)("button",{type:"button",className:"btn btn-link",onClick:this.showInvoiceModel,children:"Build From Job"})]}),Object(a.jsx)("div",{className:"col-8 text-right",children:Object(a.jsx)(f9,{entityType:n,subTotal:n===Q9.purchaseOrder?t.total_exclude_gst:t.sub_total,taxes:n===Q9.purchaseOrder?t.gst:t.taxes,total:n===Q9.purchaseOrder?t.total_include_gst:t.total_amount,balanceDue:t.amount_due})})]})]})}},{key:"glFilter",get:function(){return this.props.entityType===Q9.invoice?function(e){return!e.account_type.increase_action_is_debit}:function(e){return e}}},{key:"columns",get:function(){switch(this.props.entityType){case Q9.invoice:return this.allColumns.filter((function(e){return"description"!==e.id&&"singleSelectColumn"!==e.id&&"markup"!==e.id&&"job"!==e.id&&"inquiry_amount"!==e.id&&"gst"!==e.id&&"total_amount_inc_gst"!==e.id}));case Q9.purchaseOrder:return this.allColumns.filter((function(e){return"invoiceDescription"!==e.id&&"discount"!==e.id&&"plus"!==e.id&&"markup"!==e.id&&"amount_ex"!==e.id}));default:return this.allColumns.filter((function(e){return"invoiceDescription"!==e.id&&"singleSelectColumn"!==e.id&&"markup"!==e.id&&"discount"!==e.id&&"job"!==e.id&&"inquiry_amount"!==e.id&&"plus"!==e.id&&"gst"!==e.id&&"total_amount_inc_gst"!==e.id}))}}}]),n}(p.PureComponent),see=Object(b.b)((function(e){return{glAccounts:P0(e),taxRates:e.finance.taxRates,gsCodes:e.finance.gsCodes,financeEntity:e.invoice}}))(cee);!function(e){e.job="job",e.credit_note="credit_note",e.purchase_order="purchase_order",e.invoice="invoice",e.contact="contact"}(nee||(nee={})),function(e){e.credit_note="credit_note",e.purchase_order="purchase_order",e.invoice="invoice"}(ree||(ree={}));var lee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showApproveModal:!1},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){um.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.channelName,n=e.otherActions,r=e.type,o=e.onTagClick,i=e.viewTagsPermission,c=e.addNotePermission,s=e.onNoteAdd;return Object(a.jsxs)(q_,{className:"d-flex align-items-center justify-content-between",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"".concat(nee[r],"-menu-tooltip"),effect:"solid",place:"bottom"}),Object(a.jsx)(J_,{"data-tip":"Add note","data-for":"".concat(nee[r],"-menu-tooltip"),disabled:!c,children:Object(a.jsx)(cm,{name:Xf.AddNote,onClick:c?s:void 0})}),Object(a.jsx)(gN,{type:nee[r],onTagClick:o,disabled:!i}),Object(a.jsx)(nw,{items:n,disabled:!n.length})]}),Object(a.jsx)(AN,{channel:t})]})}}]),n}(p.PureComponent),uee={recipient_contact:[Dv],location:[Dv],date:[Dv]},dee=Tv(Object(c.a)(Object(c.a)({},uee),{},{due_at:[Dv]})),pee=Tv(uee);function hee(){var e=Object(f.a)(["\n  font-size: ",";\n  display: ",";\n"]);return hee=function(){return e},e}function bee(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n"]);return bee=function(){return e},e}function fee(){var e=Object(f.a)(["\n  float: right;\n  cursor: pointer;\n  margin-top: -3px;\n  margin-right: -8px;\n"]);return fee=function(){return e},e}function mee(){var e=Object(f.a)(["    \n  margin: 10px auto;\n  padding: 12px;\n  padding-right: 20px;\n  position: relative;\n  overflow: ",";\n  position: relative;\n"]);return mee=function(){return e},e}var jee=Object(y.default)(gv(["collapsed","overflow"])("div"))(mee(),(function(e){return e.overflow?e.overflow:"hidden"})),vee=y.default.div(fee()),Oee=y.default.div(bee(),lm.bold),gee=Object(y.default)(gv(["collapsed"])("div"))(hee(),sm.smaller,(function(e){return e.collapsed?"none":"block"})),xee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={collapsed:!e.props.isNew,overflow:"",contactCategory:[]},e.submitSavedInvoice=function(){if(!e.props.isNew&&e.props.dirty)return e.props.handleSubmit(e.props.onUpdate)()},e.debouncedSubmitSavedInvoice=Object(m.debounce)(e.submitSavedInvoice,200),e.onJobSelect=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.props.change("location",n.assigned_location),e.props.change("reference",n.reference_number),e.props.isNew&&(r=n.invoice_to_contact?{id:n.invoice_to_contact.contact_id,name:n.invoice_to_contact.contact_name}:{},e.props.change("recipient_contact",r),e.props.isInvoice&&(n.invoice_to_contact&&(null===(a=n.invoice_to_contact)||void 0===a?void 0:a.payment_term)?(e.props.change("payment_term",null===(o=n.invoice_to_contact)||void 0===o?void 0:o.payment_term),s=(null===(i=n.invoice_to_contact)||void 0===i||null===(c=i.payment_term)||void 0===c?void 0:c.due_dates)||30,l=pm()(e.props.formData.date).add(s,"days"),e.props.change("due_at",null),setTimeout((function(){e.props.change("due_at",l)}))):(e.props.change("payment_term",null===(u=e.props.paymentTerms)||void 0===u?void 0:u.find((function(e){return 30===e.due_days}))),d=pm()(e.props.formData.date).add(30,"days"),e.props.change("due_at",null),setTimeout((function(){e.props.change("due_at",d)}))))),e.debouncedSubmitSavedInvoice();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadContacts=function(t){var n=e.props.entityType,r=e.state.contactCategory,a={term:t,contact_status:["active"]};if(n===Q9.purchaseOrder){var o=null===r||void 0===r?void 0:r.find((function(e){return"supplier"===e.type}));o&&(a.contact_category_id=null===o||void 0===o?void 0:o.id)}return hO.searchContacts(a).then((function(e){return e.data}))},e.getContactName=function(t){var n=e.props.formData;n&&n.recipient_name;return t.name||hO.getContactName(t)},e.debouncedLoadContacts=Qv()(e.loadContacts,1e3),e.debouncedSearchJobs=Qv()(zy.searchJobs,1e3),e.onChangePaymentTerm=function(t){e.setDueDateOnPaymentTerm(t),e.debouncedSubmitSavedInvoice()},e.setDueDateOnPaymentTerm=function(t){if(t){var n=t.due_days?t.due_days:30,r=pm()(e.props.formData.date).add(n,"days");e.props.change("due_at",null),setTimeout((function(){e.props.change("due_at",r)}))}},e.toggleCollapsed=function(){e.setState({collapsed:!e.state.collapsed})},e.onContactChange=function(t){t&&e.props.isInvoice&&t.payment_terms&&(e.setDueDateOnPaymentTerm(t.payment_terms),e.props.change("payment_term",t.payment_terms)),e.debouncedSubmitSavedInvoice()},e.toContactStyle=function(){return{container:function(e){return Object(c.a)(Object(c.a)({},e),{},{zIndex:99999})}}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.props.entityType===Q9.purchaseOrder&&hO.getCategories({}).then((function(t){e.setState({contactCategory:t.data})}))}},{key:"render",value:function(){var e,t,n,r=this.props,o=r.locations,i=r.handleSubmit,c=r.isNew,s=r.isInvoice,l=r.disabled,u=r.isFromJobCosting,d=r.paymentTerms,p=r.entityType,h=r.createBtnCaption;return Object(a.jsxs)(jee,{collapsed:this.state.collapsed,overflow:"",children:[!c&&Object(a.jsx)(vee,{onClick:this.toggleCollapsed,children:Object(a.jsx)(cm,{name:this.collapseIconName,size:16})}),Object(a.jsx)(Oee,{}),Object(a.jsx)(gee,{collapsed:this.state.collapsed,children:Object(a.jsx)(Vg,{isNew:c,children:Object(a.jsxs)("form",{onSubmit:i,autoComplete:"off",children:[Object(a.jsxs)("fieldset",{disabled:l,children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12 position-relative",children:Object(a.jsx)(Hv.a,{name:"recipient_contact",label:"To:",placeholder:"Start typing to search...",component:NO,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-9",loadOptions:this.debouncedLoadContacts,getOptionLabel:this.getContactName,getOptionValue:function(e){return e.id},onChange:this.onContactChange,disabled:l,style:this.toContactStyle,maxMenuHeight:270})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"location",label:"From:",placeholder:"Select...",component:xO,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-6",options:o,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:this.debouncedSubmitSavedInvoice,disabled:!o.length||l||(null===(e=this.props)||void 0===e||null===(t=e.formData)||void 0===t?void 0:t.job)})})})]}),Object(a.jsxs)("div",{className:"col-5 offset-1",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"date",label:"Date:",placeholder:"Date",component:s_,className:"row",labelClassName:"col-4 pr-0 col-form-label",valueClassName:"col-6",onChange:this.debouncedSubmitSavedInvoice,disabled:l,futureEnabled:!0})})}),s&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"due_at",label:"Due Date:",placeholder:"Due Date",component:s_,className:"row",labelClassName:"col-4 pr-0 col-form-label",valueClassName:"col-6",onChange:this.debouncedSubmitSavedInvoice,disabled:l,futureEnabled:!0})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"payment_term",label:"Payment Term:",placeholder:"Select...",component:xO,className:"row",labelClassName:"col-4 col-form-label",valueClassName:"col-6",options:d,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.description},onChange:this.onChangePaymentTerm,disabled:!(null===d||void 0===d?void 0:d.length)||l})})})]})]})]}),Object(a.jsx)("div",{className:"row pt-5",children:Object(a.jsxs)("div",{className:"col-6",children:[p!==Q9.purchaseOrder&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"job",label:"Job Number (optional):",placeholder:"Job Number",component:NO,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-6",loadOptions:this.debouncedSearchJobs,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return zy.getJobName(e)},onChange:this.onJobSelect,disabled:l})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"reference",label:"Reference:",placeholder:"None",component:yg,className:"row",labelClassName:"col-3 col-form-label",valueClassName:"col-6",onBlur:this.debouncedSubmitSavedInvoice})})})]})}),p!==Q9.creditNote&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-9",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"description",label:"Description:",placeholder:"Description...",component:gq,className:"row",labelClassName:"col-2 col-form-label",valueClassName:"col-9",validate:(null===(n=this.props.formData)||void 0===n?void 0:n.job)?void 0:Dv,onBlur:this.debouncedSubmitSavedInvoice,disabled:l})})})})})]}),Object(a.jsx)(Ov,{}),c&&!u&&Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",disabled:this.props.submitting,children:h})]})})})]})}},{key:"collapseIconName",get:function(){return this.state.collapsed?Xf.ArrowDown:Xf.ArrowUp}}]),n}(p.PureComponent),yee=Object(b.b)((function(e){return{locations:e.user.locations}}))(xee),_ee=Object(jv.a)({form:"InvoiceDetailsForm",validate:dee,enableReinitialize:!0})(yee),wee=Object(b.b)((function(e){return{formData:Object(GM.a)("InvoiceDetailsForm")(e)}}))(_ee);function See(){var e=Object(f.a)(["\n  border-left: 1px solid ",";\n"]);return See=function(){return e},e}function kee(){var e=Object(f.a)(["\n  min-height: 100%;\n"]);return kee=function(){return e},e}var Cee,Nee=y.default.div(kee()),Eee=Object(y.default)(UC)(See(),_.gray2),Aee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.sidebarMenuItems,n=e.menu,r=e.header,o=e.content,i=e.references,c=e.upperToolsContainer,s=e.footer;return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(Nk,{items:t}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(Eee,{className:"h-100",children:Object(a.jsxs)(Nee,{className:"d-flex flex-row align-items-stretch",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[n,r,c,Object(a.jsx)(JC,{children:o}),s]}),Object(a.jsx)(iD,{children:i})]})})})]})}}]),n}(p.PureComponent),Iee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onClose,o=r.onSubmit,e.setState({loading:!0}),t.prev=2,t.next=5,o(n);case 5:Oj(uj.Success,"A request for approval has been sent to selected users"),a(),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),Oj(uj.Danger,"Server error");case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.approvers,r=t.handleSubmit;return Object(a.jsx)("form",{autoComplete:"off",onSubmit:r(e.onSubmit),id:"RequestApprovalModalForm",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"user",component:xO,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return mm(e).name},validate:Dv,options:n,label:"Staff Name"})})})})},e}return Object(l.a)(n,[{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",type:"submit",form:"RequestApprovalModalForm",children:"Send"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=this.state.loading;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,footer:this.renderFooter(),body:this.renderBody(),loading:r,title:"Request Approval"})})}}]),n}(p.PureComponent),Tee=Object(jv.a)({form:"RequestApprovalModalForm"})(Iee),Ree=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e._ISLOADED=!1,e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.id,n.id=r,a=e.props,o=a.onClose,i=a.onSubmit,e.setState({loading:!0}),t.prev=4,t.next=7,i(n);case 7:Oj(uj.Success,"A request to Adjust has been sent."),o(),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(4),Oj(uj.Danger,"Server error");case 14:return t.prev=14,e._ISLOADED&&e.setState({loading:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[4,11,14,17]])})));return function(e){return t.apply(this,arguments)}}(),e.onClickReplaceWithContactDetails=function(t){var n;t.preventDefault();var r=e.props.contacts;e.props.change("name",e.contactFullName(r)),e.props.change("address",null===r||void 0===r||null===(n=r.mailing_address)||void 0===n?void 0:n.full_address)},e.renderBody=function(){var t=e.props.handleSubmit;return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:t(e.onSubmit),id:"AdjustModalForm",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",placeholder:"Name",component:yg,validate:Dv})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)(Hv.a,{name:"address",label:"Address",component:gq,validate:Dv})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-8",children:Object(a.jsx)("a",{href:"#",onClick:e.onClickReplaceWithContactDetails,children:"Replace to previous contact details"})})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this._ISLOADED=!0}},{key:"componentWillUnmount",value:function(){this._ISLOADED=!1}},{key:"contactFullName",value:function(e){return"company"===(null===e||void 0===e?void 0:e.contact_type)?(null===e||void 0===e?void 0:e.trading_name)||"":"".concat((null===e||void 0===e?void 0:e.first_name)||""," ").concat((null===e||void 0===e?void 0:e.last_name)||"")}},{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",type:"submit",form:"AdjustModalForm",children:"Save"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.title,o=this.state.loading;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,footer:this.renderFooter(),body:this.renderBody(),loading:o,title:r})})}}]),n}(p.PureComponent),Dee=Object(jv.a)({form:"AdjustModalForm",enableReinitialize:!0})(Ree),Mee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n=this.props.contact,r=n.mailing_address,o=n.addresses,i=n.email,c=o&&o.find((function(e){return e.type===Sv.street}))||r,s=(null===(e=this.props.entity)||void 0===e?void 0:e.recipient_name)||hO.getContactName(this.props.contact)||i||"";return Object(a.jsxs)(CT,{caption:"Adjusted Invoice To",hasMenu:!1,children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:s})}),(null===(t=this.props.entity)||void 0===t?void 0:t.recipient_address)||c&&c.full_address]})}}]),n}(p.PureComponent),Lee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).usedContactIds=void 0,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchReferenceBarData()}},{key:"componentDidUpdate",value:function(e){this.props.entity.job&&e.entity.job&&this.props.entity.job.id!==e.entity.job.id&&this.fetchReferenceBarData()}},{key:"fetchReferenceBarData",value:function(){var e=this.props.entity.job;if(e){var t=e.id;this.props.contacts.fetch(t)}}},{key:"renderReferenceBarJob",value:function(){var e=this.props.entity.job;return e?Object(a.jsx)(qM,{job:e,showJobLink:!0,contacts:this.props.contacts.data||[],withoutActions:!0}):null}},{key:"checkContactNotUsed",value:function(e){return!this.usedContactIds.includes(e.id)&&(this.usedContactIds.push(e.id),!0)}},{key:"renderJobContacts",value:function(){var e=this;return this.props.contacts.data?this.props.contacts.data.map((function(t,n){return e.checkContactNotUsed(t)?Object(a.jsx)(AD,{contact:t},"cnt-".concat(t.type,"-").concat(n)):null})):null}},{key:"renderContact",value:function(e,t){return this.checkContactNotUsed(e)?Object(a.jsx)(AD,{contact:e,entity:t}):null}},{key:"renderReceiptInvoiceContact",value:function(e,t){return t?Object(a.jsx)(Mee,{contact:e,entity:t}):null}},{key:"renderFinancials",value:function(){return Object(a.jsx)(OD,{financials:{}})}},{key:"render",value:function(){return this.usedContactIds=[],Object(a.jsxs)(a.Fragment,{children:[(this.props.loading||this.props.contacts.loading)&&Object(a.jsx)(Nv,{size:40,color:_.white}),this.props.entity.recipient_contact&&this.renderReceiptInvoiceContact(this.props.entity.recipient_contact,this.props.entity),this.props.entity.recipient_contact&&this.renderContact(this.props.entity.recipient_contact),this.props.entity.accounting_organization&&this.renderContact(this.props.entity.accounting_organization.contact),this.props.additionalItems,this.renderJobContacts(),this.renderReferenceBarJob(),this.renderFinancials()]})}}]),n}(p.PureComponent),Pee=oj({contacts:{fetch:zy.getContacts,initialData:[]}})(Lee),Fee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getInitializeFormValues=function(){var t,n,r,a=e.props,o=a.location,i=a.financeEntity.data,c=a.user,s=bj.parse(o.search,{ignoreQueryPrefix:!0}),l=(o.state||{}).job;return e.isNew?(r={date:pm()(),location:(null===l||void 0===l?void 0:l.assigned_location)||s.form_location_id&&c.locations.find((function(e){return+e.id===+(void 0==s.form_location_id?0:s.form_location_id)}))||e.primaryLocation},Object(k.a)(r,l||s.form_job_id?"job":"",l||{id:+(void 0===s.form_job_id?0:s.form_job_id)}),Object(k.a)(r,(null===l||void 0===l?void 0:l.invoice_to_contact)?"recipient_contact":"",(null===l||void 0===l?void 0:l.invoice_to_contact)?{id:null===l||void 0===l||null===(t=l.invoice_to_contact)||void 0===t?void 0:t.contact_id,name:null===l||void 0===l||null===(n=l.invoice_to_contact)||void 0===n?void 0:n.contact_name}:{}),Object(k.a)(r,"due_at",pm()().add(30,"d")),r):i},e}return Object(l.a)(n,[{key:"isNew",get:function(){return!this.props.match.params.id}},{key:"primaryLocation",get:function(){return this.props.user.locations.find((function(e){return!!e.primary}))}}]),n}(oR);!function(e){e[e.FromCreditNote=0]="FromCreditNote",e[e.FromInvoice=1]="FromInvoice"}(Cee||(Cee={}));var Uee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={invoices:[],loading:!1},e.loadInvoices=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.searchInvoices.fetch(n);case 2:r=t.sent,e.setState({invoices:e.invoicesConverter(r.data)});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadCreditNotes=function(t){e.props.searchCreditNotes.fetch(t)},e.debouncedSearch=function(){switch(e.props.mode){case Cee.FromCreditNote:return Object(m.debounce)(e.loadInvoices,1e3);case Cee.FromInvoice:return Object(m.debounce)(e.loadCreditNotes,1e3);default:return Object(m.debounce)((function(e){return null}),1e3)}}(),e.onChange=function(t){var n=e.props,r=n.mode,a=n.financeEntity;if(t)switch(r){case Cee.FromCreditNote:e.debouncedSearch({job_id:+t});break;case Cee.FromInvoice:e.debouncedSearch({term:t,virtual_status:im.approved,locations:[a.location_id]})}else e.debouncedSearch.cancel()},e.invoicesConverter=function(e){return e.map((function(e){return{id:e.id,amount:0,invoice:e}}))},e.onInvoiceAmountChange=function(t){return function(n){var r=e.state.invoices,a=Object.assign([],r);a.forEach((function(e){e.id===t.id&&(e.amount=z0(n.target.value))})),e.setState({invoices:a})}},e.getAmount=function(){return e.state.invoices.reduce((function(e,t){return e+t.amount}),0)},e.isPaymentValid=function(){var t=e.props.financeEntity;return!!t&&t.sub_total===e.getAmount()},e.renderInvoiceAmountInput=function(t){return Object(a.jsx)("input",{type:"number",value:t.amount,onChange:e.onInvoiceAmountChange(t),onBlur:function(){return null},className:"form-control"})},e.chooseCN=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i,c;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.props,a=r.onPay,o=r.onClose,i=r.financeEntity,e.setState({loading:!0}),n.prev=2,c=i.amount_due||0,!(t.total_amount>c)){n.next=7;break}return Oj(uj.Danger,"Unable to apply a credit note value that is higher than the invoice balance due"),n.abrupt("return");case 7:return n.next=9,a(t);case 9:setTimeout(o);case 10:return n.prev=10,e.setState({loading:!1}),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[2,,10,13]])})))},e.renderBody=function(){var t=e.props,n=t.searchInvoices,r=t.financeEntity,o=t.mode,i=t.searchCreditNotes,c=e.state.invoices,s=i.data?i.data.data.filter((function(e){return!r.job_id||(!e.job||e.job.id===r.job_id)})):[];return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(aC,{loading:n.loading||i.loading,onSearchValueChange:e.onChange,placeholder:e.inputPlaceholder,mode:"typeGray",searchIcon:!0,disabled:e.disableInput})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(a.Fragment,{children:[o===Cee.FromCreditNote&&!!c.length&&Object(a.jsxs)("div",{className:"col-12",children:[r&&Object(a.jsxs)(hC,{margin:"20px 0 0 0",className:"d-flex justify-content-end",children:[vm(e.getAmount())," / ",vm(r.sub_total)]}),Object(a.jsx)(hC,{margin:"20px 0 0 0",children:Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Invoice"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Job No."}),Object(a.jsx)(CF,{children:"Total Amount"}),Object(a.jsx)(CF,{children:"Balance Due"}),Object(a.jsx)(CF,{})]})}),Object(a.jsx)(NF,{children:e.state.invoices.map((function(t,n){return Object(a.jsxs)(AF,{children:[Object(a.jsxs)(EF,{children:["#",t.id]}),Object(a.jsx)(EF,{}),Object(a.jsx)(EF,{children:Object(a.jsx)(v8,{job:t.invoice.job,locationOnly:!0})}),Object(a.jsx)(EF,{children:vm(t.invoice.total_amount)}),Object(a.jsx)(EF,{children:vm(t.invoice.balance_due)}),Object(a.jsx)(EF,{children:Object(a.jsx)("div",{style:{width:"150px"},children:e.renderInvoiceAmountInput(t)})})]},n)}))})]})})]}),o===Cee.FromInvoice&&!!s.length&&Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(hC,{margin:"20px 0 0 0",children:Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Credit Note"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Job No."}),Object(a.jsx)(CF,{children:"Total Amount"})]})}),Object(a.jsx)(NF,{children:s.map((function(t,n){return Object(a.jsxs)(AF,{onClick:e.chooseCN(t),children:[Object(a.jsxs)(EF,{children:["CN #",t.id]}),Object(a.jsx)(EF,{}),Object(a.jsx)(EF,{children:Object(a.jsx)(v8,{job:t.job,locationOnly:!0})}),Object(a.jsx)(EF,{children:vm(t.total_amount)})]},n)}))})]})})})]})})]})},e.onInternalPay=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.onPay,a=n.onClose,o=e.state.invoices,e.setState({loading:!0}),t.prev=3,t.next=6,r(o);case 6:setTimeout(a);case 7:return t.prev=7,e.setState({loading:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])}))),e.renderFooter=function(){return e.props.mode===Cee.FromCreditNote?Object(a.jsx)(Xg,{disabled:!e.isPaymentValid(),className:"btn",onClick:e.onInternalPay,children:"Apply"}):void 0},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.financeEntity,n=e.mode;t&&t.job_id&&n===Cee.FromCreditNote&&this.loadInvoices({job_id:t.job_id})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=this.state.loading;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,footer:this.renderFooter(),body:this.renderBody(),loading:r,title:"Apply Credit Note to Invoice"})})}},{key:"initialSearchInputValue",get:function(){var e=this.props,t=e.financeEntity;switch(e.mode){case Cee.FromCreditNote:return(!!t&&t.job_id||"").toString();case Cee.FromInvoice:default:return""}}},{key:"disableInput",get:function(){var e=this.props,t=e.financeEntity;switch(e.mode){case Cee.FromCreditNote:return!!t&&!!t.job_id;case Cee.FromInvoice:default:return!1}}},{key:"inputPlaceholder",get:function(){switch(this.props.mode){case Cee.FromCreditNote:return"Type job number...";case Cee.FromInvoice:return"CN number, reference or job no";default:return""}}}]),n}(p.PureComponent),Bee=Object(sg.compose)(oj({searchInvoices:{fetch:JB.getUnpaid},searchCreditNotes:{fetch:WZ.search}}))(Uee),Vee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.onSubmit,t.next=3,r(n);case 3:e.onClose();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClose=function(){e.props.reset(),e.props.onClose()},e.renderBody=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("form",{onSubmit:e.props.handleSubmit(e.onSubmit),autoComplete:"off",id:"FinanceDeclineModalForm",children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{label:"Reason:",name:"reason",placeholder:"Reason",component:gq,validate:[Dv],rows:7,onChange:function(t){var n;e.props.change("reason",null===t||void 0===t||null===(n=t.target)||void 0===n?void 0:n.value)}})})})})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",type:"submit",form:"FinanceDeclineModalForm",disabled:this.props.submitting||this.props.invalid,children:"Save"})}},{key:"render",value:function(){return Object(a.jsx)(qO,{isOpen:this.props.isOpen,children:Object(a.jsx)(cg,{onClose:this.onClose,footer:this.renderFooter(),closeCaption:"Cancel",body:this.renderBody(),loading:this.props.submitting,title:this.props.title})})}}]),n}(p.PureComponent),Jee=Object(jv.a)({form:"FinanceInvoiceDeclineForm"})(Vee),qee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={openModal:!1},e.submitReason=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.submit(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(){e.setState({openModal:!0})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.isPendingApproval,r=t.btnCaption,o=t.title,i=this.state.openModal;return n?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Jee,{isOpen:i,onClose:function(){e.setState({openModal:!1})},title:o,onSubmit:this.submitReason}),Object(a.jsx)(Xg,{type:"button",className:"btn ml-2",onClick:this.showModal,children:r})]}):Object(a.jsx)(a.Fragment,{})}}]),n}(p.PureComponent),zee=Object(sg.compose)(O.g,Object(b.b)((function(e){return{}})))(qee);function Gee(){var e=Object(f.a)(["\n  position: relative;\n  border-top: 1px solid ",";\n"]);return Gee=function(){return e},e}var Wee=y.default.div(Gee(),_.gray2),Hee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showApproveModal:!1,showAdjustModal:!1,disableApproveButton:!1,showAddPaymentModal:!1,showSendInvoiceModal:!1,showAddCreditNoteModal:!1,pageLoading:!1,isEditDraftLockedInvoice:!1,loading:!1},e.notesCounter=function(e){return e.invoiceNotes.data?e.invoiceNotes.data.data.length:0},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.createInvoice=function(t){var n=e.props.match.params.tempId;return t.invoice_template_id=n?+n:0,JB.create(t).then((function(t){e.props.history.push("/finance/invoices/details/".concat(t.data.id))})).catch((function(e){return e.status_code===ox?ix(e):Promise.reject()}))},e.updateInvoice=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.prev=2,t.next=5,e.props.dispatch(TX(+e.props.match.params.id,n));case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),t.t0.status_code!==ox){t.next=14;break}return t.abrupt("return",ix(t.t0));case 14:return t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createOrUpdateInvoice=function(t){return e.isNew?e.createInvoice(t):e.updateInvoice(t)},e.createItem=function(){return e.props.dispatch(MX())},e.updateItem=function(t,n){return e.props.dispatch(PX(t,n,!0))},e.updateItems=function(t){var n=e.props.match.params.id;if(n){var r=[];if(t.length>0&&t.map((function(e,t){r.push({id:e.id,position:t})})),r.length>0)try{JB.invoiceItemsPositionUpdate(+n,r)}catch(a){Oj(uj.Danger,"Server Error")}e.props.dispatch(FX(t))}},e.submitItem=function(t){return e.setState({loading:!0}),e.props.dispatch(UX(t)).finally((function(){e.setState({loading:!1})}))},e.removeItem=function(t){return e.props.dispatch(BX(t))},e.approveInvoice=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match,!e.allowApprove()){t.next=23;break}return t.next=4,r(iw("Confirm","Are you sure you want to approve Invoice #".concat(a.params.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=21;break}return e.setState({disableApproveButton:!0}),t.prev=7,t.next=10,JB.approveInvoice(a.params.id);case 10:return Oj(uj.Success,"Invoice approved successfully"),t.next=13,e.fetchInvoice();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Oj(uj.Danger,"Invoice can't be approved");case 18:return t.prev=18,e.setState({disableApproveButton:!1}),t.finish(18);case 21:t.next=24;break;case 23:e.showApproveModal();case 24:case"end":return t.stop()}}),t,null,[[7,15,18,21]])}))),e.getFiscalEndOfMonthDate=function(e,t){var n=pm()(null===e||void 0===e?void 0:e.financial_date);return pm()(t).isBefore(n)?(n.add(1,"day"),n):t},e.duplicateInvoice=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=14;break}return t.next=4,a(iw("Confirm","Duplicate financeEntity #".concat(r.id,"?")));case 4:if(!t.sent){t.next=14;break}return r.date=e.getFiscalEndOfMonthDate(r.accounting_organization,r.date),i=(null===r||void 0===r||null===(o=r.payment_term)||void 0===o?void 0:o.due_days)||30,c=pm()(r.date).add(i,"days"),r.due_at=c,t.next=12,JB.create(r);case 12:s=t.sent,e.props.history.push("/finance/invoices/details/".concat(s.data.id));case 14:case"end":return t.stop()}}),t)}))),e.deleteInvoice=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=9;break}return t.next=4,a(iw("Confirm","Are you sure you want to delete the invoice #".concat(r.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=9;break}return t.next=8,JB.remove(r.id);case 8:e.props.history.replace("/finance/invoices/draft");case 9:case"end":return t.stop()}}),t)}))),e.adjustInvoice=function(){e.showAdjustModal()},e.print=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.props.financeEntity.data)){t.next=6;break}return t.next=4,JB.forPrint(r.id,n);case 4:a=t.sent,MV()({printable:window.URL.createObjectURL(new Blob([a],{type:"application/pdf"})),type:"pdf"});case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,JB.addTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,JB.removeTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickEditDraftLockedInvoice=function(){e.setState({isEditDraftLockedInvoice:!0})},e.getDropdownMenuItems=function(t){var n=e.props.financeEntity.data;return[{name:"Edit Invoice",onClick:e.onClickEditDraftLockedInvoice,disabled:!e.isEditDraftLockedInvoice()},{name:"Print",onClick:function(){e.print(!1)}},{name:"Print With Detail",onClick:function(){e.print(!0)}},{name:"Duplicate",onClick:e.duplicateInvoice,disabled:!t.has(vx.FINANCE_INVOICES_MANAGE)||!n},{type:"divider"},{name:"Adjust Invoice To...",onClick:e.adjustInvoice,disabled:!e.isDraft()&&!t.has(vx.FINANCE_INVOICES_MANAGE)},{type:"divider"},{name:"Delete",onClick:e.deleteInvoice,disabled:!t.has(vx.FINANCE_INVOICES_MANAGE)}]},e.isNoteEditorVisible=function(){return"true"===bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.redirectToNotes=function(){var t=e.props,n=t.history,r=t.match;n.push("/finance/invoices/details/".concat(r.params.id,"?note=true"))},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.financeEntity.data,o=r.match,!a||!a.id){t.next=6;break}return t.next=4,JB.addNoteToInvoice(n.id,a.id);case 4:e.loadNotes(),e.props.history.replace("/finance/invoices/details/".concat(o.params.id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadNotes=function(){var t=e.props,n=t.match,r=t.invoiceNotes,a=n.params.id;r.fetch(a)},e.getSortedNotes=function(){var t=e.props.invoiceNotes;return t.data?t.data.data.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})):[]},e.deleteNote=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.invoiceNotes,t.next=3,JB.removeNoteFromInvoice(n,a.params.id);case 3:o.fetch(a.params.id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.allowApprove=function(){var t=e.props,n=t.user,r=t.financeEntity;return+n.me.invoice_approve_limit>=+(r.data.total_amount||0)&&!!r.data.location&&n.locations.map((function(e){return+e.id})).includes(+r.data.location.id)},e.isPendingApproval=function(){var t=e.props,n=t.user,r=t.financeEntity.data,a=r.latest_status&&r.latest_status.status,o=r.virtual_status,i=r.approve_requests&&r.approve_requests.find((function(e){var t;return e.approver_id===(null===(t=n.me)||void 0===t?void 0:t.id)}));return!(!a||"draft"!==a||"pending_approval"!==o||!i)},e.sendApproveRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,JB.sendApproveRequest(r.params.id,[n.user.id]);case 3:return t.next=5,e.fetchInvoice();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendAdjustRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({pageLoading:!0}),JB.adjustInvoice(n.id,n.address,n.name).then(Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchInvoice();case 2:e.setState({pageLoading:!1});case 3:case"end":return t.stop()}}),t)}))));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showApproveModal=function(){e.setState({showApproveModal:!0})},e.hideApproveModal=function(){e.setState({showApproveModal:!1})},e.showAdjustModal=function(){e.setState({showAdjustModal:!0})},e.hideAdjustModal=function(){e.setState({showAdjustModal:!1})},e.showAddPaymentModal=function(){e.setState({showAddPaymentModal:!0})},e.hideAddPaymentModal=function(){e.setState({showAddPaymentModal:!1})},e.showSendInvoicetModal=function(){e.setState({showSendInvoiceModal:!0})},e.hideSendInvoicetModal=function(){e.setState({showSendInvoiceModal:!1})},e.showAddCreditModal=function(){e.props.financeEntity;e.setState({showAddCreditNoteModal:!0})},e.hideAddCreditModal=function(){e.setState({showAddCreditNoteModal:!1})},e.onPaymentReceive=function(){e.fetchInvoice()},e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e.renderInvoicePayment=function(t){var n=e.props.financeEntity.data.amount_due||0,r=t.has(vx.FINANCE_PAYMENTS_RECEIVE),o=t.has(vx.FINANCE_CREDIT_NOTES_MANAGE);return e.isPayable()&&(o||r)?Object(a.jsxs)(CT,{caption:"Invoice Payment",children:[r&&Object(a.jsx)(mC.Link,{onClick:e.showAddPaymentModal,children:"Add Payment"}),o&&Object(a.jsx)(mC.Link,{onClick:e.showAddCreditModal,children:"Add Credit Note"}),r&&n>1&&Object(a.jsx)(mC.Link,{onClick:e.showSendInvoicetModal,children:"Send Invoice to Customer"})]}):void 0},e.isDraft=function(){var t=e.props.financeEntity.data;return"draft"===(t.latest_status&&t.latest_status.status)},e.isApproved=function(){var t=e.props.financeEntity.data;return"approved"===(t.latest_status&&t.latest_status.status)},e.editableInvoice=function(){var t=e.props.user,n=t.me&&t.me.role;return!(!e.isDraft()||"administrator"!==n&&"Admin"!==n&&"branch_franchise_manager"!==n&&"cco"!==n&&"cso_am"!==n)||!(!e.isDraft()||"administrator"!==n&&"Admin"!==n)},e.isEditDraftLockedInvoice=function(){var t=e.props.financeEntity;return!(!e.isDraft()||!t.data.locked)},e.isPayable=function(){var t=e.props.financeEntity.data;return!e.isNew&&!e.isDraft()&&"paid"!==t.virtual_status},e.payInvoiceWithCN=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.dispatch,i=a.params.id,t.next=4,o(iw("Confirm","Apply Credit Note #".concat(n.id," to Invoice #").concat(i,"?")));case 4:if(!(c=t.sent)){t.next=16;break}return t.next=8,WZ.findById(n.id);case 8:return s=t.sent,t.next=11,WZ.applyCreditNoteToInvoices(n.id,[{invoice_id:+i,amount:s.data.sub_total}]);case 11:return Oj(uj.Success,"Credit note apply successfully"),t.next=14,e.fetchInvoice();case 14:t.next=17;break;case 16:throw c;case 17:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onClickJobIncvoiceCreate=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,o=f7.getState(),i=[],!Object(FI.a)("InvoiceDetailsForm")(o)){t.next=15;break}if(!(r.items&&(null===(c=r.items)||void 0===c?void 0:c.length)<=0)){t.next=7;break}return Oj(uj.Danger,"Invoice line item does not exist"),t.abrupt("return");case 7:if(!e.LineItemValidate()){t.next=10;break}return Oj(uj.Danger,"Validation errors"),t.abrupt("return");case 10:e.setState({disableApproveButton:!0}),s=Object(GM.a)("InvoiceDetailsForm")(o),JB.create(s).then(function(){var t=Object(lj.a)(sj.a.mark((function t(n){var a,o,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:a=r.items||[],o=Object(oV.a)(a),t.prev=2,s=sj.a.mark((function e(){var t,r,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=c.value).position=a.indexOf(t),e.next=4,JB.createItem(n.data.id,t);case 4:r=e.sent,t.jobCostinItemType&&(null===(o=t.jobCostinItemTypeIds)||void 0===o||o.forEach((function(e){i.push({type:t.jobCostinItemType,id:e,invoice_item_id:r.data.id})})));case 6:case"end":return e.stop()}}),e)})),o.s();case 5:if((c=o.n()).done){t.next=9;break}return t.delegateYield(s(),"t0",7);case 7:t.next=5;break;case 9:t.next=14;break;case 11:t.prev=11,t.t1=t.catch(2),o.e(t.t1);case 14:return t.prev=14,o.f(),t.finish(14);case 17:if(t.t2=i.length>0,!t.t2){t.next=21;break}return t.next=21,JB.setInvoiceItemToJobCostingItem(n.data.job_id,i);case 21:Oj(uj.Success,"Invoice created successfully"),e.props.history.push("/finance/invoices/details/".concat(n.data.id));case 23:case"end":return t.stop()}}),t,null,[[2,11,14,17]])})));return function(e){return t.apply(this,arguments)}}()).catch((function(e){if(e.status_code===ox)return ix(e)})).finally((function(){e.setState({disableApproveButton:!1})})),t.next=17;break;case 15:return t.next=17,a(Object(Wv.c)("InvoiceDetailsForm"));case 17:case"end":return t.stop()}}),t)}))),e.getApprovalUser=function(){var t,n,r=e.props,a=r.approvers,o=r.financeEntity.data.total_amount||0;return(null===(t=a.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.filter((function(e){return e.invoice_approve_limit>=o})))||[]},e.invoiceDeclined=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.props.financeEntity.data).id){t.next=6;break}return t.next=4,JB.invoiceDecline(r.id,n);case 4:""===t.sent?(Oj(uj.Success,"Invoice has been declined"),e.fetchInvoice()):Oj(uj.Danger,"Server Error");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isShownRequestApprovalButton=function(){var t=e.props.financeEntity.data,n=t.latest_status&&t.latest_status.status,r=t.virtual_status,a=t.approve_requests&&t.approve_requests.find((function(e){return e.approver_id>0}));return!n||"draft"!==n||"pending_approval"!==r||!a},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.isNew||this.fetchInvoice(),this.props.paymentTerms.fetch(),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id===e.match.params.id||this.isNew||this.fetchInvoice(),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:yX})}},{key:"fetchInvoice",value:function(){var e=this.props,t=e.dispatch,n=e.match,r=e.approvers,a=e.tags,o=n.params.id;this.loadNotes(),r.fetch(o),a.fetch(o),t(IX(o))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){return[{path:"/finance/invoices/draft",icon:Xf.FileEdit,isActive:this.isActive("/finance/invoices/draft"),hint:"Drafts"},{path:"/finance/invoices/unpaid",icon:Xf.FileCheck,isActive:this.isActive("/finance/invoices/unpaid"),hint:"Unpaid"},{path:"/finance/invoices/overdue",icon:Xf.FileCash,isActive:this.isActive("/finance/invoices/overdue"),hint:"Overdue"},{path:"/finance/invoices/paid",icon:Xf.FileCash,isActive:this.isActive("/finance/invoices/paid"),hint:"Paid"},{path:"/finance/invoices/all",icon:Xf.File,isActive:this.isActive("/finance/invoices/all"),hint:"All invoices"}]}},{key:"LineItemValidate",value:function(){var e=this.props.financeEntity.data,t=!1;return j.a.forEach(e.items,(function(e){return!(Dv(e.gs_code)||Dv(e.description)||Dv(e.unit_cost)||Dv(e.quantity)||Dv(e.gl_account)||Dv(e.tax_rate))||(t=!0,!1)})),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.financeEntity,r=t.user,o=t.invoiceNotes,i=(t.approvers,t.tags),s=this.state,l=s.showApproveModal,u=s.showAdjustModal,d=s.disableApproveButton,p=s.showAddPaymentModal,h=s.showAddCreditNoteModal,b=s.pageLoading,f=s.showSendInvoiceModal,m=s.loading;if(b||(!n.ready||n.loading)&&!this.isNew&&!this.alreadyLoaded)return Object(a.jsx)(Nv,{size:40,color:_.white});var v=n.data,O=v.statuses||[],g=!!v.items&&v.items.length>0,x=!v.amount_due||!!v.amount_due&&v.amount_due<0,y=d||!g||x,w=this.props.location.state||{},S=w.job,k=w.jobCosting,C=w.stages;return Object(a.jsx)(Cx.Consumer,{children:function(t){var s,b,g,x,w,N,E=k0.isEditable(vx.FINANCE_INVOICES_MANAGE,vx.FINANCE_INVOICES_MANAGE_LOCKED,v,t,e.state.isEditDraftLockedInvoice),A=e.getDropdownMenuItems(t);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/invoices",children:"Invoices"}),null===(s=e.props.location)||void 0===s||null===(b=s.state)||void 0===b||null===(g=b.breadcrumbs)||void 0===g?void 0:g.map((function(e){return e&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label})})),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/invoices/create",children:e.isNew?"Create New":"Invoice #".concat(e.props.match.params.id)}),h&&Object(a.jsx)(Bee,{isOpen:h,onClose:e.hideAddCreditModal,mode:Cee.FromInvoice,onPay:e.payInvoiceWithCN,financeEntity:v}),l&&Object(a.jsx)(Tee,{isOpen:l,approvers:e.getApprovalUser(),onSubmit:e.sendApproveRequest,onClose:e.hideApproveModal}),e.editableInvoice()&&u&&Object(a.jsx)(Dee,{isOpen:u,onSubmit:e.sendAdjustRequest,onClose:e.hideAdjustModal,title:"Edit Invoice To",id:v.id,contacts:v.recipient_contact,initialValues:{name:v.recipient_name,address:v.recipient_address}}),p&&Object(a.jsx)(f6,{invoice:v,onPaymentReceive:e.onPaymentReceive,onClose:e.hideAddPaymentModal}),f&&Object(a.jsx)(I6,{isOpen:f,invoiceData:v,onClose:e.hideSendInvoicetModal,initialValues:{email:v.recipient_contact&&v.recipient_contact.email||""}}),Object(a.jsx)(Aee,{sidebarMenuItems:e.getMenuItems(),menu:e.isNew?null:Object(a.jsx)(lee,{type:ree.invoice,otherActions:A,onTagClick:e.onTagClick,viewTagsPermission:t.has(vx.TAGS_VIEW),onNoteAdd:e.redirectToNotes,addNotePermission:t.has(vx.FINANCE_INVOICES_MANAGE),channelName:"online-financeEntity-".concat(v.id)}),header:Object(a.jsx)(K6,{id:v.id,tags:i.data.data||[],isNew:e.isNew,statusList:wm(v),loadingTags:i.loading,onTagRemove:e.onRemoveTagClick,entityName:"invoice"}),upperToolsContainer:e.isNoteEditorVisible()?Object(a.jsx)(JC,{style:{borderBottom:"1px solid ".concat(_.gray2)},children:Object(a.jsx)(WA,{afterSave:e.saveNoteDraft,disableTemplatesControl:!0,color:_.orange0,onCancel:e.revertBackToNotes})}):null,content:Object(a.jsxs)(a.Fragment,{children:[m&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(wee,{onSubmit:e.createOrUpdateInvoice,onUpdate:e.updateInvoice,isInvoice:!0,isNew:e.isNew,disabled:!E,initialValues:Object(c.a)(Object(c.a)({},e.getInitializeFormValues()),{},{payment_term:e.isNew?null===(x=e.props.paymentTerms.data)||void 0===x?void 0:x.data.find((function(e){return 30===e.due_days})):e.props.financeEntity.data.job&&e.props.financeEntity.data.job.invoice_to_contact?null===(w=e.props.financeEntity.data.job.invoice_to_contact)||void 0===w?void 0:w.payment_term:e.props.financeEntity.data.payment_term}),isFromJobCosting:!j.a.isEmpty(k)||!j.a.isEmpty(C),paymentTerms:null===(N=e.props.paymentTerms.data)||void 0===N?void 0:N.data,createBtnCaption:"Create Draft Invoice"}),(!e.isNew||!j.a.isEmpty(k)||!j.a.isEmpty(C))&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(see,{entityType:Q9.invoice,entity:v,disabled:!E,onCreate:e.createItem,onChange:e.updateItem,onSubmit:e.submitItem,onRemove:e.removeItem,handlePositionUpdatedData:e.updateItems,jobCosting:k,isFromJobCosting:!j.a.isEmpty(k),jobFromJobCosting:S,isFromStages:!j.a.isEmpty(C),stagesItems:C}),t.has(vx.FINANCE_INVOICES_MANAGE)&&e.isDraft()&&j.a.isEmpty(k)&&Object(a.jsxs)("div",{className:"text-right",children:[e.allowApprove()&&Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:y,onClick:e.approveInvoice,children:"Approve Invoice"}),!e.allowApprove()&&e.isShownRequestApprovalButton()&&Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:y,onClick:e.approveInvoice,children:"Request Approval"}),Object(a.jsx)(zee,{btnCaption:"Decline Invoice",title:"Decline Invoice? Give Reason!",isPendingApproval:e.isPendingApproval(),submit:e.invoiceDeclined})]}),t.has(vx.FINANCE_INVOICES_MANAGE)&&(!j.a.isEmpty(k)||!j.a.isEmpty(C))&&Object(a.jsx)("div",{className:"text-right",children:Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:d,onClick:e.onClickJobIncvoiceCreate,children:"Create Draft Invoice"})})]})]}),footer:e.isNew?null:Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[(e.getSortedNotes().length>0||O.length>0)&&Object(a.jsx)(Wee,{children:Object(a.jsx)(jT,{notes:e.getSortedNotes(),onNoteDelete:e.deleteNote,loading:o.loading,highlightedItemId:e.getHighlightedItem().itemId,user:r,statuses:O,afterEditSuccess:e.loadNotes})}),Object(a.jsx)(bT,{status:Object.assign({status:"created"},n.data),itemTypeName:"Invoice"}),v.payments&&v.payments.length>0&&v.payments.map((function(e){return Object(a.jsxs)(pT,{className:"d-flex flex-row align-items-end",children:[Object(a.jsxs)("div",{className:"d-flex flex-column align-self-center flex-grow-1",children:["$",null===e||void 0===e?void 0:e.pivot.amount," ",null===e||void 0===e?void 0:e.type," ","credit_note"===e.type&&" ","is applied to this invoice. The payment reference no:"," ",e.reference?"(".concat(e.reference,") "):"n/a ",", this payment is made by"," ",e.user?e.user.full_name:"n/a"," ",v.location&&"| ".concat(v.location.name)]}),Object(a.jsx)(hT,{className:"d-flex flex-column align-self-center",children:pm()((null===e||void 0===e?void 0:e.paid_at)||"").format(lv)})]})}))]}),references:t.has(vx.JOBS_VIEW)&&!e.isNew?Object(a.jsx)(Pee,{entity:v,loading:n.loading,additionalItems:e.renderInvoicePayment(t)}):Object(a.jsx)(a.Fragment,{})})]})}})}},{key:"alreadyLoaded",get:function(){return this.props.financeEntity.data.id&&+this.props.match.params.id===this.props.financeEntity.data.id}}]),n}(Fee),Yee=Object(sg.compose)(O.g,oj({invoiceNotes:{fetch:JB.getInvoiceNotes},approvers:{fetch:JB.getApproverList,initialData:{data:[]}},tags:{fetch:JB.getInvoiceTags,initialData:{data:[]}},paymentTerms:{fetch:cR.getAllPaymentTerm}}),Object(b.b)((function(e){return{financeEntity:e.invoice,user:e.user}})))(Hee);function Qee(){var e=Object(f.a)(["\n  margin-left: 8px;\n  font-size: ",";\n  vertical-align: top;\n"]);return Qee=function(){return e},e}var Kee=[],Zee=Object(y.default)(rN)(Qee(),sm.normal),Xee=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={type:im.draft,search:"",searchLoading:!1,filters:{locations:Kee,recipient_contact_id:null,from_date:"",to_date:"",jobs:Kee,virtual_status:""},resetFilterBar:!1},e.loadOrCancelPO=function(t,n){var r=e.props.match.params.type,a=e.state.search,o=wZ(r);if(a){var i={id:a,virtual_status:o.virtualStatus,status:o.status};n?e.searcher(i):e.debouncedSearch(i)}else{e.debouncedSearch.cancel();var c={virtual_status:o.virtualStatus?o.virtualStatus:o.status,per_page:20,page:t||1,sortby:"desc"};"all"===r?e.loadPurchaseOrders(r,t):e.getTypePurchaseOrders(c)}},e.loadPurchaseOrders=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.dispatch,t.next=3,a($$(n,{page:r,per_page:20,sortby:"desc"}));case 3:e.setState({type:n});case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.getActiveMenuItem=function(){var t=e.props.match.params.type;return e.getMenuItems().find((function(e){return e.type===t}))},e.onSearch=function(t){e.setState({search:t}),setTimeout((function(){e.loadOrCancelPO()}))},e.searcher=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({searchLoading:!0}),t.prev=1,t.next=4,e.props.dispatch(e0(Object.assign({per_page:_g.Standard},n)));case 4:return t.prev=4,e.setState({searchLoading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Object(m.debounce)(e.searcher,1e3),e.getRows=function(){var t=e.props.purchaseOrders.data;return t&&t.data||[]},e.createPurchaseOrder=function(){e.props.history.push("/finance/purchase-orders/create")},e.handlePagination=function(t){e.loadOrCancelPO(t)},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=Qv()(e.searchJobsById,1e3),e.loadContacts=function(e){var t={term:e,contact_status:["active"]};return hO.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadContacts=Qv()(e.loadContacts,1e3),e.getFilterPurchaseOrders=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.filters,n.type,a=e.props.dispatch,t.next=4,a(t0(Object(c.a)(Object(c.a)({},r),{},{sortby:"desc",page:1,per_page:20})));case 4:case"end":return t.stop()}}),t)}))),e.getTypePurchaseOrders=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(t0(n));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getFilters=function(){var t=e.props,n=t.match.params.type,r=t.locations,a=[{value:im.draft,label:im.draft},{value:am.pending_approval,label:hm[am.pending_approval]},{value:im.approved,label:im.approved}];return[{label:"Location",filterKey:"location",options:r,placeholder:"Type to search",getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}},{label:"Contact",filterKey:"to",loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return hO.getContactName(e)},placeholder:"Type to search"},{label:"From",type:"date",filterKey:"dateFrom"},{label:"To",type:"date",filterKey:"dateTo"},{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return zy.getJobName(e)},placeholder:"Type to search"},"all"===n&&{label:"Status",filterKey:"status",options:a,getOptionValue:function(e){return null===e||void 0===e?void 0:e.value},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.label},placeholder:"Select..."}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters,a=e.props.match.params.type;switch(t){case"status":r.virtual_status=null===n||void 0===n?void 0:n.value;break;case"location":r.locations=[null===n||void 0===n?void 0:n.id]||!1;break;case"to":r.recipient_contact_id=null===n||void 0===n?void 0:n.id;break;case"dateFrom":if(""!==n.currentTarget.value){var o=pm.a.utc(n.currentTarget.value).format(ov);r.from_date=o}else r.from_date="";break;case"dateTo":if(""!==n.currentTarget.value){var i=pm.a.utc(n.currentTarget.value).format(ov);r.to_date=i}else r.to_date="";break;case"jobNumber":r.jobs=[null===n||void 0===n?void 0:n.id]}r.virtual_status="all"===a?r.virtual_status:a,e.setState({filters:Object(c.a)({},r)},(function(){e.getFilterPurchaseOrders()}))},e.resetFilter=function(){var t=e.props.match.params.type;e.setState({filters:{locations:Kee,recipient_contact_id:null,from_date:"",to_date:"",jobs:Kee,virtual_status:"all"===t?"":t}},(function(){e.getFilterPurchaseOrders()}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.match.params.type;t(X$()),this.loadOrCancelPO()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.type;e.match.params.type!==t&&(this.loadOrCancelPO(void 0,!0),this.setState({resetFilterBar:!this.state.resetFilterBar}))}},{key:"getMenuItems",value:function(){var e=this.props.info.data;return[{path:"/finance/purchase-orders/draft",label:"Drafts",icon:Xf.FileEdit,isActive:this.isActive("/finance/purchase-orders/draft"),type:am.draft,value:0},{path:"/finance/purchase-orders/pending_approval",label:"Pending Approval",icon:Xf.PendingApproval,isActive:this.isActive("/finance/purchase-orders/pending_approval"),type:am.pending_approval,value:0},{path:"/finance/purchase-orders/approved",label:"Approved",icon:Xf.FileCheck,isActive:this.isActive("/finance/purchase-orders/approved"),type:im.approved,value:0},{path:"/finance/purchase-orders/all",label:"All Purchase Orders",icon:Xf.File,isActive:this.isActive("/finance/purchase-orders/all"),type:"all",value:0}].map((function(t){return e&&t.type&&e.data[t.type]&&(t.value=vm(e.data[t.type].amount)),t}))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"renderTags",value:function(e){return wm(e,[]).map((function(e){return Object(a.jsx)(Zee,{tag:{name:hm[e],color:Sm(e)}},e)}))}},{key:"renderPurchaseOrdersRows",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsxs)(IF,{to:{pathname:"/finance/purchase-orders/details/".concat(e.id),state:{breadcrumbs:[t.getActiveMenuItem()]}},children:[Object(a.jsxs)(EF,{children:["PO #",e.id]}),Object(a.jsxs)(EF,{children:[Object(a.jsx)("span",{children:e.recipient_name}),t.renderTags(e)]}),Object(a.jsx)(EF,{children:Object(a.jsx)(v8,{job:e.job,locationOnly:!0})}),Object(a.jsx)(EF,{children:Object(a.jsx)(kS.a,{format:iv,children:e.date})}),Object(a.jsx)(EF,{children:vm(e.total_amount)})]},"po-tr-".concat(e.id))})):null}},{key:"renderNoPurchaseOrders",value:function(){return Object(a.jsx)(AF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Purchase Orders..."})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.info.loading,r=t.purchaseOrders.loading,o=t.purchaseOrders,i=this.getRows(),c=i.length>0,s=this.state.searchLoading;return Object(a.jsx)(Cx.Consumer,{children:function(t){var l=t.has(vx.FINANCE_PURCHASE_ORDERS_VIEW);return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/purchase-orders",children:"Purchase Orders"}),Object(a.jsx)(f8,{disableActions:!t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE),onAddAction:e.createPurchaseOrder,onSearch:e.onSearch,loading:n,searchLoading:s,searchPlaceholder:"Search purchase orders...",hint:"Create new purchase order",otherActions:[],children:l&&e.getMenuItems().map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),Object(a.jsx)(Wm,{item:e},"".concat(t,"-").concat(e.type))]})}))}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(r||s)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(JC,{children:[Object(a.jsx)("div",{className:"pb-3",children:Object(a.jsx)(E6,{filters:e.getFilters(),handleChange:e.handleFilter,resetFilter:e.resetFilter,resetFilterBar:e.state.resetFilterBar})}),l&&Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{style:{width:"135px"},children:"Purchase Order"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Job No."}),Object(a.jsx)(CF,{children:"Date"}),Object(a.jsx)(CF,{children:"Total Amount"})]})}),Object(a.jsx)(NF,{children:c?e.renderPurchaseOrdersRows(i):e.renderNoPurchaseOrders()})]}),o.data&&o.data.pagination&&c&&Object(a.jsx)(oC,{pagination:o.data.pagination,onChange:e.handlePagination})]})})]})]})}})}}]),n}(p.PureComponent),$ee=Object(sg.compose)(Object(b.b)((function(e){return{info:e.purchaseOrdersInfo,purchaseOrders:e.purchaseOrders,locations:e.user.locations}})),O.g,oj({jobs:{fetch:zy.searchJobs,initialData:null}}))(Xee),ete=Object(jv.a)({form:"PurchaseOrderDetailsForm",validate:pee,enableReinitialize:!0})(yee);function tte(){var e=Object(f.a)(["\n  position: relative;\n  border-top: 1px solid ",";\n"]);return tte=function(){return e},e}var nte=y.default.div(tte(),_.gray2),rte=function(e,t){var n=pm()(null===e||void 0===e?void 0:e.financial_date);return pm()(t).isBefore(n)?(n.add(1,"day"),n):t},ate=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showApproveModal:!1,showAdjustModal:!1,disableApproveButton:!1,isEditDraftLockedPO:!1,loading:!1},e.showAdjustModal=function(){e.setState({showAdjustModal:!0})},e.hideAdjustModal=function(){e.setState({showAdjustModal:!1})},e.sendAdjustRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:J$.adjustPurchaseOrder(n.id,n.address,n.name).then(Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchPurchaseOrder();case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.notesCounter=function(e){return e.poNotes.data?e.poNotes.data.data.length:0},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.create=function(t){return J$.create(t).then((function(t){e.props.history.push("/finance/purchase-orders/details/".concat(t.data.id))})).catch((function(e){return e.status_code===ox?ix(e):Promise.reject()}))},e.update=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.prev=2,t.next=5,e.props.dispatch(b0(+e.props.match.params.id,n));case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),t.t0.status_code!==ox){t.next=14;break}return t.abrupt("return",ix(t.t0));case 14:return t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createOrUpdate=function(t){return e.isNew?e.create(t):e.update(t)},e.createItem=function(){return e.props.dispatch(m0())},e.updateItem=function(t,n){return e.props.dispatch(j0(t,n,!0))},e.submitItem=function(t){return e.setState({loading:!0}),e.props.dispatch(O0(t)).finally((function(){e.setState({loading:!1})}))},e.removeItem=function(t){return e.props.dispatch(g0(t))},e.approvePurchaseOrder=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match,!e.allowApprove()){t.next=23;break}return t.next=4,r(iw("Confirm","Are you sure you want to approve Purchase Order #".concat(a.params.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=21;break}return e.setState({disableApproveButton:!0}),t.prev=7,t.next=10,J$.approvePurchaseOrder(a.params.id);case 10:return Oj(uj.Success,"Purchase order approved successfully"),t.next=13,e.fetchPurchaseOrder();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Oj(uj.Danger,"Purchase order can't be approved");case 18:return t.prev=18,e.setState({disableApproveButton:!1}),t.finish(18);case 21:t.next=24;break;case 23:e.showApproveModal=!0;case 24:case"end":return t.stop()}}),t,null,[[7,15,18,21]])}))),e.duplicatePO=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=11;break}return t.next=4,a(iw("Confirm","Duplicate purchase order #".concat(r.id,"?")));case 4:if(!t.sent){t.next=11;break}return r.date=rte(r.accounting_organization,r.date),t.next=9,J$.create(r);case 9:o=t.sent,e.props.history.push("/finance/purchase-orders/details/".concat(o.data.id));case 11:case"end":return t.stop()}}),t)}))),e.deletePO=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=9;break}return t.next=4,a(iw("Confirm","Delete purchase order #".concat(r.id,"?")));case 4:if(!t.sent){t.next=9;break}return t.next=8,J$.remove(r.id);case 8:e.props.history.replace("/finance/invoices/draft");case 9:e.props.history.replace("/finance/purchase-orders/draft");case 10:case"end":return t.stop()}}),t)}))),e.print=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.financeEntity.data)){t.next=6;break}return t.next=4,J$.forPrint(n.id);case 4:r=t.sent,MV()({printable:window.URL.createObjectURL(new Blob([r],{type:"application/pdf"})),type:"pdf"});case 6:case"end":return t.stop()}}),t)}))),e.onTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,J$.addTag(n.id,+r.params.id);case 3:return t.next=5,e.fetchCurrentTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.fetchCurrentTags=function(){var t=e.props,n=t.tags,r=t.match;return n.fetch(+r.params.id)},e.onRemoveTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,J$.removeTag(n.id,+r.params.id);case 3:return t.next=5,e.fetchCurrentTags();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.adjustPurchase=function(){e.showAdjustModal()},e.isEditDraftLockedPO=function(){var t=e.props.financeEntity;return!(!e.isDraft()||!t.data.locked)},e.onClickEditDraftLockedPO=function(){e.setState({isEditDraftLockedPO:!0})},e.getDropdownMenuItems=function(t){var n=e.props.financeEntity.data;return[{name:"Edit Purchase Order",onClick:e.onClickEditDraftLockedPO,disabled:!e.isEditDraftLockedPO()},{name:"Print",onClick:e.print},{name:"Duplicate",onClick:e.duplicatePO,disabled:!t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE)||!n},{type:"divider"},{name:"Adjust Purchase Order To...",onClick:e.adjustPurchase,disabled:!e.isDraft()&&!t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE)},{type:"divider"},{name:"Delete",onClick:e.deletePO,disabled:!t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE)}]},e.isNoteEditorVisible=function(){return"true"===bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.financeEntity.data,o=r.match,i=r.poNotes,!a||!a.id){t.next=6;break}return t.next=4,J$.addNoteToPurchaseOrder(n.id,a.id);case 4:i.fetch(o.params.id),e.props.history.replace("/finance/purchase-orders/details/".concat(o.params.id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.redirectToNotes=function(){var t=e.props,n=t.history,r=t.match;n.push("/finance/purchase-orders/details/".concat(r.params.id,"?note=true"))},e.getSortedNotes=function(){var t=e.props.poNotes;return t.data?t.data.data.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})):[]},e.deleteNote=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.poNotes,t.next=3,J$.removeNoteFromPurchaseOrder(n,a.params.id);case 3:o.fetch(a.params.id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.allowApprove=function(){var t=e.props,n=t.user,r=t.financeEntity;return+n.me.purchase_order_approve_limit>=+(r.data.total_amount||0)&&!!r.data.location&&n.locations.map((function(e){return+e.id})).includes(+r.data.location.id)},e.sendApproveRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,J$.sendApproveRequest(r.params.id,[n.user.id]);case 3:return t.next=5,e.fetchPurchaseOrder();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadNotes=function(){var t=e.props,n=t.match;t.poNotes.fetch(n.params.id)},e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e.isDraft=function(){var t=e.props.financeEntity.data;return"draft"===(t.latest_status&&t.latest_status.status)},e.isApproved=function(){var t=e.props.financeEntity.data;return"approved"===(t.latest_status&&t.latest_status.status)},e.editablePurchase=function(){var t=e.props.user,n=t.me&&t.me.role;return!(!e.isDraft()||"administrator"!==n&&"Admin"!==n&&"branch_franchise_manager"!==n&&"cco"!==n&&"cso_am"!==n)||!(!e.isDraft()||"administrator"!==n&&"Admin"!==n)},e.updateItems=function(t){var n=e.props.match.params.id,r=[];if(t.length>0&&t.map((function(e,t){r.push({id:e.id,position:t})})),r.length>0)try{J$.purchaseOrderItemsPositionUpdate(+n,r)}catch(a){Oj(uj.Danger,"Server Error")}return e.props.dispatch(v0(t))},e.getApprovalUser=function(){var t,n,r=e.props,a=r.approvers,o=r.financeEntity.data.total_amount||0;return(null===(t=a.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.filter((function(e){return parseInt(e.purchase_order_approve_limit)>=o})))||[]},e.isPendingApproval=function(){var t=e.props,n=t.user,r=t.financeEntity.data,a=r.latest_status&&r.latest_status.status,o=r.virtual_status,i=r.approve_requests&&r.approve_requests.find((function(e){var t;return e.approver_id===(null===(t=n.me)||void 0===t?void 0:t.id)}));return!(!a||"draft"!==a||"pending_approval"!==o||!i)},e.purchaseOrderDeclined=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.props.financeEntity.data).id){t.next=6;break}return t.next=4,J$.purchaseOrderDeclined(r.id,n);case 4:""===t.sent?(Oj(uj.Success,"Purchase order has been declined"),e.fetchPurchaseOrder()):Oj(uj.Danger,"Server Error");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isShownRequestApprovalButton=function(){var t=e.props.financeEntity.data,n=t.latest_status&&t.latest_status.status,r=t.virtual_status,a=t.approve_requests&&t.approve_requests.find((function(e){return e.approver_id>0}));return!n||"draft"!==n||"pending_approval"!==r||!a},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.isNew||(this.fetchPurchaseOrder(),this.fetchCurrentTags()),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id===e.match.params.id||this.isNew||this.fetchPurchaseOrder(),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:o0})}},{key:"fetchPurchaseOrder",value:function(){var e,t=this.props,n=t.dispatch,r=t.approvers,a=t.match;return this.loadNotes(),r.fetch(a.params.id),n((e=a.params.id,function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n({type:r0,payload:{id:e}}),t.prev=1,!e){t.next=8;break}return t.next=5,J$.findById(e);case 5:r=t.sent,t.next=9;break;case 8:r={data:Object(c.a)({},p0)};case 9:return n({type:a0,payload:r.data}),t.abrupt("return",r.data);case 13:throw t.prev=13,t.t0=t.catch(1),n({type:i0,payload:t.t0}),t.t0;case 17:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){return[{path:"/finance/purchase-orders/draft",icon:Xf.FileEdit,isActive:this.isActive("/finance/purchase-orders/draft"),hint:"Drafts Purchase Orders"},{path:"/finance/purchase-orders/pending_approval",icon:Xf.PendingApproval,isActive:this.isActive("/finance/purchase-orders/pending_approval"),hint:"Pending Approval Purchase Orders"},{path:"/finance/purchase-orders/approved",icon:Xf.FileCheck,isActive:this.isActive("/finance/purchase-orders/approved"),hint:"Approved Purchase Orders"},{path:"/finance/purchase-orders/all",icon:Xf.File,isActive:this.isActive("/finance/purchase-orders/all"),hint:"All Purchase Orders"}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.financeEntity,r=t.poNotes,o=t.user,i=(t.approvers,t.tags),c=this.state,s=c.showApproveModal,l=c.disableApproveButton,u=c.showAdjustModal,d=c.loading;if((!n.ready||n.loading)&&!this.isNew&&!this.alreadyLoaded)return Object(a.jsx)(Nv,{size:40,color:_.white});var p=n.data,h=this.isDraft(),b=!!p.items&&p.items.length>0,f=p.statuses||[],m=!p.total_amount||!!p.total_amount&&p.total_amount<0,j=l||!b||m;return Object(a.jsx)(Cx.Consumer,{children:function(t){var c,l,b,m=e.getDropdownMenuItems(t),v=t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE),O=k0.isEditable(vx.FINANCE_PURCHASE_ORDERS_MANAGE,vx.FINANCE_PURCHASE_ORDERS_MANAGE_LOCKED,p,t,e.state.isEditDraftLockedPO);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/purchase-orders",children:"Purchase Orders"}),null===(c=e.props.location)||void 0===c||null===(l=c.state)||void 0===l||null===(b=l.breadcrumbs)||void 0===b?void 0:b.map((function(e){return e&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label})})),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/purchase-orders/create",children:e.isNew?"Create New":"PO #".concat(e.props.match.params.id)}),s&&Object(a.jsx)(Tee,{isOpen:s,approvers:e.getApprovalUser(),onSubmit:e.sendApproveRequest,onClose:function(){return e.showApproveModal=!1}}),e.isDraft()&&u&&v&&Object(a.jsx)(Dee,{isOpen:u,onSubmit:e.sendAdjustRequest,onClose:e.hideAdjustModal,title:"Edit Purchase Order To",id:p.id,contacts:p.recipient_contact,initialValues:{name:p.recipient_name,address:p.recipient_address}}),Object(a.jsx)(Aee,{sidebarMenuItems:e.getMenuItems(),menu:e.isNew?null:Object(a.jsx)(lee,{type:ree.purchase_order,otherActions:m,onTagClick:e.onTagClick,viewTagsPermission:t.has(vx.TAGS_VIEW),onNoteAdd:e.redirectToNotes,addNotePermission:t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE),channelName:"online-purchase-order-".concat(p.id)}),header:Object(a.jsx)(K6,{id:p.id,tags:i.data.data,isNew:e.isNew,statusList:wm(p),loadingTags:i.loading,onTagRemove:e.onRemoveTagClick,entityName:"purchase order"}),upperToolsContainer:e.isNoteEditorVisible()?Object(a.jsx)(JC,{style:{borderBottom:"1px solid ".concat(_.gray2)},children:Object(a.jsx)(WA,{afterSave:e.saveNoteDraft,disableTemplatesControl:!0,color:_.orange0,onCancel:e.revertBackToNotes})}):null,content:Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(ete,{onSubmit:e.createOrUpdate,onUpdate:e.update,isNew:e.isNew,entityType:Q9.purchaseOrder,disabled:!O,initialValues:e.getInitializeFormValues(),createBtnCaption:"Create Draft Purchase Order"}),!e.isNew&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(see,{entityType:Q9.purchaseOrder,entity:p,disabled:!O,onCreate:e.createItem,onChange:e.updateItem,onSubmit:e.submitItem,onRemove:e.removeItem,handlePositionUpdatedData:e.updateItems}),t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE)&&h&&Object(a.jsxs)("div",{className:"text-right",children:[e.allowApprove()&&Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:j,onClick:e.approvePurchaseOrder,children:"Approve Purchase Order"}),!e.allowApprove()&&e.isShownRequestApprovalButton()&&Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:j,onClick:e.approvePurchaseOrder,children:"Request Approval"}),Object(a.jsx)(zee,{btnCaption:"Decline Purchase Order",title:"Decline Purchase Order? Give Reason!",isPendingApproval:e.isPendingApproval(),submit:e.purchaseOrderDeclined})]})]})]}),footer:e.isNew?null:Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[(e.getSortedNotes().length>0||f.length>0)&&Object(a.jsx)(nte,{children:Object(a.jsx)(jT,{notes:e.getSortedNotes(),onNoteDelete:e.deleteNote,loading:r.loading,highlightedItemId:e.getHighlightedItem().itemId,user:o,statuses:f,afterEditSuccess:e.loadNotes})}),Object(a.jsx)(bT,{status:Object.assign({status:"created"},n.data),itemTypeName:"Purchase order"})]}),references:t.has(vx.JOBS_VIEW)&&!e.isNew?Object(a.jsx)(Pee,{entity:p,loading:n.loading}):Object(a.jsx)(a.Fragment,{})})]})}})}},{key:"showApproveModal",set:function(e){this.setState({showApproveModal:e})}},{key:"alreadyLoaded",get:function(){return this.props.financeEntity.data.id&&+this.props.match.params.id===this.props.financeEntity.data.id}}]),n}(Fee),ote=Object(sg.compose)(O.g,oj({poNotes:{fetch:J$.getPurchaseOrderNotes},approvers:{fetch:J$.getApproverList,initialData:{data:[]}},tags:{fetch:J$.getPurchaseOrderTags,initialData:{data:[]}}}),Object(b.b)((function(e){return{financeEntity:e.purchaseOrder,user:e.user}})))(ate);function ite(){var e=Object(f.a)(["\n  margin-left: 8px;\n  font-size: ",";\n  vertical-align: top;\n"]);return ite=function(){return e},e}var cte=[],ste=Object(y.default)(rN)(ite(),sm.normal),lte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={type:im.draft,search:"",searchLoading:!1,filters:{locations:cte,recipient_contact_id:null,from_date:"",to_date:"",jobs:cte,virtual_status:""},resetFilterBar:!1},e.loadCreditNotes=function(t){(0,e.props.dispatch)(ZZ(t,{per_page:_g.Standard,sortby:"desc"})).then((function(){return e.setState({type:t})}))},e.getActiveMenuItem=function(){var t=e.props.match.params.type;return e.getMenuItems().find((function(e){return e.type===t}))},e.onSearch=function(t){e.setState({search:t}),setTimeout((function(){e.loadOrCancelCN()}))},e.loadOrCancelCN=function(t){var n=e.props.dispatch,r=e.props.match.params.type,a=e.state.search,o=wZ(r);if(a){var i={id:a,virtual_status:o.virtualStatus,status:o.status,per_page:_g.Standard};e.debouncedSearch(i)}else{e.debouncedSearch.cancel();var c={virtual_status:"all"===r?void 0:o.virtualStatus?o.virtualStatus:o.status,per_page:_g.Standard,page:t||1,sortby:"desc"};n(XZ(c))}},e.searcher=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({searchLoading:!0}),t.prev=1,t.next=4,e.props.dispatch($Z(n));case 4:return t.prev=4,e.setState({searchLoading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Object(m.debounce)(e.searcher,1e3),e.getRows=function(){var t=e.props.creditNotes.data;return t&&t.data||[]},e.createCreditNotes=function(){e.props.history.push("/finance/credit-notes/create")},e.searchJobsById=function(t){return t?e.props.jobs.fetch(t):Promise.resolve([])},e.debouncedSearchJobs=Qv()(e.searchJobsById,1e3),e.loadContacts=function(e){var t={term:e,contact_status:["active"]};return hO.searchContacts(t).then((function(e){return e.data}))},e.debouncedLoadContacts=Qv()(e.loadContacts,1e3),e.getFilterCreditNotes=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.filters,n.type,a=e.props.dispatch,t.next=4,a(XZ(Object(c.a)(Object(c.a)({page:1,per_page:20},r),{},{sortby:"desc"})));case 4:case"end":return t.stop()}}),t)}))),e.getFilters=function(){var t=e.props,n=t.match.params.type,r=t.locations,a=[{value:im.draft,label:im.draft},{value:am.pending_approval,label:hm[am.pending_approval]},{value:im.approved,label:im.approved}];return[{label:"Location",filterKey:"location",options:r,placeholder:"Type to search",getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id}},{label:"Contact",filterKey:"to",loadOptions:e.debouncedLoadContacts,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return hO.getContactName(e)},placeholder:"Type to search"},{label:"From",type:"date",filterKey:"dateFrom"},{label:"To",type:"date",filterKey:"dateTo"},{label:"Job Number",filterKey:"jobNumber",loadOptions:e.debouncedSearchJobs,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return zy.getJobName(e)},placeholder:"Type to search"},"all"===n&&{label:"Status",filterKey:"status",options:a,getOptionValue:function(e){return null===e||void 0===e?void 0:e.value},getOptionLabel:function(e){return null===e||void 0===e?void 0:e.label},placeholder:"Select..."}].filter(Boolean)},e.handleFilter=function(t,n){var r=e.state.filters,a=e.props.match.params.type;switch(t){case"status":r.virtual_status=null===n||void 0===n?void 0:n.value;break;case"location":r.locations=[null===n||void 0===n?void 0:n.id]||!1;break;case"to":r.recipient_contact_id=null===n||void 0===n?void 0:n.id;break;case"dateFrom":if(""!==n.currentTarget.value){var o=pm.a.utc(n.currentTarget.value).format(ov);r.from_date=o}else r.from_date="";break;case"dateTo":if(""!==n.currentTarget.value){var i=pm.a.utc(n.currentTarget.value).format(ov);r.to_date=i}else r.to_date="";break;case"jobNumber":r.jobs=[null===n||void 0===n?void 0:n.id]}r.virtual_status="all"===a?r.virtual_status:a,e.setState({filters:Object(c.a)({},r)},(function(){e.getFilterCreditNotes()}))},e.resetFilter=function(){var t=e.props.match.params.type;e.setState({filters:{locations:cte,recipient_contact_id:null,from_date:"",to_date:"",jobs:cte,virtual_status:"all"===t?"":t}},(function(){e.getFilterCreditNotes()}))},e.handlePagination=function(t){e.loadOrCancelCN(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch;e.match.params.type;t(function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:HX}),e.prev=1,e.next=4,WZ.getInfo();case 4:n=e.sent,t({type:YX,payload:n}),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(1),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),this.loadOrCancelCN()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params.type;e.match.params.type!==t&&(this.setState({type:t,resetFilterBar:!this.state.resetFilterBar}),this.loadOrCancelCN())}},{key:"getMenuItems",value:function(){var e=this.props.info.data;return[{path:"/finance/credit-notes/draft",label:"Drafts",icon:Xf.FileEdit,isActive:this.isActive("/finance/credit-notes/draft"),type:im.draft,value:0},{path:"/finance/credit-notes/pending_approval",label:"Pending Approval",icon:Xf.PendingApproval,isActive:this.isActive("/finance/credit-notes/pending_approval"),type:am.pending_approval,value:0},{path:"/finance/credit-notes/approved",label:"Approved",icon:Xf.FileCheck,isActive:this.isActive("/finance/credit-notes/approved"),type:im.approved,value:0},{path:"/finance/credit-notes/all",label:"All Credit Notes",icon:Xf.File,isActive:this.isActive("/finance/credit-notes/all"),type:"all",value:0}].map((function(t){return e&&t.type&&e.data[t.type]&&(t.value=vm(e.data[t.type].amount)),t}))}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"renderTags",value:function(e){return wm(e,[]).map((function(e){return Object(a.jsx)(ste,{tag:{name:hm[e],color:Sm(e)}},e)}))}},{key:"renderCreditNotesRows",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsxs)(IF,{to:{pathname:"/finance/credit-notes/details/".concat(e.id),state:{breadcrumbs:[t.getActiveMenuItem()]}},children:[Object(a.jsxs)(EF,{children:["CN #",e.id]}),Object(a.jsxs)(EF,{children:[Object(a.jsx)("span",{children:e.recipient_name}),t.renderTags(e)]}),Object(a.jsx)(EF,{children:Object(a.jsx)(v8,{job:e.job,locationOnly:!0})}),Object(a.jsx)(EF,{children:Object(a.jsx)(kS.a,{format:iv,children:e.date})}),Object(a.jsx)(EF,{children:vm(e.total_amount)})]},"cn-tr-".concat(e.id))})):null}},{key:"renderNoCreditNotes",value:function(){return Object(a.jsx)(AF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Credit Notes..."})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.creditNotes.loading,r=t.creditNotes,o=t.info.loading,i=this.getRows(),c=i.length>0,s=this.state.searchLoading;return Object(a.jsx)(Cx.Consumer,{children:function(t){var l=t.has(vx.FINANCE_PURCHASE_ORDERS_VIEW),u=t.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE);return Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/credit-notes",children:"Credit Notes"}),Object(a.jsx)(f8,{disableActions:!u,onAddAction:e.createCreditNotes,onSearch:e.onSearch,searchLoading:s,loading:o,searchPlaceholder:"Search credit notes...",hint:"Create new credit note",otherActions:[],children:l&&e.getMenuItems().map((function(e,t){return Object(a.jsxs)(a.Fragment,{children:[e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),Object(a.jsx)(Wm,{item:e},"".concat(t,"-").concat(e.type))]})}))}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(n||s)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsxs)(JC,{children:[Object(a.jsx)("div",{className:"pb-3",children:Object(a.jsx)(E6,{filters:e.getFilters(),handleChange:e.handleFilter,resetFilter:e.resetFilter,resetFilterBar:e.state.resetFilterBar})}),l&&Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Credit Note"}),Object(a.jsx)(CF,{}),Object(a.jsx)(CF,{children:"Job No."}),Object(a.jsx)(CF,{children:"Date"}),Object(a.jsx)(CF,{children:"Total Amount"})]})}),Object(a.jsx)(NF,{children:c?e.renderCreditNotesRows(i):e.renderNoCreditNotes()})]}),r.data&&r.data.pagination&&Object(a.jsx)(oC,{pagination:r.data.pagination,onChange:e.handlePagination})]})})]})]})}})}}]),n}(p.PureComponent),ute=Object(sg.compose)(Object(b.b)((function(e){return{info:e.creditNotesInfo,creditNotes:e.creditNotes,locations:e.user.locations}})),O.g,oj({jobs:{fetch:zy.searchJobs,initialData:null}}))(lte),dte=Object(jv.a)({form:"CreditNotesDetailsForm",validate:pee,enableReinitialize:!0})(yee),pte=Object(b.b)((function(e){return{formData:Object(GM.a)("CreditNotesDetailsForm")(e)}}))(dte),hte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1},e.showModal=function(){e.setState({showModal:!0})},e.closeModal=function(){e.setState({showModal:!1})},e.onPay=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.creditNote,o=r.loadCreditNote,t.next=3,WZ.applyCreditNoteToInvoices(a.id,n.filter((function(e){return e.amount>0})).map((function(e){return{invoice_id:e.id,amount:e.amount}})));case 3:o();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.creditNote,t=this.state.showModal;return Object(a.jsxs)(a.Fragment,{children:[e.total_amount>0&&t&&Object(a.jsx)(Bee,{isOpen:t,onClose:this.closeModal,financeEntity:e,onPay:this.onPay,mode:Cee.FromCreditNote}),Object(a.jsx)(CT,{caption:"Credit Note",collapsable:!1,children:Object(a.jsx)(dC,{noDecoration:!0,onClick:this.showModal,children:"Apply to Invoice"})})]})}}]),n}(p.PureComponent);function bte(){var e=Object(f.a)(["\n  position: relative;\n  border-top: 1px solid ",";\n"]);return bte=function(){return e},e}var fte=y.default.div(bte(),_.gray2),mte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showApproveModal:!1,showAdjustModal:!1,disableApproveButton:!1,isEditDraftLockedCN:!1,loading:!1},e.showApproveModal=function(){e.setState({showApproveModal:!0})},e.hideApproveModal=function(){e.setState({showApproveModal:!1})},e.sendAdjustRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:WZ.adjustCreditNote(n.id,n.address,n.name).then(Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.fetchCreditNote();case 2:case"end":return t.stop()}}),t)}))));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showAdjustModal=function(){e.setState({showAdjustModal:!0})},e.hideAdjustModal=function(){e.setState({showAdjustModal:!1})},e.notesCounter=function(e){return e.creditNoteNotes.data?e.creditNoteNotes.data.data.length:0},e.getHighlightedItemSelector=function(){var t,n=e.getHighlightedItem();return n.note&&(t="note-".concat(n.note)),t},e.fetchCreditNote=function(){var t=e.props,n=t.dispatch,r=t.approvers,a=t.tags,o=t.match.params.id;return e.loadNotes(),r.fetch(o),a.fetch(o),n(l$(e.props.match.params.id))},e.create=function(t){return WZ.create(t).then((function(t){e.props.history.push("/finance/credit-notes/details/".concat(t.data.id))})).catch((function(e){return e.status_code===ox?ix(e):Promise.reject()}))},e.update=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.isNew){t.next=2;break}return t.abrupt("return",Promise.resolve());case 2:return t.prev=2,t.next=5,e.props.dispatch(u$(+e.props.match.params.id,n));case 5:return t.abrupt("return",t.sent);case 8:if(t.prev=8,t.t0=t.catch(2),t.t0.status_code!==ox){t.next=14;break}return t.abrupt("return",ix(t.t0));case 14:return t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t,null,[[2,8]])})));return function(e){return t.apply(this,arguments)}}(),e.createOrUpdate=function(t){return e.isNew?e.create(t):e.update(t)},e.createItem=function(){return e.props.dispatch(p$())},e.updateItem=function(t,n){return e.props.dispatch(h$(t,n,!0))},e.submitItem=function(t){return e.setState({loading:!0}),e.props.dispatch(f$(t)).finally((function(){e.setState({loading:!1})}))},e.removeItem=function(t){return e.props.dispatch(m$(t))},e.duplicateCN=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=11;break}return t.next=4,a(iw("Confirm","Duplicate credit note #".concat(r.id,"?")));case 4:if(!t.sent){t.next=11;break}return r.date=rte(r.accounting_organization,r.date),t.next=9,WZ.create(r);case 9:o=t.sent,e.props.history.push("/finance/credit-notes/details/".concat(o.data.id));case 11:case"end":return t.stop()}}),t)}))),e.deleteCN=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.financeEntity.data,a=n.dispatch,!r){t.next=9;break}return t.next=4,a(iw("Confirm","Delete credit note #".concat(r.id,"?")));case 4:if(!t.sent){t.next=9;break}return t.next=8,WZ.remove(r.id);case 8:e.props.history.replace("/finance/credit-notes/draft");case 9:case"end":return t.stop()}}),t)}))),e.print=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.financeEntity.data)){t.next=6;break}return t.next=4,WZ.forPrint(n.id);case 4:r=t.sent,MV()({printable:window.URL.createObjectURL(new Blob([r],{type:"application/pdf"})),type:"pdf"});case 6:case"end":return t.stop()}}),t)}))),e.onTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,WZ.addTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onRemoveTagClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.tags,o=r.match,t.next=3,WZ.removeTag(n.id,+o.params.id);case 3:return t.next=5,a.fetch(+o.params.id);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isEditDraftLockedCN=function(){var t=e.props.financeEntity;return!(!e.isDraft()||!t.data.locked)},e.onClickEditDraftLockedCN=function(){e.setState({isEditDraftLockedCN:!0})},e.getDropdownMenuItems=function(t){var n=e.props.financeEntity.data;return[{name:"Edit Credit Note",onClick:e.onClickEditDraftLockedCN,disabled:!e.isEditDraftLockedCN()},{name:"Print",onClick:e.print,disabled:!t.has(vx.FINANCE_CREDIT_NOTES_VIEW)},{name:"Duplicate",onClick:e.duplicateCN,disabled:!t.has(vx.FINANCE_CREDIT_NOTES_MANAGE)||!n},{type:"divider"},{name:"Adjust Credit Note To...",onClick:e.adjustCreditNote,disabled:!e.isDraft()&&!t.has(vx.FINANCE_CREDIT_NOTES_MANAGE)},{type:"divider"},{name:"Delete",onClick:e.deleteCN,disabled:!t.has(vx.FINANCE_CREDIT_NOTES_MANAGE)}]},e.isNoteEditorVisible=function(){return"true"===bj.parse(e.props.location.search,{ignoreQueryPrefix:!0}).note},e.redirectToNotes=function(){var t=e.props,n=t.history,r=t.match;n.push("/finance/credit-notes/details/".concat(r.params.id,"?note=true"))},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.financeEntity.data,o=r.match,i=r.creditNoteNotes,!a||!a.id){t.next=6;break}return t.next=4,WZ.addNoteToCreditNote(n.id,a.id);case 4:i.fetch(o.params.id),e.props.history.replace("/finance/credit-notes/details/".concat(o.params.id));case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getSortedNotes=function(){var t=e.props.creditNoteNotes;return t.data?t.data.data.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})):[]},e.deleteNote=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.match,o=r.creditNoteNotes,t.next=3,WZ.removeNoteFromCreditNote(n,a.params.id);case 3:o.fetch(a.params.id);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendApproveRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,WZ.sendApproveRequest(r.params.id,[n.user.id]);case 3:return t.next=5,e.fetchCreditNote();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.allowApprove=function(){var t=e.props,n=t.user,r=t.financeEntity;return(+n.me.credit_note_approval_limit||0)>=+(r.data.total_amount||0)&&!!r.data.location&&n.locations.map((function(e){return+e.id})).includes(+r.data.location.id)},e.isDraft=function(){var t=e.props.financeEntity.data;return"draft"===(t.latest_status&&t.latest_status.status)},e.isApproved=function(){var t=e.props.financeEntity.data;return"approved"===(t.latest_status&&t.latest_status.status)},e.adjustCreditNote=function(){e.showAdjustModal()},e.editableCreditNote=function(){var t=e.props.user,n=t.me&&t.me.role;return!(!e.isDraft()||"administrator"!==n&&"Admin"!==n&&"branch_franchise_manager"!==n&&"cco"!==n&&"cso_am"!==n)||!(!e.isDraft()||"administrator"!==n&&"Admin"!==n)},e.approveCreditNote=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match,!e.allowApprove()){t.next=23;break}return t.next=4,r(iw("Confirm","Are you sure you want to approve Credit Note #".concat(a.params.id,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=21;break}return e.setState({disableApproveButton:!0}),t.prev=7,t.next=10,WZ.approveCreditNote(a.params.id);case 10:return Oj(uj.Success,"Credit note approved successfully"),t.next=13,e.fetchCreditNote();case 13:t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),Oj(uj.Danger,"Credit note can't be approved");case 18:return t.prev=18,e.setState({disableApproveButton:!1}),t.finish(18);case 21:t.next=24;break;case 23:e.showApproveModal();case 24:case"end":return t.stop()}}),t,null,[[7,15,18,21]])}))),e.revertBackToNotes=function(){e.props.history.push(e.props.location.pathname)},e.loadNotes=function(){var t=e.props,n=t.match;t.creditNoteNotes.fetch(n.params.id)},e.renderApplyToInvoice=function(t){var n=e.props.financeEntity;return n.data.latest_status.status===im.approved&&!n.data.payment_id&&t.has(vx.FINANCE_CREDIT_NOTES_MANAGE)?Object(a.jsx)(hte,{creditNote:n.data,loadCreditNote:e.fetchCreditNote}):void 0},e.updateItems=function(t){var n=e.props.match.params.id,r=[];if(t.length>0&&t.map((function(e,t){r.push({id:e.id,position:t})})),r.length>0)try{WZ.creditNoteItemsPositionUpdate(+n,r)}catch(a){Oj(uj.Danger,"Server Error")}return e.props.dispatch(b$(t))},e.getApprovalUser=function(){var t,n,r=e.props,a=r.approvers,o=r.financeEntity.data.total_amount||0;return(null===(t=a.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.filter((function(e){return parseInt(e.credit_note_approval_limit)>=o})))||[]},e.isPendingApproval=function(){var t=e.props,n=t.user,r=t.financeEntity.data,a=r.latest_status&&r.latest_status.status,o=r.virtual_status,i=r.approve_requests&&r.approve_requests.find((function(e){var t;return e.approver_id===(null===(t=n.me)||void 0===t?void 0:t.id)}));return!(!a||"draft"!==a||"pending_approval"!==o||!i)},e.creditNoteDeclined=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(r=e.props.financeEntity.data).id){t.next=6;break}return t.next=4,WZ.creditNoteDeclined(r.id,n);case 4:""===t.sent?(Oj(uj.Success,"Credit note has been declined"),e.fetchCreditNote()):Oj(uj.Danger,"Server Error");case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.isShownRequestApprovalButton=function(){var t=e.props.financeEntity.data,n=t.latest_status&&t.latest_status.status,r=t.virtual_status,a=t.approve_requests&&t.approve_requests.find((function(e){return e.approver_id>0}));return!n||"draft"!==n||"pending_approval"!==r||!a},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.isNew||this.fetchCreditNote(),this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id===e.match.params.id||this.isNew||this.fetchCreditNote(),this.notesCounter(this.props)!==this.notesCounter(e)&&this.scrollToHighlightedItem(this.getHighlightedItemSelector())}},{key:"componentWillUnmount",value:function(){this.props.dispatch({type:e$})}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){return[{path:"/finance/credit-notes/draft",icon:Xf.FileEdit,isActive:this.isActive("/finance/credit-notes/draft"),hint:"Draft Credit Notes"},{path:"/finance/credit-notes/pending_approval",icon:Xf.PendingApproval,isActive:this.isActive("/finance/credit-notes/pending_approval"),hint:"Pending Approval Credit Notes"},{path:"/finance/credit-notes/approved",icon:Xf.FileCheck,isActive:this.isActive("/finance/credit-notes/approved"),hint:"Approved Credit Notes"},{path:"/finance/credit-notes/all",icon:Xf.File,isActive:this.isActive("/finance/credit-notes/all"),hint:"All Credit Notes"}]}},{key:"render",value:function(){var e=this,t=this.props,n=t.financeEntity,r=t.user,o=t.creditNoteNotes,i=t.tags,c=(t.approvers,this.state),s=c.showApproveModal,l=c.disableApproveButton,u=c.showAdjustModal,d=c.loading;if((!n.ready||n.loading)&&!this.isNew&&!this.alreadyLoaded)return Object(a.jsx)(Nv,{size:40,color:_.white});var p=n.data,h=p.statuses||[],b=this.isDraft(),f=!!p.items&&p.items.length>0,m=!p.total_amount||!!p.total_amount&&p.total_amount<0,j=l||!f||m;return Object(a.jsx)(Cx.Consumer,{children:function(t){var c,l,f,m=e.getDropdownMenuItems(t),v=k0.isEditable(vx.FINANCE_CREDIT_NOTES_MANAGE,vx.FINANCE_CREDIT_NOTES_MANAGE_LOCKED,p,t,e.state.isEditDraftLockedCN);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/credit-notes",children:"Credit Notes"}),null===(c=e.props.location)||void 0===c||null===(l=c.state)||void 0===l||null===(f=l.breadcrumbs)||void 0===f?void 0:f.map((function(e){return e&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label})})),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/credit-notes/create",children:e.isNew?"Create New":"CN #".concat(e.props.match.params.id)}),s&&Object(a.jsx)(Tee,{isOpen:s,approvers:e.getApprovalUser(),onSubmit:e.sendApproveRequest,onClose:e.hideApproveModal}),e.editableCreditNote()&&u&&Object(a.jsx)(Dee,{isOpen:u,onSubmit:e.sendAdjustRequest,onClose:e.hideAdjustModal,title:"Edit Credit Note To",id:p.id,contacts:p.recipient_contact,initialValues:{name:p.recipient_name,address:p.recipient_address}}),Object(a.jsx)(Aee,{sidebarMenuItems:e.getMenuItems(),menu:e.isNew?null:Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(lee,{type:ree.credit_note,otherActions:m,onTagClick:e.onTagClick,viewTagsPermission:t.has(vx.TAGS_VIEW),onNoteAdd:e.redirectToNotes,addNotePermission:t.has(vx.FINANCE_CREDIT_NOTES_MANAGE),channelName:"online-credit-note-".concat(p.id)})}),header:Object(a.jsx)(K6,{id:p.id,tags:i.data.data,isNew:e.isNew,statusList:wm(p),loadingTags:i.loading,onTagRemove:e.onRemoveTagClick,entityName:"credit note"}),upperToolsContainer:e.isNoteEditorVisible()?Object(a.jsx)(JC,{style:{borderBottom:"1px solid ".concat(_.gray2)},children:Object(a.jsx)(WA,{afterSave:e.saveNoteDraft,disableTemplatesControl:!0,color:_.orange0,onCancel:e.revertBackToNotes})}):null,content:Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(pte,{onSubmit:e.createOrUpdate,onUpdate:e.update,entityType:Q9.creditNote,isNew:e.isNew,disabled:!v,initialValues:e.getInitializeFormValues(),createBtnCaption:"Create Draft Credit Note"}),!e.isNew&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(see,{entityType:Q9.creditNote,entity:p,disabled:!v,onCreate:e.createItem,onChange:e.updateItem,onSubmit:e.submitItem,onRemove:e.removeItem,handlePositionUpdatedData:e.updateItems}),t.has(vx.FINANCE_CREDIT_NOTES_MANAGE)&&b&&Object(a.jsxs)("div",{className:"text-right",children:[e.allowApprove()&&Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:j,onClick:e.approveCreditNote,children:"Approve Credit Note"}),!e.allowApprove()&&e.isShownRequestApprovalButton()&&Object(a.jsx)(Xg,{type:"button",className:"btn",disabled:j,onClick:e.approveCreditNote,children:"Request Approval"}),Object(a.jsx)(zee,{btnCaption:"Decline Credit Note",title:"Decline Credit Note? Give Reason!",isPendingApproval:e.isPendingApproval(),submit:e.creditNoteDeclined})]})]})]}),footer:e.isNew?null:Object(a.jsxs)("div",{style:{marginTop:"60px"},children:[(e.getSortedNotes().length>0||h.length>0)&&Object(a.jsx)(fte,{children:Object(a.jsx)(jT,{notes:e.getSortedNotes(),onNoteDelete:e.deleteNote,loading:o.loading,highlightedItemId:e.getHighlightedItem().itemId,user:r,statuses:h,afterEditSuccess:e.loadNotes})}),Object(a.jsx)(bT,{status:Object.assign({status:"created"},n.data),itemTypeName:"Credit note"})]}),references:t.has(vx.JOBS_VIEW)&&!e.isNew?Object(a.jsx)(Pee,{entity:p,loading:n.loading,additionalItems:e.renderApplyToInvoice(t)}):Object(a.jsx)(a.Fragment,{})})]})}})}},{key:"alreadyLoaded",get:function(){return this.props.financeEntity.data.id&&+this.props.match.params.id===this.props.financeEntity.data.id}}]),n}(Fee),jte=Object(sg.compose)(O.g,oj({creditNoteNotes:{fetch:WZ.getCreditNoteNotes},approvers:{fetch:WZ.getApproverList,initialData:{data:[]}},tags:{fetch:WZ.getCreditNoteTags,initialData:{data:[]}}}),Object(b.b)((function(e){return{financeEntity:e.creditNote,user:e.user}})))(mte),vte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(a.jsx)(Hv.a,{name:"term",label:"Lookup Invoices",type:"textarea",placeholder:"Enter or paste all invoice numbers here...",component:gq,className:"form__dark"}),Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",children:"Lookup"})]})}}]),n}(p.PureComponent),Ote=Object(jv.a)({form:"LookupInvoiceForm",enableReinitialize:!0})(vte);function gte(){var e=Object(f.a)(["\n  background: ",";\n  border-radius: 4px;\n  border: 1px solid ",";\n  max-height: 33.5;\n  padding: 5px 10px;\n\n  &:focus {\n    box-shadow: 0 0 1px ",";\n    border-color: ",";\n    outline: none;\n  }\n\n  &:disabled {\n    background: ",";\n  }\n\n  &::placeholder {\n    font-weight: lighter;\n    color: ",";\n  }\n"]);return gte=function(){return e},e}var xte=y.default.input(gte(),_.white,_.gray2,_.gray4,_.blue2,_.gray1,_.gray4),yte=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={focused:!1,value:""},e.onFocus=function(){e.setState({focused:!0})},e.onBlur=function(t){e.setState({focused:!1}),e.props.onBlur(t)},e.onChange=function(t){if(e.state.focused){var n=t.target.value;/^\$*\s*[0-9\,]*\.*[0-9]{0,2}$/.test(n)&&e.setState({value:n})}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({value:this.props.value})}},{key:"render",value:function(){return Object(a.jsx)(xte,{type:"text",value:this.state.focused?this.state.value:this.props.value,onChange:this.onChange,onFocus:this.onFocus,onBlur:this.onBlur,placeholder:"$ 0.00",dir:"RTL"})}}]),n}(p.PureComponent);function _te(){var e=Object(f.a)(["\n  @media print {\n    display: none;\n  }\n"]);return _te=function(){return e},e}var wte=y.default.div(_te());function Ste(){var e=Object(f.a)(["\n  line-height: 45px;\n  padding: 0 15px;\n"]);return Ste=function(){return e},e}function kte(){var e=Object(f.a)(["\n  line-height: 50px;\n  color: ",";\n  text-align: left;\n  width: 100%;\n"]);return kte=function(){return e},e}function Cte(){var e=Object(f.a)(["\n  display: flex;\n  flex-basis: 100%;\n  flex-direction: row-reverse;\n  padding: 15px 0 15px 15px;\n"]);return Cte=function(){return e},e}function Nte(){var e=Object(f.a)(["\n  padding: 3px 30px 0;\n  height: 50px;\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return Nte=function(){return e},e}function Ete(){var e=Object(f.a)(["\n  max-width: 800px;\n  padding: 0 40px;\n\n  .form-group {\n    margin-bottom: 2rem;\n  }\n\n  input {\n    background: ",";\n    border: 1px solid ",";\n\n    &:disabled {\n      background: ",";\n    }\n  }\n"]);return Ete=function(){return e},e}function Ate(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  td {\n    vertical-align: top;\n    padding-top: 12px;\n    padding-bottom: 10px;\n  }\n"]);return Ate=function(){return e},e}function Ite(){var e=Object(f.a)(["\n  div {\n    &:first-child {\n      font-weight: ",";\n    }\n  }\n"]);return Ite=function(){return e},e}function Tte(){var e=Object(f.a)(["\n  div {\n    &:last-child {\n      color: ",";\n    }\n  }\n"]);return Tte=function(){return e},e}var Rte=y.default.div(Tte(),_.gray5),Dte=Object(y.default)(Rte)(Ite(),lm.bold),Mte=Object(y.default)(tU)(Ate(),lm.normal),Lte=y.default.form(Ete(),_.white,_.gray2,_.gray1),Pte=y.default.div(Nte(),_.white,_.gray2),Fte=mC.ColoredRow,Ute=y.default.div(Cte()),Bte=y.default.div(kte(),_.white),Vte=Object(y.default)(wte)(Ste());function Jte(){var e=Object(f.a)(["\n  display: inline-block;\n  position: relative;\n  line-height: 20px;\n  margin-left: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Jte=function(){return e},e}function qte(){var e=Object(f.a)(["\n  top: -5px;\n  border: 5px solid transparent;\n  border-top: 5px solid ",";\n"]);return qte=function(){return e},e}function zte(){var e=Object(f.a)(["\n  top: -10px;\n  border: 5px solid transparent;\n  border-bottom: 5px solid ",";\n"]);return zte=function(){return e},e}function Gte(){var e=Object(f.a)(["\n  position: absolute;\n  width: 0;\n  height: 0;\n"]);return Gte=function(){return e},e}function Wte(){var e=Object(f.a)(["\n  label {\n    font-size: ",";\n    color: ",";\n    text-transform: capitalize;\n    line-height: 1.5;\n  }\n  max-width: 230px;\n  min-height: 80px;\n  min-width: 180px;\n  font-size: ",";\n  line-height: 1;\n  color: ",";\n  margin: 5px 60px 5px 0;\n  padding: 5px 0 20px 0;\n  border-bottom: ",";\n"]);return Wte=function(){return e},e}var Hte="1px solid ".concat(_.gray2),Yte=y.default.div(Wte(),sm.normal,_.gray5,sm.big,_.black0,(function(e){return e.hasDelimiter?Hte:"none"})),Qte=y.default.div(Gte()),Kte=Object(y.default)(Qte)(zte(),_.green2),Zte=Object(y.default)(Qte)(qte(),_.red1),Xte=y.default.div(Jte(),_.gray4,sm.smaller),$te=function(e){return Object(a.jsxs)(Yte,{hasDelimiter:e.hasDelimiter,children:[Object(a.jsx)("label",Object(c.a)(Object(c.a)({},e.reactTipProps),{},{children:e.label||""})),Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{style:{color:e.color||"inherit"},children:e.value}),!!e.delta&&Object(a.jsxs)(Xte,{children:[e.delta>0&&Object(a.jsx)(Kte,{}),e.delta<0&&Object(a.jsx)(Zte,{}),e.delta," %"]})]})]})},ene=p.memo($te);function tne(){var e=Object(f.a)(["\n  padding-top: 30px;\n"]);return tne=function(){return e},e}var nne=y.default.div(tne()),rne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={amount:0},e.onChangeAmount=function(t){e.setState({amount:+t.target.value})},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.onSubmit(n);case 2:e.setState({amount:0}),e.props.reset();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.glAccounts,r=e.totalSelected,o=e.loading,i=e.submitting,c=e.disabled,s=r-this.state.amount;return Object(a.jsx)(Lte,{onSubmit:this.props.handleSubmit(this.onSubmit),children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(Hv.a,{name:"paid_at",label:"Date Received",placeholder:"Date",component:s_,futureEnabled:!0,validate:Dv,disabled:c}),Object(a.jsx)(Hv.a,{name:"amount",label:"Amount Received",type:"number",component:yg,validate:Dv,disabled:c,currency:!0,onChange:this.onChangeAmount}),Object(a.jsx)(Hv.a,{name:"dst_gl_account",label:"Paid into Account",placeholder:"Select account...",component:xO,options:t,validate:Dv,disabled:c,getOptionLabel:k0.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},selectStyles:n.formSelectStyles}),Object(a.jsx)(Hv.a,{name:"reference",label:"Remittence Reference",placeholder:"None",component:yg,disabled:c,validate:Dv})]}),Object(a.jsxs)(nne,{className:"col-5 offset-1",children:[(o||i)&&Object(a.jsx)(Nv,{size:40,color:_.white1}),Object(a.jsx)(ene,{label:"Amount Received",value:vm(this.state.amount),hasDelimiter:!0}),Object(a.jsx)(ene,{label:"Total Selected",value:vm(r),hasDelimiter:!0}),Object(a.jsx)(ene,{label:"Difference",value:vm(s),color:s<0?_.red1:void 0}),Object(a.jsx)("div",{className:"pt-2",children:Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",disabled:!!c||i||Math.abs(s)>Number.MIN_VALUE,children:"Process Payment"})})]})]})})}}]),n}(p.PureComponent);rne.formSelectStyles=Object(c.a)(Object(c.a)({},mO),{},{control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{borderColor:_.gray2,background:t.isDisabled?_.gray1:_.white,boxShadow:t.isFocused?"0 0 1px ".concat(_.gray4):"none"})}});var ane=Object(jv.a)({form:"ReceivePaymentsForm"})(rne);function one(){var e=Object(f.a)(["\n  div {\n    &:first-child {\n      font-weight: ",";\n    }\n  }\n  width: 8%;\n  float: left;\n"]);return one=function(){return e},e}function ine(){var e=Object(f.a)(["\n  font-size: ",";\n  font-weight: ",";\n  text-transform: uppercase;\n  margin: 45px 0 15px;\n"]);return ine=function(){return e},e}function cne(){var e=Object(f.a)(["\n  background: ",";\n  .form-group.form__dark {\n    width: 400px;\n    textarea,\n    input {\n      background: ",";\n      border: 1px solid ",";\n    }\n    textarea {\n      min-height: 90px;\n    }\n  }\n  button[type='submit'] {\n    margin-top: 5px;\n  }\n"]);return cne=function(){return e},e}var sne,lne=Object(y.default)(mC.ColoredRow)(cne(),_.gray0,_.white,_.gray2),une=mC.ColoredRow,dne=y.default.h2(ine(),sm.normal,lm.bold),pne=y.default.div(one(),lm.bold),hne=/(?:,|`|\n|[|]| )+/,bne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={lookupTerm:void 0},e.getPaymentInvoices=function(t){var n=t.term;e.setState({lookupTerm:n}),e.props.dispatch(C1(e.lookupTermRefactorSearch(n)))},e.debouncedSearch=Qv()(e.getPaymentInvoices),e.toggleSelection=function(t){e.props.dispatch(w1(t))},e.setPaymentType=function(t,n){e.props.dispatch(S1(t,n))},e.setAmount=function(t,n){e.props.dispatch(k1(t,+n.target.value.replace(/[^\d\.]/g,"")))},e.invoiceIsSelected=function(t){var n=e.props.receivePayments;return!!n.data.selectedIds&&n.data.selectedIds.includes(t)},e.receivePayment=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=Object(c.a)(Object(c.a)({},n),{},{location_id:null===(r=e.primaryLocation)||void 0===r?void 0:r.id}),o=e.selectedInvoices.map((function(e){return{invoice_id:+e.id,is_fp:e.payment_type===G0.FP,amount:e.payment_amount||0}})),t.next=4,W0.receivePayment(a,o);case 4:return""===(i=t.sent)&&(e.setState({lookupTerm:""}),e.props.dispatch(N1())),t.abrupt("return",i);case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.lookupTermRefactorSearch=function(e){var t=(null===e||void 0===e?void 0:e.split(hne))||[];return(t=t.map((function(e){return e.replace(/[^0-9]/g,"")}))).filter((function(e){return!!e}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.userPrimaryLocationGLAccounts()}},{key:"componentDidUpdate",value:function(e){!e.locations.length&&this.props.locations.length&&this.userPrimaryLocationGLAccounts()}},{key:"userPrimaryLocationGLAccounts",value:function(){var e=this.props,t=e.locations,n=e.dispatch;n(N1());var r=t.find((function(e){return!0===e.primary}));r&&n(L0([r.id]))}},{key:"refreshLookup",value:function(){this.getPaymentInvoices({term:this.state.lookupTerm})}},{key:"renderInvoicesTable",value:function(){var e=this;return Object(a.jsxs)(a.Fragment,{children:[this.invoicesData.length>0&&Object(a.jsx)(dne,{children:"Invoices found"}),Object(a.jsx)(Mte,{className:"table",children:Object(a.jsxs)("tbody",{children:[this.renderInvoiceNoRecordFoundRow(),this.invoicesData.length>0&&this.invoicesData.map((function(t){return e.renderInvoiceRow(t)}))]})})]})}},{key:"renderInvoiceNoRecordFoundRow",value:function(){var e=this.searchInvoiceNotFound(),t=e&&(null===e||void 0===e?void 0:e.map((function(e){return Object(a.jsxs)(pne,{children:[Object(a.jsxs)("div",{children:["Inv. ",e]}),Object(a.jsx)(rN,{tag:{name:"Not Found",color:_.gray4}})]})})));return t&&t.length>0?Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:6,children:t})},"rp-row-not-found-1"):Object(a.jsx)(a.Fragment,{})}},{key:"searchInvoiceNotFound",value:function(){var e=this,t=this.lookupTermRefactorSearch(this.state.lookupTerm),n=[];return null===t||void 0===t||t.filter((function(t){""===t||e.invoicesData.find((function(e){return e.id.toString()===t}))||n.push(t)})),n}},{key:"renderInvoiceRow",value:function(e){var t,n,r,o=this,i=this.invoiceIsSelected(+e.id),c=i?"selected-row":"";return Object(a.jsxs)("tr",{className:c,children:[Object(a.jsx)("td",{children:Object(a.jsx)(nI,{value:i,onChange:function(t){return o.toggleSelection(e)},size:15,inversedColors:!0})}),Object(a.jsx)("td",{children:Object(a.jsxs)(Dte,{children:[Object(a.jsxs)("div",{children:["Inv. ",e.id]}),Object(a.jsxs)("div",{children:[null===(t=e.location)||void 0===t?void 0:t.code," | ",e.recipient_name]})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)(Rte,{children:[Object(a.jsx)(v8,{job:e.job}),Object(a.jsx)("div",{children:e.job&&"".concat(null===(n=e.job)||void 0===n||null===(r=n.invoice_to_contact)||void 0===r?void 0:r.contact_name)})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)(Rte,{children:[Object(a.jsx)("div",{children:vm(e.balance_due)}),Object(a.jsx)("div",{children:"Balance due"})]})}),Object(a.jsx)("td",{children:!!e.payment_type&&Object(a.jsx)(n9,{defaultValue:{label:G0[e.payment_type],value:e.payment_type},options:this.paymentTypeOptions,onChange:function(t){return o.setPaymentType(e.id,t.value)}})}),Object(a.jsx)("td",{children:Object(a.jsx)(yte,{value:e.payment_amount&&vm(e.payment_amount)||"",onBlur:function(t){return o.setAmount(e.id,t)}})})]},"rp-row-".concat(e.id))}},{key:"render",value:function(){var e=this,t=this.props.receivePayments.loading;return Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsxs)(UC,{className:"h-100",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/receive-payment",children:"Receive a Payment"}),Object(a.jsx)(une,{children:n.has(vx.FINANCE_PAYMENTS_TRANSFERS_RECEIVE)&&Object(a.jsx)(ane,{onSubmit:e.receivePayment,disabled:0===e.invoicesData.length,totalSelected:e.selectedAmount,glAccounts:e.bankAccounts,initialValues:{paid_at:pm()(),dst_gl_account:e.bankAccounts[0]||void 0}})}),Object(a.jsx)(lne,{children:Object(a.jsx)(Ote,{onSubmit:e.debouncedSearch,initialValues:{term:e.state.lookupTerm}})}),n.has(vx.FINANCE_PAYMENTS_VIEW)&&Object(a.jsxs)(JC,{children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),!t&&e.renderInvoicesTable()]})]})}})}},{key:"invoicesData",get:function(){return this.props.receivePayments.data&&this.props.receivePayments.data.data||[]}},{key:"selectedAmount",get:function(){return this.selectedInvoices.reduce((function(e,t){return t.payment_amount?e+t.payment_amount:e}),0)}},{key:"selectedInvoices",get:function(){var e=this;return this.props.receivePayments.data.selectedIds?this.invoicesData.filter((function(t){return e.invoiceIsSelected(+t.id)})):[]}},{key:"paymentTypeOptions",get:function(){var e=[];for(var t in G0)G0.hasOwnProperty(t)&&e.push({value:t,label:t});return e}},{key:"bankAccounts",get:function(){return this.props.glAccounts.filter((function(e){return e.is_bank_account}))}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.PureComponent),fne=Object(b.b)((function(e){return{receivePayments:e.receivePayments,glAccounts:e.finance.glAccounts,locations:e.user.locations}}))(bne),mne=p.memo((function(e){var t=e.withBorder,n=e.transformValueById,r=e.value,o=e.options,i={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{flexBasis:"200px",height:"50px",border:t?"1px solid ".concat(_.white):"none",borderTop:"none",borderBottom:"none",paddingTop:"5px"})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{background:"transparent",color:_.white})},control:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",boxShadow:"none",background:"transparent",color:_.white})},placeholder:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:_.gray2})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:_.gray2})}},s=n&&o&&o.find((function(e){return e.id===r}))||r;return Object(a.jsx)(n9,Object(c.a)(Object(c.a)({},e),{},{value:s,customStyles:i}))}));!function(e){e.new="new",e.received="received"}(sne||(sne={}));var jne=function(e){var t=function(t){return t===e.activeTabId?void 0:e.onChangePage},n=[{name:"New Transfer",id:sne.new,onClick:t(sne.new)},{name:"Received Remittences",id:sne.received,onClick:t(sne.received)}];return Object(a.jsx)(Pte,{children:Object(a.jsx)(iz,{items:n,selectedTabId:e.activeTabId})})};function vne(){var e=Object(f.a)(["\n  height: ","px;\n  background: ",";\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n"]);return vne=function(){return e},e}var One=y.default.div(vne(),50,_.purple2),gne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(One,{className:this.props.className,children:this.props.children})}}]),n}(h.a.PureComponent),xne=function(e,t){var n="";if(e&&e.length>0){var r=function(e,t){return null===t?"":t},a=t||Object.keys(e[0]),o=e.map((function(e){return a.map((function(t){return e[t]?JSON.stringify(e[t],r):""})).join(",")}));o.unshift(a.join(",")),n=o.join("\r\n")}return n};function yne(){var e=Object(f.a)(["\n  cursor: pointer;\n  path,\n  line,\n  polyline {\n    stroke: ",";\n    fill: none;\n  }\n  :hover path,\n  :hover line,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return yne=function(){return e},e}var _ne=y.default.div(yne(),_.white,_.white),wne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).exportToCsv=function(t){var n=t.reportName,r=t.data,a=t.columns,o=n||"report",i=xne(r,a);e.download(i,"".concat(o,".csv"),"text/plain")},e.dataToCsv=function(){var t=e.props.transformToTable();t&&(Object(m.isArray)(t)?t.forEach((function(t){return setTimeout((function(){return e.exportToCsv(t)}))})):e.exportToCsv(t))},e.printToPdf=function(){window.print()},e.getDropdownMenuItems=function(){return[{name:"Export to CSV",onClick:e.dataToCsv},{type:"divider"},{name:"Print",onClick:e.printToPdf}]},e}return Object(l.a)(n,[{key:"download",value:function(e,t,n){var r=document.createElement("a"),a=new Blob([e],{type:n});r.href=URL.createObjectURL(a),r.download=t,r.click()}},{key:"render",value:function(){var e=this.getDropdownMenuItems();return Object(a.jsx)(_ne,{children:Object(a.jsx)(nw,{items:e,noMargin:!0,iconName:Xf.Download,direction:"right"})})}}]),n}(p.PureComponent);function Sne(){var e=Object(f.a)(["\n  padding-top: 30px;\n"]);return Sne=function(){return e},e}var kne=y.default.div(Sne()),Cne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isBankAccount=function(e){return e.is_bank_account},e.onChangeGLAccount=function(t){e.props.values;e.props.onChangeGLAccount(t.id,pm()())},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.sourceAccounts||[];e&&e.length>0&&this.onChangeGLAccount(e[0])}},{key:"render",value:function(){var e=this.props,t=e.locationName,r=e.totalAvailable,o=e.totalRemittence,i=e.loading,c=e.disabled;e.onChangeGLAccount;return Object(a.jsx)(Lte,{onSubmit:this.props.handleSubmit,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(Hv.a,{name:"transferred_at",label:"Date to Transfer",placeholder:"Date",component:s_,futureEnabled:!0,validate:Dv,disabled:c}),Object(a.jsx)(Hv.a,{name:"source_gl_account_id",label:"Paid from Account",placeholder:"Select account...",component:xO,options:this.sourceAccounts,validate:Dv,disabled:c,getOptionLabel:k0.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},selectStyles:n.formSelectStyles,onChange:this.onChangeGLAccount}),Object(a.jsx)(Hv.a,{name:"destination_gl_account_id",label:"Paid to Account",placeholder:"Select account...",component:xO,options:this.destinationAccounts,validate:Dv,disabled:c,getOptionLabel:k0.getGLAccountLabel,getOptionValue:function(e){return e.id.toString()},selectStyles:n.formSelectStyles}),Object(a.jsx)(Hv.a,{name:"remittance_reference",label:"Remittence Reference",placeholder:"None",component:yg,disabled:c,validate:Dv})]}),Object(a.jsxs)(kne,{className:"col-5 offset-1",children:[i&&Object(a.jsx)(Nv,{size:40}),Object(a.jsx)(ene,{label:"Location",value:t||"",hasDelimiter:!0}),Object(a.jsx)(ene,{label:"Total Available",value:vm(r),hasDelimiter:!0}),Object(a.jsx)(ene,{label:"Total remittence",value:vm(o)}),Object(a.jsx)("div",{className:"pt-2",children:Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",disabled:!!c,children:"Process Payment"})})]})]})})}},{key:"sourceAccounts",get:function(){return this.props.glAccounts.filter(this.isBankAccount)}},{key:"destinationAccounts",get:function(){var e=this;return this.props.glAccounts.filter((function(t){return!e.isBankAccount(t)}))}}]),n}(p.PureComponent);Cne.formSelectStyles=Object(c.a)(Object(c.a)({},mO),{},{control:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{borderColor:_.gray2,background:t.isDisabled?_.gray1:_.white,boxShadow:t.isFocused?"0 0 1px ".concat(_.gray4):"none"})}});var Nne=Object(sg.compose)(Object(jv.a)({form:"ForwardPaymentsForm"}),Object(b.b)((function(e){var t;return{values:null===(t=e.form.ForwardPaymentsForm)||void 0===t?void 0:t.values}})))(Cne);function Ene(){var e=Object(f.a)(["\n  th:last-child,\n  td:last-child {\n    text-align: right;\n  }\n  tr.selected-row {\n    background-color: ",";\n    &:hover {\n      opacity: 0.75;\n    }\n  }\n"]);return Ene=function(){return e},e}var Ane=Object(y.default)(Mte)(Ene(),_.blue0),Ine=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={allSelected:!1,locationId:void 0},e.getLocationNameById=function(t){var n=mB(e.props.locations,t);return n&&n.name},e.getPayments=function(t){var n=t.id;e.setState({locationId:n}),e.props.dispatch(r1()),e.props.dispatch(a1({location_id:n,sortby:"desc"})),e.props.dispatch(L0([n]))},e.debouncedGetPayments=Qv()(e.getPayments),e.fetchGLAccountInfo=function(t,n){e.props.glAccountInfo.fetch(t,{date_from:pm()(n).format(av)})},e.dataToExport=function(){return{reportName:"Forward_payments_new",data:e.allPaymentsData.map((function(e){return{"originally payd":e.due_at,invoice:"Inv. ".concat(e.id),job:e.job?"# ".concat(e.job.id).concat(e.job.location_code,": ").concat(e.job.insurer_name):"",amount:vm(e.total_amount)}}))}},e.paymentIsSelected=function(t){var n=e.props.payments;return!!n.data.selectedIds&&n.data.selectedIds.includes(t)},e.selectAll=function(t){e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&e.allPaymentsData.length?e.props.dispatch(n1(e.allPaymentsData)):e.props.dispatch(e1())}))},e.toggleSelection=function(t){e.props.dispatch(t1(t)),e.setState({allSelected:!1})},e.calcBalance=function(e){return e.reduce((function(e,t){return e+t.fb_total_paid_amount}),0)},e.forwardPayments=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:void 0!==e.state.locationId&&(e.props.dispatch(o1(Object(c.a)(Object(c.a)({},n),{},{location_id:e.state.locationId,source_gl_account_id:n.source_gl_account_id.id,destination_gl_account_id:n.destination_gl_account_id.id}),{location_id:e.state.locationId})),e.props.dispatch(r1()));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=bj.parse(this.props.location.search,{ignoreQueryPrefix:!0});e.location?this.getPayments({id:+e.location}):this.getPaymentsForPrymary()}},{key:"componentDidUpdate",value:function(e,t){t.locationId||e.locations.length===this.props.locations.length||this.getPaymentsForPrymary()}},{key:"getPaymentsForPrymary",value:function(){this.primaryLocation&&this.getPayments(this.primaryLocation)}},{key:"renderPaymentRow",value:function(e){var t,n,r,o=this,i=this.paymentIsSelected(+e.id),c=i?"selected-row":"";return Object(a.jsxs)("tr",{className:c,children:[Object(a.jsx)("td",{children:Object(a.jsx)(nI,{value:i,onChange:function(t){return o.toggleSelection(e)},size:15,inversedColors:!0})}),Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:e.due_at})}),Object(a.jsx)("td",{children:Object(a.jsxs)(Dte,{children:[Object(a.jsxs)("div",{children:["Inv. ",e.id]}),Object(a.jsxs)("div",{children:[null===(t=e.location)||void 0===t?void 0:t.code," | ",e.recipient_name]})]})}),Object(a.jsx)("td",{children:Object(a.jsxs)(Rte,{children:[Object(a.jsx)(v8,{job:e.job,withoutName:!0}),Object(a.jsx)("div",{children:e.job&&"".concat(null===(n=e.job)||void 0===n||null===(r=n.invoice_to_contact)||void 0===r?void 0:r.contact_name)})]})}),Object(a.jsx)("td",{children:vm(e.fb_total_paid_amount)})]},"pmnt-row-".concat(e.id))}},{key:"renderPaymentsTable",value:function(){var e=this;return Object(a.jsxs)(Ane,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:Object(a.jsx)(nI,{value:this.state.allSelected,onChange:this.selectAll,size:15,inversedColors:!0})}),Object(a.jsx)("th",{children:"Invoice Due Date"}),Object(a.jsx)("th",{children:"Invoice"}),Object(a.jsx)("th",{children:"Job"}),Object(a.jsx)("th",{children:"Amount"})]})}),Object(a.jsx)("tbody",{children:this.allPaymentsData.map((function(t){return e.renderPaymentRow(t)}))})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.glAccounts,o=this.props.payments.data,i=this.props.payments.loading,c=i||!(o&&o.data&&o.data.length),s=this.props.glAccountInfo.data?this.props.glAccountInfo.data.additional.total_balance:0,l=this.calcBalance(this.selectedPayments),u=this.getLocationNameById(this.state.locationId);return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(UC,{className:"h-100",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Finance"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/finance/forward-invoice-payments/new",children:"Forward Invoice Payments"}),Object(a.jsx)(gne,{children:Object(a.jsxs)(Ute,{children:[Object(a.jsx)(Vte,{children:Object(a.jsx)(wne,{transformToTable:e.dataToExport})}),Object(a.jsx)(mne,{options:n,value:e.state.locationId?{id:e.state.locationId,name:u}:void 0,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:e.debouncedGetPayments,placeholder:"Select location...",withBorder:!0}),Object(a.jsx)(Bte,{children:"Forward Invoice Payments"})]})}),Object(a.jsx)(jne,{activeTabId:sne.new,onChangePage:function(){return e.props.history.push({pathname:"/finance/forward-invoice-payments/received",search:e.state.locationId?"location=".concat(e.state.locationId):""})}}),Object(a.jsx)(Fte,{children:t.has(vx.FINANCE_PAYMENTS_FORWARD)&&Object(a.jsx)(Nne,{totalAvailable:s,totalRemittence:l,locationName:u,glAccounts:r.filter((function(e){return"Current Liability"!==e.account_type.name&&"Revenue"!==e.account_type.name})),disabled:c,onSubmit:e.forwardPayments,onChangeGLAccount:e.fetchGLAccountInfo,loading:i,initialValues:{transferred_at:pm()(),source_gl_account_id:(null===r||void 0===r?void 0:r.find((function(e){return!0===e.is_bank_account})))||void 0,destination_gl_account_id:(null===r||void 0===r?void 0:r.find((function(e){return!1===e.is_bank_account})))||void 0}})}),t.has(vx.FINANCE_PAYMENTS_VIEW)&&Object(a.jsxs)(JC,{children:[i&&Object(a.jsx)(Nv,{size:40,color:_.white}),!i&&e.allPaymentsData.length>0&&e.renderPaymentsTable()]})]})}})}},{key:"allPaymentsData",get:function(){var e=this.props.payments;return e.data&&e.data.data||[]}},{key:"selectedPayments",get:function(){var e=this;return this.props.payments.data.selectedIds?this.allPaymentsData.filter((function(t){return e.paymentIsSelected(t.id)})):[]}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.PureComponent),Tne=Object(sg.compose)(O.g,oj({glAccountInfo:{fetch:A1.getAccountTransactionsByGlAccountId}}),Object(b.b)((function(e){return{payments:e.forwardPayments,glAccounts:e.finance.glAccounts,locations:e.user.locations}})))(Ine);function Rne(){var e=Object(f.a)(["\n  padding-right: 10px;\n  margin-top: -3px;\n  path {\n    stroke: ",";\n  }\n"]);return Rne=function(){return e},e}var Dne=y.default.div(Rne(),_.white),Mne=function(e){e.innerProps;return Object(a.jsx)(Dne,{children:Object(a.jsx)(cm,{name:Xf.Calendar})})},Lne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;Object(s.a)(this,n),(r=t.call(this,e)).options=[];for(var a=pm()().month()>=6,o=pm()().year()+(a?1:0),i=[],c=o;c>o-7;c--)i.push({label:"FY ".concat(c-1," - ").concat(c),value:c.toString()});return r.options=i,r}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(mne,{defaultValue:this.options[0],options:this.options,onChange:this.props.onChange,components:{DropdownIndicator:Mne}})}}]),n}(h.a.PureComponent);function Pne(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n  th:nth-child(4) ~ th,\n  td:nth-child(4) ~ td {\n    text-align: right;\n    padding-right: 15px;\n  }\n  tr.payment-row {\n    background: ",";\n  }\n"]);return Pne=function(){return e},e}function Fne(){var e=Object(f.a)(["\n  margin-right: 70px;\n  display: flex;\n"]);return Fne=function(){return e},e}var Une=y.default.div(Fne()),Bne=Object(y.default)(tU)(Pne(),lm.normal,_.gray0),Vne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={locationName:void 0,locationId:void 0},e.getLocationNameById=function(t){var n=mB(e.props.locations,t);return n&&n.name},e.getPayments=function(t){var n=t.id;n&&e.getTransferPayments(n,e.getCurrentYearFiscal())},e.debouncedGetPayments=Qv()(e.getPayments),e.getTransferPayments=function(t,n){e.setState({locationId:t}),e.props.transferPaymentInfo.fetch(t,null===n||void 0===n?void 0:n.dateFrom,null===n||void 0===n?void 0:n.dateTo),e.props.transferPayments.fetch({location_id:t,date_from:pm()(null===n||void 0===n?void 0:n.dateFrom).format(av),date_to:pm()(null===n||void 0===n?void 0:n.dateTo).format(av)})},e.onChangeFiscalYear=function(t){var n=e.state.locationId;e.getTransferPayments(n,e.setDates(+t.value,6))},e.debouncedGetTransferPayments=Qv()(e.onChangeFiscalYear),e.dataToExport=function(){var t=[];return e.allPaymentsData.forEach((function(e){t.push({date:e.date,"remittance reference/payment":"Receipt ".concat(e.id),"from account":e.source_gl_account_id,"to account":e.destination_gl_account_id,amount:"",total:vm(e.total_amount)}),e.invoice.forEach((function(e){t.push({date:"","remittance reference/payment":"Inv. ".concat(e.id),"from account":"","to account":"",amount:vm(e.amount),total:""})}))})),{reportName:"Forward_payments_received",data:e.allPaymentsData.map((function(e){return{"originally paid":e.due_at,invoice:"Inv. ".concat(e.id),job:e.job?"# ".concat(e.job.id).concat(e.job.location_code,": ").concat(e.job.insurer_name):"",amount:vm(e.total_amount)}}))}},e.getAccountName=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=(null===e||void 0===e?void 0:e.find((function(e){return e.is_debit===n})))||void 0;return r?"".concat(null===r||void 0===r||null===(t=r.gl_account)||void 0===t?void 0:t.name):""},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=bj.parse(this.props.location.search,{ignoreQueryPrefix:!0});e.location?this.getTransferPayments(+e.location,this.getCurrentYearFiscal()):this.getPaymentsForPrymary()}},{key:"componentDidUpdate",value:function(e,t){t.locationId||e.locations.length===this.props.locations.length||this.getPaymentsForPrymary()}},{key:"getPaymentsForPrymary",value:function(){this.primaryLocation&&this.getTransferPayments(this.primaryLocation.id,this.getCurrentYearFiscal())}},{key:"getCurrentYearFiscal",value:function(){var e=pm()().month()>=6,t=pm()().year()+(e?1:0);return this.setDates(t,6)}},{key:"setDates",value:function(e,t){return{dateFrom:pm()().set("year",e-1).set("month",t).startOf("month"),dateTo:pm()().set("year",e).set("month",t-1).endOf("month")}}},{key:"renderPaymentsTable",value:function(){var e=this;return Object(a.jsxs)(Bne,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Date"}),Object(a.jsx)("th",{children:"Remittence Reference/Payment"}),Object(a.jsx)("th",{children:"From Account"}),Object(a.jsx)("th",{children:"To Account"}),Object(a.jsx)("th",{children:"Amount"}),Object(a.jsx)("th",{children:"Total"})]})}),Object(a.jsx)("tbody",{children:this.allPaymentsData.map((function(t){return e.renderPayments(t)}))})]})}},{key:"renderPayments",value:function(e){var t,n,r,o,i;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("tr",{className:"payment-row",children:[Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:Object(a.jsx)(kS.a,{format:iv,children:null===e||void 0===e||null===(t=e.forward)||void 0===t?void 0:t.transferred_at})})}),Object(a.jsx)("td",{children:Object(a.jsxs)("strong",{children:["Receipt ",null===e||void 0===e?void 0:e.id]})}),Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:this.getAccountName(null===e||void 0===e||null===(n=e.transaction)||void 0===n?void 0:n.records,!1)})}),Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:this.getAccountName(null===e||void 0===e||null===(r=e.transaction)||void 0===r?void 0:r.records,!0)})}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsx)("strong",{children:vm(null===e||void 0===e?void 0:e.amount)})})]},"pmnt-row-".concat(null===e||void 0===e?void 0:e.id)),null===e||void 0===e||null===(o=e.forward)||void 0===o||null===(i=o.invoice)||void 0===i?void 0:i.map((function(t){var n;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsxs)("td",{children:["Inv. ",null===t||void 0===t?void 0:t.id]}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:vm(null===t||void 0===t||null===(n=t.pivot)||void 0===n?void 0:n.amount)})]},"pmnt-inv-".concat(null===e||void 0===e?void 0:e.id,"-").concat(null===t||void 0===t?void 0:t.id))}))]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=(t.info,t.transferPayments.loading),o=t.transferPaymentInfo,i=o.loading,c=o.data&&vm(o.data.data.month),s=o.data&&vm(o.data.data.year),l=o.data&&vm(o.data.data.all),u=this.getLocationNameById(this.state.locationId);return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(UC,{className:"h-100",children:[Object(a.jsx)(gne,{children:Object(a.jsxs)(Ute,{children:[Object(a.jsx)(Vte,{children:Object(a.jsx)(wne,{transformToTable:e.dataToExport})}),Object(a.jsx)(mne,{options:n,value:e.state.locationId?{id:e.state.locationId,name:u}:void 0,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:e.debouncedGetPayments,placeholder:"Select location...",withBorder:!0}),Object(a.jsx)(Lne,{onChange:e.debouncedGetTransferPayments}),Object(a.jsx)(Bte,{children:"Forward Invoice Payments"})]})}),Object(a.jsx)(jne,{activeTabId:sne.received,onChangePage:function(){return e.props.history.push({pathname:"/finance/forward-invoice-payments/new",search:e.state.locationId?"location=".concat(e.state.locationId):""})}}),Object(a.jsxs)(Fte,{children:[i&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(Une,{children:[Object(a.jsx)(ene,{label:"Location",value:u,hasDelimiter:!0}),Object(a.jsx)(ene,{label:"Selected Financial Year",value:s,hasDelimiter:!0})]}),Object(a.jsxs)(Une,{children:[Object(a.jsx)(ene,{label:"Overall Total",value:l,hasDelimiter:!0}),Object(a.jsx)(ene,{label:"This Month",value:c,hasDelimiter:!0})]})]}),t.has(vx.FINANCE_PAYMENTS_VIEW)&&Object(a.jsxs)(JC,{children:[r&&Object(a.jsx)(Nv,{size:40,color:_.white}),!r&&e.allPaymentsData.length>0&&e.renderPaymentsTable()]})]})}})}},{key:"allPaymentsData",get:function(){var e=this.props.transferPayments;return e.data&&e.data.data||[]}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.PureComponent),Jne=Object(sg.compose)(O.g,oj({transferPaymentInfo:{fetch:W0.paymentTransferInfo},transferPayments:{fetch:W0.getForwardPaymentTransfersList}}),Object(b.b)((function(e){return{payments:e.forwardPaymentsReceived,info:e.forwardPaymentsReceivedInfo,locations:e.user.locations}})))(Vne),qne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Reimbursements Page"})}}]),n}(p.PureComponent),zne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Timesheet Payroll Page"})}}]),n}(p.PureComponent);function Gne(){var e=Object(f.a)(["\n  background: ",";\n  border: 1px solid ",";\n  text-align: center;\n  padding: 0 0 0 30px;\n"]);return Gne=function(){return e},e}var Wne=y.default.div(Gne(),_.gray1,_.gray2),Hne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(Wne,{children:this.props.children})}}]),n}(p.PureComponent);function Yne(){var e=Object(f.a)(["\n  color: ",";\n"]);return Yne=function(){return e},e}var Qne=y.default.span(Yne(),_.gray2),Kne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedItem:null},e.triggerRender=function(){var t=e.props,n=t.placeHolder,r=t.nameRender,o=e.state.selectedItem;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[o?r(o):Object(a.jsx)(Qne,{children:n}),Object(a.jsx)(z7,{style:{marginLeft:"20px"},color:_.white,name:Xf.ArrowDown})]})},e.dataSource=function(){var t=e.props,n=t.items,r=t.onChange,a=t.nameRender;return n.map((function(t){return{name:a(t),onClick:function(){e.setState({selectedItem:t}),r(t)}}}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.defaultValueById,n=e.items;if(t){var r=n.find((function(e){return e.id===t}));r&&(this.setState({selectedItem:r}),this.props.onChange(r))}}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.selectItemById,r=t.items;if(e.selectItemById!==n){var a=r.find((function(e){return e.id===n}));a&&this.setState({selectedItem:a})}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(nw,{direction:"right",trigger:function(){return e.triggerRender()},items:this.dataSource()})}}]),n}(p.PureComponent),Zne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={startDate:e.props.defaultStartDate?e.props.defaultStartDate:pm()(),endDate:e.props.defaultEndDate?e.props.defaultEndDate:pm()()},e.onStartDateChange=function(t,n){var r=e.state.endDate,a=t;e.setState({startDate:a}),e.onChange({startDate:a,endDate:r}),n.close()},e.onEndDateChange=function(t,n){var r=e.state.startDate,a=t;e.setState({endDate:a}),e.onChange({startDate:r,endDate:a}),n.close()},e.startTriggerRender=function(){var t=e.state.startDate;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[t.format(iv)," - \xa0"]})},e.endTriggerRender=function(){var t=e.state.endDate;return Object(a.jsx)("div",{className:"d-flex",style:{cursor:"pointer"},children:t.format(iv)})},e.startPickerRender=function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Qy.a,{input:!1,timeFormat:!1,onChange:function(n){return e.onStartDateChange(n,t)},initialValue:e.props.defaultStartDate})})},e.endPickerRender=function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(Qy.a,{input:!1,timeFormat:!1,onChange:function(n){return e.onEndDateChange(n,t)},initialValue:e.props.defaultEndDate})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){if(this.props.defaultEndDate||this.props.defaultStartDate){var e=this.state,t=e.startDate,n=e.endDate;this.onChange({startDate:t,endDate:n})}}},{key:"onChange",value:function(e){this.props.onChange({startDate:e.startDate,endDate:e.endDate})}},{key:"render",value:function(){var e=this;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)(nw,{renderInternal:this.startPickerRender,trigger:function(){return e.startTriggerRender()}}),Object(a.jsx)(nw,{renderInternal:this.endPickerRender,trigger:function(){return e.endTriggerRender()}}),Object(a.jsx)(z7,{style:{marginLeft:"20px"},color:_.white,name:Xf.Calendar})]})})}}]),n}(p.PureComponent),Xne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dateFromSelected:pm()(),dateToSelected:pm()(),glAccountSelected:null,aoSelected:null},e.onGlAccountChange=function(t){e.setState({glAccountSelected:t})},e.onAoChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({aoSelected:n}),t.prev=1,t.next=4,e.debouncedSearch({accounting_organization_id:n.id});case 4:return t.prev=4,(r=e.props.glAccountsFilter.data)&&r.length>0?e.setState({glAccountSelected:r[0]}):e.setState({glAccountSelected:null}),t.finish(4);case 8:case"end":return t.stop()}}),t,null,[[1,,4,8]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearch=Qv()(e.props.glAccountsFilter.fetch,500),e.onDateChange=function(t){e.setState({dateFromSelected:t.startDate,dateToSelected:t.endDate})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.state,r=n.dateFromSelected,a=n.dateToSelected,o=n.glAccountSelected;if(!r.isSame(t.dateFromSelected)||!a.isSame(t.dateToSelected)||o!==t.glAccountSelected){var i={dateFrom:r,dateTo:a,glAccount:o};this.props.onSubmit(i)}}},{key:"glAccountNameRender",value:function(e){return e.name}},{key:"aoNameRender",value:function(e){return hO.getContactName(e.contact)}},{key:"render",value:function(){var e=this.props,t=e.glAccountsFilter.data,n=e.accountingOrganizations,r=e.user,o=pm()().startOf("month"),i=pm()().endOf("month");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(AR,{children:Object(a.jsx)(Zne,{onChange:this.onDateChange,defaultStartDate:o,defaultEndDate:i})}),Object(a.jsx)(AR,{children:!n||n&&0===n.length?Object(a.jsx)("div",{children:"No Accounting Organizations"}):Object(a.jsx)(Kne,{items:n,onChange:this.onAoChange,placeHolder:"Select Accounting Organization...",nameRender:this.aoNameRender,defaultValueById:r.locations[0]})}),Object(a.jsx)(AR,{children:!t||t&&0===t.length?Object(a.jsx)("div",{children:"No GL Accounts"}):Object(a.jsx)(Kne,{items:t,onChange:this.onGlAccountChange,placeHolder:"Select GL Account...",nameRender:this.glAccountNameRender,defaultValueById:t[0].id,selectItemById:t[0].id})})]})}}]),n}(h.a.PureComponent),$ne=Object(sg.compose)(Object(b.b)((function(e){return{accountingOrganizations:e.finance.accountingOrganizations,user:e.user}})),oj({glAccountsFilter:{fetch:k0.searchGLAccounts}}))(Xne);function ere(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return ere=function(){return e},e}function tre(){var e=Object(f.a)(["\n  padding: 0px 15px;\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]);return tre=function(){return e},e}function nre(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n  padding: 0 25px 0 25px;\n  display: flex;\n  align-items: center;\n  height: 100%;\n"]);return nre=function(){return e},e}var rre=y.default.div(nre(),lm.medium,sm.normal,_.white),are=y.default.div(tre()),ore=y.default.div(ere()),ire=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.reportName,n=e.toCsvFn;return Object(a.jsxs)(gne,{children:[Object(a.jsx)(ore,{children:Object(a.jsx)(rre,{children:t})}),Object(a.jsxs)(ore,{children:[Object(a.jsx)(ore,{children:this.props.children}),Object(a.jsx)(are,{children:Object(a.jsx)(wte,{children:Object(a.jsx)(wne,{transformToTable:n})})})]})]})}}]),n}(p.PureComponent);function cre(){var e=Object(f.a)(["\n  border-top: 1px solid ",";\n  min-width: 100%;\n"]);return cre=function(){return e},e}function sre(){var e=Object(f.a)(["\n  display: table-row;\n  text-align: left;\n  padding: 10px 40px 10px 10px;\n  font-weight: ",";\n  font-size: ",";\n"]);return sre=function(){return e},e}function lre(){var e=Object(f.a)(["\n  display: table-row;\n  text-align: left;\n  padding: 10px 40px 10px 120px;\n  color: ",";\n  font-size: ",";\n"]);return lre=function(){return e},e}var ure=y.default.div(lre(),_.gray4,sm.normal),dre=y.default.div(sre(),lm.bold,sm.big),pre=y.default.div(cre(),_.gray2),hre="Account Transactions",bre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={balance:0,glAccountName:"",glType:"",isEmpty:!0},e.getCsvData=function(){var t=e.props.accountTransactions.data.data;return e.hasAccountTransactions?{reportName:hre,data:t.map((function(e){return{date:e.transaction?bv(e.transaction.created_at):"",description:e.transaction&&e.transaction.payment?e.transaction.payment.reference:"",debit:e.is_debit?e.amount:"",credit:e.is_debit?"":e.amount,balance:e.balance}}))}:null},e.getAccountTransactions=function(t){e.handlePagination(t,0)},e.filterReport=Object(m.debounce)(e.getAccountTransactions),e}return Object(l.a)(n,[{key:"handlePagination",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a,o,i,c;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=t.dateFrom,a=t.dateTo,o=t.glAccount,i=bv(r),c=bv(a),!o){e.next=10;break}return this.setState({glAccountName:o.name,glType:o.account_type.name}),e.next=7,this.getData(o.id,n,i,c);case 7:return e.abrupt("return",e.sent);case 10:this.setEmpty();case 11:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"setEmpty",value:function(){this.setState({glAccountName:"",glType:"",balance:0,isEmpty:!0})}},{key:"getData",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r,a){var o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,this.props.dispatch(M1(t,{date_from:r,date_to:a,page:n}));case 3:return e.prev=3,o=this.props.accountTransactions.data&&this.props.accountTransactions.data.additional&&this.props.accountTransactions.data.additional.total_balance,this.setState({balance:o||0,isEmpty:!1}),e.finish(3);case 7:case"end":return e.stop()}}),e,this,[[0,,3,7]])})));return function(t,n,r,a){return e.apply(this,arguments)}}()},{key:"renderReportRows",value:function(){var e=this.props.accountTransactions.data.data;if(!e)return null;var t="--";return e.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(g9,{children:Object(a.jsx)(kS.a,{format:iv,children:e.transaction?e.transaction.created_at.toString():t})}),Object(a.jsx)(g9,{children:t}),Object(a.jsx)(g9,{children:e.transaction&&e.transaction.payment&&e.transaction.payment.reference?e.transaction.payment.reference:t}),Object(a.jsx)(x9,{children:e.is_debit?vm(e.amount)+" DR":t}),Object(a.jsx)(x9,{children:e.is_debit?t:vm(e.amount)+" CR"}),Object(a.jsx)(x9,{children:vm(e.balance)})]},"trans-tr-".concat(e.id))}))}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:6,children:"No data..."})})}},{key:"renderSummary",value:function(){var e=this.state,t=e.glAccountName,n=e.glType,r=e.balance;return Object(a.jsx)("div",{className:"row",style:{height:"288px"},children:Object(a.jsx)("div",{className:".col-lg-4 col-md-4 col-sm-12",children:Object(a.jsxs)("div",{className:"d-flex flex-column h-100 align-items-stretch",children:[Object(a.jsx)("div",{className:"d-flex flex-row flex-fill align-items-center",children:Object(a.jsxs)("div",{children:[Object(a.jsx)(ure,{children:"Account"}),Object(a.jsx)(dre,{children:t})]})}),Object(a.jsx)(pre,{className:"d-flex flex-row flex-fill align-items-center",children:Object(a.jsxs)("div",{className:"row w-100",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(ure,{children:"Account Balance"}),Object(a.jsx)(dre,{children:vm(r)})]}),Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(ure,{children:"Account Type"}),Object(a.jsx)(dre,{children:n})]})]})})]})})})}},{key:"render",value:function(){var e=this.props.accountTransactions.loading,t=this.props.accountTransactions.data,n=this.hasAccountTransactions;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ire,{reportName:hre,toCsvFn:this.getCsvData,children:Object(a.jsx)($ne,{onSubmit:this.filterReport})}),e?Object(a.jsx)(Nv,{size:40,color:_.white}):Object(a.jsxs)(UC,{className:"h-100",children:[Object(a.jsx)(Hne,{children:this.renderSummary()}),Object(a.jsxs)(JC,{children:[Object(a.jsxs)(aU,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(k9,{scope:"col",width:"10%",children:"Date"}),Object(a.jsx)(k9,{scope:"col",width:"20%",children:"Description"}),Object(a.jsx)(k9,{scope:"col",width:"25%",children:"Reference"}),Object(a.jsx)(C9,{scope:"col",width:"15%",children:"Debit"}),Object(a.jsx)(C9,{scope:"col",width:"15%",children:"Credit"}),Object(a.jsx)(C9,{scope:"col",width:"15%",children:"Balance"})]})}),Object(a.jsx)("tbody",{children:n?this.renderReportRows():this.renderNodata()})]}),t&&t.pagination&&Object(a.jsx)(wte,{children:Object(a.jsx)(oC,{pagination:t.pagination,onChange:this.handlePagination})})]})]})]})}},{key:"hasAccountTransactions",get:function(){var e=this.props.accountTransactions,t=e.ready,n=e.data,r=n&&n.data;return t&&r&&r.length>0&&!this.state.isEmpty}}]),n}(p.PureComponent),fre=Object(sg.compose)(Object(b.b)((function(e){return{accountTransactions:e.accountTransactions}})))(bre),mre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Aged Receivables Summary Page"})}}]),n}(p.PureComponent),jre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Aged Receivables Detailed Page"})}}]),n}(p.PureComponent),vre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Income by Account Summary Page"})}}]),n}(p.PureComponent),Ore=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Income by Account Detailed Page"})}}]),n}(p.PureComponent);function gre(){var e=Object(f.a)(["\n  margin: 40px 20px 40px 20px;\n"]);return gre=function(){return e},e}function xre(){var e=Object(f.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  border-radius: 5px;\n  @media print {\n    border: none;\n  }\n"]);return xre=function(){return e},e}function yre(){var e=Object(f.a)(["\n  padding: 60px 80px 0 80px;\n  background-color: ",";\n  position: relative;\n  min-height: 100%;\n"]);return yre=function(){return e},e}function _re(){var e=Object(f.a)(["\n  height: calc(100% - ","px);\n"]);return _re=function(){return e},e}var wre=y.default.div(_re(),50),Sre=y.default.div(yre(),_.gray1),kre=y.default.div(xre(),_.white,_.gray2),Cre=y.default.div(gre()),Nre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.style,n=e.children;return Object(a.jsx)(wre,{children:Object(a.jsx)(UC,{className:"h-100",children:Object(a.jsx)(Sre,{style:t,className:"d-flex flex-column",children:Object(a.jsx)(kre,{className:"flex-grow-1",children:Object(a.jsx)(Cre,{children:n})})})})})}}]),n}(p.PureComponent);function Ere(){var e=Object(f.a)(["\n  width: 100%;\n  border: none;\n  border-spacing: 0;\n  border-collapse: separate;\n  thead {\n    tr {\n      cursor: default;\n      th {\n        color: ",";\n        vertical-align: middle;\n        border-bottom: none;\n        &:first-child {\n          border-left: 1px solid ",";\n        }\n        &:last-child {\n          border-right: 1px solid ",";\n        }\n      }\n    }\n  }\n  tbody {\n    tr {\n      cursor: default;\n      td {\n        border-top: none;\n      }\n    }\n  }\n  .no-items {\n    color: ",";\n    text-align: center;\n    border: 1px solid ",";\n    background: ",";\n  }\n"]);return Ere=function(){return e},e}var Are,Ire=Object(y.default)(tU)(Ere(),_.gray4,_.gray2,_.gray2,_.gray4,_.gray2,_.gray0);!function(e){e.Text="left",e.Numeric="right"}(Are||(Are={}));var Tre="--",Rre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dateFromSelected:pm()(),dateToSelected:pm()(),locationSelected:null},e.onLocationChange=function(t){e.setState({locationSelected:t})},e.onDateChange=function(t){e.setState({dateFromSelected:t.startDate,dateToSelected:t.endDate})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t={dateFrom:e.dateFromSelected,dateTo:e.dateToSelected,location:e.locationSelected};this.props.onSubmit(t)}},{key:"locationNameRender",value:function(e){return e.name}},{key:"render",value:function(){var e=this.props.locations,t=e.find((function(e){return e.primary})),n=pm()().quarter(),r=pm()().quarter(n).startOf("quarter"),o=pm()().quarter(n).endOf("quarter");return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(AR,{children:Object(a.jsx)(Zne,{onChange:this.onDateChange,defaultStartDate:r,defaultEndDate:o})}),Object(a.jsx)(AR,{children:!e||e&&0===e.length?Object(a.jsx)("div",{children:"No Locations"}):Object(a.jsx)(Kne,{items:e,onChange:this.onLocationChange,placeHolder:"Select Location...",nameRender:this.locationNameRender,defaultValueById:t&&t.id})})]})}}]),n}(h.a.PureComponent),Dre=Object(b.b)((function(e){return{locations:e.user.locations}}))(Rre);function Mre(){var e=Object(f.a)(["\n  width: 100%;\n  border: none;\n  margin-bottom: 0;\n  thead {\n    th {\n      color: ",";\n      background: ",";\n    }\n  }\n  tbody {\n    tr {\n      td:first-child {\n        border-left: 1px solid ",";\n      }\n      td:last-child {\n        border-right: 1px solid ",";\n      }\n      td {\n        border-top: 1px solid ",";\n      }\n    }\n    tr:last-child {\n      &:hover {\n        background-color: ",";\n      }\n      td {\n        border-left: none;\n        border-right: none;\n      }\n    }\n  }\n  .no-items {\n    background: ",";\n    text-align: left;\n  }\n"]);return Mre=function(){return e},e}var Lre=Object(y.default)(tU)(Mre(),_.black0,_.gray0,_.gray2,_.gray2,_.gray2,_.white,_.white);function Pre(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n"]);return Pre=function(){return e},e}var Fre=y.default.span(Pre(),_.black0,lm.bold);function Ure(){var e=Object(f.a)(["\n  thead {\n    th {\n      color: ",";\n      background: ",";\n    }\n  }\n  tbody {\n    tr:nth-last-child(2) {\n      background: ",";\n    }\n  }\n"]);return Ure=function(){return e},e}var Bre=Object(y.default)(Lre)(Ure(),_.black0,_.white,_.gray0),Vre="GST Summary",Jre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsvData=function(){var t=e.props.gstSummary.data.data;if(!e.hasGstSummary)return null;var n=[];return t.income&&t.income.data.length>0&&(n=(n=(n=n.concat({name:"INCOME"})).concat(t.income.data)).concat({name:"Total Income",tax_rate:"",taxes:"",total_amount:t.income.total})),t.expenses&&t.expenses.data.length>0&&(n=(n=(n=n.concat({name:"EXPENSES"})).concat(t.expenses.data)).concat({name:"Total Expenses",tax_rate:"",taxes:"",total_amount:t.expenses.total})),t.other&&t.other.data.length>0&&(n=(n=(n=n.concat({name:"OTHER"})).concat(t.other.data)).concat({name:"Total Other",tax_rate:"",taxes:"",total_amount:t.other.total})),{reportName:Vre,data:n.map((function(e){return{account:e.name,tax_rate:e.tax_rate,taxes:e.taxes,total_amount:e.total_amount}}))}},e.getGstSummary=function(t,n){var r=t.dateFrom,a=t.dateTo,o=t.location;if(o){var i=bv(r),c=bv(a),s=o&&o.id;return e.getData(s,n,i,c)}},e.filterReport=Object(m.debounce)(e.getGstSummary),e.columnsDesc=[{id:"name",header:"Account",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.name})}},{id:"tax_rate",header:"Tax Rate",width:"30%",type:Are.Numeric,cell:function(e){return Object(a.jsxs)("span",{children:[e.tax_rate,"%"]})}},{id:"taxes",header:"Tax",width:"30%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:km(e.taxes,Tre)})}},{id:"total_amount",header:"Amount Inc.",width:"30%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:km(e.total_amount,Tre)})}}],e}return Object(l.a)(n,[{key:"getData",value:function(e,t,n,r){var a;this.props.dispatch((a={date_from:n,date_to:r,location_id:e,page:t},Dk(H2,Y2,Q2,(function(){return W2(a)}))))}},{key:"renderReportRows",value:function(){var e=this.props.gstSummary.data.data;return e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,style:{padding:"0"},children:this.renderGstSummary(e.income,"Income")})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,style:{padding:"0"},children:this.renderGstSummary(e.expenses,"Expenses")})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,style:{padding:"0"},children:this.renderGstSummary(e.other,"Other")})})]}):null}},{key:"renderGstSummary",value:function(e,t){return Object(a.jsxs)(Bre,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)(k9,{colSpan:this.columnsDesc.length,children:Object(a.jsx)(Fre,{children:t})})})}),Object(a.jsxs)("tbody",{children:[e&&e.data.length>0?this.renderSummaries(e.data):this.renderNodata(),e&&e.data.length>0&&Object(a.jsxs)("tr",{children:[Object(a.jsxs)(g9,{colSpan:this.columnsDesc.length-1,children:["Total ",t]}),Object(a.jsx)(x9,{width:"30%",children:Object(a.jsx)(Fre,{children:km(e.total,Tre)})})]}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsDesc.length,children:"\xa0"})})]})]})}},{key:"renderSummaries",value:function(e,t){var n=this;return e?e.map((function(e){return Object(a.jsx)("tr",{children:n.columnsDesc.map((function(n){return Object(a.jsx)(O9,{width:n.width,hidden:n.hidden,align:n.type,children:t?Object(a.jsx)(Fre,{children:n.cell(e)}):n.cell(e)},n.id)}))},e.name)})):null}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsDesc.length,children:"No items found"})})}},{key:"render",value:function(){var e=this.props.gstSummary.loading,t=this.hasGstSummary;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ire,{reportName:Vre,toCsvFn:this.getCsvData,children:Object(a.jsx)(Dre,{onSubmit:this.filterReport})}),e?Object(a.jsx)(Nv,{size:40,color:_.white}):Object(a.jsx)(Nre,{children:Object(a.jsxs)(Ire,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:this.columnsDesc.map((function(e){return Object(a.jsx)(S9,{width:e.width,align:e.type,children:e.header},e.id)}))})}),Object(a.jsx)("tbody",{children:t?this.renderReportRows():this.renderNodata()})]})})]})}},{key:"hasGstSummary",get:function(){var e=this.props.gstSummary,t=e.ready,n=e.data,r=n&&n.data;return!(!t||!r)}}]),n}(p.PureComponent),qre=Object(b.b)((function(e){return{gstSummary:e.gstSummary}}))(Jre),zre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(JC,{children:"Statement by Contact Summary Page"})}}]),n}(p.PureComponent),Gre=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={dateFromSelected:pm()(),dateToSelected:pm()(),locationSelected:null},e.onLocationChange=function(t){e.setState({locationSelected:t})},e.onDateChange=function(t){e.setState({dateFromSelected:t.startDate,dateToSelected:t.endDate})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t={dateFrom:e.dateFromSelected,dateTo:e.dateToSelected,location:e.locationSelected};this.props.onSubmit(t)}},{key:"locationNameRender",value:function(e){return e.name}},{key:"render",value:function(){var e=this.props.locations,t=pm()().startOf("month"),n=pm()().endOf("month"),r=e.find((function(e){return e.primary}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(AR,{children:Object(a.jsx)(Zne,{onChange:this.onDateChange,defaultStartDate:t,defaultEndDate:n})}),Object(a.jsx)(AR,{children:!e||e&&0===e.length?Object(a.jsx)("div",{children:"No Locations"}):Object(a.jsx)(Kne,{items:e,onChange:this.onLocationChange,placeHolder:"Select Location...",nameRender:this.locationNameRender,defaultValueById:r&&r.id})})]})}}]),n}(h.a.PureComponent),Wre=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})))(Gre);function Hre(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return Hre=function(){return e},e}function Yre(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  white-space: nowrap;\n"]);return Yre=function(){return e},e}function Qre(){var e=Object(f.a)(["\n  color: ",";\n"]);return Qre=function(){return e},e}var Kre=y.default.span(Qre(),_.black0),Zre=y.default.span(Yre()),Xre=Object(y.default)(rN)(Hre(),sm.smaller),$re="Invoice Payments",eae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={reportRequest:{dateFrom:null,dateTo:null,location:null}},e.getCsvData=function(){var t=e.props.invoicePayments.data.data;if(!e.hasIvoices)return[];var n=[];return t.forEach((function(e){var t={id:e.id,location_code:e.location_code,recipient_name:e.recipient_name?e.recipient_name:e.recipient_contact?e.recipient_contact.email:"",claim_number:e.job?e.job.claim_number:"",total_amount:e.total_amount,paid_status:e.paid_status,item:"",reference:"",amount:""};e.payments&&e.payments.length>0?e.payments.map((function(e){return{id:t.id,location_code:t.location_code,recipient_name:t.recipient_name,claim_number:t.claim_number,total_amount:t.total_amount,paid_status:t.paid_status,item:e.paid_at,reference:e.type,amount:e.amount}})).forEach((function(e){return n.push(e)})):n.push(t)})),{reportName:$re,data:n}},e.columnsPaymentDef=[{id:"item",header:"Item",width:"15%",type:Are.Text,cell:function(e){return Object(a.jsx)(kS.a,{format:iv,children:e.paid_at?e.paid_at.toString():"--"})}},{id:"reference",header:"Reference",width:"65%",type:Are.Text,cell:function(t){return Object(a.jsxs)("span",{children:[t.reference," ",e.renderPaymentType(t.type)]})}},{id:"amount",header:"Amount",width:"10%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:vm(e.amount)})}},{id:"paid",header:"",width:"10%",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:"\xa0"})}}],e.getInoicePayments=function(t,n){var r=t.dateFrom,a=t.dateTo,o=t.location,i=bv(r),c=bv(a),s=o&&o.id;return e.getData(s,n,i,c)},e.filterReport=Object(m.debounce)(e.getInoicePayments),e.handlePagination=function(t){return e.getInoicePayments(e.state.reportRequest,t)},e}return Object(l.a)(n,[{key:"getData",value:function(e,t,n,r){var a;this.setState({reportRequest:{dateFrom:n,dateTo:r,location:e}}),this.props.dispatch((a={date_from:n,date_to:r,location_id:e,page:t},Dk(o2,i2,c2,(function(){return a2.getInvoicePayments(a)}))))}},{key:"renderReportRows",value:function(){var e=this,t=this.props.invoicePayments.data.data;return t?t.map((function(t){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:5,style:{padding:"0"},children:e.renderInvoice(t)})},"invoice-tr-".concat(t.id))})):null}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsPaymentDef.length,children:"No data..."})})}},{key:"renderInvoice",value:function(e){var t=e.location_code?e.location_code:"",n=e.recipient_name?" | "+e.recipient_name:"";n&&(n=e.recipient_contact&&e.recipient_contact.email?" | "+e.recipient_contact.email:"");var r=e.job?" | #"+e.job.claim_number:"";return Object(a.jsxs)(Lre,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsxs)(k9,{colSpan:2,width:"80%",children:[Object(a.jsxs)(Kre,{children:["Invoice ",e.id,":"]})," ",t," ",n," ",r]}),Object(a.jsx)(C9,{width:"10%",children:Object(a.jsx)(Kre,{children:vm(e.total_amount)})}),Object(a.jsx)("th",{style:{width:"10%",textAlign:"center"},children:Object(a.jsx)(Zre,{children:e.paid_status})})]})}),Object(a.jsxs)("tbody",{children:[e.payments&&e.payments.length>0?this.renderPayments(e.payments):this.renderNoPayment(),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:5,children:"\xa0"})})]})]})}},{key:"renderPayments",value:function(e){var t=this;return e?e.map((function(e){return Object(a.jsx)("tr",{children:t.columnsPaymentDef.map((function(t){return Object(a.jsx)(O9,{width:t.width,hidden:t.hidden,align:t.type,children:t.cell(e)},t.id)}))},e.id)})):null}},{key:"renderPaymentType",value:function(e){switch(e){case"credit_card":return Object(a.jsx)(Xre,{tag:{name:"CREDIT CARD",color:_.blue1}});case"direct_deposit":return Object(a.jsx)(Xre,{tag:{name:"DIRECT DEPOSIT",color:_.gray4}});case"credit_note":return Object(a.jsx)(Xre,{tag:{name:"CREDIT NOTED",color:_.orange1}});default:return""}}},{key:"renderNoPayment",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsPaymentDef.length,"text-align":"left",children:"No payments made"})})}},{key:"render",value:function(){var e=this.props.invoicePayments.loading,t=this.props.invoicePayments.data,n=this.hasIvoices;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ire,{reportName:$re,toCsvFn:this.getCsvData,children:Object(a.jsx)(Wre,{onSubmit:this.filterReport})}),e?Object(a.jsx)(Nv,{size:40,color:_.white}):Object(a.jsxs)(Nre,{children:[Object(a.jsxs)(Ire,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:this.columnsPaymentDef.map((function(e){return Object(a.jsx)(S9,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})}),Object(a.jsx)("tbody",{children:n?this.renderReportRows():this.renderNodata()})]}),t&&t.pagination&&t.pagination.last_page>1&&Object(a.jsx)(oC,{pagination:t.pagination,onChange:this.handlePagination})]})]})}},{key:"hasIvoices",get:function(){var e=this.props.invoicePayments,t=e.ready,n=e.data;return!!(t&&n&&n.data&&n.data.length>0)}}]),n}(p.PureComponent),tae=Object(sg.compose)(Object(b.b)((function(e){return{invoicePayments:e.invoicePayments}})))(eae),nae=n(94),rae=n(310),aae=n.n(rae),oae=(n(974),n(975),n(1099)),iae=n(1106),cae=n(1096),sae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getPositions=function(){return e.props.slots.filter((function(e){var t,n,r=e.job_task;return(null===(t=r.job)||void 0===t?void 0:t.site_address_lat)&&(null===(n=r.job)||void 0===n?void 0:n.site_address_lng)})).map((function(e){var t=e.job_task;return[t.job.site_address_lat,t.job.site_address_lng]}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.color;return Object(a.jsx)(cae.a,{color:e,positions:this.getPositions()})}}]),n}(p.PureComponent),lae=n(1097),uae=n(83),dae=n.n(uae),pae=n(95),hae=n.n(pae);function bae(){var e=Object(f.a)(["\n  position: absolute;\n  top: 25%;\n  height: 100%;\n  width: 100%;\n  box-shadow: 0 0 0px 50px ",";\n  opacity: 0.25;\n  border-radius: 50%;\n"]);return bae=function(){return e},e}var fae=Object(y.default)(gv(["color"])("div"))(bae(),(function(e){return e.color||"black"})),mae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderIcon=function(){var t=e.props.color,n=40;return new dae.a.DivIcon({html:hae.a.renderToStaticMarkup(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(fae,{color:t}),Object(a.jsx)(z7,{size:n,style:{position:"relative"},color:t,name:Xf.PinMapFilled,fill:!0})]})),iconSize:[n,n],iconAnchor:[20,n],popupAnchor:[0,-40/1.2]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.position,n=e.children;return Object(a.jsx)(lae.a,{position:t,icon:this.renderIcon(),children:n})}}]),n}(h.a.PureComponent),jae=n(1098);function vae(){var e=Object(f.a)(["\n  margin-bottom: 10px;\n\n  :last-child {\n    margin-bottom: 0;\n  }\n"]);return vae=function(){return e},e}var Oae=y.default.div(vae()),gae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.tasks;e.location;return Object(a.jsx)(jae.a,{children:t.map((function(e,t){return Object(a.jsxs)(Oae,{children:[Object(a.jsxs)("strong",{children:[e.index+1," - ",e.task.name]}),Object(a.jsx)("br",{}),e.task.job.site_address&&Object(a.jsxs)(a.Fragment,{children:[e.task.job.site_address.full_address,Object(a.jsx)("br",{})]}),e.task.job.site_contact&&Object(a.jsxs)(a.Fragment,{children:[e.task.job.site_contact.first_name," ",e.task.job.site_contact.last_name,Object(a.jsx)("br",{})]}),"Job #",e.task.job.id,Object(a.jsx)("br",{}),"Schedule time:"," ",pm()(e.slot.starts_at).format(sv)," ","-"," ",pm()(e.slot.ends_at).format(sv)]},t)}))})}}]),n}(p.PureComponent),xae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).sortTasks=function(){var t=e.props.slots,n={};return t.forEach((function(e,t){var r,a,o=e.job_task,i=Object(rj.a)(e,["job_task"]);if((null===(r=o.job)||void 0===r?void 0:r.site_address_lat)&&(null===(a=o.job)||void 0===a?void 0:a.site_address_lng)){var c="".concat(o.job.site_address_lat,"-").concat(o.job.site_address_lng);n[c]?n[c].tasks.push({task:o,slot:i,index:t}):n[c]={lat:o.job.site_address_lat,lng:o.job.site_address_lng,tasks:[{task:o,slot:i,index:t}]}}})),Object.values(n)},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.color,n=e.location;return this.sortTasks().map((function(e,r){return Object(a.jsx)(mae,{position:[e.lat,e.lng],color:t,children:Object(a.jsx)(gae,{tasks:e.tasks,location:n})},"location-".concat(r))}))}}]),n}(p.PureComponent),yae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.run.assigned_slots,n=e.color,r=e.location;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(sae,{slots:t,color:n}),Object(a.jsx)(xae,{slots:t,color:n,location:r})]})}}]),n}(p.PureComponent);function _ae(){var e=Object(f.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  background: ",";\n"]);return _ae=function(){return e},e}function wae(){var e=Object(f.a)(["\n  overflow:auto;\n"]);return wae=function(){return e},e}function Sae(){var e=Object(f.a)(["\n  overflow:auto;\n"]);return Sae=function(){return e},e}var kae=y.default.div(Sae()),Cae=y.default.div(wae()),Nae=y.default.div(_ae(),_.red1),Eae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).runsColor={},e.center=[-34.397,150.644],e.generateRunsColor=function(){var t,n,r=e.props.runs;e.runsColor={},null===r||void 0===r||null===(t=(n=r.filter((function(e){return e.assigned_slots.length>0}))).forEach)||void 0===t||t.call(n,(function(t){e.runsColor[t.id]=gm()})),e.forceUpdate()},e.fitMapBounds=function(){var t=e.getAllMarkersFromRuns(e.props.runs);e.map&&(t.length>0?e.map.fitBounds(Object(uae.featureGroup)(e.getAllMarkersFromRuns(e.props.runs)).getBounds(),{padding:[100,100],maxZoom:17}):e.map.setView(e.center,4))},e.getAllMarkersFromRuns=function(e){var t=[];return e.forEach((function(e){e.assigned_slots.forEach((function(e){var n,r,a=e.job_task;(null===(n=a.job)||void 0===n?void 0:n.site_address_lat)&&(null===(r=a.job)||void 0===r?void 0:r.site_address_lng)&&(t.push(Object(uae.circleMarker)([a.job.site_address_lat,a.job.site_address_lng])),1===t.length&&t.push(Object(uae.circleMarker)([a.job.site_address_lat+1e-9,a.job.site_address_lng+1e-9])))}))})),t},e.map=void 0,e.renderRunsColor=function(t){var n=e.props,r=n.runs;if(n.loadingRuns)return null;var o=r.filter((function(e){return e.assigned_slots.length>0}));return o.length?o.map((function(n,r){return Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{children:Object(a.jsx)(z7,{size:15,style:{position:"relative"},color:e.runsColor[n.id],name:Xf.PinMapFilled,fill:!0})}),t&&Object(a.jsx)("div",{className:"col text-break",children:n.name})]})},r)})):Object(a.jsx)(a.Fragment,{children:"No run found"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.generateRunsColor(),this.fitMapBounds()}},{key:"componentDidUpdate",value:function(e){e.runs!==this.props.runs&&this.generateRunsColor(),this.fitMapBounds()}},{key:"render",value:function(){var e=this,t=this.props,n=t.runs,r=t.loadingRuns,o=t.location;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(kae,{className:"d-flex h-100 w-100",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/schedule",children:"Schedule"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/schedule/map",children:"Map View"}),t.has(vx.OPERATIONS_RUNS_MANAGE)&&Object(a.jsx)(nj,{width:250,children:Object(a.jsx)(S.Consumer,{children:function(t){return Object(a.jsx)("div",{className:"p-4",children:e.renderRunsColor(t.isOpen)})}})}),Object(a.jsx)(Cae,{className:"flex-grow-1 position-relative",children:Object(a.jsx)(Nae,{children:Object(a.jsxs)(oae.a,{center:e.center,maxZoom:17,zoom:4,whenCreated:function(t){e.map=t,e.fitMapBounds()},children:[Object(a.jsx)(iae.a,{url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:""}),!j.a.isEmpty(e.runsColor)&&n.map((function(t){return Object(a.jsx)(yae,{run:t,color:e.runsColor[t.id],location:o},"run-".concat(t.id))}))]})})}),r&&Object(a.jsx)(Nv,{color:_.white,size:40,zIndex:999})]})}})}}]),n}(p.PureComponent);function Aae(){var e=Object(f.a)(["\n  position: absolute;\n  right: 0px;\n  top: 0px;\n  padding-right: 15px;\n  display: flex;\n  align-items: center;\n  color: ",";\n  height: 0px;\n"]);return Aae=function(){return e},e}function Iae(){var e=Object(f.a)(["\n  height: ","px;\n  border-right: 1px solid ",";\n  position: relative;\n"]);return Iae=function(){return e},e}var Tae,Rae=Object(y.default)(gv(["height"])("div"))(Iae(),(function(e){return e.height}),_.gray2),Dae=y.default.div(Aae(),_.gray5),Mae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hours:[]},e.blockRenderer=function(t){var n=e.props,r=n.blockHeight,o=n.endHours;return Object(a.jsxs)(Rae,{height:r,children:[Object(a.jsx)(Dae,{children:pm()().hours(t).format("ha")}),t+1===o&&Object(a.jsx)(Dae,{style:{bottom:"0",top:"unset"},children:pm()().hours(o).format("ha")})]},t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.startHours,n=e.endHours,r=[],a=t;a<n;a++)r.push(a);this.setState({hours:r})}},{key:"render",value:function(){var e=this;return Object(a.jsx)("div",{className:"w-100",children:this.state.hours.map((function(t){return e.blockRenderer(t)}))})}}]),n}(p.PureComponent);!function(e){e.TASK="task",e.RUN="run",e.RUN_HEAD="run_head",e.CREW="crew",e.VEHICLE="vehicle"}(Tae||(Tae={}));function Lae(){var e=Object(f.a)(["\n  width: calc(100% - 5px);\n  min-height: 100%;\n  margin-left: 5px;\n  background: ",";\n  box-shadow:"," ;\n"]);return Lae=function(){return e},e}function Pae(){var e=Object(f.a)(["\n  position: absolute;\n  right: 0px;\n  top: 5px;\n  z-index: 5;\n  cursor: pointer;\n"]);return Pae=function(){return e},e}function Fae(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n  height: 100%;\n  background: ",";\n  opacity: ",";\n"]);return Fae=function(){return e},e}function Uae(){var e=Object(f.a)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  width: ","px;\n  color: ",";\n  box-shadow: 4px 0 0 "," inset;\n  height: ","px;\n  font-size: 0.72em;\n  ","\n"]);return Uae=function(){return e},e}var Bae=y.default.div(Uae(),(function(e){return e.top}),(function(e){return e.isHovered?0:e.left}),(function(e){return e.isHovered?Zoe.blockWidth-15:e.width}),(function(e){return e.color}),(function(e){return e.color}),(function(e){return e.height||0}),(function(e){return e.isHovered&&"z-index: 100;"})),Vae=Object(y.default)(gv(["color"])("div"))(Fae(),(function(e){return e.color}),(function(e){return e.isHovered?.5:.1})),Jae=y.default.div(Pae()),qae=mC.ColoredDiv,zae=Object(y.default)(gv(["showWhite"])(qae))(Lae(),(function(e){return e.showWhite?"".concat(_.white):"transparent"}),(function(e){return e.isHovered?"0px 1px 3px ".concat(e.color):"0px 0px 2px ".concat(e.color)})),Gae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={top:0,left:0,width:Zoe.blockWidth-15,height:0,isHovered:!!e.props.selected,showModal:!1,isVeryShort:!1},e.calculateTaskState=function(){var t=e.props,n=t.slot,r=t.startHours,a=t.endHours,o=t.count,i=t.position,c=t.overlap,s=t.overlappingCount,l=pm()(n.starts_at),u=pm()(n.ends_at),d=pm()().hours(r).minutes(0).unix(),p=pm()().hours(a).minutes(0).unix()-d,h=pm()().hours(l.hours()).minutes(l.minutes()).unix(),b=pm()().hours(u.hours()).minutes(u.minutes()).unix(),f=(h-d)*((a-r)*Zoe.blockHeight)/p,m=(b-h)*((a-r)*Zoe.blockHeight)/p,j=s>0?(Zoe.blockWidth-15)/s*c:0;e.setState({top:f,left:(Zoe.blockWidth-15-j)/o*(i-1)+j,width:(Zoe.blockWidth-15-j)/o,height:m})},e.setIsHoveredTimer=null,e.removeTaskFromRun=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.task,o=n.slot,i=n.dispatch,n.loadRuns,c=n.run,t.next=3,i(iw("Confirm","Remove Task From Run",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove task ",Object(a.jsx)("strong",{children:r.type.name})," from run ",Object(a.jsx)("strong",{children:c.name}),"?"]})));case 3:if(!t.sent){t.next=8;break}return t.next=7,iq.removeTaskSlotFromRun(c.id,r.id,o.id);case 7:Gy.emit(Ix.TaskWasRemovedFromRun);case 8:case"end":return t.stop()}}),t)}))),e.menuItems=function(t){return[{name:"Edit",onClick:function(){var t=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.setShowModal=!0);case 1:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()},{type:"divider",disabled:t.has(vx.OPERATIONS_RUNS_MANAGE)},{name:"Remove",onClick:e.removeTaskFromRun,disabled:!t.has(vx.OPERATIONS_RUNS_MANAGE)}]},e.onSave=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.task,o=r.slot,i=r.loadRuns,c=r.run,r.location,!n){t.next=19;break}if(t.prev=2,s={is_confirmed:!!n.is_confirmed,scheduling_note:n.scheduling_note,starts_at:fv(n.starts_at,!0),ends_at:fv(n.ends_at,!0)},!o){t.next=9;break}return t.next=7,iq.updateTaskSlotToRun(c.id,o.id,s);case 7:t.next=11;break;case 9:return t.next=11,iq.addTaskSlotToRun(c.id,a.id,s);case 11:i(),t.next=17;break;case 14:throw t.prev=14,t.t0=t.catch(2),!1;case 17:t.next=20;break;case 19:throw!1;case 20:case"end":return t.stop()}}),t,null,[[2,14]])})));return function(e){return t.apply(this,arguments)}}(),e.refOuter=p.createRef(),e.refInner=p.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.calculateTaskState()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.slot,r=t.count,a=t.position,o=t.overlap;(e&&n.starts_at!==e.slot.starts_at||n.ends_at!==e.slot.ends_at||r!==e.count||a!==e.position||o!==e.overlap)&&this.calculateTaskState(),this.refInner.current&&this.refOuter.current&&this.setState({isVeryShort:this.refInner.current.clientHeight>this.refOuter.current.clientHeight})}},{key:"render",value:function(){var e=this,t=this.props,n=t.task,r=t.slot,o=t.run,i=(t.location,t.count),c=t.overlap,s=this.state,l=s.top,u=s.left,d=s.isHovered,p=s.width,h=s.height,b=s.showModal,f=(s.isVeryShort,n.type.color?_m(n.type.color):_.gray5),m=(r.assigned_teams||[]).map((function(e){return e.name})).concat(r.assigned_users.map((function(e){return e.full_name})));return Object(a.jsx)(Cx.Consumer,{children:function(t){t.has(vx.OPERATIONS_RUNS_MANAGE)&&t.has(vx.JOBS_TASKS_MANAGE);return Object(a.jsxs)(a.Fragment,{children:[b&&Object(a.jsx)(mz,{edit:!0,locationId:o.location_id,taskTypes:[n.type],onSave:e.onSave,isOpen:b,task:sz(n),isSchedulingActive:!0,doAssign:!0,doSave:!0,assignStaffDate:o.date,onClose:function(){return e.setShowModal=!1},addTaskToRunConfig:{runId:o.id,date:pm()(o.date),task:n,assigned_slot:r}}),Object(a.jsxs)(Bae,{ref:e.refOuter,isHovered:d,top:l,left:u,width:p,height:h,color:f,onMouseOver:i>1||c>0?void 0:function(){return e.setIsHovered=!0},onMouseLeave:function(){return e.setIsHovered=!1},onClick:1===i&&0===c?void 0:function(){return e.setIsHovered=!e.state.isHovered},children:[d&&Object(a.jsx)(Jae,{children:Object(a.jsx)(nw,{noMargin:!0,trigger:function(){return Object(a.jsx)(z7,{color:f,name:Xf.MenuVertical,size:18})},items:e.menuItems(t)})}),Object(a.jsxs)(zae,{className:"".concat(d?"h-auto":"h-100"),showWhite:!0,isHovered:d,color:f,overflow:"hidden",children:[Object(a.jsx)(Vae,{color:f}),Object(a.jsxs)(qae,{padding:"5px",className:"zindex-dropdown",ref:e.refInner,children:[Object(a.jsxs)(qae,{weight:lm.bold,children:[pm()(r.starts_at).format("hh:mma")," ","-"," ",pm()(r.ends_at).format("hh:mma")]}),Object(a.jsxs)("div",{className:"text-truncate",children:[Object(a.jsx)("span",{className:"mr-1",children:"Attendance:"}),r.is_confirmed?Object(a.jsx)(z7,{name:Xf.TickCircle,size:14,color:"green",fill:!0,title:"Confirmed"}):Object(a.jsx)(z7,{name:Xf.CrossCircle,size:14,color:"red",fill:!0,title:"Not confirmed"})]}),n.job&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:["#",n.job.id]}),n.job.site_address&&n.job.site_address.full_address&&Object(a.jsx)("div",{children:n.job.site_address.full_address})]}),Object(a.jsx)("div",{children:n.name||n.type.name}),m.length>0&&Object(a.jsxs)(qae,{margin:"7px 0 0 0",className:"d-flex",children:[Object(a.jsx)(qae,{margin:"0 5px 0 0",className:"flex-shrink-0",children:Object(a.jsx)(z7,{color:f,name:Xf.People,size:12})}),Object(a.jsx)("div",{className:"flex-grow-1",children:m.join(", ")})]}),r.scheduling_note&&Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"mt-1",children:Object(a.jsx)("strong",{children:"Crew Notes:"})}),Object(a.jsx)("div",{children:r.scheduling_note})]})]})]})]})]})}})}},{key:"setIsHovered",set:function(e){var t,n,r=this;(clearTimeout(this.setIsHoveredTimer),e&&this.props.count>1)?this.setIsHoveredTimer=setTimeout((function(){var t,n;r.setState({isHovered:e}),null===(t=(n=r.props).onSelect)||void 0===t||t.call(n,e)}),0):(this.setState({isHovered:e}),null===(t=(n=this.props).onSelect)||void 0===t||t.call(n,e))}},{key:"setShowModal",set:function(e){this.setState({showModal:e})}}]),n}(p.PureComponent),Wae=Object(sg.compose)(Object(b.b)())(Gae),Hae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props.connectDragSource;return Object(a.jsx)(Cx.Consumer,{children:function(n){return n.has(vx.OPERATIONS_RUNS_MANAGE)?t(Object(a.jsx)("div",{className:"scheduled-task-drag-wrapper",children:Object(a.jsx)(Wae,Object(c.a)({},e.props))})):Object(a.jsx)("div",{className:"scheduled-task-drag-wrapper",children:Object(a.jsx)(Wae,Object(c.a)({},e.props))})}})}}]),n}(p.PureComponent),Yae={canDrag:function(e){return!!e.selected},beginDrag:function(e){var t=e.task,n=e.slot;return Object(c.a)(Object(c.a)({},t),{},{assigned_slot:n})}},Qae=Object(nae.DragSource)(Tae.TASK,Yae,(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Hae),Kae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selected:!1},e.onSelect=function(t){e.setState({selected:t})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.slot,t=this.state.selected,n=e.job_task,r=Object(rj.a)(e,["job_task"]);return Object(a.jsx)(Qae,Object(c.a)(Object(c.a)({},this.props),{},{task:n,slot:r,selected:t,onSelect:this.onSelect}),e.id)}}]),n}(p.PureComponent);function Zae(){var e=Object(f.a)(["\n  background: ",";\n  width: 100%;\n  height: 100%;\n"]);return Zae=function(){return e},e}var Xae=Object(y.default)(gv(["dragEntered"])("div"))(Zae(),(function(e){return e.dragEntered?_.blue0:"transparent"})),$ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOver;return(0,e.connectDropTarget)(Object(a.jsx)("div",{className:"w-100 h-100",children:Object(a.jsx)(Xae,{dragEntered:t})}))}}]),n}(p.PureComponent),eoe={drop:function(e,t){var n=e.openModal,r=e.run,a=e.hour,o=t.getItem(),i=o.assigned_slot,s=Object(rj.a)(o,["assigned_slot"]);return n({runId:r.id,task:Object(c.a)({},s),assigned_slot:i,startHour:a,date:pm()(r.date)}),s}},toe=Object(nae.DropTarget)(Tae.TASK,eoe,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}}))($ae);function noe(){var e=Object(f.a)(["\n  height: ","px;\n  width: ","px;\n  border-bottom: 1px solid ",";\n\n  &:last-child {\n    border-bottom: 0;\n  }\n"]);return noe=function(){return e},e}function roe(){var e=Object(f.a)(["\n  width: ","px;\n  border-right: 1px solid ",";\n  position: relative;\n  box-sizing: unset;\n  border-bottom: 1px solid ",";\n\n  &:last-child {\n    border-right: 1px solid ",";\n  }\n"]);return roe=function(){return e},e}var aoe=Object(y.default)(gv(["width"])("div"))(roe(),(function(e){return e.width}),_.gray1,_.gray2,_.gray2),ooe=Object(y.default)(gv(["height","width"])("div"))(noe(),(function(e){return e.height}),(function(e){return e.width}),_.gray1),ioe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hours:[],dragEntered:!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){for(var e=this.props,t=e.startHours,n=e.endHours,r=[],a=t;a<n;a++)r.push(a);this.setState({hours:r})}},{key:"render",value:function(){var e=this.props,t=e.blockHeight,n=e.blockWidth,r=e.newRun,o=e.run,i=e.openModal,c=e.loadRuns,s=e.location,l=e.startHours,u=e.endHours,d=this.state.hours,p=(j.a.groupBy(null===o||void 0===o?void 0:o.assigned_slots,(function(e){return pm()(e.starts_at).format("H")})),j.a.reduce(null===o||void 0===o?void 0:o.assigned_slots,(function(e,t){var n=Number(pm()(t.starts_at).format("H")),r=Number(pm()(t.ends_at).format("H")),a=Number(pm()(t.ends_at).format("mm"));e[n]||(e[n]={value:0,count:0,overlap:0,overlappingCount:0,nodes:[]}),++e[n].value,++e[n].count;for(var o=n+1;o<=r;o++)(o<r||a>0)&&e[n].nodes.push(o);return e}),{}));j.a.forEach(p,(function(e,t){j.a.forEach(e.nodes,(function(t){p[t]&&(e.count<p[t].value+e.value&&(e.count=p[t].value+e.value),p[t].overlappingCount<e.count&&(p[t].overlappingCount=e.count),p[t].overlap+=1,p[t].overlap,e.value)}))}));var h={};return Object(a.jsx)(Cx.Consumer,{children:function(e){var b,f;return Object(a.jsxs)(aoe,{width:n,children:[(null===o||void 0===o?void 0:o.assigned_slots)?null===(b=o.assigned_slots)||void 0===b||null===(f=b.sort((function(e,t){var n=pm()(e.ends_at).diff(pm()(e.starts_at)),r=pm()(t.ends_at).diff(pm()(t.starts_at));return n>r?-1:n<r?1:0})))||void 0===f?void 0:f.map((function(e){var t=pm()(e.starts_at).format("H");return h[t]||(h[t]=0),++h[t],Object(a.jsx)(Kae,{slot:e,run:o,count:p[t].count,position:h[t],overlap:p[t].overlap||0,overlappingCount:p[t].overlappingCount||0,loadRuns:c,location:s,startHours:l,endHours:u},e.id)})):null,d.map((function(e){return Object(a.jsx)(ooe,{height:t,width:n,children:!r&&Object(a.jsx)(toe,{openModal:i,run:o,hour:e})},e)}))]})}})}}]),n}(p.PureComponent),coe="RunSettingsDetailsForm",soe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(a.jsx)("form",{autoComplete:"off",onSubmit:e,children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"name",label:"Run Name",validate:Dv,component:yg})})})})}}]),n}(p.PureComponent),loe=Object(jv.a)({form:coe,enableReinitialize:!0})(soe);function uoe(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return uoe=function(){return e},e}var doe=y.default.div(uoe()),poe="RunSettingsStaffForm",hoe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",selectedUsers:[]},e.debouncedSearch=Object(m.debounce)(e.props.searchStaff.fetch,500),e.onSearchValueChange=function(t){var n=e.props.run;e.setState({search:t}),t?e.debouncedSearch({location_id:n.location_id,name:t,date:n.date}):e.debouncedSearch.cancel()},e.isUserSelected=function(t){return e.state.selectedUsers.map((function(e){return e.id})).includes(t)},e.onUserClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!e.isUserSelected(n.id)){t.next=8;break}return t.next=4,r(iw("Confirm","Remove User",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",Object(a.jsx)("strong",{children:n.full_name})," from this run?"]})));case 4:t.sent&&e.setState({selectedUsers:e.state.selectedUsers.filter((function(e){return e.id!==n.id}))}),t.next=9;break;case 8:e.setState({selectedUsers:e.state.selectedUsers.concat(n)});case 9:setTimeout((function(){return e.props.change("selectedUsers",e.state.selectedUsers)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderAssignee=function(t,n){return Object(a.jsx)(Eq,{onClick:function(){return e.onUserClick(t)},selected:e.isUserSelected(t.id),assignee:t,context:n,children:!!t.working_hours_per_week&&t.date_hours>=t.working_hours_per_week/5&&"Booked"},"".concat(t.id,"-user"))},e.getOrderedAssignedStaff=function(){var t=e.state.selectedUsers;return Object(m.orderBy)(t,[function(e){return mm(e).name}],["asc"])},e.getOrderedSearchStaff=function(){var t=e.props.searchStaff.data;return Object(m.orderBy)(t||[],[function(e){return mm(e).name}],["asc"])},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.run,n=e.change;this.setState({selectedUsers:t.assigned_users||[]}),n("selectedUsers",t.assigned_users||[])}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.searchStaff,o=this.state.search;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("form",{autoComplete:"off",onSubmit:n,children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(aC,{loading:r.loading,placeholder:"Search...",searchIcon:!0,mode:"typeGray",onSearchValueChange:e.onSearchValueChange})})}),Object(a.jsxs)(doe,{children:[!o&&e.getOrderedAssignedStaff().map((function(n){return e.renderAssignee(n,t)})),o&&e.getOrderedSearchStaff().map((function(n){return e.renderAssignee(n,t)}))]})]})}})}}]),n}(p.PureComponent),boe=Object(sg.compose)(Object(jv.a)({form:poe,enableReinitialize:!0}),oj({searchStaff:{fetch:Kq.searchStaff}}))(hoe);function foe(){var e=Object(f.a)(["\n  margin: 0 5px 0 15px;\n  cursor: pointer;\n"]);return foe=function(){return e},e}function moe(){var e=Object(f.a)(["\n  min-height: 60px;\n  position: relative;\n"]);return moe=function(){return e},e}var joe=y.default.div(moe()),voe=Object(y.default)(cm)(foe()),Ooe="RunSettingsVehiclesForm",goe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",selectedVehicles:[]},e.isVehicleSelected=function(t){return e.state.selectedVehicles.map((function(e){return e.id})).includes(t)},e.onVehicleClick=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!e.isVehicleSelected(n.id)){t.next=8;break}return t.next=4,r(iw("Confirm","Remove Vehicle",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove ",Object(a.jsx)("strong",{children:n.registration})," from this run?"]})));case 4:t.sent&&(n.is_booked=!1,e.setState({selectedVehicles:e.state.selectedVehicles.filter((function(e){return e.id!==n.id}))})),t.next=9;break;case 8:e.setState({selectedVehicles:e.state.selectedVehicles.concat(n)});case 9:setTimeout((function(){return e.props.change("selectedVehicles",e.state.selectedVehicles)}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderVehicle=function(t){var n=e.isVehicleSelected(t.id);return Object(a.jsxs)(Nq,{selected:n,children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(hC,{weight:lm.bold,children:t.registration}),Object(a.jsxs)(hC,{color:_.gray4,margin:"0 10px",children:[t.make," ",t.model]}),t.rent_starts_at&&Object(a.jsx)(rN,{tag:{name:"RENTAL",color:_.purple1},mode:"outlined"})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(hC,{color:_.gray5,textTransform:"uppercase",lineHeight:"20px",children:t.type}),!n&&t.is_booked?Object(a.jsx)("span",{className:"badge badge-info ml-2",children:"Booked"}):Object(a.jsx)(voe,{name:n?Xf.Trash:Xf.Add,onClick:function(){return e.onVehicleClick(t)}})]})]},"".concat(t.id,"-vehicle"))},e.getOrderedVehicles=function(){var t=e.props.locationVehicles.data;return j.a.orderBy(j.a.filter(t||[],(function(e){var t,n;return!(null===e||void 0===e||null===(t=e.latest_status)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.makes_vehicle_unavailable)})),["registration"],["asc"])},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.run,n=e.date,r=e.change,a=e.locationVehicles,o=e.vehicles,i=j.a.filter(t.assigned_vehicles||[],(function(e){var t,n;return!(null===e||void 0===e||null===(t=e.latest_status)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.makes_vehicle_unavailable)}));this.setState({selectedVehicles:i}),r("selectedVehicles",i),o?a.data=o:a.fetch(t.location_id,bv(n))}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.locationVehicles,o=this.getOrderedVehicles();return Object(a.jsx)("form",{autoComplete:"off",onSubmit:n,children:Object(a.jsxs)(joe,{children:[r.loading&&Object(a.jsx)(Nv,{size:40,color:_.white}),o.length>0?o.map((function(t){return e.renderVehicle(t)})):"No available vehicles"]})})}}]),n}(p.PureComponent),xoe=Object(sg.compose)(Object(jv.a)({form:Ooe,enableReinitialize:!0}),oj({locationVehicles:{fetch:Z4.searchVehicles}}))(goe),yoe="RunCloneForm",_oe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t=e.props,n=t.change,r=t.run;n("run",r),n("starts_at",pm()(r.date).add(1,"day")),n("ends_at",pm()(r.date).add(1,"day"))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(a.jsx)("form",{autoComplete:"off",onSubmit:e,children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"starts_at",label:"From Date *",validate:Dv,component:s_,futureEnabled:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"ends_at",label:"To Date",validate:Dv,component:s_,futureEnabled:!0})})]})})}}]),n}(p.PureComponent),woe=Tv({},(function(e,t){return e.starts_at&&e.ends_at&&e.ends_at<e.starts_at&&(t.ends_at="To date cannot be before from date"),t})),Soe=Object(jv.a)({form:yoe,validate:woe})(_oe),koe=function(e){return{starts_at:fv(e.starts_at),ends_at:e.ends_at?fv(e.ends_at):void 0,run_id:e.run.id}};function Coe(){var e=Object(f.a)(["\n  padding: 0 ","px;\n  height: 60px;\n  margin: -30px -","px 30px;\n  border-bottom: 1px solid ",";\n  display: flex;\n"]);return Coe=function(){return e},e}var Noe,Eoe=y.default.div(Coe(),zO,zO,_.gray2);!function(e){e[e.Details=0]="Details",e[e.Staff=1]="Staff",e[e.Vehicles=2]="Vehicles"}(Noe||(Noe={}));var Aoe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,activeTabId:e.props.startOpenTabId||Noe.Details,detailsValues:{},staffValues:{},vehiclesValues:{},cloneValues:{},clone:!1},e.tabs=[{name:"Details",id:Noe.Details,onClick:function(){return e.setState({activeTabId:Noe.Details})}},{name:"Staff",id:Noe.Staff,onClick:function(){return e.setState({activeTabId:Noe.Staff})}},{name:"Vehicles",id:Noe.Vehicles,onClick:function(){return e.setState({activeTabId:Noe.Vehicles})}}],e.onCloneSubmit=function(t){e.setState({cloneValues:koe(t)})},e.onDetailsSubmit=function(t){e.setState({detailsValues:t})},e.onStaffSubmit=function(t){e.setState({staffValues:t})},e.onVehiclesSubmit=function(t){e.setState({vehiclesValues:t})},e.removeRun=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.run,o=n.dispatch,i=n.afterSubmit,c=n.onClose,!r){t.next=20;break}if(!(r.id<1)){t.next=7;break}Gy.emit(Ix.EmptyRunRemoved,r),c(),t.next=20;break;case 7:return t.next=9,o(iw("Confirm","Delete Run!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete run ",Object(a.jsx)("strong",{children:r.name}),"?"]})));case 9:if(!t.sent){t.next=20;break}return e.setState({loading:!0}),t.prev=12,t.next=15,Kq.removeRun(r.id);case 15:null===i||void 0===i||i(),setTimeout((function(){c()}));case 17:return t.prev=17,e.setState({loading:!1}),t.finish(17);case 20:case"end":return t.stop()}}),t,null,[[12,,17,20]])}))),e.cloneRun=function(){e.setState({clone:!0})},e.saveClone=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,o=n.run,e.setState({loading:!0}),t.prev=2,t.next=5,r(Object(Wv.c)(yoe));case 5:if(!e.props.validCloneDetails){t.next=27;break}return i=!1,t.prev=7,t.next=10,Kq.cloneRun(o.id,e.state.cloneValues,{check_unique_run:1});case 10:Oj(uj.Info,Object(a.jsxs)(a.Fragment,{children:["Run ",Object(a.jsx)("strong",{children:o.name})," has been cloned"]})),i=!0,t.next=25;break;case 14:if(t.prev=14,t.t0=t.catch(7),405!==(null===t.t0||void 0===t.t0?void 0:t.t0.status_code)){t.next=25;break}return t.next=19,r(iw("Confirm","Clone Run!",Object(a.jsx)(a.Fragment,{children:"The same run already exists in specified date range. Do you want to proceed?"})));case 19:if(!t.sent){t.next=25;break}return t.next=23,Kq.cloneRun(o.id,e.state.cloneValues);case 23:Oj(uj.Info,Object(a.jsxs)(a.Fragment,{children:["Run ",Object(a.jsx)("strong",{children:o.name})," has been cloned"]})),i=!0;case 25:i&&Gy.emit(Ix.TaskWasAddedToRun),e.setState({clone:!1});case 27:return t.prev=27,e.setState({loading:!1}),t.finish(27);case 30:case"end":return t.stop()}}),t,null,[[2,,27,30],[7,14]])}))),e.onClose=function(t){if(e.state.clone)e.setState({clone:!1});else{var n=e.props.run;0===n.id&&Gy.emit(Ix.EmptyRunRemoved,n),e.props.onClose()}},e.renderBody=function(){var t=e.props,n=t.run,r=t.date,o=e.state,i=o.activeTabId;return o.clone?Object(a.jsx)(Soe,{run:n,onSubmit:e.onCloneSubmit}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Eoe,{children:Object(a.jsx)(iz,{selectedTabId:i,items:e.tabs})}),Object(a.jsxs)("div",{style:{display:i===Noe.Details?"block":"none"},children:[Object(a.jsx)(loe,{onSubmit:e.onDetailsSubmit,initialValues:{name:n.name}}),n.id>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"d-inline-block",children:Object(a.jsx)(hC,{children:Object(a.jsx)(dC,{color:_.red1,colorOnHover:_.red1,onClick:e.removeRun,children:"Delete Run"})})}),Object(a.jsx)("div",{className:"d-inline-block ml-5",children:Object(a.jsx)(hC,{margin:"10px 0 0 0",children:Object(a.jsx)(dC,{color:_.blue1,colorOnHover:_.blue1,onClick:e.cloneRun,children:"Clone Run"})})})]})]}),Object(a.jsx)("div",{style:{display:i===Noe.Staff?"block":"none"},children:Object(a.jsx)(boe,{onSubmit:e.onStaffSubmit,run:n})}),Object(a.jsx)("div",{style:{display:i===Noe.Vehicles?"block":"none"},children:Object(a.jsx)(xoe,{run:n,date:r,onSubmit:e.onVehiclesSubmit})})]})},e.submitCombine=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,a=n.onClose,o=n.run,i=n.afterSubmit,e.setState({loading:!0}),t.next=4,r(Object(Wv.c)(coe));case 4:return t.next=6,r(Object(Wv.c)(poe));case 6:return t.next=8,r(Object(Wv.c)(Ooe));case 8:s=e.state,l=s.detailsValues,u=s.staffValues,d=s.vehiclesValues,Gy.emit(Ix.CreateRunsFromTemplate,o.id>0?Object(c.a)({},o):Object(c.a)(Object(c.a)({},o),{},{name:l.name})),p=Gy.listen(Ix.RunsCreatedFromTemplate,function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(p.stopListening(),t.prev=1,!n){t.next=8;break}return e.props.run.id=n.id,t.next=6,Promise.all([n.name!==l.name?Kq.updateRun(n.id,l):Promise.resolve(n),e.onAssignUsers(u),e.onAssignVehicles(d)]);case 6:i&&i(),a();case 8:return t.prev=8,e.setState({loading:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])})));return function(e){return t.apply(this,arguments)}}());case 11:case"end":return t.stop()}}),t)}))),e.onAssignUsers=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,o=r.run,r.dispatch,i=(o.assigned_users||[]).map((function(e){return e.id})),c=(n.selectedUsers||[]).map((function(e){return e.id})),s=Object(m.intersection)(i,c),l=Object(m.difference)(c,s),u=Object(m.difference)(i,s),d=[],t.next=9,Promise.all(l.map((function(e){return Kq.assignStaffToRun(o.id,e,{assign_user:1}).catch((function(t){405===t.status_code&&d.push(n.selectedUsers.find((function(t){return t.id===e})))}))})));case 9:return t.next=11,Promise.all(u.map((function(e){return Kq.removeStaffFromRun(o.id,e)})));case 11:if(!d.length){t.next=18;break}return t.next=14,e.props.dispatch(iw("Confirm","Assign Staff to Run",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:[1===d.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:d[0].full_name})," is"]}):Object(a.jsx)(a.Fragment,{children:"Following staff members are"})," already assigned to another run."]}),d.length>1&&Object(a.jsx)("p",{children:d.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:e.user.full_name})})}))}),Object(a.jsx)("p",{children:"Are you sure you want to assign them to this run?"})]})));case 14:if(!t.sent){t.next=18;break}return t.next=18,Promise.all(d.map((function(e){return Kq.assignStaffToRun(o.id,e.id)})));case 18:Gy.emit(Ix.StaffAssignedToTask);case 19:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onAssignVehicles=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.run,a=(r.assigned_vehicles||[]).map((function(e){return e.id})),o=(n.selectedVehicles||[]).map((function(e){return e.id})),i=Object(m.intersection)(a,o),c=Object(m.difference)(o,i),s=Object(m.difference)(a,i),t.next=8,Promise.all([Promise.all(c.map((function(e){return Kq.assignVehicleToRun(r.id,e)}))),Promise.all(s.map((function(e){return Kq.removeVehicleFromRun(r.id,e)})))]);case 8:Gy.emit(Ix.VehicleAssignedToTask);case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderFooter=function(){var t=e.props.validFormDetails,n=e.state.clone,r=!n&&!t;return Object(a.jsx)(Xg,{className:"btn",disabled:r,onClick:n?e.saveClone:e.submitCombine,children:"Save"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.run,o=this.state,i=o.loading,c=o.clone;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:this.onClose,loading:i,title:c?"Clone Run ("+r.name+")":n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Ioe=Object(sg.compose)(Object(b.b)((function(e){return{validFormDetails:Object(FI.a)(coe)(e),validCloneDetails:Object(FI.a)(yoe)(e)}})))(Aoe);function Toe(){var e=Object(f.a)(["\n  position: absolute;\n  bottom: 7px;\n  right: 7px;\n  background: ",";\n"]);return Toe=function(){return e},e}function Roe(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return Roe=function(){return e},e}function Doe(){var e=Object(f.a)(["\n  position: absolute;\n  bottom: 5px;\n  left: 7px;\n  opacity: ","\n"]);return Doe=function(){return e},e}function Moe(){var e=Object(f.a)(["\n  width: ","px;\n  min-width: ","px;\n  height: 100%;\n  border-bottom: 1px solid ",";\n  position: relative;\n  box-sizing: unset;\n  padding-left: 1px;\n  background: ",";\n"]);return Moe=function(){return e},e}var Loe=Object(y.default)(gv(["width","dragEntered"])("div"))(Moe(),(function(e){return e.width}),(function(e){return e.width}),_.gray2,(function(e){return e.dragEntered?_.blue0:"transparent"})),Poe=y.default.div(Doe(),(function(e){return!e.run||e.run.id>0?1:.3})),Foe=y.default.div(Roe(),lm.bold),Uoe=y.default.div(Toe(),_.white),Boe=mC.Link,Voe=mC.ColoredDiv,Joe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isHovered:!1,showModal:!1,loading:!1,startOpenTabId:void 0},e.openModal=function(t){e.setState({showModal:!0,startOpenTabId:t})},e.closeModal=function(){e.setState({showModal:!1,startOpenTabId:void 0})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){um.a.rebuild(),this.props.run&&this.props.run===n.newRun&&this.openModal()}},{key:"componentDidUpdate",value:function(){um.a.rebuild()}},{key:"render",value:function(){var e=this,t=this.props,r=t.blockWidth,o=t.newRun,i=t.createNewRun,c=t.run,s=t.connectDropTarget,l=t.isOver,u=t.loadRuns,d=t.date,p=this.state,h=p.isHovered,b=p.showModal,f=p.loading,m=p.startOpenTabId,v=c?c.assigned_users:[],O=c?j.a.filter(c.assigned_vehicles,(function(e){var t,n;return!(null===e||void 0===e||null===(t=e.latest_status)||void 0===t||null===(n=t.type)||void 0===n?void 0:n.makes_vehicle_unavailable)})):[],g=v.map((function(e){return mm(e)})),x=g.filter((function(e,t){return t>1})),y=O.map((function(e){return e.registration})),w=y.filter((function(e,t){return t>0}));return Object(a.jsx)(Cx.Consumer,{children:function(t){var p=t.has(vx.OPERATIONS_RUNS_MANAGE);return s(Object(a.jsxs)("div",{className:"h-100 position-relative",children:[f&&Object(a.jsx)(Nv,{size:30,color:_.white}),c&&b&&Object(a.jsx)(Ioe,{afterSubmit:u,isOpen:b,startOpenTabId:m,onClose:e.closeModal,run:c,date:d,title:"Run Settings (".concat(c.name,")")}),Object(a.jsxs)(Loe,{width:r,dragEntered:l&&!o,onMouseOver:function(){return e.setIsHovered=!0},onMouseLeave:function(){return e.setIsHovered=!1},children:[p&&h&&!o&&Object(a.jsx)(Uoe,{children:Object(a.jsx)(Voe,{margin:"5px 0 0 0",style:{cursor:"pointer"},children:Object(a.jsx)(z7,{color:_.gray4,name:Xf.CogWheel,size:16,hoverColor:_.blue4,onClick:function(){return e.openModal()}})})}),Object(a.jsxs)(Poe,{run:c,children:[c&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Foe,{children:c.name}),v.length>0||O.length>0?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Voe,{color:_.gray4,children:Object(a.jsxs)("div",{style:{width:"fit-content"},"data-tip":hae.a.renderToStaticMarkup(Object(a.jsx)(a.Fragment,{children:y.map((function(e,t){return Object(a.jsx)("div",{children:e},t)}))})),"data-for":aie,children:[y.filter((function(e,t){return t<1})).join(", "),w.length>0&&" + ".concat(w.length)]})}),Object(a.jsx)(Voe,{color:_.gray4,children:Object(a.jsxs)("div",{style:{width:"fit-content"},"data-tip":hae.a.renderToStaticMarkup(Object(a.jsx)(a.Fragment,{children:g.map((function(e,t){return Object(a.jsx)("div",{children:e.name},t)}))})),"data-for":aie,children:[g.filter((function(e,t){return t<2})).map((function(e){return e.initials})).join(", "),x.length>0&&" + ".concat(x.length)]})})]}):p&&Object(a.jsxs)(Voe,{color:_.blue4,className:"d-flex align-items-center",children:["Add\xa0",Object(a.jsx)(Boe,{fontSize:sm.normal,onClick:function(){return e.openModal(Noe.Staff)},children:"crew"}),"\xa0/\xa0",Object(a.jsx)(Boe,{fontSize:sm.normal,onClick:function(){return e.openModal(Noe.Vehicles)},children:"vehicle"})]})]}),p&&o&&Object(a.jsx)(Boe,{fontSize:sm.normal,onClick:Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!i){e.next=4;break}return e.next=3,i();case 3:n.newRun=e.sent;case 4:case"end":return e.stop()}}),e)}))),children:"Add run"})]})]})]}))}})}},{key:"setIsHovered",set:function(e){this.setState({isHovered:e})}}]),n}(p.PureComponent);Joe.newRun=null;var qoe={canDrop:function(e){return!e.newRun},drop:function(e,t,n){var r=e.run,a=e.loadRuns,o={item:t.getItem(),type:t.getItemType()};return function(){var e=Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:n.setState({loading:!0}),Gy.emit(Ix.CreateRunsFromTemplate,r),t=Gy.listen(Ix.RunsCreatedFromTemplate,function(){var e=Object(lj.a)(sj.a.mark((function e(r){var i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t.stopListening(),e.prev=1,!r){e.next=17;break}e.t0=o.type,e.next=e.t0===Tae.CREW?6:e.t0===Tae.VEHICLE?12:16;break;case 6:return i=o.item,e.next=9,Kq.assignStaffToRun(r.id,i.id);case 9:return i.working_hours_per_week&&i.date_hours>=i.working_hours_per_week/5&&Oj(uj.Warning,"".concat(mm(i).name," is already booked")),Gy.emit(Ix.StaffAssignedToTask),e.abrupt("break",16);case 12:return e.next=14,Kq.assignVehicleToRun(r.id,o.item.id);case 14:return Gy.emit(Ix.VehicleAssignedToTask),e.abrupt("break",16);case 16:a();case 17:return e.prev=17,n.setState({loading:!1}),e.finish(17);case 20:case"end":return e.stop()}}),e,null,[[1,,17,20]])})));return function(t){return e.apply(this,arguments)}}());case 3:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()(),o}},zoe=Object(sg.compose)(Object(b.b)(),Object(nae.DropTarget)([Tae.CREW,Tae.VEHICLE],qoe,(function(e,t){return{connectDropTarget:e.dropTarget(),isOver:t.isOver(),canDrop:t.canDrop()}})))(Joe);function Goe(){var e=Object(f.a)(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  z-index: 103;\n  left: 0;\n  top: 0;\n\n  &:before {\n    content: '';\n    position: absolute;\n    width: 1px;\n    height: 100%;\n    background: ",";\n    right: 0;\n  }\n\n  &:after {\n    content: '';\n    position: absolute;\n    width: 100%;\n    height: calc(100% - 10px);\n    background: ",";\n  }\n"]);return Goe=function(){return e},e}function Woe(){var e=Object(f.a)(["\n  position: absolute;\n  height: ","px;\n  width: ","px;\n  background: ",";\n  z-index: 11;\n  left: 0;\n  top: 0;\n"]);return Woe=function(){return e},e}function Hoe(){var e=Object(f.a)(["\n  position: sticky;\n  width: ","px;\n  padding-bottom: ","px;\n  background: ",";\n  z-index: 102;\n  left: 0;\n"]);return Hoe=function(){return e},e}function Yoe(){var e=Object(f.a)(["\n  position: sticky;\n  margin-left: ","px;\n  padding-right: ","px;\n  height: ","px;\n  background: ",";\n  display: flex;\n  z-index: 102;\n  top: 0;\n  width: max-content;\n"]);return Yoe=function(){return e},e}function Qoe(){var e=Object(f.a)(["\n  position: absolute;\n  top: ","px;\n  left: ","px;\n  display: flex;\n"]);return Qoe=function(){return e},e}function Koe(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return Koe=function(){return e},e}var Zoe={startHours:7,endHours:21,blockHeight:100,blockWidth:170,panelsOffsetTop:120,panelsOffsetLeft:100},Xoe=y.default.div(Koe()),$oe=y.default.div(Qoe(),Zoe.panelsOffsetTop,Zoe.panelsOffsetLeft),eie=y.default.div(Yoe(),Zoe.panelsOffsetLeft,Zoe.panelsOffsetLeft,Zoe.panelsOffsetTop,_.white),tie=y.default.div(Hoe(),Zoe.panelsOffsetLeft,Zoe.panelsOffsetTop,_.white),nie=y.default.div(Woe(),Zoe.panelsOffsetTop,Zoe.panelsOffsetLeft,_.white),rie=y.default.div(Goe(),Zoe.panelsOffsetTop,Zoe.panelsOffsetLeft,_.white,_.white),aie="header-tooltip",oie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.runs,n=e.createNewRun,r=e.openModal,o=e.loadRuns,i=e.location,c=e.date,s=j()(t).map("assigned_slots").compact().flatten().value(),l=j.a.minBy(s,(function(e){return pm()(e.starts_at)})),u=j.a.maxBy(s,(function(e){return pm()(e.ends_at)})),d=l?Math.min(Zoe.startHours,pm()(l.starts_at).hours()):Zoe.startHours,p=u?Math.max(Zoe.endHours,pm()(u.ends_at).hours()):Zoe.endHours;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/schedule/calender",children:"Calendar View"}),Object(a.jsx)(um.a,{className:"overlapping",id:aie,place:"bottom",effect:"solid",html:!0}),Object(a.jsx)(nie,{}),Object(a.jsx)(rie,{}),Object(a.jsxs)(Xoe,{className:"h-100 position-relative",children:[Object(a.jsxs)(eie,{children:[t.map((function(e){return Object(a.jsx)(zoe,{blockWidth:Zoe.blockWidth,run:e,date:c,loadRuns:o},e.id)})),Object(a.jsx)(zoe,{blockWidth:Zoe.blockWidth,newRun:!0,createNewRun:n})]}),Object(a.jsx)(tie,{children:Object(a.jsx)(Mae,{startHours:d,endHours:p,blockHeight:Zoe.blockHeight})}),Object(a.jsxs)($oe,{children:[t.map((function(e){return Object(a.jsx)(ioe,{startHours:d,endHours:p,blockHeight:Zoe.blockHeight,blockWidth:Zoe.blockWidth,run:e,openModal:r,loadRuns:o,location:i},e.id)})),Object(a.jsx)(ioe,{startHours:d,endHours:p,blockHeight:Zoe.blockHeight,blockWidth:Zoe.blockWidth,newRun:!0,location:i})]})]},d+p)]})}}]),n}(p.PureComponent);function iie(){var e=Object(f.a)(["\n  padding: 10px;\n  background: ",";\n  border-radius: 4px;\n  border: 1px solid ",";\n  position: relative;\n  margin-bottom: 10px;\n"]);return iie=function(){return e},e}var cie=y.default.div(iie(),_.white,_.gray2),sie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(cie,{children:this.props.children})}}]),n}(p.PureComponent);function lie(){var e=Object(f.a)(["\n  color: ",";\n  word-break: break-all;\n  overflow: hidden;\n  text-overflow: ellipsis;\n  display: -webkit-box;\n  -webkit-line-clamp: 1;\n  -webkit-box-orient: vertical;\n"]);return lie=function(){return e},e}function uie(){var e=Object(f.a)(["\n  color: ",";\n"]);return uie=function(){return e},e}function die(){var e=Object(f.a)(["\n  font-size: ",";\n  margin-top: 0.6em;\n"]);return die=function(){return e},e}function pie(){var e=Object(f.a)(["\n  position: absolute;\n  right: 10px;\n  top: 10px;\n"]);return pie=function(){return e},e}var hie=y.default.div(pie()),bie=y.default.div(die(),sm.smaller),fie=y.default.div(uie(),_.gray4),mie=y.default.div(lie(),_.gray3),jie=Object(vj.css)({padding:0,"& .rdtPicker":{border:0,padding:0}}),vie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={datePickerLoading:!1,showDatePicker:!1,date:null,showEditModal:!1},e.dropdownTriggerRender=function(){return Object(a.jsx)(z7,{name:Xf.MenuVertical,color:_.black0})},e.datePickerRender=function(){return Object(a.jsx)(Qy.a,{input:!1,timeFormat:!0,isValidDate:function(e){var t=pm()();return pm()(e).isAfter(t)},onChange:function(t){e.setState({date:t})}})},e.isValidateCustomSnoozeDate=function(){var t=e.state.date;return!!t&&t.isAfter(pm()())},e.snoozeTaskUntilCustomDate=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(a=e.state.date)){t.next=10;break}return e.setState({datePickerLoading:!0}),t.prev=3,t.next=6,e.snoozeTask(n,a);case 6:r.close();case 7:return t.prev=7,e.setState({datePickerLoading:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[3,,7,10]])})));return function(e,n){return t.apply(this,arguments)}}(),e.taskMenuItems=function(t,n){var r=e.state,o=r.showDatePicker,i=r.datePickerLoading,c=[{name:"Snooze for one day",onClick:function(){return e.snoozeTask(t,pm()().add(1,"d"))},disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE)},{name:"Snooze for one week",onClick:function(){return e.snoozeTask(t,pm()().add(7,"d"))},disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE)},{name:"Snooze for one month",onClick:function(){return e.snoozeTask(t,pm()().add(1,"M"))},disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE)},{customElements:function(n){return Object(a.jsx)(a.Fragment,{children:o?Object(a.jsxs)("div",{className:"position-relative",style:{background:_.white,padding:"0 1.5rem"},children:[i&&Object(a.jsx)(Nv,{size:30,color:_.white}),e.datePickerRender(),Object(a.jsx)(hC,{padding:"10px 0",children:Object(a.jsx)(Xg,{className:"btn",disabled:!e.isValidateCustomSnoozeDate(),onClick:function(){return e.snoozeTaskUntilCustomDate(t,n)},children:"Snooze"})})]}):"Snooze (choose date)"})},classNames:o?"".concat(jie):"",onClick:o?void 0:e.showDatePicker,noClose:!0,disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE),onOutsideClick:e.closeDatePicker}],s=[{name:"Unsnooze",onClick:function(){var n=Object(lj.a)(sj.a.mark((function n(){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,e.unsnoozeTask(t);case 2:return n.abrupt("return",n.sent);case 3:case"end":return n.stop()}}),n)})));return function(){return n.apply(this,arguments)}}(),disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE)}],l=t.job_id?t.snoozed_until?s:c:[];return j.a.compact([{name:"Edit",onClick:e.showEditModal,disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE)},{type:"divider"}].concat(Object(aj.a)(l),[(null===l||void 0===l?void 0:l.length)?{type:"divider"}:null,{name:"Delete",onClick:e.removeTask,disabled:!n.has(vx.OPERATIONS_RUNS_MANAGE)}]))},e.removeTask=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.task,a=n.dispatch,t.next=3,a(iw("Confirm","Delete task ".concat(r.type.name,"?")));case 3:if(!t.sent){t.next=13;break}if(!r.job_id){t.next=10;break}return t.next=8,iq.removeTaskFromJob(r.job_id,r.id);case 8:t.next=12;break;case 10:return t.next=12,iq.removeAdhocTask(r.id);case 12:Gy.emit(Ix.TaskWasRemovedFromRun);case 13:case"end":return t.stop()}}),t)}))),e.showDatePicker=function(){e.setState({showDatePicker:!0})},e.closeDatePicker=function(){e.setState({showDatePicker:!1})},e.showEditModal=function(){e.setState({showEditModal:!0})},e.closeEditModal=function(){e.setState({showEditModal:!1}),e.props.loadTaskList()},e.snoozeTask=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(o=!0,!n.assigned_slots){t.next=5;break}return t.next=4,e.props.dispatch(iw("Confirm","Snooze Task",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"This task is scheduled for one or more runs. It will be removed from run(s) after snoozing it."}),Object(a.jsx)("p",{children:"Do you want to proceed?"})]})));case 4:o=t.sent;case 5:if(!o){t.next=13;break}return t.next=8,iq.snoozeTask(n.job_id,n.id,{snoozed_until:r.add(-r.utcOffset(),"m").format(ov)});case 8:if(!(null===(i=n.assigned_slots)||void 0===i?void 0:i.length)){t.next=12;break}return t.next=11,Promise.all(n.assigned_slots.map((function(e){return iq.removeTaskSlotFromRun(e.job_run_id,n.id,e.id)})));case 11:Gy.emit(Ix.TaskWasRemovedFromRun);case 12:Gy.emit(Ix.TaskWasSnoozed);case 13:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.unsnoozeTask=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,iq.unsnoozeTask(t.job_id,t.id);case 2:Gy.emit(Ix.TaskWasUnsnoozed);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.isScheduled=function(){var t;return(null===(t=e.props.task.assigned_slots)||void 0===t?void 0:t.length)>0},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.task,r=t.locationArea,o=(t.date,t.currentTime||pm()()),i=pm()(n.due_at),c=i.diff(o,"h"),s=pm.a.duration(i.diff(o)),l=n.type.kpi_hours||12,u=c<l,d=this.state.showEditModal;return Object(a.jsx)(Cx.Consumer,{children:function(t){var o,p,h;return Object(a.jsxs)(a.Fragment,{children:[d&&Object(a.jsx)(mz,{locationId:null===(o=n.job)||void 0===o?void 0:o.assigned_location_id,edit:!0,taskTypes:[n.type],isOpen:d,doSave:!0,doAssign:!0,task:sz(n),onClose:e.closeEditModal}),Object(a.jsxs)(sie,{children:[Object(a.jsxs)(hC,{fontSize:sm.smaller,children:[Object(a.jsxs)(hC,{padding:"0 30px 0 0",className:"d-flex justify-content-between",children:[Object(a.jsx)(hC,{weight:lm.bold,fontSize:"17.6px",children:n.subtype&&null!==n.subtype.name?n.subtype.name:n.name||n.type.name}),n.job&&Object(a.jsxs)(v.b,{to:"/job/".concat(n.job.id,"/details"),style:{whiteSpace:"nowrap"},children:["#","".concat(n.job.id).concat(r&&"-".concat(r.code))]})]}),n.job&&Object(a.jsx)(hC,{padding:"0 30px 0 0",className:"d-flex justify-content-between",children:Object(a.jsx)("div",{children:n.job.site_address?n.job.site_address.full_address:"No Site Address"})})]}),Object(a.jsxs)(hC,{color:_.gray4,margin:"5px 0 0 0",className:"d-flex",children:[u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(hC,{className:"close-to-kpi",weight:lm.bold,fontSize:"17.6px",color:c>l/2?_.orange2:_.red1,children:[c>-1?"".concat("0".concat(c).slice(-2),":").concat(pm()(s.asMilliseconds()).format("mm")):"00:00","hrs"]}),"\xa0\xa0"]})," ",Object(a.jsxs)(hC,{color:_.black0,fontSize:"17.6px",children:["Due: ",i.format("D MMM, hh:mm A")]})]}),((null===(p=n.job)||void 0===p?void 0:p.site_contact)||n.internal_note)&&Object(a.jsxs)(bie,{children:[(null===(h=n.job)||void 0===h?void 0:h.site_contact)&&Object(a.jsxs)(fie,{children:[hO.getContactName(n.job.site_contact),hO.getContactPhone(n.job.site_contact)&&": ".concat(hO.getContactPhone(n.job.site_contact))]}),n.internal_note&&Object(a.jsx)(mie,{children:n.internal_note})]}),n.snoozed_until&&Object(a.jsxs)(hC,{color:_.orange2,fontSize:sm.smaller,margin:"10px 0 0 0",children:["Snoozed until ",pm()(n.snoozed_until).format(lv)]}),Object(a.jsx)(hie,{children:Object(a.jsx)(nw,{trigger:e.dropdownTriggerRender,items:e.taskMenuItems(n,t),direction:"right"})})]})]})}})}}]),n}(p.Component),Oie=Object(b.b)()(vie),gie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.task,n=e.locationArea,r=e.connectDragSource,o=e.date,i=e.loadTaskList;return Object(a.jsx)(Cx.Consumer,{children:function(e){return e.has(vx.OPERATIONS_RUNS_MANAGE)&&!t.snoozed_until?r(Object(a.jsx)("div",{children:Object(a.jsx)(Oie,{loadTaskList:i,task:t,locationArea:n,date:o})})):Object(a.jsx)(Oie,{loadTaskList:i,task:t,locationArea:n,date:o})}})}}]),n}(p.PureComponent),xie=Object(nae.DragSource)(Tae.TASK,{beginDrag:function(e){return e.task}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(gie),yie="16px",_ie="16px",wie="14px",Sie="14px",kie="25px";function Cie(){var e=Object(f.a)(["\n  :first-child {\n    margin-top: 0 !important;\n  }\n"]);return Cie=function(){return e},e}var Nie=Object(y.default)(hC)(Cie()),Eie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(Nie,{color:_.gray4,style:{textTransform:"uppercase"},margin:"40px 0 10px 0",children:this.props.children})}}]),n}(p.PureComponent);function Aie(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return Aie=function(){return e},e}var Iie,Tie,Rie=Object(y.default)(hC)(Aie()),Die=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderTrigger=function(){var t=e.props.selectedName;return Object(a.jsxs)(Rie,{className:"d-flex align-items-center",margin:"5px 0 0 0",fontSize:"1em",children:[Object(a.jsx)(hC,{color:_.gray4,margin:"0 5px 0 0",fontSize:"1em",children:t}),Object(a.jsx)(z7,{name:Xf.ArrowDown,color:_.gray4,size:16})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.items;return Object(a.jsx)(nw,{items:e,noMargin:!0,direction:"right",trigger:this.renderTrigger})}}]),n}(h.a.PureComponent),Mie=mC.ColoredDiv;!function(e){e[e.KPI=0]="KPI",e[e.Name=1]="Name",e[e.OldToNew=2]="OldToNew",e[e.NewToOld=3]="NewToOld"}(Tie||(Tie={}));var Lie,Pie=(Iie={},Object(k.a)(Iie,Tie.KPI,"Closest KPI due"),Object(k.a)(Iie,Tie.Name,"Task name"),Object(k.a)(Iie,Tie.OldToNew,"All tasks (oldest to newest)"),Object(k.a)(Iie,Tie.NewToOld,"All tasks (newest to oldest)"),Iie),Fie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:"",sortType:Tie.KPI},e.onSearchValueChange=function(t){var n=e.props.locationArea;e.setState({search:t}),n&&e.debouncedSearch({location_id:n.id,term:t})},e.debouncedSearch=Object(m.debounce)(e.props.searchTasks.fetch,500),e.isKPIIsCloseToBeFired=function(e){var t=pm()();return pm()(e.due_at).diff(t,"h")<(e.type.kpi_hours||24)},e.sortTasks=function(t){var n=e.props.date,r=null===n||void 0===n?void 0:n.format(av),a=t.filter((function(e){var t;return null===(t=e.assigned_slots)||void 0===t?void 0:t.length})),o=t.filter((function(e){var t;return!(null===(t=e.assigned_slots)||void 0===t?void 0:t.length)})),i=e.state.sortType,c=a.filter((function(e){return j()(e.assigned_slots).some((function(e){var t;return(null===(t=e.run)||void 0===t?void 0:t.date)===r}))})),s=[],l=[];return o.forEach((function(e){e.type.can_be_scheduled&&(e.snoozed_until?l.push(e):s.push(e))})),i===Tie.OldToNew&&(s=Object(m.orderBy)(s,[function(e){return pm()(e.created_at).unix()}],["asc"]),c=Object(m.orderBy)(c,[function(e){return pm()(e.created_at).unix()}],["asc"])),i===Tie.NewToOld&&(s=Object(m.orderBy)(s,[function(e){return pm()(e.created_at).unix()}],["desc"]),c=Object(m.orderBy)(c,[function(e){return pm()(e.created_at).unix()}],["desc"])),i===Tie.KPI&&(s=Object(m.orderBy)(s,[function(t){return e.isKPIIsCloseToBeFired(t)}],["desc"]),c=Object(m.orderBy)(c,[function(t){return e.isKPIIsCloseToBeFired(t)}],["desc"])),i===Tie.Name&&(s=Object(m.orderBy)(s,[function(e){return e.name}],["asc"]),c=Object(m.orderBy)(c,[function(e){return e.name}],["asc"])),{scheduled:c,toSchedule:s,snoozed:l}},e.sortItems=function(){var t=e.state.sortType;return[{name:Pie[Tie.KPI],classNames:t===Tie.KPI?"active":"",onClick:function(){return e.setState({sortType:Tie.KPI})}},{name:Pie[Tie.Name],classNames:t===Tie.Name?"active":"",onClick:function(){return e.setState({sortType:Tie.Name})}},{name:Pie[Tie.OldToNew],classNames:t===Tie.OldToNew?"active":"",onClick:function(){return e.setState({sortType:Tie.OldToNew})}},{name:Pie[Tie.NewToOld],classNames:t===Tie.NewToOld?"active":"",onClick:function(){return e.setState({sortType:Tie.NewToOld})}}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.onSearchValueChange(),Gy.listen(Ix.TaskWasAddedToRun,this.onSearchValueChange),Gy.listen(Ix.TaskWasRemovedFromRun,this.onSearchValueChange),Gy.listen(Ix.TaskWasSnoozed,this.onSearchValueChange),Gy.listen(Ix.TaskWasUnsnoozed,this.onSearchValueChange),Gy.listen(Ix.TaskWasUpdated,this.onSearchValueChange)}},{key:"componentWillUnmount",value:function(){Gy.removeListener(Ix.TaskWasAddedToRun,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasRemovedFromRun,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasSnoozed,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasUnsnoozed,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasUpdated,this.onSearchValueChange)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locationArea;t&&t.id!==(e.locationArea&&e.locationArea.id)&&(this.setState({search:""}),this.onSearchValueChange(""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchTasks,r=n.loading,o=n.data,i=t.locationArea,c=t.date,s=this.state,l=s.sortType,u=s.search,d=o?o.data:[],p=this.sortTasks(d);return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Mie,{padding:"".concat(yie," ").concat(wie," ").concat(kie," ").concat(Sie),className:"flex-shrink-0",overflow:"visible",children:[Object(a.jsx)(aC,{loading:r,onSearchValueChange:e.onSearchValueChange,placeholder:"Search...",value:u}),Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)(Die,{items:e.sortItems(),selectedName:Pie[l]})})]}),Object(a.jsxs)(UC,{className:"d-flex flex-column flex-grow-1 position-relative",children:[r&&Object(a.jsx)(wN,{color:_.gray1,zIndex:2}),Object(a.jsxs)(Mie,{padding:"0 ".concat(wie," ").concat(_ie," ").concat(Sie),overflow:"visible",children:[t.has(vx.OPERATIONS_RUNS_MANAGE)&&p.toSchedule.length>0&&Object(a.jsx)(Eie,{children:"To Schedule"}),t.has(vx.OPERATIONS_RUNS_MANAGE)&&p.toSchedule.map((function(t){return Object(a.jsx)(xie,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)})),p.scheduled.length>0&&Object(a.jsx)(Eie,{children:"Scheduled"}),p.scheduled.map((function(t){return Object(a.jsx)(xie,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i,date:c?pm()(c.format(av)):pm()()},t.id)})),t.has(vx.OPERATIONS_RUNS_MANAGE)&&p.snoozed.length>0&&Object(a.jsx)(Eie,{children:"Snoozed"}),t.has(vx.OPERATIONS_RUNS_MANAGE)&&p.snoozed.map((function(t){return Object(a.jsx)(xie,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)}))]})]})]})}})}}]),n}(p.PureComponent),Uie=oj({searchTasks:{fetch:iq.searchTasks}})(Fie),Bie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getHoursColor=function(){var t=e.props.staffMember,n=t.week_hours,r=t.working_hours_per_week;if(r){var a=_.black1,o=n/r;return o>.89&&(a=_.orange2),o>.99&&(a=_.red1),a}return _.black1},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.staffMember,n=e.booked,r=mm(t);return Object(a.jsx)(sie,{children:Object(a.jsxs)(hC,{fontSize:sm.smaller,weight:lm.bold,className:"d-flex justify-content-between align-items-center",color:n?_.gray4:_.black1,children:[Object(a.jsx)("div",{children:r.name}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)(hC,{color:_.gray4,margin:"0 5px 0 0",children:["(",t.date_hours.toFixed(1),"hrs)"]}),Object(a.jsxs)(hC,{color:this.getHoursColor(),children:[t.week_hours.toFixed(1),"hrs"]})]})]})})}}]),n}(p.PureComponent),Vie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.staffMember,n=e.connectDragSource,r=e.booked;return Object(a.jsx)(Cx.Consumer,{children:function(e){return e.has(vx.OPERATIONS_RUNS_MANAGE)?n(Object(a.jsx)("div",{children:Object(a.jsx)(Bie,{staffMember:t,booked:r})})):Object(a.jsx)(Bie,{staffMember:t,booked:r})}})}}]),n}(p.PureComponent),Jie=Object(nae.DragSource)(Tae.CREW,{beginDrag:function(e){return e.staffMember}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Vie);function qie(){var e=Object(f.a)(["\n  .dropdown-menu{right:-100%;}\n"]);return qie=function(){return e},e}var zie,Gie=y.default.div(qie());!function(e){e[e.HoursRemaining=0]="HoursRemaining",e[e.HoursUsed=1]="HoursUsed",e[e.ByName=2]="ByName",e[e.PrimaryLocation=3]="PrimaryLocation"}(zie||(zie={}));var Wie=(Lie={},Object(k.a)(Lie,zie.HoursRemaining,"Hours remaining"),Object(k.a)(Lie,zie.HoursUsed,"Hours used"),Object(k.a)(Lie,zie.ByName,"By name"),Object(k.a)(Lie,zie.PrimaryLocation,"Primary location"),Lie),Hie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={search:"",sortType:zie.HoursRemaining,sortTypeByUserRole:"all",sortTypeByUserRoleName:"All"},e.eventListeners=[Gy.listen(Ix.StaffAssignedToTask,(function(){return e.onSearchValueChange(e.state.search)})),Gy.listen(Ix.TaskWasUpdated,(function(){return e.onSearchValueChange(e.state.search)})),Gy.listen(Ix.TaskWasRemovedFromRun,(function(){return e.onSearchValueChange(e.state.search)}))],e.debouncedSearch=Object(m.debounce)(e.props.searchStaff.fetch,1e3),e.debouncedFetchList=Object(m.debounce)(e.props.getStaffList.fetch,1e3),e.onSearchValueChange=function(t){var n=e.props,r=n.locationArea,a=n.date;if(e.setState({search:t}),r&&a){var o={location_id:r.id,date:bv(a)};t?(e.debouncedFetchList.cancel(),e.debouncedSearch(Object(c.a)(Object(c.a)({},o),{},{name:t||""}))):(e.debouncedSearch.cancel(),e.debouncedFetchList(Object(c.a)({},o)))}},e.sortItems=function(){var t=e.state.sortType;return[{name:Wie[zie.HoursRemaining],classNames:t===zie.HoursRemaining?"active":"",onClick:function(){return e.setState({sortType:zie.HoursRemaining})}},{name:Wie[zie.HoursUsed],classNames:t===zie.HoursUsed?"active":"",onClick:function(){return e.setState({sortType:zie.HoursUsed})}},{name:Wie[zie.ByName],classNames:t===zie.ByName?"active":"",onClick:function(){return e.setState({sortType:zie.ByName})}},{name:Wie[zie.PrimaryLocation],classNames:t===zie.PrimaryLocation?"active":"",onClick:function(){return e.setState({sortType:zie.PrimaryLocation})}}]},e.userRolesItems=function(){var t=e.props.userRoles.data,n=e.state.sortTypeByUserRole,r={name:"All",classNames:"all"===n?"active":"",onClick:function(){e.setState({sortTypeByUserRole:"all",sortTypeByUserRoleName:"All"})}},a=t?t.map((function(t){return{name:t.display_name,classNames:n===t.name?"active":"",onClick:function(){e.setState({sortTypeByUserRole:t.name,sortTypeByUserRoleName:t.display_name})}}})):[];return[].concat(Object(aj.a)(!t||t&&!t.length?[r]:[r,{type:"divider"}]),Object(aj.a)(a))},e.getCrewRole=function(){var t=e.props.userRoles.data;return t?t.find((function(e){return"crew"===e.name.toLowerCase()})):void 0},e.sortStaff=function(){var t=e.props,n=t.searchStaff.data,r=t.getStaffList.data,a=t.locationArea,o=e.state,i=o.sortType,c=o.search?n:r,s=[],l=[];return c&&c.forEach((function(e){e.working_hours_per_week&&e.date_hours>=e.working_hours_per_week/5?l.push(e):s.push(e)})),i===zie.PrimaryLocation&&(s=s.filter((function(e){return e.primary_location.id===a.id})),l=l.filter((function(e){return e.primary_location.id===a.id}))),[zie.HoursRemaining,zie.PrimaryLocation].includes(i)&&(s=Object(m.orderBy)(s,[function(e){return(e.working_hours_per_week||40)-e.week_hours}],["desc"]),l=Object(m.orderBy)(l,[function(e){return(e.working_hours_per_week||40)-e.week_hours}],["desc"])),i===zie.HoursUsed&&(s=Object(m.orderBy)(s,["week_hours"],["desc"]),l=Object(m.orderBy)(l,["week_hours"],["desc"])),i===zie.ByName&&(s=Object(m.orderBy)(s,[function(e){return mm(e).name}],["asc"]),l=Object(m.orderBy)(l,[function(e){return mm(e).name}],["asc"])),{canBeBooked:e.sortByUserRole(s),booked:e.sortByUserRole(l)}},e.sortByUserRole=function(t){var n=e.state.sortTypeByUserRole;return t.filter((function(e){return"all"===n||(e.roles&&e.roles.map((function(e){return e.name}))||[]).includes(n)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.userRoles,r=this.getCrewRole();t(Dk(d5,p5,b5,Object(lj.a)(sj.a.mark((function e(){var t;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE.getRoles();case 2:return t=e.sent,e.abrupt("return",Object(m.orderBy)(t.data,["display_name"],["asc"]));case 4:case"end":return e.stop()}}),e)}))))),this.onSearchValueChange(this.state.search),n.data&&r&&this.setState({sortTypeByUserRoleName:r.display_name,sortTypeByUserRole:r.name})}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.locationArea,r=t.date,a=t.userRoles;if((n&&n.id!==(e.locationArea&&e.locationArea.id)||r&&r.unix()!==(e.date&&e.date.unix()))&&this.onSearchValueChange(this.state.search),a.data&&(!e.userRoles.data||e.userRoles.data&&!e.userRoles.data.length)){var o=this.getCrewRole();o&&this.setState({sortTypeByUserRoleName:o.display_name,sortTypeByUserRole:o.name})}}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this.props,t=e.searchStaff.loading,n=e.getStaffList.loading,r=e.userRoles.loading,o=this.state,i=o.sortType,c=o.sortTypeByUserRoleName,s=this.sortStaff();return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(hC,{padding:"".concat(yie," ").concat(wie," ").concat(kie," ").concat(Sie),className:"flex-shrink-0",overflow:"visible",children:[Object(a.jsx)(aC,{loading:t||n,onSearchValueChange:this.onSearchValueChange,placeholder:"Search..."}),Object(a.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(a.jsxs)(Gie,{className:"position-relative",style:{marginRight:"10px"},children:[r&&Object(a.jsx)(Nv,{size:14,color:_.gray1,zIndex:2}),Object(a.jsx)(Die,{items:this.userRolesItems(),selectedName:c})]}),Object(a.jsx)(Die,{items:this.sortItems(),selectedName:Wie[i]})]})]}),Object(a.jsxs)(UC,{className:"d-flex flex-column flex-grow-1 position-relative",children:[t&&Object(a.jsx)(wN,{color:_.gray1,zIndex:3}),Object(a.jsxs)(hC,{padding:"0 ".concat(wie," ").concat(_ie," ").concat(Sie),overflow:"visible",children:[s.canBeBooked.map((function(e){return Object(a.jsx)(Jie,{staffMember:e},e.id)})),s.booked.length>0&&Object(a.jsx)(Eie,{children:"Booked"}),s.booked.map((function(e){return Object(a.jsx)(Jie,{staffMember:e,booked:!0},e.id)}))]})]})]})}}]),n}(p.PureComponent),Yie=Object(sg.compose)(Object(b.b)((function(e){return{userRoles:e.userRoles}})),oj({getStaffList:{fetch:Kq.getStaffList},searchStaff:{fetch:Kq.searchStaff}}))(Hie),Qie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.vehicle;return Object(a.jsx)(sie,{children:Object(a.jsxs)(hC,{fontSize:sm.smaller,className:"d-flex align-items-center justify-content-between",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(hC,{weight:lm.bold,margin:"0 10px 0 0",color:e.is_booked?_.gray4:_.black1,children:e.registration}),e.rent_starts_at&&Object(a.jsx)(rN,{tag:{name:"RENTAL",color:_.purple1},mode:"outlined"})]}),Object(a.jsx)(hC,{color:_.gray4,children:e.type.toUpperCase()})]})})}}]),n}(p.PureComponent),Kie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.vehicle,n=e.connectDragSource;return Object(a.jsx)(Cx.Consumer,{children:function(e){return e.has(vx.OPERATIONS_RUNS_MANAGE)&&!t.is_booked?n(Object(a.jsx)("div",{children:Object(a.jsx)(Qie,{vehicle:t})})):Object(a.jsx)(Qie,{vehicle:t})}})}}]),n}(p.PureComponent),Zie=Object(nae.DragSource)(Tae.VEHICLE,{beginDrag:function(e){return e.vehicle}},(function(e,t){return{connectDragSource:e.dragSource(),isDragging:t.isDragging()}}))(Kie),Xie="ModalRentalCarsForm",$ie=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).validateStartDate=function(e,t){if(pm.a.isMoment(t.rent_ends_at)&&pm.a.isMoment(e)&&e.isAfter(t.rent_ends_at))return"Start date cannot be after end date"},e.validateEndDate=function(e,t){if(pm.a.isMoment(t.rent_starts_at)&&pm.a.isMoment(e)&&e.isBefore(t.rent_starts_at))return"End date cannot be before start date"},e.getOptionLabel=function(e){return e.name},e.getOptionValue=function(e){return e.id},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:return o(),t.abrupt("return",!0);case 8:return t.prev=8,t.t0=t.catch(1),t.abrupt("return",ix(t.t0));case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.locations,r=t.initialValues;return Object(a.jsxs)("form",{id:Xie,onSubmit:e.props.handleSubmit(e.onSubmit),children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"make",label:"Car Brand",component:yg,validate:Dv})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"model",label:"Car Model",component:yg,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"registration",label:"Reg. Number",component:yg,validate:Dv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"type",label:"Car Type",component:yg,validate:Dv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"location_id",label:"Location",component:xO,options:n,validate:Dv,getOptionLabel:e.getOptionLabel,getOptionValue:e.getOptionValue,disabled:!!r.location_id})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"rent_starts_at",label:"Rental Start Date",component:s_,validate:[Dv,Mv,e.validateStartDate],futureEnabled:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"rent_ends_at",label:"Rental End Date",component:s_,validate:[Dv,Mv,e.validateEndDate],futureEnabled:!0})})]})]})},e.renderFooter=function(){e.props.invalid;return Object(a.jsx)(Xg,{className:"btn",type:"submit",form:Xie,children:"Add"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),ece=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:Xie}))($ie),tce=function(e){return Object(c.a)(Object(c.a)({},e),{},{location_id:e.location_id.id,rent_starts_at:e.rent_starts_at.format(ov),rent_ends_at:e.rent_ends_at.format(ov)})};function nce(e){return function(t){return h.a.memo((function(n){return Object(a.jsx)(e.Consumer,{children:function(e){return Object(a.jsx)(t,Object(c.a)(Object(c.a)({},n),{},{currentContext:e}))}})}))}}var rce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showRentalCarsModal:!1},e.fetchVehiclesWithContext=function(t){var n=e.props,r=n.locationArea,a=n.loadVehicles.fetch,o=n.date;t&&t.has(vx.OPERATIONS_VEHICLES_VIEW)&&r&&o&&a(r.id,bv(o))},e.eventListeners=[Gy.listen(Ix.VehicleAssignedToTask,(function(){return e.fetchVehiclesWithContext(e.props.currentContext)}))],e.sortVehicles=function(){var t=e.props.loadVehicles.data,n=t?t.filter((function(e){return!e.latest_status.type.makes_vehicle_unavailable})):[],r=[],a=[];return n.forEach((function(e){e.is_booked?r.push(e):a.push(e)})),{available:a,booked:r}},e.showRentalCarsModal=function(){e.setState({showRentalCarsModal:!0})},e.hideRentalCarsModal=function(){e.setState({showRentalCarsModal:!1})},e.onRentalCarSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Z4.createVehicle(tce(n));case 2:e.fetchVehiclesWithContext(e.props.currentContext);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.fetchVehiclesWithContext(this.props.currentContext)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.locationArea,r=t.date,a=t.currentContext;(n&&n.id!==(e.locationArea&&e.locationArea.id)||r&&r.unix()!==(e.date&&e.date.unix()))&&this.fetchVehiclesWithContext(a)}},{key:"componentWillUnmount",value:function(){this.eventListeners.map((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.locationArea,r=t.loadVehicles.loading,o=this.state.showRentalCarsModal,i=this.sortVehicles();return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)(ece,{isOpen:o,onClose:e.hideRentalCarsModal,title:"Add Rental Car",initialValues:{location_id:n},onSubmit:e.onRentalCarSubmit}),r&&Object(a.jsx)(Nv,{color:_.gray1,zIndex:2,size:40}),Object(a.jsx)(hC,{padding:"".concat(yie," ").concat(wie," 0 ").concat(Sie),className:"flex-shrink-0",overflow:"visible",children:Object(a.jsx)("div",{className:"d-flex justify-content-end",children:Object(a.jsx)(dC,{noDecoration:!0,onClick:e.showRentalCarsModal,children:"Add rental"})})}),Object(a.jsx)(UC,{className:"d-flex flex-column flex-grow-1",children:Object(a.jsxs)(hC,{padding:"".concat(yie," ").concat(wie," ").concat(_ie," ").concat(Sie),overflow:"visible",children:[i.available.map((function(e){return Object(a.jsx)(Zie,{vehicle:e},e.id)})),i.booked.length>0&&Object(a.jsx)(Eie,{children:"Booked"}),i.booked.map((function(e){return Object(a.jsx)(Zie,{vehicle:e},e.id)}))]})})]})}})}}]),n}(p.PureComponent),ace=Object(sg.compose)(oj({loadVehicles:{fetch:Z4.searchVehicles}}),nce(Cx))(rce),oce=mC.ColoredDiv,ice=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:""},e.onSearchValueChange=function(t){var n=e.props.locationArea;e.setState({search:t}),n&&e.debouncedSearch({location_id:n.id,term:t,adhoc_task:1})},e.debouncedSearch=Object(m.debounce)(e.props.searchTasks.fetch,500),e.sortTasks=function(t){var n=e.props.date,r=null===n||void 0===n?void 0:n.format(av),a=t.filter((function(e){var t;return null===(t=e.assigned_slots)||void 0===t?void 0:t.length})),o=t.filter((function(e){var t;return!(null===(t=e.assigned_slots)||void 0===t?void 0:t.length)})),i=a.filter((function(e){return j()(e.assigned_slots).some((function(e){var t;return(null===(t=e.run)||void 0===t?void 0:t.date)===r}))})),c=[],s=[];return o.forEach((function(e){e.type.can_be_scheduled&&(e.snoozed_until?s.push(e):c.push(e))})),{scheduled:i,toSchedule:c,snoozed:s}},e.showModal=function(t,n){e.setState({modal:t,modalData:n})},e.hideModal=function(){e.setState({modal:void 0,modalData:void 0})},e.renderModal=function(){var t,n=e.state,r=n.modal,o=n.modalData,i=e.props,s=i.locationArea,l=i.taskTypes;return"task"===r?Object(a.jsx)(mz,Object(c.a)({locationId:null===s||void 0===s?void 0:s.id,taskTypes:(null===(t=l.data)||void 0===t?void 0:t.data)||[],isOpen:!0,doSave:!0,doAssign:!1,onClose:e.hideModal},o)):null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.onSearchValueChange(),Gy.listen(Ix.TaskWasAddedToRun,this.onSearchValueChange),Gy.listen(Ix.TaskWasRemovedFromRun,this.onSearchValueChange),Gy.listen(Ix.TaskWasSnoozed,this.onSearchValueChange),Gy.listen(Ix.TaskWasUnsnoozed,this.onSearchValueChange),Gy.listen(Ix.TaskWasUpdated,this.onSearchValueChange),this.props.taskTypes.fetch()}},{key:"componentWillUnmount",value:function(){Gy.removeListener(Ix.TaskWasAddedToRun,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasRemovedFromRun,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasSnoozed,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasUnsnoozed,this.onSearchValueChange),Gy.removeListener(Ix.TaskWasUpdated,this.onSearchValueChange)}},{key:"componentDidUpdate",value:function(e){var t=this.props.locationArea;t&&t.id!==(e.locationArea&&e.locationArea.id)&&(this.setState({search:""}),this.onSearchValueChange(""))}},{key:"render",value:function(){var e=this,t=this.props,n=t.searchTasks,r=n.loading,o=n.data,i=t.locationArea,c=t.date,s=this.state.search,l=o?o.data:[],u=this.sortTasks(l);return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[e.renderModal(),Object(a.jsxs)(oce,{padding:"".concat(yie," ").concat(wie," ").concat(kie," ").concat(Sie),className:"flex-shrink-0",overflow:"visible",children:[Object(a.jsx)(aC,{loading:r,onSearchValueChange:e.onSearchValueChange,placeholder:"Search...",value:s}),Object(a.jsx)("div",{className:"d-flex justify-content-end mt-3",children:t.has(vx.OPERATIONS_RUNS_MANAGE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:function(){e.showModal("task")},children:"Create new adhoc task"})})]}),Object(a.jsxs)(UC,{className:"d-flex flex-column flex-grow-1 position-relative",children:[r&&Object(a.jsx)(wN,{color:_.gray1,zIndex:2}),Object(a.jsxs)(oce,{padding:"0 ".concat(wie," ").concat(_ie," ").concat(Sie),overflow:"visible",children:[t.has(vx.OPERATIONS_RUNS_MANAGE)&&u.toSchedule.length>0&&Object(a.jsx)(Eie,{children:"To Schedule"}),t.has(vx.OPERATIONS_RUNS_MANAGE)&&u.toSchedule.map((function(t){return Object(a.jsx)(xie,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)})),u.scheduled.length>0&&Object(a.jsx)(Eie,{children:"Scheduled"}),u.scheduled.map((function(t){return Object(a.jsx)(xie,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i,date:c?pm()(c.format(av)):pm()()},t.id)})),u.snoozed.length>0&&Object(a.jsx)(Eie,{children:"Snoozed"}),u.snoozed.map((function(t){return Object(a.jsx)(xie,{loadTaskList:e.onSearchValueChange,task:t,locationArea:i},t.id)}))]})]})]})}})}}]),n}(p.PureComponent),cce=oj({searchTasks:{fetch:iq.searchTasks},taskTypes:{fetch:iq.getTaskTypes}})(ice);function sce(){var e=Object(f.a)(["\n  width: 100%;\n  height: 100%;\n  position: relative;\n  flex-grow: 1;\n  flex-direction: column;\n  overflow: auto;\n"]);return sce=function(){return e},e}function lce(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-around;\n  height: 45px;\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return lce=function(){return e},e}var uce,dce=y.default.div(lce(),_.white,_.gray2),pce=y.default.div(sce());!function(e){e.Jobs="jobs",e.Tasks="tasks",e.Staff="staff",e.Vehicles="vehicles"}(uce||(uce={}));var hce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(r=t.call.apply(t,[this].concat(o))).getTabNameFromUrl=function(){var e=r.props.match.params.section,t=void 0===e?"jobs":e;return t.charAt(0).toUpperCase()+t.slice(1)},r.state=(e={activeTabId:uce[r.getTabNameFromUrl()]},Object(k.a)(e,uce.Jobs,!1),Object(k.a)(e,uce.Staff,!1),Object(k.a)(e,uce.Vehicles,!1),Object(k.a)(e,uce.Tasks,!1),e),r.getTabs=function(e){return[{name:"Jobs",id:uce.Jobs,onClick:function(){r.props.history.push("/operations/schedule/".concat(uce.Jobs)),r.setState(Object(k.a)({activeTabId:uce.Jobs},uce.Jobs,!0))},disabled:!e.has(vx.OPERATIONS_TASKS_VIEW)},{name:"Adhoc Tasks",id:uce.Tasks,onClick:function(){r.props.history.push("/operations/schedule/".concat(uce.Tasks)),r.setState(Object(k.a)({activeTabId:uce.Tasks},uce.Tasks,!0))},disabled:!e.has(vx.OPERATIONS_TASKS_VIEW)},{name:"Staff",id:uce.Staff,onClick:function(){r.props.history.push("/operations/schedule/".concat(uce.Staff)),r.setState(Object(k.a)({activeTabId:uce.Staff},uce.Staff,!0))},disabled:!e.has(vx.OPERATIONS_STAFF_VIEW)},{name:"Vehicles",id:uce.Vehicles,onClick:function(){r.props.history.push("/operations/schedule/".concat(uce.Vehicles)),r.setState(Object(k.a)({activeTabId:uce.Vehicles},uce.Vehicles,!0))},disabled:!e.has(vx.OPERATIONS_VEHICLES_VIEW)}]},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState(Object(k.a)({},uce[this.getTabNameFromUrl()],!0))}},{key:"render",value:function(){var e=this,t=this.state.activeTabId,n=this.props,r=n.locationArea,o=n.date,i=n.ready;return Object(a.jsx)(Cx.Consumer,{children:function(n){var c=e.getTabs(n);return Object(a.jsxs)(nj,{width:364,className:"h-100",noExpand:!0,children:[!i&&Object(a.jsx)(wN,{color:_.white,opacity:.7,zIndex:100}),Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"operations-sidebar-tooltip"}),Object(a.jsx)(dce,{children:Object(a.jsx)(iz,{selectedTabId:t,items:c})}),Object(a.jsxs)(pce,{style:{display:t===uce.Jobs?"flex":"none"},children:[!n.has(vx.OPERATIONS_TASKS_VIEW)&&Object(a.jsx)(wN,{color:_.gray1}),e.state[uce.Jobs]&&Object(a.jsx)(Uie,{locationArea:r,date:o})]}),Object(a.jsxs)(pce,{style:{display:t===uce.Tasks?"flex":"none"},children:[!n.has(vx.OPERATIONS_TASKS_VIEW)&&Object(a.jsx)(wN,{color:_.gray1}),e.state[uce.Tasks]&&Object(a.jsx)(cce,{locationArea:r,date:o})]}),Object(a.jsxs)(pce,{style:{display:t===uce.Staff?"flex":"none"},children:[!n.has(vx.OPERATIONS_STAFF_VIEW)&&Object(a.jsx)(wN,{color:_.gray1}),e.state[uce.Staff]&&Object(a.jsx)(Yie,{locationArea:r,date:o})]}),Object(a.jsxs)(pce,{style:{display:t===uce.Vehicles?"flex":"none"},children:[!n.has(vx.OPERATIONS_VEHICLES_VIEW)&&Object(a.jsx)(wN,{color:_.gray1}),e.state[uce.Vehicles]&&Object(a.jsx)(ace,{locationArea:r,date:o})]})]})}})}}]),n}(p.PureComponent),bce=Object(sg.compose)(O.g)(hce);function fce(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n\n  :last-child {\n    border-right: 0;\n  }\n"]);return fce=function(){return e},e}function mce(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return mce=function(){return e},e}function jce(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  height: ","px;\n  flex-shrink: 0;\n  background: ",";\n  color: ",";\n"]);return jce=function(){return e},e}var vce=y.default.div(jce(),50,_.blue6,_.white),Oce=y.default.div(mce()),gce=y.default.div(fce(),_.white),xce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.style,r=e.children;return Object(a.jsxs)(vce,{className:"print-hide",style:n,children:[!!t&&Object(a.jsx)(Oce,{children:Object(a.jsx)(gce,{children:t})}),r]})}}]),n}(h.a.PureComponent);function yce(){var e=Object(f.a)(["\n  .schedule-print-divider {\n    margin: 20px 0;\n    width: 100%;\n    border-top: 1px solid gainsboro;\n  }\n\n  .schedule-print-divider:last-of-type {\n    display: none;\n  }\n\n  .schedule-print-table .task-note {\n    color: gray;\n    font-style: italic;\n    margin-top: 3px;\n  }\n"]);return yce=function(){return e},e}function _ce(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return _ce=function(){return e},e}function wce(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n\n  :last-child {\n    border-right: 0;\n  }\n"]);return wce=function(){return e},e}function Sce(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return Sce=function(){return e},e}var kce=y.default.div(Sce()),Cce=y.default.div(wce(),_.white),Nce=Object(y.default)(z7)(_ce()),Ece=Object(y.css)(yce()),Ace=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={date:pm()(),location:e.props.activeLocation},e.initLocation=function(){var t=e.props.locations;t.length&&e.onLocationChange(e.state.location||e.findPrimaryLocation()||t[0])},e.findPrimaryLocation=function(){return e.props.locations.find((function(e){return e.primary}))},e.dateTriggerRender=function(){var t=e.state.date;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[t.format("D MMMM YYYY"),Object(a.jsx)(z7,{style:{marginLeft:"10px"},color:_.white,name:Xf.Calendar})]})},e.timePickerRender=function(t){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Qy.a,{input:!1,timeFormat:!1,onChange:e.onDateChange})})},e.onDateChange=function(t){var n=e.props.onDateChange;n&&n(t),e.setState({date:t})},e.locationsTriggerRender=function(){var t=e.state.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(z7,{style:{marginLeft:"20px"},color:_.white,name:Xf.ArrowDown})]})},e.locationsItems=function(){var t=e.props.locations,n=e.state.location;return t.map((function(t){return{name:t.name,classNames:t.id===(n||{}).id?"active":"",onClick:function(){return e.onLocationChange(t)}}}))},e.onLocationChange=function(t){var n=e.props.onLocationChange;n&&n(t),e.setState({location:t})},e.prevDate=function(){var t=e.state.date,n=pm()(t).subtract(1,"d"),r=e.props.onDateChange;r&&r(n),e.setState({date:n})},e.nextDate=function(){var t=e.state.date,n=pm()(t).add(1,"d"),r=e.props.onDateChange;r&&r(n),e.setState({date:n})},e.print=function(){var t=e.props.runs,n=e.state,r=n.date,a=n.location;t.filter((function(e){return e.id>0})).length&&r&&a&&MV()({printable:"print-runs",type:"html",style:Ece.toString()})},e.showTemplatesSettings=function(){e.props.history.push("/operations/schedule/config/runs",{location:e.state.location})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initLocation(),this.onDateChange(pm()())}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;0===e.locations.length&&t.length&&this.initLocation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.locationsLoading,o=t.locations,i=t.onMapIconClick,c=t.showMap,s=t.runs,l=this.state.location;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(xce,{title:n,children:Object(a.jsxs)(kce,{children:[Object(a.jsxs)(Cce,{children:[Object(a.jsx)(nw,{trigger:function(){return e.dateTriggerRender()},renderInternal:e.timePickerRender}),Object(a.jsx)(Nce,{onClick:e.prevDate,style:{marginLeft:"30px"},color:_.white,name:Xf.ArrowLeft}),Object(a.jsx)(Nce,{onClick:e.nextDate,style:{transform:"rotateZ(180deg)",marginLeft:"10px"},color:_.white,name:Xf.ArrowLeft})]}),Object(a.jsxs)(Cce,{children:[r&&Object(a.jsx)(Nv,{size:30,color:_.blue6}),!o||o&&0===o.length?Object(a.jsx)("div",{children:"No locations"}):Object(a.jsx)(nw,{trigger:function(){return e.locationsTriggerRender()},items:e.locationsItems()})]}),Object(a.jsx)(Cce,{children:Object(a.jsx)(z7,{style:{cursor:"pointer",opacity:l?1:.5},color:_.white,onClick:i,name:c?Xf.LayoutBullets:Xf.LocationPin})}),Object(a.jsx)(Cce,{children:Object(a.jsx)(z7,{style:{cursor:"pointer",opacity:s.filter((function(e){return e.id>0})).length>0?1:.5},color:_.white,name:Xf.Printer,onClick:e.print})}),t.has(vx.OPERATIONS_RUNS_TEMPLATES_MANAGE)&&Object(a.jsx)(Cce,{children:Object(a.jsx)(z7,{style:{cursor:"pointer",opacity:l?1:.5,filter:"brightness(2)"},color:_.white,name:Xf.Setting,onClick:e.showTemplatesSettings})})]})})}})}}]),n}(h.a.PureComponent),Ice=Object(O.g)(Ace);function Tce(){var e=Object(f.a)(["\n  overflow: hidden auto;\n  border: 1px solid ",";\n  &.invalid{\n    border-color: ",";\n    border-width: 2px;\n  }\n"]);return Tce=function(){return e},e}function Rce(){var e=Object(f.a)(["\n  display: flex;\n  height: 50px;\n"]);return Rce=function(){return e},e}var Dce=y.default.div(Rce()),Mce=y.default.div(Tce(),_.gray2,_.red1),Lce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,activeTabId:Noe.Details,detailsValues:{},staffValues:{},vehiclesValues:{}},e.tabs=[{name:"Details",id:Noe.Details,onClick:function(){return e.setState({activeTabId:Noe.Details})}},{name:"Staff",id:Noe.Staff,onClick:function(){return e.setState({activeTabId:Noe.Staff})}},{name:"Vehicles",id:Noe.Vehicles,onClick:function(){return e.setState({activeTabId:Noe.Vehicles})}}],e.onDetailsSubmit=function(t){e.setState({detailsValues:t})},e.onStaffSubmit=function(t){e.setState({staffValues:t})},e.onVehiclesSubmit=function(t){e.setState({vehiclesValues:t})},e.submitCombine=Object(lj.a)(sj.a.mark((function t(){var r,a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.template,i=r.run,c=r.id,e.setState({loading:!0}),t.prev=2,t.next=5,a(Object(Wv.c)(coe+c));case 5:return t.next=7,a(Object(Wv.c)(poe+c));case 7:return t.next=9,a(Object(Wv.c)(Ooe+c));case 9:return s=e.state,l=s.detailsValues,u=s.staffValues,d=s.vehiclesValues,t.next=12,n._submitCombine(o,i,[l,u,d]);case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,,12,15]])}))),e.removeRun=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.template,o=n.run,i=n.onRemove,c=n.dispatch,t.next=3,c(iw("Confirm","Remove Run!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove run ",Object(a.jsx)("strong",{children:o.name}),"?"]})));case 3:if(!t.sent){t.next=11;break}if(e.setState({loading:!0}),!o.id){t.next=9;break}return t.next=9,Kq.removeTemplatedRun(r.id,o.id);case 9:null===i||void 0===i||i(o),e.setState({loading:!1});case 11:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state,t=e.loading,n=e.activeTabId,r=this.props,o=r.location,i=r.template,s=r.run,l=r.id,u=r.vehicles,d=(0,r.validateForm)(coe+l),p=Object(c.a)({date:"1800-01-01",location_id:o.id},s);return Object(a.jsxs)("div",{className:"d-flex flex-column h-100 position-relative",children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white,zIndex:80}),Object(a.jsx)(Dce,{children:Object(a.jsx)(iz,{selectedTabId:n,items:this.tabs})}),Object(a.jsx)(Mce,{className:"p-3 d-flex flex-column h-100 ".concat(d?"":"invalid"),children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"".concat(n===Noe.Details?"d-block":"d-none"),children:Object(a.jsx)(loe,{template:i,form:coe+l,onSubmit:this.onDetailsSubmit,initialValues:{name:s.name}},l)}),Object(a.jsx)("div",{className:"".concat(n===Noe.Staff?"d-block":"d-none"),children:Object(a.jsx)(boe,{template:i,run:p,form:poe+l,onSubmit:this.onStaffSubmit},l)}),Object(a.jsx)("div",{className:"".concat(n===Noe.Vehicles?"d-block":"d-none"),children:Object(a.jsx)(xoe,{template:i,run:p,vehicles:u,form:Ooe+l,onSubmit:this.onVehiclesSubmit},l)})]})}),Object(a.jsx)("div",{className:"mt-2",children:Object(a.jsx)(hC,{className:"d-inline-block",children:Object(a.jsx)(dC,{color:_.red1,colorOnHover:_.red1,onClick:this.removeRun,children:"Remove Run"})})})]})}}]),n}(p.Component);Lce._submitCombine=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a,o,i,c,s;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(a=Object(w.a)(r,3),o=a[0],i=a[1],c=a[2],s=[],n.id){e.next=8;break}return e.next=5,Kq.createTemplatedRun(t.id,{location_id:n.location_id,name:o.name});case 5:n=e.sent,e.next=9;break;case 8:o.name!==n.name&&s.push(Kq.updateTemplatedRun(t.id,n.id,o));case 9:return s.push(Lce.onAssignUsers(t,n,i)),s.push(Lce.onAssignVehicles(t,n,c)),e.next=13,Promise.all(s);case 13:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Lce.onAssignUsers=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a,o,i,c,s;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(n.assigned_users||[]).map((function(e){return e.id})),o=(r.selectedUsers||[]).map((function(e){return e.id})),i=Object(m.intersection)(a,o),c=Object(m.difference)(o,i),s=Object(m.difference)(a,i),e.next=7,Promise.all([Promise.all(c.map((function(e){return Kq.assignStaffToTemplatedRun(t.id,n.id,e)}))),Promise.all(s.map((function(e){return Kq.removeStaffFromTemplatedRun(t.id,n.id,e)})))]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}(),Lce.onAssignVehicles=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){var a,o,i,c,s;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=(n.assigned_vehicles||[]).map((function(e){return e.id})),o=(r.selectedVehicles||[]).map((function(e){return e.id})),i=Object(m.intersection)(a,o),c=Object(m.difference)(o,i),s=Object(m.difference)(a,i),e.next=7,Promise.all([Promise.all(c.map((function(e){return Kq.assignVehicleToTemplatedRun(t.id,n.id,e)}))),Promise.all(s.map((function(e){return Kq.removeVehicleFromTemplatedRun(t.id,n.id,e)})))]);case 7:case"end":return e.stop()}}),e)})));return function(t,n,r){return e.apply(this,arguments)}}();var Pce=Object(sg.compose)(Object(b.b)((function(e){return{validateForm:function(t){return Object(FI.a)(t)(e)}}})))(Lce);function Fce(){var e=Object(f.a)(["\n  flex: 0 0 33.333333%;\n  max-width: 33.333333%\n"]);return Fce=function(){return e},e}function Uce(){var e=Object(f.a)(["\n  background: ",";\n  border-bottom: 1px solid ",";\n"]);return Uce=function(){return e},e}function Bce(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return Bce=function(){return e},e}function Vce(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return Vce=function(){return e},e}var Jce=y.default.div(Vce()),qce=y.default.div(Bce()),zce=y.default.div(Uce(),_.gray2,_.gray2),Gce=y.default.div(Fce()),Wce="runs_def_tpl",Hce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={template:null,runs:[],vehicles:[],loading:!1},e.loadTemplates=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.templates.fetch({location_id:e.props.location.id,name:Wce});case 3:return n=t.sent,t.abrupt("return",n||[]);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",[]);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.createTemplate=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Kq.createRunTemplate({location_id:e.props.location.id,name:Wce});case 3:return n=t.sent,t.abrupt("return",n);case 7:return t.prev=7,t.t0=t.catch(0),t.abrupt("return",null);case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.prepareTemplate=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.loadTemplates();case 2:if(!(null===(r=t.sent)||void 0===r?void 0:r.length)){t.next=7;break}n=r[0],t.next=10;break;case 7:return t.next=9,e.createTemplate();case 9:n=t.sent;case 10:return e.setState({template:n}),t.abrupt("return",n);case 12:case"end":return t.stop()}}),t)}))),e.loadRuns=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,t.t0=n,t.t0){t.next=6;break}return t.next=5,e.prepareTemplate();case 5:t.t0=t.sent;case 6:if(!(r=t.t0)){t.next=13;break}return t.next=10,e.props.runs.fetch(r.id);case 10:o=t.sent,(null===(a=o)||void 0===a?void 0:a.length)||(o=e.defaultRuns),e.setState({runs:o});case 13:t.next=17;break;case 15:t.prev=15,t.t1=t.catch(0);case 17:case"end":return t.stop()}}),t,null,[[0,15]])})));return function(e){return t.apply(this,arguments)}}(),e.loadVehicles=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.location,t.next=3,Z4.searchVehicles(n.id);case 3:r=t.sent,e.setState({vehicles:r});case 5:case"end":return t.stop()}}),t)}))),e.loadConfigData=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!e.props.location){t.next=5;break}return e.setState({loading:!0}),t.next=4,Promise.all([e.loadRuns(),e.loadVehicles()]);case 4:e.setState({loading:!1});case 5:case"end":return t.stop()}}),t)}))),e.setRawTemplates=function(){var t,n=parseInt((null===(t=e.count.current)||void 0===t?void 0:t.value)||"");if(!isNaN(n)&&n>0){for(var r,a,o=e.state.runs,c=o.length,s=e.props.location,l=0;l<n;l++){a=0;do{r="".concat(s.code," Run ").concat(o.length+1+a++)}while(j.a.find(o,{name:r}));o.push({tmpId:"t-"+(Date.now()+o.length+1),location_id:s.id,name:r})}e.setState({runs:o}),setTimeout((function(){var t,n=i.a.findDOMNode(Object(iY.a)(e));null===n||void 0===n||null===(t=n.getElementsByClassName("run-wrapper")[c])||void 0===t||t.scrollIntoView()}))}},e.saveAllTemplatedRuns=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state,r=n.template,a=n.runs,e.setState({loading:!0}),t.prev=2,t.next=5,Promise.all(a.map((function(t){return e.validateTemplatedRun(r,t)})));case 5:return t.next=7,e.validateUniqRuns();case 7:return t.prev=7,t.next=10,Promise.all(a.map((function(t){return e.saveTemplatedRun(r,t)})));case 10:return t.next=12,e.loadRuns(r);case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:t.next=21;break;case 18:t.prev=18,t.t1=t.catch(2),Oj(uj.Danger,t.t1.message);case 21:e.setState({loading:!1});case 22:case"end":return t.stop()}}),t,null,[[2,18],[7,14]])}))),e.saveTemplatedRun=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,a=e.props,o=a.validateForm,i=a.getFormValues,c=r.id||r.tmpId,!o(coe+c)){t.next=9;break}return s=i(coe+c),l=i(poe+c),u=i(Ooe+c),t.next=9,Lce._submitCombine(n,r,[s,l,u]);case 9:t.next=13;break;case 11:t.prev=11,t.t0=t.catch(0);case 13:case"end":return t.stop()}}),t,null,[[0,11]])})));return function(e,n){return t.apply(this,arguments)}}(),e.validateTemplatedRun=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,o=a.dispatch,i=a.validateForm,c=r.id||r.tmpId,!i(coe+c)){t.next=6;break}return t.abrupt("return",!0);case 6:o(Object(Wv.c)(coe+c));case 7:throw Error("Run name is required");case 8:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.validateUniqRuns=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state.runs,r=e.props.getFormValues,a=n.map((function(e){return r(coe+(e.id||e.tmpId))})).map((function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{name:null===(t=e.name)||void 0===t?void 0:t.trim().toLowerCase()})})),j.a.uniqBy(a,"name").length===a.length){t.next=6;break}throw Error("Runs name must be unique");case 6:if(o=j.a.flatten(n.map((function(e){return r(Ooe+(e.id||e.tmpId)).selectedVehicles}))),j.a.uniqBy(o,"id").length===o.length){t.next=10;break}throw Error("Same vehicle cannot be assigned to multiple runs");case 10:case"end":return t.stop()}}),t)}))),e.onRunRemove=function(t,n){return function(){var t=e.state.runs;t.splice(n,1),e.setState({runs:t})}},e.close=function(){var t,n;null===(t=(n=e.props).onClose)||void 0===t||t.call(n)},e.count=h.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadConfigData()}},{key:"componentDidUpdate",value:function(e){var t,n;(null===(t=e.location)||void 0===t?void 0:t.id)!==(null===(n=this.props.location)||void 0===n?void 0:n.id)&&this.loadConfigData()}},{key:"render",value:function(){var e=this,t=this.props,n=t.runs.loading,r=t.location,o=this.state,i=o.template,c=o.runs,s=o.vehicles;return Object(a.jsxs)(Jce,{className:"d-flex flex-column h-100 position-relative",children:[(n||this.state.loading)&&Object(a.jsx)(Nv,{size:40,color:_.white,zIndex:110}),Object(a.jsxs)(zce,{className:"d-flex align-items-center px-5 py-2",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsxs)("div",{className:"mr-3",children:["Create ",Object(a.jsx)("strong",{children:c.length})," run(s) each day."]}),Object(a.jsx)("div",{className:"ml-5 mr-3",children:"Add"}),Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)("input",{className:"form-control",ref:this.count,type:"number",min:1,max:50,defaultValue:1,onKeyPress:function(t){/enter/i.test(t.key)&&setTimeout(e.setRawTemplates,100)}})}),Object(a.jsx)("div",{className:"mr-3",children:"more run(s)"}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-info",onClick:this.setRawTemplates,children:"Add"})})]}),Object(a.jsxs)("div",{className:"d-flex flex-grow-1 align-items-center justify-content-end",children:[Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-dark mr-3",onClick:this.close,children:"Close"})}),Object(a.jsx)("div",{children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.saveAllTemplatedRuns,disabled:!c.length,children:"Save All"})})]})]}),Object(a.jsx)(qce,{className:"d-flex h-100 px-5 py-3",children:null===c||void 0===c?void 0:c.map((function(t,n){return Object(a.jsx)(Gce,{className:"h-100 run-wrapper",children:Object(a.jsx)("div",{className:"mr-3 h-100",children:Object(a.jsx)(Pce,{location:r,template:i,run:t,vehicles:s,id:t.id||t.tmpId,onRemove:e.onRunRemove(t,n)})})},t.id||t.tmpId)}))})]})}},{key:"defaultRuns",get:function(){var e=this.props.location;return[{tmpId:"t-"+(Date.now()+1),name:"".concat(e.code," Run 1"),location_id:e.id}]}}]),n}(p.Component),Yce=Object(sg.compose)(Object(b.b)((function(e){return{validateForm:function(t){return Object(FI.a)(t)(e)},getFormValues:function(t){return Object(GM.a)(t)(e)}}})),oj({templates:{fetch:Kq.getRunsTemplates},runs:{fetch:Kq.getTemplatedRuns}}))(Hce);function Qce(){var e=Object(f.a)(["\n  height: 100%;\n  overflow: auto;\n"]);return Qce=function(){return e},e}var Kce=y.default.div(Qce()),Zce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var o=arguments.length,i=new Array(o),l=0;l<o;l++)i[l]=arguments[l];return(r=t.call.apply(t,[this].concat(i))).state={date:null,showMap:!1,location:null===(e=r.props.location.state)||void 0===e?void 0:e.location,loading:!1,showTaskSettingsModal:!1,addTaskToRunConfig:{},runsTemplate:void 0,templatedRuns:void 0},r.detectTimeConflictForStaff=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var a,o,i,c;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a=j.a.flatten(j.a.map(r.props.runs.data,"assigned_slots")),o=t.assigned_users.concat(n.assigned_users||[]),i={},j.a.forEach(o,(function(e){c=j.a.filter(a,(function(t){return j.a.find(t.assigned_users,{id:e.id})})),j.a.forEach(c,(function(t){pm.a.max(pm()(t.starts_at),pm()(n.starts_at))<pm.a.min(pm()(t.ends_at),pm()(n.ends_at))&&(i[e.id]={user:e,task:t})}))})),e.abrupt("return",!j.a.isEmpty(i)&&j.a.values(i));case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.createRunsFromTemplate=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,a,o,i,s;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,n=r.props.runs,!t.job_run_template_id){e.next=12;break}return e.next=5,Kq.createRunsFromTemplate(t.job_run_template_id,{date:t.date,run_id:t._id});case 5:a=e.sent.map((function(e){return Object(c.a)(Object(c.a)({},{assigned_users:[],assigned_vehicles:[],assigned_slots:[]}),e)})),(o=a.find((function(e){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=t.name)||void 0===r?void 0:r.toLowerCase())})))&&(t.id=o.id,delete t.job_run_template_id),n.data||(n.data=[]),a.forEach((function(e){var t=n.data.findIndex((function(t){var n,r;return(null===(n=e.name)||void 0===n?void 0:n.toLowerCase())===(null===(r=t.name)||void 0===r?void 0:r.toLowerCase())}));t>-1?n.data[t]=e:n.data.push(e)})),e.next=18;break;case 12:if(t.id&&!(t.id<1)){e.next=18;break}return e.next=15,Kq.createRun(t);case 15:i=e.sent,t.id=i.id,t.job_run_template_id&&delete t.job_run_template_id;case 18:return setTimeout((function(){Gy.emit(Ix.RunsCreatedFromTemplate,t)}),1),e.abrupt("return",t);case 22:return e.prev=22,e.t0=e.catch(0),Gy.emit(Ix.RunsCreatedFromTemplate,null),(null===e.t0||void 0===e.t0?void 0:e.t0.status_code)===ox&&(s=j.a.first(j.a.flatten(j.a.values(e.t0.fields))),Oj(uj.Danger,s)),e.abrupt("return",null);case 27:case"end":return e.stop()}}),e,null,[[0,22]])})));return function(t){return e.apply(this,arguments)}}(),r.addEmptyRun=Object(lj.a)(sj.a.mark((function e(){var t,n,a,o,i,c,s;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=r.props.runs,n=r.state,a=n.date,o=n.location,t.data||(t.data=[]),c=0;do{i="".concat(o.code," Run ").concat(t.data.length+1+c++)}while(j.a.find(t.data,{name:i}));return s={id:0,name:i,date:pm()(a).format(av),location_id:o.id,assigned_slots:[],assigned_vehicles:[],assigned_users:[]},t.data.push(s),setTimeout((function(){r.forceUpdate()}),1),e.abrupt("return",s);case 9:case"end":return e.stop()}}),e)}))),r.removeEmptyRun=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,a;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.props.runs,-1!==(a=n.data.indexOf(t))&&(n.data.splice(a,1),setTimeout((function(){r.forceUpdate()}),1)),e.abrupt("return",t);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.loadRuns=Object(lj.a)(sj.a.mark((function e(){var t,n,a,o,i,c,s,l,u,d,p,h,b,f;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.state,n=t.date,a=t.location,r.setState({loading:!0}),o=r.props.dispatch,!n||!a){e.next=32;break}return e.next=6,o(V1({date:n.format(ov),location_id:a.id}));case 6:if((i=r.props.runs).loading||!i||!i.data){e.next=32;break}if(s=r.state,l=s.runsTemplate,u=s.templatedRuns,void 0!==l){e.next=15;break}return e.next=12,Kq.getRunsTemplates({location_id:a.id,name:Wce});case 12:(null===(d=e.sent)||void 0===d?void 0:d.length)>0?l=d[0]:(l=null,u=[]),r.setState({runsTemplate:l,templatedRuns:u});case 15:if(!l||void 0!==u){e.next=20;break}return e.next=18,Kq.getTemplatedRuns(l.id);case 18:u=e.sent,r.setState({templatedRuns:u});case 20:if(!(null===(c=u)||void 0===c?void 0:c.length)){e.next=27;break}b=null===(p=u)||void 0===p?void 0:p.map((function(e,t){return(h=j.a.find(i.data,{name:e.name}))?h:(e._id=e._id||e.id,e.id=-1*t-1,e.date=pm()(n).format(av),e.assigned_slots=[],e.location_id=a.id,e)})),f=Object(m.differenceBy)(i.data||[],b||[],"name"),i.data=b.concat(f),r.forceUpdate(),e.next=32;break;case 27:if(0!==i.data.length){e.next=32;break}return e.next=30,r.addEmptyRun();case 30:e.sent.id=-1;case 32:r.setState({loading:!1});case 33:case"end":return e.stop()}}),e)}))),r.debouncedLoadRuns=Object(m.debounce)(r.loadRuns,100),r.eventListeners=[Gy.listen(Ix.TaskWasAddedToRun,r.debouncedLoadRuns),Gy.listen(Ix.TaskWasRemovedFromRun,r.debouncedLoadRuns),Gy.listen(Ix.TaskWasUpdated,r.debouncedLoadRuns),Gy.listen(Ix.CreateRunsFromTemplate,r.createRunsFromTemplate),Gy.listen(Ix.EmptyRunRemoved,r.removeEmptyRun)],r.onDateChange=function(e){r.setState({date:e}),r.debouncedLoadRuns()},r.onLocationChange=function(e){r.setState({location:e,runsTemplate:void 0,templatedRuns:void 0}),r.debouncedLoadRuns()},r.toggleShowMap=function(){var e=r.state,t=e.location,n=e.showMap;t&&r.setState({showMap:!n})},r.addNewRun=Object(lj.a)(sj.a.mark((function e(){var t,n,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=r.props.runs,n=r.state,a=n.date,o=n.location,!a||!o){e.next=12;break}return r.setState({loading:!0}),e.prev=4,e.next=7,Kq.createRun({location_id:o.id,date:a.format(av),name:"Run ".concat(t.data?t.data.length+1:1)});case 7:return e.next=9,r.loadRuns();case 9:return e.prev=9,r.setState({loading:!1}),e.finish(9);case 12:case"end":return e.stop()}}),e,null,[[4,,9,12]])}))),r.openTaskSettingModal=function(e){r.setState({showTaskSettingsModal:!0,addTaskToRunConfig:e})},r.closeTaskSettingModal=function(){r.setState({showTaskSettingsModal:!1})},r.onAddTaskToRun=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,o,i,c,s,l,u,d,p,h;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=r.state,o=n.addTaskToRunConfig,i=o.runId,c=o.task,s=o.assigned_slot,l=n.location,u=r.props.runs.data.find((function(e){return+e.id===+i})),e.next=4,r.createRunsFromTemplate(u);case 4:if(d=e.sent.id,!l){e.next=13;break}return e.next=8,r.detectTimeConflictForStaff(u,t);case 8:p=e.sent,h=!p,Object(lj.a)(sj.a.mark((function e(){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!p){e.next=4;break}return e.next=3,r.props.dispatch(iw("Confirm","Assign Staff to Task",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:[1===p.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("strong",{children:p[0].user.full_name})," is"]}):Object(a.jsx)(a.Fragment,{children:"Following staff members are"})," already booked between ",t.starts_at.format(sv)," to ",t.ends_at.format(sv),"."]}),p.length>1&&Object(a.jsx)("p",{children:p.map((function(e){return Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:e.user.full_name})})}))}),Object(a.jsx)("p",{children:"Are you sure you want to proceed?"})]})));case 3:h=e.sent;case 4:if(!h){e.next=19;break}if(n={starts_at:fv(t.starts_at,!0),ends_at:fv(t.ends_at,!0),is_confirmed:t.is_confirmed,scheduling_note:t.scheduling_note},!s){e.next=16;break}if(s.job_run_id===+d){e.next=12;break}return e.next=10,iq.moveTaskSlotToRun(+d,s.id,n);case 10:e.next=14;break;case 12:return e.next=14,iq.updateTaskSlotToRun(+d,s.id,n);case 14:e.next=18;break;case 16:return e.next=18,iq.addTaskSlotToRun(+d,c.id,n);case 18:Gy.emit(Ix.TaskWasAddedToRun);case 19:case"end":return e.stop()}}),e)})))(),e.next=14;break;case 13:Gy.emit(Ix.TaskWasAddedToRun);case 14:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.renderPrintVersion=function(){var e=r.props.runs,t=r.state,n=t.location,o=t.date,i=n,c=o;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h3",{children:["Schedule for ",i&&i.name,", ",c&&c.format(iv)]}),e.data&&e.data.filter((function(e){return e.id>0})).map((function(t,n){var r;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:t.name}),Object(a.jsxs)("div",{children:["Assigned staff: ",t.assigned_users.map((function(e){return mm(e).name})).join(", ")]}),Object(a.jsxs)("div",{children:["Assigned vehicles:"," ",t.assigned_vehicles.map((function(e){return"".concat(e.make," ").concat(e.model," (").concat(e.type,", ").concat(e.registration,")")})).join(", ")]}),(null===(r=t.assigned_slots)||void 0===r?void 0:r.length)>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("table",{className:"schedule-print-table",children:Object(a.jsx)("tbody",{children:t.assigned_slots.sort((function(e,t){return pm()(e.starts_at).isAfter(pm()(t.starts_at))?1:-1})).map((function(e,n){var r=e.job_task,o=Object(rj.a)(e,["job_task"]);return Object(a.jsxs)("tr",{children:[Object(a.jsxs)("td",{className:"task-number",children:["#",n+1,"\xa0\xa0\xa0"]}),Object(a.jsxs)("td",{children:[r.job&&Object(a.jsxs)(a.Fragment,{children:[r.job.site_address&&r.job.site_address.full_address,Object(a.jsxs)("div",{children:[r.type.name,", #",r.job.id,i&&"-".concat(i.code)]})]}),Object(a.jsxs)("div",{children:[pm()(o.starts_at).format(sv),"\xa0-\xa0",pm()(o.ends_at).format(sv)]}),r.internal_note&&Object(a.jsx)("div",{className:"task-note",children:r.internal_note}),o.scheduling_note&&Object(a.jsx)("div",{className:"task-note",children:o.scheduling_note}),n<t.assigned_slots.length-1&&Object(a.jsx)("br",{})]})]},o.id)}))})})]})]}),n<e.data.length-1&&Object(a.jsx)("div",{className:"schedule-print-divider"})]},t.id)}))]})},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Rm.status("Schedule")}},{key:"componentWillUnmount",value:function(){Rm.reset(),this.props.dispatch({type:F1}),this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.runs,o=this.state,i=o.showMap,c=o.loading,s=o.templatedRuns,l=o.location,u=o.date,d=o.showTaskSettingsModal,p=o.addTaskToRunConfig;return Object(a.jsx)(Cx.Consumer,{children:function(t){var o;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Operations"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/schedule",children:"Schedule"}),Object(a.jsx)("div",{style:{position:"absolute",right:"100%",display:"none"},children:Object(a.jsx)("div",{id:"print-runs",children:e.renderPrintVersion()})}),d&&l&&Object(a.jsx)(mz,{addTaskToRunConfig:p,isOpen:d,onClose:e.closeTaskSettingModal,edit:!1,taskTypes:[],onSave:e.onAddTaskToRun,task:p.task,mode:dz.ADD_TASK_TO_RUN,isSchedulingActive:!0,doSave:!1,doAssign:!1}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(Ice,{title:"Schedule",locations:n,activeLocation:l,locationsLoading:!1,onMapIconClick:e.toggleShowMap,showMap:i,onDateChange:e.onDateChange,onLocationChange:e.onLocationChange,runs:r.loading?[]:r.data||[]}),Object(a.jsx)(Kce,{className:"d-flex flex-row align-items-stretch flex-grow-1 position-relative",children:i&&l?Object(a.jsx)(Eae,{runs:r.data||[],loadingRuns:r.loading,location:l,date:u}):Object(a.jsxs)(a.Fragment,{children:[t.has(vx.OPERATIONS_RUNS_MANAGE)&&Object(a.jsx)(bce,{locationArea:l,date:u,ready:r.ready}),Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[(!l||!u)&&Object(a.jsx)(wN,{zIndex:110}),(r.loading||c||void 0===s)&&Object(a.jsx)(Nv,{size:40,color:_.white,zIndex:110}),Object(a.jsx)("div",{className:"h-100 w-100 position-absolute",children:Object(a.jsx)(oie,{createNewRun:e.addEmptyRun,loadRuns:e.loadRuns,runs:r.data||[],openModal:e.openTaskSettingModal,location:l,date:u},null===(o=r.data)||void 0===o?void 0:o.length)})]})]})})]})]})}})}}]),n}(p.PureComponent),Xce=Object(sg.compose)(O.g,Object(b.b)((function(e){return{locations:e.user.locations,runs:e.runsFromLocation}})),Object(nae.DragDropContext)(aae.a))(Zce),$ce=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.jobId;return Object(a.jsx)(v.b,{to:"/job/".concat(e,"/details"),children:Object(a.jsx)("button",{className:"btn btn-outline-primary",children:"View Job"})})}}]),n}(p.PureComponent),ese=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params.id;return Object(a.jsx)("div",{children:Object(a.jsx)($ce,{jobId:parseInt(e)})})}},{key:"renderContentPage",value:function(){return Object(a.jsx)(JC,{children:"UsageAndActualsCrewReportPage"})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),tse=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob}})))(ese);function nse(){var e=Object(f.a)(["\n  thead {\n    tr {\n      th {\n        border-bottom: 1px solid ",";\n        &:first-child {\n          color: ",";\n        }\n      }\n    }\n  }\n\n  tbody {\n    tr {\n      border-top: 1px solid ",";\n    }\n  }\n"]);return nse=function(){return e},e}var rse=Object(y.default)(tU)(nse(),_.gray2,_.black1,_.gray2);function ase(){var e=Object(f.a)(["\n  margin-right: 10px;\n  padding-top: 3px;\n"]);return ase=function(){return e},e}function ose(){var e=Object(f.a)(["\n  border: 1px "," solid;\n  border-radius: 4px;\n  color: ",";\n  background-color: ",";\n  padding: 5px 7px 3px 7px;\n  font-size: ",";\n  font-weight: ",";\n"]);return ose=function(){return e},e}var ise=y.default.span(ose(),_.blue1,_.blue1,_.white,sm.smaller,lm.medium),cse=y.default.span(ase()),sse="EquipmentCustomForm",lse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={endDateDisabled:!1},e.loadOptions=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={term:n,job_id:e.props.jobId},t.next=3,ZW.searchEquipment(r);case 3:return a=t.sent,t.abrupt("return",a.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.searchJobs=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zy.filterJobs({term:t});case 2:if(e.t2=n=e.sent,e.t1=null===e.t2,e.t1){e.next=6;break}e.t1=void 0===n;case 6:if(!e.t1){e.next=10;break}e.t3=void 0,e.next=11;break;case 10:e.t3=n.data;case 11:if(e.t0=e.t3,e.t0){e.next=14;break}e.t0=[];case 14:return e.abrupt("return",e.t0);case 15:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadOptions=Qv()(e.loadOptions,500),e.debouncedSearchJobs=Qv()(e.searchJobs,500),e.onSelectEquipment=function(t){var n=e.props.change;n("unit_cost_to_me",t.category.default_buy_cost_per_interval),n("unit_price_to_charge",t.charging_interval.charging_rate_per_interval)},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.onSubmit,o=r.afterSubmit,i=r.initialValues,c=r.jobId,!a){t.next=3;break}return t.abrupt("return",a(n));case 3:if(t.prev=3,!c){t.next=17;break}if(!n.id){t.next=14;break}if(!n.ended_at||!n.ended_at.isValid()||pm()(i.ended_at).isSame(n.ended_at)){t.next=9;break}return t.next=9,zy.updateJobEquipmentFinishUsing(c,n.id,fv(n.ended_at,!0));case 9:if(i.intervals_count_override===n.intervals_count_override){t.next=12;break}return t.next=12,zy.updateJobEquipmentOverride(c,n.id,n.intervals_count_override);case 12:t.next=17;break;case 14:return s=n.equipment.id,t.next=17,zy.addEquipmentToJob(c,{equipment_id:s,started_at:fv(n.started_at,!0)||void 0,ended_at:fv(n.ended_at,!0)||void 0});case 17:null===o||void 0===o||o(),t.next=23;break;case 20:return t.prev=20,t.t0=t.catch(3),t.abrupt("return",ix(t.t0));case 23:case"end":return t.stop()}}),t,null,[[3,20]])})));return function(e){return t.apply(this,arguments)}}(),e.getDeployOnSiteSearchPlaceholder=function(e){var t,n;return e?Object(a.jsxs)("div",{children:["#",(null===e||void 0===e?void 0:e.id)||"",(null===e||void 0===e?void 0:e.assigned_location)?"-".concat(null===e||void 0===e?void 0:e.assigned_location.code):"",Object(a.jsx)("b",{children:(null===e||void 0===e?void 0:e.customer_contact)?" Customer:":""})," ",(null===e||void 0===e?void 0:e.customer_contact)?null===e||void 0===e||null===(t=e.customer_contact)||void 0===t?void 0:t.contact_name:"",Object(a.jsx)("b",{children:(null===e||void 0===e?void 0:e.site_address)?" Address:":""})," ",(null===e||void 0===e?void 0:e.site_address)?null===e||void 0===e||null===(n=e.site_address)||void 0===n?void 0:n.full_address:"",Object(a.jsx)("b",{children:(null===e||void 0===e?void 0:e.claim_number)?" Claim No:":""})," ",(null===e||void 0===e?void 0:e.claim_number)?null===e||void 0===e?void 0:e.claim_number:""]}):Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.edit,n=e.endedAt,r=e.change;t&&n&&n.isValid()&&this.setState({endDateDisabled:!0}),t||r("started_at",pm()())}},{key:"formatTotalAmount",value:function(e,t){return t?vm(e):"--"}},{key:"formatFormPrice",value:function(e){return vm(e)}},{key:"renderEquipmentOption",value:function(e){var t;return Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)(cse,{children:null===(t=e.equipment_category)||void 0===t?void 0:t.name}),Object(a.jsx)(ise,{children:e.barcode})]})}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.edit,o=t.endedAt,i=t.jobId,c=t.submitting,s=t.hideEquipmentField,l=t.isCustom;return Object(a.jsxs)("form",{onSubmit:n(this.onSubmit),autoComplete:"off",id:sse,children:[c&&Object(a.jsx)(Nv,{size:40,color:_.white}),!s&&Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col",children:[i&&Object(a.jsx)(Hv.a,{name:"equipment",validate:Dv,component:NO,getOptionValue:function(e){return e.id},getOptionLabel:this.renderEquipmentOption,placeholder:"Enter barcode or name of equipment",loadOptions:this.debouncedLoadOptions,label:"Equipment Item",onChange:this.onSelectEquipment,disabled:r}),!i&&Object(a.jsx)(Hv.a,{name:"job",validate:Dv,component:NO,getOptionValue:function(e){return e.id},getOptionLabel:function(t){return e.getDeployOnSiteSearchPlaceholder(t)},placeholder:"Search job, customer name, address, claim number...",loadOptions:this.debouncedSearchJobs,label:"Job"})]})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"unit_cost_to_me",disabled:!l,component:yg,label:"Unit Cost to Me",currency:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"unit_price_to_charge",disabled:!l,component:yg,label:"Unit Price to Charge",currency:!0})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"total_amount",disabled:!l,component:yg,label:"Total Amount",currency:!0})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"started_at",validate:Dv,component:s_,showTime:!0,label:"Start Date",disabled:r})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"ended_at",component:s_,showTime:!0,label:"End Date",disabled:this.state.endDateDisabled})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"intervals_count_override",validate:[Bv],component:yg,type:"number",min:0,label:"Period on site",disabled:!(o&&o.isValid())||!r})})]})]})}}]),n}(p.PureComponent),use=Object(sg.compose)(Object(jv.a)({form:sse,enableReinitialize:!0}),Object(ug.a)({endedAt:"ended_at"}))(lse),dse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e.renderBody=function(){var t=e.props,n=t.equipment,r=t.jobId;return Object(a.jsx)(use,{onSubmit:e.sendCustomData,edit:!!n,initialValues:n&&uW(n),jobId:r})},e.sendCustomData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.jobId,o=r.onClose,i=r.equipment,c=r.dispatch,e.setState({loading:!0}),t.prev=2,!i){t.next=13;break}if(!n.ended_at||!n.ended_at.isValid()||pm()(i.ended_at).isSame(n.ended_at)){t.next=8;break}return t.next=7,zy.updateJobEquipmentFinishUsing(a,i.id,n.ended_at.utc().format(ov));case 7:s=t.sent;case 8:if(i.intervals_count_override===n.intervals_count_override){t.next=11;break}return t.next=11,zy.updateJobEquipmentOverride(a,i.id,n.intervals_count_override);case 11:t.next=18;break;case 13:return l=n.equipment.id,t.next=16,zy.addEquipmentToJob(a,{equipment_id:l,started_at:n.started_at&&n.started_at.utc().format(ov),ended_at:n.ended_at&&n.ended_at.utc().format(ov)});case 16:s=t.sent,c(gH(a));case 18:return c(vH(a)),o(),e.setState({loading:!1}),t.abrupt("return",s);case 24:return t.prev=24,t.t0=t.catch(2),e.setState({loading:!1}),t.abrupt("return",ix(t.t0));case 28:case"end":return t.stop()}}),t,null,[[2,24]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"renderFooter",value:function(){var e=this.props.equipment;return Object(a.jsx)(Xg,{className:"btn btn-primary",form:sse,children:e?"Save":"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.equipment;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:r?"Edit Equipment":"Add Equipment",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function pse(){var e=Object(f.a)(["\n  fill: ",";\n"]);return pse=function(){return e},e}function hse(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  font-weight: ",";\n"]);return hse=function(){return e},e}function bse(){var e=Object(f.a)(["\n  border-radius: 5px;\n  background: ",";\n  height: 45px;\n  width: 230px;\n  position: absolute;  \n  left: 50%;\n  margin-left: -100px;\n  display: "," !important;\n"]);return bse=function(){return e},e}var fse=y.default.div(bse(),_.menu,(function(e){return e.hidden?"none":"flex"})),mse=y.default.div(hse(),_.white,lm.bold),jse=Object(y.default)(cm)(pse(),_.white),vse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.hidden,r=e.icons;return Object(a.jsxs)(fse,{className:"d-flex flex-row align-content-center",hidden:n,children:[Object(a.jsx)(um.a,{className:"overlapping",id:"delete-all-tooltip",effect:"solid"}),Object(a.jsxs)(mse,{className:"mr-auto align-self-center",children:[t," selected "]}),r]})}}]),n}(p.PureComponent),Ose=function(e,t){return ev.patch("/v1/jobs/".concat(e,"/equipment/bulk"),{ids:Object(aj.a)(t)})},gse=function(e,t){return ev.post("/v1/jobs/".concat(e,"/assessment-reports/update-job-usages-counter"),{id:Object(aj.a)(t),in_report_used_count:1,modal:"job_equipment"})};function xse(){var e=Object(f.a)(["\n  margin-right: 10px;\n"]);return xse=function(){return e},e}function yse(){var e=Object(f.a)(["\n  color: ",";\n  font-size: ",";\n"]);return yse=function(){return e},e}function _se(){var e=Object(f.a)(["\n  padding-right: 50px !important;\n"]);return _se=function(){return e},e}function wse(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return wse=function(){return e},e}function Sse(){var e=Object(f.a)(["\n  vertical-align: top;\n"]);return Sse=function(){return e},e}var kse,Cse=Object(y.default)(rN)(Sse()),Nse=y.default.div(wse()),Ese=y.default.td(_se()),Ase=y.default.span(yse(),_.gray5,sm.smaller),Ise=y.default.span(xse()),Tse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1,showEditModal:!1,equipmentForEditing:void 0,allSelected:!1,selectedEquipmentIds:[],hideMultiselect:!0},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.onCustomAdd=function(){e.setState({equipmentForEditing:void 0}),e.onOpenModal()},e.deleteEquipmentFromJob=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(iw("Confirm","Delete Equipment: ".concat(n.equipment.model," ?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,zy.deleteJobEquipment(parseInt(o),n.id);case 7:e.loadEquipments();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editEquipment=function(t){e.setState({equipmentForEditing:t}),e.onOpenModal()},e.markAsUsed=function(t){var n=0==t.in_report_used_count?1:0,r={modal:"job_equipment",id:t.id,in_report_used_count:n};e.PostMarkasUsed(r,t.job_id)},e.PostMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadEquipments(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.equipmentMenuItems=function(t,n,r){var a=t.has(vx.JOBS_USAGE_EQUIPMENT_UPDATE)&&t.has(vx.JOBS_USAGE_EQUIPMENT_MANAGE),o=t.has(vx.JOBS_USAGE_EQUIPMENT_DELETE)&&t.has(vx.JOBS_USAGE_EQUIPMENT_MANAGE),i=0==n.in_report_used_count?"Mark as used":"Mark as unused",c=n.invoice_item_id&&n.invoice_item_id>0;return[{name:"Edit item",disabled:!a||r||c,onClick:function(){return e.editEquipment(n)}},{name:i,disabled:!a||r||c,onClick:function(){return e.markAsUsed(n)}},{type:"divider"},{name:"Delete",disabled:!o||r||c,onClick:function(){return e.deleteEquipmentFromJob(n)}}]},e.renderMarkAsRead=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(z7,{name:Xf.Check,color:_.green0})})},e.selectAll=function(){var t=e.props.currentJobEquipments;e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&t.data&&t.data.length>0?e.setState({selectedEquipmentIds:t.data.map((function(e){return e.id}))}):e.setState({selectedEquipmentIds:[]})}))},e.toggleSelection=function(t){var n=e.props.currentJobEquipments.data,r=Object(aj.a)(e.state.selectedEquipmentIds);r.includes(t)?(r=r.filter((function(e){return e!==t})),e.setState({selectedEquipmentIds:r,allSelected:r.length===(null===n||void 0===n?void 0:n.length)})):(r.push(t),e.setState({selectedEquipmentIds:Object(aj.a)(r),allSelected:r.length===(null===n||void 0===n?void 0:n.length)}))},e.EquipmentIsSelected=function(t){var n=e.state.selectedEquipmentIds;return!!n&&n.includes(t)},e.toggleMultiselectView=function(){e.setState({hideMultiselect:!e.state.hideMultiselect})},e.multiEquipmentDelete=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match.params.id,!((o=e.state.selectedEquipmentIds).length>0)){t.next=20;break}return t.next=5,r(iw("Confirm","Delete selected Equipment item(s)?","Are you sure you want to delete the selected item(s)? This action cannot be undone!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=14;break}return t.next=10,Ose(+a,Object(aj.a)(o));case 10:e.setState({selectedEquipmentIds:[],allSelected:!1}),e.loadEquipments(),t.next=15;break;case 14:return t.abrupt("return",Promise.resolve());case 15:t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 20:case"end":return t.stop()}}),t,null,[[6,17]])}))),e.multiEquipmentMarkAsUsed=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.match.params.id,!((o=e.state.selectedEquipmentIds).length>0)){t.next=20;break}return t.next=5,r(iw("Confirm","Mark as used selected equipment items?","Only approved selected item(s) will be marked as used!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=14;break}return t.next=10,gse(+a,Object(aj.a)(o));case 10:e.setState({selectedEquipmentIds:[],allSelected:!1}),e.loadEquipments(),t.next=15;break;case 14:return t.abrupt("return",Promise.resolve());case 15:t.next=20;break;case 17:return t.prev=17,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 20:case"end":return t.stop()}}),t,null,[[6,17]])}))),e.multiActionIcons=function(){var t=e.state.selectedEquipmentIds;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as used","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.markAsReadGray,onClick:e.multiEquipmentMarkAsUsed})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Delete selected records","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.Trash,onClick:e.multiEquipmentDelete})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadEquipments()}},{key:"loadEquipments",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.id;t(vH(parseInt(n))),t(gH(parseInt(n)))}},{key:"renderOnSiteTag",value:function(e){var t=e.ended_at?"":"on-site";return Object(a.jsx)(Cse,{tag:{name:t,color:_.orange1}})}},{key:"renderOnSiteLabel",value:function(e){var t=e.ended_at?e.ended_at:new Date,n="";if("each"===e.interval)n="Each";else{var r=pm()(t).diff(pm()(e.started_at),e.interval),o=r>1?e.interval+"s":e.interval;n=r||r>=0?"".concat(r+1," ").concat(o," onsite"):""}var i=e.ended_at?"".concat(pm()(e.started_at).format(lv)," - ").concat(pm()(e.ended_at).format(lv)):"";return Object(a.jsx)(a.Fragment,{children:i?Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("span",{children:n}),Object(a.jsx)(Ase,{children:i})]}):Object(a.jsx)("span",{children:n})})}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.match.params.id,r=t.job,o=r.data&&r.data.latest_status.status===zj.Closed||!r.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var r=t.has(vx.JOBS_USAGE_VIEW),i=t.has(vx.JOBS_USAGE_EQUIPMENT_CREATE);return r?Object(a.jsx)("div",{children:Object(a.jsxs)(Nse,{children:[Object(a.jsx)($ce,{jobId:parseInt(n)}),Object(a.jsx)(um.a,{className:"overlapping",id:"view-multiselect",effect:"solid",place:"bottom"}),i&&Object(a.jsx)(Xg,{className:"btn",onClick:e.onCustomAdd,style:{marginLeft:"10px"},disabled:o,children:"Add Equipment"})]})}):null}})}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:7,children:"No items found"})})}},{key:"renderContentPage",value:function(){var e=this,t=this.props,n=t.job,r=t.currentJobEquipments,o=r.data,i=r.loading,c=t.job.loading,s=t.match.params.id,l=t.dispatch,u=this.state,d=u.showModal,p=u.equipmentForEditing,h=u.hideMultiselect,b=u.selectedEquipmentIds,f=n.data&&n.data.latest_status.status===zj.Closed||!n.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[n.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(n.data.id),children:"Usage And Actuals"}),n.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(n.data.id,"/equipment"),children:"Equipment"}),d&&Object(a.jsx)(dse,{jobId:parseInt(s),dispatch:l,onClose:e.onCloseModal,isOpen:d,equipment:p}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[i&&!c&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(JC,{style:{minHeight:"100px"},children:[Object(a.jsx)(vse,{hidden:h,icons:e.multiActionIcons(),selected:b.length}),Object(a.jsxs)(rse,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[!h&&Object(a.jsx)("th",{children:Object(a.jsx)(nI,{size:15,value:e.state.allSelected,onChange:e.selectAll})}),Object(a.jsx)("th",{children:"Equipment"}),Object(a.jsx)("th",{children:"Name"}),Object(a.jsx)("th",{}),Object(a.jsx)("th",{children:"Duration"}),Object(a.jsx)("th",{children:"Invoice Id"}),Object(a.jsx)("th",{children:"Amount Ex GST"}),Object(a.jsx)("th",{children:"Added By"}),Object(a.jsx)("th",{}),Object(a.jsx)("th",{children:Object(a.jsx)(J_,{"data-tip":"Show/Hide multiselect column","data-for":"view-multiselect",className:"align-self-center",children:Object(a.jsx)(cm,{name:Xf.BulletList,size:20,onClick:e.toggleMultiselectView})})})]})}),Object(a.jsxs)("tbody",{children:[o&&o.length>0?o.map((function(n,r){var o,i,c;return Object(a.jsxs)("tr",{children:[!h&&Object(a.jsx)(Ese,{children:Object(a.jsx)(nI,{size:15,value:e.EquipmentIsSelected(+n.id),onChange:function(){return e.toggleSelection(+n.id)}})}),Object(a.jsx)(Ese,{style:{whiteSpace:"nowrap"},children:pm()(n.started_at).format(iv)}),Object(a.jsxs)(Ese,{style:{width:"100%"},children:[Object(a.jsx)(Ise,{children:null===(o=n.equipment.equipment_category)||void 0===o?void 0:o.name}),Object(a.jsx)(ise,{children:null===n||void 0===n?void 0:n.equipment.barcode})]}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap",paddingRight:"20px !important"},children:e.renderOnSiteTag(n)}),Object(a.jsx)(Ese,{style:{whiteSpace:"nowrap"},children:e.renderOnSiteLabel(n)}),Object(a.jsx)(Ese,{style:{whiteSpace:"nowrap"},children:n.invoice_item&&"#".concat(null===(i=n.invoice_item)||void 0===i?void 0:i.invoice_id)}),Object(a.jsx)(Ese,{style:{whiteSpace:"nowrap"},children:vm(n.total_charge)}),Object(a.jsx)(Ese,{style:{whiteSpace:"nowrap"},children:(null===n||void 0===n||null===(c=n.creator)||void 0===c?void 0:c.full_name)||""}),Object(a.jsx)(Ese,{style:{whiteSpace:"nowrap"},children:n.in_report_used_count>0&&e.renderMarkAsRead(n)}),Object(a.jsx)("td",{children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:e.equipmentMenuItems(t,n,f),direction:"right"})})]},r)})):e.renderNodata(),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{colSpan:2,children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(o,"total_charge"))]})})]},"other-footer")]})]})]})]})]})}})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Rse=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobEquipments:e.currentJobUsageAndActuals.equipments}})))(Tse),Dse="MaterialCustomForm",Mse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={addCustomTrigger:!1},e.loadOptions=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.searchMaterials({name:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.toggleTrigger=function(){var t=e.props.change;e.setState({addCustomTrigger:!e.state.addCustomTrigger}),setTimeout((function(){e.state.addCustomTrigger?t("material",null):(t("name",null),t("measure_unit_id",null))}))},e.setTotalAmount=function(){setTimeout((function(){var t=e.props,n=t.sellCost,r=t.quantity,a=t.change,o=0;n&&(o=(o=n.split("$")[1])?parseFloat(k8(o.toString())):parseFloat(k8(n.toString()))),a("total_amount",vm(Mm((o>0?o:0)*(r>0?+r:0)||0)))}))},e.onMaterialChange=function(t){var n=e.props.change;n("default_buy_cost_per_unit",vm(t.default_buy_cost_per_unit)),n("default_sell_cost_per_unit",vm(t.default_sell_cost_per_unit))},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.onSubmit,o=r.jobId,i=r.user,c=r.afterSubmit,!a){t.next=3;break}return t.abrupt("return",a(n));case 3:if(t.prev=3,!o){t.next=20;break}if(!n.id){t.next=11;break}return s=pW(n),t.next=9,zy.updateJobMaterial(o,n.id,s);case 9:t.next=20;break;case 11:if(n.material){t.next=17;break}return t.next=14,ZW.createMaterial(Object.assign(n,{measure_unit_id:n.measure_unit_id.id}));case 14:l=t.sent.id,t.next=18;break;case 17:l=n.material.id;case 18:return t.next=20,zy.addMaterialToJob(o,{job_id:o,material_id:l,creator_id:i.id,used_at:fv(n.used_at,!0),quantity_used:n.count});case 20:null===c||void 0===c||c(),t.next=26;break;case 23:return t.prev=23,t.t0=t.catch(3),t.abrupt("return",ix(t.t0));case 26:case"end":return t.stop()}}),t,null,[[3,23]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.dispatch,t=this.props.change;this.setTotalAmount(),e(function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:Q1}),e.prev=1,e.next=4,ZW.getAllMeasureUnits();case 4:return n=e.sent.data,t({type:K1,payload:n}),e.abrupt("return",n);case 9:throw e.prev=9,e.t0=e.catch(1),t({type:Z1,payload:e.t0}),e.t0;case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t){return e.apply(this,arguments)}}()),this.props.initialValues&&this.props.initialValues.default_buy_cost_per_unit&&t("default_buy_cost_per_unit",vm(this.props.initialValues.default_buy_cost_per_unit)),this.props.initialValues&&this.props.initialValues.default_sell_cost_per_unit&&t("default_sell_cost_per_unit",vm(this.props.initialValues.default_sell_cost_per_unit))}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.measureUnits,r=n.data,o=n.loading,i=e.edit,c=e.hideMaterialField,s=e.isCustom,l=this.state.addCustomTrigger;return Object(a.jsxs)("form",{onSubmit:t(this.onSubmit),autoComplete:"off",id:Dse,children:[!c&&Object(a.jsxs)("div",{className:"row",children:[l?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",validate:l&&Dv,component:yg,label:"Material Name"})}),Object(a.jsxs)("div",{className:"col-3 position-relative",children:[o&&Object(a.jsx)(Nv,{size:30,color:_.white}),Object(a.jsx)(Hv.a,{name:"measure_unit_id",validate:l&&Dv,component:xO,options:r||[],getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},label:"Measure Unit"})]})]}):Object(a.jsx)("div",{className:"col-9",children:Object(a.jsx)(Hv.a,{name:"material",validate:!l&&Dv,component:NO,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},placeholder:"Enter name of material",loadOptions:this.loadOptions,label:"Material Item",onChange:this.onMaterialChange,disabled:i})}),!i&&!1]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"default_buy_cost_per_unit",disabled:!s,validate:[Dv,Bv],component:yg,min:0,step:.01,label:"Unit Cost to Me"})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"count",validate:[Dv,Bv,Vv],onChange:this.setTotalAmount,component:yg,type:"number",min:0,step:.01,label:"Quantity",normalize:function(e){return k8(e||"")}})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"used_at",validate:Dv,component:s_,label:"Used At"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"default_sell_cost_per_unit",disabled:!s,validate:[Dv,Bv],component:yg,min:0,step:.01,label:"Unit Price to Charge"})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"total_amount",disabled:!0,component:yg,label:"Total Amount",normalize:function(e){return k8(e||"")}})})]})]})}}]),n}(p.PureComponent),Lse=Object(sg.compose)(Object(b.b)((function(e){return{measureUnits:e.measureUnits,user:e.user.me}})),Object(jv.a)({form:Dse,enableReinitialize:!1}),Object(ug.a)({sellCost:"default_sell_cost_per_unit",quantity:"count"}))(Mse),Pse=n(560);!function(e){e[e.Quick=0]="Quick",e[e.Custom=1]="Custom"}(kse||(kse={}));var Fse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={quickData:[],loading:!1},e.renderBody=function(){var t=e.props.material;return Object(a.jsx)(Lse,{onSubmit:e.sendCustomData,edit:!!t,initialValues:t&&bW(t)||hW()})},e.sendCustomData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.jobId,o=r.userId,i=r.onClose,c=r.loadJobMaterialsList,s=r.material,l=r.dispatch,e.setState({loading:!0}),t.prev=2,!s){t.next=9;break}return u=pW(n),t.next=7,zy.updateJobMaterial(a,s.id,u);case 7:t.next=19;break;case 9:if(n.material){t.next=15;break}return t.next=12,ZW.createMaterial(Object.assign(n,{measure_unit_id:n.measure_unit_id.id}));case 12:d=t.sent.id,t.next=16;break;case 15:d=n.material.id;case 16:return t.next=18,zy.addMaterialToJob(a,{job_id:a,material_id:d,creator_id:o,used_at:n.used_at.format(ov),quantity_used:n.count});case 18:l(gH(a));case 19:c();case 20:return t.prev=20,i(),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,,20,23]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"renderFooter",value:function(){var e=this.props,t=e.material,n=e.formIsInvalid;return Object(a.jsx)(Xg,{className:"btn btn-primary",form:Dse,disabled:n,children:t?"Save":"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.material;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:r?"Edit Material":"Add Material",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent),Use=Object(sg.compose)(Object(b.b)((function(e){return{formIsInvalid:Object(Pse.a)(Dse)(e)}})))(Fse),Bse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={quantity:e.props.quantity||0},e.changeQuantity=function(t){var n=e.props.onChange,r=parseFloat(k8(t.target.value));r!==e.state.quantity&&(r<0?e.setState({quantity:0}):(e.setState({quantity:r}),n&&n(r)))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.quantity;t!==e.quantity&&this.setState({quantity:t})}},{key:"render",value:function(){var e=this.props.disabled,t=this.state.quantity;return Object(a.jsx)("input",{className:"form-control",type:"number",min:"0",step:"0.01",disabled:e,onChange:this.changeQuantity,style:{width:"70px"},value:t})}}]),n}(p.PureComponent);function Vse(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Vse=function(){return e},e}function Jse(){var e=Object(f.a)(["\n  padding-right: 50px !important;\n"]);return Jse=function(){return e},e}var qse=y.default.td(Jse()),zse=y.default.div(Vse()),Gse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showModal:!1,showEditModal:!1,type:kse.Quick,materialForEditing:void 0},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.onCustomAdd=function(){e.setState({type:kse.Custom,materialForEditing:void 0}),e.onOpenModal()},e.deleteMaterialFromJob=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(iw("Confirm","Delete (".concat(n.material.name," - ").concat(n.quantity_used_override," ").concat(n.material.measure_unit.name,") ?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,zy.deleteJobMaterial(parseInt(o),n.id);case 7:e.loadMaterials();case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editMaterial=function(t){e.setState({materialForEditing:t}),e.onOpenModal()},e.materialMenuItems=function(t,n,r){var a=n.creator_id===e.props.user.id,o=a?t.has(vx.JOBS_USAGE_MATERIALS_UPDATE):t.has(vx.JOBS_USAGE_MATERIALS_UPDATE)&&t.has(vx.JOBS_USAGE_MATERIALS_MANAGE),i=a?t.has(vx.JOBS_USAGE_MATERIALS_DELETE):t.has(vx.JOBS_USAGE_MATERIALS_DELETE)&&t.has(vx.JOBS_USAGE_MATERIALS_MANAGE),c=0==n.in_report_used_count?"Mark as used":"Mark as unused",s=n.invoice_item_id&&n.invoice_item_id>0;return[{name:"Edit item",disabled:!o||r||s,onClick:function(){return e.editMaterial(n)}},{name:c,disabled:!o||r||s,onClick:function(){return e.markAsUsed(n)}},{type:"divider"},{name:"Delete",disabled:!i||r||s,onClick:function(){return e.deleteMaterialFromJob(n)}}]},e.markAsUsed=function(t){var n=0==t.in_report_used_count?1:0,r={modal:"job_material",id:t.id,in_report_used_count:n};e.PostMarkasUsed(r,t.job_id)},e.PostMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadMaterials(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onChangeQuantity=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.debouncedQuantityUpdate(n,r);case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.updateQuantity=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.match.params.id,i=a.dispatch,t.next=3,zy.updateJobMaterial(parseInt(o),r,{quantity_used_override:n});case 3:i(OH(parseInt(o)));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedQuantityUpdate=Object(m.debounce)(e.updateQuantity,300),e.renderMarkAsRead=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(z7,{name:Xf.Check,color:_.green0})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadMaterials()}},{key:"loadMaterials",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.id;t(OH(parseInt(n))),t(gH(parseInt(n)))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===zj.Closed||!n.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var n=t.has(vx.JOBS_USAGE_VIEW),i=t.has(vx.JOBS_USAGE_MATERIALS_CREATE);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(zse,{children:[Object(a.jsx)($ce,{jobId:parseInt(r)}),i&&Object(a.jsx)(Xg,{className:"btn",disabled:o,onClick:e.onCustomAdd,style:{marginLeft:"10px"},children:"Add Material"})]})}):null}})}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:5,children:"No items found"})})}},{key:"renderContentPage",value:function(){var e=this,t=this.props,n=t.job,r=t.currentJobMaterials,o=r.data,i=r.loading,c=t.job.loading,s=t.user,l=t.dispatch,u=t.match.params.id,d=this.state,p=d.showModal,h=d.type,b=d.materialForEditing,f=n.data&&n.data.latest_status.status===zj.Closed||!n.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var r=t.has(vx.JOBS_USAGE_VIEW),d=t.has(vx.JOBS_USAGE_MATERIALS_UPDATE)&&!f&&t.has(vx.JOBS_USAGE_MATERIALS_MANAGE);return r?Object(a.jsxs)(a.Fragment,{children:[n.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(n.data.id),children:"Usage And Actuals"}),n.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(n.data.id,"/materials"),children:"Materials"}),p&&Object(a.jsx)(Use,{type:h,jobId:parseInt(u),userId:s.id,loadJobMaterialsList:function(){return l(OH(parseInt(u)))},onClose:e.onCloseModal,isOpen:p,material:b,dispatch:l}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[i&&!c&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(JC,{style:{minHeight:"100px"},children:Object(a.jsxs)(rse,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Materials"}),Object(a.jsx)("th",{children:"Item"}),Object(a.jsx)("th",{children:"Unit"}),Object(a.jsx)("th",{children:"Invoice Id"}),Object(a.jsx)("th",{children:"Amount Ex GST"}),Object(a.jsx)("th",{children:"Added By"})]})}),Object(a.jsxs)("tbody",{children:[o&&o.length>0?o.map((function(n,r){var o,i;return Object(a.jsxs)("tr",{children:[Object(a.jsx)(qse,{style:{whiteSpace:"nowrap"},children:pm()(n.used_at).format(iv)}),Object(a.jsx)(qse,{style:{width:"100%"},children:n.material.name}),Object(a.jsx)(qse,{style:{whiteSpace:"nowrap"},children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[d?Object(a.jsx)(Bse,{quantity:n.quantity_used_override,onChange:function(t){return e.onChangeQuantity(t,n.id)}}):n.quantity_used_override,Object(a.jsx)("span",{style:{marginLeft:"10px"},children:n.material.measure_unit.name})]})}),Object(a.jsx)(qse,{style:{whiteSpace:"nowrap"},children:n.invoice_item&&"#".concat(null===(o=n.invoice_item)||void 0===o?void 0:o.invoice_id)}),Object(a.jsx)(qse,{style:{whiteSpace:"nowrap"},children:vm(n.amount_override)}),Object(a.jsx)(qse,{style:{whiteSpace:"nowrap"},children:(null===n||void 0===n||null===(i=n.creator)||void 0===i?void 0:i.full_name)||""}),Object(a.jsx)(qse,{style:{whiteSpace:"nowrap"},children:n.in_report_used_count>0&&e.renderMarkAsRead(n)}),Object(a.jsx)("td",{children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:e.materialMenuItems(t,n,f),direction:"right"})})]},r)})):e.renderNodata(),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{colSpan:2,children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(o,"amount_override"))]})})]},"other-footer")]})]})})]})]}):null}})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Wse=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobMaterials:e.currentJobUsageAndActuals.materials,user:e.user.me}})))(Gse),Hse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).loadPurchaseOrders=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.po,o=r.match.params.id,t.next=3,a.fetch(o);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderMarkAsRead=function(e){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(z7,{name:Xf.Check,color:_.green0})})},e.orderMenuItems=function(t,n,r){var a,o,i=t.has(vx.JOBS_USAGE_MATERIALS_UPDATE),c=0==n.in_report_used_count?"Mark as used":"Mark as unused",s=n.invoice_item_id&&n.invoice_item_id>0;return[{name:c,disabled:!i||r||"draft"===(null===n||void 0===n||null===(a=n.purchase_order)||void 0===a||null===(o=a.latest_status)||void 0===o?void 0:o.status)||s,onClick:function(){return e.markAsUsed(n)}}]},e.markAsUsed=function(t){var n,r=0==t.in_report_used_count?1:0,a={modal:"job_purchaseOrder",id:t.id,in_report_used_count:r};e.PostMarkasUsed(a,null===t||void 0===t||null===(n=t.job)||void 0===n?void 0:n.id)},e.PostMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(+r,n);case 3:e.loadPurchaseOrders(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){(0,this.props.dispatch)(X$()),this.loadPurchaseOrders()}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:7,children:"No items found"})})}},{key:"renderRows",value:function(e){var t,n=this,r=this.props,o=r.po.data,i=r.job;if(!o)return null;var c=i.data&&i.data.latest_status.status===zj.Closed||!i.data;return null===(t=o.data)||void 0===t?void 0:t.map((function(t){var r,o,i,s,l,u,d;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{style:{whiteSpace:"nowrap",width:"20%"},children:Object(a.jsx)(kS.a,{format:iv,children:t.created_at?t.created_at.toString():""})}),Object(a.jsx)("td",{style:{width:"80%"},children:(null===t||void 0===t?void 0:t.description)||""}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap"},children:Object(a.jsx)(rN,{tag:{name:hm[null===t||void 0===t||null===(r=t.purchase_order)||void 0===r||null===(o=r.latest_status)||void 0===o?void 0:o.status],color:Sm(null===t||void 0===t||null===(i=t.purchase_order)||void 0===i||null===(s=i.latest_status)||void 0===s?void 0:s.status)}},null===t||void 0===t||null===(l=t.purchase_order)||void 0===l||null===(u=l.latest_status)||void 0===u?void 0:u.status)}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap"},children:Object(a.jsxs)(v.b,{to:"/finance/purchase-orders/details/".concat(t.purchase_order_id),target:"_blank",children:["PO #",(null===t||void 0===t?void 0:t.purchase_order_id)||0]})}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap",width:"12%"},children:(null===t||void 0===t?void 0:t.invoice_item)&&"#".concat(null===t||void 0===t||null===(d=t.invoice_item)||void 0===d?void 0:d.invoice_id)}),Object(a.jsx)("td",{style:{whiteSpace:"nowrap"},children:vm(t.inquiry_amount||0)}),Object(a.jsx)("td",{children:t.in_report_used_count>0&&n.renderMarkAsRead(t)}),Object(a.jsx)("td",{children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:n.orderMenuItems(e,t,c),direction:"right"})})]},t.id)}))}},{key:"render",value:function(){var e=this,t=this.props.po,n=t.data,r=t.loading,o=n&&n.data&&n.data.length>0;return Object(a.jsx)(Cx.Consumer,{children:function(t){return t.has(vx.JOBS_USAGE_VIEW)?Object(a.jsxs)(a.Fragment,{children:[r&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(rse,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Purchase Order Items"}),Object(a.jsx)("th",{children:"Description"}),Object(a.jsx)("th",{children:"Status"}),Object(a.jsx)("th",{children:"Purchase Order"}),Object(a.jsx)("th",{children:"Invoice Id"}),Object(a.jsx)("th",{children:"Amount Ex GST"})]})}),Object(a.jsxs)("tbody",{children:[o?e.renderRows(t):e.renderNodata(),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{colSpan:4,children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(null===n||void 0===n?void 0:n.data,"inquiry_amount"))]})})]},"other-footer")]})]})]}):null}})}}]),n}(p.PureComponent),Yse=Object(sg.compose)(oj({po:{fetch:J$.jobPurchaseOrderItems}}),O.g,Object(b.b)((function(e){return{purchaseOrders:e.purchaseOrders,job:e.currentJob}})))(Hse),Qse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"renderBodyRows",value:function(){var e=this.props,t=e.columnsDefinition;return e.dataSource.map((function(e){return Object(a.jsx)("tr",{children:t.map((function(t){return Object(a.jsx)(O9,{width:t.width,hidden:t.hidden,align:t.type,children:t.cell(e)},t.id)}))},e.id)}))}},{key:"renderNodata",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:e.length,children:"No items found"})})}},{key:"renderTHead",value:function(){var e=this.props.columnsDefinition;return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:e.map((function(e){return Object(a.jsx)(S9,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})})}},{key:"renderTBody",value:function(){var e=this.props.dataSource;return Object(a.jsx)("tbody",{children:e&&e.length>0?this.renderBodyRows():this.renderNodata()})}},{key:"render",value:function(){var e=this.props.useCustomStyle;return Object(a.jsx)(a.Fragment,{children:e?Object(a.jsxs)(a.Fragment,{children:[this.renderTHead(),this.renderTBody()]}):Object(a.jsxs)("table",{className:"table",children:[this.renderTHead(),this.renderTBody()]})})}}]),n}(p.PureComponent),Kse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={quantity:e.props.quantity||0},e.changeQuantity=function(t){var n=e.props.onChange,r=Math.floor(+t.target.value);r!==e.state.quantity&&(r<0?e.setState({quantity:0}):(e.setState({quantity:r}),n&&n(r)))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props.quantity;t!==e.quantity&&this.setState({quantity:t})}},{key:"render",value:function(){var e=this.props.disabled,t=this.state.quantity;return Object(a.jsx)("input",{className:"form-control",type:"number",min:"0",disabled:e,onChange:this.changeQuantity,style:{width:"70px"},value:t})}}]),n}(p.PureComponent),Zse="ModalLahaForm",Xse=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:o(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.loadCompensations,o=r.data,i=r.loading,c=t.isEdit;return Object(a.jsxs)("form",{id:Zse,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"user",label:"Recipient",component:NO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getRecipientOptionLabel,getOptionValue:e.getRecipientOptionValue,validate:Dv,isClearable:!0,placeholder:"Start typing to search...",disabled:c})}),Object(a.jsxs)("div",{className:"col-5 position-relative",children:[i&&Object(a.jsx)(Nv,{size:20,color:_.white}),Object(a.jsx)(Hv.a,{name:"laha_compensation",label:"Compensation Type",component:xO,getOptionLabel:e.getCompensationOptionLabel,getOptionValue:e.getCompensationOptionValue,validate:Dv,options:o||[],disabled:c})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"date_started",label:"Date Started",component:s_,validate:Dv,futureEnabled:!0})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"days",label:"Days",component:yg,validate:[Dv,Fv],step:1,type:"number"})})]})]})},e.loadUsers=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=Qv()(e.loadUsers,1e3),e.getRecipientOptionLabel=function(e){return mm(e).name},e.getRecipientOptionValue=function(e){return e.id},e.getCompensationOptionLabel=function(e){return e.rate_per_day.toString()},e.getCompensationOptionValue=function(e){return e.id},e.renderFooter=function(){var t=e.props.invalid;return Object(a.jsx)(Xg,{className:"btn",type:"submit",disabled:t,form:Zse,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadCompensations.fetch()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),$se=Object(sg.compose)(Object(jv.a)({form:Zse}),oj({loadCompensations:{fetch:ZW.getLahaCompensations}}))(Xse),ele=function(e){return Object(c.a)(Object(c.a)({},e),{},{user_id:e.user.id,laha_compensation_id:e.laha_compensation.id,date_started:e.date_started.format(av)})},tle=function(e){return Object(c.a)(Object(c.a)({},e),{},{date_started:pm()(e.date_started)})};function nle(){var e=Object(f.a)(["\n  color: ",";\n  font-size: ",";\n"]);return nle=function(){return e},e}var rle=y.default.span(nle(),_.gray5,sm.smaller),ale=function(e,t){var n;return e&&e.isValid()?Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)(rN,{tag:{name:"APPROVED",color:_.gray6}}),t.approver_id&&Object(a.jsxs)(rle,{children:[t.approver_id," ",t.approved_at&&"- ".concat(pm()(t.approved_at).format(sv))]}),(null===t||void 0===t?void 0:t.invoice_item)&&Object(a.jsxs)(rle,{children:["Invoice: #",null===t||void 0===t||null===(n=t.invoice_item)||void 0===n?void 0:n.invoice_id]})]}):Object(a.jsx)(rN,{tag:{name:"PENDING",color:_.gray6}})},ole=function(e){return e>0?Object(a.jsx)(z7,{name:Xf.Check,color:_.green0}):Object(a.jsx)(a.Fragment,{})},ile=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showLahaModal:!1,item:void 0,allSelected:!1,selectedLahaIds:[],hideMultiselect:!0},e.showLahaModal=function(){return e.setState({showLahaModal:!0})},e.hideLahaModal=function(){e.setState({showLahaModal:!1}),e.props.hideAddLaha()},e.selectAll=function(){var t=e.props.currentJobLahas;e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&t.data&&t.data.data.length>0?e.setState({selectedLahaIds:t.data.data.map((function(e){return e.id}))}):e.setState({selectedLahaIds:[]})}))},e.toggleSelection=function(t){var n=e.props.currentJobLahas.data,r=Object(aj.a)(e.state.selectedLahaIds);r.includes(t)?(r=r.filter((function(e){return e!==t})),e.setState({selectedLahaIds:r,allSelected:r.length===(null===n||void 0===n?void 0:n.data.length)})):(r.push(t),e.setState({selectedLahaIds:Object(aj.a)(r),allSelected:r.length===(null===n||void 0===n?void 0:n.data.length)}))},e.LahaIsSelected=function(t){var n=e.state.selectedLahaIds;return!!n&&n.includes(t)},e.toggleMultiselectView=function(){e.setState({hideMultiselect:!e.state.hideMultiselect})},e.multiSelectIcon=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"view-multiselect",effect:"solid",place:"bottom"}),Object(a.jsx)(J_,{"data-tip":"Show/Hide multiselect column","data-for":"view-multiselect",className:"align-self-center",children:Object(a.jsx)(cm,{name:Xf.BulletList,size:20,onClick:e.toggleMultiselectView})})]})},e.lahaColumns=function(){return[{id:"multiselectColumn",header:Object(a.jsx)(nI,{size:15,value:e.state.allSelected,onChange:e.selectAll}),width:"5%",type:Are.Text,hidden:e.state.hideMultiselect,cell:function(t){return Object(a.jsx)(nI,{size:15,value:e.LahaIsSelected(+t.id),onChange:function(){return e.toggleSelection(+t.id)}})}},{id:"item",header:"LAHA",width:"12%",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:pm()(e.date_started).format(iv)})}},{id:"user",width:"25%",header:"Recipient",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.user.full_name})}},{id:"amount",width:"20%",header:"Days",type:Are.Text,cell:function(t){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(Kse,{quantity:t.days,onChange:function(n){return e.onChangeQuantity(n,t.id)},disabled:e.props.jobIsClosed}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:"days"})]})}},{id:"total_amount",width:"10%",header:"Amount Ex GST",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:vm(e.total_amount)})}},{id:"status",header:"Status",width:"12%",type:Are.Text,cell:function(e){return ale(e.approved_at?pm()(e.approved_at):null,e)}},{id:"mark_as_used",header:"",width:"5%",type:Are.Text,cell:function(e){return ole(e.in_report_used_count||0)}},{id:"menu",header:e.multiSelectIcon(),width:"5%",type:Are.Numeric,cell:function(t){return Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.tableMenuItems=function(t,n,r){var a=t.has(vx.JOBS_USAGE_LAHA_MANAGE),o=t.has(vx.JOBS_USAGE_LAHA_APPROVE),i=n.invoice_item_id&&n.invoice_item_id>0;return[{name:"View / Edit",disabled:!a||r||i,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!o||r||i,onClick:function(){return e.approveLaha(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!n.approved_at||r||i,onClick:e.markAsUsed(n)},{type:"divider"},{name:"Delete",disabled:!a||r||i,onClick:function(){return e.deleteItem(n)}}]},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_laha_compensation",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadLaha(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.approveLaha=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!n.id){t.next=14;break}return t.next=4,r(iw("Confirm","Approve LAHA for ".concat(n.user.full_name," at ").concat(pm()(n.date_started).format(iv),"?")));case 4:if(!t.sent){t.next=13;break}return e.setState({loading:!0}),t.next=9,ZW.approveLaha(n);case 9:e.setState({loading:!1}),e.loadLaha(),t.next=14;break;case 13:return t.abrupt("return",Promise.resolve());case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onChangeQuantity=function(t,n){e.debouncedQuantityUpdate(t,n)},e.updateQuantity=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.jobId,t.next=3,ZW.updateJobLaha({job_id:a,id:r,days:n});case 3:e.loadLaha();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedQuantityUpdate=Object(m.debounce)(e.updateQuantity,1e3),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.addNewLaha,o=r.jobId,i=r.userId,s=r.updateLabourCounters,!a){t.next=7;break}return t.next=4,ZW.createLaha(Object(c.a)(Object(c.a)({},ele(n)),{},{job_id:o,creator_id:i}));case 4:s(),t.next=10;break;case 7:return l=ele(n),t.next=10,ZW.updateJobLaha(l);case 10:e.loadLaha();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.multiLahaDelete=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedLahaIds).length>0)){t.next=24;break}return t.prev=3,t.next=6,r(iw("Confirm","Delete selected LAHA item(s)?","Are you sure you want to delete the selected item(s)? This action cannot be undone!"));case 6:if(!t.sent){t.next=15;break}return e.setState({loading:!0}),t.next=11,iW.deleteBulkJobLaha(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedLahaIds:[],allSelected:!1}),e.loadLaha(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(3),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[3,18,21,24]])}))),e.multiLahaMarkAsUsed=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedLahaIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Mark selected LAHA item(s) as used?","Only approved selected item(s) will be marked as used!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,iW.markAsUsedBulkJobLaha(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedLahaIds:[],allSelected:!1}),e.loadLaha(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiLahaApproved=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedLahaIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Approve selected LAHA item(s)?"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,iW.approveBulkJobLaha(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedLahaIds:[],allSelected:!1}),e.loadLaha(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiActionIcons=function(){var t=e.state.selectedLahaIds;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as approved","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(jse,{name:Xf.Approved,onClick:e.multiLahaApproved})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as used","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.markAsReadGray,onClick:e.multiLahaMarkAsUsed})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Delete selected records","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.Trash,onClick:e.multiLahaDelete})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLaha()}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showLahaModal()}},{key:"deleteItem",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(iw("Confirm","Delete LAHA for ".concat(t.user.full_name," at ").concat(pm()(t.date_started).format(iv),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,ZW.deleteJobLaha(r,t.id);case 9:this.setState({loading:!1}),this.loadLaha(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadLaha",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return Dk(lH.load,lH.loadComplete,lH.error,(function(){return ZW.getJobLahas(e,{page:t})}))}(n,e))}},{key:"render",value:function(){var e=this.props,t=e.currentJobLahas,n=e.addNewLaha,r=this.state,o=r.loading,i=r.showLahaModal,c=r.item,s=r.hideMultiselect,l=r.selectedLahaIds,u=t.data,d=u&&u.data?u.data:[],p=t.loading||o,h=i||n;return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)($se,{isOpen:h,onClose:this.hideLahaModal,onSubmit:this.onSubmit,title:n?"Add LAHA":"Edit LAHA",initialValues:n?{}:tle(c||{}),isEdit:!n}),p&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(vse,{hidden:s,icons:this.multiActionIcons(),selected:l.length}),Object(a.jsxs)(rse,{className:"table",children:[Object(a.jsx)(Qse,{dataSource:d,columnsDefinition:this.lahaColumns(),useCustomStyle:!0}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{colSpan:3,children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(d,"total_amount"))]})})]},"other-footer")]}),u&&u.pagination&&u.pagination.last_page>1&&Object(a.jsx)(oC,{pagination:u.pagination,onChange:this.loadLaha})]})}}]),n}(p.PureComponent),cle=Object(sg.compose)(Object(b.b)((function(e){return{userId:OP(e),currentJobLahas:e.currentJobUsageAndActuals.labourLahas}})))(ile),sle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t=e.props,n=t.job;t.storages.fetch(n.id,{placement_ended:1,charging_interval:1})},e.storageMenuItems=function(t,n,r){var a=t.has(vx.JOBS_USAGE_MATERIALS_UPDATE)&&t.has(vx.JOBS_USAGE_MATERIALS_MANAGE),o=n.invoice_item_id&&n.invoice_item_id>0;return[{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!a||r||o,onClick:function(){return e.markAsUsed(n)}}]},e.PostMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:a=e.props,o=a.job,a.storages.fetch(o.id,{placement_ended:1,charging_interval:1}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"markAsUsed",value:function(e){var t=0===e.in_report_used_count?1:0,n={modal:"inventory_item_placements",id:e.id,in_report_used_count:t};this.PostMarkasUsed(n,e.inventory_item.job_id)}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:1,children:"No items found"})})}},{key:"renderRows",value:function(e){var t,n,r,o=this,i=this.props,c=i.storages,s=i.jobIsClosed;return(null===(t=c.data)||void 0===t?void 0:t.data)?(null===(n=c.data)||void 0===n?void 0:n.data.length)?null===(r=c.data)||void 0===r?void 0:r.data.map((function(t,n){var r;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.inventory_item.name}),Object(a.jsxs)("td",{children:[t.space.name," (",t.space.location.code,")"]}),Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.started_at})}),Object(a.jsx)("td",{children:z9.getPlacementDuration(t)}),Object(a.jsx)("td",{children:t.invoice_item&&"#".concat(null===t||void 0===t||null===(r=t.invoice_item)||void 0===r?void 0:r.invoice_id)}),Object(a.jsx)("td",{children:vm(z9.getPlacementCost(t))}),Object(a.jsx)("td",{children:ole((null===t||void 0===t?void 0:t.in_report_used_count)||0)}),Object(a.jsx)("td",{children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:o.storageMenuItems(e,t,s),direction:"right"})})]},n)})):this.renderNodata():null}},{key:"render",value:function(){var e=this,t=this.props.storages;return Object(a.jsx)(Cx.Consumer,{children:function(n){var r,o;return n.has(vx.JOBS_USAGE_VIEW)?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(rse,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Storage Items"}),Object(a.jsx)("th",{children:"Item"}),Object(a.jsx)("th",{children:"Duration"}),Object(a.jsx)("th",{}),Object(a.jsx)("th",{children:"Invoice Id"}),Object(a.jsx)("th",{children:"Amount Ex GST"})]})}),Object(a.jsxs)("tbody",{children:[e.renderRows(n),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sum(null===(r=t.data)||void 0===r||null===(o=r.data)||void 0===o?void 0:o.map((function(e){return z9.getPlacementCost(e)}))))]})})]},"other-footer")]})]})}):null}})}}]),n}(p.PureComponent),lle=Object(sg.compose)(oj({storages:{fetch:ZW.getJobStorageItems}}))(sle),ule=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,showEditModal:!1,type:kse.Quick},e}return Object(l.a)(n,[{key:"renderAdditionalHeaderLayout",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(XN,{children:Object(a.jsx)($ce,{jobId:parseInt(this.props.match.params.id)})})})}},{key:"renderContentPage",value:function(){var e=this.props.job,t=e.data&&e.data.latest_status.status===zj.Closed||!e.data;return Object(a.jsxs)(JC,{children:[e.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(e.data.id),children:"Usage And Actuals"}),e.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(e.data.id,"/purchase-order"),children:"PO's, Storage"}),(null===e||void 0===e?void 0:e.data)?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)(Yse,{jobIsClosed:t})}),Object(a.jsx)(lle,{jobIsClosed:t,job:e.data})]}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Nv,{size:40,color:_.white})})]})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),dle=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob}})))(ule),ple=n(85),hle=n(602);n(279);function ble(){var e=Object(f.a)(["\n  .k-arcgauge-label {\n    left: 21% !important;\n    top: 36% !important;\n  }\n"]);return ble=function(){return e},e}function fle(){var e=Object(f.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  height: 100px;\n"]);return fle=function(){return e},e}y.default.div(fle(),_.gray1,_.gray2);var mle=y.default.div(ble()),jle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).labelContent=function(e){return vm(e.value,!0)},e.gaugeRenderer=function(e,t){return Object(a.jsxs)("h4",{style:{color:t},children:[Mm(e),"%"]})},e.gaugeStyles={display:"block",height:"100px",width:"100px"},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.summary,t=e.total_budget,n=e.remaining,r=e.gross_profit,o=e.labour_used,i=e.equipment_used,c=e.materials_used,s=e.po_and_other_used;return Object(a.jsxs)("div",{className:"container d-flex flex-column",children:[Object(a.jsx)("div",{className:"card card-primary",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"mr-5",children:Object(a.jsx)(z7,{name:Xf.Chart,color:_.blue5,fill:!0,size:50})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)("h3",{className:"mb-3",children:Object(a.jsx)("strong",{children:vm(t,!0)})}),Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{className:"text-gray",children:"TOTAL BUDGET"})})]})]})})}),Object(a.jsxs)("div",{className:"d-flex my-5",children:[Object(a.jsx)("div",{className:"card flex-grow-1",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)("strong",{className:"text-gray",children:"USED"})}),Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:vm(i+o+c+s,!0)})})]}),Object(a.jsx)("div",{className:"d-flex flex-grow-1 align-items-end justify-content-end ",children:Object(a.jsx)(z7,{name:Xf.Chart,color:_.green4,fill:!0,size:50})})]})})}),Object(a.jsx)("div",{className:"card flex-grow-1 mx-5",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)("strong",{className:"text-gray",children:"REMAINING"})}),Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:vm(n,!0)})})]}),Object(a.jsx)("div",{className:"d-flex flex-grow-1 align-items-end justify-content-end ",children:Object(a.jsx)(z7,{name:Xf.Chart,color:_.purple2,fill:!0,size:50})})]})})}),Object(a.jsx)("div",{className:"card flex-grow-1",children:Object(a.jsx)("div",{className:"card-body",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)("strong",{className:"text-gray",children:"ACTUAL GROSS PROFIT"})}),Object(a.jsx)(mle,{className:"flex-grow-1 d-flex justify-content-end",children:Object(a.jsx)(hle.a,{style:this.gaugeStyles,value:r,centerRender:this.gaugeRenderer})})]})})})]}),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{className:"text-gray",children:"USAGE"})}),Object(a.jsx)("div",{children:Object(a.jsxs)(ple.a,{transitions:!1,children:[Object(a.jsx)(ple.c,{children:Object(a.jsx)(ple.d,{type:"donut",data:[{kind:"Time",amount:o},{kind:"Equipment",amount:i},{kind:"Materials",amount:c},{kind:"PO's and Others",amount:s}],categoryField:"kind",field:"amount",children:Object(a.jsx)(ple.e,{color:"#fff",background:"none",content:this.labelContent})})}),Object(a.jsx)(ple.b,{position:"right",orientation:"vertical"})]})})]})})]})}}]),n}(p.PureComponent);function vle(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return vle=function(){return e},e}var Ole,gle,xle=y.default.div(vle()),yle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.onAddReport=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,r={date:new Date,savetype:"Stage 1",value:[]},t.prev=2,t.next=5,e.props.dispatch(mH());case 5:return t.next=7,ZW.newReportCreate(parseInt(n),r);case 7:a=t.sent,e.props.history.push("/usage-and-actuals/".concat(n,"/buildCosting/").concat(a.id)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(2),e.props.history.push("/usage-and-actuals/".concat(n,"/buildCosting/1"));case 14:case"end":return t.stop()}}),t,null,[[2,11]])}))),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0,modalData:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.job;switch(n){case"new_invoice":return Object(a.jsx)($9,{isOpen:!0,onClose:e.hideModal,job:o.data,data:r})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id,n=e.dispatch;n(jH(parseInt(t))),n(gH(parseInt(t)))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===zj.Closed||!n.data;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cx.Consumer,{children:function(t){var n=t.has(vx.JOBS_USAGE_VIEW),i=t.has(vx.ASSESSMENT_REPORTS_MANAGE);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(xle,{children:[Object(a.jsx)($ce,{jobId:parseInt(r)}),Object(a.jsxs)(fQ.e,{className:"ml-2",children:[Object(a.jsx)(fQ.h,{caret:!0,color:"primary",className:"position-relative",children:"Create Invoice"}),Object(a.jsx)(fQ.g,{basic:!0,right:!0,children:Object(a.jsx)(fQ.f,{onClick:e.showModal("new_invoice",{actuals:!0,expenses:!0}),children:"Actuals and Expenses"})})]}),i&&Object(a.jsx)("button",{className:"btn btn-info ml-2",disabled:o,onClick:e.onAddReport,children:"New Report / Quote"})]})}):null}})]})}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,n=e.currentJobUsageSummary,r=n.data,o=n.loading;return Object(a.jsxs)(a.Fragment,{children:[t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(t.data.id),children:"Usage And Actuals"}),t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(t.data.id,"/summary"),children:"Summary"}),o&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(JC,{className:"p-4",children:r&&Object(a.jsx)(jle,{summary:r.data})})]})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),_le=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary}})))(yle);!function(e){e.NEW="NEW",e.APPROVED="APPROVED",e.DECLINED="DECLINED"}(gle||(gle={}));Ole={},Object(k.a)(Ole,gle.NEW,"Pending Approval"),Object(k.a)(Ole,gle.APPROVED,"Approved"),Object(k.a)(Ole,gle.DECLINED,"Declined");function wle(){var e=Object(f.a)(["\n  display: ",";\n"]);return wle=function(){return e},e}var Sle=y.default.div(wle(),(function(e){return e.hidden?"none":"flex"})),kle="ModalLabourForm",Cle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).multiEditFormVaidation=function(e){var t=!1;return Object.keys(e).forEach((function(n){t||(t="undefined"!==typeof e[n])})),t?!e.started_at_override&&!e.ended_at_override||(e.started_at_override&&e.ended_at_override?!(e.started_at_override&&e.ended_at_override&&!pm()(e.started_at_override).isBefore(e.ended_at_override))||(Oj(uj.Danger,"Start date cannot be equal or greater than end date"),!1):(Oj(uj.Danger,"Start date or end date cannot be empty"),!1)):(Oj(uj.Danger,"Please fill at least one field"),!1)},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.onSubmit,o=r.onClose,!r.isMultiEdit){t.next=10;break}if(i={started_at_date:n.started_at_date,break:n.break,labour_type:n.labour_type,started_at_override:n.started_at_override,ended_at_override:n.ended_at_override},!e.multiEditFormVaidation(i)){t.next=8;break}return t.next=7,a(n);case 7:o();case 8:t.next=13;break;case 10:return t.next=12,a(n);case 12:o();case 13:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadUsers=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=Qv()(e.loadUsers,1e3),e.getWorkerOptionLabel=function(e){return mm(e).name},e.getWorkerOptionValue=function(e){return e.id},e.getLabourTypeOptionLabel=function(e){return e.name},e.getLabourTypeOptionValue=function(e){return e.id},e.renderBody=function(){var t,n=e.props,r=n.handleSubmit,o=n.loadTypes,i=o.data,c=o.loading,s=n.isEdit,l=n.isMultiEdit,u=n.workers;return Object(a.jsxs)("form",{id:kle,onSubmit:r(e.onSubmit),autoComplete:"off",children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"started_at_date",label:"Date",validate:l?void 0:Dv,component:s_})})}),Object(a.jsxs)(Sle,{className:"row",children:[Object(a.jsx)("div",{className:"col-6",style:{display:s&&l?"none":"inline-block"},children:Object(a.jsx)(Hv.a,{name:"user",label:"Worker",component:xO,options:(null===u||void 0===u||null===(t=u.data)||void 0===t?void 0:t.data)||[],getOptionLabel:e.getWorkerOptionLabel,getOptionValue:e.getWorkerOptionValue,validate:l?void 0:Dv,isClearable:!0,disabled:s})}),Object(a.jsxs)("div",{className:"col-6",children:[c&&Object(a.jsx)(Nv,{size:20,color:_.white}),Object(a.jsx)(Hv.a,{name:"labour_type",label:"Crew Type",component:xO,options:(null===i||void 0===i?void 0:i.data)||[],validate:l?void 0:Dv,getOptionLabel:e.getLabourTypeOptionLabel,getOptionValue:e.getLabourTypeOptionValue,disabled:s&&!l})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"started_at_override",label:"Start Time",component:s_,showTime:!0,dateFormat:!1,viewMode:"time",validate:l?void 0:Dv,iconName:Xf.Clock,timeFormat:sv,timeConstraints:{minutes:{step:15}}})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"ended_at_override",label:"End Time",component:s_,showTime:!0,dateFormat:!1,viewMode:"time",iconName:Xf.Clock,validate:l?void 0:Dv,timeConstraints:{minutes:{step:15}}})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"break",label:"Break",component:s_,showTime:!0,dateFormat:!1,viewMode:"time",timeFormat:"HH:mm",iconName:Xf.Clock,timeConstraints:{minutes:{step:15}}})})]})]})},e.renderFooter=function(){var t=e.props.invalid;return Object(a.jsx)(Xg,{className:"btn",type:"submit",disabled:t,form:kle,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadTypes.fetch(),this.props.workers.fetch()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Nle=Object(sg.compose)(Object(jv.a)({form:kle}),oj({loadTypes:{fetch:ZW.getLabourTypes},workers:{fetch:zE.getWorkerList}}))(Cle);function Ele(e,t,n){var r=pm()(e).startOf("day"),a=pm()(t),o=pm()(n);return{started:r.add(a.hour(),"hour").add(a.minute(),"minute"),ended:(r=pm()(e).startOf("day")).add(o.hour(),"hour").add(o.minute(),"minute")}}var Ale=function(e){var t=Ele(e.started_at_date,e.started_at_override,e.ended_at_override);return{job_id:e.job_id,labour_type_id:e.labour_type.id,worker_id:e.user.id,creator_id:e.creator_id,started_at:t.started.format(ov),ended_at:t.ended.format(ov),break:e.break&&Am(e.break)}},Ile=function(e){var t=Ele(e.started_at_date,e.started_at_override,e.ended_at_override);return{started_at_override:t.started.format(ov),ended_at_override:t.ended&&t.ended.format(ov),break:e.break?Am(e.break):0}},Tle=function(e){return Object(c.a)(Object(c.a)({},e),{},{started_at_date:pm()(e.started_at_override),started_at_override:pm()(e.started_at_override).utcOffset(0),ended_at_override:e.ended_at_override&&pm()(e.ended_at_override).utcOffset(0),user:e.worker,break:e.break?Em(e.break):Em("00")})};function Rle(){var e=Object(f.a)(["\n  padding-left: 20px;\n  color: ",";\n  font-weight: ",";\n"]);return Rle=function(){return e},e}function Dle(){var e=Object(f.a)(["\n  border-radius: 5px;\n  background: ",";\n  height: 45px;\n  width: 270px;\n  position: absolute;\n  top: 10px;\n  left: 50%;\n  margin-left: -100px;\n  display: "," !important;\n"]);return Dle=function(){return e},e}var Mle=y.default.div(Dle(),_.menu,(function(e){return e.hidden?"none":"flex"})),Lle=y.default.div(Rle(),_.white,lm.bold),Ple=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.selected,n=e.hidden,r=e.onDeleteSelected,o=e.onMarkAsUsedSelected,i=e.onEditSelected,c=e.multiLabourApprovedSelected;return Object(a.jsxs)(Mle,{className:"d-flex flex-row align-content-center",hidden:n,children:[Object(a.jsx)(um.a,{className:"overlapping",id:"delete-all-tooltip",effect:"solid"}),Object(a.jsx)(um.a,{className:"overlapping",id:"edit-all-tooltip",effect:"solid"}),Object(a.jsxs)(Lle,{className:"mr-auto align-self-center",children:[t," selected "]}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Edit selected records","data-for":"edit-all-tooltip",color:_.gray4,disabled:0===t,children:Object(a.jsx)(cm,{name:Xf.Pencil,onClick:i})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as approved","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t,children:Object(a.jsx)(jse,{name:Xf.Approved,onClick:c})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as used","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t,children:Object(a.jsx)(cm,{name:Xf.markAsReadGray,onClick:o})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Delete selected records","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t,children:Object(a.jsx)(cm,{name:Xf.Trash,onClick:r})})]})}}]),n}(p.PureComponent);function Fle(){var e=Object(f.a)(["\n  display: block;\n"]);return Fle=function(){return e},e}function Ule(){var e=Object(f.a)(["\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return Ule=function(){return e},e}function Ble(){var e=Object(f.a)(["\n  position: absolute;\n  right: 12px;\n  top: 8px;\n  cursor: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  :hover path {\n    stroke: ",";\n  }\n"]);return Ble=function(){return e},e}function Vle(){var e=Object(f.a)(["\n  position: relative;\n\n  input {\n    ",";\n    padding-right: 40px;\n  }\n"]);return Vle=function(){return e},e}function Jle(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return Jle=function(){return e},e}function qle(){var e=Object(f.a)(["\n  background: ",";\n  border: none;\n"]);return qle=function(){return e},e}function zle(){var e=Object(f.a)(["\n  color: ",";\n"]);return zle=function(){return e},e}var Gle,Wle=y.default.label(zle(),_.gray4),Hle=y.default.input(qle(),_.gray1),Yle=y.default.span(Jle(),_.gray1),Qle=(y.default.div(Vle(),vg),Object(y.default)(gv(["disabled"])(cm))(Ble(),(function(e){return e.disabled?"unset":"pointer"}),_.gray4,(function(e){return e.disabled?_.gray4:_.gray5})),Object(y.default)(gv(["disabled"])(cm))(Ule(),_.gray4,(function(e){return e.disabled?_.gray4:_.gray5}))),Kle=(y.default.div(Fle()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={value:e.props.value},e.picker=p.createRef(),e.isValidDate=function(t){if(!e.props.futureEnabled){var n=pm()();return pm()(t).isBefore(n)}return!0},e.renderInput=function(t,n){var r=e.props,o=r.iconName,i=r.dateFormat,s=r.timeFormat,l=r.showTime,u=r.disabled,d=!1===i&&(l||s),p="";!1!==i?(p=iv,(l||s)&&(p+=" "+(s||sv))):p=s||sv;var h=e.state.value||"";return pm.a.isMoment(h)&&(h=h.format(p)),Object(a.jsxs)("div",{className:"input-group",onClick:n,children:[Object(a.jsx)(Hle,Object(c.a)(Object(c.a)({},t),{},{value:h,onChange:function(n){e.setState({value:n.target.value}),t.onChange(n)}})),!1!==o&&Object(a.jsx)("span",{className:"input-group-append",children:Object(a.jsx)(Yle,{className:"input-group-text px-2",children:Object(a.jsx)(Qle,{name:o||(d?Xf.Clock:Xf.Calendar),size:18,disabled:u})})})]})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){this.state.value&&this.props.value&&e.value===this.props.value||this.setState({value:this.props.value})}},{key:"render",value:function(){var e=this,t=this.props,n=t.isValidDate,r=t.dateFormat,o=t.showTime,i=t.timeFormat,c=t.label,s=t.labelClassName,l=t.className,u=t.viewDate,d=t.defaultDate,p=t.closeOnSelect,h={placeholder:this.props.placeholder,className:x()("form-control"),disabled:this.props.disabled},b=this.props,f=b.onChange,m=b.disabled;return Object(a.jsxs)("div",{className:l,children:[c&&Object(a.jsx)(Wle,{className:s,children:c}),Object(a.jsx)("div",{className:this.props.valueClassName,children:Object(a.jsx)(Qy.a,{ref:this.picker,inputProps:h,dateFormat:!1!==r&&iv,timeFormat:!(!o&&!i)&&(i||sv),isValidDate:n||this.isValidDate,initialViewDate:u,initialValue:d,closeOnSelect:!1!==p&&!(o||i),value:this.state.value,renderInput:m?void 0:this.renderInput,onChange:function(t){t&&!pm.a.isMoment(t)||f(t),e.setState({value:t})}})})]})}}]),n}(p.PureComponent)),Zle=function(e,t,n){var r;return t&&t.isValid()&&e===gle.APPROVED?Object(a.jsxs)("div",{className:"d-flex flex-column",children:[Object(a.jsx)(rN,{tag:{name:"APPROVED",color:_.gray6}}),n.creator_id&&Object(a.jsxs)(rle,{children:[n.creator_id," ",n.created_at&&"- ".concat(pm()(n.created_at).format(sv))]}),(null===n||void 0===n?void 0:n.invoice_item)&&Object(a.jsxs)(rle,{children:["Invoice: #",null===n||void 0===n||null===(r=n.invoice_item)||void 0===r?void 0:r.invoice_id]})]}):e===gle.NEW?Object(a.jsx)(rN,{tag:{name:"PENDING",color:_.gray6}}):Object(a.jsx)(a.Fragment,{})};!function(e){e[e.EndDate=0]="EndDate",e[e.StartDate=1]="StartDate"}(Gle||(Gle={}));var Xle=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showLabourModal:!1,item:void 0,allSelected:!1,isMultiEdit:!1,hideMultiselect:!0},e.toggleMultiselectView=function(){e.props.jobIsClosed||e.setState({hideMultiselect:!e.state.hideMultiselect})},e.multiSelectIcon=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"view-multiselect",effect:"solid",place:"bottom"}),Object(a.jsx)(J_,{"data-tip":"Show/Hide multiselect column","data-for":"view-multiselect",className:"align-self-center",children:Object(a.jsx)(cm,{name:Xf.BulletList,size:20,onClick:e.toggleMultiselectView})})]})},e.labourColumns=function(){return[{id:"multiselectColumn",header:Object(a.jsx)(nI,{size:15,value:e.state.allSelected,onChange:e.selectAll}),width:"5%",type:Are.Text,hidden:e.state.hideMultiselect,cell:function(t){return Object(a.jsx)(nI,{size:15,value:e.labourIsSelected(+t.id),onChange:function(){return e.toggleSelection(t)}})}},{id:"item",header:Object(a.jsx)(Fre,{children:"Labour"}),width:"11%",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:pm()(e.started_at_override).utcOffset(0).format(iv)})}},{id:"worker",width:"12%",header:"Worker",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.worker.full_name})}},{id:"labour_type_name",width:"10%",header:"Type",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.labour_type.name})}},{id:"period",width:"230px",header:"Duration",type:Are.Text,cell:function(t){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(Kle,{disabled:e.props.jobIsClosed,dateFormat:!1,timeFormat:sv,onChange:function(n){return e.onDateChange(n,Gle.StartDate,t)},value:pm()(t.started_at_override).utcOffset(0),iconName:!1}),Object(a.jsx)("span",{style:{marginLeft:"10px",marginRight:"10px"},children:"to"}),Object(a.jsx)(Kle,{disabled:e.props.jobIsClosed,dateFormat:!1,timeFormat:sv,onChange:function(n){return e.onDateChange(n,Gle.EndDate,t)},value:pm()(t.ended_at_override).utcOffset(0),iconName:!1})]})}},{id:"break",width:"90px",header:"Break",type:Are.Text,cell:function(t){return Object(a.jsx)(Kle,{disabled:e.props.jobIsClosed,dateFormat:!1,timeFormat:"HH:mm",onChange:function(n){return e.onChangeBreak(n,t)},value:Em(t.break),iconName:!1})}},{id:"first_tier_time_amount",header:"1.0x",width:"5%",type:Are.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:Cm(e.first_tier_time_amount)})}},{id:"second_tier_time_amount",header:"1.5x",width:"5%",type:Are.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:Cm(e.second_tier_time_amount)})}},{id:"third_tier_time_amount",header:"2.0x",width:"5%",type:Are.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:Cm(e.third_tier_time_amount)})}},{id:"fourth_tier_time_amount",header:"2.5x",width:"5%",type:Are.Numeric,hidden:e.props.hideRates,cell:function(e){return Object(a.jsx)("span",{children:Cm(e.fourth_tier_time_amount)})}},{id:"total_hrs",header:"Total Hrs",width:"7%",type:Are.Numeric,cell:function(e){return Object(a.jsx)(Fre,{children:Cm(e.first_tier_time_amount+e.second_tier_time_amount+e.third_tier_time_amount+e.fourth_tier_time_amount)})}},{id:"total_amount",header:"Amount Ex GST",width:"10%",type:Are.Numeric,cell:function(e){return Object(a.jsx)(Fre,{children:vm(e.calculated_total_amount)})}},{id:"status",header:"Status",width:"12%",type:Are.Text,cell:function(e){return Zle(e.status,e.created_at?pm()(e.created_at):null,e)}},{id:"mark_as_used",header:"",type:Are.Text,cell:function(e){return ole(e.in_report_used_count||0)}},{id:"menu",width:"5%",type:Are.Numeric,header:e.multiSelectIcon(),cell:function(t){return Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.onDateChange=function(t,n,r){switch(e.debouncedDateUpdate(t,n,r.id),n){case Gle.StartDate:r.started_at_override=pm()(t).toISOString();break;case Gle.EndDate:r.ended_at_override=pm()(t).toISOString()}},e.updateDate=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r,a){var o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:o=e.props.jobId,i=pm()(n),t.t0=r,t.next=t.t0===Gle.StartDate?5:t.t0===Gle.EndDate?8:11;break;case 5:return t.next=7,aW.updateJobLabour(o,a,{started_at_override:pm()(i).format(ov)});case 7:return t.abrupt("break",11);case 8:return t.next=10,aW.updateJobLabour(o,a,{ended_at_override:pm()(i).format(ov)});case 10:return t.abrupt("break",11);case 11:e.loadLabour();case 12:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e.debouncedDateUpdate=Object(m.debounce)(e.updateDate,1e3),e.onChangeBreak=function(t,n){var r=Am(t);e.debouncedBreakUpdate(r,n.id),n.break=r},e.updateBreak=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.jobId,t.next=3,aW.updateJobLabour(a,r,{break:n});case 3:e.loadLabour();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedBreakUpdate=Object(m.debounce)(e.updateBreak,1e3),e.approveLabour=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,o=r.jobId,i=r.updateLabourCounters,!n.id){t.next=15;break}return t.next=4,a(iw("Confirm","Approve Labour for ".concat(n.worker.full_name," at ").concat(pm()(n.started_at_override).format(iv),"?")));case 4:if(!t.sent){t.next=14;break}return e.setState({loading:!0}),t.next=9,aW.approveJobLabour(o,n.id);case 9:e.setState({loading:!1}),e.loadLabour(),i(),t.next=15;break;case 14:return t.abrupt("return",Promise.resolve());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.tableMenuItems=function(t,n,r){var a=t.has(vx.JOBS_USAGE_LABOUR_MANAGE),o=t.has(vx.JOBS_USAGE_LABOUR_UPDATE),i=t.has(vx.JOBS_USAGE_LABOUR_APPROVE),c=n.client,s=n.status,l=n.invoice_item_id&&n.invoice_item_id>0,u=[{name:"View / Edit",disabled:!a||r||l||!o,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!i||r||l||!a,onClick:function(){return e.approveLabour(n)}},{name:"Copy",disabled:!a||r,onClick:function(){return e.copyTableItem(n)}}];return"MOBILE"===c&&(s!==gle.APPROVED&&u.push({name:"Approve",disabled:!a||r||l,onClick:function(){return e.updateStatus(n,gle.APPROVED)}}),s!==gle.DECLINED&&u.push({name:"Decline",disabled:!a||r||l,onClick:function(){return e.updateStatus(n,gle.DECLINED)}})),u.push({name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:n.status!==gle.APPROVED||r||l,onClick:e.markAsUsed(n)}),u.push({type:"divider"}),u.push({name:"Delete",disabled:!a||r||l,onClick:function(){return e.deleteItem(n)}}),u},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_labour",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadLabour(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.multiLabourApproved=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,o=n.updateLabourCounters,i=n.selectedLabourIds,c=n.userContext,s=c.has(vx.JOBS_USAGE_LABOUR_APPROVE),!(i.length>0&&s)){t.next=26;break}return t.next=5,r(iw("Confirm","Approve selected Labour item(s)?"));case 5:if(l=t.sent,t.prev=6,!l){t.next=17;break}return e.setState({loading:!0}),t.next=11,aW.approveBulkJobLabour(a,Object(aj.a)(i));case 11:e.loadLabour(),o(),r(_H()),e.setState({loading:!1,isMultiEdit:!1,allSelected:!1}),t.next=18;break;case 17:return t.abrupt("return",Promise.resolve());case 18:t.next=23;break;case 20:return t.prev=20,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 23:return t.prev=23,e.setState({loading:!1}),t.finish(23);case 26:case"end":return t.stop()}}),t,null,[[6,20,23,26]])}))),e.showLabourModal=function(){return e.setState({showLabourModal:!0,isMultiEdit:!1})},e.hideLabourModal=function(){e.setState({showLabourModal:!1,isMultiEdit:!1}),e.props.hideAddLabour()},e.renderConfirmationUpdatedRecords=function(t){var n=e.props,r=n.selectedLabourIds,o=n.currentJobLabours,i=r.map((function(e){var n,r=null===(n=o.data)||void 0===n?void 0:n.data.find((function(t){return t.id===e}));if(r){var a,i=t.started_at_date?t.started_at_date:pm()(r.started_at).utcOffset(0),s=t.started_at_override?t.started_at_override:pm()(r.started_at_override).utcOffset(0),l=t.ended_at_override?t.ended_at_override:pm()(r.ended_at_override).utcOffset(0),u=t.break?t.break:Em(r.break),d=Ile(Object(c.a)(Object(c.a)({},t),{},{started_at_date:i,started_at_override:s,ended_at_override:l,break:u}));return Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},r),t),d),{},{labour_type_id:null===t||void 0===t||null===(a=t.labour_type)||void 0===a?void 0:a.id,started_at:d.started_at_override,ended_at:d.ended_at_override})}})).filter((function(e){return!!e}));return Object(a.jsx)(rse,{className:"table",children:Object(a.jsx)(Qse,{dataSource:i,columnsDefinition:e.confirmationlabourColumns(),useCustomStyle:!0})})},e.confirmationlabourColumns=function(){return[{id:"item",header:Object(a.jsx)(Fre,{children:"Labour"}),width:"120px",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:pm()(e.started_at).utcOffset(0).format(iv)})}},{id:"worker",header:"Worker",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.worker.full_name})}},{id:"labour_type_name",header:"Type",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.labour_type.name})}},{id:"period",header:"Duration",width:"230px",type:Are.Text,cell:function(e){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(Kle,{disabled:!0,dateFormat:!1,timeFormat:sv,onChange:function(e){},value:pm()(e.started_at_override).utcOffset(0),iconName:!1}),Object(a.jsx)("span",{style:{marginLeft:"10px",marginRight:"10px"},children:"to"}),Object(a.jsx)(Kle,{disabled:!0,dateFormat:!1,timeFormat:sv,onChange:function(e){},value:pm()(e.ended_at_override).utcOffset(0),iconName:!1})]})}},{id:"break",header:"Break",width:"90px",type:Are.Text,cell:function(e){return Object(a.jsx)(Kle,{disabled:!0,dateFormat:!1,timeFormat:"HH:mm",onChange:function(e){},value:Em(e.break),iconName:!1})}}]},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l,u,d,p,h;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,o=r.userId,i=r.addNewLabour,s=r.jobId,l=r.updateLabourCounters,u=r.selectedLabourIds,d=r.currentJobLabours,p=e.state.isMultiEdit,e.setState({loading:!0}),!i&&0!==n.id){t.next=11;break}return t.next=6,ZW.createJobLabour(Object(c.a)(Object(c.a)({},Ale(n)),{},{client:"WEB",job_id:s,creator_id:o}));case 6:l(),e.loadLabour(),e.setState({loading:!1}),t.next=20;break;case 11:if(!p){t.next=18;break}return t.next=14,a(iw("Confirm","Update selected labour item(s)?",e.renderConfirmationUpdatedRecords(n),"950px"));case 14:if(t.sent)try{u.map((function(t){var r,a=null===(r=d.data)||void 0===r?void 0:r.data.find((function(e){return e.id===t}));if(a){var o,i=n.started_at_date?n.started_at_date:pm()(a.started_at).utcOffset(0),u=n.started_at_override?n.started_at_override:pm()(a.started_at_override).utcOffset(0),p=n.ended_at_override?n.ended_at_override:pm()(a.ended_at_override).utcOffset(0),h=n.break?n.break:Em(a.break),b=Ile(Object(c.a)(Object(c.a)({},n),{},{started_at_date:i,started_at_override:u,ended_at_override:p,break:h}));Promise.all([ZW.updateJobLabour(s,a.id,Object(c.a)(Object(c.a)({},b),{},{labour_type_id:null===n||void 0===n||null===(o=n.labour_type)||void 0===o?void 0:o.id,started_at:b.started_at_override,ended_at:b.ended_at_override}))]).then((function(){e.loadLabour(),l(),e.props.dispatch(_H()),e.setState({loading:!1,isMultiEdit:!1,allSelected:!1})}))}}))}catch(b){}finally{e.setState({loading:!1,isMultiEdit:!1})}else e.setState({loading:!1});t.next=20;break;case 18:h=Ile(n),Promise.all([ZW.updateJobLabour(s,+n.id,h)]).finally((function(){e.loadLabour(),l(),e.setState({loading:!1})}));case 20:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.selectAll=function(){var t=e.props.currentJobLabours;e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&t.data&&t.data.data.length?e.props.dispatch(SH(t.data.data)):e.props.dispatch(_H())}))},e.toggleSelection=function(t){e.props.dispatch(wH(t))},e.labourIsSelected=function(t){var n=e.props.selectedLabourIds;return!!n&&n.includes(t)},e.onDeleteSelected=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!((i=n.selectedLabourIds).length>0)){t.next=15;break}return t.next=4,a(iw("Confirm","Delete selected Labour item(s)?","Are you sure you want to delete the selected item(s)? This action cannot be undone!"));case 4:if(!t.sent){t.next=14;break}e.setState({loading:!0}),i.forEach(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,aW.deleteJobLabour(r,+t);case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),e.props.dispatch(_H()),e.setState({loading:!1,allSelected:!1}),e.loadLabour(),o(),t.next=15;break;case 14:return t.abrupt("return",Promise.resolve());case 15:case"end":return t.stop()}}),t)}))),e.onMaskAsUsedSelected=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!((i=n.selectedLabourIds).length>0)){t.next=25;break}return t.next=4,a(iw("Confirm","Mark selected Labour item(s) as used?"));case 4:if(c=t.sent,t.prev=5,!c){t.next=16;break}return e.setState({loading:!0}),t.next=10,aW.markAsUsedBulkJobLabour(r,Object(aj.a)(i));case 10:e.props.dispatch(_H()),e.setState({loading:!1,allSelected:!1}),e.loadLabour(),o(),t.next=17;break;case 16:return t.abrupt("return",Promise.resolve());case 17:t.next=22;break;case 19:return t.prev=19,t.t0=t.catch(5),t.abrupt("return",Promise.reject());case 22:return t.prev=22,e.setState({loading:!1}),t.finish(22);case 25:case"end":return t.stop()}}),t,null,[[5,19,22,25]])}))),e.onEditSelected=function(){var t=e.props.userContext.has(vx.JOBS_USAGE_LABOUR_UPDATE);e.props.selectedLabourIds.length>0&&t&&e.setState({showLabourModal:!0,isMultiEdit:!0})},e.initialValues=function(){var t=e.state.isMultiEdit,n=pm()();return{started_at_date:t?void 0:pm()(n),started_at_override:t?void 0:pm()(n).utcOffset(0),ended_at_override:t?void 0:pm()(n).utcOffset(0),break:t?void 0:Em("00")}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLabour()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.selectedLabourIds,n=e.currentJobLabours;n.data&&(t.length,n.data.data.length)}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showLabourModal()}},{key:"copyTableItem",value:function(e){this.setState({item:Object(c.a)(Object(c.a)({},e),{},{id:0})}),this.showLabourModal()}},{key:"deleteItem",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(iw("Confirm","Delete Labour for ".concat(t.worker.full_name," at ").concat(pm()(t.started_at_override).format(iv),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,aW.deleteJobLabour(r,t.id);case 9:this.setState({loading:!1}),this.loadLabour(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"updateStatus",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r=this.props,a=r.jobId,r.dispatch,o=r.updateLabourCounters,!t.id){e.next=8;break}return this.setState({loading:!0}),e.next=5,aW.updateJobLabourStatus(a,t.id,n);case 5:this.setState({loading:!1}),this.loadLabour(),o();case 8:case"end":return e.stop()}}),e,this)})));return function(t,n){return e.apply(this,arguments)}}()},{key:"loadLabour",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return Dk(dH.load,dH.loadComplete,dH.error,(function(){return ZW.getJobLabours(e,{page:t})}))}(n,e))}},{key:"render",value:function(){var e=this.props,t=e.currentJobLabours,n=e.addNewLabour,r=e.selectedLabourIds,o=this.state,i=o.loading,c=o.showLabourModal,s=o.item,l=o.isMultiEdit,u=o.hideMultiselect,d=0===(null===s||void 0===s?void 0:s.id),p=t.data,h=p&&p.data?p.data:[],b=t.loading||i,f=c||n,m=n||l;return Object(a.jsxs)(a.Fragment,{children:[f&&Object(a.jsx)(Nle,{isOpen:f,onClose:this.hideLabourModal,initialValues:m?this.initialValues():Tle(s||{}),onSubmit:this.onSubmit,title:n||d&&!l?"Add Labour":l?"Edit selected Labour records":"Edit Labour",isEdit:!n&&!d,isMultiEdit:l}),b&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(Ple,{hidden:u,onDeleteSelected:this.onDeleteSelected,onEditSelected:this.onEditSelected,onMarkAsUsedSelected:this.onMaskAsUsedSelected,multiLabourApprovedSelected:this.multiLabourApproved,selected:r.length}),Object(a.jsxs)(rse,{className:"table",children:[Object(a.jsx)(Qse,{dataSource:h,columnsDefinition:this.labourColumns(),useCustomStyle:!0}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsxs)("b",{children:["Total Break : \xa0",Nm(null===h||void 0===h?void 0:h.map((function(e){return Cm(e.break)})))]})}),Object(a.jsx)("td",{colSpan:2,children:Object(a.jsxs)("b",{children:["Total Hrs : \xa0",Nm(null===h||void 0===h?void 0:h.map((function(e){return Cm(e.first_tier_time_amount+e.second_tier_time_amount+e.third_tier_time_amount+e.fourth_tier_time_amount)})))]})}),Object(a.jsx)("td",{colSpan:3,children:Object(a.jsxs)("b",{children:["Totals Amount Ex GST : \xa0",vm(j.a.sumBy(h,"calculated_total_amount"))]})})]},"other-footer")]}),p&&p.pagination&&p.pagination.last_page>1&&Object(a.jsx)(oC,{pagination:p.pagination,onChange:this.loadLabour})]})}}]),n}(p.PureComponent),$le=Object(sg.compose)(Object(b.b)((function(e){return{userId:OP(e),currentJobLabours:e.currentJobUsageAndActuals.labours,selectedLabourIds:e.currentJobUsageAndActuals.selectedLabourIds}})))(Xle),eue="ModalAllowanceForm",tue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:o(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.loadTypes,o=r.data,i=r.loading,c=t.amount,s=t.allowanceType,l=t.isEdit;return Object(a.jsxs)("form",{id:eue,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"user",label:"Recipient",component:NO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getRecipientOptionLabel,getOptionValue:e.getRecipientOptionValue,validate:Dv,isClearable:!0,placeholder:"Start typing to search...",disabled:l})}),Object(a.jsxs)("div",{className:"col-5 position-relative",children:[i&&Object(a.jsx)(Nv,{size:20,color:_.white}),Object(a.jsx)(Hv.a,{name:"allowance_type",label:"Allowance Type",component:xO,getOptionLabel:e.getAllowanceTypeOptionLabel,getOptionValue:e.getAllowanceTypeOptionValue,validate:Dv,options:o||[],disabled:l})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"date_given",label:"Date",component:s_,validate:Dv,futureEnabled:!0})}),Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(Hv.a,{name:"amount",label:"Amount ".concat(s?"(".concat(s.charging_interval.toLowerCase(),")"):"",": ").concat(vm(Mm((c||0)*(s&&s.charge_rate_per_interval||0)))),component:yg,type:"number",validate:Dv})})]})]})},e.loadUsers=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=Qv()(e.loadUsers,1e3),e.getRecipientOptionLabel=function(e){return mm(e).name},e.getRecipientOptionValue=function(e){return e.id},e.getAllowanceTypeOptionLabel=function(e){return e.name},e.getAllowanceTypeOptionValue=function(e){return e.id},e.renderFooter=function(){var t=e.props.invalid;return Object(a.jsx)(Xg,{className:"btn",type:"submit",disabled:t,form:eue,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.loadTypes.fetch()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),nue=Object(sg.compose)(Object(jv.a)({form:eue}),Object(ug.a)({amount:"amount",allowanceType:"allowance_type"}),oj({loadTypes:{fetch:ZW.getAllowanceTypes}}))(tue),rue=function(e){return Object(c.a)(Object(c.a)({},e),{},{user_id:e.user.id,allowance_type_id:e.allowance_type.id,date_given:e.date_given.format(av)})},aue=function(e){return Object(c.a)(Object(c.a)({},e),{},{date_given:pm()(e.date_given)})},oue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showAllowanceModal:!1,item:void 0,allSelected:!1,hideMultiselect:!0,selectedAllowanceIds:[]},e.selectAll=function(){var t=e.props.currentJobAllowances;e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&t.data&&t.data.data.length>0?e.setState({selectedAllowanceIds:t.data.data.map((function(e){return e.id}))}):e.setState({selectedAllowanceIds:[]})}))},e.toggleSelection=function(t){var n=e.props.currentJobAllowances.data,r=Object(aj.a)(e.state.selectedAllowanceIds);r.includes(t)?(r=r.filter((function(e){return e!==t})),e.setState({selectedAllowanceIds:r,allSelected:r.length===(null===n||void 0===n?void 0:n.data.length)})):(r.push(t),e.setState({selectedAllowanceIds:Object(aj.a)(r),allSelected:r.length===(null===n||void 0===n?void 0:n.data.length)}))},e.AllowanceIsSelected=function(t){var n=e.state.selectedAllowanceIds;return!!n&&n.includes(t)},e.toggleMultiselectView=function(){e.setState({hideMultiselect:!e.state.hideMultiselect})},e.multiSelectIcon=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"view-multiselect",effect:"solid",place:"bottom"}),Object(a.jsx)(J_,{"data-tip":"Show/Hide multiselect column","data-for":"view-multiselect",className:"align-self-center",children:Object(a.jsx)(cm,{name:Xf.BulletList,size:20,onClick:e.toggleMultiselectView})})]})},e.allowancesColumns=function(){return[{id:"multiselectColumn",header:Object(a.jsx)(nI,{size:15,value:e.state.allSelected,onChange:e.selectAll}),width:"5%",type:Are.Text,hidden:e.state.hideMultiselect,cell:function(t){return Object(a.jsx)(nI,{size:15,value:e.AllowanceIsSelected(+t.id),onChange:function(){return e.toggleSelection(+t.id)}})}},{id:"item",header:"Allowances",width:"12%",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:pm()(e.date_given).format(iv)})}},{id:"user",width:"20%",header:"Recipient",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.user.full_name})}},{id:"type",width:"10%",header:"Type",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.allowance_type.name})}},{id:"amount",width:"20%",header:"Unit",type:Are.Text,cell:function(t){return Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(Bse,{quantity:t.amount,onChange:function(n){return e.onChangeQuantity(n,t.id)},disabled:e.props.jobIsClosed}),Object(a.jsx)("span",{style:{marginLeft:"5px"},children:t.allowance_type.charging_interval})]})}},{id:"total_amount",width:"10%",header:"Amount Ex GST",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:vm(e.total_amount)})}},{id:"status",header:"Status",width:"12%",type:Are.Text,cell:function(e){return ale(e.approved_at?pm()(e.approved_at):null,e)}},{id:"mark_as_used",header:"",width:"5%",type:Are.Text,cell:function(e){return ole(e.in_report_used_count||0)}},{id:"menu",header:e.multiSelectIcon(),width:"5%",type:Are.Numeric,cell:function(t){return Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.onChangeQuantity=function(t,n){e.debouncedQuantityUpdate(t,n)},e.updateQuantity=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.jobId,t.next=3,ZW.updateAllowance({id:r,job_id:a,amount:n});case 3:e.loadAllowance();case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.debouncedQuantityUpdate=Object(m.debounce)(e.updateQuantity,1e3),e.showAllowanceModal=function(){return e.setState({showAllowanceModal:!0})},e.hideAllowanceModal=function(){e.setState({showAllowanceModal:!1}),e.props.hideAddAllowance()},e.tableMenuItems=function(t,n,r){var a=t.has(vx.JOBS_USAGE_ALLOWANCES_MANAGE),o=t.has(vx.JOBS_USAGE_ALLOWANCES_APPROVE),i=n.invoice_item_id&&n.invoice_item_id>0;return[{name:"View / Edit",disabled:!a||r||i,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!o||r||i,onClick:function(){return e.approveAllowance(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!n.approved_at||r||i,onClick:e.markAsUsed(n)},{type:"divider"},{name:"Delete",disabled:!a||r||i,onClick:function(){return e.deleteItem(n)}}]},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_allowance",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadAllowance(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.approveAllowance=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!n.id){t.next=14;break}return t.next=4,r(iw("Confirm"," Approve Allowance for ".concat(n.user.full_name," at ").concat(pm()(n.date_given).format(iv),"?")));case 4:if(!t.sent){t.next=13;break}return e.setState({loading:!0}),t.next=9,ZW.approveAllowance(n);case 9:e.setState({loading:!1}),e.loadAllowance(),t.next=14;break;case 13:return t.abrupt("return",Promise.resolve());case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.jobId,o=r.userId,i=r.addNewAllowance,s=r.updateLabourCounters,!i){t.next=8;break}return t.next=4,ZW.createAllowance(Object(c.a)(Object(c.a)({},rue(n)),{},{job_id:a,creator_id:o}));case 4:e.loadAllowance(),s(),t.next=12;break;case 8:return l=rue(n),t.next=11,ZW.updateAllowance(l);case 11:e.loadAllowance();case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.multiAllowanceDelete=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedAllowanceIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Delete selected Allowance item(s)?","Are you sure you want to delete the selected item(s)? This action cannot be undone!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,$G.deleteBulkJobAllowance(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedAllowanceIds:[],allSelected:!1}),e.loadAllowance(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiAllowanceMarkAsUsed=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedAllowanceIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Mark selected Allowance item(s) as used?","Only approved selected item(s) will be marked as used!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,$G.markAsUsedBulkJobAllowance(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedAllowanceIds:[],allSelected:!1}),e.loadAllowance(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiAllowanceApproved=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedAllowanceIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Approve selected Allowance item(s)?"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,$G.approveBulkJobAllowance(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedAllowanceIds:[],allSelected:!1}),e.loadAllowance(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiActionIcons=function(){var t=e.state.selectedAllowanceIds;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as approved","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(jse,{name:Xf.Approved,onClick:e.multiAllowanceApproved})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as used","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.markAsReadGray,onClick:e.multiAllowanceMarkAsUsed})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Delete selected records","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.Trash,onClick:e.multiAllowanceDelete})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadAllowance()}},{key:"loadAllowance",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return Dk(tH.load,tH.loadComplete,tH.error,(function(){return ZW.getJobAllowances(e,{page:t})}))}(n,e))}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showAllowanceModal()}},{key:"deleteItem",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(iw("Confirm","Delete Allowance for ".concat(t.user.full_name," at ").concat(pm()(t.date_given).format(iv),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,ZW.deleteJobAllowance(r,t.id);case 9:this.setState({loading:!1}),this.loadAllowance(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.currentJobAllowances,n=e.addNewAllowance,r=this.state,o=r.loading,i=r.showAllowanceModal,c=r.item,s=r.hideMultiselect,l=r.selectedAllowanceIds,u=t.data,d=u&&u.data?u.data:[],p=t.loading||o,h=i||n;return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)(nue,{isOpen:h,onClose:this.hideAllowanceModal,initialValues:n?{}:aue(c||{}),onSubmit:this.onSubmit,title:n?"Add Allowance":"Edit Allowance",isEdit:!n}),p&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(vse,{hidden:s,icons:this.multiActionIcons(),selected:l.length}),Object(a.jsxs)(rse,{className:"table",children:[Object(a.jsx)(Qse,{dataSource:d,columnsDefinition:this.allowancesColumns(),useCustomStyle:!0}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{colSpan:3,children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(d,"total_amount"))]})})]},"other-footer")]}),u&&u.pagination&&u.pagination.last_page>1&&Object(a.jsx)(oC,{pagination:u.pagination,onChange:this.loadAllowance})]})}}]),n}(p.PureComponent),iue=Object(sg.compose)(Object(b.b)((function(e){return{userId:OP(e),currentJobAllowances:e.currentJobUsageAndActuals.labourAllowances}})))(oue),cue="ModalReimbursementForm",sue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={fileLoading:!1,file:void 0},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.onSubmit,o=r.onClose,t.prev=1,t.next=4,a(n);case 4:o(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(1);case 9:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e){return t.apply(this,arguments)}}(),e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.file,!(n.target.files.length>0)){t.next=21;break}if(e.setState({fileLoading:!0}),!((a=r)&&a.id>0)){t.next=15;break}return(o=new FormData).append("file",n.target.files[0]),t.next=9,Fw.updateDocument(a.id,o);case 9:i=t.sent,c=i.data,e.setState({file:c,fileLoading:!1}),e.props.change("document_id",c.id),t.next=21;break;case 15:return t.next=17,Fw.postDocument(n.target.files[0]);case 17:s=t.sent,l=s.data,e.setState({file:l,fileLoading:!1}),e.props.change("document_id",l.id);case 21:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadUsers=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,zE.searchUsers({name:t});case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedUserLoad=Qv()(e.loadUsers,1e3),e.getRecipientOptionLabel=function(e){return mm(e).name},e.getRecipientOptionValue=function(e){return e.id},e.renderBody=function(){var t=e.props,n=t.handleSubmit,r=t.totalAmount,o=t.isEdit,i=e.state,c=i.file,s=i.fileLoading;return Object(a.jsxs)("form",{id:cue,onSubmit:n(e.onSubmit),autoComplete:"off",children:[Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"user",label:"Recipient",component:NO,loadOptions:e.debouncedUserLoad,getOptionLabel:e.getRecipientOptionLabel,getOptionValue:e.getRecipientOptionValue,validate:Dv,isClearable:!0,placeholder:"Start typing to search...",disabled:o})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"date_of_expense",label:"Date of Expense",component:s_,validate:Dv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"total_amount",label:"Total Amount: ".concat(vm(r||0)),component:yg,type:"number",validate:Dv})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"description",label:"Description",component:gq,validate:Dv})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(Hv.a,{name:"is_chargeable",label:"Chargeable",component:rI,direction:FA.horizontal})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)("div",{className:"col-auto",children:[s&&Object(a.jsx)(Nv,{size:16,color:_.white}),c?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(hC,{onClick:function(){return e.viewAttachmentRender(c.id)},fontSize:sm.smaller,color:_.blue4,style:{cursor:"pointer"},children:c.file_name}),Object(a.jsx)(dC,{noDecoration:!0,onClick:e.onUploadLinkClick,children:"Update file"})]}):Object(a.jsx)(dC,{noDecoration:!0,onClick:e.onUploadLinkClick,children:"Add file"})]})}),Object(a.jsx)("input",{type:"file",accept:uJ,multiple:!0,hidden:!0,onChange:e.onFileInputChange,ref:e.inputRef})]})},e.renderFooter=function(){var t=e.props,n=t.invalid;t.docId;return Object(a.jsx)(Xg,{className:"btn",type:"submit",disabled:n,form:cue,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n,r,a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props,n=t.docId,r=t.initialValues,!((a=n||r.document_id||0)&&a>0)){e.next=9;break}return this.setState({fileLoading:!0}),e.next=6,Fw.getDocumentInfo(a);case 6:o=e.sent,i=o.data,this.setState({fileLoading:!1,file:i});case 9:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"viewAttachmentRender",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=this;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!t){e.next=6;break}return this.setState({fileLoading:!0}),e.next=4,Fw.getDocumentInfo(t);case 4:n=e.sent,Fw.downloadDocument(t,n.data?n.data.file_name:"attachment").then((function(){r.setState({fileLoading:!1})}));case 6:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:o,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),lue=Object(sg.compose)(Object(jv.a)({form:cue}),Object(ug.a)({totalAmount:"total_amount",docId:"document_id"}))(sue),uue=function(e){return Object(c.a)(Object(c.a)({},e),{},{user_id:e.user.id,date_of_expense:e.date_of_expense.format(av),is_chargeable:!!e.is_chargeable&&e.is_chargeable})},due=function(e){return Object(c.a)(Object(c.a)({},e),{},{date_of_expense:pm()(e.date_of_expense)})};function pue(){var e=Object(f.a)(["\n  cursor: pointer;\n  color: ",";\n  font-size: ",";\n"]);return pue=function(){return e},e}var hue=y.default.div(pue(),_.blue4,sm.smaller),bue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showReimbursementModal:!1,item:void 0,allSelected:!1,hideMultiselect:!0,selectedReimbursementIds:[]},e.showReimbursementModal=function(){return e.setState({showReimbursementModal:!0})},e.hideReimbursementModal=function(){e.setState({showReimbursementModal:!1}),e.props.hideAddReimbursement()},e.selectAll=function(){var t=e.props.currentJobReimbursements;e.setState({allSelected:!e.state.allSelected},(function(){e.state.allSelected&&t.data&&t.data.data.length>0?e.setState({selectedReimbursementIds:t.data.data.map((function(e){return e.id}))}):e.setState({selectedReimbursementIds:[]})}))},e.toggleSelection=function(t){var n=e.props.currentJobReimbursements.data,r=Object(aj.a)(e.state.selectedReimbursementIds);r.includes(t)?(r=r.filter((function(e){return e!==t})),e.setState({selectedReimbursementIds:r,allSelected:r.length===(null===n||void 0===n?void 0:n.data.length)})):(r.push(t),e.setState({selectedReimbursementIds:Object(aj.a)(r),allSelected:r.length===(null===n||void 0===n?void 0:n.data.length)}))},e.ReimbursementIsSelected=function(t){var n=e.state.selectedReimbursementIds;return!!n&&n.includes(t)},e.toggleMultiselectView=function(){e.setState({hideMultiselect:!e.state.hideMultiselect})},e.multiSelectIcon=function(){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"view-multiselect",effect:"solid",place:"bottom"}),Object(a.jsx)(J_,{"data-tip":"Show/Hide multiselect column","data-for":"view-multiselect",className:"align-self-center",children:Object(a.jsx)(cm,{name:Xf.BulletList,size:20,onClick:e.toggleMultiselectView})})]})},e.reimbursementsColumns=function(){return[{id:"multiselectColumn",header:Object(a.jsx)(nI,{size:15,value:e.state.allSelected,onChange:e.selectAll}),width:"5%",type:Are.Text,hidden:e.state.hideMultiselect,cell:function(t){return Object(a.jsx)(nI,{size:15,value:e.ReimbursementIsSelected(+t.id),onChange:function(){return e.toggleSelection(+t.id)}})}},{id:"item",header:"Reimbursements",width:"7%",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:pm()(e.date_of_expense).format(iv)})}},{id:"user",width:"23%",header:"Recipient",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.user.full_name})}},{id:"description",width:"25%",header:"Description",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.description})}},{id:"amount",width:"12%",header:"File",type:Are.Text,cell:function(t){return t.document_id?Object(a.jsx)(hue,{onClick:function(){return e.viewAttachmentRender(t.document_id)},disabled:e.props.jobIsClosed,children:"View attachment"}):Object(a.jsx)(a.Fragment,{})}},{id:"total_amount",width:"10%",header:"Amount Ex GST",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:vm(e.total_amount)})}},{id:"status",header:"Status",width:"12%",type:Are.Text,cell:function(e){return ale(e.approved_at?pm()(e.approved_at):null,e)}},{id:"mark_as_used",header:"",width:"5%",type:Are.Text,cell:function(e){return ole(e.in_report_used_count||0)}},{id:"menu",header:e.multiSelectIcon(),width:"5%",type:Are.Numeric,cell:function(t){return Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:e.tableMenuItems(n,t,e.props.jobIsClosed),direction:"right"})}})}}]},e.tableMenuItems=function(t,n,r){var a=t.has(vx.JOBS_USAGE_REIMBURSEMENTS_MANAGE),o=t.has(vx.JOBS_USAGE_REIMBURSEMENTS_APPROVE),i=n.invoice_item_id&&n.invoice_item_id>0;return[{name:"View / Edit",disabled:!a||r||i,onClick:function(){return e.editTableItem(n)}},{name:"Approve",disabled:!!n.approved_at||!o||r||i,onClick:function(){return e.approveReimbursement(n)}},{name:0==n.in_report_used_count?"Mark as used":"Mark as unused",disabled:!n.approved_at||r||i,onClick:e.markAsUsed(n)},{type:"divider"},{name:"Delete",disabled:!a||r||i,onClick:function(){return e.deleteItem(n)}}]},e.markAsUsed=function(t){return function(){var n=1===t.in_report_used_count?0:1,r={modal:"job_reimbursement",id:t.id,in_report_used_count:n};e.postMarkasUsed(r,t.job_id)}},e.postMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadReimbursement(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e.approveReimbursement=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.dispatch,!n.id){t.next=14;break}return t.next=4,r(iw("Confirm","Approve Reimbursement for ".concat(n.user.full_name," at ").concat(pm()(n.date_of_expense).format(iv),"?")));case 4:if(!t.sent){t.next=13;break}return e.setState({loading:!0}),t.next=9,ZW.approveReimbursement(n);case 9:e.setState({loading:!1}),e.loadReimbursement(),t.next=14;break;case 13:return t.abrupt("return",Promise.resolve());case 14:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.addNewReimbursement,o=r.jobId,i=r.userId,s=r.updateLabourCounters,!a){t.next=7;break}return t.next=4,ZW.createReimbursement(Object(c.a)(Object(c.a)({},uue(n)),{},{job_id:o,creator_id:i}));case 4:s(),t.next=10;break;case 7:return l=uue(n),t.next=10,ZW.updateReimbursement(l);case 10:e.loadReimbursement();case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.multiReimbursementDelete=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedReimbursementIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Delete selected Reimbursement item(s)?","Are you sure you want to delete the selected item(s)? This action cannot be undone!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,oW.deleteBulkJobReimbursement(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedReimbursementIds:[],allSelected:!1}),e.loadReimbursement(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiReimbursementMarkAsUsed=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedReimbursementIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Mark selected Reimbursement item(s) as used?","Only approved selected item(s) will be marked as used!"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,oW.markAsUsedBulkJobReimbursement(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedReimbursementIds:[],allSelected:!1}),e.loadReimbursement(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiReimbursementApproved=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,a=n.jobId,!((o=e.state.selectedReimbursementIds).length>0)){t.next=24;break}return t.next=5,r(iw("Confirm","Approve selected Reimbursement item(s)?"));case 5:if(i=t.sent,t.prev=6,!i){t.next=15;break}return e.setState({loading:!0}),t.next=11,oW.approveBulkJobReimbursement(a,Object(aj.a)(o));case 11:e.setState({loading:!1,selectedReimbursementIds:[],allSelected:!1}),e.loadReimbursement(),t.next=16;break;case 15:return t.abrupt("return",Promise.resolve());case 16:t.next=21;break;case 18:return t.prev=18,t.t0=t.catch(6),t.abrupt("return",Promise.reject());case 21:return t.prev=21,e.setState({loading:!1}),t.finish(21);case 24:case"end":return t.stop()}}),t,null,[[6,18,21,24]])}))),e.multiActionIcons=function(){var t=e.state.selectedReimbursementIds;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as approved","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(jse,{name:Xf.Approved,onClick:e.multiReimbursementApproved})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Mark selected records as used","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.markAsReadGray,onClick:e.multiReimbursementMarkAsUsed})}),Object(a.jsx)(J_,{className:"align-self-center","data-tip":"Delete selected records","data-for":"delete-all-tooltip",color:_.gray4,disabled:0===t.length,children:Object(a.jsx)(cm,{name:Xf.Trash,onClick:e.multiReimbursementDelete})})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadReimbursement()}},{key:"editTableItem",value:function(e){this.setState({item:e}),this.showReimbursementModal()}},{key:"deleteItem",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props,r=n.jobId,a=n.dispatch,o=n.updateLabourCounters,!t.id){e.next=15;break}return e.next=4,a(iw("Confirm","Delete Reimbursement for ".concat(t.user.full_name," at ").concat(pm()(t.date_of_expense).format(iv),"?")));case 4:if(!e.sent){e.next=14;break}return this.setState({loading:!0}),e.next=9,ZW.deleteJobReimbursement(r,t.id);case 9:this.setState({loading:!1}),this.loadReimbursement(),o(),e.next=15;break;case 14:return e.abrupt("return",Promise.resolve());case 15:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"loadReimbursement",value:function(e){var t=this.props,n=t.jobId;(0,t.dispatch)(function(e,t){return Dk(cH.load,cH.loadComplete,cH.error,(function(){return ZW.getJobReimbursements(e,{page:t})}))}(n,e))}},{key:"viewAttachmentRender",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r=this;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,Fw.getDocumentInfo(t);case 3:n=e.sent,Fw.downloadDocument(t,n.data?n.data.file_name:"attachment").finally((function(){r.setState({loading:!1})}));case 5:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.currentJobReimbursements,n=e.addNewReimbursement,r=this.state,o=r.loading,i=r.showReimbursementModal,c=r.item,s=r.hideMultiselect,l=r.selectedReimbursementIds,u=t.data,d=u&&u.data?u.data:[],p=t.loading||o,h=i||n;return Object(a.jsxs)(a.Fragment,{children:[h&&Object(a.jsx)(lue,{isOpen:h,onClose:this.hideReimbursementModal,title:n?"Add Reimbursement":"Edit Reimbursement",initialValues:n?{}:due(c||{}),onSubmit:this.onSubmit,isEdit:!n}),p&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(vse,{hidden:s,icons:this.multiActionIcons(),selected:l.length}),Object(a.jsxs)(rse,{className:"table",children:[Object(a.jsx)(Qse,{dataSource:d,columnsDefinition:this.reimbursementsColumns(),useCustomStyle:!0}),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{colSpan:3,children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(d,"total_amount"))]})})]},"other-footer")]}),u&&u.pagination&&u.pagination.last_page>1&&Object(a.jsx)(oC,{pagination:u.pagination,onChange:this.loadReimbursement})]})}}]),n}(p.PureComponent),fue=Object(sg.compose)(Object(b.b)((function(e){return{userId:OP(e),currentJobReimbursements:e.currentJobUsageAndActuals.labourReimbursements}})))(bue);function mue(){var e=Object(f.a)(["\n  margin-bottom: 16px;\n"]);return mue=function(){return e},e}var jue=y.default.div(mue()),vue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hideRates:!0,hideMultiselect:!0,showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1},e.labourMainMenuItems=function(t,n){var r=t.has(vx.JOBS_USAGE_LABOUR_MANAGE),a=t.has(vx.JOBS_USAGE_ALLOWANCES_MANAGE),o=t.has(vx.JOBS_USAGE_REIMBURSEMENTS_MANAGE),i=t.has(vx.JOBS_USAGE_LAHA_MANAGE);return[{name:"Add Labour",disabled:!r||n,onClick:e.showAddLabourModal},{type:"divider"},{name:"Add Allowance",disabled:!a||n,onClick:e.showAddAllowanceModal},{name:"Add Reimbursement",disabled:!o||n,onClick:e.showAddReimbursementModal},{name:"Add LAHA",disabled:!i||n,onClick:e.showAddLahaModal}]},e.toggleRateView=function(){e.setState({hideRates:!e.state.hideRates})},e.toggleMultiselectView=function(){e.jobIsClosed()||e.setState({hideMultiselect:!e.state.hideMultiselect,hideRates:!!e.state.hideMultiselect||e.state.hideRates})},e.showAddAllowanceModal=function(){return e.setState({showAddAllowanceModal:!0})},e.hideAddAllowanceModal=function(){return e.setState({showAddAllowanceModal:!1})},e.showAddLabourModal=function(){return e.setState({showAddLabourModal:!0})},e.hideAddLabourModal=function(){return e.setState({showAddLabourModal:!1})},e.showAddReimbursementModal=function(){return e.setState({showAddReimbursementModal:!0})},e.hideAddReimbursementModal=function(){return e.setState({showAddReimbursementModal:!1})},e.showAddLahaModal=function(){return e.setState({showAddLahaModal:!0})},e.hideAddLahaModal=function(){return e.setState({showAddLahaModal:!1})},e.jobIsClosed=function(){var t=e.props.job;return t.data&&t.data.latest_status.status===zj.Closed||!t.data},e.updateLabourCounters=function(){var t=e.props,n=t.dispatch,r=t.match.params.id;n(gH(parseInt(r)))},e}return Object(l.a)(n,[{key:"componentWillMount",value:function(){this.updateLabourCounters()}},{key:"mainButtonRender",value:function(){return Object(a.jsxs)(Xg,{className:"btn",style:{marginLeft:"10px"},children:["Add ",Object(a.jsx)(z7,{style:{marginLeft:"10px"},size:16,color:_.white,name:Xf.ArrowDown})]})}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=(t.job,t.match.params.id),r=this.jobIsClosed();return Object(a.jsx)(Cx.Consumer,{children:function(t){var o=t.has(vx.JOBS_USAGE_VIEW),i=t.has(vx.JOBS_USAGE_EQUIPMENT_CREATE);return o?Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"view-rates-tooltip",effect:"solid",place:"bottom"}),Object(a.jsx)(J_,{"data-tip":"Show/Hide rate columns","data-for":"view-rates-tooltip",className:"align-self-center",children:Object(a.jsx)(cm,{name:Xf.View,size:30,onClick:e.toggleRateView})}),Object(a.jsx)($ce,{jobId:parseInt(n)}),i&&Object(a.jsx)(nw,{direction:"right",items:e.labourMainMenuItems(t,r),trigger:e.mainButtonRender})]}):null}})}},{key:"renderContentPage",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=this.state,i=o.hideRates,c=(o.hideMultiselect,o.showAddLabourModal),s=o.showAddAllowanceModal,l=o.showAddReimbursementModal,u=o.showAddLahaModal,d=this.jobIsClosed();return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(JC,{className:"d-flex flex-column align-items-start",style:{minHeight:"95%"},children:[n.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(n.data.id),children:"Usage And Actuals"}),n.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(n.data.id,"/labour"),children:"Time"}),Object(a.jsx)("div",{className:"mb-auto w-100",children:Object(a.jsx)($le,{jobId:parseInt(r),jobIsClosed:d,hideRates:i,addNewLabour:c,hideAddLabour:e.hideAddLabourModal,updateLabourCounters:e.updateLabourCounters,userContext:t})}),Object(a.jsx)(jue,{className:"w-100",children:Object(a.jsx)(iue,{jobId:parseInt(r),jobIsClosed:d,addNewAllowance:s,hideAddAllowance:e.hideAddAllowanceModal,updateLabourCounters:e.updateLabourCounters})}),Object(a.jsx)(jue,{className:"w-100",children:Object(a.jsx)(fue,{jobId:parseInt(r),jobIsClosed:d,addNewReimbursement:l,hideAddReimbursement:e.hideAddReimbursementModal,updateLabourCounters:e.updateLabourCounters})}),Object(a.jsx)(jue,{className:"w-100",children:Object(a.jsx)(cle,{jobId:parseInt(r),jobIsClosed:d,addNewLaha:u,hideAddLaha:e.hideAddLahaModal,updateLabourCounters:e.updateLabourCounters})})]})}})}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})})}}]),n}(p.Component),Oue=Object(sg.compose)(O.g,Object(b.b)((function(e){return{userId:OP(e),job:e.currentJob}})))(vue);function gue(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n"]);return gue=function(){return e},e}var xue=Object(y.default)(rN)(gue(),sm.normal),yue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,showLabourModal:!1,item:void 0,allSelected:!1,isMultiEdit:!1,itemSelected:e.props.details},e.labourColumns=function(){return[{id:"multiselectColumn",header:Object(a.jsx)(Fre,{children:e.props.tableType}),width:"15%",type:Are.Text,hidden:!1,cell:function(t){switch(e.props.tableId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:default:return Object(a.jsx)(nI,{size:15,value:0!==t.in_report_used_count,onChange:function(){return e.toggleSelection(t)}})}}},{id:"item",width:"15%",type:Are.Text,cell:function(t){switch(e.props.tableId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:default:return Object(a.jsx)("span",{children:pm()(t.column1).utcOffset(0).format(iv)})}}},{id:"worker",width:"20%",type:Are.Text,cell:function(t){switch(e.props.tableId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:default:return Object(a.jsx)("span",{children:t.column2})}}},{id:"labour_type_name",type:Are.Text,cell:function(t){switch(e.props.tableId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:default:return Object(a.jsx)("span",{children:t.column3})}}},{id:"total_hrs",header:"Labour"===e.props.tableType?"Total Hrs":"",width:"20%",type:Are.Numeric,cell:function(t){switch(e.props.tableId){case 0:return Object(a.jsx)(Fre,{children:t.column4});case 1:return Object(a.jsx)(xue,{tag:{name:t.column4,color:_.yellow}});case 2:case 3:return Object(a.jsx)("span",{});case 4:return Object(a.jsx)(xue,{tag:{name:t.column4,color:_.yellow}});case 5:return Object(a.jsx)(Fre,{children:t.column4});case 6:case 7:return Object(a.jsx)("span",{});default:return Object(a.jsx)(Fre,{children:t.column4})}}},{id:"total_amount",header:"Labour"===e.props.tableType?"Total Cost":"",width:"15%",type:Are.Numeric,cell:function(t){switch(e.props.tableId){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:default:return Object(a.jsx)(Fre,{children:vm(t.column5)})}}}]},e.toggleSelection=function(t){var n=Object(aj.a)(e.state.itemSelected);n.map((function(e){e.id===t.id&&(0===e.in_report_used_count?e.in_report_used_count=1:e.in_report_used_count=0)})),e.setState({itemSelected:n}),e.props.dispatch(wH(t));var r={data:n,type:e.props.tableType};e.props.dispatch(G4(r))},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(rse,{className:"table",children:Object(a.jsx)(Qse,{dataSource:this.state.itemSelected,columnsDefinition:this.labourColumns(),useCustomStyle:!0})})})}}]),n}(p.PureComponent),_ue=Object(b.b)((function(e){return{selectedLabourIds:e.currentJobUsageAndActuals.selectedLabourIds}}))(yue);function wue(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  font-weight: lighter;\n  border-color: ",";\n  box-shadow: 0 0 0 !important;\n\n  &:hover,\n  &:active {\n    background: "," !important;\n    border-color: "," !important;\n  }\n\n  &:disabled {\n    opacity: 0.3;\n    background: ",";\n    color: ",";\n    border-color: ",";\n  }\n"]);return wue=function(){return e},e}var Sue=y.default.button(wue(),_.white,_.blue2,_.blue2,_.blue0,_.blue3,_.white,_.blue2,_.blue2);function kue(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  width: ","px;\n  position: relative;\n"]);return kue=function(){return e},e}function Cue(){var e=Object(f.a)(["\n  background: ",";\n  overflow-y: auto;\n  width: ","px;\n  position: relative;\n"]);return Cue=function(){return e},e}function Nue(){var e=Object(f.a)(["\n  margin: 5px 0 30px 0;\n  font-weight: 400;\n"]);return Nue=function(){return e},e}function Eue(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return Eue=function(){return e},e}function Aue(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return Aue=function(){return e},e}var Iue=y.default.div(Aue()),Tue=y.default.div(Eue()),Rue=y.default.h2(Nue()),Due=y.default.nav(Cue(),_.white,320),Mue=y.default.nav(kue(),_.white,240),Lue={},Pue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1,tableData:[],isLoading:!1},e.getNewImports=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,e.setState({isLoading:!0}),t.prev=2,t.next=5,ZW.getAllImportModal(parseInt(n),"new");case 5:r=t.sent,a=Object(aj.a)(e.state.tableData),r&&(r.length>0&&r.map((function(e,t){switch(e.modal){case"job_labour":a.push({id:0,value:"Labour",data:e.data});break;case"job_equipment":a.push({id:1,value:"Equipment",data:e.data});break;case"job_material":a.push({id:2,value:"Materials",data:e.data});break;case"job_purchaseOrder":a.push({id:3,value:"Purchase Orders",data:e.data});break;case"job_storage":a.push({id:4,value:"Storage",data:e.data});break;case"job_allowance":a.push({id:5,value:"Allowances",data:e.data});break;case"job_reimbursement":a.push({id:6,value:"Reimbursements",data:e.data});break;case"job_laha_compensation":a.push({id:7,value:"LAHA",data:e.data})}})),e.setState({tableData:a,isLoading:!1})),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(2),Oj(uj.Danger,"This status can't be applied"),e.setState({isLoading:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))),e.labourMainMenuItems=function(t){var n=e.props.job,r=n.data&&n.data.latest_status.status===zj.Closed||!n.data;return[{name:"Individual line items",onClick:function(){return e.individualItems("individual")}},{type:"divider"},{name:"Combine into sections",disabled:!t.has(vx.ASSESSMENT_REPORTS_MANAGE)||r,onClick:function(){return e.individualItems("combine")}}]},e.individualItems=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.tableData,a=[],r.map((function(e){e.data.map((function(t){if(1===t.in_report_used_count)switch(e.value){case"Labour":a.push({modal:"job_labour",ids:t.id});break;case"Equipment":a.push({modal:"job_equipment",ids:t.id});break;case"Materials":a.push({modal:"job_material",ids:t.id});break;case"Purchase Orders":a.push({modal:"job_purchaseOrder",ids:t.id});break;case"Storage":a.push({modal:"job_storage",ids:t.id});break;case"Allowances":a.push({modal:"job_allowance",ids:t.id});break;case"Reimbursements":a.push({modal:"job_reimbursement",ids:t.id});break;case"LAHA":a.push({modal:"job_laha_compensation",ids:t.id})}}))})),o=[{modal:"job_labour",ids:""},{modal:"job_equipment",ids:""},{modal:"job_material",ids:""},{modal:"job_purchaseOrder",ids:""},{modal:"job_storage",ids:""},{modal:"job_allowance",ids:""},{modal:"job_reimbursement",ids:""},{modal:"job_laha_compensation",ids:""}],a.map((function(e){o.map((function(t){if(e.modal===t.modal)if(0===t.ids.length)t.ids=e.ids;else{var n=[];n.push(e.ids),n.push(2),t.ids=n.join(",")}}))})),i=e.props.match.params.id,t.prev=6,c={date:new Date,savetype:n,value:o},t.next=10,ZW.newReportCreate(parseInt(i),c);case 10:s=t.sent,e.props.history.push("/usage-and-actuals/".concat(i,"/buildCosting/").concat(s.id)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),Oj(uj.Danger,"This status can't be applied");case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBuildCosting=function(){var t=e.props.match.params.id;e.props.history.push("/usage-and-actuals/".concat(t,"/buildCosting"))},e.renderBuildDocument=function(){var t=e.props.match.params.id;e.props.history.push("/usage-and-actuals/".concat(t,"/buildDocument"))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.match.params.id;zy.findById(e).then((function(e){Lue=e})),this.getNewImports()}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.selectedItems.data.selectedItems.data!==this.props.selectedItems.data.selectedItems.data){var n=Object(aj.a)(this.state.tableData);n.map((function(e,n){e.value===t.props.selectedItems.data.selectedItems.type&&(e.data=t.props.selectedItems.data.selectedItems.data)})),this.setState({tableData:n})}}},{key:"mainButtonRender",value:function(){return Object(a.jsxs)(Xg,{className:"btn",style:{marginLeft:"10px"},children:["Create"," ",Object(a.jsx)(z7,{style:{marginLeft:"10px"},size:16,color:_.white,name:Xf.ArrowDown})]})}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props.match.params.id;return Object(a.jsx)(Cx.Consumer,{children:function(n){var r=n.has(vx.JOBS_USAGE_VIEW),o=n.has(vx.ASSESSMENT_REPORTS_MANAGE);return r?Object(a.jsx)("div",{children:Object(a.jsxs)(Tue,{children:[Object(a.jsx)(v.b,{to:"/usage-and-actuals/".concat(t,"/summary"),children:Object(a.jsx)(Sue,{className:"btn",children:"Cancle"})}),o&&Object(a.jsx)(nw,{direction:"right",items:e.labourMainMenuItems(n),trigger:e.mainButtonRender})]})}):null}})}},{key:"getMenuItems",value:function(){return[]}},{key:"render",value:function(){var e=this.props.customHeaderTitle,t=Lue,n=t?zy.getJobAddress(t):"",r=t&&zy.getJobName(t);r&&(n+=" | ".concat(r));var o=this.props.match.params.id;return Object(a.jsxs)(Iue,{className:"d-flex flex-column",children:[this.state.isLoading&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(DG,{customHeaderTitle:e,siteAddress:n,additionalHeaderLayout:this.renderAdditionalHeaderLayout()}),Object(a.jsxs)("div",{className:"d-flex h-100",children:[Object(a.jsx)(Due,{}),Object(a.jsx)(UC,{className:"h-100 w-100",children:Object(a.jsxs)(JC,{className:"d-flex flex-row",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(Rue,{children:"Import Existing Actuals"}),Object(a.jsx)("div",{className:"mb-auto w-100",children:0!==this.state.tableData.length&&this.state.tableData.map((function(e,t){return Object(a.jsx)(_ue,{jobId:parseInt(o),jobIsClosed:!1,tableType:e.value,tableId:e.id,details:e.data},t)}))})]}),Object(a.jsx)(Mue,{})]})})]})]})}}]),n}(p.PureComponent),Fue=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,selectedItems:e.document}})))(Pue);function Uue(){var e=Object(f.a)(["\n  font-size: ",";\n  display: ",";\n"]);return Uue=function(){return e},e}function Bue(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n"]);return Bue=function(){return e},e}function Vue(){var e=Object(f.a)(["\n  float: right;\n  cursor: pointer;\n  margin-top: -3px;\n  margin-right: -8px;\n"]);return Vue=function(){return e},e}function Jue(){var e=Object(f.a)(["\n  width: 280px;\n  border-width: 1px;\n  border-style: solid;\n  border-radius: 4px;\n  border-color: ",";\n  background: ",";\n  margin: 10px auto;\n  padding: 12px;\n  padding-right: 20px;\n  position: relative;\n  overflow: ",";\n  position: relative;\n"]);return Jue=function(){return e},e}var que=Object(y.default)(gv(["collapsed","overflow"])("div"))(Jue(),(function(e){return e.collapsed?"transparent":_.gray2}),(function(e){return e.collapsed?"transparent":_.white}),(function(e){return e.overflow?e.overflow:"hidden"})),zue=y.default.div(Vue()),Gue=y.default.div(Bue(),lm.bold),Wue=Object(y.default)(gv(["collapsed"])("div"))(Uue(),sm.smaller,(function(e){return e.collapsed?"none":"block"})),Hue=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).state=void 0,r.toggleCollapsed=function(){r.setState({collapsed:!r.state.collapsed})},r.state={collapsed:e.defaultCollapsed||!1,overflow:e.overflow||"hidden"},r}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.loading,t=this.state,r=t.collapsed,o=t.overflow;return Object(a.jsxs)(que,{collapsed:r,overflow:o,children:[e&&Object(a.jsx)(Nv,{size:30,color:r?_.gray1:_.white}),this.props.collapsable&&Object(a.jsx)(zue,{onClick:this.toggleCollapsed,children:Object(a.jsx)(cm,{name:this.collapseIconName,size:n.iconSize})}),this.props.hasMenu&&Object(a.jsx)(zue,{children:Object(a.jsx)(cm,{name:Xf.MenuVertical,size:n.iconSize})}),Object(a.jsx)(Gue,{children:this.props.caption}),Object(a.jsx)(Wue,{collapsed:this.state.collapsed,children:this.props.children})]})}},{key:"collapseIconName",get:function(){return this.state.collapsed?Xf.ArrowDown:Xf.ArrowUp}}]),n}(p.PureComponent);Hue.iconSize=16;var Yue,Que=Hue;function Kue(){var e=Object(f.a)(["\n  line-height: 1.5;\n  font-weight: ",";\n"]);return Kue=function(){return e},e}function Zue(){var e=Object(f.a)(["\n  .financiels-reference-value {\n    margin-right: 10px;\n  }\n"]);return Zue=function(){return e},e}function Xue(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 10px;\n"]);return Xue=function(){return e},e}function $ue(){var e=Object(f.a)(["\n  display: flex;\n  .financiels-reference-label {\n    flex-basis: 60%;\n  }\n"]);return $ue=function(){return e},e}var ede,tde=y.default.div($ue()),nde=y.default.div(Xue()),rde=y.default.div(Zue()),ade=Object(y.default)(tde)(Kue(),lm.bold);!function(e){e.room="room",e.Total="Total",e.Affected="Affected",e.Type="Type"}(ede||(ede={}));var ode=function(e,t){return(e||0)*(t||0)},ide=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={areasData:[]},e.topValues=[ede.Total,ede.Affected,ede.Type],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.financials,n=Object(aj.a)(this.state.areasData);t.length>0&&(null===(e=t.filter((function(e){return!1===e.control})))||void 0===e||e.map((function(e){var t;n.push({label:e.name,value:"",total:ode(e.dimensions_length,e.dimensions_width),affected:ode(e.dimensions_affected_length,e.dimensions_affected_width),Type:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.name})})),this.setState({areasData:n}))}},{key:"componentDidUpdate",value:function(e){if(e.financials!==this.props.financials){var t,n=this.props.financials,r=Object(aj.a)(this.state.areasData);if(n.length>0)null===(t=n.filter((function(e){return!1===e.control})))||void 0===t||t.map((function(e){var t;r.push({label:e.name,value:"",total:ode(e.dimensions_length,e.dimensions_width),affected:ode(e.dimensions_affected_length,e.dimensions_affected_width),Type:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.name})})),this.setState({areasData:r})}}},{key:"renderLabelAndValue",value:function(e,t){var r=n.fields[e],o=r.label,i=r.key,c=r.percents;"room"===i&&(o=t.label);var s="";return"Total"===i?s="".concat(t.total," sqm"):"Affected"===i?s="".concat(t.affected," sqm"):"Type"===i&&(s=t.Type),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",children:o}),s&&Object(a.jsx)(rde,{children:this.formatValue(s,c)})]})}},{key:"formatValue",value:function(e,t){return t?"".concat(e):""}},{key:"renderRows",value:function(e,t){var n=this;return e.map((function(e){return Object(a.jsx)(tde,{children:n.renderLabelAndValue(e,t)},"fnc-".concat(e))}))}},{key:"render",value:function(){var e=this;return Object(a.jsx)(Que,{caption:"Areas",collapsable:!0,defaultCollapsed:!0,overflow:"auto",children:this.state.areasData.length>0&&this.state.areasData.map((function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)(ade,{children:e.renderLabelAndValue(ede.room,t)}),e.renderRows(e.topValues,t),Object(a.jsx)(nde,{})]},n)}))})}}]),n}(p.PureComponent);ide.fields=(Yue={},Object(k.a)(Yue,ede.room,{label:"",key:"room",percents:!0}),Object(k.a)(Yue,ede.Total,{label:"Total:",key:"Total",percents:!0}),Object(k.a)(Yue,ede.Affected,{label:"Affected:",key:"Affected",percents:!0}),Object(k.a)(Yue,ede.Type,{label:"Type:",key:"Type",percents:!0}),Yue);var cde,sde=ide;function lde(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 15px 0 10px;\n  height: 1px;\n  border-top: 1px solid ",";\n"]);return lde=function(){return e},e}function ude(){var e=Object(f.a)(["\n  line-height: 1.5;\n  font-weight: ",";\n"]);return ude=function(){return e},e}function dde(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 10px;\n"]);return dde=function(){return e},e}function pde(){var e=Object(f.a)(["\n  display: flex;\n  .financiels-reference-label {\n    width: 90px;\n    min-width: 90px;\n  }\n"]);return pde=function(){return e},e}var hde,bde=y.default.div(pde()),fde=y.default.div(dde()),mde=Object(y.default)(bde)(ude(),lm.bold),jde=y.default.div(lde(),_.gray2);!function(e){e.room="room",e.Total="Total",e.Affected="Affected",e.Type="Type"}(hde||(hde={}));var vde=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={areasData:[],totalData:{total:0,affectedTotal:0}},e.topValues=[hde.Total,hde.Affected],e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.financials,n=Object(aj.a)(this.state.areasData),r={total:0,affectedTotal:0};t.length>0&&(null===(e=t.filter((function(e){return!1===e.control})))||void 0===e||e.map((function(e){var t,a;r.total=r.total+ode(e.dimensions_length,e.dimensions_width),r.affectedTotal=r.affectedTotal+ode(e.dimensions_affected_length,e.dimensions_affected_width),n.push({label:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.name,value:"",total:ode(e.dimensions_length,e.dimensions_width),affected:ode(e.dimensions_affected_length,e.dimensions_affected_width),Type:null===e||void 0===e||null===(a=e.flooring_type)||void 0===a?void 0:a.name})})),this.setState({areasData:n,totalData:r}))}},{key:"componentDidUpdate",value:function(e){if(e.financials!==this.props.financials){var t,n=this.props.financials,r=Object(aj.a)(this.state.areasData),a={total:0,affectedTotal:0};if(n.length>0)null===(t=n.filter((function(e){return!1===e.control})))||void 0===t||t.map((function(e){var t,n;a.total=a.total+ode(e.dimensions_length,e.dimensions_width),a.affectedTotal=a.affectedTotal+ode(e.dimensions_affected_length,e.dimensions_affected_width),r.push({label:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.name,value:"",total:ode(e.dimensions_length,e.dimensions_width),affected:ode(e.dimensions_affected_length,e.dimensions_affected_width),Type:null===e||void 0===e||null===(n=e.flooring_type)||void 0===n?void 0:n.name})})),this.setState({areasData:r,totalData:a})}}},{key:"renderLabelAndValue",value:function(e,t){var r=n.fields[e],o=r.label,i=r.key,c=r.percents;"room"===i&&(o=t.label);var s="",l="";return"Total"===i?(s="".concat(t.total," sqm"),l=""):"Affected"===i&&(s="".concat(t.affected," sqm"),l=t.affectedTwo),Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",style:"total"===t.label?{fontWeight:700}:{},children:o}),s&&Object(a.jsx)("div",{className:"financiels-reference-value",style:"total"===t.label?{width:"90px",fontWeight:700}:{width:"90px"},children:this.formatValue(s,c)}),l&&Object(a.jsx)("div",{className:"financiels-reference-value",style:"total"===t.label?{width:"90px",fontWeight:700}:{width:"90px"},children:this.formatValue(l,c)})]})}},{key:"formatValue",value:function(e,t){return t?"".concat(e):""}},{key:"renderRows",value:function(e,t){var n=this;return e.map((function(e){return Object(a.jsx)(bde,{children:n.renderLabelAndValue(e,t)},"fnc-".concat(e))}))}},{key:"render",value:function(){var e=this,t=this.state.totalData;return Object(a.jsxs)(Que,{caption:"Area Summary",collapsable:!0,defaultCollapsed:!0,overflow:"auto",children:[this.state.areasData.length>0&&this.state.areasData.map((function(t,n){return Object(a.jsxs)("div",{children:[Object(a.jsx)(mde,{children:e.renderLabelAndValue(hde.room,t)}),e.renderRows(e.topValues,t),Object(a.jsx)(fde,{})]},n)})),Object(a.jsx)(jde,{}),this.state.totalData&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(bde,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",style:{fontWeight:700},children:"Total:"}),Object(a.jsxs)("div",{className:"financiels-reference-value",style:{width:"90px",fontWeight:700},children:[this.formatValue(t.total,!0)," sqm"]})]},"fnc-total"),Object(a.jsxs)(bde,{children:[Object(a.jsx)("div",{className:"financiels-reference-label",style:{fontWeight:700},children:"Affected:"}),Object(a.jsxs)("div",{className:"financiels-reference-value",style:{width:"90px",fontWeight:700},children:[this.formatValue(t.affectedTotal,!0)," sqm"]}),Object(a.jsx)("div",{className:"financiels-reference-value",style:{width:"90px"},children:this.formatValue("4 sqm NR",!0)})]},"fnc-total")]})]})}}]),n}(p.PureComponent);vde.fields=(cde={},Object(k.a)(cde,hde.room,{label:"",key:"room",percents:!0}),Object(k.a)(cde,hde.Total,{label:"Total:",key:"Total",percents:!0}),Object(k.a)(cde,hde.Affected,{label:"Affected:",key:"Affected",percents:!0}),Object(k.a)(cde,hde.Type,{label:"Type:",key:"Type",percents:!0}),cde);var Ode=vde;function gde(){var e=Object(f.a)(["\n  :hover {\n    background-color: ",";\n  }\n"]);return gde=function(){return e},e}var xde=y.default.tr(gde(),_.gray1),yde=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={itemSelected:e.props.dataSource,stageState:{}},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(t,n,r){for(var a,o,i,s=(null===(a=e.props.stages.data.costStagesListRes)||void 0===a||null===(o=a.find((function(e){return e.id===r})))||void 0===o||null===(i=o.cost_items)||void 0===i?void 0:i.filter((function(e){return e.assessment_report_costing_stage_id===r})))||[],l=-1,u=-1,d=0;d<s.length;d++)"cost_".concat(s[d].id)===t.id&&(l=d),"cost_".concat(s[d].id)===n.id&&(u=d);if(-1!=l&&-1!=u){var p=s[l],h=(p.fromId,Object(rj.a)(p,["fromId"])),b=s[u],f=(b.toId,Object(rj.a)(b,["toId"]));s[l]=Object(c.a)({id:t.id},f),s[u]=Object(c.a)({id:n.id},h),e.props.updatedData(s)}},e.costItemPositionAndStageChange=function(t,n){var r,a,o,i,c=e.props,s=c.stages,l=c.reportId,u=c.dispatch,d=(null===(r=s.data.costStagesListRes)||void 0===r||null===(a=r.find((function(e){return e.id===t.assessment_report_costing_stage_id})))||void 0===a?void 0:a.cost_items)||[],p=(null===(o=s.data.costStagesListRes)||void 0===o||null===(i=o.find((function(e){return e.id===n.assessment_report_costing_stage_id})))||void 0===i?void 0:i.cost_items)||[],h=null===d||void 0===d?void 0:d.find((function(e){return"cost_".concat(e.id)===t.id})),b=null===p||void 0===p?void 0:p.find((function(e){return"cost_".concat(e.id)===n.id}));h&&b?(h.position=p.indexOf(b),h.assessment_report_costing_stage_id=n.assessment_report_costing_stage_id):h&&!b&&(h.position=0,h.assessment_report_costing_stage_id=n.assessment_report_costing_stage_id),h&&ZW.costItemListUpdate(parseInt(l),h.id,h).then((function(t){u(J4(parseInt(l))).then((function(){e.props.dispatch(Y4())}))}))},e.constItemsStageMarkupApply=function(t,n){var r=e.props,a=r.stages,o=r.reportId,i=r.dispatch;console.log("markup",n);if(/^\d*[.]?\d*$/.test(n)){if(n&&n>=0){var c,s,l=(null===(c=a.data.costStagesListRes)||void 0===c||null===(s=c.find((function(e){return e.id===t})))||void 0===s?void 0:s.cost_items)||[],u=[];null===l||void 0===l||l.map((function(e){String(e.id).startsWith("build_cost_item_")||u.push({markup:n,assessment_report_cost_item_id:e.id})})),u.length>0&&XG.costItemsApplyMarkups(o,u).then((function(t){i(J4(o)).then((function(){e.props.dispatch(Y4())}))}))}}else Oj(uj.Danger,"Markup value must be positive number")},e.onDrop=function(t,n,r){t.preventDefault();var a=JSON.parse(t.dataTransfer.getData("dragContent")),o={id:n};return a.assessment_report_costing_stage_id===r?e.swapBoxes({id:a.id},o,r):e.costItemPositionAndStageChange(a,{id:n,assessment_report_costing_stage_id:r}),!1},e.onStageNameBlur=function(t,n){var r=e.props,a=r.reportId,o=r.dispatch;e.setState({stageState:Object(k.a)({},"stage-".concat(t.id),!1)}),t.name=n.target.value||t.name,XG.updateStage(a,t.id,t).then((function(t){o(J4(parseInt(a))).then((function(){e.props.dispatch(Y4())}))}))},e.onDragStartStage=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragStageContent",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.onDragOverStage=function(e,t){return e.preventDefault(),!1},e.swapBoxesStage=function(t,n){for(var r=e.props.stages.data.costStagesListRes||[],a=-1,o=-1,i=0;i<r.length;i++)"cost_stage_".concat(r[i].id)===t.id&&(a=i),"cost_stage_".concat(r[i].id)===n.id&&(o=i);if(-1!==a&&-1!==o){var s=r[a],l=(s.fromId,Object(rj.a)(s,["fromId"])),u=r[o],d=(u.toId,Object(rj.a)(u,["toId"]));r[a]=Object(c.a)({id:t.id},d),r[o]=Object(c.a)({id:n.id},l),e.updateStagePosition(r)}},e.updateStagePosition=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.reportId,o=r.dispatch,i=[],n.length>0&&n.map((function(e,t){i.push({assessment_report_cost_stage_id:e.id,position:t+1})})),!(i.length>0)){t.next=13;break}return t.prev=4,t.next=7,XG.positionUpdateStage(a,i);case 7:o(J4(parseInt(a))).then((function(){e.props.dispatch(Y4())})),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.onDropStage=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragStageContent")),a={id:n};return e.swapBoxesStage(r,a),!1},e.onClickStageDelete=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.dispatch,i=a.reportId,c=a.stages,s=(null===(r=c.data.costStagesListRes)||void 0===r?void 0:r.length)||0,t.next=4,o(iw("Confirm","Are you sure you want to delete the stage ".concat(n.name,"? This action cannot be undone!")));case 4:if(!t.sent){t.next=10;break}if(!(s<2)){t.next=9;break}return Oj(uj.Danger,"The last stage can not be deleted"),t.abrupt("return");case 9:XG.deleteStage(i,n.id).then((function(t){o(J4(parseInt(i))).then((function(){e.props.dispatch(Y4())}))}));case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.stageMenuItems=function(t,n,r){var a=e.props,o=a.showModal,i=a.onCreate,c=a.reportId,s=a.isEditable;return[{name:"Add item",disabled:!s,onClick:function(){return i(n.id,c)}},{name:"Add Labour",disabled:!s,onClick:function(){return o(n.id,"labour")}},{name:"Add Equipment",disabled:!s,onClick:function(){return o(n.id,"equipment")}},{name:"Add Materials",disabled:!s,onClick:function(){return o(n.id,"materials")}},{type:"divider"},{name:"Delete",disabled:!s,onClick:function(){return e.onClickStageDelete(n)}}]},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){}},{key:"renderBodyRows",value:function(e){var t=this,n=this.props,r=n.columnsDefinition;n.isEditable;return e.map((function(e){return Object(a.jsx)(xde,{id:"cost_".concat(e.id),children:r.map((function(n){return Object(a.jsx)(O9,{width:n.width,hidden:n.hidden,align:n.type,onDragOver:function(n){return t.onDragOver(n,"cost_".concat(e.id))},onDrop:function(n){return t.onDrop(n,"cost_".concat(e.id),e.assessment_report_costing_stage_id)},children:n.cell(e,!!e.cost_item_mapping_data)},n.id)}))},e.id)}))}},{key:"renderNodata",value:function(e){var t=this,n=this.props.columnsDefinition;return Object(a.jsx)("tr",{id:"cost_".concat(0),onDragOver:function(e){return t.onDragOver(e,"cost_".concat(0))},onDrop:function(n){return t.onDrop(n,"cost_".concat(0),e.id)},children:Object(a.jsx)("td",{className:"no-items",colSpan:n.length,children:"No items found"})},"stage_".concat(e.id,"_key"))}},{key:"renderStage",value:function(e,t){var n=this,r=this.props.isEditable;return"item"===e.id?Object(a.jsx)(S9,{style:{width:"5%"},children:Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:"#",onDragStart:function(e){return n.onDragStartStage(e,"cost_stage_".concat(null===t||void 0===t?void 0:t.id))},draggable:!0,children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})," "]})}):"code"===e.id?"code"===e.id?Object(a.jsx)("th",{onDragOver:function(e){return n.onDragOverStage(e,"cost_stage_".concat(t.id))},onDrop:function(e){return n.onDropStage(e,"cost_stage_".concat(t.id))},children:this.state.stageState["stage-".concat(t.id)]?Object(a.jsx)(Qhe,{defaultValue:null===t||void 0===t?void 0:t.name,type:"text",width:"100%",placeholder:"Stage name...",autoFocus:!0,disabled:!r,onBlur:function(e){n.onStageNameBlur(t,e)}}):Object(a.jsx)("div",{onClick:function(e){r&&n.setState({stageState:Object(k.a)({},"stage-".concat(t.id),!0)})},children:null===t||void 0===t?void 0:t.name})}):Object(a.jsx)(a.Fragment,{}):"markup"===e.id&&t.cost_items&&t.cost_items.length>0?Object(a.jsx)("th",{onDragOver:function(e){return n.onDragOverStage(e,"cost_stage_".concat(t.id))},onDrop:function(e){return n.onDropStage(e,"cost_stage_".concat(t.id))},children:Object(a.jsx)(Qhe,{type:"number",width:"100%",placeholder:"Markup %",disabled:!r,onBlur:function(e){return n.constItemsStageMarkupApply(t.id,e.target.value)}})}):"amountEx"===e.id&&t.cost_items&&t.cost_items.length>0?Object(a.jsx)("th",{onDragOver:function(e){return n.onDragOverStage(e,"cost_stage_".concat(t.id))},onDrop:function(e){return n.onDropStage(e,"cost_stage_".concat(t.id))},children:Object(a.jsx)("div",{style:{width:e.width},children:vm((null===t||void 0===t?void 0:t.sub_total)||0)})}):"Btn"===e.id?Object(a.jsx)(Cx.Consumer,{children:function(e){var o=n.stageMenuItems(e,t,r);return Object(a.jsx)("th",{onDragOver:function(e){return n.onDragOverStage(e,"cost_stage_".concat(t.id))},onDrop:function(e){return n.onDropStage(e,"cost_stage_".concat(t.id))},style:{width:"5%"},children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:o,direction:"right"})})}}):Object(a.jsx)(S9,{width:e.width,hidden:e.hidden,align:e.type,onDragOver:function(e){return n.onDragOverStage(e,"cost_stage_".concat(t.id))},onDrop:function(e){return n.onDropStage(e,"cost_stage_".concat(t.id))},children:e.header},e.id)}},{key:"renderTHead",value:function(e){var t=this,n=this.props.columnsDefinition;return Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{id:"cost_stage_".concat(e.id),onDragOver:function(n){return t.onDragOverStage(n,"cost_stage_".concat(e.id))},onDrop:function(n){return t.onDropStage(n,"cost_stage_".concat(e.id))},children:n.map((function(n){return t.renderStage(n,e)}))},e.id)})}},{key:"renderTBody",value:function(e,t){return Object(a.jsx)("tbody",{children:e&&e.length>0?this.renderBodyRows(e):this.renderNodata(t)})}},{key:"render",value:function(){var e=this.props,t=(e.useCustomStyle,e.dataSource);return Object(a.jsxs)(a.Fragment,{children:[this.renderTHead(t),this.renderTBody(t.cost_items,t)]})}}]),n}(p.PureComponent),_de=Object(b.b)((function(e){return{stages:e.document}}))(yde);function wde(){var e=Object(f.a)(["\n  font-weight: 600;\n"]);return wde=function(){return e},e}function Sde(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return Sde=function(){return e},e}function kde(){var e=Object(f.a)(["\n  width: 300px;\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return kde=function(){return e},e}function Cde(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Cde=function(){return e},e}function Nde(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n"]);return Nde=function(){return e},e}function Ede(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return Ede=function(){return e},e}function Ade(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return Ade=function(){return e},e}function Ide(){var e=Object(f.a)(["\n  // border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Ide=function(){return e},e}function Tde(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return Tde=function(){return e},e}function Rde(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return Rde=function(){return e},e}var Dde=y.default.span(Rde(),_.gray3),Mde=y.default.th(Tde(),_.gray2),Lde=y.default.td(Ide(),_.gray2),Pde=y.default.tr(Ade(),_.blue0),Fde=y.default.table(Ede()),Ude=y.default.tbody(Nde(),_.gray2),Bde=y.default.input(Cde(),_.gray2,_.gray4),Vde=Object(y.default)(m6.a)(kde()),Jde=y.default.div(Sde()),qde=y.default.span(wde()),zde=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[{id:0,label:"No. of crew:"},{id:1,label:"Hours per day:"},{id:2,label:"Days:"}],totalV1:0,totalV2:0,totalV3:0,totalV4:0,labourType:[],selectedLabour:{}},e.getLabourType=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.getLabourTypes();case 3:(n=t.sent.data)&&(r=Object(aj.a)(e.state.labourType),n.map((function(e){r.push({value:e.id,label:e.name,first_tier_hourly_rate:e.first_tier_hourly_rate,second_tier_hourly_rate:e.second_tier_hourly_rate,third_tier_hourly_rate:e.third_tier_hourly_rate,fourth_tier_hourly_rate:e.fourth_tier_hourly_rate})})),e.setState({labourType:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.handleChangeV1=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(1===e.id?e.v1=parseFloat(k8(r)):e.v1=parseInt(r))})),e.setState({tableData:a})},e.handleChangeV2=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(1===e.id?e.v2=parseFloat(k8(r)):e.v2=parseInt(r))})),e.setState({tableData:a})},e.handleChangeV3=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(1===e.id?e.v3=parseFloat(k8(r)):e.v3=parseInt(r))})),e.setState({tableData:a})},e.handleChangeV4=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(1===e.id?e.v4=parseFloat(k8(r)):e.v4=parseInt(r))})),e.setState({tableData:a})},e.getValueV1=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v1)}));var r=n.reduce((function(e,t){return e*t}))||0;return e.setState({totalV1:r}),r.toFixed(2)},e.getValueV2=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v2)}));var r=n.reduce((function(e,t){return e*t}))||0;return e.setState({totalV2:r}),r.toFixed(2)},e.getValueV3=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v3)}));var r=n.reduce((function(e,t){return e*t}))||0;return e.setState({totalV3:r}),r.toFixed(2)},e.getValueV4=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v4)}));var r=n.reduce((function(e,t){return e*t}))||0;return e.setState({totalV4:r}),r.toFixed(2)},e.handleLabourType=function(t){e.setState({selectedLabour:t})},e.resetState=function(){e.setState({tableData:[{id:0,label:"No. of crew:"},{id:1,label:"Hours per day:"},{id:2,label:"Days:"}],totalV1:0,totalV2:0,totalV3:0,totalV4:0,selectedLabour:{}})},e.onClickClose=function(){e.resetState(),e.props.onClose()},e.handleAddLabour=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d,p,h,b,f,m,j;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.totalV1,a=n.totalV2,o=n.totalV3,i=n.totalV4,c=n.selectedLabour,s=n.tableData,l=e.props,u=l.gsCodes,l.taxRates,d=[],void 0===c.value){t.next=18;break}return h=s.find((function(e){return 0===e.id})),b=s.find((function(e){return 1===e.id})),f=s.find((function(e){return 2===e.id})),r>0&&d.push({name:"".concat(c.label," (1.0x) @ ").concat((null===b||void 0===b?void 0:b.v1)||0," Hours * ").concat((null===f||void 0===f?void 0:f.v1)||0," Days * ").concat((null===h||void 0===h?void 0:h.v1)||0," Crew Members"),unitCost:c.first_tier_hourly_rate,quantity:r,labour_tier:"1.0",labour_id:c.value,no_of_crews:(null===h||void 0===h?void 0:h.v1)||0,hours_per_day:(null===b||void 0===b?void 0:b.v1)||0,labour_days:(null===f||void 0===f?void 0:f.v1)||0}),a>0&&d.push({name:"".concat(c.label," (1.5x) @ ").concat((null===b||void 0===b?void 0:b.v2)||0," Hours * ").concat((null===f||void 0===f?void 0:f.v2)||0," Days * ").concat((null===h||void 0===h?void 0:h.v2)||0," Crew Members"),unitCost:c.second_tier_hourly_rate,quantity:a,labour_tier:"1.5",labour_id:c.value,no_of_crews:(null===h||void 0===h?void 0:h.v2)||0,hours_per_day:(null===b||void 0===b?void 0:b.v2)||0,labour_days:(null===f||void 0===f?void 0:f.v2)||0}),o>0&&d.push({name:"".concat(c.label," (2.0x) @ ").concat((null===b||void 0===b?void 0:b.v3)||0," Hours * ").concat((null===f||void 0===f?void 0:f.v3)||0," Days * ").concat((null===h||void 0===h?void 0:h.v3)||0," Crew Members"),unitCost:c.third_tier_hourly_rate,quantity:o,labour_tier:"2.0",labour_id:c.value,no_of_crews:(null===h||void 0===h?void 0:h.v3)||0,hours_per_day:(null===b||void 0===b?void 0:b.v3)||0,labour_days:(null===f||void 0===f?void 0:f.v3)||0}),i>0&&d.push({name:"".concat(c.label," (2.5x) @ ").concat((null===b||void 0===b?void 0:b.v4)||0," Hours * ").concat((null===f||void 0===f?void 0:f.v4)||0," Days * ").concat((null===h||void 0===h?void 0:h.v4)||0," Crew Members"),unitCost:c.fourth_tier_hourly_rate,quantity:i,labour_tier:"2.5",labour_id:c.value,no_of_crews:(null===h||void 0===h?void 0:h.v4)||0,hours_per_day:(null===b||void 0===b?void 0:b.v4)||0,labour_days:(null===f||void 0===f?void 0:f.v4)||0}),m=e.props.reportId,[],j=(null===u||void 0===u||null===(p=u.find((function(e){return"labour"===e.description.toLocaleLowerCase().trim()})))||void 0===p?void 0:p.id)||1,t.next=16,Promise.all(d.map(function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZW.costItemCreate(m,{assessment_report_costing_stage_id:e.props.costingTableId,gs_code_id:j,description:n.name,quantity:n.quantity,unit_cost:n.unitCost,discount:0,markup:0,tax_rate_id:1,position:r});case 2:return a=t.sent,t.next=5,ZW.costItemTNMMapCreate({assessment_report_cost_items_id:a.id,labour_id:n.labour_id,labour_tier:n.labour_tier,labour_no_of_crew:n.no_of_crews,labour_hours_per_day:n.hours_per_day,labour_days:n.labour_days,equipment_id:null,equipment_quantity:null,equipment_hours_on_site:null,material_id:null,material_quantity:null,type:"Labour"});case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())).then((function(t){t&&(e.props.dispatch(J4(m)).then((function(){e.props.dispatch(Y4())})),e.onClickClose())}));case 16:t.next=19;break;case 18:Oj(uj.Danger,"Select Labour Type");case 19:case"end":return t.stop()}}),t)}))),e.renderBody=function(){return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(Fde,{children:[Object(a.jsxs)("thead",{children:[Object(a.jsxs)(Pde,{children:[Object(a.jsx)(Lde,{children:Object(a.jsx)(Dde,{children:"Labour Type:"})}),Object(a.jsx)(Lde,{colSpan:1}),Object(a.jsx)(Lde,{colSpan:4,children:Object(a.jsx)(Vde,{options:e.state.labourType,onChange:e.handleLabourType})})]}),Object(a.jsxs)(Pde,{children:[Object(a.jsx)(Mde,{colSpan:2}),Object(a.jsx)(Mde,{children:Object(a.jsx)(Dde,{children:"Normal 1.0x"})}),Object(a.jsx)(Mde,{children:Object(a.jsx)(Dde,{children:"1.5x"})}),Object(a.jsx)(Mde,{children:Object(a.jsx)(Dde,{children:"2.0x"})}),Object(a.jsx)(Mde,{children:Object(a.jsx)(Dde,{children:"2.5x"})})]})]}),Object(a.jsx)(Ude,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(Pde,{children:[Object(a.jsx)(Lde,{children:Object(a.jsx)(Dde,{children:t.label})}),Object(a.jsx)(Lde,{colSpan:1}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0",value:t.v1,min:0,onChange:function(t){return e.handleChangeV1(t,n)}})}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0",value:t.v2,min:0,onChange:function(t){return e.handleChangeV2(t,n)}})}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0",value:t.v3,min:0,onChange:function(t){return e.handleChangeV3(t,n)}})}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0",value:t.v4,min:0,onChange:function(t){return e.handleChangeV4(t,n)}})})]},n)}))}),Object(a.jsx)(Ude,{children:Object(a.jsxs)(Pde,{children:[Object(a.jsx)(Lde,{children:Object(a.jsx)(Dde,{children:"TOTALS:"})}),Object(a.jsx)(Lde,{colSpan:1}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0.00",min:0,value:e.getValueV1(),readOnly:!0})}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0.00",min:0,value:e.getValueV2(),readOnly:!0})}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0.00",min:0,value:e.getValueV3(),readOnly:!0})}),Object(a.jsx)(Lde,{children:Object(a.jsx)(Bde,{type:"number",placeholder:"0.00",min:0,value:e.getValueV4(),readOnly:!0})})]})})]})}),Object(a.jsxs)(Jde,{children:[Object(a.jsx)(qde,{style:{marginRight:"40px"},children:"Total:"}),Object(a.jsxs)(qde,{children:[e.getCrewNumber()," crew for ",e.getTotalHours()," hours"]})]})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn",onClick:e.handleAddLabour,children:"Add"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getLabourType()}},{key:"getCrewNumber",value:function(){var e;return this.state.tableData.map((function(t){0===t.id&&(e=parseInt(t.v1||"0")+parseInt(t.v2||"0")+parseInt(t.v3||"0")+parseInt(t.v4||"0"))})),e||0}},{key:"getTotalHours",value:function(){var e=this.state;return(e.totalV1+e.totalV2+e.totalV3+e.totalV4||0).toFixed(2)}},{key:"getTotalDays",value:function(){var e;return this.state.tableData.map((function(t){2===t.id&&(e=parseInt(t.v1||"0")+parseInt(t.v2||"0")+parseInt(t.v3||"0")+parseInt(t.v4||"0"))})),e||0}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:this.onClickClose,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Gde=Object(b.b)((function(e){return{taxRates:e.finance.taxRates,gsCodes:e.finance.gsCodes}}))(zde);function Wde(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Wde=function(){return e},e}function Hde(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return Hde=function(){return e},e}function Yde(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return Yde=function(){return e},e}function Qde(){var e=Object(f.a)(["\n  margin: 10px;    \n  :hover {\n    background-color: ",";\n  }\n"]);return Qde=function(){return e},e}function Kde(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Kde=function(){return e},e}function Zde(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return Zde=function(){return e},e}function Xde(){var e=Object(f.a)(["\n  margin-left: 10px;\n"]);return Xde=function(){return e},e}function $de(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return $de=function(){return e},e}var epe=y.default.span($de(),_.gray3),tpe=y.default.span(Xde()),npe=y.default.th(Zde(),_.gray2),rpe=y.default.td(Kde(),_.gray2),ape=y.default.tr(Qde(),_.blue0),ope=y.default.table(Yde()),ipe=y.default.tbody(Hde(),_.gray2),cpe=y.default.input(Wde(),_.gray2,_.gray4),spe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[],search:"",pagination:{per_page:0,current_page:0,last_page:0,total_items:0}},e.loadEquipments=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.equipments,t.prev=1,t.next=4,n.fetch({per_page:6,page:1,sortby:"asc"});case 4:r=t.sent,a=[],r.data&&(r.data.length>0&&r.data.map((function(e){a.push({id:e.id,label:e.name,quantity:void 0,daysOnSite:void 0,charging_intervals:e.charging_intervals})})),e.setState({tableData:a,pagination:r.pagination})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.handleChangeQuantity=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.quantity=parseFloat(k8(r)))})),e.setState({tableData:a})},e.handleChangeDaysOnSite=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.daysOnSite=r)})),e.setState({tableData:a})},e.resetState=function(){e.loadEquipments(),e.setState({search:""})},e.onClickClose=function(){e.resetState(),e.props.onClose()},e.getHourInterval=function(e){var t={hourExist:!1,hour:{max_count_to_the_next_interval:0,charging_rate_per_interval:0}},n=e.find((function(e){return!0===e.is_default}));return!n&&(null===e||void 0===e?void 0:e.length)>0&&(n=e[0]),n&&(0===n.max_count_to_the_next_interval&&(n.max_count_to_the_next_interval=8),t.hour=n,t.hourExist=!0),t},e.getDayInterval=function(e){var t={dayExist:!1,day:{max_count_to_the_next_interval:0,charging_rate_per_interval:0}},n=e.find((function(e){return!0===e.is_default}));return!n&&(null===e||void 0===e?void 0:e.length)>0&&(n=e[0]),n&&(0===n.max_count_to_the_next_interval&&(n.max_count_to_the_next_interval=5),t.day=n,t.dayExist=!0),t},e.calcualteDayWeekIntervalCharges=function(t,n,r){var a,o={isError:!0,unit_cost:0,interval:"day",intervalCount:0};r>0&&(n=parseInt(null===(a=n/r)||void 0===a?void 0:a.toString()));var i=e.getDayInterval(t.filter((function(e){return"day"===e.charging_interval}))||[]);if(i.dayExist){var c=i.day;if(n>=c.max_count_to_the_next_interval){var s,l=t.find((function(e){return"week"===e.charging_interval}));return l&&l.charging_rate_per_interval>0?(o.intervalCount=parseInt(null===(s=n/c.max_count_to_the_next_interval)||void 0===s?void 0:s.toString()),o.unit_cost=o.intervalCount*l.charging_rate_per_interval,o.interval="week",o.isError=!1,o):(o.intervalCount=n,o.unit_cost=o.intervalCount*c.charging_rate_per_interval,o.interval="day",o.isError=!1,o)}return o.intervalCount=n,o.unit_cost=o.intervalCount*c.charging_rate_per_interval,o.interval="day",o.isError=!1,o}return o},e.intervalRateCalculation=function(t,n){var r={isError:!0,unit_cost:0,interval:"hour",intervalCount:0},a=e.getHourInterval(t.filter((function(e){return"hour"===e.charging_interval}))||[]);if(a.hourExist){var o=a.hour;if(!(n>=o.max_count_to_the_next_interval))return r.intervalCount=n,r.unit_cost=r.intervalCount*o.charging_rate_per_interval,r.interval="hour",r.isError=!1,r;r=e.calcualteDayWeekIntervalCharges(t,n,o.max_count_to_the_next_interval)}else r=e.calcualteDayWeekIntervalCharges(t,n,0);return r},e.handleAddData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=Object(aj.a)(e.state.tableData),r=[],[],a=[],o=!1,n.forEach((function(e){parseInt(e.quantity||"0")>0&&parseInt(e.daysOnSite||"0")>0?r.push(e):(parseInt(e.quantity||"0")>0&&parseInt(e.daysOnSite||"0")<=0||parseInt(e.quantity||"0")<=0&&parseInt(e.daysOnSite||"0")>0)&&(o=!0)})),r.length<=0&&(o=!0),o){t.next=15;break}return c=e.props,s=c.reportId,l=c.gsCodes,u=(null===l||void 0===l||null===(i=l.find((function(e){return"equipment"===e.description.toLocaleLowerCase().trim()})))||void 0===i?void 0:i.id)||1,j.a.forEach(r,(function(t){var n=e.intervalRateCalculation(t.charging_intervals,parseInt(t.daysOnSite||"0"));return n.isError?(Oj(uj.Danger,"".concat(t.label," day charging interval does not exist / set")),a=[],!1):(a.push({assessment_report_costing_stage_id:e.props.costingTableId,gs_code_id:u,description:"".concat(t.label," (").concat(n.interval,"@").concat(n.intervalCount,")"),quantity:parseInt(t.quantity),daysOnSite:parseInt(t.daysOnSite),unit_cost:n.unit_cost,discount:0,markup:0,tax_rate_id:1,position:0,equipment_id:t.id}),!0)})),t.next=13,Promise.all(a.map(function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.costItemCreate(s,t);case 2:return n=e.sent,e.next=5,ZW.costItemTNMMapCreate({assessment_report_cost_items_id:n.id,labour_id:null,labour_tier:null,labour_no_of_crew:null,labour_hours_per_day:null,labour_days:null,equipment_id:t.equipment_id,equipment_quantity:t.quantity,equipment_hours_on_site:t.daysOnSite,material_id:null,material_quantity:null,type:"Equipment"});case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(t){t&&(e.props.dispatch(J4(s)).then((function(){e.props.dispatch(Y4())})),e.onClickClose())}));case 13:t.next=16;break;case 15:Oj(uj.Danger,"Equipment quantity and day on site field value greater then zero");case 16:case"end":return t.stop()}}),t)}))),e.onClickPaginate=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.props.equipments.fetch({per_page:6,page:n,sortby:"asc"});case 3:r=t.sent,a=[],r.data&&(r.data.length>0&&r.data.map((function(e){a.push({id:e.id,label:e.name,quantity:void 0,daysOnSite:void 0,charging_intervals:e.charging_intervals})})),e.setState({tableData:a,pagination:r.pagination})),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e){return t.apply(this,arguments)}}(),e.fetchEquipments=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=14;break}return t.prev=1,t.next=4,e.props.equipmentSearch.fetch({term:n,per_page:6,page:1});case 4:r=t.sent,a=[],r.data&&(r.data.length>0&&r.data.map((function(e){a.push({id:e.id,label:e.name,quantity:void 0,daysOnSite:void 0,charging_intervals:e.charging_intervals})})),e.setState({tableData:a,pagination:r.pagination})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:t.next=15;break;case 14:e.loadEquipments();case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedFetch=Qv()(e.fetchEquipments,300),e.handleSearch=function(t){e.setState({search:t}),e.debouncedFetch(t)},e.renderBody=function(){var t,n=e.props.equipments;return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(aC,{value:e.state.search,loading:n.loading,onSearchValueChange:e.handleSearch,placeholder:"Search Equipment..."})})}),Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(ope,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(ape,{children:[Object(a.jsx)(npe,{colSpan:4}),Object(a.jsx)(npe,{children:Object(a.jsx)(epe,{children:"Quantity"})}),Object(a.jsx)(npe,{children:Object(a.jsx)(epe,{children:"Days | Hours On-site"})})]})}),Object(a.jsx)(ipe,{children:e.state.tableData.map((function(t,n){var r;return Object(a.jsxs)(ape,{style:{backgroundColor:(null===t||void 0===t?void 0:t.quantity)>0||(null===t||void 0===t?void 0:t.daysOnSite)>0?_.blue0:void 0},children:[Object(a.jsx)(rpe,{colSpan:4,children:Object(a.jsx)(tpe,{children:t.label})}),Object(a.jsx)(rpe,{children:Object(a.jsx)(cpe,{type:"number",placeholder:"0",value:t.quantity,min:0,onChange:function(n){return e.handleChangeQuantity(n,t.id)}})}),Object(a.jsx)(rpe,{children:Object(a.jsx)(cpe,{type:"number",placeholder:"0",value:t.daysOnSite,min:0,onChange:function(n){return e.handleChangeDaysOnSite(n,t.id)}})}),Object(a.jsx)(rpe,{children:(null===t||void 0===t||null===(r=t.charging_intervals)||void 0===r?void 0:r.length)>0?"/ ".concat(null===t||void 0===t?void 0:t.charging_intervals[0].charging_interval):""})]},n)}))})]})}),(null===(t=e.state)||void 0===t?void 0:t.pagination)&&Object(a.jsx)(oC,{pagination:e.state.pagination,onChange:e.onClickPaginate})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn",onClick:e.handleAddData,children:"Add"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadEquipments()}},{key:"componentDidUpdate",value:function(e,t){e.costingTableId,this.props.costingTableId}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.equipments,o=e.equipmentSearch;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{loading:r.loading||o.loading,onClose:this.onClickClose,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),lpe=Object(sg.compose)(O.g,oj({equipments:{fetch:ZW.getEquipmentCategories},equipmentSearch:{fetch:ZW.searchEquipmentCategories}}),Object(b.b)((function(e){return{currentJobEquipments:e.currentJobUsageAndActuals.equipments,taxRates:e.finance.taxRates,gsCodes:e.finance.gsCodes}})))(spe);function upe(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return upe=function(){return e},e}function dpe(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return dpe=function(){return e},e}function ppe(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return ppe=function(){return e},e}function hpe(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return hpe=function(){return e},e}function bpe(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return bpe=function(){return e},e}function fpe(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return fpe=function(){return e},e}function mpe(){var e=Object(f.a)(["\n  margin-left: 10px;\n"]);return mpe=function(){return e},e}function jpe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return jpe=function(){return e},e}var vpe=y.default.span(jpe(),_.gray3),Ope=y.default.span(mpe()),gpe=y.default.th(fpe(),_.gray2),xpe=y.default.td(bpe(),_.gray2),ype=y.default.tr(hpe(),_.blue0),_pe=y.default.table(ppe()),wpe=y.default.tbody(dpe(),_.gray2),Spe=y.default.input(upe(),_.gray2,_.gray4),kpe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[],search:"",pagination:{per_page:0,current_page:0,last_page:0,total_items:0}},e.loadMaterials=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.materials,t.prev=1,t.next=4,n.fetch({per_page:6,page:1,sortby:"asc"});case 4:r=t.sent,a=[],r.data&&(r.data.length>0&&(null===(o=r.data)||void 0===o||o.map((function(e){a.push({id:e.id,label:e.name,quantity:0,unitType:e.measure_unit.name,unitCost:e.default_sell_cost_per_unit})}))),e.setState({tableData:a,pagination:r.pagination})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.handleChangeQuantity=function(t,n){t.preventDefault();var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.quantity=parseFloat(k8(r)))})),e.setState({tableData:a})},e.handleAddMaterial=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(aj.a)(e.state.tableData),a=[],r.map((function(e){parseFloat(e.quantity)>0&&a.push(e)})),o=e.props,i=o.reportId,c=o.gsCodes,[],s=(null===c||void 0===c||null===(n=c.find((function(e){return"material"===e.description.toLocaleLowerCase().trim()})))||void 0===n?void 0:n.id)||1,t.next=8,Promise.all(a.map(function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ZW.costItemCreate(i,{assessment_report_costing_stage_id:e.props.costingTableId,gs_code_id:s,description:n.label,quantity:parseFloat(n.quantity),unit_cost:n.unitCost,discount:0,markup:0,tax_rate_id:1,position:0});case 2:return r=t.sent,t.next=5,ZW.costItemTNMMapCreate({assessment_report_cost_items_id:r.id,labour_id:null,labour_tier:null,labour_no_of_crew:null,labour_hours_per_day:null,labour_days:null,equipment_id:null,equipment_quantity:null,equipment_hours_on_site:null,material_id:n.id,material_quantity:parseFloat(n.quantity),type:"Material"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}())).then((function(t){t&&(e.props.dispatch(J4(i)).then((function(){e.props.dispatch(Y4())})),e.onClickClose())}));case 8:case"end":return t.stop()}}),t)}))),e.resetState=function(){e.loadMaterials(),e.setState({search:""})},e.onClickClose=function(){e.resetState(),e.props.onClose()},e.onClickPaginate=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.materials,t.prev=1,t.next=4,r.fetch({per_page:6,page:n,sortby:"asc"});case 4:a=t.sent,o=[],a.data&&(a.data.length>0&&(null===(i=a.data)||void 0===i||i.map((function(e){o.push({id:e.id,label:e.name,quantity:0,unitType:e.measure_unit.name,unitCost:e.default_sell_cost_per_unit})}))),e.setState({tableData:o,pagination:a.pagination})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.fetchMaterials=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=14;break}return t.prev=1,t.next=4,e.props.materialSearch.fetch({name:n,per_page:6,page:1,sortby:"asc"});case 4:r=t.sent,a=[],r.data&&(r.data.length>0&&r.data.map((function(e){a.push({id:e.id,label:e.name,quantity:0,unitType:e.measure_unit.name,unitCost:e.default_sell_cost_per_unit})})),e.setState({tableData:a,pagination:r.pagination})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:t.next=15;break;case 14:e.loadMaterials();case 15:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedFetch=Qv()(e.fetchMaterials,300),e.handleSearch=function(t){e.setState({search:t}),e.debouncedFetch(t)},e.renderBody=function(){var t,n=e.props,r=(n.materials,n.materialSearch);return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(aC,{value:e.state.search,loading:r.loading,onSearchValueChange:e.handleSearch,placeholder:"Search Material Name..."})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)(_pe,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(ype,{children:[Object(a.jsx)(gpe,{colSpan:4}),Object(a.jsx)(gpe,{children:Object(a.jsx)(vpe,{children:"Quantity"})}),Object(a.jsx)(gpe,{children:Object(a.jsx)(vpe,{children:"Unit"})})]})}),Object(a.jsx)(wpe,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(ype,{style:{backgroundColor:(null===t||void 0===t?void 0:t.quantity)>0?_.blue0:void 0},children:[Object(a.jsx)(xpe,{colSpan:4,children:Object(a.jsx)(Ope,{children:t.label})}),Object(a.jsx)(xpe,{children:Object(a.jsx)(Spe,{type:"number",value:t.quantity>0?t.quantity:void 0,min:0,placeholder:"0",onChange:function(n){return e.handleChangeQuantity(n,t.id)}})}),Object(a.jsx)(xpe,{children:Object(a.jsx)(Ope,{children:t.unitType})})]},n)}))})]}),(null===(t=e.state)||void 0===t?void 0:t.pagination)&&Object(a.jsx)(oC,{pagination:e.state.pagination,onChange:e.onClickPaginate})]})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{onClick:e.handleAddMaterial,className:"btn",children:"Add"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadMaterials()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.materialSearch,o=e.materials;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{loading:o.loading||r.loading,onClose:this.onClickClose,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Cpe=Object(sg.compose)(O.g,oj({materials:{fetch:ZW.getAllMaterials},materialSearch:{fetch:ZW.searchMaterials}}),Object(b.b)((function(e){return{currentJobMaterials:e.currentJobUsageAndActuals.materials,taxRates:e.finance.taxRates,gsCodes:e.finance.gsCodes}})))(kpe),Npe=function(e){var t=Object(c.a)({},e);return e.gs_code&&(t.gs_code_id=e.gs_code.id),e.tax_rate&&(t.tax_rate_id=e.tax_rate.id),t},Epe=n(592);function Ape(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Ape=function(){return e},e}function Ipe(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return Ipe=function(){return e},e}function Tpe(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return Tpe=function(){return e},e}function Rpe(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return Rpe=function(){return e},e}function Dpe(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Dpe=function(){return e},e}function Mpe(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return Mpe=function(){return e},e}function Lpe(){var e=Object(f.a)(["\n  margin-left: 10px;\n"]);return Lpe=function(){return e},e}function Ppe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return Ppe=function(){return e},e}var Fpe=y.default.span(Ppe(),_.gray3),Upe=y.default.span(Lpe()),Bpe=y.default.th(Mpe(),_.gray2),Vpe=y.default.td(Dpe(),_.gray2),Jpe=y.default.tr(Rpe(),_.blue0),qpe=y.default.table(Tpe()),zpe=y.default.tbody(Ipe(),_.gray2),Gpe=y.default.input(Ape(),_.gray2,_.gray4),Wpe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[]},e.handleChangeQuantity=function(t,n){t.preventDefault();var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.quantity=parseFloat(k8(r)))})),e.setState({tableData:a})},e.handleAddMaterial=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.item,r=Object(aj.a)(e.state.tableData),null===n||void 0===n?void 0:n.cost_item_mapping_data,a=[],r.map((function(e){parseFloat(e.quantity)>0&&a.push(e)})),t.next=7,Promise.all(a.map(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.costItemListUpdate(t.reportId,t.id,{assessment_report_costing_stage_id:t.assessment_report_costing_stage_id,gs_code_id:t.gs_code_id,description:t.label,quantity:parseFloat(t.quantity),unit_cost:t.unitCost,discount:0,markup:0,tax_rate_id:t.tax_rate_id,position:t.position});case 2:return e.next=4,ZW.costItemTNMMapUpdate(t.id,{labour_id:null,labour_tier:null,labour_no_of_crew:null,labour_hours_per_day:null,labour_days:null,equipment_id:null,equipment_quantity:null,equipment_hours_on_site:null,material_id:t.material_id,material_quantity:parseFloat(t.quantity),type:"Material"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(t){t&&(e.props.dispatch(J4(n.assessment_report_id)).then((function(){e.props.dispatch(Y4())})),e.onClickClose())}));case 7:case"end":return t.stop()}}),t)}))),e.resetState=function(){e.setState({search:"",tableData:[]})},e.onClickClose=function(){e.resetState(),e.props.onClose()},e.renderBody=function(){return Object(Epe.a)(e.props),Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(qpe,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(Jpe,{children:[Object(a.jsx)(Bpe,{colSpan:4}),Object(a.jsx)(Bpe,{children:Object(a.jsx)(Fpe,{children:"Quantity"})}),Object(a.jsx)(Bpe,{children:Object(a.jsx)(Fpe,{children:"Unit"})})]})}),Object(a.jsx)(zpe,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(Jpe,{style:{backgroundColor:(null===t||void 0===t?void 0:t.quantity)>0?_.blue0:void 0},children:[Object(a.jsx)(Vpe,{colSpan:4,children:Object(a.jsx)(Upe,{children:t.label})}),Object(a.jsx)(Vpe,{children:Object(a.jsx)(Gpe,{type:"number",value:t.quantity>0?t.quantity:void 0,min:0,placeholder:"0",onChange:function(n){return e.handleChangeQuantity(n,t.id)}})}),Object(a.jsx)(Vpe,{children:Object(a.jsx)(Upe,{children:t.unitType})})]},n)}))})]})})})},e.renderFooter=function(){return Object(a.jsx)(Xg,{onClick:e.handleAddMaterial,className:"btn",children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t,n,r,a=this.props.item,o=[],i=null===a||void 0===a?void 0:a.cost_item_mapping_data;a&&(o.push({id:a.id,label:(null===i||void 0===i||null===(e=i.material)||void 0===e?void 0:e.name)||"N/A",quantity:a.quantity,unitType:null===i||void 0===i||null===(t=i.material)||void 0===t||null===(n=t.measure_unit)||void 0===n?void 0:n.name,unitCost:null===i||void 0===i||null===(r=i.material)||void 0===r?void 0:r.default_sell_cost_per_unit,assessment_report_costing_stage_id:a.assessment_report_costing_stage_id,gs_code_id:a.gs_code_id,tax_rate_id:a.tax_rate_id,position:a.position,material_id:a.material_id,reportId:a.assessment_report_id}),this.setState({tableData:o}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.item;if(e.item!==t){var n,r,a,o,i=[],c=null===t||void 0===t?void 0:t.cost_item_mapping_data;if(t)i.push({id:t.id,label:(null===c||void 0===c||null===(n=c.material)||void 0===n?void 0:n.name)||"N/A",quantity:t.quantity,unitType:null===c||void 0===c||null===(r=c.material)||void 0===r||null===(a=r.measure_unit)||void 0===a?void 0:a.name,unitCost:null===c||void 0===c||null===(o=c.material)||void 0===o?void 0:o.default_sell_cost_per_unit,assessment_report_costing_stage_id:t.assessment_report_costing_stage_id,gs_code_id:t.gs_code_id,tax_rate_id:t.tax_rate_id,position:t.position,material_id:t.material_id,reportId:t.assessment_report_id}),this.setState({tableData:i})}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:this.onClickClose,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Hpe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{}})))(Wpe);function Ype(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Ype=function(){return e},e}function Qpe(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return Qpe=function(){return e},e}function Kpe(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return Kpe=function(){return e},e}function Zpe(){var e=Object(f.a)(["\n  margin: 10px;    \n  :hover {\n    background-color: ",";\n  }\n"]);return Zpe=function(){return e},e}function Xpe(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Xpe=function(){return e},e}function $pe(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return $pe=function(){return e},e}function ehe(){var e=Object(f.a)(["\n  margin-left: 10px;\n"]);return ehe=function(){return e},e}function the(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return the=function(){return e},e}var nhe=y.default.span(the(),_.gray3),rhe=y.default.span(ehe()),ahe=y.default.th($pe(),_.gray2),ohe=y.default.td(Xpe(),_.gray2),ihe=y.default.tr(Zpe(),_.blue0),che=y.default.table(Kpe()),she=y.default.tbody(Qpe(),_.gray2),lhe=y.default.input(Ype(),_.gray2,_.gray4),uhe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[]},e.loadEquipments=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.item;try{r=[],a=null===n||void 0===n?void 0:n.cost_item_mapping_data,n&&(r.push({id:n.id,label:null===a||void 0===a||null===(o=a.equipment)||void 0===o?void 0:o.name,quantity:n.quantity,daysOnSite:a.equipment_hours_on_site,charging_intervals:null===a||void 0===a||null===(i=a.equipment)||void 0===i?void 0:i.charging_intervals,assessment_report_costing_stage_id:n.assessment_report_costing_stage_id,gs_code_id:n.gs_code_id,tax_rate_id:n.tax_rate_id,position:n.position,equipment_id:n.equipment_id,reportId:n.assessment_report_id}),e.setState({tableData:r}))}catch(c){}case 2:case"end":return t.stop()}}),t)}))),e.handleChangeQuantity=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.quantity=parseFloat(k8(r)))})),e.setState({tableData:a})},e.handleChangeDaysOnSite=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(e.daysOnSite=r)})),e.setState({tableData:a})},e.resetState=function(){e.setState({search:"",tableData:[]})},e.onClickClose=function(){e.resetState(),e.props.onClose()},e.getHourInterval=function(e){var t={hourExist:!1,hour:{max_count_to_the_next_interval:0,charging_rate_per_interval:0}},n=e.find((function(e){return!0===e.is_default}));return!n&&(null===e||void 0===e?void 0:e.length)>0&&(n=e[0]),n&&(0===n.max_count_to_the_next_interval&&(n.max_count_to_the_next_interval=8),t.hour=n,t.hourExist=!0),t},e.getDayInterval=function(e){var t={dayExist:!1,day:{max_count_to_the_next_interval:0,charging_rate_per_interval:0}},n=e.find((function(e){return!0===e.is_default}));return!n&&(null===e||void 0===e?void 0:e.length)>0&&(n=e[0]),n&&(0===n.max_count_to_the_next_interval&&(n.max_count_to_the_next_interval=5),t.day=n,t.dayExist=!0),t},e.calcualteDayWeekIntervalCharges=function(t,n,r){var a,o={isError:!0,unit_cost:0,interval:"day",intervalCount:0};r>0&&(n=parseInt(null===(a=n/r)||void 0===a?void 0:a.toString()));var i=e.getDayInterval(t.filter((function(e){return"day"===e.charging_interval}))||[]);if(i.dayExist){var c=i.day;if(n>=c.max_count_to_the_next_interval){var s,l=t.find((function(e){return"week"===e.charging_interval}));return l&&l.charging_rate_per_interval>0?(o.intervalCount=parseInt(null===(s=n/c.max_count_to_the_next_interval)||void 0===s?void 0:s.toString()),o.unit_cost=o.intervalCount*l.charging_rate_per_interval,o.interval="week",o.isError=!1,o):(o.intervalCount=n,o.unit_cost=o.intervalCount*c.charging_rate_per_interval,o.interval="day",o.isError=!1,o)}return o.intervalCount=n,o.unit_cost=o.intervalCount*c.charging_rate_per_interval,o.interval="day",o.isError=!1,o}return o},e.intervalRateCalculation=function(t,n){var r={isError:!0,unit_cost:0,interval:"hour",intervalCount:0};if(t){var a=e.getHourInterval(t.filter((function(e){return"hour"===e.charging_interval}))||[]);if(a.hourExist){var o=a.hour;if(!(n>=o.max_count_to_the_next_interval))return r.intervalCount=n,r.unit_cost=r.intervalCount*o.charging_rate_per_interval,r.interval="hour",r.isError=!1,r;r=e.calcualteDayWeekIntervalCharges(t,n,o.max_count_to_the_next_interval)}else r=e.calcualteDayWeekIntervalCharges(t,n,0)}return r},e.handleAddData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.item,r=Object(aj.a)(e.state.tableData),a=[],o=[],i=!1,r.forEach((function(e){parseInt(e.quantity||"0")>0&&parseInt(e.daysOnSite||"0")>0?a.push(e):(parseInt(e.quantity||"0")>0&&parseInt(e.daysOnSite||"0")<=0||parseInt(e.quantity||"0")<=0&&parseInt(e.daysOnSite||"0")>0)&&(i=!0)})),a.length<=0&&(i=!0),i){t.next=13;break}return j.a.forEach(a,(function(t){var n=e.intervalRateCalculation(t.charging_intervals,parseInt(t.daysOnSite||"0"));return n.isError?(Oj(uj.Danger,"".concat(t.label," day charging interval does not exist / set")),o=[],!1):(o.push({reportId:t.reportId,id:t.id,assessment_report_costing_stage_id:t.assessment_report_costing_stage_id,gs_code_id:t.gs_code_id,description:"".concat(t.label," (").concat(n.interval,"@").concat(n.intervalCount,")"),quantity:parseInt(t.quantity),daysOnSite:parseInt(t.daysOnSite),unit_cost:n.unit_cost,discount:0,markup:0,tax_rate_id:t.tax_rate_id,position:t.position,equipment_id:t.equipment_id}),!0)})),t.next=11,Promise.all(o.map(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.costItemListUpdate(t.reportId,t.id,t);case 2:return e.next=4,ZW.costItemTNMMapUpdate(t.id,{labour_id:null,labour_tier:null,labour_no_of_crew:null,labour_hours_per_day:null,labour_days:null,equipment_id:t.equipment_id,equipment_quantity:t.quantity,equipment_hours_on_site:t.daysOnSite,material_id:null,material_quantity:null,type:"Equipment"});case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())).then((function(t){t&&(e.props.dispatch(J4(n.assessment_report_id)).then((function(){e.props.dispatch(Y4())})),e.onClickClose())}));case 11:t.next=14;break;case 13:Oj(uj.Danger,"Equipment quantity and day on site field value greater then zero");case 14:case"end":return t.stop()}}),t)}))),e.renderBody=function(){return Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(che,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(ihe,{children:[Object(a.jsx)(ahe,{colSpan:4}),Object(a.jsx)(ahe,{children:Object(a.jsx)(nhe,{children:"Quantity"})}),Object(a.jsx)(ahe,{children:Object(a.jsx)(nhe,{children:"Days | Hours On-site"})})]})}),Object(a.jsx)(she,{children:e.state.tableData.map((function(t,n){var r;return Object(a.jsxs)(ihe,{style:{backgroundColor:(null===t||void 0===t?void 0:t.quantity)>0||(null===t||void 0===t?void 0:t.daysOnSite)>0?_.blue0:void 0},children:[Object(a.jsx)(ohe,{colSpan:4,children:Object(a.jsx)(rhe,{children:t.label})}),Object(a.jsx)(ohe,{children:Object(a.jsx)(lhe,{type:"number",placeholder:"0",value:t.quantity,min:0,onChange:function(n){return e.handleChangeQuantity(n,t.id)}})}),Object(a.jsx)(ohe,{children:Object(a.jsx)(lhe,{type:"number",placeholder:"0",value:t.daysOnSite,min:0,onChange:function(n){return e.handleChangeDaysOnSite(n,t.id)}})}),Object(a.jsx)(ohe,{children:(null===t||void 0===t||null===(r=t.charging_intervals)||void 0===r?void 0:r.length)>0?"/ ".concat(null===t||void 0===t?void 0:t.charging_intervals[0].charging_interval):""})]},n)}))})]})})})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn",onClick:e.handleAddData,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadEquipments()}},{key:"componentDidUpdate",value:function(e,t){e.item!==this.props.item&&this.loadEquipments()}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:this.onClickClose,title:n||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),dhe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{}})))(uhe);function phe(){var e=Object(f.a)(["\n  font-weight: 600;\n"]);return phe=function(){return e},e}function hhe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: flex-end;\n"]);return hhe=function(){return e},e}function bhe(){var e=Object(f.a)(["\n  width: 300px;\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return bhe=function(){return e},e}function fhe(){var e=Object(f.a)(["\n  width: 100px;\n  height: 40px;\n  border: 1px solid ",";\n  border-radius: 6px;\n  padding: 5px;\n  :disabled {\n    color: ",";\n    cursor: not-allowed;\n  }\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return fhe=function(){return e},e}function mhe(){var e=Object(f.a)(["\n  border-bottom: 0.5px solid ",";\n"]);return mhe=function(){return e},e}function jhe(){var e=Object(f.a)(["\n  width: 100%;\n  margin: 10px;\n"]);return jhe=function(){return e},e}function vhe(){var e=Object(f.a)(["\n  margin: 10px;\n  :hover {\n    background-color: ",";\n  }\n"]);return vhe=function(){return e},e}function Ohe(){var e=Object(f.a)(["\n  // border-bottom: 0.5px solid ",";\n  padding: 10px;\n"]);return Ohe=function(){return e},e}function ghe(){var e=Object(f.a)(["\n  width: 110px;\n  padding: 10px;\n  border: 0px;\n  //border-bottom: 0.5px solid ",";\n"]);return ghe=function(){return e},e}function xhe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 300;\n"]);return xhe=function(){return e},e}var yhe=y.default.span(xhe(),_.gray3),_he=y.default.th(ghe(),_.gray2),whe=y.default.td(Ohe(),_.gray2),She=y.default.tr(vhe(),_.blue0),khe=y.default.table(jhe()),Che=y.default.tbody(mhe(),_.gray2),Nhe=y.default.input(fhe(),_.gray2,_.gray4),Ehe=(Object(y.default)(m6.a)(bhe()),y.default.div(hhe())),Ahe=y.default.span(phe()),Ihe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableData:[{id:0,label:"No. of crew:",v1:0},{id:1,label:"Hours per day:",v1:0},{id:2,label:"Days:",v1:0}],totalV1:0,totalV2:0,totalV3:0,totalV4:0,labourType:[],selectedLabour:{}},e.setLabourData=function(){var t=e.props.item,n=null===t||void 0===t?void 0:t.cost_item_mapping_data,r=Object(aj.a)(e.state.tableData);n&&r.map((function(e){0===e.id?e.v1=n.labour_no_of_crew:1===e.id?e.v1=n.labour_hours_per_day:2===e.id&&(e.v1=n.labour_days)})),e.setState({tableData:r})},e.getLabourType=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props.item;try{n&&(r=n.cost_item_mapping_data.labour,a=Object(aj.a)(e.state.labourType),o={value:r.id,label:r.name,first_tier_hourly_rate:r.first_tier_hourly_rate,second_tier_hourly_rate:r.second_tier_hourly_rate,third_tier_hourly_rate:r.third_tier_hourly_rate,fourth_tier_hourly_rate:r.fourth_tier_hourly_rate},a.push(o),e.setState({labourType:a,selectedLabour:o}))}catch(i){}case 2:case"end":return t.stop()}}),t)}))),e.handleChangeV1=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableData);a.map((function(e){e.id===n&&(1===e.id?e.v1=parseFloat(k8(r)):e.v1=parseInt(r))})),e.setState({tableData:a})},e.getValueV1=function(){var t=e.state.tableData,n=[];t.map((function(e){n.push(e.v1)}));var r=n.reduce((function(e,t){return e*t}))||0;return e.setState({totalV1:r}),r.toFixed(2)},e.handleLabourType=function(t){e.setState({selectedLabour:t})},e.resetState=function(){e.setState({tableData:[{id:0,label:"No. of crew:"},{id:1,label:"Hours per day:"},{id:2,label:"Days:"}],totalV1:0,totalV2:0,totalV3:0,totalV4:0,selectedLabour:{}})},e.onClickClose=function(){e.resetState(),e.props.onClose()},e.handleAddLabour=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.state,r=n.totalV1,n.totalV2,n.totalV3,n.totalV4,a=n.selectedLabour,o=n.tableData,i=e.props.item,c=i.cost_item_mapping_data,s=[],void 0===a.value){t.next=11;break}return l=o.find((function(e){return 0===e.id})),u=o.find((function(e){return 1===e.id})),d=o.find((function(e){return 2===e.id})),r>0&&s.push({name:"".concat(a.label," (").concat(c.labour_tier,"x) @ ").concat((null===u||void 0===u?void 0:u.v1)||0," Hours * ").concat((null===d||void 0===d?void 0:d.v1)||0," Days * ").concat((null===l||void 0===l?void 0:l.v1)||0," Crew Members"),unitCost:a.first_tier_hourly_rate,quantity:r,labour_tier:"1.0",labour_id:a.value,no_of_crews:(null===l||void 0===l?void 0:l.v1)||0,hours_per_day:(null===u||void 0===u?void 0:u.v1)||0,labour_days:(null===d||void 0===d?void 0:d.v1)||0,reportId:i.assessment_report_id,assessment_report_costing_stage_id:i.assessment_report_costing_stage_id,gs_code_id:i.gs_code_id,tax_rate_id:i.tax_rate_id,position:i.position,cost_item_id:i.id}),t.next=11,Promise.all(s.map(function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.costItemListUpdate(t.reportId,t.cost_item_id,{assessment_report_costing_stage_id:t.assessment_report_costing_stage_id,gs_code_id:t.gs_code_id,description:t.name,quantity:t.quantity,unit_cost:t.unitCost,discount:0,markup:0,tax_rate_id:t.tax_rate_id,position:t.position});case 2:return e.next=4,ZW.costItemTNMMapUpdate(t.cost_item_id,{labour_id:t.labour_id,labour_tier:t.labour_tier,labour_no_of_crew:t.no_of_crews,labour_hours_per_day:t.hours_per_day,labour_days:t.labour_days,equipment_id:null,equipment_quantity:null,equipment_hours_on_site:null,material_id:null,material_quantity:null,type:"Labour"});case 4:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}())).then((function(t){t&&(e.props.dispatch(J4(i.assessment_report_id)).then((function(){e.props.dispatch(Y4())})),e.onClickClose())}));case 11:case 12:case"end":return t.stop()}}),t)}))),e.renderBody=function(){var t,n=e.props.item,r=(null===n||void 0===n||null===(t=n.cost_item_mapping_data)||void 0===t?void 0:t.labour_tier)||"";return Object(a.jsxs)("div",{style:{width:"100%"},children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsxs)(khe,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)(She,{children:[Object(a.jsx)(_he,{colSpan:2}),Object(a.jsx)(_he,{children:Object(a.jsx)(yhe,{children:"1.0"===r?"Normal 1.0x":"".concat(r,"x")})})]})}),Object(a.jsx)(Che,{children:e.state.tableData.map((function(t,n){return Object(a.jsxs)(She,{children:[Object(a.jsx)(whe,{children:Object(a.jsx)(yhe,{children:t.label})}),Object(a.jsx)(whe,{colSpan:1}),Object(a.jsx)(whe,{children:Object(a.jsx)(Nhe,{type:"number",placeholder:"0",value:t.v1,min:0,onChange:function(t){return e.handleChangeV1(t,n)}})})]},n)}))}),Object(a.jsx)(Che,{children:Object(a.jsxs)(She,{children:[Object(a.jsx)(whe,{children:Object(a.jsx)(yhe,{children:"TOTALS:"})}),Object(a.jsx)(whe,{colSpan:1}),Object(a.jsx)(whe,{children:Object(a.jsx)(Nhe,{type:"number",placeholder:"0.00",min:0,value:e.getValueV1(),readOnly:!0})})]})})]})}),Object(a.jsxs)(Ehe,{children:[Object(a.jsx)(Ahe,{style:{marginRight:"40px"},children:"Total:"}),Object(a.jsxs)(Ahe,{children:[e.getCrewNumber()," crew for ",e.getTotalHours()," hours"]})]})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn",onClick:e.handleAddLabour,children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getLabourType(),this.setLabourData()}},{key:"componentDidUpdate",value:function(e){e.item!==this.props.item&&(this.getLabourType(),this.setLabourData())}},{key:"getCrewNumber",value:function(){var e;return this.state.tableData.map((function(t){0===t.id&&(e=parseInt(t.v1||"0")+parseInt(t.v2||"0")+parseInt(t.v3||"0")+parseInt(t.v4||"0"))})),e||0}},{key:"getTotalHours",value:function(){var e=this.state;return(e.totalV1+e.totalV2+e.totalV3+e.totalV4||0).toFixed(2)}},{key:"getTotalDays",value:function(){var e;return this.state.tableData.map((function(t){2===t.id&&(e=parseInt(t.v1||"0")+parseInt(t.v2||"0")+parseInt(t.v3||"0")+parseInt(t.v4||"0"))})),e||0}},{key:"render",value:function(){var e,t,n=this.props,r=n.isOpen,o=(n.title,n.item);return Object(a.jsx)(qO,{isOpen:r,children:Object(a.jsx)(cg,{onClose:this.onClickClose,title:(null===o||void 0===o||null===(e=o.cost_item_mapping_data)||void 0===e||null===(t=e.labour)||void 0===t?void 0:t.name)||"",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),The=Object(b.b)((function(e){return{}}))(Ihe);function Rhe(){var e=Object(f.a)(["\n  display: flex;\n  color: ",";\n"]);return Rhe=function(){return e},e}function Dhe(){var e=Object(f.a)(["\n  margin-bottom: 45px;\n"]);return Dhe=function(){return e},e}function Mhe(){var e=Object(f.a)(["\n  border: 0.5px solid ",";\n"]);return Mhe=function(){return e},e}function Lhe(){var e=Object(f.a)(["\n  justify-content: space-between;\n  display: flex;\n  margin: 10px;\n"]);return Lhe=function(){return e},e}function Phe(){var e=Object(f.a)(["\n  justify-content: space-between;\n  display: flex;\n  margin: 10px;\n"]);return Phe=function(){return e},e}function Fhe(){var e=Object(f.a)([""]);return Fhe=function(){return e},e}function Uhe(){var e=Object(f.a)(["\n  padding-right: 60px;\n  width: 30%;\n"]);return Uhe=function(){return e},e}function Bhe(){var e=Object(f.a)(["\n  width: 100%;\n  :focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Bhe=function(){return e},e}function Vhe(){var e=Object(f.a)(["\n    width: ",";\n    padding: 5px;\n    border: 1px solid ",";\n    border-radius: 6px;\n    margin: 5px 0px 5px 0px;\n    : disabled {\n        color: ","\n        cursor: not-allowed;\n    }\n    : focus {\n        color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);\n  }\n"]);return Vhe=function(){return e},e}function Jhe(){var e=Object(f.a)(["\n  min-width: 20px;\n  margin: 10px 0px 10px 0px;\n  fill: ",";\n"]);return Jhe=function(){return e},e}function qhe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 600;\n  font-size: 24px;\n"]);return qhe=function(){return e},e}function zhe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 600;\n"]);return zhe=function(){return e},e}function Ghe(){var e=Object(f.a)(["\n  color: ",";\n"]);return Ghe=function(){return e},e}var Whe=y.default.span(Ghe(),_.gray4),Hhe=(y.default.span(zhe(),_.black0),y.default.span(qhe(),_.black0)),Yhe=Object(y.default)(cm)(Jhe(),_.gray3),Qhe=y.default.input(Vhe(),(function(e){return e.width}),_.gray2,_.gray4),Khe=Object(y.default)(m6.a)(Bhe()),Zhe=y.default.div(Uhe()),Xhe=y.default.div(Fhe()),$he=y.default.div(Phe()),ebe=y.default.div(Lhe()),tbe=y.default.div(Mhe(),_.gray2),nbe=y.default.div(Dhe()),rbe=y.default.span(Rhe(),_.red1),abe=function(e){if(["",null,void 0].includes(e))return"This field is required"},obe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,itemSelected:[],id:"",errorDescription:"",isModalOpen:!1,isModalOpenEquipment:!1,isModalOpenMaterials:!1,subTotal:0,texRatesOption:[],calculatedTax:0,total:0,assessment_report_costing_stage_id:0,assessment_report_costing_item:{},isEditLabourModalOpen:!1,isEditModalOpenEquipment:!1,isEditModalOpenMaterials:!1},e.onDragStart=function(e,t,n){var r=JSON.stringify({id:t,assessment_report_costing_stage_id:n});e.dataTransfer.setData("dragContent",r),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.getTexRates=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{k0.getTaxRates().then((function(t){e.setState({texRatesOption:t})}))}catch(n){Oj(uj.Danger,"Server Error")}case 1:case"end":return t.stop()}}),t)}))),e.handleChangeDescription=function(e,t){},e.handleOnBlurChangeDescription=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.handleChangeQuantity=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.itemSelected);a.map((function(e){return n.id===e.id&&(e.quantity=r),e})),e.setState({itemSelected:a})},e.handleOnBlurQuantity=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,(o=Object(aj.a)(e.state.itemSelected)).map((function(e){return r.id===e.id&&(e.quantity=a),e})),e.setState({itemSelected:o}),t.prev=4,i=r.assessment_report_id,c={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:r.description,quantity:a,unit_cost:r.unit_cost,discount:r.discount,markup:r.markup,tax_rate_id:r.tax_rate_id},t.next=9,ZW.costItemListUpdate(i,r.id,c);case 9:t.sent&&e.props.dispatch(V4(i)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleChangeUnitPrice=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.itemSelected);a.length>0&&a.map((function(e){return n.id===e.id&&(e.unit_cost=r),e})),e.setState({itemSelected:a})},e.handleOnBlurUnitPrice=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,(o=Object(aj.a)(e.state.itemSelected)).length>0&&o.map((function(e){return r.id===e.id&&(e.unit_cost=a),e})),e.setState({itemSelected:o}),t.prev=4,i=r.assessment_report_id,c={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:r.description,quantity:r.quantity,unit_cost:a,discount:r.discount,markup:r.markup,tax_rate_id:r.tax_rate_id},t.next=9,ZW.costItemListUpdate(i,r.id,c);case 9:t.sent&&e.props.dispatch(V4(i)),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 16:case"end":return t.stop()}}),t,null,[[4,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.getSubTotal=function(){var t=e.state.itemSelected,n=[];t.length>0&&t.map((function(e){""!==e.quantity&&""!==e.unit_cost&&n.push(e.quantity*e.unit_cost)}));var r=n.reduce((function(e,t){return e+t}),0);return e.setState({subTotal:r}),r.toFixed(2)},e.getTotal=function(){var t=e.state;return(t.subTotal+t.calculatedTax).toFixed(2)},e.getCalculatedTax=function(){var t=e.state,n=t.texRatesOption,r=t.itemSelected,a=new Array,o=0;return a=n.map((function(e){return Array[e.value]=e.rate})),r.map((function(e){0!==a[e.tax_rate_id-1]&&(o+=e.quantity*e.unit_cost*a[e.tax_rate_id-1])})),e.setState({calculatedTax:o}),o.toFixed(2)},e.getTotalValue=function(e){return""!==e.quantity&&""!==e.unit_cost?(e.quantity*e.unit_cost).toFixed(2):0},e.handleTexChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return(a=Object(aj.a)(e.state.itemSelected)).length>0&&a.map((function(e){return r.id===e.id&&(e.tax_rate_id=n.value),e})),e.setState({itemSelected:a}),t.prev=3,o=r.assessment_report_id,i={assessment_report_costing_stage_id:r.assessment_report_costing_stage_id,gs_code_id:r.gs_code_id,position:r.position,description:r.description,quantity:r.quantity,unit_cost:+r.unit_cost,discount:r.discount,markup:r.markup,tax_rate_id:n.value},t.next=8,ZW.costItemListUpdate(o,r.id,i);case 8:t.sent&&e.props.dispatch(V4(o)),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[3,12]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleGsCodeChange=function(t,n){return function(r){e.handleSelectChange(t,n,"gs_code")(r),e.handleSelectChange(t,n,"quantity")(n.quantity>0?n.quantity:1),e.handleSelectChange(t,n,"unit_cost")(r.amount?parseFloat(r.amount):parseFloat(n.unit_cost)),e.handleSelectChange(t,n,"description")(r.description?r.description:n.description),e.onSubmit(t,n.id)}},e.handleTaxChange=function(t,n,r){e.handleSelectChange(t,n,"tax_rate")(r),e.onSubmit(t,n.id)},e.labourColumns=function(t,n){return[{id:"item",width:"3%",className:t9.a.sm,header:"item",type:Are.Text,cell:function(n,r){return Object(a.jsxs)("div",{children:[Object(a.jsx)("a",{href:"#",onDragStart:function(r){return e.onDragStart(r,"cost_".concat(n.id),t.id)},draggable:!0,children:Object(a.jsx)(Yhe,{name:Xf.MenuDrag})})," "]})}},{id:"code",className:t9.a.sm,width:"11%",header:"Code",cell:function(r,o){return Object(a.jsx)(n9,{value:r.gs_code,isDisabled:!n||o,options:e.props.gsCodes,onChange:e.handleGsCodeChange(t.id,r),getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name}})}},{id:"description",width:"30%",header:Object(a.jsx)(Whe,{children:"Description"}),className:t9.a.sm,type:Are.Text,cell:function(r,o){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Qhe,{type:"text",width:"100%",value:r.description,placeholder:"Description",disabled:!n||o,onChange:e.handleInputChange(t.id,r,"description"),onBlur:function(n){return e.handleInputBlur(t.id,r)}}),Object(a.jsx)(rbe,{children:r.errorDesc&&r.id===r.errorDesc.id?r.errorDesc.error:""})]})}},{id:"quantity",width:"7%",header:Object(a.jsx)(Whe,{children:"Qty"}),className:t9.a.xs,type:Are.Text,cell:function(r,o){return Object(a.jsx)(Qhe,{type:"number",width:"100%",value:r.quantity,min:0,placeholder:"Qty",disabled:(n&&!0!==o||"Material"!==r.cost_item_mapping_data.type)&&o,onChange:e.handleInputChange(t.id,r,"quantity",_8),onBlur:function(n){return e.handleInputBlur(t.id,r)}})}},{id:"UnitPrice",width:"10%",header:Object(a.jsx)(Whe,{children:"Unit Ex"}),className:t9.a.sm,type:Are.Text,cell:function(r,o){var i;return Object(a.jsx)(Qhe,{type:"text",width:"100%",min:0,placeholder:"$ 0",disabled:!n||o,value:w8(null===(i=r.unit_cost)||void 0===i?void 0:i.toString()),onChange:e.handleInputChange(t.id,r,"unit_cost",_8),onBlur:function(n){return e.handleInputBlur(t.id,r)}})}},{id:"markup",width:"9%",header:Object(a.jsx)(Whe,{children:"Markup"}),type:Are.Text,className:t9.a.xs,cell:function(r,o){return Object(a.jsx)(Qhe,{value:"".concat(r.markup),type:"text",width:"100%",min:0,placeholder:"Markup",disabled:!n,onChange:e.handleInputChange(t.id,r,"markup",S8),onBlur:function(n){return e.handleInputBlur(t.id,r)}})}},{id:"Tax",width:"15%",header:Object(a.jsx)(Whe,{children:"Tax %"}),className:t9.a.sm,type:Are.Text,cell:function(r,o){return Object(a.jsx)(Khe,{value:r.tax_rate,onChange:function(n){return e.handleTaxChange(t.id,r,n)},placeholder:"Select...",isDisabled:!n,options:e.state.texRatesOption.length>0?e.state.texRatesOption:[],getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name}})}},{id:"amountEx",header:Object(a.jsx)(Whe,{}),className:t9.a.sm,type:Are.Text,cell:function(e,t){return Object(a.jsx)("strong",{children:vm(e.net_total)})}},{id:"po",header:Object(a.jsx)(Whe,{}),className:t9.a.sm,type:Are.Text,cell:function(e){return Object(a.jsx)(a.Fragment,{})}},{id:"Btn",width:"3%",header:Object(a.jsx)(Whe,{}),className:t9.a.sm,type:Are.Text,cell:function(t,r){return Object(a.jsx)(Cx.Consumer,{children:function(o){var i=e.tableMenuItems(o,t,n,r);return Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:i,direction:"right"})}})}}]},e.showTNMEditModals=function(t,n){"Labour"===t?e.setState({assessment_report_costing_item:n,isEditLabourModalOpen:!0,isEditModalOpenEquipment:!1,isEditModalOpenMaterials:!1}):"Equipment"===t?e.setState({assessment_report_costing_item:n,isEditLabourModalOpen:!1,isEditModalOpenEquipment:!0,isEditModalOpenMaterials:!1}):"Material"===t&&e.setState({assessment_report_costing_item:n,isEditLabourModalOpen:!1,isEditModalOpenEquipment:!1,isEditModalOpenMaterials:!0})},e.tableMenuItems=function(t,n,r,a){return[{name:"Edit",disabled:!r||!a,onClick:function(){e.showTNMEditModals(n.cost_item_mapping_data.type,n)}},{name:"Delete",disabled:!r,onClick:function(){var t=Object(lj.a)(sj.a.mark((function t(){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(iw("Confirm","Are you sure you want to delete the item ".concat(n.description,"? This action cannot be undone!")));case 3:t.sent&&(e.props.dispatch(K4(n.assessment_report_costing_stage_id,n.id)),String(n.id).startsWith(S4)||(ZW.costItemDelete(n.assessment_report_id,n.id),setTimeout((function(){e.props.dispatch(J4(n.assessment_report_id)).then((function(){e.props.dispatch(Y4())}))}),500)));case 5:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}()}]},e.showModal=function(t,n){"labour"===n?e.setState({assessment_report_costing_stage_id:t,isModalOpen:!0,isModalOpenEquipment:!1,isModalOpenMaterials:!1}):"equipment"===n?e.setState({assessment_report_costing_stage_id:t,isModalOpen:!1,isModalOpenEquipment:!0,isModalOpenMaterials:!1}):"materials"===n&&e.setState({assessment_report_costing_stage_id:t,isModalOpen:!1,isModalOpenEquipment:!1,isModalOpenMaterials:!0})},e.hideModal=function(t){"labour"===t?e.setState({assessment_report_costing_stage_id:0,isModalOpen:!1}):"equipment"===t?e.setState({assessment_report_costing_stage_id:0,isModalOpenEquipment:!1}):"materials"===t?e.setState({assessment_report_costing_stage_id:0,isModalOpenMaterials:!1}):"editMaterials"===t?e.setState({assessment_report_costing_item:void 0,isEditModalOpenMaterials:!1}):"editEquipment"===t?e.setState({assessment_report_costing_item:void 0,isEditModalOpenEquipment:!1}):"editLabour"===t&&e.setState({assessment_report_costing_item:void 0,isEditLabourModalOpen:!1})},e.onSubmitLabourCalculation=function(){},e.handleUpdatedData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.reportId,o=r.dispatch,i=[],n.length>0&&n.map((function(e,t){i.push({assessment_report_cost_item_id:e.id,position:t})})),i.length>0)try{ZW.costItemPositionUpdate(a,i).then((function(e){o(J4(a)).then((function(){o(Y4())}))}))}catch(c){Oj(uj.Danger,"Server Error")}case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.updateItem=function(t,n,r){return e.props.dispatch(H4(t,n,r,!0))},e.createItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",e.props.dispatch(W4(n,r)));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleSelectChange=function(t,n,r){return function(a){e.updateItem(n.id,t,Object(k.a)({},r,a))}},e.handleInputChange=function(t,n,r,a){var o=n.id;return function(n){var i=a?a(n.target.value):n.target.value;e.updateItem(o,t,Object(k.a)({},r,i))}},e.handleInputBlur=function(t,n){n.dirty&&e.onSubmit(t,n.id)},e.onSubmit=function(t,n){var r,a,o=e.props,i=o.costListRes,c=o.reportId,s=o.dispatch,l=null===(r=i.data)||void 0===r||null===(a=r.costStagesListRes)||void 0===a?void 0:a.find((function(e){return e.id===t}));if(l){var u,d=null===(u=l.cost_items)||void 0===u?void 0:u.find((function(e){return e.id===n}));d.position=l.cost_items.indexOf(d);var p=abe(d.gs_code)||abe(d.description)||abe(d.unit_cost)||abe(d.quantity)||abe(d.tax_rate);if(p&&String(d.id).startsWith(S4))return;return p?Promise.reject("Validation errors"):(String(d.id).startsWith(S4)?XG.costItemCreate(c,Npe(d)):XG.costItemListUpdate(c,d.id,Npe(d))).then((function(e){s(J4(c)).then((function(){s(Y4())}))}))}},e.renderStages=function(){var t=e.props,n=t.costListRes,r=t.reportId,o=t.isEditable;return n.data&&n.data.costStagesListRes.map((function(t){return Object(a.jsx)(nbe,{children:Object(a.jsx)(rse,{className:"table table-drag",children:Object(a.jsx)(_de,{dataSource:t,columnsDefinition:e.labourColumns(t,o),useCustomStyle:!0,updatedData:e.handleUpdatedData,reportId:r,onCreate:e.createItem,onChange:e.updateItem,showModal:e.showModal,hideModal:e.hideModal,isEditable:o})})})}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getTexRates()}},{key:"componentDidUpdate",value:function(e){e.costListRes,this.props.costListRes}},{key:"render",value:function(){var e=this,t=this.state,n=t.isModalOpen,r=t.isModalOpenEquipment,o=t.isModalOpenMaterials,i=this.props.costListRes;return Object(a.jsxs)("div",{children:[i.data.isStagesListLoad&&Object(a.jsx)(Nv,{size:40,color:_.white}),this.renderStages(),Object(a.jsxs)("div",{className:"d-flex flex-row  min-100 mb-5",style:{justifyContent:"space-between"},children:[Object(a.jsx)("div",{style:{width:"150px"}}),Object(a.jsx)(Zhe,{children:Object(a.jsxs)(Xhe,{children:[Object(a.jsxs)($he,{children:[Object(a.jsx)("span",{children:"Sub-total"}),Object(a.jsx)("span",{children:vm(i.data.sub_total||0)})]}),Object(a.jsxs)(ebe,{children:[Object(a.jsx)("span",{children:"Tax"}),Object(a.jsx)("span",{children:vm(i.data.taxes||0)})]}),Object(a.jsx)(tbe,{}),Object(a.jsxs)(ebe,{children:[Object(a.jsx)("span",{children:"Total"}),Object(a.jsx)(Hhe,{children:vm(i.data.total_amount||0)})]})]})})]}),Object(a.jsx)(Gde,{isOpen:n,onClose:function(){return e.hideModal("labour")},onSubmit:this.onSubmitLabourCalculation,title:"Quick Labour Calculation",isEdit:!1,reportId:this.props.reportId,costingTableId:this.state.assessment_report_costing_stage_id}),Object(a.jsx)(lpe,{isOpen:r,onClose:function(){return e.hideModal("equipment")},onSubmit:this.onSubmitLabourCalculation,title:"Add Equipment",isEdit:!1,jobId:this.props.jobId,reportId:this.props.reportId,costingTableId:this.state.assessment_report_costing_stage_id}),Object(a.jsx)(Cpe,{isOpen:o,onClose:function(){return e.hideModal("materials")},onSubmit:this.onSubmitLabourCalculation,title:"Add Materials",isEdit:!1,jobId:this.props.jobId,reportId:this.props.reportId,costingTableId:this.state.assessment_report_costing_stage_id}),Object(a.jsx)(Hpe,{isOpen:this.state.isEditModalOpenMaterials,onClose:function(){return e.hideModal("editMaterials")},onSubmit:function(){},title:"Update Materials",item:this.state.assessment_report_costing_item}),Object(a.jsx)(dhe,{isOpen:this.state.isEditModalOpenEquipment,onClose:function(){return e.hideModal("editEquipment")},onSubmit:function(){},title:"Update Equipment",item:this.state.assessment_report_costing_item}),Object(a.jsx)(The,{isOpen:this.state.isEditLabourModalOpen,onClose:function(){return e.hideModal("editLabour")},onSubmit:function(){},title:"Update Labour",item:this.state.assessment_report_costing_item})]})}}]),n}(p.PureComponent),ibe=Object(b.b)((function(e){return{currentJobLabours:e.currentJobUsageAndActuals.labours,selectedLabourIds:e.currentJobUsageAndActuals.selectedLabourIds,costListRes:e.document,gsCodes:e.finance.gsCodes}}))(obe);function cbe(){var e=Object(f.a)(["\n  margin-right: 10px;\n  margin-left: 10px;\n  cursor: pointer;\n\n  :hover path,\n  :hover line,\n  :hover circle {\n    stroke: ",";\n  }\n"]);return cbe=function(){return e},e}var sbe=y.default.div(cbe(),_.blue4),lbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.name,n=e.onClick,r=e.size,o=e["data-tip"],i=e["data-for"];return Object(a.jsx)(sbe,{onClick:n,"data-for":i,"data-tip":o,children:Object(a.jsx)(cm,{name:t,size:r})})}}]),n}(p.PureComponent);function ube(){var e=Object(f.a)(["\n  margin-left: 10px;\n  font-size: ",";\n  line-height: 24px;\n  height: 24px;\n  margin-right: 10px;\n  align-self: center;\n"]);return ube=function(){return e},e}function dbe(){var e=Object(f.a)(["\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n\n  display: flex;\n  align-items: center;\n"]);return dbe=function(){return e},e}function pbe(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n  align-items: center;\n"]);return pbe=function(){return e},e}var hbe=y.default.div(pbe()),bbe=Object(y.default)(gv(["color"])("div"))(dbe(),lm.medium,sm.medium,(function(e){return e.color?e.color:_.yellow})),fbe=Object(y.default)(rN)(ube(),sm.normal),mbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={activeStatus:"",statusButtonDisabled:!1,draft:!1,pending_client_approval:!1,client_approved:!1,client_cancelled:!1,cancelled:!1,total:"",color:"",showApproveModal:!1},e.getLatestStatus=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.match.params,a=r.reportId,o=r.id,i=n.dispatch,t.prev=1,t.next=4,ZW.assessmentReportsGetStatusAndTotal(parseInt(o),parseInt(a));case 4:c=t.sent,i(Q4(c.status)),e.setState({activeStatus:c.status,total:c.total},(function(){switch(e.state.activeStatus){case"draft":e.setState({draft:!0,pending_client_approval:!1,client_approved:!1,client_cancelled:!0,cancelled:!1,color:_.yellow});break;case"pending_client_approval":e.setState({draft:!0,pending_client_approval:!0,client_approved:!1,client_cancelled:!1,cancelled:!1,color:_.yellow});break;case"client_approved":e.setState({draft:!0,pending_client_approval:!0,client_approved:!0,client_cancelled:!1,cancelled:!1,color:_.blue3});break;case"client_cancelled":e.setState({draft:!1,pending_client_approval:!0,client_approved:!0,client_cancelled:!0,cancelled:!1,color:_.gray3});break;case"cancelled":e.setState({draft:!1,pending_client_approval:!0,client_approved:!0,client_cancelled:!0,cancelled:!0,color:_.gray3})}})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[1,9]])}))),e.getStageUniqueName=function(t){var n,r,a=e.props.stage,o="".concat(t," 1");if((null===(n=a.data)||void 0===n?void 0:n.costStagesListRes)&&0===(null===(r=a.data)||void 0===r?void 0:r.costStagesListRes.length))return o;for(var i=0;i<=(null===(c=a.data)||void 0===c?void 0:c.costStagesListRes.length);i++){var c,s;if(!j.a.find(null===(s=a.data)||void 0===s?void 0:s.costStagesListRes,{name:"".concat(t," ").concat(i+1)})){o="".concat(t," ").concat(i+1);break}}return o},e.onClickAddStage=function(){var t=e.props,n=t.stage,r=t.match.params,a=r.reportId;r.id;if(t.isEditable){var o,i=j.a.maxBy(null===(o=n.data)||void 0===o?void 0:o.costStagesListRes,"position"),c=(null===i||void 0===i?void 0:i.position)?i.position+1:1,s={name:e.getStageUniqueName("Stage"),position:c};XG.createStage(a,s).then((function(t){e.props.dispatch(J4(parseInt(a))).then((function(){e.props.dispatch(Y4())}))}))}},e.allowApprove=function(){var t=e.props,n=t.user,r=t.stage;return+n.me.assessment_report_approve_limit>=+(r.data.total_amount||0)},e.showApproveModal=function(){e.setState({showApproveModal:!0})},e.hideApproveModal=function(){e.setState({showApproveModal:!1})},e.handleApprovalandApproveRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.dispatch,o=r.match,!e.allowApprove()){t.next=8;break}return t.next=4,a(iw("Confirm","Are you sure you want to approve Quotation #".concat(o.params.reportId,"? This action cannot be undone!")));case 4:if(t.sent)try{ZW.assessmentReportStatusUpdate(parseInt(o.params.id),parseInt(o.params.reportId),{status:n}).then((function(){e.getLatestStatus(),a(J4(o.params.reportId)).then((function(){a(Y4())})),Oj(uj.Success,"Quotation approved successfully")}))}catch(i){Oj(uj.Danger,"Quotation can't be approved")}t.next=9;break;case 8:e.showApproveModal();case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleChangeStatus=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,a=r.id,o=r.reportId,t.prev=1,i={status:n},t.next=5,ZW.assessmentReportStatusUpdate(parseInt(a),parseInt(o),i);case 5:e.getLatestStatus(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.MainMenuItems=function(t,n){var r=e.props,a=r.match.params,o=a.id,i=a.reportId,c=r.isEditable,s=r.isInvoiced,l=e.state,u=l.draft,d=l.pending_client_approval,p=l.client_approved,h=l.client_cancelled,b=l.cancelled;return[{name:"Edit",disabled:!c,onClick:function(){e.props.handleReportName(!1)}},{name:"Draft",onClick:function(){e.handleChangeStatus("draft")},disabled:u||!(!c||b||h)},{name:"Pending Client Approval",onClick:function(){e.handleChangeStatus("pending_client_approval")},disabled:d||!c},{name:e.allowApprove()?"Approve Quote":"Request Approval",onClick:function(){e.handleApprovalandApproveRequest("client_approved")},disabled:p||!c},{name:"Client Declined",onClick:function(){e.handleChangeStatus("client_cancelled")},disabled:h||!c},{name:"Cancelled",onClick:function(){e.handleChangeStatus("cancelled")},disabled:b||s||!(!c||h)},{type:"divider"},{name:"Duplicate to new...",onClick:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ZW.assessmentReportDuplicate(parseInt(o),parseInt(i));case 3:Oj(uj.Success,"Duplicate to new report created..."),e.next=9;break;case 6:e.prev=6,e.t0=e.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()},{type:"divider"},{name:"Print",onClick:function(){window.print()}},{type:"divider"},{name:"Delete",disabled:!c,onClick:function(){var t=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.assessmentReportDelete(parseInt(o),parseInt(i));case 3:e.props.history.push("/usage-and-actuals/".concat(o,"/report")),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(){return t.apply(this,arguments)}}()}]},e.getApprovalUser=function(){var t,n,r=e.props,a=r.approvers,o=r.stage.data.total_amount||0;return(null===(t=a.data)||void 0===t||null===(n=t.data)||void 0===n?void 0:n.filter((function(e){return e.assessment_report_approve_limit>=o})))||[]},e.sendApproveRequest=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match,t.next=3,XG.sendApproveRequest(r.params.reportId,[n.user.id]);case 3:e.hideApproveModal();case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.approvers,n=e.match;this.getLatestStatus(),t.fetch(n.params.reportId)}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=(t.job,t.match.params.id),r=t.stage,o=t.isEditable,i=t.isInvoiced,c=t.onClickCreateInvoice,s=this.state,l=s.client_approved,u=s.client_cancelled;return Object(a.jsx)(Cx.Consumer,{children:function(t){var s=t.has(vx.JOBS_USAGE_VIEW),d=t.has(vx.ASSESSMENT_REPORTS_MANAGE);return s?Object(a.jsx)("div",{children:Object(a.jsxs)(hbe,{children:[Object(a.jsxs)(bbe,{color:e.state.color,children:["TOTAL ",vm(r.data.total_amount||0)]}),Object(a.jsx)(fbe,{tag:{name:e.state.activeStatus.toUpperCase(),color:e.state.color}}),l&&!u&&!i&&Object(a.jsx)(Xg,{type:"button",className:"btn mr-2",onClick:c,children:"Create Invoice"}),Object(a.jsx)($ce,{jobId:parseInt(n)}),d&&Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)(lbe,{name:Xf.Add,onClick:e.onClickAddStage}),Object(a.jsx)(nw,{iconName:Xf.MenuVertical,items:e.MainMenuItems(t,o),direction:"right"})]})]})}):null}})}},{key:"render",value:function(){var e=this.props,t=e.customHeaderTitle,n=e.jobTitle,r=e.match.params,o=r.reportId,i=(r.id,this.state.showApproveModal);return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(DG,{customHeaderTitle:t,siteAddress:n,additionalHeaderLayout:this.renderAdditionalHeaderLayout(),reportId:o}),i&&Object(a.jsx)(Tee,{isOpen:i,approvers:this.getApprovalUser(),onSubmit:this.sendApproveRequest,onClose:this.hideApproveModal})]})}}]),n}(p.PureComponent),jbe=Object(sg.compose)(O.g,oj({approvers:{fetch:XG.getApproverList,initialData:{data:[]}}}),Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters,stage:e.document,user:e.user}})))(mbe);function vbe(){var e=Object(f.a)(["\n  padding: 10px;\n  cursor: pointer;\n"]);return vbe=function(){return e},e}function Obe(){var e=Object(f.a)(["\n  flex: 1;\n  align-items: flex-end;\n  justify-content: flex-end;\n  display: flex;\n"]);return Obe=function(){return e},e}function gbe(){var e=Object(f.a)(["\n  flex: 3;\n  align-items: flex-start;\n  justify-content: flex-start;\n  display: flex;\n"]);return gbe=function(){return e},e}function xbe(){var e=Object(f.a)(["\n  flex: 1;\n  display: flex;\n  border: 1px solid ",";\n  border-collapse: collapse;\n  margin-top: -1px;\n  background-color: ",";\n  cursor: pointer;\n"]);return xbe=function(){return e},e}function ybe(){var e=Object(f.a)(["\n  flex: 1;\n  display: flex;\n  border: 1px solid ",";\n  border-collapse: collapse;\n  margin-top: -1px;\n  cursor: pointer;\n"]);return ybe=function(){return e},e}function _be(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return _be=function(){return e},e}var wbe=y.default.div(_be()),Sbe=y.default.div(ybe(),_.gray2),kbe=y.default.div(xbe(),_.gray2,_.blue0),Cbe=y.default.div(gbe()),Nbe=y.default.div(Obe()),Ebe=y.default.span(vbe()),Abe=[{id:0,info:"Marie Claire, 121 Curlewis Street, Melbourne East VIC",status:"#1001567-MEL"},{id:1,info:"MIMA, 61/127 Collins Street, Melbourne VIC",status:"#1001551-MEL"},{id:2,info:"Bendigo Bakery, 27 Main Road, Bendigo VIC",status:"#1001541-BEN"}],Ibe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,selectedRowId:""},e.searchByName=function(){},e.rowSelected=function(t){e.setState({selectedRowId:t.id})},e.renderBody=function(){var t=e.state.loading;return Object(a.jsxs)("div",{children:[Object(a.jsx)(aC,{searchIcon:!0,loading:t,placeholder:"Search...",onSearchValueChange:e.searchByName,mode:"typeGray"}),Object(a.jsx)(wbe,{children:Abe.map((function(t,n){return e.state.selectedRowId===t.id?Object(a.jsxs)(kbe,{onClick:function(){return e.rowSelected(t)},children:[Object(a.jsx)(Cbe,{children:Object(a.jsx)(Ebe,{children:t.info})}),Object(a.jsx)(Nbe,{children:Object(a.jsx)(Ebe,{children:t.status})})]},n):Object(a.jsxs)(Sbe,{onClick:function(){return e.rowSelected(t)},children:[Object(a.jsx)(Cbe,{children:Object(a.jsx)(Ebe,{children:t.info})}),Object(a.jsx)(Nbe,{children:Object(a.jsx)(Ebe,{children:t.status})})]},n)}))})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",form:"CopyToClip",children:"OK"})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,body:this.renderBody(),title:"Copy Report to Job",footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function Tbe(){var e=Object(f.a)(["\n  padding: 6px 10px 6px 10px;\n  flex: 1;\n"]);return Tbe=function(){return e},e}function Rbe(){var e=Object(f.a)(["\n  padding: 6px 10px 6px 10px;\n  background-color: white;\n  border-radius: 4px;\n  border: 1px solid ",";\n"]);return Rbe=function(){return e},e}function Dbe(){var e=Object(f.a)(["\n  flex: 1;\n"]);return Dbe=function(){return e},e}function Mbe(){var e=Object(f.a)(["\n  flex: 6;\n"]);return Mbe=function(){return e},e}function Lbe(){var e=Object(f.a)(["\n  margin: 20px 0px 0 0;\n  display: flex;\n"]);return Lbe=function(){return e},e}var Pbe,Fbe=y.default.div(Lbe()),Ube=y.default.div(Mbe()),Bbe=y.default.div(Dbe()),Vbe=y.default.button(Rbe(),_.gray2),Jbe=y.default.span(Tbe()),qbe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,isCopied:!1,link:"You can copy this text"},e.onLocalClick=function(t){t.preventDefault(),Pbe.select();var n=Pbe.value;n=document.execCommand("copy"),e.setState({isCopied:n})},e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:"Your link has been copied to the clipboard. Use this link to send the report to customers or insurers and allow them to approve the costings."})}),Object(a.jsxs)(Fbe,{children:[Object(a.jsx)(Ube,{children:Object(a.jsx)("input",{style:{width:"97%",padding:"6px 10px 6px 10px",borderRadius:"4px",border:"1px solid ".concat(_.gray2)},type:"text",ref:function(e){return Pbe=e},value:e.state.link,readOnly:!0})}),Object(a.jsx)(Bbe,{children:Object(a.jsx)(Vbe,{onClick:function(t){return e.onLocalClick(t)},children:"Copy"})}),Object(a.jsx)(Jbe,{children:e.state.isCopied?"Copied!":""})]})]})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",form:"CopyToClip",onClick:e.props.onClose,children:"OK"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;setTimeout((function(){!0===e.props.isOpen&&(Pbe.select(),document.execCommand("copy"))}),1e3)}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,body:this.renderBody(),title:"Get Link",footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function zbe(){var e=Object(f.a)(["\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545;\n  display: block;\n"]);return zbe=function(){return e},e}function Gbe(){var e=Object(f.a)(["\n  width: 350px;\n  border: 1px solid lightgrey;\n  border-radius: 4px;\n  height: 40px;\n  padding: 10px;\n"]);return Gbe=function(){return e},e}function Wbe(){var e=Object(f.a)(["\n  width: 30%;\n  margin: 0px 0px 0px 20px;\n"]);return Wbe=function(){return e},e}function Hbe(){var e=Object(f.a)(["\n  margin: 20px 0px 15px 20px;\n  color: ",";\n"]);return Hbe=function(){return e},e}function Ybe(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return Ybe=function(){return e},e}var Qbe=y.default.div(Ybe()),Kbe=y.default.h5(Hbe(),_.gray4),Zbe=y.default.div(Wbe()),Xbe=y.default.input(Gbe()),$be=y.default.span(zbe()),efe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hideRates:!0,hideMultiselect:!1,showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1,reportName:"",errorReportName:"",showCopyToClipModal:!1,showCopyToLinkModal:!1,costListItems:[],assessmentReport:{},areasSummary:[],disableReportName:!0},e.getAreas=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,t.prev=1,t.next=4,ZW.getAreas(parseInt(n));case 4:(r=t.sent)&&e.setState({areasSummary:r}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Oj(uj.Danger,"This status can't be applied");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.handleReportName=function(t){e.setState(Object(k.a)({},t.target.name,t.target.value),(function(){e.setState({errorReportName:""})}))},e.handleModalForCopyToJob=function(t){!0===t&&e.setState({showCopyToClipModal:!0})},e.onCloseModal=function(){e.setState({showCopyToClipModal:!1})},e.handleCopyToLink=function(t){!0===t&&e.setState({showCopyToLinkModal:!0})},e.onCloseCopyToLinkModal=function(){e.setState({showCopyToLinkModal:!1})},e.onBlurHandleReport=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target,a=r.value,o=r.name,i=e.props.match.params,c=i.id,s=i.reportId,e.setState(Object(k.a)({},o,a)),l=e.state,u=l.reportName,d=l.assessmentReport,""!==u&&void 0!==u&&null!==u){t.next=8;break}e.setState({errorReportName:"This field is required"}),t.next=20;break;case 8:if(e.setState({errorReportName:""}),!c||!s){t.next=20;break}return t.prev=10,p={subheading:d.subheading,heading:u},t.next=14,ZW.assessmentReportHeading(parseInt(c),parseInt(s),p);case 14:e.setState({disableReportName:!0}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(10),Oj(uj.Danger,"This status can't be applied");case 20:case"end":return t.stop()}}),t,null,[[10,17]])})));return function(e){return t.apply(this,arguments)}}(),e.reportNameStateChange=function(t){e.setState({disableReportName:t})},e.onClickCreateInvoice=function(){var t,n,r,a=e.props,o=a.costListRes.data,i=a.job,c=o.costStagesListRes||[],s=[];c.map((function(e){s.push({description:e.name,quantity:1,unit_cost:e.sub_total_without_markup,total_amount:e.sub_total_without_markup,linked_items_category:K9.STAGES,linked_items:[{id:e.id}]})})),e.props.history.push({pathname:"/finance/invoices/create",state:{job:{id:null===i||void 0===i||null===(t=i.data)||void 0===t?void 0:t.id,assigned_location:null===i||void 0===i||null===(n=i.data)||void 0===n?void 0:n.assigned_location,invoice_to_contact:null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.invoice_to_contact},stages:s}})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.match.params,r=n.id,a=n.reportId;t.job;this.props.dispatch(BD(r)),this.getAreas(),this.props.dispatch(J4(parseInt(a))).then((function(t){e.props.dispatch(Y4())})),this.props.dispatch(z4(!0)),this.props.dispatch(q4(parseInt(r),parseInt(a))),this.props.dispatch(z4(!1))}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.match!==this.props.match){var n=this.props.match.params,r=n.id,a=n.reportId;this.props.dispatch(BD(r)),this.props.dispatch(J4(parseInt(a))).then((function(e){t.props.dispatch(Y4())}))}if(e.arReport!==this.props.arReport&&this.props.arReport.data.arReport){var o=this.props.arReport.data;this.setState({assessmentReport:o.arReport},(function(){var e=t.state.assessmentReport;null===e.heading?t.setState({reportName:"Assessment Report"}):t.setState({reportName:e.heading})}))}}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){var e=this,t=this.props.match.params,n=t.id,r=t.reportId;return[{path:"/usage-and-actuals/".concat(n,"/buildCosting/").concat(r),label:"Build Costings",icon:Xf.CashFileIcon,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildCosting/").concat(r)),type:"costing"},{path:"/usage-and-actuals/".concat(n,"/buildDocument/").concat(r),label:"Build Document",icon:Xf.FileEdit,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildDocument/").concat(r)),type:"costing"}].map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.job,o=n.match.params,i=o.id,c=o.reportId,s=n.costListRes,l=r.data,u=l?zy.getJobAddress(l):"",d=l&&zy.getJobName(l);d&&(u="".concat(u," | ").concat(d));var p,h,b,f=this.state,m=f.showCopyToClipModal,j=f.showCopyToLinkModal,v=(null===s||void 0===s||null===(e=s.data)||void 0===e?void 0:e.costStagesListRes)&&s.data.costStagesListRes[0]&&s.data.costStagesListRes[0].invoice_item_id>0;v&&(u="".concat(u," | Invoice: #").concat((null===s||void 0===s||null===(p=s.data)||void 0===p||null===(h=p.costStagesListRes[0])||void 0===h||null===(b=h.invoice_item)||void 0===b?void 0:b.invoice_id)||""));return Object(a.jsxs)(a.Fragment,{children:[l&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs",children:"Jobs"}),l&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(l.id),children:d}),l&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(l.id),children:"Quotations"}),l&&Object(a.jsxs)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(l.id,"/buildCosting/").concat(c),children:["Build Costings #",c]}),Object(a.jsx)(Cx.Consumer,{children:function(e){var n=ZW.isEditable(r,s.data.latest_status,e);return Object(a.jsxs)(Qbe,{className:"d-flex flex-column",children:[!0===t.props.isArLoad.data.isArLoad||!0===t.props.isCostListLoad.data.isCostListLoad&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(jbe,{jobTitle:u,modalForCopyToJOB:t.handleModalForCopyToJob,modalForCopyLink:t.handleCopyToLink,handleReportName:t.reportNameStateChange,isEditable:n,isInvoiced:v,onClickCreateInvoice:t.onClickCreateInvoice}),Object(a.jsxs)(UC,{className:"h-100 d-flex flex-rovaluew min-100",children:[Object(a.jsxs)(nj,{children:[t.getMenuItems().map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)})),Object(a.jsx)(sde,{financials:t.state.areasSummary}),Object(a.jsx)(Ode,{financials:t.state.areasSummary})]}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(Kbe,{children:"Name"}),Object(a.jsxs)(Zbe,{children:[Object(a.jsx)(Xbe,{type:"text",name:"reportName",value:t.state.reportName||"",onChange:t.handleReportName,onBlur:t.onBlurHandleReport,disabled:t.state.disableReportName||!n}),Object(a.jsx)($be,{children:t.state.errorReportName})]}),Object(a.jsx)("div",{className:"mb-auto w-100",style:{padding:"20px"},children:Object(a.jsx)(ibe,{jobId:parseInt(i),isEditable:n,tableType:"test",tableId:1,costItemList:[],reportId:parseInt(c)},1)})]})]}),m&&Object(a.jsx)(Ibe,{onClose:t.onCloseModal,isOpen:m}),j&&Object(a.jsx)(qbe,{onClose:t.onCloseCopyToLinkModal,isOpen:j})]})}})]})}}]),n}(p.PureComponent),tfe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters,isCostListLoad:e.document,costListRes:e.document,isArLoad:e.document,arReport:e.document}})))(efe),nfe=n(150);function rfe(){var e=Object(f.a)(["\n  ","\n  color: ",";\n  font-weight: ",";\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n"]);return rfe=function(){return e},e}function afe(){var e=Object(f.a)(["\n  line-height: 0;\n  background: ",";\n  color: ",";\n  font-weight: normal;\n  margin-left: 12px;\n  margin-right: 12px;\n  margin-bottom: 10px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  path,\n  circle {\n    stroke: ",";\n    fill: transparent;\n  }\n  :hover path,\n  :hover circle {\n    stroke: ",";\n  }\n  :hover {\n    color: ",";\n  }\n"]);return afe=function(){return e},e}function ofe(){var e=Object(f.a)(["\n  fill: transparent;\n  min-width: 20px;\n"]);return ofe=function(){return e},e}function ife(){var e=Object(f.a)(["\n  padding-left: ","px;\n  line-height: 1rem;\n"]);return ife=function(){return e},e}var cfe=y.default.div(ife(),(function(e){return e.havePadding?26:0})),sfe=Object(y.default)(cm)(ofe()),lfe=Object(y.css)(afe(),_.white,_.black0,_.black0,_.blue4,_.blue4),ufe=y.default.div(rfe(),lfe,_.black0,lm.normal,_.black0),dfe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.item,t=e.icon,n=e.label,r=e.id,o=t||0===t?Object(a.jsx)(sfe,{name:t}):null;return Object(a.jsx)(nfe.c,{droppableId:"ITEMS",isDropDisabled:!0,children:function(e,i){return Object(a.jsxs)("div",Object(c.a)(Object(c.a)({ref:e.innerRef},e.droppableProps),{},{children:[Object(a.jsx)(nfe.b,{draggableId:r.toString(),index:parseInt(r),children:function(e,i){return Object(a.jsx)("div",Object(c.a)(Object(c.a)(Object(c.a)({ref:e.innerRef},e.draggableProps),e.dragHandleProps),{},{children:Object(a.jsx)(ufe,{id:r,children:Object(a.jsx)("div",{style:{padding:"13px 26px"},className:"nav-link",children:Object(a.jsxs)("div",{className:"d-flex flex-row align-items-center",children:[o,Object(a.jsx)(p.Fragment,{children:Object(a.jsx)(cfe,{havePadding:!!t||0===t,children:n})})]})})})}))}},r),Object(a.jsx)("div",{style:{display:"none"},children:e.placeholder})]}))}})}}]),n}(p.Component),pfe=n(210);function hfe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return hfe=function(){return e},e}function bfe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return bfe=function(){return e},e}function ffe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return ffe=function(){return e},e}function mfe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return mfe=function(){return e},e}var jfe=y.default.h4(mfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),vfe=y.default.h4(ffe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ofe=y.default.h4(bfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),gfe=y.default.h4(hfe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),xfe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(Ofe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(vfe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(gfe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(jfe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(jfe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),yfe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(xfe),_fe=n(103);function wfe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return wfe=function(){return e},e}function Sfe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return Sfe=function(){return e},e}function kfe(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return kfe=function(){return e},e}function Cfe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Cfe=function(){return e},e}function Nfe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Nfe=function(){return e},e}function Efe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Efe=function(){return e},e}function Afe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Afe=function(){return e},e}function Ife(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Ife=function(){return e},e}var Tfe=y.default.input(Ife()),Rfe=Object(y.default)(m6.a)(Afe()),Dfe=y.default.div(Efe()),Mfe=y.default.div(Nfe()),Lfe=y.default.div(Cfe()),Pfe=y.default.div(kfe(),(function(e){return e.color})),Ffe=y.default.div(Sfe()),Ufe=y.default.input(wfe()),Bfe=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],Vfe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0},e.handleHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(D4(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleTextArea=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({description:r},(function(){e.props.dispatch(F4(e.state.description))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:o,text:r},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(R4(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(Tfe,{value:e.state.heading.headingText,onChange:e.handleHeading}),Object(a.jsxs)(Dfe,{children:[Object(a.jsx)(Rfe,{options:Bfe,onChange:e.handleFontStyle,defaultValue:Bfe[0]}),Object(a.jsx)(Ufe,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(Ffe,{onClick:e.handleClick,children:Object(a.jsx)(Pfe,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(Mfe,{children:[Object(a.jsx)(Lfe,{onClick:e.handleClose}),Object(a.jsx)(_fe.a,{color:e.state.color,onChange:e.handleChange})]}):null]})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(T4(a)),t.props.dispatch(D4(o)),t.props.dispatch(R4(i))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,closeCaption:"Close",title:"Heading:"+this.state.heading.headingText||!1,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Jfe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document}})))(Vfe),qfe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{}},e.onMouseEnter=function(){e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;e.details!==t&&this.setState({details:t})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{className:"hover-content",style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(yfe,{id:t,type:n,details:this.state.details})})})})}),Object(a.jsx)(Jfe,{id:t,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),zfe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(qfe);function Gfe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return Gfe=function(){return e},e}function Wfe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return Wfe=function(){return e},e}function Hfe(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return Hfe=function(){return e},e}function Yfe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Yfe=function(){return e},e}function Qfe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Qfe=function(){return e},e}function Kfe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Kfe=function(){return e},e}function Zfe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Zfe=function(){return e},e}function Xfe(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Xfe=function(){return e},e}var $fe=y.default.input(Xfe()),eme=Object(y.default)(m6.a)(Zfe()),tme=y.default.div(Kfe()),nme=y.default.div(Qfe()),rme=y.default.div(Yfe()),ame=y.default.div(Hfe(),(function(e){return e.color})),ome=y.default.div(Wfe()),ime=y.default.input(Gfe()),cme=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],sme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0},e.handleHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(D4(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleTextArea=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({description:r},(function(){e.props.dispatch(F4(e.state.description))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:o,text:r},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(R4(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)($fe,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(tme,{children:[Object(a.jsx)(eme,{options:cme,onChange:e.handleFontStyle,defaultValue:cme[0]}),Object(a.jsx)(ime,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(ome,{onClick:e.handleClick,children:Object(a.jsx)(ame,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(nme,{children:[Object(a.jsx)(rme,{onClick:e.handleClose}),Object(a.jsx)(_fe.a,{color:e.state.color,onChange:e.handleChange})]}):null]})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(T4(a)),t.props.dispatch(D4(o)),t.props.dispatch(R4(i))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:"SubHeading:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),lme=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document}})))(sme);function ume(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return ume=function(){return e},e}function dme(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return dme=function(){return e},e}function pme(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return pme=function(){return e},e}function hme(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return hme=function(){return e},e}var bme=y.default.h4(hme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),fme=y.default.h4(pme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),mme=y.default.h4(dme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),jme=y.default.h4(ume(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),vme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==a&&this.props.id===a.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==n&&this.props.id===n.id&&this.setState({fontStyleData:n}),e.text.data.heading!==r&&this.props.id===r.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(mme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(fme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(jme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(bme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(bme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),Ome=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(vme),gme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;e.details!==t&&this.setState({details:t})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(Ome,{id:t,type:n,details:this.state.details})})})})}),Object(a.jsx)(lme,{id:t,isOpen:this.props.showModal,title:"SubHeading: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),xme=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(gme);function yme(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return yme=function(){return e},e}function _me(){var e=Object(f.a)(["\n  display: block;\n  width: 100%;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.428571429;\n  color: #2a3b47;\n  background-color: #fff;\n  background-image: none;\n  border: 1px solid #ccc;\n  border-radius: 3px;\n  -webkit-box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  box-shadow: inset 0 1px 1px rgba(0, 0, 0, 0.075);\n  -webkit-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n  -o-transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n  transition: border-color ease-in-out 0.15s, box-shadow ease-in-out 0.15s;\n"]);return _me=function(){return e},e}function wme(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return wme=function(){return e},e}function Sme(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return Sme=function(){return e},e}function kme(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return kme=function(){return e},e}function Cme(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Cme=function(){return e},e}function Nme(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Nme=function(){return e},e}function Eme(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Eme=function(){return e},e}function Ame(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Ame=function(){return e},e}function Ime(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Ime=function(){return e},e}var Tme=y.default.input(Ime()),Rme=Object(y.default)(m6.a)(Ame()),Dme=y.default.div(Eme()),Mme=y.default.div(Nme()),Lme=y.default.div(Cme()),Pme=y.default.div(kme(),(function(e){return e.color})),Fme=y.default.div(Sme()),Ume=y.default.input(wme()),Bme=y.default.textarea(_me()),Vme=y.default.div(yme()),Jme=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],qme=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0},e.handleHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(D4(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:e.state.description},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleTextArea=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,a=e.props.details,e.setState({description:r},(function(){var t={description:e.state.description,id:a.data.id};e.props.dispatch(F4(t))}));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurDescription=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,a=e.props.details,e.setState({description:r},(function(){var t={description:e.state.description,id:a.data.id};e.props.dispatch(F4(t))})),o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:o,text:r},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(R4(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:e.state.description},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){var t;return Object(a.jsxs)("div",{children:[Object(a.jsx)(Tme,{placeholder:"Enter heading here...",value:null===(t=e.state.heading)||void 0===t?void 0:t.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(Dme,{children:[Object(a.jsx)(Rme,{options:Jme,onChange:e.handleFontStyle,defaultValue:Jme[0]}),Object(a.jsx)(Ume,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(Fme,{onClick:e.handleClick,children:Object(a.jsx)(Pme,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(Mme,{children:[Object(a.jsx)(Lme,{onClick:e.handleClose}),Object(a.jsx)(_fe.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsx)(Vme,{children:Object(a.jsx)(Bme,{value:e.state.description,onChange:e.handleTextArea,onBlur:e.handleOnBlurDescription,placeholder:"Enter your text here...",rows:10})})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id},c={description:n.data.text,id:n.data.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style},description:n.data.text},(function(){t.props.dispatch(T4(a)),t.props.dispatch(D4(o)),t.props.dispatch(R4(i)),t.props.dispatch(F4(c))}))}}},{key:"render",value:function(){var e,t=this.props,n=t.isOpen,r=t.onClose;return Object(a.jsx)(qO,{isOpen:n,children:Object(a.jsx)(cg,{onClose:r,closeCaption:"Close",title:"Text:"+((null===(e=this.state.heading)||void 0===e?void 0:e.headingText)||"Heading here..."),body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),zme=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document}})))(qme);function Gme(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Gme=function(){return e},e}function Wme(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return Wme=function(){return e},e}function Hme(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Hme=function(){return e},e}function Yme(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return Yme=function(){return e},e}var Qme=y.default.h4(Yme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Kme=y.default.h4(Hme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Zme=y.default.h4(Wme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Xme=y.default.h4(Gme(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),$me=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(Zme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(Kme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(Xme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(Qme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(Qme,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),eje=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))($me),tje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{},description:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e});var t={description:e.data.text,id:e.data.id};this.setState({description:t})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;if(e.details!==t){this.setState({details:t});var n={description:t.data.text,id:t.data.id};this.setState({description:n})}e.description.data.description!==this.props.description.data.description&&this.props.details.data.id===this.props.description.data.description.id&&this.setState({description:this.props.description.data.description})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(eje,{id:t,type:n,details:this.state.details}),Object(a.jsx)("p",{style:{whiteSpace:"pre-line"},children:this.state.description.description||"No Text Added"})]})})})}),Object(a.jsx)(zme,{id:t,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),nje=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(tje);function rje(){var e=Object(f.a)(["\n  border: 0px;\n  width: 100%;\n  :hover {\n    border-bottom: 1px dotted;\n  }\n  :focus {\n    border-bottom: 1px dotted;\n    outline: none;\n  }\n  :active {\n    border: 0px;\n  }\n"]);return rje=function(){return e},e}function aje(){var e=Object(f.a)(["\n  min-width: 20px;\n  fill: ",";\n"]);return aje=function(){return e},e}function oje(){var e=Object(f.a)(["\n  padding: 10px;\n"]);return oje=function(){return e},e}function ije(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n"]);return ije=function(){return e},e}function cje(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  width: 100%;\n"]);return cje=function(){return e},e}function sje(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return sje=function(){return e},e}var lje=y.default.div(sje()),uje=y.default.table(cje()),dje=y.default.tr(ije()),pje=y.default.td(oje()),hje=Object(y.default)(cm)(aje(),_.gray3),bje=y.default.input(rje()),fje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={listItems:[]},e.handleValue=function(t,n){var r=Object(aj.a)(e.state.listItems);r.map((function(e){e.id===n.id&&(e.value=t.target.value)})),e.setState({listItems:r},(function(){e.props.dispatch(U4(e.state.listItems))}))},e.handleOnBlurValue=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,(c=Object(aj.a)(e.state.listItems)).map((function(e){e.id===r.id&&(e.value=n.target.value)})),e.setState({listItems:c}),t.prev=6,s={text:n.target.value,position:r.position},t.next=10,ZW.assessmentReportUpdateSingleItems(i,o,r.id,s);case 10:t.sent&&e.props.dispatch(U4(e.state.listItems)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),Oj(uj.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleDeleteItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,c=e.state.listItems.filter((function(e){return e.id!==r})),e.setState({list:c}),t.prev=5,t.next=8,ZW.assessmentReportDeleteSingleItems(i,o,r);case 8:e.props.dispatch(U4(c)),(s=a).data.items=s.data.items.filter((function(e){return e.id!==r})),e.props.updateDetail(s),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),Oj(uj.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContentList",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,s,l,u,d,p,h,b,f,m;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=e.state.listItems.slice(),o=-1,i=-1,s=0;s<a.length;s++)"list_".concat(a[s].id)===n.id&&(o=s),"list_".concat(a[s].id)===r.id&&(i=s);if(-1==o||-1==i){t.next=23;break}return l=a[o],l.fromId,u=Object(rj.a)(l,["fromId"]),d=a[i],d.toId,p=Object(rj.a)(d,["toId"]),a[o]=Object(c.a)({id:n.id},p),a[i]=Object(c.a)({id:r.id},u),e.setState({listItems:a}),t.prev=10,h=a.map((function(e,t){return{text_block_id:e.id,position:t}})),b=e.props.details,f=b.data.assessment_report_id,m=b.data.id,t.next=17,ZW.assessmentReportUpdatePositionItems(m,f,h);case 17:e.props.dispatch(U4(e.state.listItems)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),Oj(uj.Danger,"Server Error");case 23:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContentList")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({listItems:this.props.numericList.data.numericList});var e=this.props.details;if(this.setState({details:e}),e){var t=Object(aj.a)(this.state.listItems);e.data.items.length>0&&e.data.items.map((function(e,n){t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItems:t})}}},{key:"componentDidUpdate",value:function(e){e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItems:this.props.numericList.data.numericList}):1===this.state.listItems.length&&this.setState({listItems:[]}));var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(aj.a)(this.state.listItems);t.data.items.length>0&&t.data.items.map((function(e,t){n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItems:n})}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(lje,{children:Object(a.jsx)(uje,{children:Object(a.jsx)("tbody",{children:this.state.listItems.length>0&&this.state.listItems.map((function(t,n){return Object(a.jsxs)(dje,{onDragOver:function(n){return e.onDragOver(n,"list_".concat(t.id))},onDrop:function(n){return e.onDrop(n,"list_".concat(t.id))},id:"list_".concat(t.id),children:[Object(a.jsx)(pje,{style:{width:"90%"},children:Object(a.jsx)(bje,{type:"text",value:t.value,onChange:function(n){return e.handleValue(n,t)},onBlur:function(n){return e.handleOnBlurValue(n,t)}})}),Object(a.jsxs)(pje,{children:[" ",Object(a.jsxs)("a",{href:"#",onDragStart:function(n){return e.onDragStart(n,"list_".concat(t.id))},draggable:!0,children:[" ",Object(a.jsx)(hje,{name:Xf.MenuDrag})]})]}),Object(a.jsx)(pje,{children:Object(a.jsx)(hje,{name:Xf.Trash,onClick:function(n){return e.handleDeleteItem(n,t.id)}})})]},t.id)}))})})})}}]),n}(p.PureComponent),mje=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,numericList:e.document}})))(fje);function jje(){var e=Object(f.a)(["\n  width: 5px;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: rgb(237, 248, 225);\n  display: list-item;\n  padding: 10px 0px 10px 5px;\n"]);return jje=function(){return e},e}function vje(){var e=Object(f.a)(["\n  width: 5px;\n  height: 100%;\n  left: 0;\n  top: 0;\n  background-color: ",";\n  display: list-item;\n  padding: 10px 0px 10px 5px;\n"]);return vje=function(){return e},e}function Oje(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n"]);return Oje=function(){return e},e}function gje(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n"]);return gje=function(){return e},e}function xje(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  display: flex;\n"]);return xje=function(){return e},e}function yje(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return yje=function(){return e},e}function _je(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return _je=function(){return e},e}function wje(){var e=Object(f.a)(["\n  color: ",";\n  margin-right: 10px;\n"]);return wje=function(){return e},e}function Sje(){var e=Object(f.a)(["\n  max-height: calc(80vh - 210px);\n  overflow-y: auto;\n  padding: 15px;\n"]);return Sje=function(){return e},e}function kje(){var e=Object(f.a)(["\n  width: 150px;\n  :focus  {\n    border-top: 1px solid lightgray;\n    border-bottom: 1px solid lightgray;\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return kje=function(){return e},e}function Cje(){var e=Object(f.a)(["\n  display: flex;\n"]);return Cje=function(){return e},e}function Nje(){var e=Object(f.a)(["\n  width: 80%;\n  padding: 6px;\n  border: 0px solid lightgray;\n  border-radius: 4px;\n  border-top: 1px solid lightgray;\n  border-left: 1px solid lightgray;\n  border-bottom: 1px solid lightgray;\n"]);return Nje=function(){return e},e}var Eje=y.default.input(Nje()),Aje=y.default.div(Cje()),Ije=Object(y.default)(m6.a)(kje()),Tje=y.default.div(Sje()),Rje=y.default.a(wje(),_.blue2),Dje=y.default.div(_je()),Mje=y.default.div(yje()),Lje=y.default.div(xje()),Pje=y.default.label(gje(),(function(e){return"blue"===e.color?_.blue0:_.white})),Fje=y.default.label(Oje(),(function(e){return"blue"===e.color?"rgb(237, 248, 225)":_.white})),Uje=y.default.div(vje(),_.blue0),Bje=y.default.div(jje()),Vje=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",itemList:[],updatedItemList:[],serviceOption:[],searchTerm:"",selectedService:{},listItemsModal:[],loading:!1},e.getServiceOption=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=e.props.services,r=Object(aj.a)(e.state.serviceOption),n.length>0&&n.map((function(e){r.push({value:e.id,label:e.name})})),e.setState({serviceOption:r})}catch(a){Oj(uj.Danger,"Server Error")}case 1:case"end":return t.stop()}}),t)}))),e.loadWorks=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&!(t<=0)){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,ZW.addScopeOfWorkList({service_id:t});case 5:return r=e.sent,a=j()(r).uniqBy("work_type_id").map("work_type").sortBy("position").value(),o=j()(r).sortBy(["other","work_category.position","position"]).groupBy("work_type_id").value(),(i=j.a.find(a,{name:"General"}))&&0===j.a.reject(o[i.id],"other").length&&(a=j.a.reject(a,i),delete o[i.id]),Object.entries(o).forEach((function(e){var t=Object(w.a)(e,2);t[0];t[1].forEach((function(e){n.push(e)}))})),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.getDefaultService=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.job,a=(null===r||void 0===r||null===(n=r.service)||void 0===n?void 0:n.service_id)||0,t.next=4,e.loadWorks(a);case 4:(o=t.sent)&&(o.length>0?e.setState({itemList:[],updatedItemList:[]},(function(){var t=[];o.map((function(e){var n;t.push({value:e.name,id:e.id,selected:!1,type:null===e||void 0===e||null===(n=e.work_type)||void 0===n?void 0:n.name,work_category_id:e.work_category_id})})),e.setState({itemList:t,updatedItemList:t})})):e.setState({itemList:[],updatedItemList:[]})),e.setState({loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.getWorkList=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.addScopeOfWorkList();case 3:(n=t.sent)&&(r=Object(aj.a)(e.state.itemList),n.length>0&&n.map((function(e){r.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getWorkCategory=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ZW.addScopeOfWorkCategory();case 3:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Oj(uj.Danger,"Server Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.handleSelectItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(a=Object(aj.a)(e.state.itemList)).map((function(e){e.id===r&&(!1===e.selected?e.selected=!0:e.selected=!1)})),e.setState({itemList:a});case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.handleService=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedService:n}),t.prev=1,r=e.state.searchTerm,"",a=n.value,t.next=7,ZW.addScopeOfWorkListFilter(r,"",a);case 7:(o=t.sent)&&(o.length>0?e.setState({itemList:[]},(function(){var t=[];o.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[1,11]])})));return function(e){return t.apply(this,arguments)}}(),e.handleSearchTerm=function(t){var n=t.target.value;e.setState({searchTerm:n})},e.handleOnBlurSearchTerm=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({searchTerm:r}),t.prev=2,a=r,"",o=void 0!==e.state.selectedService.id?e.state.selectedService.id:"",t.next=8,ZW.addScopeOfWorkListFilter(a,"",o);case 8:(i=t.sent)&&(i.length>0?e.setState({itemList:[]},(function(){var t=[];i.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=15;break;case 12:t.prev=12,t.t0=t.catch(2),Oj(uj.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)(Tje,{children:[Object(a.jsxs)(Aje,{children:[Object(a.jsx)(Eje,{type:"text",placeholder:"Search by item... ",value:e.state.searchTerm,onChange:e.handleSearchTerm,onBlur:e.handleOnBlurSearchTerm}),Object(a.jsx)(Ije,{onChange:e.handleService,options:e.state.serviceOption})]}),Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsx)(Rje,{href:"#",children:"Contents"}),Object(a.jsx)(Rje,{href:"#",children:"Structure"})]}),Object(a.jsxs)("div",{style:{marginTop:"20px"},children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Dje,{children:Object(a.jsx)(Pje,{color:"black",children:"Contents"})}),e.state.updatedItemList.length>0&&e.state.updatedItemList.map((function(t){return"Contents"===t.type?Object(a.jsxs)(Lje,{children:[Object(a.jsx)(Uje,{}),Object(a.jsx)(Pje,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})]},t.id):null}))]}),Object(a.jsx)(Mje,{children:Object(a.jsx)(Pje,{color:"black",children:"Structure"})}),e.state.updatedItemList.map((function(t,n){return"Structure"===t.type?Object(a.jsxs)(Lje,{children:[Object(a.jsx)(Bje,{}),Object(a.jsx)(Fje,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})]},n):null}))]})]})},e.addItem=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(n=Object(aj.a)(e.state.itemList)).length>0&&n.filter((function(e){return!0===e.selected}))||[],e.props.addNewItem(n),e.props.onClose();case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.dispatch(GK({no_works:0,special:0}));case 3:this.getServiceOption(),this.getDefaultService(),this.setState({listItemsModal:this.props.numericList.data.numericList});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItemsModal:this.props.numericList.data.numericList}):1===this.state.listItemsModal.length&&this.setState({listItemsModal:[]}))}},{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",onClick:this.addItem,children:"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:"Add Scope of Works",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(h.a.PureComponent),Jje=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,numericList:e.document,job:e.currentJob.data,services:e.waterForm.services}})))(Vje);function qje(){var e=Object(f.a)(["\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n  display: inline-block;\n  margin-bottom: 0;\n  font-weight: normal;\n  text-align: center;\n  vertical-align: middle;\n  touch-action: manipulation;\n  cursor: pointer;\n  background-image: none;\n  white-space: nowrap;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.428571429;\n  border-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  margin-right: 10px;\n"]);return qje=function(){return e},e}function zje(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n  justify-content: flex-end;\n"]);return zje=function(){return e},e}function Gje(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return Gje=function(){return e},e}function Wje(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return Wje=function(){return e},e}function Hje(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return Hje=function(){return e},e}function Yje(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Yje=function(){return e},e}function Qje(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return Qje=function(){return e},e}function Kje(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return Kje=function(){return e},e}function Zje(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Zje=function(){return e},e}function Xje(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return Xje=function(){return e},e}var $je=y.default.input(Xje()),eve=Object(y.default)(m6.a)(Zje()),tve=y.default.div(Kje()),nve=y.default.div(Qje()),rve=y.default.div(Yje()),ave=y.default.div(Hje(),(function(e){return e.color})),ove=y.default.div(Wje()),ive=y.default.input(Gje()),cve=y.default.div(zje()),sve=y.default.button(qje()),lve=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],uve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},listItems:[],displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0,showScopeModal:!1},e.handleHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(D4(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(R4(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleAddItem=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.details,r=n.data.assessment_report_id,a=n.data.id,t.prev=3,o={text:"Number Item",position:0},t.next=7,ZW.assessmentReportAddSingleItems(a,r,o);case 7:(i=t.sent)&&(c=Object(aj.a)(e.state.listItems),s={id:i.id,text:i.text,position:i.position,assessment_report_section_id:a},c.push({id:i.id,value:i.text,position:i.position,arId:a}),e.setState({listItems:c},(function(){e.props.dispatch(U4(e.state.listItems))})),(l=n).data.items.push(s),e.props.updateDetail(l)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.handleAddScopeModal=function(){e.setState({showScopeModal:!0})},e.handleCloseScopeModal=function(){e.setState({showScopeModal:!1})},e.handleNewItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.details,a=r.data.assessment_report_id,o=r.data.id,t.prev=3,i=[],n.length>0&&n.map((function(e){i.push({assessment_report_section_id:a,position:0,text:e.value})})),c=[],t.next=9,ZW.assessmentReportAddBulkItems(o,a,i);case 9:(s=t.sent)&&(l=Object(aj.a)(e.state.listItems),s.map((function(e){l.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),c.push({id:e.id,text:e.text,position:e.position,assessment_report_section_id:e.assessment_report_section_id})})),e.setState({listItems:l},(function(){e.props.dispatch(U4(e.state.listItems))})),u=r,c.filter((function(e){return u.data.items.push(e)})),e.props.updateDetail(u)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),Oj(uj.Danger,"Server Error"),e.props.onClose();case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)($je,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(tve,{children:[Object(a.jsx)(eve,{options:lve,onChange:e.handleFontStyle,defaultValue:lve[0]}),Object(a.jsx)(ive,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(ove,{onClick:e.handleClick,children:Object(a.jsx)(ave,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(nve,{children:[Object(a.jsx)(rve,{onClick:e.handleClose}),Object(a.jsx)(_fe.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsxs)(cve,{children:[Object(a.jsx)(sve,{onClick:e.handleAddScopeModal,children:"Add Scope of Works"}),Object(a.jsx)(sve,{onClick:e.handleAddItem,children:"Add Item"})]}),Object(a.jsx)(mje,{details:e.props.details,updateDetail:function(t){e.props.updateDetail(t)}}),Object(a.jsx)(Jje,{addNewItem:e.handleNewItem,id:e.props.id,isOpen:e.state.showScopeModal,onClose:e.handleCloseScopeModal,details:e.props.details})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItems:this.props.numericList.data.numericList}):1===this.state.listItems.length&&this.setState({listItems:[]})),e.details!==n&&n){var r=Object(aj.a)(this.state.listItems);n.data.items.length>0&&n.data.items.map((function(e,t){r.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItems:r});var a=n.data.heading_color.toString(16);a="#".concat(a);var o={headingText:n.data.heading,id:this.props.id},i={color:a,id:this.props.id},c={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:o,color:a,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(T4(o)),t.props.dispatch(D4(i)),t.props.dispatch(R4(c))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,closeCaption:"Close",title:"Numerical List:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),dve=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,numericList:e.document}})))(uve);function pve(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return pve=function(){return e},e}function hve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return hve=function(){return e},e}function bve(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return bve=function(){return e},e}function fve(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return fve=function(){return e},e}var mve=y.default.h4(fve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),jve=y.default.h4(bve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),vve=y.default.h4(hve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Ove=y.default.h4(pve(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),gve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(vve,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(jve,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(Ove,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(mve,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(mve,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),xve=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(gve),yve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,listItem:[],details:{}},e.updateStateDetail=function(t){e.props.updateDetail(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;if(this.setState({details:e}),e){var t=Object(aj.a)(this.state.listItem);e.data.items.length>0&&e.data.items.map((function(e,n){t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItem:t})}}},{key:"componentDidUpdate",value:function(e){e.numericList.data.numericList!==this.props.numericList.data.numericList&&(this.props.numericList.data.numericList.length>0?this.props.details.data.id===this.props.numericList.data.numericList[0].arId&&this.setState({listItem:this.props.numericList.data.numericList}):1===this.state.listItem.length&&this.setState({listItem:[]}));var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(aj.a)(this.state.listItem);t.data.items.length>0&&t.data.items.map((function(e,t){n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({listItem:n})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(xve,{id:n,type:r,details:this.state.details}),Object(a.jsx)("ol",{children:this.state.listItem.length>0&&this.state.listItem.map((function(e){return Object(a.jsx)("li",{children:e.value},e.id)}))})]})})})}),Object(a.jsx)(dve,{id:n,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details,updateDetail:function(t){return e.updateStateDetail(t)}})]})}}]),n}(p.PureComponent),_ve=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document,numericList:e.document}})))(yve);function wve(){var e=Object(f.a)(["\n  border: 0px;\n  width: 100%;\n  :hover {\n    border-bottom: 1px dotted;\n  }\n  :focus {\n    border-bottom: 1px dotted;\n    outline: none;\n  }\n  :active {\n    border: 0px;\n  }\n"]);return wve=function(){return e},e}function Sve(){var e=Object(f.a)(["\n  min-width: 20px;\n  fill: ",";\n"]);return Sve=function(){return e},e}function kve(){var e=Object(f.a)(["\n  padding: 10px;\n"]);return kve=function(){return e},e}function Cve(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  background-color: #ddd;\n"]);return Cve=function(){return e},e}function Nve(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  width: 100%;\n"]);return Nve=function(){return e},e}function Eve(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return Eve=function(){return e},e}var Ave=y.default.div(Eve()),Ive=y.default.table(Nve()),Tve=y.default.tr(Cve()),Rve=y.default.td(kve()),Dve=Object(y.default)(cm)(Sve(),_.gray3),Mve=y.default.input(wve()),Lve=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={list:[]},e.handleValue=function(t,n){var r=Object(aj.a)(e.state.list);r.map((function(e){e.id===n.id&&(e.value=t.target.value)})),e.setState({list:r},(function(){e.props.dispatch(B4(e.state.list))}))},e.handleOnBlurValue=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,(c=Object(aj.a)(e.state.list)).map((function(e){e.id===r.id&&(e.value=n.target.value)})),e.setState({list:c}),t.prev=6,s={text:n.target.value,position:r.position},t.next=10,ZW.assessmentReportUpdateSingleItems(i,o,r.id,s);case 10:t.sent&&e.props.dispatch(B4(e.state.list)),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(6),Oj(uj.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleDeleteItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.details,o=a.data.assessment_report_id,i=a.data.id,c=e.state.list.filter((function(e){return e.id!==r})),e.setState({list:c}),t.prev=5,t.next=8,ZW.assessmentReportDeleteSingleItems(i,o,r);case 8:e.props.dispatch(B4(c)),(s=a).data.items=s.data.items.filter((function(e){return e.id!==r})),e.props.updateDetail(s),t.next=17;break;case 14:t.prev=14,t.t0=t.catch(5),Oj(uj.Danger,"Server Error");case 17:case"end":return t.stop()}}),t,null,[[5,14]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDragStart=function(e,t){var n=JSON.stringify({id:t});e.dataTransfer.setData("dragContentList",n),e.dataTransfer.setDragImage(document.getElementById(t),20,20)},e.onDragOver=function(e,t){return e.preventDefault(),!1},e.swapBoxes=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,s,l,u,d,p,h,b,f,m;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(a=e.state.list.slice(),o=-1,i=-1,s=0;s<a.length;s++)"list_".concat(a[s].id)===n.id&&(o=s),"list_".concat(a[s].id)===r.id&&(i=s);if(-1==o||-1==i){t.next=23;break}return l=a[o],l.fromId,u=Object(rj.a)(l,["fromId"]),d=a[i],d.toId,p=Object(rj.a)(d,["toId"]),a[o]=Object(c.a)({id:n.id},p),a[i]=Object(c.a)({id:r.id},u),e.setState({list:a},(function(){e.props.dispatch(B4(e.state.list))})),t.prev=10,h=a.map((function(e,t){return{text_block_id:e.id,position:t}})),b=e.props.details,f=b.data.assessment_report_id,m=b.data.id,t.next=17,ZW.assessmentReportUpdatePositionItems(m,f,h);case 17:e.props.dispatch(B4(e.state.list)),t.next=23;break;case 20:t.prev=20,t.t0=t.catch(10),Oj(uj.Danger,"Server Error");case 23:case"end":return t.stop()}}),t,null,[[10,20]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onDrop=function(t,n){t.preventDefault();var r=JSON.parse(t.dataTransfer.getData("dragContentList")),a={id:n};return e.swapBoxes(r,a),!1},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({list:this.props.bulletList.data.bulletList});var e=this.props.details;if(e){var t=Object(aj.a)(this.state.list);e.data.items.length>0&&e.data.items.map((function(e,n){return t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({list:t},(function(){}))}}},{key:"componentDidUpdate",value:function(e){e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&this.props.bulletList.data.bulletList.length>0&&this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({list:this.props.bulletList.data.bulletList});var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(aj.a)(this.state.list);t.data.items.length>0&&t.data.items.map((function(e,t){return n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({list:n},(function(){}))}}},{key:"render",value:function(){var e=this;return Object(a.jsx)(Ave,{children:Object(a.jsx)(Ive,{className:"drag-table-pop",children:Object(a.jsx)("tbody",{className:"drag-tbody-pop",children:this.state.list.length>0&&this.state.list.map((function(t,n){return Object(a.jsxs)(Tve,{onDragOver:function(n){return e.onDragOver(n,"list_".concat(t.id))},onDrop:function(n){return e.onDrop(n,"list_".concat(t.id))},id:"list_".concat(t.id),children:[Object(a.jsx)(Rve,{style:{width:"90%"},children:Object(a.jsx)(Mve,{type:"text",value:t.value,onChange:function(n){return e.handleValue(n,t)},onBlur:function(n){return e.handleOnBlurValue(n,t)}})}),Object(a.jsxs)(Rve,{children:[" ",Object(a.jsxs)("a",{href:"#",onDragStart:function(n){return e.onDragStart(n,"list_".concat(t.id))},draggable:!0,children:[" ",Object(a.jsx)(Dve,{name:Xf.MenuDrag})]})]}),Object(a.jsx)(Rve,{children:Object(a.jsx)(Dve,{name:Xf.Trash,onClick:function(n){return e.handleDeleteItem(n,t.id)}})})]},t.id)}))})})})}}]),n}(p.PureComponent),Pve=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,bulletList:e.document}})))(Lve);function Fve(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n"]);return Fve=function(){return e},e}function Uve(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n"]);return Uve=function(){return e},e}function Bve(){var e=Object(f.a)(["\n  padding: 10px;\n  margin: 0px;\n  background-color: ",";\n  width: 100%;\n  border: 1px solid rgba(0, 0, 0, 0.125);\n"]);return Bve=function(){return e},e}function Vve(){var e=Object(f.a)(["\n  width: 100%;\n  //border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  display: flex;\n"]);return Vve=function(){return e},e}function Jve(){var e=Object(f.a)(["\n  width: 100%;\n  //border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return Jve=function(){return e},e}function qve(){var e=Object(f.a)(["\n  width: 100%;\n  //border: 1px solid #999999;\n  border-collapse: collapse;\n  margin-top: -1px;\n  border-top-left-radius: 3px;\n  border-top-right-radius: 3px;\n  overflow: hidden;\n  background-color: #fafafa;\n"]);return qve=function(){return e},e}function zve(){var e=Object(f.a)(["\n  color: ",";\n  margin-right: 10px;\n"]);return zve=function(){return e},e}function Gve(){var e=Object(f.a)(["\n  max-height: calc(80vh - 210px);\n  overflow-y: auto;\n  //padding: 15px;\n"]);return Gve=function(){return e},e}function Wve(){var e=Object(f.a)(["\n  width: 170px;\n  //background: #f1f1f1;\n  background-color: #f1f1f1;\n  position: relative;\n  border-radius: 0.25rem;\n  border: none;\n  :focus {\n    border-top: 1px solid lightgray;\n    border-bottom: 1px solid lightgray;\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Wve=function(){return e},e}function Hve(){var e=Object(f.a)(["\n  display: flex;\n"]);return Hve=function(){return e},e}function Yve(){var e=Object(f.a)(["\n  width: 100%;\n  padding: 7px;\n  background: #f1f1f1;\n  position: relative;\n  border-radius: 0.25rem;\n  border: 1px solid lightgray;\n  :focus {\n    border-top: 1px solid lightgray;\n    border-bottom: 1px solid lightgray;\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Yve=function(){return e},e}var Qve=y.default.input(Yve()),Kve=y.default.div(Hve()),Zve=Object(y.default)(m6.a)(Wve()),Xve=y.default.div(Gve()),$ve=y.default.div(zve(),_.blue2),eOe=y.default.div(qve()),tOe=y.default.div(Jve()),nOe=y.default.div(Vve()),rOe=y.default.label(Bve(),(function(e){return"blue"===e.color?_.blue0:"#f1f1f1"})),aOe=y.default.label(Uve(),(function(e){return"blue"===e.color?_.blue0:"#ffffff"})),oOe=y.default.label(Fve(),(function(e){return"blue"===e.color?"rgb(237, 248, 225)":"#ffffff"})),iOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={search:"",itemList:[],updatedItemList:[],serviceOption:[],searchTerm:"",selectedService:{},modalItemList:[],loading:!1},e.getServiceOption=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:try{n=e.props.services,r=Object(aj.a)(e.state.serviceOption),n.length>0&&n.map((function(e){r.push({value:e.id,label:e.name})})),e.setState({serviceOption:r})}catch(a){Oj(uj.Danger,"Server Error")}case 1:case"end":return t.stop()}}),t)}))),e.getWorkList=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.addScopeOfWorkList();case 3:(n=t.sent)&&(r=Object(aj.a)(e.state.itemList),n.length>0&&n.map((function(e){r.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:r})),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.getWorkCategory=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ZW.addScopeOfWorkCategory();case 3:e.sent,e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),Oj(uj.Danger,"Server Error");case 10:case"end":return e.stop()}}),e,null,[[0,7]])}))),e.handleSelectItem=function(t,n){var r=Object(aj.a)(e.state.itemList);r.map((function(e){e.id===n&&(!1===e.selected?e.selected=!0:e.selected=!1)})),e.setState({itemList:r,updatedItemList:r})},e.handleSearchTerm=function(t){var n=e.state.itemList,r=t.target.value;if(r){var a=new RegExp(r.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),o=n.filter((function(e){return e.value.match(a)}));e.setState({updatedItemList:o})}else e.setState({updatedItemList:n})},e.handleOnBlurSearchTerm=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,a=e.props.details,e.setState({searchTerm:r}),t.prev=3,s=r,l=(null===(o=a.data)||void 0===o||null===(i=o.params)||void 0===i?void 0:i.work_category)||0,u=(null===(c=e.state.selectedService)||void 0===c?void 0:c.value)||0,t.next=9,ZW.addScopeOfWorkListFilter(s,l,u);case 9:(d=t.sent)&&(d.length>0?e.setState({itemList:[]},(function(){var t=[];d.map((function(e){t.push({value:e.name,id:e.id,selected:!1,type:e.type,work_category_id:e.work_category_id})})),e.setState({itemList:t})})):e.setState({itemList:[]})),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 16:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),e.cards={},e.loadWorks=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r,a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=[],t&&!(t<=0)){e.next=3;break}return e.abrupt("return",n);case 3:return e.next=5,ZW.addScopeOfWorkList({service_id:t});case 5:return r=e.sent,a=j()(r).uniqBy("work_type_id").map("work_type").sortBy("position").value(),o=j()(r).sortBy(["other","work_category.position","position"]).groupBy("work_type_id").value(),(i=j.a.find(a,{name:"General"}))&&0===j.a.reject(o[i.id],"other").length&&(a=j.a.reject(a,i),delete o[i.id]),Object.entries(o).forEach((function(e){var t=Object(w.a)(e,2);t[0];t[1].forEach((function(e){n.push(e)}))})),e.abrupt("return",n);case 12:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.handleService=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.props.details,e.setState({selectedService:n,loading:!0}),t.prev=2,t.next=5,e.loadWorks(n.value);case 5:(r=t.sent)&&(r.length>0?e.setState({itemList:[],updatedItemList:[]},(function(){var t=[];r.map((function(e){var n;t.push({value:e.name,id:e.id,selected:!1,type:null===e||void 0===e||null===(n=e.work_type)||void 0===n?void 0:n.name,work_category_id:e.work_category_id})})),e.setState({itemList:t,updatedItemList:t})})):e.setState({itemList:[],updatedItemList:[]})),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),Oj(uj.Danger,"Server Error");case 12:return t.prev=12,e.setState({loading:!1}),t.finish(12);case 15:case"end":return t.stop()}}),t,null,[[2,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e.getDefaultService=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.job,a=(null===r||void 0===r||null===(n=r.service)||void 0===n?void 0:n.service_id)||0,t.next=4,e.loadWorks(a);case 4:(o=t.sent)&&(o.length>0?e.setState({itemList:[],updatedItemList:[]},(function(){var t=[];o.map((function(e){var n;t.push({value:e.name,id:e.id,selected:!1,type:null===e||void 0===e||null===(n=e.work_type)||void 0===n?void 0:n.name,work_category_id:e.work_category_id})})),e.setState({itemList:t,updatedItemList:t})})):e.setState({itemList:[],updatedItemList:[]})),e.setState({loading:!1});case 7:case"end":return t.stop()}}),t)}))),e.renderBody=function(){var t,n,r,o,i=e.props,c=i.job,s=i.details,l=(null===c||void 0===c||null===(t=c.service)||void 0===t?void 0:t.service_id)||0;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(Kve,{className:"d-flex mb-4",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(Qve,{type:"text",placeholder:"Search by item... ",onChange:e.handleSearchTerm})}),!(null===(n=s.data)||void 0===n||null===(r=n.params)||void 0===r?void 0:r.service)&&Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)(Zve,{onChange:e.handleService,options:e.state.serviceOption,defaultValue:null===(o=e.state.serviceOption)||void 0===o?void 0:o.find((function(e){return e.value===l}))})})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)($ve,{className:"mr-3 mb-3 text-primary cursor-pointer",onClick:function(){var t;return null===(t=e.cards.content)||void 0===t?void 0:t.scrollIntoView()},children:"Contents"}),Object(a.jsx)($ve,{className:"mr-3 mb-3 text-primary cursor-pointer",onClick:function(){var t;return null===(t=e.cards.structure)||void 0===t?void 0:t.scrollIntoView()},children:"Structure"})]}),Object(a.jsxs)(Xve,{children:[Object(a.jsxs)("div",{ref:function(t){return e.cards.content=t},children:[Object(a.jsx)(eOe,{children:Object(a.jsx)(rOe,{color:"black",children:"Contents"})}),e.state.updatedItemList.map((function(t){return"Contents"===t.type?Object(a.jsx)(nOe,{children:Object(a.jsx)(aOe,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})},t.id):null}))]}),Object(a.jsxs)("div",{ref:function(t){return e.cards.structure=t},children:[Object(a.jsx)(tOe,{children:Object(a.jsx)(rOe,{color:"black",children:"Structure"})}),e.state.updatedItemList.map((function(t){return"Structure"===t.type?Object(a.jsx)(nOe,{children:Object(a.jsx)(oOe,{color:!0===t.selected?"blue":"black",onClick:function(n){return e.handleSelectItem(n,t.id)},children:t.value})},t.id):null}))]})]})]})},e.addItem=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=(n=Object(aj.a)(e.state.updatedItemList)).length>0&&n.filter((function(e){return!0===e.selected}))||[],e.props.addNewItem(n),e.props.onClose();case 4:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return this.setState({loading:!0}),e.next=3,this.props.dispatch(GK({no_works:0,special:0}));case 3:this.getServiceOption(),this.getDefaultService(),this.setState({modalItemList:this.props.bulletList.data.bulletList});case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&this.props.bulletList.data.bulletList.length>0&&this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({modalItemList:this.props.bulletList.data.bulletList})}},{key:"renderFooter",value:function(){return Object(a.jsx)(Xg,{className:"btn btn-primary",onClick:this.addItem,children:"Add"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{loading:this.state.loading,style:{minHeight:"300px"},onClose:n,title:"Add Scope of Works",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(h.a.PureComponent),cOe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,bulletList:e.document,job:e.currentJob.data,services:e.waterForm.services}})))(iOe);function sOe(){var e=Object(f.a)(["\n  color: #333;\n  background-color: #fff;\n  border-color: #ccc;\n  display: inline-block;\n  margin-bottom: 0;\n  font-weight: normal;\n  text-align: center;\n  vertical-align: middle;\n  touch-action: manipulation;\n  cursor: pointer;\n  background-image: none;\n  white-space: nowrap;\n  padding: 6px 12px;\n  font-size: 14px;\n  line-height: 1.428571429;\n  border-radius: 3px;\n  -webkit-user-select: none;\n  -moz-user-select: none;\n  -ms-user-select: none;\n  user-select: none;\n  margin-right: 10px;\n"]);return sOe=function(){return e},e}function lOe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n  justify-content: flex-end;\n"]);return lOe=function(){return e},e}function uOe(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return uOe=function(){return e},e}function dOe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return dOe=function(){return e},e}function pOe(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return pOe=function(){return e},e}function hOe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return hOe=function(){return e},e}function bOe(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return bOe=function(){return e},e}function fOe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return fOe=function(){return e},e}function mOe(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return mOe=function(){return e},e}function jOe(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return jOe=function(){return e},e}var vOe=y.default.input(jOe()),OOe=Object(y.default)(m6.a)(mOe()),gOe=y.default.div(fOe()),xOe=y.default.div(bOe()),yOe=y.default.div(hOe()),_Oe=y.default.div(pOe(),(function(e){return e.color})),wOe=y.default.div(dOe()),SOe=y.default.input(uOe()),kOe=y.default.div(lOe()),COe=y.default.button(sOe()),NOe=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],EOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},itemList:[],displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0,showScopeModal:!1},e.handleHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(M4(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(M4(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(P4(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:r.data.text},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(L4(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleAddItem=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.details,r=n.data.assessment_report_id,a=n.data.id,t.prev=3,o={text:"Bullet Item",position:0},t.next=7,ZW.assessmentReportAddSingleItems(a,r,o);case 7:(i=t.sent)&&(c=Object(aj.a)(e.state.itemList),s={id:i.id,text:i.text,position:i.position,assessment_report_section_id:a},c.push({id:i.id,value:i.text,position:i.position,arId:a}),e.setState({itemList:c},(function(){e.props.dispatch(B4(e.state.itemList))})),(l=n).data.items.push(s),e.props.updateDetail(l)),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 14:case"end":return t.stop()}}),t,null,[[3,11]])}))),e.handleAddScopeModal=function(){e.setState({showScopeModal:!0})},e.handleCloseScopeModal=function(){e.setState({showScopeModal:!1})},e.handleNewItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.details,a=r.data.assessment_report_id,o=r.data.id,t.prev=3,i=[],n.length>0&&n.map((function(e){i.push({assessment_report_section_id:a,position:0,text:e.value})})),t.next=8,ZW.assessmentReportAddBulkItems(o,a,i);case 8:c=t.sent,s=[],c&&(l=Object(aj.a)(e.state.itemList),c.map((function(e){l.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),s.push({id:e.id,text:e.text,position:e.position,assessment_report_section_id:e.assessment_report_section_id})})),e.setState({itemList:l},(function(){e.props.dispatch(B4(e.state.itemList))})),u=r,s.filter((function(e){return u.data.items.push(e)})),e.props.updateDetail(u)),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),Oj(uj.Danger,"Server Error"),e.props.onClose();case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(vOe,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(gOe,{children:[Object(a.jsx)(OOe,{options:NOe,onChange:e.handleFontStyle,defaultValue:NOe[0]}),Object(a.jsx)(SOe,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(wOe,{onClick:e.handleClick,children:Object(a.jsx)(_Oe,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(xOe,{children:[Object(a.jsx)(yOe,{onClick:e.handleClose}),Object(a.jsx)(_fe.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsxs)(kOe,{className:"d-flex mb-4",children:[Object(a.jsx)(COe,{onClick:e.handleAddScopeModal,children:"Add Scope of Works"}),Object(a.jsx)(COe,{onClick:e.handleAddItem,children:"Add Item"})]}),Object(a.jsx)(Pve,{details:e.props.details,updateDetail:function(t){e.props.updateDetail(t)}}),Object(a.jsx)(cOe,{addNewItem:e.handleNewItem,id:e.props.id,isOpen:e.state.showScopeModal,onClose:e.handleCloseScopeModal,details:e.props.details})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this;e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&this.props.bulletList.data.bulletList.length>0&&this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({itemList:this.props.bulletList.data.bulletList});var n=this.props.details;if(e.details!==n&&n){var r=Object(aj.a)(this.state.itemList);n.data.items.length>0&&n.data.items.map((function(e,t){return r.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({itemList:r},(function(){}));var a=n.data.heading_color.toString(16);a="#".concat(a);var o={headingText:n.data.heading,id:this.props.id},i={color:a,id:this.props.id},c={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:o,color:a,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(M4(o)),t.props.dispatch(P4(i)),t.props.dispatch(L4(c))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,style:{minHeight:"300px"},onClose:n,closeCaption:"Close",title:"Bullet List:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),AOe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,bulletList:e.document}})))(EOe);function IOe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return IOe=function(){return e},e}function TOe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return TOe=function(){return e},e}function ROe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return ROe=function(){return e},e}function DOe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return DOe=function(){return e},e}var MOe=y.default.h4(DOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),LOe=y.default.h4(ROe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),POe=y.default.h4(TOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),FOe=y.default.h4(IOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),UOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{},details:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==this.props.fontColor.data.fontColorData&&this.props.id===this.props.fontColor.data.fontColorData.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==this.props.fontStyle.data.fontStyleData&&this.props.id===this.props.fontStyle.data.fontStyleData.id&&this.setState({fontStyleData:n}),e.text.data.heading!==this.props.text.data.heading&&this.props.id===this.props.text.data.heading.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.heading,c=r.fontColorData;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)(POe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(LOe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(FOe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(MOe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Image"}):Object(a.jsx)(MOe,{color:c&&c.id===t&&c.color?c.color:"#000000",type:n,children:i.id===t?i.headingText:"Enter your text here..."})})}}]),n}(p.Component),BOe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(UOe),VOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,itemList:[],details:{}},e.updateStateDetail=function(t){e.props.updateDetail(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;if(this.setState({details:e}),e&&e.id===this.props.id){var t=Object(aj.a)(this.state.itemList);e.data.items.length>0&&e.data.items.map((function(e,n){t.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id})})),this.setState({itemList:t})}}},{key:"componentDidUpdate",value:function(e){e.bulletList.data.bulletList!==this.props.bulletList.data.bulletList&&(this.props.bulletList.data.bulletList.length>0?this.props.details.data.id===this.props.bulletList.data.bulletList[0].arId&&this.setState({itemList:this.props.bulletList.data.bulletList}):1===this.state.itemList.length&&this.setState({itemList:[]}));var t=this.props.details;if(e.details!==t&&(this.setState({details:t}),t)){var n=Object(aj.a)(this.state.itemList);t.data.items.length>0&&t.data.items.map((function(e,t){return n.push({id:e.id,value:e.text,position:e.position,arId:e.assessment_report_section_id}),e})),this.setState({itemList:n})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,r=t.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(BOe,{id:n,type:r,details:this.state.details}),Object(a.jsx)("ul",{children:this.state.itemList.length>0&&this.state.itemList.map((function(e){return Object(a.jsx)("li",{children:e.value},e.id)}))})]})})})}),Object(a.jsx)(AOe,{id:n,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.state.details,updateDetail:function(t){return e.updateStateDetail(t)}})]})}}]),n}(p.PureComponent),JOe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document,bulletList:e.document}})))(VOe),qOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,hover:!1},e.onMouseLeave=function(){e.setState({hover:!1})},e.onMouseEnter=function(){e.setState({hover:!0})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{className:"break-page",style:{flex:1},children:Object(a.jsx)("div",{className:"hover-content-overlay",children:"\u2014 \u2014 PAGE BREAK \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014"})})})})})})}}]),n}(p.PureComponent),zOe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(qOe),GOe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1},e.onMouseEnter=function(){e.setState({hover:!0})},e.onMouseLeave=function(){e.setState({hover:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{onMouseEnter:this.onMouseEnter,onMouseLeave:this.onMouseLeave,children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{className:"hr-lines",style:{flex:"0 0 calc(100% - 30px)"},children:Object(a.jsx)("hr",{})})})})})})}}]),n}(p.PureComponent),WOe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(GOe);function HOe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return HOe=function(){return e},e}function YOe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return YOe=function(){return e},e}function QOe(){var e=Object(f.a)(["\n  font-weight: 600;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return QOe=function(){return e},e}function KOe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  color: ",";\n  font-size: ",";\n"]);return KOe=function(){return e},e}var ZOe=y.default.h4(KOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),XOe=y.default.h4(QOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),$Oe=y.default.h4(YOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),ege=y.default.h4(HOe(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),tge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={fontColorData:{},fontStyleData:{},heading:{}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.fontStyle.data.fontStyleData,r=t.text.data.heading,a=t.fontColor.data.fontColorData,o=t.details;if(e.details!==o&&o){var i=o.data.heading_color.toString(16);i="#".concat(i);var c={headingText:o.data.heading,id:this.props.id},s={color:i,id:this.props.id},l={style:{value:o.data.heading_style,label:o.data.heading_style},id:this.props.id};this.setState({fontColorData:s,heading:c,fontStyleData:l})}e.fontColor.data.fontColorData!==a&&this.props.id===a.id&&this.setState({fontColorData:a}),e.fontStyle.data.fontStyleData!==n&&this.props.id===n.id&&this.setState({fontStyleData:n}),e.text.data.heading!==r&&this.props.id===r.id&&this.setState({heading:r})}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type,r=this.state,o=r.fontStyleData,i=r.fontColorData,c=r.heading;return Object(a.jsx)(a.Fragment,{children:o&&o.id===this.props.id&&"italic"===o.style.value?Object(a.jsx)($Oe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"bold"===o.style.value?Object(a.jsx)(XOe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):o&&o.id===this.props.id&&"light"===o.style.value?Object(a.jsx)(ege,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."}):"Image"===this.props.type?Object(a.jsx)(ZOe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Image"}):Object(a.jsx)(ZOe,{color:i&&i.id===t&&i.color?i.color:"#000000",type:n,children:c.id===t?c.headingText:"Enter your text here..."})})}}]),n}(p.PureComponent),nge=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,description:e.document}})))(tge);function rge(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return rge=function(){return e},e}function age(){var e=Object(f.a)(["\n  margin-left: 30px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return age=function(){return e},e}function oge(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n"]);return oge=function(){return e},e}function ige(){var e=Object(f.a)(["\n  width: 36px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return ige=function(){return e},e}function cge(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return cge=function(){return e},e}function sge(){var e=Object(f.a)(["\n  position: absolute;\n  zindex: 2;\n"]);return sge=function(){return e},e}function lge(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 10px;\n"]);return lge=function(){return e},e}function uge(){var e=Object(f.a)(["\n  width: 50%;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return uge=function(){return e},e}function dge(){var e=Object(f.a)(["\n  width: 150px;\n  height: 36px;\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return dge=function(){return e},e}function pge(){var e=Object(f.a)(["\n  padding: 6px;\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  width: 60%;\n  height: 36px;\n"]);return pge=function(){return e},e}var hge=y.default.input(pge()),bge=Object(y.default)(m6.a)(dge()),fge=Object(y.default)(m6.a)(uge()),mge=y.default.div(lge()),jge=y.default.div(sge()),vge=y.default.div(cge()),Oge=y.default.div(ige(),(function(e){return e.color})),gge=y.default.div(oge()),xge=y.default.input(age()),yge=y.default.div(rge()),_ge=[{value:"regular",label:"Regular"},{value:"bold",label:"Bold"},{value:"light",label:"Light"},{value:"italic",label:"Italic"}],wge=[{value:"half",label:"Fit image to half-page width"},{value:"full",label:"Fit image to page width"}],Sge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:"Enter your text here...",id:e.props.id},displayColorPicker:!1,color:"#000000",description:"",selectedOption:void 0,selectedView:void 0},e.handleHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleOnBlurHeading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.target.value,e.setState({heading:{headingText:r}},(function(){var t={id:e.props.id,headingText:e.state.heading.headingText};e.props.dispatch(T4(t))})),a=e.props.details,o=parseInt(e.state.color.replace("#",""),16),t.prev=4,i={type:a.data.type,position:a.data.position,heading:r,heading_style:e.state.selectedOption.value,heading_color:o,text:""},t.next=8,ZW.assessmentReportSectionHeadingUpdate(a.data.id,a.data.assessment_report_id,i);case 8:t.next=13;break;case 10:t.prev=10,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 13:case"end":return t.stop()}}),t,null,[[4,10]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(){e.setState({displayColorPicker:!e.state.displayColorPicker})},e.handleClose=function(){e.setState({displayColorPicker:!1})},e.handleChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({color:n.hex},(function(){var t={color:e.state.color,id:e.props.id};e.props.dispatch(D4(t))})),r=e.props.details,a=parseInt(n.hex.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:e.state.selectedOption.value,heading_color:a,text:""},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleFontStyle=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({selectedOption:n},(function(){var t={style:e.state.selectedOption,id:e.props.id};e.props.dispatch(R4(t))})),r=e.props.details,a=parseInt(e.state.color.replace("#",""),16),t.prev=3,o={type:r.data.type,position:r.data.position,heading:e.state.heading.headingText,heading_style:n.value,heading_color:a,text:r.data.text},t.next=7,ZW.assessmentReportSectionHeadingUpdate(r.data.id,r.data.assessment_report_id,o);case 7:t.next=12;break;case 9:t.prev=9,t.t0=t.catch(3),Oj(uj.Danger,"Server Error");case 12:case"end":return t.stop()}}),t,null,[[3,9]])})));return function(e){return t.apply(this,arguments)}}(),e.handleImageView=function(t){e.setState({selectedView:t},(function(){e.props.selectedImageView(t)}))},e.renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(hge,{value:e.state.heading.headingText,onChange:e.handleHeading,onBlur:e.handleOnBlurHeading}),Object(a.jsxs)(mge,{children:[Object(a.jsx)(bge,{options:_ge,onChange:e.handleFontStyle,defaultValue:_ge[0]}),Object(a.jsx)(xge,{type:"text",value:e.state.color,readOnly:!0}),Object(a.jsx)(gge,{onClick:e.handleClick,children:Object(a.jsx)(Oge,{color:e.state.color})}),e.state.displayColorPicker?Object(a.jsxs)(jge,{children:[Object(a.jsx)(vge,{onClick:e.handleClose}),Object(a.jsx)(_fe.a,{color:e.state.color,onChange:e.handleChange})]}):null]}),Object(a.jsx)(yge,{children:Object(a.jsx)(fge,{options:wge,value:e.state.selectedView,onChange:e.handleImageView})})]})},e.renderFooter=function(){return Object(a.jsx)("div",{})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;if(e.details!==n&&n){var r=n.data.heading_color.toString(16);r="#".concat(r);var a={headingText:n.data.heading,id:this.props.id},o={color:r,id:this.props.id},i={style:{value:n.data.heading_style,label:n.data.heading_style},id:this.props.id};this.setState({heading:a,color:r,selectedOption:{value:n.data.heading_style,label:n.data.heading_style}},(function(){t.props.dispatch(T4(a)),t.props.dispatch(D4(o)),t.props.dispatch(R4(i))}))}}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:"Image:"+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),kge=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document}})))(Sge);function Cge(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Cge=function(){return e},e}function Nge(){var e=Object(f.a)(["\n  padding: 50px;\n  align-self: center;\n"]);return Nge=function(){return e},e}function Ege(){var e=Object(f.a)(["\n  margin-left: 5px;\n  color: ",";\n"]);return Ege=function(){return e},e}function Age(){var e=Object(f.a)(["\n  width: ",";\n  border: 0px;\n  :hover  {\n    border-bottom: 1px dashed ",";\n  }\n"]);return Age=function(){return e},e}function Ige(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return Ige=function(){return e},e}var Tge=y.default.div(Ige(),(function(e){return e.width})),Rge=y.default.input(Age(),(function(e){return e.width}),_.black0),Dge=y.default.label(Ege(),_.gray3),Mge=y.default.div(Nge()),Lge=y.default.div(Cge()),Pge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hover:!1,uploadedImage:"",loading:!1,fullImage:!1,details:{},description:"",photo_id:0,width:0,imageId:0},e.handleDelete=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.details,a=n.dispatch,o=n.match.params.id,t.prev=1,t.next=4,a(iw("Confirm","Are you sure you want remove this image."));case 4:if(i=t.sent,c=r.data.assessment_report_id,s=r.data.id,l=e.state.imageId,!i){t.next=14;break}return e.props.dispatch(z4(!0)),t.next=12,ZW.assessmentReportDeleteImage(c,s,l);case 12:e.props.dispatch(q4(parseInt(o),c)),e.props.dispatch(z4(!1));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 20:case"end":return t.stop()}}),t,null,[[1,16]])}))),e.onDragOver=function(e){e.preventDefault()},e.handleDrop=function(t){t.preventDefault(),e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files)},e.inputRef=p.createRef(),e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.target.files))},e.uploadPhotos=function(t){var n,r=["png","jpeg","jpg"],o=[],i=Object(oV.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value,s=(c.name.split(".").pop()||"").toLowerCase();if(r.includes(s)){var l=new FormData;l.append("file",c),o.push(RV.uploadPhoto(l).then((function(t){var n=e.props.details.data.assessment_report_id,r=e.props.details.data.id,a={photo_id:t.data.id,desired_width:t.data.width,caption:e.state.description};e.setState({uploadedImage:t.data.url,loading:!1,photo_id:t.data.id,width:t.data.width}),ZW.assessmentReportAttachImage(r,n,a).then((function(t){t&&e.setState({photo_id:t.photo_id,width:t.desired_width,imageId:t.id})}))})))}else Oj(uj.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",s]})," is not supported!"]}));e.setState({loading:!1})}}catch(u){i.e(u)}finally{i.f()}},e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.handleImageView=function(t){"full"===t.value?e.setState({fullImage:!0}):e.setState({fullImage:!1})},e.handleImageDescription=function(t){var n=t.target.value;e.setState({description:n})},e.handleOnBlurDescription=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.target.value,a=e.state,o=a.photo_id,i=a.width,c=a.imageId,e.setState({description:r}),0===o){t.next=15;break}return t.prev=4,s=e.props.details.data.assessment_report_id,l=e.props.details.data.id,u={photo_id:o,desired_width:i,caption:r},t.next=10,ZW.assessmentReportUpdateImage(l,s,c,u);case 10:t.next=15;break;case 12:t.prev=12,t.t0=t.catch(4),Oj(uj.Danger,"Server Error");case 15:case"end":return t.stop()}}),t,null,[[4,12]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.details;this.setState({details:t},(function(){t.data.items&&e.setState({photo_id:t.data.items.photo_id,description:null!==t.data.items.caption?t.data.items.caption:"",width:t.data.items.desired_width,uploadedImage:t.data.items.photo.url,imageId:t.data.items.id})}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.details;e.details!==n&&this.setState({details:n},(function(){n.data.items&&t.setState({photo_id:n.data.items.photo_id,description:null!==n.data.items.caption?n.data.items.caption:"",width:n.data.items.desired_width,uploadedImage:n.data.items.photo.url,imageId:n.data.items.id})}))}},{key:"render",value:function(){var e=this.props,t=e.id,n=e.type;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(nge,{id:t,type:n,details:this.state.details}),Object(a.jsxs)("div",{className:"image-div",children:[Object(a.jsx)("input",{type:"file",accept:"image/jpeg,image/png",multiple:!0,hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef}),this.state.uploadedImage&&""!==this.state.uploadedImage?Object(a.jsx)(Tge,{width:!0===this.state.fullImage?"90%":"50%",children:Object(a.jsxs)(Lge,{style:{position:"absolute"},children:[this.state.loading&&Object(a.jsx)(Nv,{size:40}),Object(a.jsx)("img",{src:this.state.uploadedImage,style:{objectFit:"contain"}})]})}):Object(a.jsx)(Tge,{width:!0===this.state.fullImage?"90%":"50%",onClick:this.onUploadLinkClick,onDragOver:this.onDragOver,onDrop:this.handleDrop,className:"print-hide",children:Object(a.jsxs)(Mge,{children:[Object(a.jsx)(lE,{name:Xf.Photos}),Object(a.jsx)(Dge,{children:"Click to add photo"})]})}),Object(a.jsx)(Rge,{width:!0===this.state.fullImage?"90%":"40%",type:"text",className:"img-desc",placeholder:"Add photo description here...",value:this.state.description,onChange:this.handleImageDescription,onBlur:this.handleOnBlurDescription}),this.state.uploadedImage&&""!==this.state.uploadedImage?Object(a.jsx)("div",{className:"print-hide",style:{display:"inline-block"},children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:this.handleDelete})}):null]})]})})})}),Object(a.jsx)(kge,{id:t,isOpen:this.props.showModal,title:"Image: Enter heading here...",onClose:this.props.handleModal,selectedImageView:this.handleImageView,details:this.state.details})]})}}]),n}(p.PureComponent),Fge=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(Pge);function Uge(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return Uge=function(){return e},e}function Bge(){var e=Object(f.a)(["\n  width: 33.33%;\n  height: 200px;\n  display: inline-block;\n  margin-bottom: 10px;\n  padding: 10px;\n  position: relative;\n  opacity: ",";\n"]);return Bge=function(){return e},e}function Vge(){var e=Object(f.a)(["\n  overflow: auto;\n  flex-direction: row;\n  height: 400px;\n"]);return Vge=function(){return e},e}var Jge=y.default.div(Vge()),qge=y.default.div(Bge(),(function(e){return e.opacity})),zge=y.default.a(Uge()),Gge=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobPhotos:[],selectedAll:!1},e.handleImageSelect=function(t){var n=Object(aj.a)(e.state.jobPhotos);n.map((function(e){return e.id===t&&(e.selected=!e.selected),e})),e.setState({jobPhotos:n})},e.handleSelectAll=function(){var t=Object(aj.a)(e.state.jobPhotos);t.map((function(t){t.selected=!e.state.selectedAll})),e.setState({jobPhotos:t,selectedAll:!e.state.selectedAll})},e.renderBody=function(){var t=e.state.jobPhotos;return Object(a.jsxs)("div",{children:[Object(a.jsx)(zge,{href:"#",onClick:e.handleSelectAll,children:"Tick / un-tick all"}),Object(a.jsx)(Jge,{children:t.length>0&&t.map((function(t,n){return Object(a.jsxs)(qge,{opacity:t.selected?"1":"0.5",onClick:function(){return e.handleImageSelect(t.id)},children:[Object(a.jsx)("img",{src:t.url,className:"img-fit"}),t.selected&&Object(a.jsx)("span",{className:"icon-div",children:Object(a.jsx)(cm,{className:"svg-icon-center",name:Xf.Checked})})]},n)}))})]})},e.addSelectedPhotos=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=e.state.jobPhotos,r=e.props.details,a=[],n.map((function(e){!0===e.selected&&a.push(e.id)})),o=r.data.assessment_report_id,i=r.data.id,c="",s=0;s<a.length;s++)s===a.length-1?c+=a[s]:c=c+a[s]+",";if(!(a.length>0)){t.next=23;break}return t.prev=9,e.props.dispatch(z4(!0)),t.next=13,ZW.assessmentReportAddPhotosFromJob(i,o,{job_photo_ids:c});case 13:e.props.dispatch(q4(parseInt(e.props.match.params.id),o)),e.props.dispatch(z4(!1)),e.props.onClose(),t.next=23;break;case 18:t.prev=18,t.t0=t.catch(9),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1)),e.props.onClose();case 23:case"end":return t.stop()}}),t,null,[[9,18]])}))),e.renderFooter=function(){return Object(a.jsx)("div",{children:Object(a.jsx)(Xg,{type:"submit",className:"btn btn-primary",onClick:e.addSelectedPhotos,children:"Add"})})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=[],e.next=3,zy.getJobPhotos(this.props.match.params.id);case 3:(n=e.sent)&&(n.data.length>0&&n.data.map((function(e){return t.push({id:e.id,url:e.url,selected:!1}),e})),this.setState({jobPhotos:t}));case 5:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:"Add Photos",body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Wge=Object(sg.compose)(O.g,Object(b.b)((function(e){return{}})))(Gge);function Hge(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-size: 18px;\n"]);return Hge=function(){return e},e}function Yge(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Yge=function(){return e},e}function Qge(){var e=Object(f.a)(["\n  padding: 50px;\n  align-self: center;\n"]);return Qge=function(){return e},e}function Kge(){var e=Object(f.a)(["\n  margin-left: 5px;\n  color: ",";\n"]);return Kge=function(){return e},e}function Zge(){var e=Object(f.a)(["\n  width: ",";\n  border: 0px;\n  margin-right: 6%;\n  :hover  {\n    border-bottom: 1px dashed ",";\n  }\n"]);return Zge=function(){return e},e}function Xge(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return Xge=function(){return e},e}var $ge=y.default.div(Xge(),(function(e){return e.width})),exe=y.default.input(Zge(),(function(e){return e.width}),_.black0),txe=y.default.label(Kge(),_.gray3),nxe=y.default.div(Qge()),rxe=y.default.div(Yge()),axe=y.default.h4(Hge()),oxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hover:!1,uploadedImage:[],loading:!1,fullImage:!1,selectedImage:"",newImageDesc:""},e.handleDelete=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,o=a.details,i=a.dispatch,c=a.match.params.id,t.prev=1,t.next=4,i(iw("Confirm","Are you sure you want remove this image."));case 4:if(s=t.sent,l=o.data.assessment_report_id,u=o.data.id,d=r.imageId,!s){t.next=14;break}return e.props.dispatch(z4(!0)),t.next=12,ZW.assessmentReportDeletePhotos(l,u,d);case 12:e.props.dispatch(q4(parseInt(c),parseInt(l))),e.props.dispatch(z4(!1));case 14:t.next=20;break;case 16:t.prev=16,t.t0=t.catch(1),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 20:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleRotate=function(t,n){var r=Object(aj.a)(e.state.uploadedImage);r.map((function(e){return e.photo_id===n&&(e.rotateDegrees=e.rotateDegrees+1),e})),e.setState({uploadedImage:r},(function(){RV.rotatePhoto(n,{degree:"-90",level:1}).then((function(){var t=e.props.match.params,n=t.id,r=t.reportId;e.props.dispatch(z4(!0)),e.props.dispatch(q4(parseInt(n),parseInt(r))),e.props.dispatch(z4(!1))}))}))},e.handleDescriptionChange=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.uploadedImage);a.map((function(e){return e.imageId===n.imageId&&(e.description=r),n})),e.setState({uploadedImage:a})},e.handleOnBlurDescriptionChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.target.value,o=Object(aj.a)(e.state.uploadedImage),i=e.props,c=i.details,s=i.match.params.id,l=c.data.assessment_report_id,u=c.data.id,d=r.imageId,o.map((function(e){return e.imageId===r.imageId&&(e.description=a),r})),e.setState({uploadedImage:o}),t.prev=8,p={photo_id:r.photo_id,desired_width:r.width,position:r.position,caption:a,rotateDegrees:0},e.props.dispatch(z4(!0)),t.next=13,ZW.assessmentReportUpdatePhotos(u,l,d,p);case 13:e.props.dispatch(q4(parseInt(s),l)),e.props.dispatch(z4(!1)),t.next=21;break;case 17:t.prev=17,t.t0=t.catch(8),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 21:case"end":return t.stop()}}),t,null,[[8,17]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleNewImageDesc=function(t){var n=t.target.value;e.setState({newImageDesc:n})},e.onDragOver=function(e){e.preventDefault()},e.handleDrop=function(t){t.preventDefault(),e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files)},e.inputRef=p.createRef(),e.onFileInputChange=function(t){t.target.files.length>0&&e.setState({loading:!0,selectedImage:t.target.files},(function(){e.uploadPhotos(e.state.selectedImage)}))},e.uploadPhotos=function(t){var n=["png","jpeg","jpg"],r=Array.from(t),o=Object(aj.a)(e.state.uploadedImage);r.length>0&&r.forEach((function(t,r){var i=(t.name.split(".").pop()||"").toLowerCase();if(n.includes(i)){var c=new FormData;c.append("file",t),[].push(RV.uploadPhoto(c).then((function(t){var n=e.props.details.data.assessment_report_id,a=e.props.details.data.id,i={photo_id:t.data.id,desired_width:t.data.width,position:r};ZW.assessmentReportAttachPhotos(a,n,i).then((function(n){o.push({imageId:n.id,position:n.position,photo_id:n.photo_id,imageUrl:t.data.url,description:e.state.newImageDesc,rotateDegrees:0}),e.setState({uploadedImage:o,loading:!1,newImageDesc:""})}))})))}else Oj(uj.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",i]})," is not supported!"]}))}))},e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t=this.props.details,n=Object(aj.a)(this.state.uploadedImage),t&&(t.data.items.length>0&&t.data.items.map((function(e){n.push({imageId:e.id,position:e.position,photo_id:e.photo_id,imageUrl:e.photo.url,description:e.caption,rotateDegrees:0})})),this.setState({uploadedImage:n}));case 3:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidUpdate",value:function(e){var t=this.props.details;if(e.details!==t){var n=Object(aj.a)(this.state.uploadedImage);t&&(t.data.items.length>0&&t.data.items.map((function(e){n.push({imageId:e.id,position:e.position,photo_id:e.photo_id,imageUrl:e.photo.url,description:e.caption,rotateDegrees:0})})),this.setState({uploadedImage:n}))}}},{key:"render",value:function(){var e=this;return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsxs)(aE,{children:[this.state.loading&&Object(a.jsx)(Nv,{zIndex:999,size:40}),Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(axe,{children:"Photos"}),Object(a.jsxs)("div",{className:"image-div",style:{display:"flex",flexWrap:"wrap",marginLeft:"-15px"},children:[Object(a.jsx)("input",{type:"file",accept:"image/jpeg,image/png",hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef}),this.state.uploadedImage.length>0&&this.state.uploadedImage.map((function(t,n){return Object(a.jsxs)("div",{className:"grid-box2",children:[Object(a.jsx)("div",{children:Object(a.jsx)($ge,{width:"100%",children:Object(a.jsx)(rxe,{style:{position:"absolute"},children:Object(a.jsx)("img",{src:"".concat(t.imageUrl),className:"object-fit"})})})}),Object(a.jsxs)("div",{children:[Object(a.jsx)(exe,{width:"85%",className:"img-desc",type:"text",value:null!==t.description?t.description:"",onChange:function(n){return e.handleDescriptionChange(n,t)},onBlur:function(n){return e.handleOnBlurDescriptionChange(n,t)},placeholder:"Add photo description here..."}),e.state.uploadedImage.length>0?Object(a.jsxs)("div",{className:"print-hide",style:{display:"inline-block"},children:[Object(a.jsx)(sE,{style:{marginRight:"5px"},name:Xf.Rotate,onClick:function(n){return e.handleRotate(n,t.photo_id)}}),Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(n){return e.handleDelete(n,t)}})]}):null]})]},n)})),Object(a.jsxs)("div",{className:"grid-box2 img-grid-box",children:[Object(a.jsx)($ge,{width:(this.state.fullImage,"100%"),onClick:this.onUploadLinkClick,onDragOver:this.onDragOver,onDrop:this.handleDrop,children:Object(a.jsxs)(nxe,{children:[Object(a.jsx)(lE,{name:Xf.Photos}),Object(a.jsx)(txe,{children:"Click to add photo"})]})}),Object(a.jsx)("div",{className:"full-grid",children:Object(a.jsx)(exe,{width:!0===this.state.fullImage?"90%":"40%",type:"text",className:"img-desc",value:this.state.newImageDesc,onChange:this.handleNewImageDesc,placeholder:"Add photo description here..."})})]})]})]})})]})}),Object(a.jsx)(Wge,{id:this.props.id,isOpen:this.props.showModal,title:"Text: Enter heading here...",onClose:this.props.handleModal,details:this.props.details})]})}}]),n}(p.PureComponent),ixe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document}})))(oxe),cxe=n(177),sxe=n(1105);n(1008);function lxe(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-size: 18px;\n"]);return lxe=function(){return e},e}function uxe(){var e=Object(f.a)(["  \n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 16px;\n  text-align: right;\n  padding-right: 50px;\n  width: 16%;\n  :hover {\n    background-color: "," !important;\n  }\n"]);return uxe=function(){return e},e}function dxe(){var e=Object(f.a)(["\n  font-weight: bolder;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 16px;\n  :hover {\n    background-color: "," !important;\n  }\n"]);return dxe=function(){return e},e}function pxe(){var e=Object(f.a)(["\n  \n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 16px;\n  text-align: right;\n  padding-right: 50px;\n  width: 16%;\n"]);return pxe=function(){return e},e}function hxe(){var e=Object(f.a)(["\n  padding-left: 12px;\n  padding-top: 10px;\n  padding-bottom: 10px;\n  font-size: 16px;\n"]);return hxe=function(){return e},e}function bxe(){var e=Object(f.a)(["\n  background-color: ",";\n  border: 1px solid ",";\n  text-align: right;\n  :hover {\n    background-color: "," !important;\n  }\n"]);return bxe=function(){return e},e}function fxe(){var e=Object(f.a)(["\n  :hover {\n    background-color: ",";\n  }\n  border: 1px solid ",";\n"]);return fxe=function(){return e},e}function mxe(){var e=Object(f.a)(["\n  width: 100%;\n  border: 1px solid ",";\n"]);return mxe=function(){return e},e}function jxe(){var e=Object(f.a)(["\n  width: 95%;\n  border: 1px solid ",";\n"]);return jxe=function(){return e},e}function vxe(){var e=Object(f.a)(["\n  font-weight: bolder;\n  font-size: 16px;\n"]);return vxe=function(){return e},e}function Oxe(){var e=Object(f.a)(["\n    display: flex;\n    justify-content: space-between;\n"]);return Oxe=function(){return e},e}var gxe=y.default.div(Oxe()),xxe=y.default.div(vxe()),yxe=y.default.table(jxe(),_.gray2),_xe=y.default.table(mxe(),_.gray2),wxe=y.default.tr(fxe(),_.gray1,_.gray2),Sxe=y.default.tr(bxe(),_.gray1,_.gray2,_.gray1),kxe=y.default.td(hxe()),Cxe=y.default.td(pxe()),Nxe=y.default.td(dxe(),_.gray1),Exe=y.default.td(uxe(),_.gray1),Axe=y.default.h4(lxe()),Ixe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={openSetting:!1,showOnlyTotal:!1,showRows:!0,hover:!1,itemSelected:[],subTotal:0,calculatedTax:0,total:0},e.getTotal=function(){return(e.state.subTotal+12.21).toFixed(2)},e.getSubTotal=function(){var t=e.state.itemSelected,n=[];t&&t.length>0&&t.map((function(e){""!==e.quantity&&""!==e.unit_cost&&n.push(e.quantity*e.unit_cost)}));var r=n.reduce((function(e,t){return e+t}),0);return e.setState({subTotal:r}),r.toFixed(2)},e.renderBodyRows=function(e){return e.length>0&&e.map((function(e){return Object(a.jsxs)(wxe,{className:"tr-hover",id:e.id,children:[Object(a.jsx)(kxe,{children:e.description}),Object(a.jsxs)(Cxe,{children:["$ ",e.net_total.toFixed(2)]})]},e.id)}))},e.renderPanelBarItems=function(){var t,n;return null===(t=e.props.costListRes.data)||void 0===t||null===(n=t.costStagesListRes)||void 0===n?void 0:n.map((function(t,n){var r=Object(a.jsxs)(gxe,{children:[Object(a.jsx)(xxe,{children:t.name}),Object(a.jsx)(xxe,{children:vm(t.sub_total||0)})]});return Object(a.jsx)(cxe.a,{headerClassName:"title",expanded:0===n,selected:0===n,title:r,children:Object(a.jsx)(_xe,{children:Object(a.jsx)("tbody",{children:e.renderBodyRows(t.cost_items)})})},n)}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params.reportId;this.props.dispatch(J4(parseInt(t))).then((function(){e.props.dispatch(Y4())}))}},{key:"componentDidUpdate",value:function(e){}},{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Axe,{children:"Cost"}),Object(a.jsxs)("div",{className:"panelbar-wrapper",children:[this.props.showRows&&Object(a.jsx)(sxe.a,{expandMode:"multiple",style:{width:"95%"},onSelect:function(e){},children:this.renderPanelBarItems()}),Object(a.jsx)(yxe,{children:Object(a.jsxs)("tbody",{children:[Object(a.jsxs)(Sxe,{children:[Object(a.jsx)(Nxe,{children:"Total(ex. tax):"}),Object(a.jsx)(Exe,{children:vm(this.props.costListRes.data.sub_total||0)})]},"sub-total"),Object(a.jsxs)(Sxe,{children:[Object(a.jsx)(Nxe,{children:"GST:"}),Object(a.jsx)(Exe,{children:vm(this.props.costListRes.data.taxes||0)})]},"gst"),Object(a.jsxs)(Sxe,{children:[Object(a.jsx)(Nxe,{children:"Total:"}),Object(a.jsx)(Exe,{children:vm(this.props.costListRes.data.total_amount||0)})]},"total")]})})]})]})})})})})}}]),n}(p.PureComponent),Txe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{text:e.document,fontStyle:e.document,fontColor:e.document,costListRes:e.document}})))(Ixe),Rxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:this.props.children})}}]),n}(p.PureComponent);function Dxe(){var e=Object(f.a)(["\n  label {\n    color: ",";\n  }\n"]);return Dxe=function(){return e},e}var Mxe="FORMS_CONTROL_ROOM_FORM",Lxe=y.default.div(Dxe(),_.gray4),Pxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(r=e.props.beforeSubmit)&&r(n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.getOptLabel=function(e){return e.name},e.getOptValue=function(e){return e.id},e.loadLookups=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n=e.props.dispatch)(PK()),n(UK()),n(BK()),n(VK()),n(JK()),n(qK()),n(zK());case 8:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLookups()}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.submitting,r=e.modal,o=e.initialValues,i=void 0===o?{}:o,c=e.floorTypes,s=e.carpetTypes,l=e.carpetAges,u=e.carpetFaceFyber,d=e.underlayTypes,p=e.carpetConstructTypes,h=e.nonRestroableReasons,b=e.formData;return Object(a.jsxs)(Lxe,{children:[n&&!r&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{id:Mxe,onSubmit:t(this.onSubmit),children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:(i.control?"Control ":"")+"Room Name:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"name",placeholder:"Room name",component:yg,type:"text",validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Total Area (LxWxH):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(Hv.a,{name:"dimensions_length",placeholder:"L",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_width",placeholder:"W",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_height",placeholder:"H",component:yg,type:"number",min:0,step:.01})})]})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Affected Area (LxW):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(Hv.a,{name:"dimensions_affected_length",placeholder:"L",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_affected_width",placeholder:"W",component:yg,type:"number",min:0,step:.01})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Floor Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"flooring_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:c||[]})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Type and age:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:s})}),Object(a.jsx)("div",{className:"col-3 pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_age",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:l})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Construction Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_construction_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:p})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Face Fibre:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_face_fibre",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:u})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"underlay_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:d})})]}),Object(a.jsx)("hr",{})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Restorable:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"restorable",component:YU,direction:"horizontal",list:[{value:"1",label:"Yes"},{value:"0",label:"No"}],validate:Dv})})]}),"0"===b.restorable&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Non-Restorable Reason:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"non_restorable_reason",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:this.getOptLabel,getOptionValue:this.getOptValue,options:h||[]})})]})]})]})}}]),n}(p.PureComponent),Fxe=Object(sg.compose)(Object(b.b)((function(e,t){var n=e.waterForm,r=Object(rj.a)(e,["waterForm"]);return{floorTypes:n.floorTypes,carpetTypes:n.carpetTypes,carpetAges:n.carpetAges,carpetConstructTypes:n.carpetConstructTypes,carpetFaceFyber:n.carpetFaceFyber,underlayTypes:n.underlayTypes,nonRestroableReasons:n.nonRestroableReasons,formData:Object(GM.a)(t.form||Mxe)(r)||{}}})),Object(jv.a)({form:Mxe,enableReinitialize:!0}))(Pxe),Uxe=function(e){var t,n,r,a,o,i,c,s;return{name:e.name,flooring_type_id:null===e||void 0===e||null===(t=e.flooring_type)||void 0===t?void 0:t.id,flooring_subtype_id:(null===e||void 0===e||null===(n=e.flooring_subtype)||void 0===n?void 0:n.id)||(null===e||void 0===e?void 0:e.flooring_subtype_id),dimensions_length:null===e||void 0===e?void 0:e.dimensions_length,dimensions_width:null===e||void 0===e?void 0:e.dimensions_width,dimensions_height:null===e||void 0===e?void 0:e.dimensions_height,dimensions_affected_length:null===e||void 0===e?void 0:e.dimensions_affected_length,dimensions_affected_width:null===e||void 0===e?void 0:e.dimensions_affected_width,underlay_required:null===e||void 0===e?void 0:e.underlay_required,underlay_type_id:null===e||void 0===e||null===(r=e.underlay_type)||void 0===r?void 0:r.id,underlay_type_note:null===e||void 0===e?void 0:e.underlay_type_note,dimensions_underlay_length:null===e||void 0===e?void 0:e.dimensions_underlay_length,dimensions_underlay_width:null===e||void 0===e?void 0:e.dimensions_underlay_width,trims_required:null===e||void 0===e?void 0:e.trims_required,trim_type:null===e||void 0===e?void 0:e.trim_type,restorable:null===e||void 0===e?void 0:e.restorable,non_restorable_reason_id:"0"===(null===e||void 0===e?void 0:e.restorable)?null===e||void 0===e||null===(a=e.non_restorable_reason)||void 0===a?void 0:a.id:null,carpet_type_id:null===e||void 0===e||null===(o=e.carpet_type)||void 0===o?void 0:o.id,carpet_construction_type_id:null===e||void 0===e||null===(i=e.carpet_construction_type)||void 0===i?void 0:i.id,carpet_age_id:null===e||void 0===e||null===(c=e.carpet_age)||void 0===c?void 0:c.id,carpet_face_fibre_id:null===e||void 0===e||null===(s=e.carpet_face_fibre)||void 0===s?void 0:s.id}},Bxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={heading:{headingText:e.props.title||"Room name...",id:e.props.id},loading:!1},e.updateRoomSection=function(t){var n=e.props,r=n.onClose,a=n.details,o=n.dispatch,i=n.match.params.id;try{var c=Uxe(t),s=a.data;e.setState({loading:!0}),XG.assessmentReportUpdateRoomSection(s.assessment_report_id,s.id,t.id,c).then((function(){o(z4(!0)),o(q4(parseInt(i),parseInt(s.assessment_report_id))),e.setState({loading:!1}),r()}))}catch(l){}finally{e.setState({loading:!1})}},e.renderBody=function(){var t,n=e.props,r=n.job,o=(null===(t=n.details.data)||void 0===t?void 0:t.items)||{};return Object(a.jsx)(Fxe,{job:r,initialValues:o?Object(c.a)(Object(c.a)({},o),{},{restorable:!0===o.restorable?"1":"0"}):{underlay_required:"0",trims_required:"0",restorable:"1"},modal:!0,beforeSubmit:e.updateRoomSection,afterSubmit:function(){}})},e.renderFooter=function(){return Object(a.jsx)("button",{type:"submit",form:Mxe,className:"btn btn-primary",children:"Save"})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){var t=this.props;t.details,t.match;e.details}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,loading:this.state.loading,onClose:n,title:"Room: "+this.state.heading.headingText,body:this.renderBody(),footer:this.renderFooter()})})}}]),n}(p.PureComponent),Vxe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob}})))(Bxe);function Jxe(){var e=Object(f.a)(["\n  font-size: 16px;\n"]);return Jxe=function(){return e},e}function qxe(){var e=Object(f.a)(["\n  font-size: 16px;\n  font-weight: bolder;\n"]);return qxe=function(){return e},e}var zxe,Gxe=y.default.div(qxe()),Wxe=y.default.div(Jxe()),Hxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={hover:!1,details:{}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.details;this.setState({details:e})}},{key:"componentDidUpdate",value:function(e){var t=this.props.details;e.details!==t&&this.setState({details:t})}},{key:"render",value:function(){var e,t,n,r,o,i,c,s,l,u,d,p,h,b,f,m,j,v,O,g,x,y,_,w,S=this.props,k=S.id,C=(S.type,S.details);return Object(a.jsxs)("div",{className:"overlay-effect",children:[Object(a.jsx)(eE,{children:Object(a.jsxs)(aE,{children:[Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)(Gxe,{children:"Room:"}),"\xa0",Object(a.jsx)(Wxe,{children:(null===(e=C.data.items)||void 0===e?void 0:e.name)||"--"})]}),Object(a.jsxs)("div",{className:"d-flex mt-2",children:[Object(a.jsxs)("div",{className:"col-6 pl-0",children:[Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Total Area (L x W x H):"}),Object(a.jsxs)("div",{children:[(null===(t=C.data.items)||void 0===t?void 0:t.dimensions_length)?"".concat(null===(n=C.data.items)||void 0===n?void 0:n.dimensions_length,".0m x "):"--",(null===(r=C.data.items)||void 0===r?void 0:r.dimensions_width)?"".concat(null===(o=C.data.items)||void 0===o?void 0:o.dimensions_width,".0m x "):"--",(null===(i=C.data.items)||void 0===i?void 0:i.dimensions_height)?"".concat(null===(c=C.data.items)||void 0===c?void 0:c.dimensions_height,".0m"):"--"]})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Floor Type:"}),Object(a.jsx)("div",{children:(null===(s=C.data.items)||void 0===s||null===(l=s.flooring_type)||void 0===l?void 0:l.name)||"--"})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Carpet Face-Type:"}),Object(a.jsx)("div",{children:(null===(u=C.data.items)||void 0===u||null===(d=u.carpet_face_fibre)||void 0===d?void 0:d.name)||"--"})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Restorable:"}),Object(a.jsx)("div",{children:!0===(null===(p=C.data.items)||void 0===p?void 0:p.restorable)?"Yes":"No"})]})]}),Object(a.jsxs)("div",{className:"col-6 pl-0",children:[Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Affected Area (L x W):"}),Object(a.jsxs)("div",{children:[(null===(h=C.data.items)||void 0===h?void 0:h.dimensions_length)?"".concat(null===(b=C.data.items)||void 0===b?void 0:b.dimensions_affected_length,".0m x "):"--",(null===(f=C.data.items)||void 0===f?void 0:f.dimensions_width)?"".concat(null===(m=C.data.items)||void 0===m?void 0:m.dimensions_affected_width,".0m  "):"--"]})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Carpet Construction:"}),Object(a.jsx)("div",{children:(null===(j=C.data.items)||void 0===j||null===(v=j.carpet_construction_type)||void 0===v?void 0:v.name)||"--"})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:"Underlay:"}),Object(a.jsx)("div",{children:(null===(O=C.data.items)||void 0===O||null===(g=O.underlay_type)||void 0===g?void 0:g.name)||"--"})]}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("label",{className:"col-5 p-0",children:Object(a.jsx)("strong",{children:"Non restorable reason:"})}),Object(a.jsx)("div",{children:(null===(x=C.data.items)||void 0===x||null===(y=x.non_restorable_reason)||void 0===y?void 0:y.name)||"--"})]})]})]})]})}),Object(a.jsx)(Vxe,{id:k,isOpen:this.props.showModal,title:(null===(_=C.data)||void 0===_||null===(w=_.items)||void 0===w?void 0:w.name)||"Room name...",onClose:this.props.handleModal,details:this.state.details})]})}}]),n}(p.PureComponent),Yxe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{}})))(Hxe),Qxe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={items:[],hover:!1,showOnlyTotal:!1,showRows:!0,errorReportName:"",assessmentReport:{},hoverHeading:!1,hoverSubHeading:!1,hoverText:!1,hoverBullet:!1,hoverNumber:!1,hoverImage:!1,hoverPhoto:!1,hoverBreak:!1,hoverSpacer:!1},e.onMouseEnter=function(t,n){var r=Object(aj.a)(e.state.items);r.length>0&&r.map((function(e){e.id===t.id&&(e.hover=!0)})),e.setState({items:r}),e.props.sectionPosition(n)},e.onMouseLeave=function(t){var n=Object(aj.a)(e.state.items);n.length>0&&n.map((function(e){e.id===t.id&&(e.hover=!1)})),e.setState({items:n})},e.handleModal=function(t){var n=Object(aj.a)(e.state.items);n.map((function(e){e.id===t&&(e.showModal=!e.showModal)})),e.setState({items:n},(function(){e.props.updatedList(e.state.items)}))},e.handleDeleteSection=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(iw("Confirm","Are you sure you want to remove this section? You will not be able to restore any data you have entered."));case 3:if(!t.sent){t.next=19;break}return t.prev=5,e.props.dispatch(z4(!0)),i=n.data.id,c=n.data.assessment_report_id,t.next=11,ZW.assessmentReportSectionDelete(c,i);case 11:e.props.dispatch(q4(parseInt(o),c)),e.props.dispatch(z4(!1)),t.next=19;break;case 15:t.prev=15,t.t0=t.catch(5),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 19:case"end":return t.stop()}}),t,null,[[5,15]])})));return function(e){return t.apply(this,arguments)}}(),e.getRestMenuItems=function(){var t=[];return t.push({name:"Itemised",onClick:e.handleShowRow}),t.push({name:"Total amount only",onClick:e.handleShowOnlyTotal}),2===t.length&&t.splice(1,0,{type:"divider"}),t},e.handleShowRow=function(){e.setState({showRows:!0})},e.handleShowOnlyTotal=function(){e.setState({showOnlyTotal:!0,showRows:!1})},e.handleDuplicateSection=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.props.dispatch(z4(!0)),r=n.data.id,a=n.data.assessment_report_id,t.next=6,ZW.assessmentReportSectionDuplicate(a,r);case 6:e.props.dispatch(q4(r,a)),e.props.dispatch(z4(!1)),t.next=14;break;case 10:t.prev=10,t.t0=t.catch(0),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 14:case"end":return t.stop()}}),t,null,[[0,10]])})));return function(e){return t.apply(this,arguments)}}(),e.updateSectionDetail=function(t){var n=Object(aj.a)(e.state.items),r=n.find((function(e){return e.id===t.id}));if(r){var a=n.indexOf(r);n[a]=t,e.setState({items:n})}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setState({items:this.props.list})}},{key:"componentDidUpdate",value:function(e){if(e.list!==this.props.list&&this.setState({items:this.props.list}),e.arReport.data.arReport!==this.props.arReport.data.arReport&&this.props.arReport.data.arReport){var t=this.props.arReport.data;this.setState({assessmentReport:t.arReport},(function(){}))}}},{key:"render",value:function(){var e=this,t=this.getRestMenuItems();return Object(a.jsx)(pfe.Flex,{justifyContent:"space-between",style:{width:"100%"},children:Object(a.jsx)(pfe.Flex,{flexDirection:"column",children:Object(a.jsx)(nfe.c,{droppableId:"droppable",children:function(n,r){return Object(a.jsxs)("div",Object(c.a)(Object(c.a)({ref:n.innerRef},n.droppableProps),{},{style:(o=r.isDraggingOver,{background:o?"lightgray":"white",padding:8,width:"100%",minHeight:"100%",pointerEvents:o?"none":""}),children:[e.state.items.map((function(n,r){return Object(a.jsx)(nfe.b,{draggableId:n.id,index:r,children:function(o,i){return Object(a.jsx)("div",Object(c.a)(Object(c.a)({ref:o.innerRef},o.draggableProps),{},{children:Object(a.jsxs)(Rxe,{item:n,index:r,children:["heading"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(zfe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"subheading"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(xme,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"text"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(nje,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"room"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Yxe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"bullet_list"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(JOe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},updateDetail:function(t){return e.updateSectionDetail(t)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"number_list"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(_ve,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},updateDetail:function(t){return e.updateSectionDetail(t)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"page_break"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div break-page",children:[Object(a.jsx)("div",{className:"break-page",style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(zOe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)}},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"spacer"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(WOe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)}},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"costs"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Txe,{id:n.id,type:n.content,showModal:n.showModal,showOnlyTotal:e.state.showOnlyTotal,showRows:e.state.showRows,handleModal:function(){return e.handleModal(n.id)}},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{className:"dropdown-icon",children:Object(a.jsx)(nw,{items:t,noMargin:!0,direction:"right",iconName:Xf.Setting})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"image"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Fge,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Pencil,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]}),"photos"===n.content&&Object(a.jsxs)("div",{onMouseEnter:function(){return e.onMouseEnter(n,r)},onMouseLeave:function(){return e.onMouseLeave(n)},className:"assessment-component-drag-drop-main-div",children:[Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(ixe,{id:n.id,type:n.content,showModal:n.showModal,handleModal:function(){return e.handleModal(n.id)},details:n},n.id)}),Object(a.jsx)("div",{className:"index-btn",style:{display:n.hover?"inline-flex":"none"},children:Object(a.jsxs)("div",{className:"icon-top-right",children:[Object(a.jsx)("div",Object(c.a)(Object(c.a)({},o.dragHandleProps),{},{children:Object(a.jsx)(iE,{name:Xf.MenuDrag})})),Object(a.jsx)("div",{children:Object(a.jsx)(iE,{name:Xf.Add,onClick:function(){return e.handleModal(n.id)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(cE,{name:Xf.Duplicate,onClick:function(){return e.handleDuplicateSection(n)}})}),Object(a.jsx)("div",{children:Object(a.jsx)(sE,{name:Xf.Delete,onClick:function(){return e.handleDeleteSection(n)}})})]})})]})]})}))}},n.id)})),n.placeholder]}));var o}})})})}}]),n}(p.PureComponent),Kxe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(Qxe),Zxe=n(1086),Xxe=n.p+"static/media/steamatic_logo.e9103918.png",$xe=n(1103),eye=n(597),tye=n(1104);n(1009);function nye(){var e=Object(f.a)(["\n  width: 100%;\n  margin-top: 0.25rem;\n  font-size: 80%;\n  color: #dc3545;\n  display: block;\n  margin-left: 30px;\n"]);return nye=function(){return e},e}function rye(){var e=Object(f.a)(["\n  border: 0px;\n  margin: 30px 30px 0px 30px;\n  width: 80%;\n  border-bottom: 1px solid lightgray;\n  font-size: 2rem;\n"]);return rye=function(){return e},e}function aye(){var e=Object(f.a)(["\n  @media print {\n    width: auto;\n    height: auto !important;\n    overflow-y: visible;\n  }\n"]);return aye=function(){return e},e}function oye(){var e=Object(f.a)(["\n  background-color: #f9fafa;\n  height: calc(100% - 55px);\n  // overflow-y: auto;\n"]);return oye=function(){return e},e}var iye=y.default.div(oye()),cye=y.default.div(aye()),sye=y.default.input(rye()),lye=y.default.span(nye()),uye=function(e,t,n){var r=e,a=r.splice(t,1),o=Object(w.a)(a,1)[0];return r.splice(n,0,o),r},dye=function(e,t,n,r){var a=e,o=t,i=a.splice(n.index,1),c=Object(w.a)(i,1)[0];o.splice(r.index,0,c);var s={};return s[n.droppableId]=a,s[r.droppableId]=o,s},pye=[{id:"0",label:"Heading",icon:Xf.Heading,content:"heading",showModal:!1,data:{},hover:!1},{id:"1",label:"Sub-heading",icon:Xf.Heading,content:"subheading",showModal:!1,data:{},hover:!1},{id:"2",label:"Text",icon:Xf.Text,content:"text",showModal:!1,data:{},hover:!1},{id:"3",label:"Bullet list",icon:Xf.BulletList,content:"bullet_list",showModal:!1,showDeleteModal:!1,data:{},hover:!1},{id:"4",label:"Numeric list",icon:Xf.NumberList,content:"number_list",showModal:!1,data:{},hover:!1},{id:"5",label:"Image",icon:Xf.Images,content:"image",showModal:!1,data:{},hover:!1},{id:"6",label:"Photos",icon:Xf.Photos,content:"photos",showModal:!1,data:{},hover:!1},{id:"7",label:"spacer",icon:Xf.Spacer,content:"spacer",showModal:!1,data:{},hover:!1},{id:"8",label:"Page break",icon:Xf.Spacer,content:"page_break",showModal:!1,data:{},hover:!1},{id:"9",label:"Costings",icon:Xf.Costing,content:"costs",showModal:!1,data:{},hover:!1},{id:"10",label:"Room",icon:Xf.AddCircle,content:"room",showModal:!1,data:{},hover:!1}],hye=(zxe={},Object(k.a)(zxe,"heading","font-family"),Object(k.a)(zxe,"subheading","font-family"),Object(k.a)(zxe,"text","textarea"),Object(k.a)(zxe,"bullet_list","list-unordered"),Object(k.a)(zxe,"number_list","list-ordered"),Object(k.a)(zxe,"image","image"),Object(k.a)(zxe,"photos","photos"),Object(k.a)(zxe,"spacer","unlink-vertical"),Object(k.a)(zxe,"page_break","unlink-vertical"),Object(k.a)(zxe,"costs","dollar"),zxe),bye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={hideRates:!0,hideMultiselect:!1,showAddAllowanceModal:!1,showAddReimbursementModal:!1,showAddLabourModal:!1,showAddLahaModal:!1,reportHeading:"",errorReportHeading:"",reportSubHeading:"",errorReportSubHeading:"",droppable:[],list:[],assessmentReport:{},hoverHeading:!1,hoverSubHeading:!1,oldList:[],show:!1,offSet:{},selectedSection:0,newSection:{}},e.handleModalForCopyToJob=function(e){},e.handleCopyToLink=function(e){},e.onDragEnd=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.match.params,a=r.id,o=r.reportId,i=n.source,c=n.destination){t.next=4;break}return t.abrupt("return");case 4:t.t0=i.droppableId,t.next=t.t0===c.droppableId?7:"ITEMS"===t.t0?26:44;break;case 7:return s=[],s=uye(e.state.list,i.index,c.index),e.setState({list:s}),l=[],s.map((function(e,t){l.push({assessment_report_section_id:e.data.id,position:t})})),t.prev=12,e.props.dispatch(z4(!0)),t.next=16,ZW.assessmentReportSectionPositionUpdate(parseInt(o),l);case 16:e.setState({list:[]}),e.props.dispatch(q4(parseInt(a),parseInt(o))),e.props.dispatch(z4(!1)),t.next=25;break;case 21:t.prev=21,t.t1=t.catch(12),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 25:return t.abrupt("break",46);case 26:return u=pye[i.index],t.prev=28,e.props.dispatch(z4(!0)),d={position:c.index,type:u.content,heading:"Enter Heading here...",heading_style:"regular",heading_color:0,text:""},t.next=33,ZW.assessmentReportSectionCreate(parseInt(o),d);case 33:p=t.sent,e.setState({newSection:p}),e.props.dispatch(q4(parseInt(a),parseInt(o))),e.props.dispatch(z4(!1)),t.next=43;break;case 39:t.prev=39,t.t2=t.catch(28),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 43:return t.abrupt("break",46);case 44:return e.setState(dye(e.state.list,e.state.list,i,c)),t.abrupt("break",46);case 46:case"end":return t.stop()}}),t,null,[[12,21],[28,39]])})));return function(e){return t.apply(this,arguments)}}(),e.handleListUpdate=function(t){e.setState({list:t})},e.onMouseEnter=function(t){"heading"===t?e.setState({hoverHeading:!0}):"subHeading"===t&&e.setState({hoverSubHeading:!0})},e.handleBlurReportHeading=function(t){var n=t.target,r=n.value,a=n.name;e.setState(Object(k.a)({},a,r));var o=e.state,i=o.reportHeading,c=o.reportSubHeading;"reportHeading"===a?""===i||void 0===i||null===i?e.setState({errorReportHeading:"This field is required"}):(e.setState({errorReportHeading:""}),e.setState({hoverHeading:!1}),e.updateHeadingSubHeading()):"reportSubHeading"===a&&(""===c||void 0===c||null===c?e.setState({errorReportSubHeading:"This field is required"}):(e.setState({errorReportSubHeading:""}),e.setState({hoverSubHeading:!1}),e.updateHeadingSubHeading()))},e.updateHeadingSubHeading=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.match.params,r=n.id,a=n.reportId,o=e.state,i=o.reportHeading,c=o.reportSubHeading,!r||!a){t.next=16;break}return t.prev=3,e.props.dispatch(z4(!0)),s={subheading:c,heading:i},t.next=8,ZW.assessmentReportHeading(parseInt(r),parseInt(a),s);case 8:e.props.dispatch(q4(parseInt(r),parseInt(a))),e.props.dispatch(z4(!1)),t.next=16;break;case 12:t.prev=12,t.t0=t.catch(3),Oj(uj.Danger,"This status can't be applied"),e.props.dispatch(z4(!1));case 16:case"end":return t.stop()}}),t,null,[[3,12]])}))),e.handleReportHeading=function(t){var n=t.target,r=n.value,a=n.name;e.setState(Object(k.a)({},a,r))},e.renderHRLine=function(){return Object(a.jsx)("div",{className:"hr-lines",children:Object(a.jsx)("hr",{})})},e.handleContextMenu=function(t){t.preventDefault(),e.setState({show:!0,offSet:{left:t.clientX,top:t.clientY}})},e.handleSection=function(t){e.setState({selectedSection:t})},e.handleContextMenuSelect=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.match.params,a=r.reportId,o=r.id,i=pye.filter((function(e){return"room"!==e.content&&"subheading"!==e.content})),c=i[n.itemId],t.prev=3,e.props.dispatch(z4(!0)),s={position:e.state.selectedSection+1,type:c.content,heading:"Enter Heading here...",heading_style:"regular",heading_color:0,text:""},t.next=8,ZW.assessmentReportSectionCreate(parseInt(a),s);case 8:l=t.sent,e.setState({newSection:l}),e.props.dispatch(q4(parseInt(o),parseInt(a))).then((function(){e.props.dispatch(z4(!1)).then((function(){}))})),t.next=17;break;case 13:t.prev=13,t.t0=t.catch(3),Oj(uj.Danger,"Server Error"),e.props.dispatch(z4(!1));case 17:case"end":return t.stop()}}),t,null,[[3,13]])})));return function(e){return t.apply(this,arguments)}}(),e.getContactInformation=function(t){var n={name:"",address:""};if(t.contact_type===wv.person){n.name="".concat(t.first_name||"-- "," ").concat(t.last_name||"--");var r=t.addresses.find((function(e){return e.type===Sv.street}));n.address=(null===r||void 0===r?void 0:r.full_address)||"--"}else if(t.contact_type===wv.company){n.name=(null===t||void 0===t?void 0:t.legal_name)||"--";var a=t.addresses.find((function(e){return e.type===Sv.street}));n.address=(null===a||void 0===a?void 0:a.full_address)||"--"}return e.renderPrepared(n.name,n.address)},e.renderPrepared=function(e,t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:e||"--"}),Object(a.jsx)("div",{children:t||"--"})]})},e.preparedInformation=function(){var t,n,r=e.props,a=r.contacts,o=r.job,i=null===a||void 0===a||null===(t=a.data)||void 0===t?void 0:t.find((function(e){return e.assignment_type.name===tv.BROKER}));if(i)n=e.getContactInformation(i);else if(!n){var c,s=null===a||void 0===a||null===(c=a.data)||void 0===c?void 0:c.find((function(e){return e.assignment_type.name===tv.LOS_ADJUSTOR}));s&&(n=e.getContactInformation(s))}if(!n){var l,u=null===o||void 0===o||null===(l=o.data)||void 0===l?void 0:l.invoice_to_contact;n=e.renderPrepared(null===u||void 0===u?void 0:u.contact_name,null===u||void 0===u?void 0:u.contact_address.full_address)}return n},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,n=t.id,r=t.reportId;this.props.dispatch(BD(n)),this.props.dispatch(DP(n)),this.props.dispatch(z4(!0)),this.props.dispatch(q4(parseInt(n),parseInt(r))),document.addEventListener("click",(function(){e.state.show&&e.setState({show:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(e.arReport.data.arReport!==this.props.arReport.data.arReport&&this.props.arReport.data.arReport){var n=this.props.arReport.data;this.props.dispatch(z4(!1)),this.setState({assessmentReport:n.arReport},(function(){var e=t.state.assessmentReport;if(e){null===e.heading?t.setState({reportHeading:"Assessment Report"}):t.setState({reportHeading:e.heading}),null===e.subheading?t.setState({reportSubHeading:"SubHeading - Assessment Report"}):t.setState({reportSubHeading:e.subheading});var n=[];e.sections&&e.sections.map((function(e){pye.map((function(r,a){if(e.type===r.content){var o,i={id:Object(Zxe.a)(),label:r.content,icon:r.icon,content:r.content,showModal:e.id===(null===(o=t.state.newSection)||void 0===o?void 0:o.id),showDeleteModal:!1,data:e,hover:!1};n.push(i)}}))})),t.setState({list:n})}}))}}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getMenuItems",value:function(){var e=this,t=this.props.match.params,n=t.id,r=t.reportId;return[{path:"/usage-and-actuals/".concat(n,"/buildCosting/").concat(r),label:"Build Costings",icon:Xf.CashFileIcon,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildCosting/").concat(r)),type:"costing"},{path:"/usage-and-actuals/".concat(n,"/buildDocument/").concat(r),label:"Build Document",icon:Xf.FileEdit,isActive:this.isActive("/usage-and-actuals/".concat(n,"/buildDocument/").concat(r)),type:"costing"}].map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"getItems",value:function(){var e=this;return pye.filter((function(e){return"room"!==e.content&&"subheading"!==e.content})).map((function(t){var n=e.props.jobCostingCounters.data;return t.value=n&&n.data[t.type],Object.assign({},t)}))}},{key:"render",value:function(){var e,t=this,n=this.props,r=n.match.params,o=r.reportId,i=(r.id,n.arReport),c=null===(e=this.props.job)||void 0===e?void 0:e.data,s=c?zy.getJobAddress(c):"",l=c&&zy.getJobName(c);l&&(s+=" | ".concat(l));var u=this.state,d=u.reportHeading,p=u.errorReportHeading,h=(u.reportSubHeading,u.errorReportSubHeading,u.assessmentReport);return Object(a.jsx)(Cx.Consumer,{children:function(e){var n,r,u,b,f,m,j=ZW.isEditable(c,null===i||void 0===i||null===(n=i.latest_status)||void 0===n?void 0:n.status,e);return Object(a.jsxs)(ZN,{className:"d-flex flex-column",children:[c&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs",children:"Jobs"}),c&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(c.id),children:l}),c&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(c.id),children:"Quotations"}),c&&Object(a.jsxs)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(c.id,"/buildDocument/").concat(o),children:["Build Document #",o]}),!0===t.props.isArLoad.data.isArLoad&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(jbe,{jobTitle:s,modalForCopyToJOB:t.handleModalForCopyToJob,modalForCopyLink:t.handleCopyToLink,handleReportName:function(){},isEditable:j,isInvoiced:!0,onClickCreateInvoice:function(){}}),Object(a.jsxs)(iye,{children:[Object(a.jsx)(nfe.a,{onDragEnd:t.onDragEnd,children:Object(a.jsxs)(cye,{className:"d-flex h-100",children:[Object(a.jsxs)(nj,{noExpand:!0,children:[t.getMenuItems().map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)})),Object(a.jsx)(fk,{children:"ITEMS"}),t.getItems().map((function(e,t){return Object(a.jsx)(dfe,{item:e},t)}))]}),Object(a.jsxs)("div",{className:"flex-grow-1 overflow-auto",style:{backgroundColor:_.gray7},children:[Object(a.jsxs)("div",{className:"top-banner-hidden",children:[Object(a.jsx)("div",{className:"logo-div",children:Object(a.jsx)("img",{src:Xxe,className:"logo-img"})}),Object(a.jsxs)("div",{className:"details-banner",children:[Object(a.jsx)("h2",{className:"thin-title",children:null!==h.heading?h.heading:"Assessment Report"}),Object(a.jsxs)("div",{className:"inner-details-banner",children:[Object(a.jsxs)("p",{className:"font-size-16 ng-binding",children:["Date: ",h.date]}),Object(a.jsxs)("p",{className:"font-size-16 ng-binding",children:["Claim No. ",h.job&&h.job.claim_number]}),Object(a.jsxs)("p",{className:"font-size-16 ng-binding",children:["Steamatic Ref. ",h.job&&h.job.reference_number]})]})]})]}),Object(a.jsxs)($N,{children:[Object(a.jsx)(eE,{children:Object(a.jsx)(oE,{children:t.state.hoverHeading?Object(a.jsxs)("div",{children:[Object(a.jsx)(sye,{type:"text",name:"reportHeading",value:d,onChange:t.handleReportHeading,onBlur:t.handleBlurReportHeading}),Object(a.jsx)(lye,{children:p})," "]}):Object(a.jsx)(tE,{onClick:function(){return t.onMouseEnter("heading")},className:"assessment-heading mt-4",children:d||"Assessment Report"})})}),Object(a.jsxs)(uE,{children:[Object(a.jsx)("div",{className:"flex-row",children:Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)(dE,{children:"Prepared for:"}),t.props.contacts.data&&(null===(r=t.props.contacts.data)||void 0===r?void 0:r.length)>0&&t.preparedInformation()]})}),t.renderHRLine(),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(dE,{className:"col-4",children:"Insurer:"}),Object(a.jsx)("span",{className:"col-8",children:(null===c||void 0===c||null===(u=c.insurer)||void 0===u?void 0:u.legal_name)||"--"})]}),Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(dE,{className:"col-4",children:"Reference No:"}),Object(a.jsx)("span",{className:"col-8",children:(null===c||void 0===c?void 0:c.reference_number)||"--"})]})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(dE,{className:"col-4",children:"Claim No:"}),Object(a.jsx)("span",{className:"col-8",children:(null===c||void 0===c?void 0:c.claim_number)||"--"})]}),Object(a.jsxs)("div",{className:"col-6",children:[Object(a.jsx)(dE,{className:"col-4",children:"Steamatic Ref:"}),Object(a.jsx)("span",{className:"col-8",children:l||"--"})]})]}),t.renderHRLine(),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)(dE,{className:"col-2",children:"Customer:"}),Object(a.jsx)("span",{className:"col-9",children:(null===c||void 0===c||null===(b=c.customer_contact)||void 0===b?void 0:b.contact_name)||"--"})]}),Object(a.jsxs)("div",{className:"col-12",children:[Object(a.jsx)(dE,{className:"col-2",children:"Site Address:"}),Object(a.jsx)("span",{className:"col-9",children:(null===c||void 0===c||null===(f=c.customer_contact)||void 0===f||null===(m=f.contact_address)||void 0===m?void 0:m.full_address)||"--"})]})]})]}),Object(a.jsx)(rE,{onContextMenu:t.handleContextMenu,children:Object(a.jsx)(Kxe,{list:t.state.list,updatedList:t.handleListUpdate,sectionPosition:t.handleSection})})]})]})]})}),Object(a.jsx)(tye.a,{show:t.state.show,offset:t.state.offSet,children:Object(a.jsx)($xe.a,{vertical:!0,style:{display:"inline-block"},onSelect:t.handleContextMenuSelect,children:t.getItems().map((function(e,t){return Object(a.jsx)(eye.a,{text:e.label,icon:hye[e.content],cssStyle:{fontSize:"16px"}},t)}))})})]})]})}})}}]),n}(p.PureComponent),fye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary,jobCostingCounters:e.currentJobUsageAndActuals.costingCounters,isArLoad:e.document,arReport:e.document,contacts:e.currentJobContacts}})))(bye);function mye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return mye=function(){return e},e}var jye=y.default.h4(mye(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),vye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(jye,{color:"#000000",type:"bold",children:"Enter your text here..."})})})})})})})}}]),n}(p.PureComponent),Oye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(vye);function gye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return gye=function(){return e},e}var xye=y.default.h4(gye(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),yye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{style:{flex:1},children:Object(a.jsx)(xye,{color:"#000000",type:"heading",children:"Enter your text here..."})})})})})})})}}]),n}(p.PureComponent),_ye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(yye);function wye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return wye=function(){return e},e}var Sye=y.default.h4(wye(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),kye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Sye,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsx)("p",{children:"No Text Added"})]})})})})})})}}]),n}(p.PureComponent),Cye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(kye);function Nye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return Nye=function(){return e},e}var Eye=y.default.h4(Nye(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Aye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Eye,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsx)("ul",{children:Object(a.jsx)("li",{children:"Bullet List"})})]})})})})})})}}]),n}(p.PureComponent),Iye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(Aye);function Tye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return Tye=function(){return e},e}var Rye=y.default.h4(Tye(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),Dye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(Rye,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsx)("ol",{children:Object(a.jsx)("li",{children:"Number List"})})]})})})})})})}}]),n}(p.PureComponent),Mye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(Dye),Lye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsx)("div",{className:"hr-lines",style:{flex:"0 0 calc(100% - 30px)"},children:Object(a.jsx)("hr",{})})})})})})}}]),n}(p.PureComponent),Pye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(Lye),Fye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{className:"break-page",style:{flex:1},children:Object(a.jsx)("div",{className:"hover-content-overlay",children:"\u2014 \u2014 PAGE BREAK \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014 \u2014"})})})})})}}]),n}(p.PureComponent),Uye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(Fye);function Bye(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Bye=function(){return e},e}function Vye(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return Vye=function(){return e},e}function Jye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-style: italic;\n  color: ",";\n  font-size: ",";\n"]);return Jye=function(){return e},e}var qye=y.default.h4(Jye(),(function(e){return e.color}),(function(e){return"text"===e.type?"18px":"heading"===e.type?"22px":"subheading"===e.type?"20px":"18px"})),zye=y.default.div(Vye(),(function(e){return e.width})),Gye=y.default.div(Bye()),Wye=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)(qye,{color:"#000000",type:"bold",children:"Enter your text here..."}),Object(a.jsxs)("div",{className:"image-div",children:[Object(a.jsx)(zye,{width:"90%",children:Object(a.jsx)(Gye,{style:{position:"absolute"},children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg",style:{objectFit:"contain"}})})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Add photo description here.."})})]})]})})})})})})}}]),n}(p.PureComponent),Hye=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(Wye);function Yye(){var e=Object(f.a)(["\n  font-weight: 300;\n  margin-bottom: 10px;\n  font-size: 18px;\n"]);return Yye=function(){return e},e}function Qye(){var e=Object(f.a)(["\n  position: relative !important;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: 50%;\n  height: 335px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return Qye=function(){return e},e}function Kye(){var e=Object(f.a)(["\n  display: flex;\n  width: ",";\n  border: 1px solid lightgray;\n  flex-direction: column;\n  margin-bottom: 10px;\n"]);return Kye=function(){return e},e}var Zye=y.default.div(Kye(),(function(e){return e.width})),Xye=y.default.div(Qye()),$ye=y.default.h4(Yye()),e_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)("div",{className:"overlay-effect",children:Object(a.jsx)(eE,{children:Object(a.jsx)(aE,{children:Object(a.jsx)("div",{style:{display:"flex"},children:Object(a.jsxs)("div",{style:{flex:1},children:[Object(a.jsx)($ye,{children:"Photos"}),Object(a.jsxs)("div",{className:"image-div",style:{display:"flex",flexWrap:"wrap",marginLeft:"-15px"},children:[Object(a.jsxs)("div",{className:"grid-box2",children:[Object(a.jsx)("div",{children:Object(a.jsx)(Zye,{width:"100%",children:Object(a.jsx)(Xye,{style:{transform:"rotateZ(".concat(90,"deg)"),position:"absolute"},children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg",className:"object-fit"})})})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Add photo description here.."})})]}),Object(a.jsxs)("div",{className:"grid-box2",children:[Object(a.jsx)("div",{children:Object(a.jsx)(Zye,{width:"100%",children:Object(a.jsx)(Xye,{style:{transform:"rotateZ(".concat(0,"deg)"),position:"absolute"},children:Object(a.jsx)("img",{src:"https://res.cloudinary.com/demo/image/upload/w_250,h_250,c_mfit/w_700/sample.jpg",className:"object-fit"})})})}),Object(a.jsx)("div",{children:Object(a.jsx)("p",{children:"Add photo description here.."})})]})]})]})})})})})})}}]),n}(p.PureComponent),t_e=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(e_e),n_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(pfe.Flex,{justifyContent:"space-between",style:{height:"100%"},children:Object(a.jsxs)(pfe.Flex,{style:{width:"100%",height:"100%"},flexDirection:"column",children:[Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Uye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Oye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(_ye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Cye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Iye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Mye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Pye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Uye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(Hye,{})})}),Object(a.jsx)("div",{className:"assessment-component-drag-drop-main-div",children:Object(a.jsx)("div",{style:{display:"inline-flex",width:"100%"},children:Object(a.jsx)(t_e,{})})})]})})})}}]),n}(p.PureComponent),r_e=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(n_e),a_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:Object(a.jsx)(ZN,{className:"d-flex flex-column",children:Object(a.jsx)("div",{className:"w-100 h-100",style:{backgroundColor:_.gray7},children:Object(a.jsx)("div",{className:"container-center",children:Object(a.jsx)("div",{className:"container-width",children:Object(a.jsxs)($N,{children:[Object(a.jsx)("div",{className:"page-break-after",children:Object(a.jsxs)("div",{className:"top-banner-hidden",children:[Object(a.jsx)("div",{className:"logo-div",children:Object(a.jsx)("img",{src:Xxe,className:"logo-img"})}),Object(a.jsxs)("div",{className:"details-banner",children:[Object(a.jsx)("h2",{className:"thin-title",children:"Water Report"}),Object(a.jsxs)("h3",{className:"thin",children:["For",Object(a.jsx)("span",{className:"ng-binding",children:" Sedgwick"}),Object(a.jsx)("span",{className:"ng-binding ng-hide",children:" AAI Limited"})]}),Object(a.jsxs)("div",{className:"inner-details-banner",children:[Object(a.jsx)("p",{className:"font-size-16 ng-binding",children:"Date: 24 October 2019"}),Object(a.jsx)("p",{className:"font-size-16 ng-binding",children:"Claim No. E005366953"}),Object(a.jsx)("p",{className:"font-size-16 ng-binding",children:"Steamatic Ref. 1610071"})]})]})]})}),Object(a.jsx)("div",{className:"break-page",children:" "}),Object(a.jsx)(eE,{children:Object(a.jsxs)(oE,{children:[Object(a.jsx)(tE,{className:"assessment-heading mt-4",children:"Assessment Report"}),Object(a.jsx)(nE,{className:"assessment-heading",children:"Assessment Report - Sub Heading"}),Object(a.jsx)(rE,{children:Object(a.jsx)(r_e,{})})]})})]})})})})})})}}]),n}(p.PureComponent),o_e=Object(sg.compose)(O.g,Object(b.b)((function(e){return{arReport:e.document}})))(a_e);function i_e(){var e=Object(f.a)(["\n  border-bottom: 2px solid ",";\n  padding-bottom: 10px;\n"]);return i_e=function(){return e},e}function c_e(){var e=Object(f.a)(["\n  :not(:last-child){\n    margin-bottom: 20px;\n  }\n"]);return c_e=function(){return e},e}var s_e=y.default.div(c_e()),l_e=y.default.div(i_e(),_.gray2),u_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.hazard;return Object(a.jsx)(s_e,{children:Object(a.jsxs)(fQ.b,{children:[Object(a.jsx)(fQ.d,{color:"red lighten-1",children:e.name}),Object(a.jsxs)(fQ.c,{children:[Object(a.jsxs)(l_e,{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Risk"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)("strong",{children:"Control"})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Responsibility"})})]}),Object(a.jsxs)("div",{className:"row m-0 pt-2",children:[Object(a.jsx)("div",{className:"col-3",children:e.risks.join(", ")}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)("ul",{className:"pl-3",children:e.controls.map((function(e,t){return Object(a.jsx)("li",{children:e},t)}))})}),Object(a.jsx)("div",{className:"col-3",children:e.responsibilities.join(", ")})]})]})]})})}}]),n}(p.PureComponent),d_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)("div",{children:this.props.hazards.map((function(e,t){return Object(a.jsx)(u_e,{hazard:e},t)}))})}}]),n}(p.PureComponent);function p_e(){var e=Object(f.a)(["\n  img{\n    max-width: 250px;\n    max-height: 100px;\n  }\n"]);return p_e=function(){return e},e}var h_e=y.default.div(p_e()),b_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.signature,t=e.dataURL,n=e.signedBy,r=e.signedAt;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{className:"mr-3",children:"Name:"})," ",n.name]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{className:"mr-3",children:"Date:"})," ",r.format(lv)]}),Object(a.jsx)("div",{children:Object(a.jsx)("strong",{className:"mr-3",children:"Signature:"})}),Object(a.jsx)(h_e,{children:Object(a.jsx)("img",{src:t,alt:"Signature"})})]})}}]),n}(p.PureComponent),f_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadAssessment=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0,assessment:void 0}),t.prev=1,t.next=4,zy.getRiskAssessmentDetail(e.props.job.id,e.props.id);case 4:n=t.sent,e.setState({assessment:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({assessment:null});case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadAssessment()}},{key:"componentDidUpdate",value:function(e){this.props.active&&(e.id!==this.props.id||void 0===this.state.assessment&&!this.state.loading)&&this.loadAssessment()}},{key:"render",value:function(){var e,t,n,r,o,i,c=this.state,s=c.loading,l=c.assessment,u=this.props,d=u.id,p=u.job,h=u.contacts;return Object(a.jsxs)("div",{children:[s&&Object(a.jsx)(Nv,{size:40}),null===l&&Object(a.jsx)(a.Fragment,{children:"No risk assessment found"}),l&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"print-only",children:[Object(a.jsxs)("div",{className:"",children:[Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("img",{src:Xxe,alt:"Steamatic Logo",className:"logo-img",height:60})}),Object(a.jsx)("div",{className:"text-danger text-center",children:"Delivering Solutions, Saving Property... Restoring Lives!"})]}),Object(a.jsx)("div",{className:"my-3 text-center",children:Object(a.jsx)("h2",{className:"text-uppercase",children:Object(a.jsx)("strong",{children:"Risk Assessment"})})})]}),Object(a.jsxs)("div",{className:"mb-3 print-border print-table",children:[Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Company:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:hO.getContactName(p.company_location)||"N/A"})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Address:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:null===(e=p.company_location)||void 0===e||null===(t=e.addresses)||void 0===t?void 0:t[0].full_address})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Phone Number:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:(null===(n=p.company_location)||void 0===n?void 0:n.business_phone)||(null===(r=p.company_location)||void 0===r?void 0:r.mobile_phone)})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Risk Assessment Date:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:l.created_at.format(lv)})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Risk Assessment ID:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:l.uid})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Inquiry Number:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:zy.getJobName(p)})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Customer Name:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:hO.getContactName(zy.extractContact(tv.CUSTOMER,h))})})]}),Object(a.jsxs)("div",{className:"row m-0 p-2",children:[Object(a.jsx)("div",{className:"col-3 text-right print-text-left p-0 mr-3",children:Object(a.jsx)("strong",{children:"Site Address:"})}),Object(a.jsx)("div",{children:Object(a.jsx)("span",{children:null===(o=p.site_address)||void 0===o?void 0:o.full_address})})]})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)(d_e,{hazards:l.hazards}),Object(a.jsx)("hr",{className:"my-5"}),Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Risk Assessment Completed By"})}),Object(a.jsx)(b_e,{signature:l.signature}),l.teamSignature.length&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{className:"my-5"}),Object(a.jsxs)("div",{className:"row",children:[(i=j.a.filter(l.teamSignature,{type:"employee"}),i.length?Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Signed By Steamatic Employees"})}),i.map((function(e,t){return Object(a.jsx)(b_e,{signature:e},t)}))]}):null),function(e){return e.length?Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Signed By Sub Contractor"})}),e.map((function(e,t){return Object(a.jsx)(b_e,{signature:e},t)}))]}):null}(j.a.filter(l.teamSignature,{type:"contractor"}))]})]})]})]})]},d)}}]),n}(p.PureComponent);function m_e(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return m_e=function(){return e},e}var j_e=y.default.div(m_e()),v_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.data||[],scrollable:"none"}},e.lastSelectedIndex=0,e.selectionChange=function(t){var n,r,a=e.state.gridState.data.find((function(e){return e===t.dataItem}));a&&(a.selected=!a.selected,e.setState({gridState:Object(c.a)({},e.state.gridState)}),null===(n=(r=e.props).onSelectionChange)||void 0===n||n.call(r,a,a.selected))},e.headerSelectionChange=function(t){var n,r,a=t.syntheticEvent.target.checked;e.state.gridState.data.forEach((function(e){e.selected=a})),e.setState({gridState:Object(c.a)({},e.state.gridState)}),null===(n=(r=e.props).onSelectionChange)||void 0===n||n.call(r,Object(aj.a)(e.state.gridState.data),a)},e.viewDetail=function(t){return function(){e.props.history.push(e.props.pageUrl+"/view/"+t.id)}},e.ID=function(e){return Object(a.jsx)(O_e,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsxs)(a.Fragment,{children:["RA-",t.id]})}}))},e.Date=function(e){return Object(a.jsx)(O_e,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data,n=j.a.get(t,"created_at");return Object(a.jsx)(a.Fragment,{children:n?pm()(n).format(lv):""})}}))},e.Actions=function(t){return Object(a.jsx)(O_e,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data;return Object(a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.viewDetail(n),children:"View Details"})})}}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){if(this.props.data!==this.state.gridState.data){var e=this.state.gridState;e.data=this.props.data,this.setState({gridState:Object(c.a)({},e)})}}},{key:"render",value:function(){return Object(a.jsx)(j_e,{className:"h-100",children:Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{onSelectionChange:this.selectionChange,onRowClick:this.selectionChange,onHeaderSelectionChange:this.headerSelectionChange,selectedField:this.state.gridState.data.length?"selected":void 0,children:[!!this.state.gridState.data.length&&Object(a.jsx)(F_.b,{field:"selected",width:"50px",headerSelectionValue:-1===this.state.gridState.data.findIndex((function(e){return!e.selected}))}),Object(a.jsx)(F_.b,{field:"created_at",title:"Completed At",width:"250px",cell:this.Date}),Object(a.jsx)(F_.b,{field:"id",title:"Risk Assessment Id",cell:this.ID}),Object(a.jsx)(F_.b,{field:"user.full_name",title:"Completed By"}),Object(a.jsx)(F_.b,{width:"110px",cell:this.Actions,sortable:!1})]}))})}}]),n}(p.PureComponent);function O_e(e){var t=e.Component,n=e.dataItem,r=e.field,o=e.cellProps;return Object(a.jsx)("td",Object(c.a)(Object(c.a)({},o),{},{children:Object(a.jsx)(t,{data:n,value:r?j.a.get(n,r):void 0})}))}var g_e=Object(sg.compose)(Object(b.b)(),O.g)(v_e),x_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={selected:[]},e.loadRiskAssessments=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,zy.getRiskAssessments(e.props.job.id);case 4:n=t.sent,e.setState({assessments:n}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),e.setState({assessments:[]});case 11:return t.prev=11,e.setState({loading:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[1,8,11,14]])}))),e.selectionChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:i=e.state.selected,r?j.a.isArray(n)?i=n:i.push(n):j.a.isArray(n)?i=[]:i.splice(i.findIndex((function(e){return e.id===n.id})),1),e.setState({selected:i}),null===(a=(o=e.props).onSelectionChange)||void 0===a||a.call(o,Object(aj.a)(i));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadRiskAssessments()}},{key:"componentDidUpdate",value:function(){this.props.active&&(this.state.assessments||this.state.loading||this.loadRiskAssessments())}},{key:"render",value:function(){var e=this.state,t=e.loading,n=e.assessments;return Object(a.jsxs)("div",{children:[t&&Object(a.jsx)(Nv,{size:40}),n&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(g_e,Object(c.a)(Object(c.a)({},this.props),{},{data:n,onSelectionChange:this.selectionChange}))})]})}}]),n}(p.PureComponent);function y_e(){var e=Object(f.a)(["\n  text-align: right;\n  background: ",";\n"]);return y_e=function(){return e},e}function __e(){var e=Object(f.a)(["\n  border: 1px solid ",";\n"]);return __e=function(){return e},e}var w_e=y.default.div(__e(),_.gray2),S_e=y.default.div(y_e(),_.blue0),k_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,zy.sendRiskAssessmentEmail(e.props.job.id,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,e.sendEmail(Bx(n));case 3:Oj(uj.Success,"Email sent successfully"),e.gotoAssessmentsList(),t.next=9;break;case 7:t.prev=7,t.t0=t.catch(0);case 9:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}(),e.emailOptionLabel=function(e){var t=hO.getContactName(e);return t?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{className:"trim mr-2",children:e.email}),Object(a.jsxs)("span",{children:[Object(a.jsx)("span",{className:"trim",children:"<"}),t,Object(a.jsx)("span",{className:"trim",children:">"})]})]}):(null===e||void 0===e?void 0:e.email)?e.email:Jv(null===e||void 0===e?void 0:e.value)?void 0:e.value},e.emailOptionValue=function(e,t){return(null===e||void 0===e?void 0:e.email)?e.email:Jv(null===e||void 0===e?void 0:e.value)||null===e||void 0===e?void 0:e.value},e.gotoAssessmentsList=function(){e.props.history.replace(e.props.pageUrl+"/prev")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e;(null===(e=this.props.initialValues.assessments)||void 0===e?void 0:e.length)||this.gotoAssessmentsList()}},{key:"render",value:function(){var e,t=this.props,n=t.contacts,r=t.initialValues.assessments,o=t.handleSubmit,i=t.submitting;return Object(a.jsxs)(a.Fragment,{children:[i&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{onSubmit:o(this.onSubmit),children:[Object(a.jsx)("div",{className:"",children:Object(a.jsxs)("div",{className:"row ml-0",children:[Object(a.jsx)("div",{className:"",children:Object(a.jsx)("label",{htmlFor:"",className:"m-0 pt-2",children:"To: "})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"to",placeholder:"Select...",validate:Dv,component:AL,options:(null===n||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel})})]})}),Object(a.jsxs)("div",{className:"row ml-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"",children:Object(a.jsx)("label",{htmlFor:"",className:"m-0 pt-2",children:"Cc: "})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"cc",placeholder:"Select...",component:AL,options:(null===n||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel})})]})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"",children:Object(a.jsx)("label",{htmlFor:"",className:"m-0 pt-2",children:"Bcc: "})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"bcc",placeholder:"Select...",component:AL,options:(null===n||void 0===n?void 0:n.filter((function(e){return!!e.email})))||[],isMulti:!0,getOptionValue:this.emailOptionValue,getOptionLabel:this.emailOptionLabel})})]})})]}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"d-flex text-info",children:[Object(a.jsx)("div",{className:"mr-2",children:"Attachments:"}),Object(a.jsx)("div",{className:"flex-grow-1",children:null===r||void 0===r?void 0:r.map((function(e){return Object(a.jsxs)("span",{className:"mr-1 badge badge-danger p-2",children:[Object(a.jsx)("span",{className:"fa fa-file-pdf"})," RA-",e.id,".PDF"]},e.id)}))})]})}),Object(a.jsx)("div",{children:Object(a.jsxs)(w_e,{children:[Object(a.jsx)(Hv.a,{name:"body",placeholder:"Enter body here...",component:HA,initialValue:null===(e=this.props.initialValues)||void 0===e?void 0:e.body,color:_.blue0,onSave:this.sendEmail,validate:Uv,disableAttachments:!0,disableMentionControl:!0,disableTemplatesControl:!0,hideCheckIcon:!0}),Object(a.jsx)(S_e,{children:Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",disabled:this.props.submitting,style:{borderRadius:0,height:"40px"},children:"Send Email"})})]})})]})]})}}]),n}(p.PureComponent),C_e=Tv({},(function(e,t){var n,r,a,o,i,c;return t.to=j.a.some(null===(n=e.to)||void 0===n||null===(r=n.map)||void 0===r?void 0:r.call(n,(function(e){return null===e||void 0===e?void 0:e.email})),Jv)?"Invalid e-mail addresses":void 0,t.cc=j.a.some(null===(a=e.cc)||void 0===a||null===(o=a.map)||void 0===o?void 0:o.call(a,(function(e){return null===e||void 0===e?void 0:e.email})),Jv)?"Invalid e-mail addresses":void 0,t.bcc=j.a.some(null===(i=e.bcc)||void 0===i||null===(c=i.map)||void 0===c?void 0:c.call(i,(function(e){return null===e||void 0===e?void 0:e.email})),Jv)?"Invalid e-mail addresses":void 0,t})),N_e=Object(sg.compose)(Object(jv.a)({form:"RISK_ASSESSMENTEmail_FORM",validate:C_e}),O.g)(k_e),E_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!1,prevData:[],currentAssessment:null},e.pageUrl=e.props.match.path.replace(/([^:]+)[^.]+/,"$1").replace(/\/$/,"")+"/"+e.props.match.params.id+"/risk-assessment",e.gotoEmailView=function(){e.props.history.push(e.pageUrl+"/share",{assessments:e.state.selectedItems})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.dispatch(BD(this.props.match.params.id)),this.props.dispatch(DP(this.props.match.params.id))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this.props.match.params.id;return Object(a.jsx)("div",{children:Object(a.jsx)($ce,{jobId:parseInt(e)})})}},{key:"renderContentPage",value:function(){var e,t=this,n=this.props.match.params.tab||"current",r=this.props.job.data,o=this.props.contacts.data;return Object(a.jsxs)("div",{className:"h-100 pt-4",children:[r&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(r.id),children:"On-Site Data & Contracts"}),r&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(r.id,"/risk-assessment"),children:"Risk Assessment"}),Object(a.jsxs)("div",{className:"d-flex flex-column h-100",children:[Object(a.jsx)("div",{className:"px-5 print-hide",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:"Risk Assessment"})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end",children:"prev"===n&&!!(null===(e=this.state.selectedItems)||void 0===e?void 0:e.length)&&Object(a.jsx)("button",{className:"btn btn-outline-primary",onClick:this.gotoEmailView,children:"Send Risk Assessments As PDF"})})]})}),Object(a.jsxs)("div",{className:"d-flex flex-column h-100 flex-grow-1",style:{overflow:"auto"},children:[Object(a.jsxs)(fQ.i,{className:"nav-tabs mt-2 mx-5 print-hide",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{exact:!0,className:"nav-link",to:this.pageUrl,role:"tab",children:"Current"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:this.pageUrl+"/prev",role:"tab",children:"Previous"})}),"view"===n&&Object(a.jsx)(fQ.j,{children:Object(a.jsx)("span",{className:"nav-link active",role:"tab",children:"Previous Version Detail"})}),"share"===n&&Object(a.jsx)(fQ.j,{children:Object(a.jsx)("span",{className:"nav-link active",role:"tab",children:"Share"})})]}),Object(a.jsxs)(fQ.k,{activeItem:n,className:"position-relative px-5 d-flex flex-column h-100",children:[Object(a.jsx)(fQ.l,{tabId:"current",role:"tabpanel",children:Object(a.jsx)("div",{className:"pt-3 pb-5",children:Object(a.jsx)(f_e,{active:"current"===n,job:r,contacts:o,id:0})})}),Object(a.jsx)(fQ.l,{tabId:"prev",role:"tabpanel",children:Object(a.jsx)("div",{className:"py-3",children:Object(a.jsx)(x_e,{active:"prev"===n,job:r,pageUrl:this.pageUrl,onSelectionChange:function(e){t.setState({selectedItems:e})}})})}),Object(a.jsx)(fQ.l,{tabId:"view",role:"tabpanel",children:Object(a.jsx)("div",{className:"pt-3 pb-5",children:this.props.match.params.assessmentId&&Object(a.jsx)(f_e,{active:!0,job:r,contacts:o,id:+this.props.match.params.assessmentId})})}),"share"===n&&Object(a.jsx)(fQ.l,{tabId:"share",role:"tabpanel",children:Object(a.jsx)("div",{className:"pt-3 pb-5",children:Object(a.jsx)(N_e,{pageUrl:this.pageUrl,job:r,contacts:o,initialValues:{assessments:this.state.selectedItems}})})})]})]})]})]})}},{key:"render",value:function(){return this.props.job.data&&this.props.contacts.data?Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}):Object(a.jsx)(Nv,{size:40})}}]),n}(p.PureComponent),A_e=Object(sg.compose)(Object(b.b)((function(e){return{job:e.currentJob,contacts:e.currentJobContacts}})))(E_e),I_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).reportMenuItems=function(t,n,r){var a=t.has(vx.ASSESSMENT_REPORTS_MANAGE),o=e.props,i=o.jobId,c=o.dispatch;return[{name:"View / Edit",disabled:!a||r,onClick:function(){return e.editReport(n)}},{name:"Duplicate to new...",disabled:!a,onClick:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{ZW.assessmentReportDuplicate(i,n.id).then((function(){c(jH(i)),Oj(uj.Success,"Duplicate to new report created...")}))}catch(t){Oj(uj.Danger,"Server Error")}case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{type:"divider"},{name:"Delete",disabled:!a||r||"client_approved"===n.status,onClick:function(){return e.deleteReport(n)}}]},e}return Object(l.a)(n,[{key:"editReport",value:function(e){var t=this.props.jobId;this.props.history.push("/usage-and-actuals/".concat(t,"/buildCosting/").concat(e.id))}},{key:"deleteReport",value:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=this.props.dispatch,!t.id){e.next=20;break}return r=this.props.jobId,e.next=5,n(iw("Confirm","Are you sure you want to delete this assessment report? While the text in this report will be deleted, the original data from the onsite jobs will remain."));case 5:if(!e.sent){e.next=19;break}return e.prev=7,e.next=10,ZW.assessmentReportDelete(r,t.id);case 10:n(jH(r)),e.next=16;break;case 13:e.prev=13,e.t0=e.catch(7),Oj(uj.Danger,"Server Error");case 16:case 19:return e.abrupt("return",Promise.resolve());case 20:case"end":return e.stop()}}),e,this,[[7,13]])})));return function(t){return e.apply(this,arguments)}}()},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:5,children:"No items found"})})}},{key:"renderRows",value:function(e){var t=this,n=this.props,r=n.assessmentReportSummary,o=n.jobIsClosed;return r?r.map((function(n){var r,i;return Object(a.jsxs)("tr",{children:[Object(a.jsx)(g9,{children:pm()(n.date).format(iv)}),Object(a.jsx)(g9,{children:n.report}),Object(a.jsx)(g9,{children:(null===n||void 0===n||null===(r=n.invoice)||void 0===r?void 0:r.id)?"#".concat(null===n||void 0===n||null===(i=n.invoice)||void 0===i?void 0:i.id):""}),Object(a.jsx)(x9,{children:vm(n.total_amount||0)}),Object(a.jsx)(x9,{children:n.status}),Object(a.jsx)(x9,{children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:t.reportMenuItems(e,n,o),direction:"right"})})]},n.id)})):null}},{key:"render",value:function(){var e=this,t=this.props.assessmentReportSummary;return Object(a.jsx)(Cx.Consumer,{children:function(n){return n.has(vx.ASSESSMENT_REPORTS_VIEW)?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(tU,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(k9,{scope:"col",width:"15%",children:"Date"}),Object(a.jsx)(k9,{scope:"col",style:{whiteSpace:"nowrap"},children:"Report"}),Object(a.jsx)(k9,{scope:"col",style:{whiteSpace:"nowrap"},children:"Invoice Id"}),Object(a.jsx)(C9,{scope:"col",width:"20%",children:"Total Amount"}),Object(a.jsx)(C9,{scope:"col",width:"20%",children:"Status"}),Object(a.jsx)(C9,{scope:"col",width:"5%",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:t&&t.length>0?e.renderRows(n):e.renderNodata()})]})}):null}})}}]),n}(p.PureComponent),T_e=Object(O.g)(Object(b.b)()(I_e));function R_e(){var e=Object(f.a)(["\n  display: flex;\n  flex-direction: row;\n"]);return R_e=function(){return e},e}var D_e=y.default.div(R_e()),M_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onAddReport=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.id,r={date:new Date,savetype:"Stage 1",value:[]},t.next=4,e.props.dispatch(mH());case 4:return t.next=6,ZW.newReportCreate(parseInt(n),r);case 6:a=t.sent,e.props.history.push("/usage-and-actuals/".concat(n,"/buildCosting/").concat(a.id));case 8:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.match.params.id;(0,e.dispatch)(jH(parseInt(t)))}},{key:"renderAdditionalHeaderLayout",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.id,o=n.data&&n.data.latest_status.status===zj.Closed||!n.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var n=t.has(vx.JOBS_USAGE_VIEW),i=t.has(vx.ASSESSMENT_REPORTS_MANAGE);return n?Object(a.jsx)("div",{children:Object(a.jsxs)(D_e,{children:[Object(a.jsx)($ce,{jobId:parseInt(r)}),i&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Xg,{className:"btn",disabled:o,onClick:e.onAddReport,style:{marginLeft:"10px"},children:"New Report / Quote"})})]})}):null}})}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,n=e.currentJobUsageSummary,r=n.data,o=n.loading,i=t.data&&t.data.latest_status.status===zj.Closed||!t.data,c=r&&r.data?r.data.assessment_reports:[],s=t.data&&null!==t.data.id?t.data.id:0;return Object(a.jsxs)(a.Fragment,{children:[t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(t.data.id),children:"Usage And Actuals"}),t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(t.data.id,"/report"),children:"Reports"}),o&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(JC,{className:"p-4",children:Object(a.jsx)(T_e,{jobIsClosed:i,assessmentReportSummary:c,jobId:s})})]})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),L_e=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob,currentJobUsageSummary:e.currentJobUsageAndActuals.summary}})))(M_e);function P_e(){var e=Object(f.a)(["\n  margin-left: 10px;\n  padding-top: 3px;\n"]);return P_e=function(){return e},e}function F_e(){var e=Object(f.a)(["\n  border: 1px "," solid;\n  border-radius: 4px;\n  color: ",";\n  background-color: ",";\n  padding: 5px 7px 3px 7px;\n  font-size: ",";\n  font-weight: ",";\n"]);return F_e=function(){return e},e}y.default.span(F_e(),_.blue1,_.blue1,_.white,sm.smaller,lm.medium),y.default.span(P_e());var U_e="CustomExpenseForm",B_e=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadOptions=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={term:n,job_id:e.props.jobId},t.next=3,ZW.searchExpenses(r);case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=Object(c.a)({},n),pm.a.isMoment(r.used_at)&&(r.used_at=fv(r.used_at,!0)),!e.props.onSubmit){t.next=4;break}return t.abrupt("return",e.props.onSubmit(r));case 4:if(t.prev=4,!r.id){t.next=11;break}return t.next=8,zy.updateCustomExpense(e.props.jobId,r.id,r);case 8:t.t0=t.sent,t.next=14;break;case 11:return t.next=13,zy.addCustomExpense(e.props.jobId,r);case 13:t.t0=t.sent;case 14:return i=t.t0,null===(a=(o=e.props).afterSubmit)||void 0===a||a.call(o),Gy.emit(r.id?Ix.CustomExpenseUpdated:Ix.CustomExpenseCreated,i),t.abrupt("return",i);case 20:return t.prev=20,t.t1=t.catch(4),t.abrupt("return",ix(t.t1));case 23:case"end":return t.stop()}}),t,null,[[4,20]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){}},{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.hideNameField,r=(e.jobId,e.submitting);return Object(a.jsxs)("form",{onSubmit:t(this.onSubmit),autoComplete:"off",id:U_e,children:[r&&Object(a.jsx)(Nv,{size:40,color:_.white}),!n&&Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,label:"Expense Name",validate:Dv})})}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"default_buy_cost_per_unit",component:yg,currency:!0,label:"Unit Cost to Me",validate:Dv})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"quantity",component:yg,type:"number",label:"Quantity",validate:[Dv,Bv,Vv],step:.01,min:0,normalize:function(e){return k8(e||"")}})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"used_at",component:s_,label:"Used At",validate:Dv})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"default_sell_cost_per_unit",component:yg,label:"Unit Price to Charge",currency:!0,validate:Dv})}),Object(a.jsx)("div",{className:"col-4"})]})]})}}]),n}(p.PureComponent),V_e=Object(sg.compose)(Object(jv.a)({form:U_e,enableReinitialize:!0}))(B_e),J_e=n(598),q_e=n.n(J_e);function z_e(){var e=Object(f.a)(["\n  color: #5d5d5d;\n  padding: 21px 0;\n  border-bottom: 1px solid #d3dbde;\n  border-left: 4px solid #f5aa00;\n\n  .avatar {\n    width: 40px;\n    height: 40px;\n    line-height: 40px;\n    margin-left: 24px;\n    border-radius: 4px;\n    overflow: hidden;\n    background-color: #71ba90;\n    background-size: cover;\n    text-align: center;\n    font-size: 130%;\n    font-weight: 700;\n    color: white;\n  }\n\n  .title3 {\n    margin-left: 24px;\n    display: -webkit-box;\n    display: -webkit-flex;\n    display: -ms-flexbox;\n    display: flex;\n    font-size: 1.1rem;\n    font-weight: 500;\n    .title {\n      font-weight: 700;\n    }\n    .action {\n      padding-left: 10px;\n      color: #f5aa00;\n    }\n  }\n\n  .date {\n    width: 160px;\n    font-size: 0.85rem;\n    margin-right: 21px;\n  }\n\n  .cus1 {\n    margin-left: 88px;\n  }\n"]);return z_e=function(){return e},e}function G_e(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  border-left: 4px solid ",";\n  font-size: 14px;\n  border-top: 1px solid #d3dbde;\n  border-bottom: 1px solid #d3dbde;\n  background: #fafafa;\n  color: #5d5d5d;\n  padding-top: 14px;\n  padding-bottom: 14px;\n  padding-left: 88px;\n  margin-top: -1px;\n  span {\n    font-weight: bold;\n  }\n  .date {\n    font-size: 12px;\n    margin-right: 21px;\n    width: 160px;\n  }\n"]);return G_e=function(){return e},e}function W_e(){var e=Object(f.a)([""]);return W_e=function(){return e},e}function H_e(){var e=Object(f.a)(["\n  margin: 30px 0px;\n  border-top: 1px solid #d3dbde;\n"]);return H_e=function(){return e},e}function Y_e(){var e=Object(f.a)(["\n  font-weight: lighter;\n  border-color: #42a6e6;\n  box-shadow: 0 0 0 !important;\n\n  padding: 5px 12px;\n  color: #3498db;\n  cursor: pointer;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  margin: 0 10px;\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]);return Y_e=function(){return e},e}function Q_e(){var e=Object(f.a)(["\n  background-color: #f5aa00;\n  border-radius: 3px;\n  padding: 2px 10px;\n  color: white;\n  margin-right: 10px;\n  font-size: 16px;\n"]);return Q_e=function(){return e},e}function K_e(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return K_e=function(){return e},e}function Z_e(){var e=Object(f.a)(["\n  width: 48%;\n  margin-bottom: 15px;\n  margin-right: 15px;\n  &.half {\n    width: 22%;\n  }\n"]);return Z_e=function(){return e},e}function X_e(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return X_e=function(){return e},e}function $_e(){var e=Object(f.a)(["\n  font-size: 14px;\n  color: #95989a;\n  margin-bottom: 7px;\n"]);return $_e=function(){return e},e}function ewe(){var e=Object(f.a)(["\n  font-size: 20px;\n  color: #1d1d1d;\n  margin-bottom: 30px;\n  &.tasks {\n    margin: 0;\n  }\n  &.tasks-body {\n    font-size: 14px;\n    margin-bottom: 10px;\n  }\n"]);return ewe=function(){return e},e}function twe(){var e=Object(f.a)(["\n  display: flex;\n"]);return twe=function(){return e},e}function nwe(){var e=Object(f.a)([""]);return nwe=function(){return e},e}var rwe=[{value:"In-Progress",label:"In-Progress"},{value:"Restorable",label:"Restorable"},{value:"Non-Restorable",label:"Non-Restorable"},{value:"Awaiting Disposal Authority",label:"Awaiting Disposal Authority"},{value:"Ready For Return",label:"Ready For Return"},{value:"Ready To Dispose",label:"Ready To Dispose"},{value:"Disposed",label:"Disposed"},{value:"Client Picked Up",label:"Client Picked Up"}],awe=y.default.div(nwe()),owe=y.default.div(twe()),iwe=y.default.div(ewe()),cwe=y.default.div($_e()),swe=y.default.input(X_e()),lwe=y.default.div(Z_e()),uwe=Object(y.default)(hC)(K_e()),dwe=(y.default.div(Q_e()),y.default.button(Y_e()),y.default.div(H_e())),pwe=y.default.div(W_e()),hwe=Object(y.default)(gv(["color"])("div"))(G_e(),(function(e){return e.color||"#959595"})),bwe=y.default.div(z_e()),fwe={container:function(e){return Object(c.a)(Object(c.a)({},e),{},{flexBasis:"150px",height:"33.5px",border:"none",fontWeight:"lighter",fontSize:"1rem",borderRadius:"0.25rem",boxShadow:"0 0 0 !important",lineHeight:"1.5rem",paddingTop:0})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{background:_.gray1,color:_.black0})},control:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",boxShadow:"none",background:_.gray1,color:_.black0,minHeight:"auto",maxHeight:"33.5px !important"})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:"#A3A3A3",padding:"6px"})}},mwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,data:{},inventory:{},standardTypes:[],history:[],showNoteForm:!1,users:[],showScan:!1,spaces:[],todoGroups:[],todos:[]},e.eventListeners=[Gy.listen(Ix.WarehousingInventoryItemNoteAdded,(function(){e.loadNotes()}))],e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,s,l,u,d;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),a=Number(e.props.match.params.inventory_id),o=Number(e.props.match.params.item_id),t.next=5,Promise.all([eQ.getInventoryItem(o),eQ.getInventoryInfo(a)]);case 5:return i=t.sent,s=Object(w.a)(i,2),l=s[0],u=s[1],e.setState({data:Object(c.a)(Object(c.a)({},l.data),{},{inventory_standard_item_group:null===(n=l.data)||void 0===n||null===(r=n.standard_type)||void 0===r?void 0:r.group})}),t.next=12,Promise.all([eQ.getItemStandardTypes(),Promise.resolve(),eQ.getSpaces()]);case 12:d=t.sent,e.setState({inventory:u.data,standardTypes:d[0].data,spaces:d[2].data,loading:!1}),e.loadToDoGroups(),e.loadToDos(l.data),e.loadNotes(l.data);case 17:case"end":return t.stop()}}),t)}))),e.loadToDoGroups=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,u3.getToDoGroups();case 2:n=t.sent.data,e.setState({todoGroups:n});case 4:case"end":return t.stop()}}),t)}))),e.loadToDos=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n||(n=e.state.data),!n){t.next=7;break}return e.setState({loading:!0}),t.next=5,eQ.getItemToDoList(n.id);case 5:r=t.sent.data,e.setState({todos:r,loading:!1});case 7:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.loadNotes=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n||(n=e.state.data),!n){t.next=15;break}return e.setState({loading:!0}),t.next=5,eQ.getInventoryItemNotes(n.id);case 5:return r=t.sent.data,t.next=8,eQ.getInventoryItemPlacements(n.id);case 8:a=t.sent.data,o=n.statuses||[],i=r.map((function(e){var t,n=e.note;return{date:pm()(n.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:n.created_at,type:"note",value:n.note_resolved,user:n.user,userName:(null===(t=n.user)||void 0===t?void 0:t.full_name)||""}})),o.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})).forEach((function(e,t){var n;i.push({date:pm()(e.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:e.created_at,type:t===o.length-1?"created":"status",value:e.status,user:e.user,userName:(null===(n=e.user)||void 0===n?void 0:n.full_name)||""})})),a.forEach((function(e,t){var n,r,a;i.push({date:pm()(e.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:e.created_at,placement:{space:e.space&&e.space.id!==s?e.space:null,container:e.container&&e.container.id!==c?e.container:null},type:"placement",user:e.user,userName:(null===(n=e.user)||void 0===n?void 0:n.full_name)||""}),s=null===(r=e.space)||void 0===r?void 0:r.id,c=null===(a=e.container)||void 0===a?void 0:a.id})),i.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")})),e.setState({history:i,loading:!1});case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showScanModal=function(){e.setState({showScan:!0})},e.parseNote=function(e){return ym(xm(e))},e.markStatus=function(t){return function(){var n=e.state.data,r=n?n.current_status:"";eQ.markInventoryItemStatus(r.inventory_item_id,r.user_id,t).then((function(t){var r=Object.assign({},n),a=n&&n.current_status;a=t.data.inventory_item.current_status,r.current_status=a,e.setState({data:r})}))}},e.removeInventoryItem=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.dispatch,e.state.inventory,r=e.props.match.params,a=r.type,o=r.inventory_id,i=r.item_id,t.next=5,n(iw("Confirm","Delete inventory item?"));case 5:if(!t.sent){t.next=12;break}return c=Number(i),eQ.removeInventoryItem(c).then((function(){e.props.history.push("/operations/inventories/".concat(a,"/").concat(o,"/items"))})),t.abrupt("return",null);case 12:return t.abrupt("return",Promise.reject(!0));case 13:case"end":return t.stop()}}),t)}))),e.getItems1=function(){var t=[];return rwe.forEach((function(n){t.push({name:n.label,onClick:e.markStatus(n.label)})})),t.push({type:"divider"}),t=t.concat([{name:"Delete",onClick:e.removeInventoryItem}]),[{name:"Add note",onClick:function(){return e.setState({showNoteForm:!0})}},{type:"divider"},{name:"Print",onClick:function(){}},{type:"divider"}].concat(t)},e.renderTrigger1=function(){return Object(a.jsxs)(uwe,{className:"d-flex align-items-center",margin:"5px 0 0 0",children:[Object(a.jsx)(hC,{color:_.white,margin:"0 5px 0 0",children:"Options"}),Object(a.jsx)(z7,{name:Xf.ArrowDown,color:_.white,size:16})]})},e.updateInfo=function(t){return function(n){var r=e.state,a=r.data,o=r.inventory;if(a){var i=Object.assign({},a);if("standard"===t)i.standard_type=n,i.assessment_fee=null===n||void 0===n?void 0:n.assessment_fee,i.estimated_replacement_cost=null===n||void 0===n?void 0:n.estimated_replacement_cost,i.restoration_hours=(null===n||void 0===n?void 0:n.restoration_hours)+"",i.restoration_cost=null===n||void 0===n?void 0:n.restoration_cost;else if("hour"===t)i.restoration_hours=n.value;else if(t){if("$"===n.target.value)return;if(i[t]=n.target.value.replace(/\$/g,"").replace(/ /g,""),isNaN(Number(i[t].charAt(i[t].length-1)))&&"."!==i[t].charAt(i[t].length-1))return;if(-1!==i[t].indexOf(".")&&i[t].split(".")[1].length>2)return}e.setState({data:i});var c=i?i.id:"",s=o?o.id:"",l=i?i.job_id:"",u=i?i.identifier:"",d=i?i.name:"",p=i?i.quantity:"",h=i?i.condition:"",b=i?i.serial_number:"",f=i?i.model:"",m=i?i.customer_location:"",j=i?i.standard_type:{},v=i?i.assessment_fee:"",O=i?i.estimated_replacement_cost:"",g=i?i.restoration_hours:"",x=i?i.restoration_cost:"",y=j?j.id:"",_={inventory_id:s||"",job_id:l||"",identifier:u||"",name:d||"",quantity:p||"",condition:h||"",serial_number:b||"",model:f||"",customer_location:m||"",assessment_fee:Number(v)||0,estimated_replacement_cost:Number(O)||0,restoration_cost:Number(x)||0,restoration_hours:g||"",inventory_item_standard_type_id:y||""};eQ.updateInventoryItem(c,_)}}},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Number(e.props.match.params.item_id),eQ.addNoteToInventoryItem(n.id,r).then((function(t){var n=e.state.history,r=e.state.users,a=t.data.note,o="";r.forEach((function(e){e.id===a.user_id&&(o=e.full_name)})),n.unshift({date:pm()(a.created_at).format("DD MMMM YYYY, hh:mm A"),created_at:a.created_at,type:"note",value:a.note,userName:o}),e.setState({history:n,showNoteForm:!1})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.cancelNote=function(){e.setState({showNoteForm:!1})},e.changeLocation=function(t){var n=e.state.data,r=Object.assign({},n);r.placement.space=t,e.setState({data:r})},e.addTodo=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),r=e.state.data,n.next=4,eQ.addTodoGroupToInventoryItem(r.id,{to_do_group_id:t.id});case 4:return n.next=6,e.loadToDos();case 6:e.setState({loading:!1});case 7:case"end":return n.stop()}}),n)})))},e.toggleToDoItem=function(t){return Object(lj.a)(sj.a.mark((function n(){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),n.prev=1,n.next=4,eQ[t.completed_at?"markToDoItemAsInComplete":"markToDoItemAsCompleted"](t.id);case 4:n.sent,t.completed_at=t.completed_at?null:new Date,e.setState({todos:Object(aj.a)(e.state.todos)});case 7:return n.prev=7,e.setState({loading:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[1,,7,10]])})))},e.deleteToDoItem=function(t,n,r){return Object(lj.a)(sj.a.mark((function o(){var i;return sj.a.wrap((function(o){for(;;)switch(o.prev=o.next){case 0:return i=e.props.dispatch,o.next=3,i(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to remove to do item ",Object(a.jsx)("strong",{children:n.item.name})," from group ",Object(a.jsx)("strong",{children:t.to_do_group.name}),"?"]})));case 3:if(!o.sent){o.next=14;break}return e.setState({loading:!0}),o.prev=6,o.next=9,eQ.deleteToDoItem(n.id);case 9:t.to_do_items.splice(r,1),e.setState({todos:Object(aj.a)(e.state.todos)});case 11:return o.prev=11,e.setState({loading:!1}),o.finish(11);case 14:case"end":return o.stop()}}),o,null,[[6,,11,14]])})))},e.loadStandardItems=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=null===(r=e.state.data)||void 0===r||null===(a=r.inventory_standard_item_group)||void 0===a?void 0:a.id,t.next=3,u3.getStandardItems({term:n,inventory_standard_item_group_id:o});case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadStandardItems=Qv()(e.loadStandardItems,500),e.loadStandardItemGroups=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u3.searchStandardItemGroups({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadStandardItemGroups=Qv()(e.loadStandardItemGroups,500),e.onChangeStandardTypeGroup=function(t){var n=e.state.data;n.inventory_standard_item_group=t,n.standard_type=null,n.inventory_item_standard_type_id=null,n.assessment_fee=null,n.estimated_replacement_cost=null,n.restoration_hours=null,n.restoration_cost=null,e.setState({data:Object(c.a)({},n)},(function(){t||e.updateInfo()()}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=t.item_id,o=e.match.params,i=o.type,c=o.inventory_id,s=o.item_id;n===i&&r===c&&a===s||this.loadData()}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getStandardOptions",value:function(){var e=this.state.standardTypes,t=[];return e.forEach((function(e){t.push({value:e.id,label:e.name})})),t}},{key:"renderHistory",value:function(){var e=this,t=this.state.history,n=[];return t.forEach((function(t){var r;("created"===t.type&&n.push(Object(a.jsxs)(hwe,{children:[Object(a.jsxs)("div",{children:["Inventory item created by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]})),"status"===t.type&&n.push(Object(a.jsxs)(hwe,{children:[Object(a.jsxs)("div",{children:["Status changed to ",Object(a.jsx)("span",{children:t.value})," by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]})),"placement"===t.type&&(t.placement.space&&n.push(Object(a.jsxs)(hwe,{children:[Object(a.jsxs)("div",{children:["Inventory item assigned to location ",Object(a.jsxs)("span",{children:["`",t.placement.space.name,"`"]})," by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]})),t.placement.container&&n.push(Object(a.jsxs)(hwe,{children:[Object(a.jsxs)("div",{children:["Inventory item assigned to pallet ",Object(a.jsxs)("span",{children:["`",t.placement.container.label,"`"]})," by ",t.userName]}),Object(a.jsx)("div",{className:"date",children:t.date})]}))),"note"===t.type)&&n.push(Object(a.jsxs)(bwe,{className:"d-flex flex-row align-items-end",children:[Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{className:"flex-shrink-0 avatar",children:null===(r=mm(t.user))||void 0===r?void 0:r.initials}),Object(a.jsxs)("div",{className:"flex-grow-1 title3",children:[Object(a.jsx)("span",{className:"title",children:t.userName}),Object(a.jsx)("div",{className:"action",children:"added a note"})]}),Object(a.jsx)("div",{className:"date",children:t.date})]}),Object(a.jsx)("div",{className:"flex-column cus1",children:Object(a.jsxs)("div",{className:"",children:[t.value&&Object(a.jsx)("div",{children:q_e()(e.parseNote(t.value))}),Object(a.jsx)("br",{})]})})]}),Object(a.jsx)("div",{className:"flex-shrink-0 align-self-start"})]}))})),n}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.data,o=t.todoGroups,i=t.todos,c=r?r.standard_type:{},s=r?"$ ".concat(r.assessment_fee||""):"",l=r?"$ ".concat(r.estimated_replacement_cost||""):"",u=r?r.restoration_hours:"",d=r?"$ ".concat(r.restoration_cost||""):"",p=u||"",h=c,b=null===r||void 0===r?void 0:r.inventory_standard_item_group;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:Object(a.jsx)("div",{className:"d-flex flex-row align-items-stretch",children:Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(UC,{className:"h-100",children:[Object(a.jsxs)(awe,{className:"print-hide",children:[Object(a.jsx)(owe,{children:Object(a.jsxs)(lwe,{children:[Object(a.jsx)(cwe,{children:"Standard Item Group"}),Object(a.jsx)(eee,{value:b,loadOptions:e.debouncedLoadStandardItemGroups,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:e.onChangeStandardTypeGroup,customStyles:fwe,isClearable:!0})]})}),Object(a.jsxs)(owe,{children:[Object(a.jsxs)(lwe,{children:[Object(a.jsx)(cwe,{children:"Standard Item"}),Object(a.jsx)(eee,{value:h,loadOptions:e.debouncedLoadStandardItems,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:e.updateInfo("standard"),customStyles:fwe})]}),Object(a.jsxs)(lwe,{className:"half",children:[Object(a.jsx)(cwe,{children:"Restoration Hour"}),Object(a.jsx)(swe,{value:p,onChange:e.updateInfo("hour")})]}),Object(a.jsxs)(lwe,{className:"half",children:[Object(a.jsx)(cwe,{children:"Restoration Cost"}),Object(a.jsx)(swe,{value:d,onChange:e.updateInfo("restoration_cost")})]})]}),Object(a.jsxs)(owe,{children:[Object(a.jsxs)(lwe,{className:"half",children:[Object(a.jsx)(cwe,{children:"Assessment Fee"}),Object(a.jsx)(swe,{value:s,onChange:e.updateInfo("assessment_fee")})]}),Object(a.jsxs)(lwe,{className:"half",children:[Object(a.jsx)(cwe,{children:"Estimated Replacement Cost"}),Object(a.jsx)(swe,{value:l,onChange:e.updateInfo("estimated_replacement_cost")})]})]})]}),o.length>0&&Object(a.jsxs)(pwe,{children:[Object(a.jsx)("hr",{className:"print-hide"}),Object(a.jsx)("div",{className:"py-3 print-hide",children:Object(a.jsxs)(fQ.e,{children:[Object(a.jsx)(fQ.h,{caret:!0,color:"primary",className:"position-relative",children:"Add To-Do"}),Object(a.jsx)(fQ.g,{basic:!0,right:!0,children:null===o||void 0===o?void 0:o.map((function(t){return Object(a.jsx)(fQ.f,{onClick:e.addTodo(t),children:t.name},t.id)}))})]})}),i.length>0&&i.map((function(t){var n;return t.to_do_items.length>0&&Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:(null===(n=t.to_do_group)||void 0===n?void 0:n.name)||"ToDo Group "+t.id})}),Object(a.jsx)("div",{className:"pl-3",children:t.to_do_items.map((function(n,r){var o;return Object(a.jsxs)("div",{className:"d-flex align-items-center mb-2",children:[Object(a.jsx)(nI,{value:n.completed_at?n.id:void 0,onChange:e.toggleToDoItem(n),size:15}),Object(a.jsx)(iwe,{className:"tasks-body mx-3 mb-0",children:(null===(o=n.item)||void 0===o?void 0:o.name)||"ToDo Item "+n.id}),Object(a.jsx)(cm,{name:Xf.Delete,size:14,className:"cursor-pointer",onClick:e.deleteToDoItem(t,n,r)})]},n.id)}))})]},t.id)}))]}),Object(a.jsx)(dwe,{className:"print-hide",children:e.renderHistory()})]})]})})})}})}}]),n}(h.a.PureComponent),jwe=Object(sg.compose)(Object(b.b)(),O.g)(mwe),vwe=n(599);function Owe(){var e=Object(f.a)(["\n  >div>div{max-height: initial;}\n  .form-control{height:initial;}\n  .fcc__value-container .trim{display: none;}\n"]);return Owe=function(){return e},e}var gwe=y.default.div(Owe()),xwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).selectStyles=e.props.customStyles?Object(c.a)(Object(c.a)({},mO),e.props.customStyles):Object(c.a)(Object(c.a)({},mO),{},{control:function(t,n){return Object(c.a)(Object(c.a)({},t),{},{minHeight:"auto",maxHeight:e.props.isMulti?"inherit":33.5,background:_.white,boxShadow:n.isFocused?"0 0 0 0.2rem ".concat(_.bootstrap.boxShadow):"none",borderColor:n.isFocused?"transparent":_.gray2,":hover":{borderColor:n.isFocused?"transparent":_.gray2}})},dropdownIndicator:function(t){return Object(c.a)(Object(c.a)({},t),{},{padding:3,display:e.props.isDisabled?"none":t.display})}},e.props.additionalStyles),e}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(gwe,{children:Object(a.jsx)(vwe.a,Object(c.a)(Object(c.a)({},this.props),{},{styles:this.selectStyles,classNamePrefix:"fcc"}))})}}]),n}(p.PureComponent);function ywe(){var e=Object(f.a)(["\n  margin-left: 10px;\n  padding-top: 3px;\n"]);return ywe=function(){return e},e}function _we(){var e=Object(f.a)(["\n  border: 1px "," solid;\n  border-radius: 4px;\n  color: ",";\n  background-color: ",";\n  padding: 5px 7px 3px 7px;\n  font-size: ",";\n  font-weight: ",";\n"]);return _we=function(){return e},e}var wwe=y.default.span(_we(),_.blue1,_.blue1,_.white,sm.smaller,lm.medium),Swe=y.default.span(ywe()),kwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1},e.loadOptions=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r={term:n,job_id:e.props.jobId},t.next=3,ZW.searchExpenses(r);case 3:return t.abrupt("return",t.sent.data);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadOptions=Qv()(e.loadOptions,500),e.onSelectExpense=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Object(c.a)({},n),e.setState({loading:!0}),t.prev=2,t.t0=null===r||void 0===r?void 0:r.type,t.next="EQUIP"===t.t0?6:"MAT"===t.t0?10:14;break;case 6:return t.next=8,ZW.getEquipmentInfo(r.id);case 8:return r.equipment=t.sent,t.abrupt("break",14);case 10:return t.next=12,ZW.getMaterial(r.id);case 12:return r.material=t.sent,t.abrupt("break",14);case 14:e.setState({expense:r}),t.next=20;break;case 17:t.prev=17,t.t1=t.catch(2),e.setState({expense:void 0});case 20:return t.prev=20,e.setState({loading:!1}),t.finish(20);case 23:case"end":return t.stop()}}),t,null,[[2,17,20,23]])})));return function(e){return t.apply(this,arguments)}}(),e.afterSubmit=function(){var t=e.props,n=t.jobId,r=t.onClose,a=t.dispatch,o=t.afterSubmit;null===o||void 0===o||o(),a(gH(n)),r()},e.renderBody=function(){var t=e.props,n=t.jobId,r=t.expense,o=e.state.expense;return Object(a.jsxs)(a.Fragment,{children:[!r&&Object(a.jsx)("div",{className:"row mb-3",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)(JU,{children:"Expense Name"}),Object(a.jsx)(xwe,{getOptionValue:function(e){return e.id||Date.now()},getOptionLabel:e.renderExpenseOption,placeholder:"Name or choose an item...",loadOptions:e.debouncedLoadOptions,onChange:e.onSelectExpense,customStyles:fwe})]})}),o?o.equipment?Object(a.jsx)(use,{isCustom:!0,jobId:n,hideEquipmentField:!0,initialValues:{equipment:o.equipment},afterSubmit:e.afterSubmit}):o.material?Object(a.jsx)(Lse,{isCustom:!0,jobId:n,hideMaterialField:!0,initialValues:{material:o.material,default_buy_cost_per_unit:o.material.default_buy_cost_per_unit,default_sell_cost_per_unit:o.material.default_sell_cost_per_unit},afterSubmit:e.afterSubmit}):Object(a.jsx)(V_e,{jobId:n,hideNameField:!0,initialValues:{name:o.value},afterSubmit:e.afterSubmit}):r?Object(a.jsx)(V_e,{jobId:n,initialValues:Object(c.a)(Object(c.a)({},r),{},{used_at:pm()(r.used_at)}),afterSubmit:e.afterSubmit}):null]})},e}return Object(l.a)(n,[{key:"renderExpenseOption",value:function(e){return(null===e||void 0===e?void 0:e.id)?Object(a.jsxs)("div",{className:"d-flex flex-row",children:[Object(a.jsx)(wwe,{children:e.type}),Object(a.jsx)(Swe,{children:e.name})]}):(null===e||void 0===e?void 0:e.value)?Object(a.jsxs)("div",{children:[Object(a.jsx)("span",{className:"trim",children:' Create custom expense "'}),e.value,Object(a.jsx)("span",{className:"trim",children:'"'})]}):void 0}},{key:"renderFooter",value:function(){var e=this.props.expense,t=this.state.expense,n=U_e;if((null===t||void 0===t?void 0:t.equipment)?n=sse:(null===t||void 0===t?void 0:t.material)&&(n=Dse),t||e)return Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",form:n,children:"Save"})}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose,r=e.expense,o=this.state.loading;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:r?"Edit Expense":"Add Expense",body:this.renderBody(),footer:this.renderFooter(),bodyClass:"position-static",loading:o})})}}]),n}(p.PureComponent),Cwe=Object(sg.compose)(Object(b.b)())(kwe),Nwe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,showEditModal:!1,type:kse.Quick,expenseForEditing:void 0},e.eventListeners=[Gy.listen(Ix.CustomExpenseCreated,(function(){return e.loadExpenses()})),Gy.listen(Ix.CustomExpenseUpdated,(function(){return e.loadExpenses()})),Gy.listen(Ix.CustomExpenseDeleted,(function(){return e.loadExpenses()}))],e.componentDidMount=function(){e.loadExpenses()},e.loadExpenses=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.expenses,o=r.match.params.id,a.fetch(o,n);case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.editExpense=function(t){e.setState({expenseForEditing:t}),e.onOpenModal()},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e.deleteExpenseFromJob=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.dispatch,o=r.match.params.id,t.next=3,a(iw("Confirm","Delete (".concat(n.name," - ").concat(n.quantity,") ?")));case 3:if(!t.sent){t.next=8;break}return t.next=7,zy.deleteCustomExpense(parseInt(o),n.id);case 7:Gy.emit(Ix.CustomExpenseDeleted,n);case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.storageMenuItems=function(t,n,r){var a=n.creator_id===e.props.user.id,o=a?t.has(vx.JOBS_USAGE_MATERIALS_UPDATE):t.has(vx.JOBS_USAGE_MATERIALS_UPDATE)&&t.has(vx.JOBS_USAGE_MATERIALS_MANAGE),i=a?t.has(vx.JOBS_USAGE_MATERIALS_DELETE):t.has(vx.JOBS_USAGE_MATERIALS_DELETE)&&t.has(vx.JOBS_USAGE_MATERIALS_MANAGE),c=0==n.in_report_used_count?"Mark as used":"Mark as unused",s=n.invoice_item_id&&n.invoice_item_id>0;return[{name:"Edit item",disabled:!o||r||s,onClick:function(){return e.editExpense(n)}},{name:c,disabled:!o||r||s,onClick:function(){return e.markAsUsed(n)}},{type:"divider"},{name:"Delete",disabled:!i||r||s,onClick:function(){return e.deleteExpenseFromJob(n)}}]},e.PostMarkasUsed=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ZW.setMarkAsUsed(r,n);case 3:e.loadExpenses(),t.next=9;break;case 6:t.prev=6,t.t0=t.catch(0),Oj(uj.Danger,"Server Error");case 9:case"end":return t.stop()}}),t,null,[[0,6]])})));return function(e,n){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"markAsUsed",value:function(e){var t=0==e.in_report_used_count?1:0,n={modal:"job_custom_expenses",id:e.id,in_report_used_count:t};this.PostMarkasUsed(n,e.job_id)}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:5,children:"No items found"})})}},{key:"renderRows",value:function(e){var t,n,r,o=this,i=this.props,c=i.expenses,s=i.jobIsClosed;return(null===(t=c.data)||void 0===t?void 0:t.data)?(null===(n=c.data)||void 0===n?void 0:n.data.length)?null===(r=c.data)||void 0===r?void 0:r.data.map((function(t){var n;return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.name}),Object(a.jsx)("td",{children:t.quantity}),Object(a.jsx)("td",{children:Object(a.jsx)(kS.a,{format:iv,children:t.used_at})}),Object(a.jsx)("td",{children:t.invoice_item&&"#".concat(null===(n=t.invoice_item)||void 0===n?void 0:n.invoice_id)}),Object(a.jsx)("td",{children:vm(t.amount)}),Object(a.jsx)("td",{children:ole((null===t||void 0===t?void 0:t.in_report_used_count)||0)}),Object(a.jsx)("td",{children:Object(a.jsx)(nw,{noMargin:!0,iconName:Xf.MenuVertical,items:o.storageMenuItems(e,t,s),direction:"right"})})]},t.id)})):this.renderNodata():null}},{key:"render",value:function(){var e=this,t=this.props,n=t.expenses,r=t.match.params.id,o=this.state,i=o.showModal,c=(o.type,o.expenseForEditing),s=n.loading;return Object(a.jsx)(Cx.Consumer,{children:function(t){var o;return t.has(vx.JOBS_USAGE_VIEW)?Object(a.jsxs)(a.Fragment,{children:[i&&Object(a.jsx)(Cwe,{jobId:parseInt(r),onClose:e.onCloseModal,isOpen:i,expense:c}),s&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(rse,{children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Custom Expenses"}),Object(a.jsx)("th",{children:"Qty"}),Object(a.jsx)("th",{children:"Used At"}),Object(a.jsx)("th",{children:"Invoice Id"}),Object(a.jsx)("th",{children:"Amount Ex GST"}),Object(a.jsx)("th",{}),Object(a.jsx)("th",{})]})}),Object(a.jsxs)("tbody",{children:[e.renderRows(t),Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{}),Object(a.jsx)("td",{children:Object(a.jsxs)("b",{children:["Total Amount Ex GST : \xa0",vm(j.a.sumBy(null===(o=n.data)||void 0===o?void 0:o.data,"amount"))]})})]},"other-footer")]})]})]}):null}})}}]),n}(p.PureComponent),Ewe=Object(sg.compose)(Object(b.b)((function(e){return{job:e.currentJob,user:e.user.me}})),O.g,oj({expenses:{fetch:zy.getCustomExpenses}}))(Nwe),Awe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={showModal:!1,showEditModal:!1,type:kse.Quick},e.onCustomExpenseAdd=function(){e.setState({type:kse.Custom}),e.onOpenModal()},e.onOpenModal=function(){e.setState({showModal:!0})},e.onCloseModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"renderAdditionalHeaderLayout",value:function(){return Object(a.jsx)("div",{children:Object(a.jsxs)(XN,{children:[Object(a.jsx)($ce,{jobId:parseInt(this.props.match.params.id)}),Object(a.jsx)(Xg,{className:"btn",onClick:this.onCustomExpenseAdd,style:{marginLeft:"10px"},children:"Add Expense"})]})})}},{key:"renderContentPage",value:function(){var e=this.props,t=e.job,n=(e.dispatch,t.data&&t.data.latest_status.status===zj.Closed||!t.data);return Object(a.jsxs)(a.Fragment,{children:[t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(t.data.id),children:"Usage And Actuals"}),t.data&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/usage-and-actuals/".concat(t.data.id,"/others"),children:"Others"}),Object(a.jsx)(JC,{children:Object(a.jsx)(Ewe,{jobIsClosed:n})}),this.state.showModal&&Object(a.jsx)(Cwe,{jobId:t.data.id,onClose:this.onCloseModal,isOpen:this.state.showModal})]})}},{key:"render",value:function(){return Object(a.jsx)(MH,{contentLayout:this.renderContentPage(),additionalHeaderLayout:this.renderAdditionalHeaderLayout()})}}]),n}(p.PureComponent),Iwe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{job:e.currentJob}})))(Awe),Twe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match;return Object(a.jsxs)(O.d,{children:[Object(a.jsx)(xR,{path:"".concat(e.path,"/summary"),component:_le,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/report"),component:L_e,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/newReport"),component:Fue,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/buildCosting/:reportId"),component:tfe,permission:vx.ASSESSMENT_REPORTS_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/buildDocument/:reportId"),component:fye,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/printDocument/:reportId"),component:o_e,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/labour"),component:Oue,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/equipment"),component:Rse,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"".concat(e.path,"/materials"),component:Wse,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(O.b,{path:"".concat(e.path,"/purchase-order"),component:dle}),Object(a.jsx)(O.b,{path:"".concat(e.path,"/others"),component:Iwe}),Object(a.jsx)(O.b,{path:"".concat(e.path,"/pre-start-check"),component:aZ}),Object(a.jsx)(O.b,{path:"".concat(e.path,"/crew-report"),component:tse}),Object(a.jsx)(O.b,{path:"".concat(e.path,"/risk-assessment/:tab?/:assessmentId?"),component:A_e}),Object(a.jsx)(O.a,{to:"".concat(e.url,"/summary")})]})}}]),n}(p.PureComponent),Rwe=Object(sg.compose)(O.g)(Twe),Dwe=function(e){return mx.some((function(t){return e.has(t)}))},Mwe=function(e){return[{path:"/manage/contract",icon:Xf.FileEdit,label:"Contract",type:"contract",permission:vx.CONTACTS_CREATE,removed:e&&!e.has(vx.MANAGEMENT_CONTRACTS)},{path:"/manage/location",icon:Xf.LocationPin,label:"Locations",type:"location",permission:vx.LOCATIONS_CREATE,removed:e&&!e.has(vx.LOCATIONS_CREATE)},{path:"/manage/lme",icon:Xf.FileCash,label:"Labour, Materials, Equipment",type:"lme",removed:e&&!Dwe(e),menu:[{path:"/manage/lme/labour-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Labour Type"}),permission:vx.LABOUR_VIEW,removed:e&&!e.has(vx.MANAGEMENT_JOBS_LABOUR)},{path:"/manage/lme/equipment-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Equipment Category"}),permission:vx.MANAGEMENT_EQUIPMENT,removed:e&&!e.has(vx.MANAGEMENT_EQUIPMENT)},{path:"/manage/lme/equipment",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Equipment"}),permission:vx.MANAGEMENT_EQUIPMENT,removed:e&&!e.has(vx.MANAGEMENT_EQUIPMENT)},{path:"/manage/lme/material",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Materials"}),permission:vx.MANAGEMENT_MATERIALS,removed:e&&!e.has(vx.MANAGEMENT_MATERIALS)}].filter((function(e){return!e.removed}))},{path:"/manage/gscode",icon:Xf.CheckIcon,label:"GS Code",type:"gscode",permission:vx.FINANCE_GS_CODES_MANAGE,removed:e&&!e.has(vx.FINANCE_GS_CODES_MANAGE)},{path:"/manage/tag",icon:Xf.Tags,label:"Tags",type:"tag",permission:vx.TAGS_CREATE,removed:e&&!e.has(vx.TAGS_CREATE)},{path:"/manage/user",icon:Xf.People,label:"User",type:"user",permission:vx.USERS_CREATE,removed:e&&!e.has(vx.USERS_CREATE)},{path:"/manage/vehicle",icon:Xf.Truck,label:"Vehicle",type:"vehicle",permission:vx.OPERATIONS_VEHICLES_MANAGE,removed:e&&!e.has(vx.OPERATIONS_VEHICLES_MANAGE)},{path:"/manage/warehousing",icon:Xf.ShipmentUpload,label:"Warehousing",type:"warehousing",permission:vx.MANAGEMENT_SYSTEM_SETTINGS,removed:e&&!e.has(vx.MANAGEMENT_SYSTEM_SETTINGS),menu:[{path:"/manage/warehousing/space-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Space Types"}),permission:vx.MANAGEMENT_SYSTEM_SETTINGS,removed:e&&!e.has(vx.MANAGEMENT_SYSTEM_SETTINGS)},{path:"/manage/warehousing/container-type",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Container Types"}),permission:vx.MANAGEMENT_SYSTEM_SETTINGS,removed:e&&!e.has(vx.MANAGEMENT_SYSTEM_SETTINGS)},{path:"/manage/warehousing/standard-item-group",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Standard Item Groups"}),permission:vx.OPERATIONS_INVENTORY_MANAGE,removed:e&&!e.has(vx.OPERATIONS_INVENTORY_MANAGE)},{path:"/manage/warehousing/standard-item",label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Standard Items"}),permission:vx.OPERATIONS_INVENTORY_MANAGE,removed:e&&!e.has(vx.OPERATIONS_INVENTORY_MANAGE)}].filter((function(e){return!e.removed}))}].filter((function(e){return!e.removed}))};var Lwe=Object(O.g)((function(e){var t=e.activeSection,n=Object(rj.a)(e,["activeSection"]);function r(e){var t=n.location.pathname;return!!Object(O.f)(t,{path:e})}return Object(p.useEffect)((function(){var e,n=null===(e=Mwe())||void 0===e?void 0:e.find((function(e){return e.type===t}));return n&&Rm.status("Manage - "+n.label),function(){Rm.reset()}}),[t]),Object(a.jsx)(Cx.Consumer,{children:function(e){var n;return Object(a.jsx)(nj,{children:Object(a.jsx)("div",{children:null===(n=Mwe(e))||void 0===n?void 0:n.map((function(n){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Wm,{item:Object(c.a)(Object(c.a)({},n),{},{path:n.menu&&n.menu.length>0?n.menu[0].path:n.path,isActive:t===n.type&&r(n.menu&&n.menu.length>0?n.menu[0].path:n.path)})},n.menu&&n.menu.length>0?n.menu[0].path:n.path),t===n.type&&n.menu&&n.menu.map((function(t){return(null===t||void 0===t?void 0:t.permission)&&!e.has(t.permission)?Object(a.jsx)(a.Fragment,{}):Object(a.jsx)(Wm,{item:Object(c.a)(Object(c.a)({},t),{},{isActive:r(t.path)})},t.path)}))]})}))})})}})}));function Pwe(){var e=Object(f.a)(["\n  border: 1px solid ",";\n\n  thead th {\n    font-weight: ",";\n    color: ",";\n    padding: 5px;\n    padding-left: 20px;\n    height: 50px;\n    line-height: 20px;\n    vertical-align: middle;\n  }\n\n  td {\n    vertical-align: middle;\n    padding-left: 20px;\n    &:last-child {\n      padding-right: 10px;\n      padding-bottom: 7px;\n      cursor: pointer;\n    }\n  }\n\n  tbody tr:nth-of-type(odd) {\n    background: ",";\n  }\n  tbody .no-item {\n    height: 42px;\n    color: ",";\n    text-align: center;\n  }\n  .form-control {\n    background: white;\n    border: 1px solid ",";\n  }\n"]);return Pwe=function(){return e},e}var Fwe=y.default.table(Pwe(),_.gray2,lm.normal,_.gray4,_.white,_.gray4,_.gray2),Uwe=function(e){return Object(a.jsx)(Fwe,{className:"table table-sm table-striped",children:e.children})};function Bwe(){var e=Object(f.a)(["\n  position: fixed;\n  top: 0px;\n  right: 0px;\n  bottom: 0px;\n  left: 0px;\n"]);return Bwe=function(){return e},e}function Vwe(){var e=Object(f.a)(["\n  position: absolute;\n  margin: 45px 0px 0px 0px;\n  z-index: 99;\n"]);return Vwe=function(){return e},e}function Jwe(){var e=Object(f.a)(["\n  padding: 0px;\n  background-color: #fff;\n  border-radius: 4px;\n  box-shadow: 0 0 0 1px rgba(0, 0, 0, 0.1);\n  display: inline-block;\n  cursor: pointer;\n  height: 25px;\n  margin: 5px 0px 6px -45px;\n  position: relative;\n"]);return Jwe=function(){return e},e}function qwe(){var e=Object(f.a)(["\n  width: 25px;\n  height: 100%;\n  border-radius: 4px;\n  background: ",";\n"]);return qwe=function(){return e},e}function zwe(){var e=Object(f.a)(["\n  border: 1px solid lightgray;\n  border-radius: 4px;\n  padding: 5px;\n"]);return zwe=function(){return e},e}function Gwe(){var e=Object(f.a)(["\n  display: flex;\n"]);return Gwe=function(){return e},e}function Wwe(){var e=Object(f.a)(["\n  justify-content: flex-end;\n  display: flex;\n"]);return Wwe=function(){return e},e}function Hwe(){var e=Object(f.a)(["\n  width: 100%,\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Hwe=function(){return e},e}function Ywe(){var e=Object(f.a)(["\n  width: 100%,\n  : focus {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return Ywe=function(){return e},e}function Qwe(){var e=Object(f.a)(["\n    width: ",";\n    padding: 10px;\n    border: 1px solid ",";\n    border-radius: 6px;\n    margin: 10px 0px 10px 0px;\n    : disabled {\n        color: ","\n        cursor: not-allowed;\n    }\n    : focus {\n        color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);\n  }\n"]);return Qwe=function(){return e},e}function Kwe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 400;\n"]);return Kwe=function(){return e},e}function Zwe(){var e=Object(f.a)(["\n  margin-top: 20px;\n"]);return Zwe=function(){return e},e}function Xwe(){var e=Object(f.a)(["\n  margin-top: 20px;\n"]);return Xwe=function(){return e},e}function $we(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return $we=function(){return e},e}var eSe=y.default.div($we()),tSe=y.default.div(Xwe()),nSe=y.default.div(Zwe()),rSe=y.default.span(Kwe(),_.gray4),aSe=y.default.input(Qwe(),(function(e){return e.width}),_.gray2,_.gray4),oSe=Object(y.default)(m6.a)(Ywe()),iSe=Object(y.default)(m6.a)(Hwe()),cSe=y.default.div(Wwe()),sSe=y.default.div(Gwe()),lSe=y.default.input(zwe()),uSe=y.default.div(qwe(),(function(e){return e.color})),dSe=y.default.div(Jwe()),pSe=y.default.div(Vwe()),hSe=y.default.div(Bwe()),bSe=[{label:"Jobs",value:"job"},{label:"Credit Notes",value:"credit_note"},{label:"Purchase Orders",value:"purchase_order"},{label:"Invoices",value:"invoice"},{label:"Contacts ",value:"contact"}],fSe=[{label:"No",value:!1},{label:"Yes",value:!0}],mSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={tableItems:[],loading:!1},e.getTag=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,ZC.getAllTags();case 4:n=t.sent,(r=Object(aj.a)(n)).map((function(e){e.isModelOpen=!1,e.rowIsVisible=!1})),e.setState({tableItems:r,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),Oj(uj.Danger,"This status can't be applied");case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.handleNewItem=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:"#D3DBDE",n=parseInt("#D3DBDE".replace("#",""),16),(r=Object(aj.a)(e.state.tableItems)).splice(0,0,{id:r.length+1,name:"",type:{label:"Jobs",value:"job"},is_alert:{label:"No",value:!1},color:n,rowIsVisible:!0}),e.setState({tableItems:r});case 5:case"end":return t.stop()}}),t)}))),e.handleOnBlurChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!r.rowIsVisible){t.next=18;break}return t.prev=1,a={name:r.name,type:r.type.value,is_alert:r.is_alert.value,color:r.color},t.next=5,ZC.createNewTag(a);case 5:o=t.sent,i=bSe.find((function(e){return e.value===o.type})),c=fSe.find((function(e){return e.value===o.is_alert})),o.type=i,o.is_alert=c,o&&e.getTag(),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),Oj(uj.Danger,"name fiels is required");case 16:t.next=29;break;case 18:return t.prev=18,s={name:r.name},t.next=22,ZC.updatedTag(r.id,s);case 22:t.sent&&e.getTag(),t.next=29;break;case 26:t.prev=26,t.t1=t.catch(18),Oj(uj.Danger,"Your record is not updated");case 29:case"end":return t.stop()}}),t,null,[[1,13],[18,26]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleChangeName=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableItems);a.map((function(e){return n.id===e.id&&(e.name=r),e})),e.setState({tableItems:a})},e.handleSelectOptionForAppliesTo=function(t,n){var r=Object(aj.a)(e.state.tableItems);r.map(function(){var e=Object(lj.a)(sj.a.mark((function e(r,a){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r.id===n&&(r.type=t),e.abrupt("return",r);case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()),e.setState({tableItems:r})},e.handleSelectOptionForIsAlert=function(t,n){var r=Object(aj.a)(e.state.tableItems);r.map(function(){var r=Object(lj.a)(sj.a.mark((function r(a,o){var i;return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.id!==n){r.next=14;break}if(a.is_alert=t,a.rowIsVisible){r.next=14;break}return r.prev=3,i={is_alert:t.value,color:a.color},r.next=7,ZC.updatedTag(a.id,i);case 7:r.sent&&e.getTag(),r.next=14;break;case 11:r.prev=11,r.t0=r.catch(3),Oj(uj.Danger,"Record is not updated");case 14:return r.abrupt("return",a);case 15:case"end":return r.stop()}}),r,null,[[3,11]])})));return function(e,t){return r.apply(this,arguments)}}()),e.setState({tableItems:r})},e.handleDeleteItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(iw("Confirm","Are you sure you want to delete this item? You will not be able to undo this action."));case 3:if(!t.sent){t.next=21;break}if(!n.rowIsVisible){t.next=11;break}(a=Object(aj.a)(e.state.tableItems)).splice(0,1),e.setState({tableItems:a}),t.next=21;break;case 11:return t.prev=11,t.next=14,ZC.deleteTag(n.id);case 14:void 0===t.sent&&e.getTag(),t.next=21;break;case 18:t.prev=18,t.t0=t.catch(11),Oj(uj.Danger,"Your record is not deleted");case 21:case"end":return t.stop()}}),t,null,[[11,18]])})));return function(e){return t.apply(this,arguments)}}(),e.handleClick=function(t){var n=Object(aj.a)(e.state.tableItems);n.map((function(e,n){return e.id===t&&(e.isModelOpen=!0),e})),e.setState({tableItems:n})},e.handleChange=function(t,n){var r=Object(aj.a)(e.state.tableItems);r.map(function(){var r=Object(lj.a)(sj.a.mark((function r(a,o){var i,c;return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:if(a.id!==n){r.next=15;break}if(i=parseInt(t.hex.replace("#",""),16),a.color=i,a.rowIsVisible){r.next=15;break}return r.prev=4,c={is_alert:a.is_alert,color:i},r.next=8,ZC.updatedTag(a.id,c);case 8:r.sent&&e.getTag(),r.next=15;break;case 12:r.prev=12,r.t0=r.catch(4),Oj(uj.Danger,"Record is not updated");case 15:return r.abrupt("return",a);case 16:case"end":return r.stop()}}),r,null,[[4,12]])})));return function(e,t){return r.apply(this,arguments)}}()),e.setState({tableItems:r})},e.handleClose=function(t){var n=Object(aj.a)(e.state.tableItems);n.map((function(e,n){return e.id===t&&(e.isModelOpen=!1),e})),e.setState({tableItems:n})},e.tagsColumns=function(){return[{id:"name",header:Object(a.jsx)(rSe,{children:"Name"}),width:"30%",type:Are.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(aSe,{type:"text",width:"100%",value:t.name,placeholder:"Untitled tag",onChange:function(n){return e.handleChangeName(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"appliesTo",header:Object(a.jsx)(rSe,{children:"Applies To"}),width:"15%",type:Are.Text,hidden:!1,cell:function(t){var n=bSe.find((function(e){return e.value===t.type}));return Object(a.jsx)("div",{children:Object(a.jsx)(oSe,{value:n,options:bSe,defaultValue:bSe[0],onChange:function(n){return e.handleSelectOptionForAppliesTo(n,t.id)}})})}},{id:"isAlert",header:Object(a.jsx)(rSe,{children:"Is Alert"}),width:"15%",type:Are.Text,hidden:!1,cell:function(t){var n=fSe.find((function(e){return e.value===t.is_alert}));return Object(a.jsx)("div",{children:Object(a.jsx)(iSe,{value:n,options:fSe,defaultValue:fSe[0],onChange:function(n){return e.handleSelectOptionForIsAlert(n,t.id)}})})}},{id:"colour",header:Object(a.jsx)(rSe,{children:"Colour"}),width:"10%",type:Are.Text,hidden:!1,cell:function(t){var n=t.color.toString(16);return n="#".concat(n),Object(a.jsxs)(sSe,{children:[Object(a.jsx)(lSe,{type:"text",value:n,readOnly:!0}),Object(a.jsx)(dSe,{onClick:function(){return e.handleClick(t.id)},children:Object(a.jsx)(uSe,{color:n})}),t.isModelOpen?Object(a.jsxs)(pSe,{children:[Object(a.jsx)(hSe,{onClick:function(){return e.handleClose(t.id)}}),Object(a.jsx)(_fe.a,{color:n,onChange:function(n){return e.handleChange(n,t.id)}})]}):null]})}},{id:"delete",header:Object(a.jsx)(rSe,{}),width:"30%",type:Are.Text,hidden:!1,cell:function(t){return Object(a.jsx)(cSe,{children:Object(a.jsx)(cm,{name:Xf.Trash,onClick:function(){return e.handleDeleteItem(t)}})})},remove:!e.context.has(vx.TAGS_DELETE)}].filter((function(e){return!e.remove}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getTag()}},{key:"render",value:function(){return Object(a.jsxs)(eSe,{className:"d-flex flex-column",children:[!0===this.state.loading?Object(a.jsx)(Nv,{size:40,color:_.gray0}):null,this.context.has(vx.TAGS_CREATE)&&Object(a.jsx)(tSe,{children:Object(a.jsx)(Xg,{onClick:this.handleNewItem,type:"submit",className:"btn btn-primary",children:"Add New"})}),Object(a.jsx)(nSe,{children:Object(a.jsx)(Uwe,{children:Object(a.jsx)(Qse,{useCustomStyle:!0,dataSource:this.state.tableItems,columnsDefinition:this.tagsColumns()})})})]})}}]),n}(h.a.PureComponent);mSe.contextType=Cx;var jSe=Object(b.b)(null)(mSe);function vSe(){var e=Object(f.a)(["\n  color: "," !important;\n"]);return vSe=function(){return e},e}function OSe(){var e=Object(f.a)(["\n  overflow: hidden;\n"]);return OSe=function(){return e},e}function gSe(){var e=Object(f.a)(["\n  border: 1px solid ",";\n  padding: 10px;\n"]);return gSe=function(){return e},e}var xSe=y.default.div(gSe(),_.white1),ySe=y.default.div(OSe()),_Se=y.default.div(vSe(),_.gray4);function wSe(e){var t=e.photo,n=e.names,r=e.location;return Object(a.jsxs)(xSe,{className:"w-100 d-flex align-items-center f-row",children:[Object(a.jsx)(pC,{wh:50,backgroundUrl:t,margin:"0 10px 0 0",className:"flex-shrink-0",children:!t&&n.initials}),Object(a.jsxs)(ySe,{className:"d-flex flex-grow-1 flex-column",children:[Object(a.jsx)("div",{children:n.full_name}),Object(a.jsx)(_Se,{children:r})]})]})}var SSe=h.a.memo(wSe);function kSe(){var e=Object(f.a)(["\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n  background: ","\n  opacity: 0.6;\n  z-index: 2;\n  point-events: none;\n"]);return kSe=function(){return e},e}var CSe=y.default.div(kSe(),_.gray1);function NSe(){return Object(a.jsx)(CSe,{children:Object(a.jsx)(Nv,{size:40})})}function ESe(){var e=Object(f.a)(["\n  text-decoration: none !important;\n"]);return ESe=function(){return e},e}function ASe(){var e=Object(f.a)(["\n  font-size: ","\n  color: ","\n  margin: 0 ","\n"]);return ASe=function(){return e},e}function ISe(){var e=Object(f.a)(["\n  margin-bottom: 20px;\n"]);return ISe=function(){return e},e}function TSe(){var e=Object(f.a)(["\n  margin-left: ","\n  margin-right: ","\n  align-content: flex-start;\n"]);return TSe=function(){return e},e}function RSe(){var e=Object(f.a)(["\n  margin-left: ","\n  margin-right: ","\n  margin-bottom: 40px;\n  z-index: 3;\n"]);return RSe=function(){return e},e}var DSe="15px",MSe=y.default.div(RSe(),DSe,DSe),LSe=y.default.div(TSe(),DSe,DSe),PSe=Object(y.default)(UC)(ISe()),FSe=y.default.div(ASe(),sm.medium,_.blue6,DSe),USe=Object(y.default)(v.b)(ESe()),BSe={per_page:_g.Huge},VSe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={currentUserList:[],isLoading:!1},e.inputRef=h.a.createRef(),e.currentRequest=void 0,e.searchUsers=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n&&n.trim(),t.prev=1,e.currentRequest&&e.currentRequest.abort(),e.setState({isLoading:!0}),r=n?zE.getSearchedUsers({name:a},BSe):zE.getUsersWithControl(BSe),e.currentRequest=r.controller,t.next=8,r.promise;case 8:o=t.sent,i=o.data,e.setState({isLoading:!1,currentUserList:i}),t.next=19;break;case 13:if(t.prev=13,t.t0=t.catch(1),"AbortError"!==t.t0.name){t.next=17;break}return t.abrupt("return");case 17:e.setState({isLoading:!1,currentUserList:[]}),Oj(uj.Warning,"Users can not be loaded");case 19:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}(),e.redirectToSearch=function(t){var n=e.props,r=n.history,a=n.location,o=t.trim(),i=a.search.slice(1),s=fj.a.parse(i,{ignoreQueryPrefix:!0});if(!o){var l=i.replace(/\b(user)=\b\w*\b(&?)/g,"");return r.push("/manage/user?".concat(l))}var u=fj.a.stringify(Object(c.a)(Object(c.a)({},Object(m.omit)(s,["user"])),{},{user:o}));r.push("/manage/user?".concat(u))},e.debouncedSearch=Object(m.debounce)(e.redirectToSearch,500),e.handleChange=function(t){t.persist(),e.debouncedSearch(t.target.value)},e.handleAddUser=function(){e.props.history.push("/manage/addUser")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setInitialSearchValue()}},{key:"componentDidUpdate",value:function(e){var t=e.location.search,n=this.props.location.search;if(!Object(m.isEqual)(n,t)){var r=fj.a.parse(n,{ignoreQueryPrefix:!0}).user;this.searchUsers(void 0==r?"":r)}}},{key:"componentWillUnmount",value:function(){this.currentRequest&&this.currentRequest.abort()}},{key:"setInitialSearchValue",value:function(){var e=fj.a.parse(this.props.location.search,{ignoreQueryPrefix:!0}).user;this.inputRef.current.value=e||"",this.searchUsers(e)}},{key:"renderUserWrap",value:function(){var e=this.state.currentUserList;return e.length?e.map((function(e){return Object(a.jsx)(PSe,{className:"col-md-6 col-xl-3",children:Object(a.jsx)(USe,{to:"/manage/user/".concat(e.id),children:Object(a.jsx)(SSe,{photo:e.avatar_url,names:mm(e)})})},e.id)})):Object(a.jsx)(FSe,{children:"Users not found"})}},{key:"render",value:function(){var e=this;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1",children:[Object(a.jsxs)(MSe,{className:"d-flex",children:[Object(a.jsx)("div",{className:"col-md-4 col-xl-3",children:Object(a.jsx)("input",{type:"text",className:"form-control",ref:e.inputRef,onChange:e.handleChange,placeholder:"Search..."})}),Object(a.jsx)("div",{className:"col-md-4 col-xl-3",children:t.has(vx.USERS_CREATE)&&Object(a.jsx)(Xg,{onClick:e.handleAddUser,className:"btn",children:"New User"})})]}),Object(a.jsxs)(LSe,{className:"d-flex flex-wrap flex-grow-1",children:[e.state.isLoading&&Object(a.jsx)(NSe,{}),e.renderUserWrap()]})]})}})}}]),n}(h.a.PureComponent),JSe=Object(sg.compose)(O.g,Object(b.b)(null))(VSe);function qSe(){var e=Object(f.a)(["\n    width: ",";\n    padding: 10px;\n    border: 1px solid ",";\n    border-radius: 6px;\n    margin: 10px 0px 10px 0px;\n    : disabled {\n        color: ",'\n        cursor: not-allowed;\n    }\n    : focus {\n        color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0,123,255,.25);\n    ::placeholder {\n      color: "#ffc107";\n    }\n  }\n']);return qSe=function(){return e},e}function zSe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: 400;\n"]);return zSe=function(){return e},e}function GSe(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return GSe=function(){return e},e}function WSe(){var e=Object(f.a)(["\n  width: 320px;\n  margin: 0px 0px 11px 0;\n"]);return WSe=function(){return e},e}function HSe(){var e=Object(f.a)(["\n  width: ",";\n  :focus  {\n    color: #495057;\n    background-color: #fff;\n    border-color: #80bdff;\n    outline: 0;\n    box-shadow: 0 0 0 0.2rem rgba(0, 123, 255, 0.25);\n  }\n"]);return HSe=function(){return e},e}function YSe(){var e=Object(f.a)(["\n  position: relative;\n  height: 100%;\n  width: 100%;\n"]);return YSe=function(){return e},e}var QSe,KSe=y.default.div(YSe()),ZSe=Object(y.default)(m6.a)(HSe(),(function(e){return e.width})),XSe=y.default.div(WSe()),$Se=y.default.div(GSe()),eke=[{value:"equipment",label:"Equipment "},{value:"materials",label:"Materials "},{value:"labour",label:"Labour "}],tke=y.default.span(zSe(),_.gray4),nke=y.default.input(qSe(),(function(e){return e.width}),_.gray2,_.gray4),rke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={selectedCategories:{},tableItems:[],insurerContractOption:[],selectedContractOptionValue:{},unitOption:[],loading:!1},e.getAllContracts=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,ZW.getAllContracts();case 4:n=t.sent,e.setState({tableItems:n,loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Oj(uj.Danger,"This status can't be applied");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getMaterialUnit=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,ZW.getAllMeasureUnits();case 4:n=t.sent.data,e.setState({unitOption:n,loading:!1}),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(1),Oj(uj.Danger,"This status can't be applied");case 11:case"end":return t.stop()}}),t,null,[[1,8]])}))),e.getListInsurerContracts=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,ZW.getListInsurerContracts();case 4:n=t.sent,(r=Object(aj.a)(n)).map((function(e){return e.label=e.description,e.value=e.id,delete e.description,delete e.id,delete e.contact_id,delete e.contract_number,delete e.created_at,delete e.effect_date,delete e.termination_date,e})),e.setState({insurerContractOption:r,loading:!1}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),Oj(uj.Danger,"This status can't be applied");case 13:case"end":return t.stop()}}),t,null,[[1,10]])}))),e.handleOnBlurChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,a={name:r.name,sell_cost_per_unit:r.sell_cost_per_unit,up_to_units:r.up_to_units,up_to_amount:r.up_to_amount},t.next=4,ZW.Updatecontract(r.insurer_contract_id,r.material_id,a);case 4:t.sent&&e.getAllContracts(),t.next=11;break;case 8:t.prev=8,t.t0=t.catch(0),Oj(uj.Danger,"Record is not updated");case 11:case"end":return t.stop()}}),t,null,[[0,8]])})));return function(e,n){return t.apply(this,arguments)}}(),e.handleSelectModelOption=function(t){e.setState({selectedCategories:t})},e.handleSelectContractOption=function(t){e.setState({selectedContractOptionValue:t})},e.handleChangeCustomMaterial=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.name=r),e})),e.setState({tableItems:a})},e.handleChangeSellCostPerUnit=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.sell_cost_per_unit=r),e})),e.setState({tableItems:a})},e.handleChangeSellUptoUnit=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.up_to_units=r),e})),e.setState({tableItems:a})},e.handleChangeSellUptoAmount=function(t,n){var r=t.target.value,a=Object(aj.a)(e.state.tableItems);a.map((function(e){return n.insurer_contract_id===e.insurer_contract_id&&(e.up_to_amount=r),e})),e.setState({tableItems:a})},e.contractColoumns=function(){return[{id:"contractMaterial",header:Object(a.jsx)(tke,{children:"Material"}),width:"20%",type:Are.Text,hidden:!1,cell:function(e){return Object(a.jsx)("div",{children:e.material.name})}},{id:"contractCustomMaterial",header:Object(a.jsx)(tke,{children:"Custom Material Name"}),width:"20%",type:Are.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(nke,{type:"text",width:"100%",value:t.name,placeholder:t.name,onChange:function(n){return e.handleChangeCustomMaterial(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"contractUnit",header:Object(a.jsx)(tke,{children:"Unit"}),width:"10%",type:Are.Text,hidden:!1,cell:function(t){var n=e.state.unitOption.find((function(e){return e.id===t.material.measure_unit_id}));return Object(a.jsx)("div",{children:n.name})}},{id:"contractSellCost",header:Object(a.jsx)(tke,{children:"Sell Cost per Unit"}),width:"10%",type:Are.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(nke,{type:"number",width:"100%",value:t.sell_cost_per_unit,placeholder:t.sell_cost_per_unit,onChange:function(n){return e.handleChangeSellCostPerUnit(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"contractSellupUnit",header:Object(a.jsx)(tke,{children:"Sell Up-to Units"}),width:"10%",type:Are.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(nke,{type:"number",width:"100%",value:t.up_to_units,placeholder:t.up_to_units,onChange:function(n){return e.handleChangeSellUptoUnit(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}},{id:"contractSellUpAmount",header:Object(a.jsx)(tke,{children:"Sell Up-to Amount"}),width:"10%",type:Are.Text,hidden:!1,cell:function(t){return Object(a.jsx)("div",{children:Object(a.jsx)(nke,{type:"number",width:"100%",value:t.up_to_amount,placeholder:t.up_to_amount,onChange:function(n){return e.handleChangeSellUptoAmount(n,t)},onBlur:function(n){return e.handleOnBlurChange(n,t)}})})}}]},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getMaterialUnit().then((function(){}))}},{key:"render",value:function(){return Object(a.jsxs)(KSe,{className:"d-flex flex-column",children:[!0===this.state.loading?Object(a.jsx)(Nv,{size:40,color:_.gray0}):null,!0===this.state.loading?Object(a.jsx)(Nv,{size:40,color:_.gray0}):Object(a.jsx)(XSe,{children:Object(a.jsx)(ZSe,{width:"420px",defaultValue:this.state.insurerContractOption[0],options:this.state.insurerContractOption,onChange:this.handleSelectContractOption})}),Object(a.jsx)(XSe,{children:Object(a.jsx)(ZSe,{width:"300px",options:eke,onChange:this.handleSelectModelOption})}),Object(a.jsx)($Se,{children:Object(a.jsx)(Uwe,{children:Object(a.jsx)(Qse,{useCustomStyle:!0,dataSource:this.state.tableItems,columnsDefinition:this.contractColoumns()})})})]})}}]),n}(h.a.PureComponent),ake=Tv({first_name:[Dv],last_name:[Dv],role:[Dv],purchase_order_approve_limit:[Lv],credit_note_approval_limit:[Lv],invoice_approve_limit:[Lv],base_rate:[Lv,Dv],assessment_report_approve_limit:[Lv],working_hours_per_week:[Lv]});function oke(){var e=Object(f.a)(["\n  color: ",";\n  padding: 2px 4px;\n  border-radius: 2px;\n  background: ",";\n  cursor: ",";\n\n  :hover {\n    color: ",";\n  }\n"]);return oke=function(){return e},e}function ike(){var e=Object(f.a)(["\n  position: relative;\n  overflow: hidden;\n\n  :hover::before {\n    content: '';\n    position: absolute;\n    top: 0;\n    bottom: 0;\n    left: 0;\n    right: 0;\n    background: ",";\n    transition-duration: 0.3s;\n    opacity: 0.2;\n  }\n\n  > input {\n    cursor: pointer;\n    position: absolute;\n    visibility: hidden;\n    width: 100%;\n    height: 100%;\n  }\n"]);return ike=function(){return e},e}function cke(){var e=Object(f.a)(["\n  border-radius: 4px;\n  cursor: ",";\n  border: ",";\n"]);return cke=function(){return e},e}!function(e){e[e.b=1]="b",e[e.B=8]="B",e[e.kb=1024]="kb",e[e.kB=8192]="kB",e[e.mb=1048576]="mb",e[e.mB=8388608]="mB"}(QSe||(QSe={}));var ske=y.default.label(cke(),(function(e){return!e.disabled&&"pointer"}),(function(e){return e.isHavingImage&&"1px solid ".concat(_.gray2)})),lke=Object(y.default)(pC)(ike(),_.blue6),uke=y.default.div(oke(),(function(e){return e.disabled?"".concat(_.gray4," !important"):"".concat(_.blue1)}),(function(e){return!e.disabled&&_.gray2}),(function(e){return!e.disabled&&"pointer"}),_.white);function dke(e){var t=e.size,n=void 0===t?60:t,r=e.initialUrl,o=e.handleSave,i=e.initials,c=e.disabled,s=e.allowDimension,l=void 0===s?300:s,u=e.allowSize,d=void 0===u?2:u,h=e.isNewUser,b=Object(p.useState)(null),f=Object(w.a)(b,2),m=f[0],j=f[1],v=Object(p.useState)(!1),O=Object(w.a)(v,2),g=O[0],x=O[1],y=Object(p.useState)(r),_=Object(w.a)(y,2),S=_[0],k=_[1];Object(p.useEffect)((function(){return function(){m&&S&&window.URL.revokeObjectURL(S)}}),[m]);var C=!(!S&&!m);return Object(a.jsxs)("div",{className:"d-flex flex-column align-items-center",children:[Object(a.jsx)(ske,{isHavingImage:C,disabled:c,children:Object(a.jsxs)(lke,{wh:n,fontSize:!0===h?"1em":"1.5em",backgroundUrl:S||"",children:[!C&&i,Object(a.jsx)("input",{type:"file",onChange:function(e){var t=e.target.files[0];t&&function(e){var t=document.createElement("img"),n=window.URL.createObjectURL(e);return t.src=n,new Promise((function(r,a){t.onload=function(){return(t.naturalWidth>l||t.naturalWidth>l)&&(window.URL.revokeObjectURL(n),a("Resolution limit: ".concat(l,"x").concat(l,"px"))),e.size>d*QSe.mB&&a("Image must be smaller than ".concat(d*QSe.mB," byte")),Promise.resolve()}}))}(t).then((function(){j(t),x(!0),k(window.URL.createObjectURL(t))})).catch((function(e){return Oj(uj.Warning,e)}))},disabled:c,accept:"image/*",title:"Avatar"})]})}),!c&&Object(a.jsx)(uke,{disabled:!g,onClick:function(){g&&o(m).then((function(){return x(!1)}))},children:!0===h?"Add":"Change"})]})}var pke,hke=h.a.memo(dke),bke=n(600),fke=n.n(bke);function mke(){var e=Object(f.a)(["\n  overflow: auto;\n  max-height: ",";\n  width: 100%;\n"]);return mke=function(){return e},e}!function(e){e.onFocus="onFocus",e.onBlur="onBlur"}(pke||(pke={}));var jke=y.default.div(mke(),(function(e){return"".concat(e.height,"px")})),vke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onChange=function(t){return function(n){var r=e.props,a=r.input,o=a.onChange,i=a.value,c=r.onCheck;n.target.checked?(o([].concat(Object(aj.a)(i),[t])),c&&c(t)):o(fke()(i,t))}},e.bindFieldEvents=function(t){var n=e.props.input,r=n[t],a=n.value;return r?function(){return r(a)}:function(){return null}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.list,r=t.meta,o=t.label,i=t.direction,c=void 0===i?FA.horizontal:i,s=t.height,l=void 0===s?220:s,u=t.disabled,d=t.input.value,p=r.touched&&r.error;return Object(a.jsxs)("div",{className:"form-group",children:[o&&Object(a.jsx)(JU,{children:o}),Object(a.jsx)(jke,{height:l,className:"checkbox-list-wrapper",children:n&&n.map((function(t,n){return Object(a.jsx)(nI,{value:d.includes(t.id),disabled:t.disabled||u,unremovable:t.unremovable,label:t.label,propsForForm:{onChange:e.onChange(t.id),onBlur:e.bindFieldEvents(pke.onBlur),onFocus:e.bindFieldEvents(pke.onFocus)},direction:c},n)}))}),p&&Object(a.jsx)("div",{className:"invalid-feedback d-block",children:r.error})]})}}]),n}(p.PureComponent);function Oke(){var e=Object(f.a)(["\n  max-width: 1140px;\n"]);return Oke=function(){return e},e}function gke(){var e=Object(f.a)(["\n  padding: 20px;\n"]);return gke=function(){return e},e}function xke(){var e=Object(f.a)(["\n  margin-bottom: 20px;\n"]);return xke=function(){return e},e}function yke(){var e=Object(f.a)(["\n  margin-left: ",";\n  margin-right: ",";\n"]);return yke=function(){return e},e}function _ke(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n  margin-left: 0;\n"]);return _ke=function(){return e},e}var wke,Ske="row col-lg-8",kke="row col-10",Cke="15px",Nke=y.default.div(_ke(),lm.bold),Eke=Object(y.default)(Ov)(yke(),Cke,Cke),Ake=y.default.form(xke()),Ike=y.default.div(gke()),Tke=y.default.div(Oke()),Rke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).companyLoadController=void 0,e.handleSubmit=function(t){return t.preventDefault(),e.props.handleSubmit(e.props.onSubmit)()},e.getOptionLabel=function(e){return function(t){return t[e]}},e.contactGetLabel=function(e){switch(e.contact_type){case wv.company:return e.legal_name;case wv.person:var t=e,n=t.last_name;return t.first_name+" "+n}},e.transformToCheckbox=function(t){var n=e.props.primaryLocation,r=n&&n.id;return{id:t.id,label:t.name,unremovable:!(!r||r!==t.id)}},e.loadContacts=function(t){e.companyLoadController&&e.companyLoadController.abort();var n=hO.searchContactWC({term:t}),r=n.controller,a=n.promise;return e.companyLoadController=r,a.then((function(e){return e.data}))},e.debouncedLoadContact=Qv()(e.loadContacts,700),e.handleChangeLocation=function(t){var n=e.props,r=n.change,a=n.primaryLocation,o=n.locationList;a||r("primary_location",o.find((function(e){return e.id===t})))},e.optionToValue=function(e){return e.id.toString()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.roleList,r=t.locationList,o=t.onDelete,i=t.changeAvatar,c=t.user,s=t.isCurrentUser,l=t.dirty,u=t.valid,d=t.isDisabledDeleting,p=t.isDisabledUpdating;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(Ake,{className:"w-100",onSubmit:e.handleSubmit,autoComplete:"off",children:Object(a.jsxs)(Tke,{className:"row d-flex",children:[Object(a.jsx)(Ike,{children:Object(a.jsx)(hke,{disabled:!s||p,handleSave:i,initialUrl:c.avatar&&c.avatar.url,initials:mm(c).initials,isNewUser:!1})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{className:Ske,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"first_name",label:"Firstname *",placeholder:"Firstname",component:yg,disabled:p})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"last_name",label:"Surname *",placeholder:"Surname",component:yg,disabled:p})})]}),Object(a.jsxs)("div",{className:Ske,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"email",label:"Email",placeholder:"Email",component:yg,disabled:p})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"contact",label:"Contact",placeholder:"Start typing contact",component:NO,loadOptions:e.debouncedLoadContact,isClearable:!0,getOptionValue:e.optionToValue,getOptionLabel:e.contactGetLabel,disabled:p})})]}),Object(a.jsx)(Eke,{className:kke}),Object(a.jsx)(Nke,{className:Ske,children:"Roles & Permissions"}),Object(a.jsxs)("div",{className:Ske,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"user_roles",label:"Role *",placeholder:"Role",component:xO,isClearable:!0,options:n,getOptionValue:e.optionToValue,getOptionLabel:e.getOptionLabel("display_name"),disabled:p})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"password",label:"Password",placeholder:"Password",component:yg,type:"password",disabled:p})})]}),Object(a.jsxs)("div",{className:Ske,children:[Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"invoice_approve_limit",label:"Invoices",placeholder:"limit",component:yg,currency:!0,disabled:p})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"purchase_order_approve_limit",label:"Purchase Orders",placeholder:"limit",component:yg,currency:!0,disabled:p})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"credit_note_approval_limit",label:"Credit Notes",placeholder:"limit",component:yg,currency:!0,disabled:p})})]}),Object(a.jsxs)("div",{className:Ske,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"assessment_report_approve_limit",label:"Assessment Report Quote",placeholder:"limit",component:yg,currency:!0,disabled:p})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"base_rate",label:"Base Rate",placeholder:"$ 0",component:yg,currency:!0,disabled:p})})]}),Object(a.jsx)(Nke,{className:Ske,children:"Location access"}),Object(a.jsx)("div",{className:Ske,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"primary_location",label:"Primary location",placeholder:"Location",component:xO,options:r,getOptionValue:e.optionToValue,getOptionLabel:e.getOptionLabel("name"),disabled:p})})}),Object(a.jsx)("div",{className:Ske,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{component:vke,name:"add_location",onCheck:e.handleChangeLocation,list:r.map(e.transformToCheckbox),label:"Additional location",disabled:p})})}),Object(a.jsx)(Eke,{className:kke}),Object(a.jsx)(Nke,{className:Ske,children:"Human Resources"}),Object(a.jsx)("div",{className:Ske,children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"working_hours_per_week",label:"Working hours per week",placeholder:"Hours",component:yg,disabled:p})})}),Object(a.jsxs)("div",{className:Ske,children:[t.has(vx.USERS_UPDATE)&&Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Xg,{className:"btn",type:"submit",disabled:p||!l||!u,children:"Save"})}),t.has(vx.USERS_DELETE)&&Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Sue,{className:"btn",type:"button",onClick:o,disabled:d,children:"Delete"})})]})]})]})})}})}}]),n}(h.a.PureComponent),Dke=Object(sg.compose)(Object(jv.a)({form:"UserForm",validate:ake,enableReinitialize:!0}),Object(ug.a)({primaryLocation:"primary_location"}))(Rke),Mke=function(e){return{first_name:e.first_name&&e.first_name.trim(),last_name:e.last_name&&e.last_name.trim(),working_hours_per_week:+e.working_hours_per_week,purchase_order_approve_limit:+e.purchase_order_approve_limit,credit_note_approval_limit:+e.credit_note_approval_limit,invoice_approve_limit:+e.invoice_approve_limit,assessment_report_approve_limit:+e.assessment_report_approve_limit,base_rate:+e.base_rate}};!function(e){e.user="user",e.userRoles="userRoles",e.allRoles="allRoles",e.allLocations="allLocations",e.addingRoles="addingRoles",e.removeRoles="removeRoles"}(wke||(wke={}));var Lke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLoading:!0,isInitial:!0,user:void 0,userRoles:[],allLocations:[],allRoles:[]},e.activeRequestList={},e.removeRequest=function(t){e.activeRequestList[t]&&delete e.activeRequestList[t]},e.removeRequestChained=function(t){return function(n){return e.removeRequest(t),n}},e.isAllow=function(t){return e.props.currentContext.has(t)},e.setStateChained=function(t){return function(){return e.setState(t),Promise.resolve()}},e.requestFormData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match,e.activeRequestList={},r=[{fetch:zE.getUserWithControl(n.params.id),stateName:wke.user},{fetch:zE.getUserRoleWithControl(n.params.id),stateName:wke.userRoles},{fetch:zE.getRolesWithControl(),stateName:wke.allRoles},{fetch:Rg.getLocationsWithController({per_page:_g.Huge}),stateName:wke.allLocations}],a=[],r.forEach((function(t){a.push(e.wrapControllerRequest(t.fetch,t.stateName).then((function(n){return e.setState(Object(k.a)({},t.stateName,n.data))})))})),t.abrupt("return",Promise.all(a));case 6:case"end":return t.stop()}}),t)}))),e.handleSave=function(t){return e.isAllowUpdateUser?(e.setState({isLoading:!0}),e.updateUserInfo(t).then(e.checkAndUpdateRole(t)).then(e.requestFormData).then(e.setStateChained({isLoading:!1})).catch((function(t){return"AbortError"===t.name?Promise.resolve():(e.setState({isLoading:!1}),ix(t))}))):Oj(uj.Warning,"You have not permission for updating user")},e.extendRequestByLocation=function(t){var n=t.formData,r=t.resultDiff,a=n.primary_location,o=n.add_location,i=Object(c.a)({},r);return!a||a.id===(e.primaryUserLocation&&e.primaryUserLocation.id)&&Object(m.isEqual)(o,e.additionalUserLocations.map((function(e){return e.id})))||(i=Object(c.a)(Object(c.a)({},r),{},{locations:o,primary_location_id:a.id})),Promise.resolve({formData:n,resultDiff:i})},e.extendRequestByContact=function(t){var n=t.formData,r=t.resultDiff,a=n.contact,o=Object(c.a)({},r);return(a&&a.id)!==e.state.user.contact_id&&(o=Object(c.a)(Object(c.a)({},o),{},{contact_id:a.id||null})),Promise.resolve({formData:n,resultDiff:o})},e.extendRequestByPassword=function(e){var t=e.formData,n=e.resultDiff,r=t.password&&t.password.trim(),a=Object(c.a)({},n);return r&&(a=Object(c.a)(Object(c.a)({},a),{},{password:r})),Promise.resolve({formData:t,resultDiff:a})},e.updateUserInfo=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.state.user,a=Object(m.pickBy)(Mke(n),(function(e,t){return!Object(m.isEqual)(r[t],e)})),t.next=4,Promise.resolve({formData:n,resultDiff:a}).then(e.extendRequestByLocation).then(e.extendRequestByContact).then(e.extendRequestByPassword);case 4:if(o=t.sent,i=o.resultDiff,!Object(m.isEmpty)(i)){t.next=8;break}return t.abrupt("return",Promise.resolve());case 8:return t.abrupt("return",zE.updateUserData(+e.props.match.params.id,i));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.checkAndUpdateRole=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(r=e.state.userRoles,a=e.props.match.params.id,o=r[0]&&r[0].id,(i=t.user_roles&&t.user_roles.id)!==o){n.next=6;break}return n.abrupt("return",Promise.resolve(t));case 6:if(!o){n.next=9;break}return n.next=9,e.wrapControllerRequest(zE.removeRoleFromUserWC(a,[o]),wke.removeRoles);case 9:if(!i){n.next=12;break}return n.next=12,e.wrapControllerRequest(zE.addRoleToUserWC(a,[i]),wke.addingRoles);case 12:case"end":return n.stop()}}),n)})))},e.updateUserInStore=function(){var t=e.props.dispatch,n=e.state.user;e.isCurrentUser&&n&&(t(hP(n)),t(vP()))},e.handleDelete=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.isAllowDeleteUser){t.next=2;break}return t.abrupt("return",Oj(uj.Warning,"You have not permission for deleting user"));case 2:return n=e.props,r=n.history.replace,a=n.match.params.id,o=n.dispatch,t.next=5,o(iw("Confirm","Are you sure to delete user ".concat(e.state.user.full_name||""," ?")));case 5:if(t.sent){t.next=8;break}return t.abrupt("return");case 8:e.setState({isLoading:!0}),zE.deleteUser(+a).then((function(){return r("/manage/user")})).catch((function(t){e.setState({isLoading:!1}),Oj(uj.Warning,"User have not been deleted")}));case 10:case"end":return t.stop()}}),t)}))),e.handleSetAvatar=function(t){return e.setState({isLoading:!0}),zE.setAvatar(t).then((function(){return e.props.dispatch(mP())})).catch((function(e){return Oj(uj.Warning,"Avatar have not been changed")})).finally(e.setStateChained({isLoading:!1}))},e.filterUserLocation=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return e?t.primary:!t.primary}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.isAllow(vx.USERS_UPDATE)||this.isCurrentUser?(this.setState({isLoading:!0}),this.requestFormData().then(this.setStateChained({isInitial:!1,isLoading:!1})).catch((function(t){"AbortError"!==t.name&&(Oj(uj.Warning,"The form is not fully loaded"),e.setState({isInitial:!1,isLoading:!1}))}))):this.props.history.push("/unauthorized")}},{key:"componentWillUnmount",value:function(){var e=this;Object.keys(this.activeRequestList).forEach((function(t){var n=e.activeRequestList[t];n&&n.abort()}))}},{key:"componentDidUpdate",value:function(e,t){t.user!==this.state.user&&this.updateUserInStore()}},{key:"wrapControllerRequest",value:function(e,t){var n=e.promise,r=e.controller;return r&&(this.activeRequestList[t]=r),n.then(this.removeRequestChained(t))}},{key:"renderForm",value:function(){var e=this.state,t=e.allRoles,n=e.user,r=e.allLocations;return Object(a.jsx)(Dke,{onSubmit:this.handleSave,onDelete:this.handleDelete,isDisabledDeleting:!this.isAllowDeleteUser,isDisabledUpdating:!this.isAllowUpdateUser,changeAvatar:this.handleSetAvatar,initialValues:this.formInitialValues,user:n,isCurrentUser:this.isCurrentUser,roleList:t,locationList:r})}},{key:"render",value:function(){var e=this.state,t=e.isLoading,n=e.isInitial;return Object(a.jsxs)(h.a.Fragment,{children:[t&&Object(a.jsx)(NSe,{}),!n&&this.renderForm()]})}},{key:"isAllowDeleteUser",get:function(){return this.isAllow(vx.USERS_DELETE)}},{key:"isAllowUpdateUser",get:function(){return this.isAllow(vx.USERS_UPDATE)}},{key:"isCurrentUser",get:function(){return+this.props.match.params.id===this.props.currentUserId}},{key:"primaryUserLocation",get:function(){return this.state.user.locations.find(this.filterUserLocation())}},{key:"additionalUserLocations",get:function(){return this.state.user.locations.filter(this.filterUserLocation(!1))}},{key:"formInitialValues",get:function(){var e=this.state,t=e.user,n=e.userRoles;return Object(c.a)(Object(c.a)({},t),{},{primary_location:this.primaryUserLocation,add_location:this.additionalUserLocations.map((function(e){return e.id})),user_roles:n&&n[0]})}}]),n}(h.a.PureComponent);var Pke=Object(sg.compose)(O.g,nce(Cx),Object(b.b)((function(e){return{currentUserId:OP(e)}})))(Lke),Fke=Tv({first_name:[Dv],last_name:[Dv],role:[Dv],email:[Dv,Jv],password:[Dv,function(e){return!e||/^(?=.*[A-Z])(?=.*[ !"#$%&\'()*+\,\-\.\/:;<=>?@[\]^_`{|}~\x5c])(?=.*[0-9])(?=.*[a-z]).{8,}$/i.test(e)?void 0:"Password must contain at least one uppercase, one lowercase, one digit and one special character."}],purchase_order_approve_limit:[Lv],credit_note_approval_limit:[Lv],invoice_approve_limit:[Lv],assessment_report_approve_limit:[Lv],base_rate:[Lv,Dv],working_hours_per_week:[Lv]});function Uke(){var e=Object(f.a)(["\n  max-width: 1140px;\n"]);return Uke=function(){return e},e}function Bke(){var e=Object(f.a)(["\n  margin-left: ",";\n  margin-right: ",";\n"]);return Bke=function(){return e},e}function Vke(){var e=Object(f.a)(["\n  font-weight: ",";\n  margin-bottom: 15px;\n  margin-left: 0;\n"]);return Vke=function(){return e},e}function Jke(){var e=Object(f.a)(["\n  margin-bottom: 20px;\n"]);return Jke=function(){return e},e}var qke,zke=y.default.form(Jke()),Gke="row col-lg-8",Wke="row col-10",Hke="15px",Yke=y.default.div(Vke(),lm.bold),Qke=Object(y.default)(Ov)(Bke(),Hke,Hke),Kke=y.default.div(Uke()),Zke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={rolelist:[],locationList:[]},e.getLocation=function(){Rg.getLocationsWithController({per_page:_g.Huge}).promise.then((function(t){e.setState({locationList:t.data})}))},e.companyLoadController=void 0,e.optionToValue=function(e){return e.id.toString()},e.getOptionLabel=function(e){return function(t){return t[e]}},e.loadContacts=function(t){e.companyLoadController&&e.companyLoadController.abort();var n=hO.searchContactWC({term:t}),r=n.controller,a=n.promise;return e.companyLoadController=r,a.then((function(e){return e.data}))},e.contactGetLabel=function(e){switch(e.contact_type){case wv.company:return e.legal_name;case wv.person:var t=e,n=t.last_name;return t.first_name+" "+n}},e.debouncedLoadContact=Qv()(e.loadContacts,700),e.handleChangeLocation=function(t){var n=e.props,r=n.change,a=n.primaryLocation,o=e.state.locationList;a||r("primary_location",o.find((function(e){return e.id===t})))},e.transformToCheckbox=function(t){var n=e.props.primaryLocation,r=n&&n.id;return{id:t.id,label:t.name,unremovable:!(!r||r!==t.id)}},e.handleSubmit=function(t){return t.preventDefault(),e.props.handleSubmit(e.props.onSubmit)()},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;zE.getRolesWithControl().promise.then((function(t){e.setState({rolelist:t.data})})),this.getLocation()}},{key:"render",value:function(){var e=this.state,t=e.rolelist,n=e.locationList,r=this.props,o=r.valid,i=r.dirty;return Object(a.jsx)(zke,{className:"w-100",onSubmit:this.handleSubmit,autoComplete:"off",children:Object(a.jsx)(Kke,{className:"row d-flex",children:Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{className:Gke,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"first_name",label:"Firstname *",placeholder:"Firstname",component:yg})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"last_name",label:"Surname *",placeholder:"Surname",component:yg})})]}),Object(a.jsxs)("div",{className:Gke,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"email",label:"Email *",placeholder:"Email",component:yg})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"contact",label:"Contact",placeholder:"Start typing contact",component:NO,loadOptions:this.debouncedLoadContact,isClearable:!0,getOptionValue:this.optionToValue,getOptionLabel:this.contactGetLabel})})]}),Object(a.jsx)(Qke,{className:Wke}),Object(a.jsx)(Yke,{className:Gke,children:"Roles & Permissions"}),Object(a.jsxs)("div",{className:Gke,children:[Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"user_roles",label:"Role *",placeholder:"Role",component:xO,isClearable:!0,options:t&&t,getOptionValue:this.optionToValue,getOptionLabel:this.getOptionLabel("display_name")})}),Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"password",label:"Password *",placeholder:"Password",component:yg,type:"password"})})]}),Object(a.jsxs)("div",{className:Gke,children:[Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"invoice_approve_limit",label:"Invoices *",placeholder:"limit",component:yg,currency:!0})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"purchase_order_approve_limit",label:"Purchase Orders *",placeholder:"limit",component:yg,currency:!0})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"credit_note_approval_limit",label:"Credit Notes *",placeholder:"limit",component:yg,currency:!0})})]}),Object(a.jsxs)("div",{className:Gke,children:[Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"assessment_report_approve_limit",label:"Assessment Report Quote *",placeholder:"limit",component:yg,currency:!0})}),Object(a.jsx)("div",{className:"col-md-4",children:Object(a.jsx)(Hv.a,{name:"base_rate",label:"Base Rate *",placeholder:"$ 0",component:yg,currency:!0})})]}),Object(a.jsx)(Yke,{className:Gke,children:"Location access"}),Object(a.jsx)("div",{className:Gke,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{name:"primary_location",label:"Primary location",placeholder:"Location",component:xO,options:n,getOptionValue:this.optionToValue,getOptionLabel:this.getOptionLabel("name")})})}),Object(a.jsx)("div",{className:Gke,children:Object(a.jsx)("div",{className:"col-md-6",children:Object(a.jsx)(Hv.a,{component:vke,name:"add_location",onCheck:this.handleChangeLocation,list:n.map(this.transformToCheckbox),label:"Additional location"})})}),Object(a.jsx)(Qke,{className:Wke}),Object(a.jsx)(Yke,{className:Gke,children:"Human Resources"}),Object(a.jsx)("div",{className:Gke,children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"working_hours_per_week",label:"Working hours per week *",placeholder:"Hours",component:yg})})}),Object(a.jsx)("div",{className:Gke,children:Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Xg,{className:"btn",type:"submit",disabled:!i||!o,children:"Save"})})})]})})})}}]),n}(h.a.PureComponent),Xke=Object(sg.compose)(Object(jv.a)({form:"UserForm",validate:Fke,enableReinitialize:!0}),Object(ug.a)({primaryLocation:"primary_location"}))(Zke);!function(e){e.user="user",e.userRoles="userRoles",e.allRoles="allRoles",e.allLocations="allLocations",e.addingRoles="addingRoles",e.removeRoles="removeRoles"}(qke||(qke={}));var $ke=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLoading:!1,isInitial:!0,user:void 0,userRoles:[],allLocations:[],allRoles:[],userId:0},e.getLocation=function(){Rg.getLocationsWithController({per_page:_g.Huge}).promise.then((function(t){e.setState({allLocations:t.data})}))},e.activeRequestList={},e.removeRequestChained=function(t){return function(n){return e.removeRequest(t),n}},e.removeRequest=function(t){e.activeRequestList[t]&&delete e.activeRequestList[t]},e.requestFormData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.state.userId,r=[{fetch:zE.getUserWithControl(n),stateName:qke.user},{fetch:zE.getUserRoleWithControl(n),stateName:qke.userRoles},{fetch:zE.getRolesWithControl(),stateName:qke.allRoles},{fetch:Rg.getLocationsWithController({per_page:_g.Huge}),stateName:qke.allLocations}],a=[],r.forEach((function(t){a.push(e.wrapControllerRequest(t.fetch,t.stateName).then((function(n){return e.setState(Object(k.a)({},t.stateName,n.data))})))})),t.abrupt("return",Promise.all(a));case 5:case"end":return t.stop()}}),t)}))),e.setStateChained=function(t){return function(){return e.setState(t),Promise.resolve()}},e.isAllow=function(t){return e.props.currentContext.has(t)},e.checkAndUpdateRole=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.state.userId,a=t.user_roles&&t.user_roles.id,n.next=4,e.wrapControllerRequest(zE.addRoleToUserWC(r,[a]),qke.addingRoles);case 4:case"end":return n.stop()}}),n)})))},e.handleSubmit=function(t){return e.isAllowUpdateUser?(e.setState({isLoading:!0}),e.addNewUser(t).then((function(n){e.setState({userId:n.data.id},(function(){e.requestFormData().then(e.checkAndUpdateRole(t))}))})).then((function(){e.props.history.push("/manage/user")})).then(e.setStateChained({isLoading:!1})).catch((function(t){return"AbortError"===t.name?Promise.resolve():(e.setState({isLoading:!1}),ix(t))}))):Oj(uj.Warning,"You have not permission for updating user")},e.filterUserLocation=function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];return function(t){return e?t.primary:!t.primary}},e.extendRequestByLocation=function(t){var n=t.formData,r=t.resultDiff,a=n.primary_location,o=n.add_location,i=Object(c.a)({},r);return!a||a.id===(e.primaryUserLocation&&e.primaryUserLocation.id)&&Object(m.isEqual)(o,e.additionalUserLocations.map((function(e){return e.id})))||(i=Object(c.a)(Object(c.a)({},r),{},{locations:o,primary_location_id:a.id})),Promise.resolve({formData:n,resultDiff:i})},e.extendRequestByContact=function(e){var t=e.formData,n=e.resultDiff,r=Object(c.a)({},n);return Promise.resolve({formData:t,resultDiff:r})},e.extendRequestByPassword=function(e){var t=e.formData,n=e.resultDiff,r=t.password&&t.password.trim(),a=Object(c.a)({},n);return r&&(a=Object(c.a)(Object(c.a)({},a),{},{password:r})),Promise.resolve({formData:t,resultDiff:a})},e.extendRequestByEmail=function(e){var t=e.formData,n=e.resultDiff,r=t.email&&t.email.trim(),a=Object(c.a)({},n);return r&&(a=Object(c.a)(Object(c.a)({},a),{},{email:r})),Promise.resolve({formData:t,resultDiff:a})},e.addNewUser=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=Object(m.pickBy)(Mke(n)),t.next=3,Promise.resolve({formData:n,resultDiff:r}).then(e.extendRequestByLocation).then(e.extendRequestByContact).then(e.extendRequestByPassword).then(e.extendRequestByEmail);case 3:if(a=t.sent,o=a.resultDiff,!Object(m.isEmpty)(o)){t.next=7;break}return t.abrupt("return",Promise.resolve());case 7:return t.abrupt("return",zE.AddNewUser(o));case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getLocation()}},{key:"wrapControllerRequest",value:function(e,t){var n=e.promise,r=e.controller;return r&&(this.activeRequestList[t]=r),n.then(this.removeRequestChained(t))}},{key:"renderForm",value:function(){return Object(a.jsx)(Xke,{onSubmit:this.handleSubmit})}},{key:"render",value:function(){var e=this.state.isLoading;return Object(a.jsxs)(h.a.Fragment,{children:[e&&Object(a.jsx)(NSe,{}),this.renderForm()]})}},{key:"isAllowUpdateUser",get:function(){return this.isAllow(vx.USERS_UPDATE)}},{key:"primaryUserLocation",get:function(){return this.state.allLocations.find(this.filterUserLocation())}},{key:"additionalUserLocations",get:function(){return this.state.user.locations.filter(this.filterUserLocation(!1))}}]),n}(h.a.PureComponent),eCe=Object(sg.compose)(O.g,nce(Cx),Object(b.b)(null))($ke);function tCe(){var e=Object(f.a)(["\n  transform: rotate(","deg);\n  cursor: pointer;\n  path,\n  circle,\n  line,\n  polyline,\n  polygon,\n  rect {\n    stroke: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle,\n  :hover polygon,\n  :hover rect,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return tCe=function(){return e},e}var nCe=Object(y.default)(gv(["color","rotate"])(cm))(tCe(),(function(e){return e.rotate}),(function(e){return e.color?e.color:_.black1}),_.blue4),rCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={formOptions:[]},e.handleSubmit=function(){},e.renderVehicleList=function(t){var n=t.fields,r=n.getAll(),o=Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Car Brand"}),Object(a.jsx)(CF,{children:"Car Model"}),Object(a.jsx)(CF,{children:"Reg"}),Object(a.jsx)(CF,{children:"Car Type"}),Object(a.jsx)(CF,{children:"Out of Service"})]})}),Object(a.jsx)(NF,{children:n.map((function(t,n){return Object(a.jsxs)(AF,{className:"h-60",children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{type:"text",placeholder:"Enter brand",name:"".concat(t,".make"),"data-id":n,onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},validate:Dv,component:yg})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{type:"text",placeholder:"Enter model",name:"".concat(t,".model"),onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},component:yg,validate:Dv})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{type:"text",placeholder:"Enter Registeration",name:"".concat(t,".registration"),onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},component:yg,validate:Dv})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{type:"text",placeholder:"Enter Type",name:"".concat(t,".type"),onChange:function(t){return e.props.onItemNameChange(t,r[n].id)},onBlur:function(t){return e.props.onBlur(r[n])},component:yg,validate:Dv})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{component:rI,name:"".concat(t,".latest_status.type.makes_vehicle_unavailable"),onChange:function(t){return e.props.handleVehicleAvailability(t,r[n])}})}),Object(a.jsx)(EF,{className:"text-right",children:Object(a.jsx)(nCe,{name:Xf.Trash,size:20,rotate:0,color:_.black0,onClick:function(){return e.props.deleteItem(r[n])}})})]},"qn-row-".concat(n))}))})]})})});return Object(a.jsx)(a.Fragment,{children:o})},e.handleOptionChange=function(t){e.props.onFormSelectionChange(t)},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this,t=[];this.props.locations.hasOwnProperty("data")&&(t=this.props.locations.data.sort((function(e,t){return e.name>t.name?1:t.name>e.name?-1:0})));return this.props.vehcileFormDataList.filter((function(e){return null===e.rent_starts_at||""})),Object(a.jsx)(Cx.Consumer,{children:function(n){return Object(a.jsx)(Vg,{children:Object(a.jsxs)("form",{onSubmit:e.handleSubmit,autoComplete:"off",children:[Object(a.jsx)("fieldset",{children:Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"formOption",label:"",placeholder:"Location",component:xO,options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(t){e.handleOptionChange(t)}})})})}),Object(a.jsx)("div",{className:"row m-b10",children:Object(a.jsx)("div",{className:"col-5",children:n.has(vx.MANAGEMENT_CONTRACTS)&&Object(a.jsx)(Xg,{className:"btn",onClick:e.props.addNewItem,disabled:""===e.props.initialValues.formOption.id,children:"Add New"})})}),Object(a.jsx)(mv.a,{name:"vehicleDataForm",component:e.renderVehicleList})]})})}})}}]),n}(h.a.PureComponent),aCe=Object(b.b)((function(e){return{userLocations:e.user.locations}}))(Object(sg.compose)(Object(jv.a)({form:"VehcileForm",enableReinitialize:!0}))(rCe)),oCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={formSelectedOption:{id:"",value:"",name:"Select Location"},isChanged:!1},e.onFormSelectionChange=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,e.setState({formSelectedOption:n}),t.next=4,r(n7(n.id));case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,t.next=3,r(iw("Confirm","Delete this item?",Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("div",{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete vehicle ",n.type+" "+n.model,"? This action cannot be undone!."]})})})));case 3:if(!t.sent){t.next=9;break}return[],o=e.props.vehcileFormData.filter((function(e){return e.id!==n.id})),t.next=9,Z4.deleteVehcile(n.id).then((function(e){Oj(uj.Success,"Vehicle deleted successfully"),r(r7(o))})).catch((function(e){Oj(uj.Danger,e)}));case 9:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.addNewItem=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props.dispatch,a=[],a=Object.values(e.props.vehcileFormData),0,o=Math.max.apply(Math,Object(aj.a)(Object.values(e.props.vehcileFormData).map((function(e){return e.id})))),i={id:o>0?o+1:1,location_id:e.state.formSelectedOption.id,type:"",make:"",model:"",registration:"",rent_starts_at:null,rent_ends_at:null,created_at:"",updated_at:"",deleted_at:null,latest_status:{}},a.push(i),r(r7(a)),n.preventDefault();case 10:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleBlurEvent=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(i=function(){return(i=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!a.hasOwnProperty("isError")){e.next=10;break}if(a.isError){e.next=10;break}if(""!==a.created_at){e.next=7;break}return e.next=5,Z4.createVehicle(a).then((function(e){r(n7(a.location_id)),Oj(uj.Success,"Vehicle added successfully")})).catch((function(e){Oj(uj.Danger,e)}));case 5:e.next=10;break;case 7:if(!t){e.next=10;break}return e.next=10,Z4.updateVehcile(a.id,a).then((function(e){Oj(uj.Success,"Vehicle updated successfully")})).catch((function(e){Oj(uj.Danger,e)}));case 10:case"end":return e.stop()}}),e)})))).apply(this,arguments)},o=function(e){return i.apply(this,arguments)},r=e.props.dispatch,e.state.isChanged,{},a={},(a=e.props.vehcileFormData.find((function(e){return e.id===n.id}))).error_item_name="",a.isError=!1,""!==a.model&&""!==a.make&&""!==a.type&&""!==a.registeration)try{o(e.state.isChanged),e.state.isChanged&&e.setState({isChanged:!1})}catch(c){Oj(uj.Danger,c)}return t.abrupt("return",!0);case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.handleItemNameChangeEvent=function(t,n){var r=e.props.dispatch,a=j.a.cloneDeep(e.props.vehcileFormData),o={};Object.keys(a)&&(o=a.find((function(e){return e.id===n})),t.target.value!==o[t.target.name.split(".")[1]]&&e.setState({isChanged:!0}),o[t.target.name.split(".")[1]]=t.target.value,r(r7(a)))},e.handleVehicleAvailability=function(t,n){var r=e.props.dispatch,a={};function o(){return(o=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:Z4.updateVehicleStatus(n.id,a).then((function(e){Oj(uj.Success,"Vehicle status updated successfully"),r(n7(n.location_id))})).catch((function(e){Oj(uj.Danger,e)}));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}a=t?{status_type_id:"3"}:{status_type_id:"1"};try{!function(){o.apply(this,arguments)}()}catch(i){Oj(uj.Danger,i)}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.dispatch;t(r7([])),t((e={per_page:999},function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,Rg.searchLocations(e);case 2:r=t.sent,n({type:$4,payload:r});case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()))}},{key:"render",value:function(){var e;return e={formOption:this.state.formSelectedOption,vehicleDataForm:this.props.vehcileFormData},Object(a.jsx)("div",{style:{width:"100%"},children:Object(a.jsx)(aCe,{deleteItem:this.deleteItem,addNewItem:this.addNewItem,vehcileFormDataList:this.props.vehcileFormData,onFormSelectionChange:this.onFormSelectionChange,formSelectedOption:this.state.formSelectedOption,locations:this.props.locations,onBlur:this.handleBlurEvent,onItemNameChange:this.handleItemNameChangeEvent,handleVehicleAvailability:this.handleVehicleAvailability,initialValues:e})})}}]),n}(h.a.PureComponent),iCe=Object(sg.compose)(Object(b.b)((function(e){return{vehcileFormData:e.vehcileFormOption.vehcileFormData,locations:e.vehcileFormOption.locations}})),O.g)(oCe),cCe="SETTINGS_WH_STORAGE_SPACE_TYPE",sCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateStorageSpaceType(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingStorageSpaceTypeUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createStorageSpaceType(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingStorageSpaceTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:cCe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,autoFocus:!0,validate:Dv,itemProp:{autoFocus:!0}}),Object(a.jsx)(Hv.a,{name:"is_chargeable",label:"Chargeable",direction:"horizontal",component:rI})]})}}]),n}(p.PureComponent),lCe=Object(sg.compose)(Object(jv.a)({form:cCe,initialValues:{is_chargeable:!1}}))(sCe),uCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingStorageSpaceTypeAdded,(function(){return e.props.spaceTypes.fetch()})),Gy.listen(Ix.WarehousingStorageSpaceTypeRemoved,(function(){return e.props.spaceTypes.fetch()}))],e.componentDidMount=function(){e.props.spaceTypes.fetch()},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Storage Space Type",body:Object(a.jsx)(lCe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:cCe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,u3.updateStorageSpaceType(t.id,r);case 4:a=n.sent,j.a.merge(t,a),n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 11:return n.prev=11,e.setState({working:!1}),n.finish(11);case 14:return n.abrupt("return",Promise.resolve());case 15:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})));return function(e){return n.apply(this,arguments)}}()},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props.spaceTypes,n=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(r){var o;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||n)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Space Types"})}),Object(a.jsx)("div",{className:"print-hide",children:r.has(vx.OPERATIONS_STORAGE_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Chargeable"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(o=t.data)||void 0===o?void 0:o.map((function(t){return Object(a.jsx)(hCe,{form:"".concat(cCe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:r},t.id)}))})]})})]})})}})}}]),n}(p.PureComponent),dCe=Object(sg.compose)(oj({spaceTypes:{fetch:u3.getStorageSpaceTypes}}))(uCe),pCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete storage space type ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&u3.deleteStorageSpaceType(t.id).then((function(){Gy.emit(Ix.WarehousingStorageSpaceTypeRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item),n=e.context,r=!n.has(vx.OPERATIONS_STORAGE_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",autoFocus:!0,validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"is_chargeable",direction:"horizontal",component:rI,wrapperClassName:"m-0",onChange:this.onFieldChange,disabled:r})}),Object(a.jsxs)(EF,{className:"text-right",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),t.is_chargeable&&Object(a.jsx)(v.c,{className:"mr-3",to:"/manage/warehousing/charges/".concat(t.id),children:Object(a.jsx)(cm,{"data-tip":"View charging intervals","data-for":"grid_cell_tooltip",name:Xf.Costing,size:18})}),Object(a.jsx)(v.c,{to:"/manage/warehousing/spaces/".concat(t.id),children:Object(a.jsx)(cm,{"data-tip":"View storage spaces","data-for":"grid_cell_tooltip",name:Xf.BulletList,size:18})}),n.has(vx.OPERATIONS_STORAGE_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(p.PureComponent),hCe=Object(sg.compose)(Object(jv.a)({form:cCe}))(pCe),bCe="SETTINGS_WH_STORAGE_SPACE",fCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateStorageSpace(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingStorageSpaceUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createStorageSpace(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingStorageSpaceAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.storageType,n=e.locations,r=e.submitting,o=e.handleSubmit;return Object(a.jsxs)("form",{id:bCe,onSubmit:o(this.onSubmit),children:[r&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"mb-2",children:[Object(a.jsxs)("strong",{children:["Space Type: ",t.name]}),Object(a.jsxs)("span",{className:"badge badge-warning ml-2",children:[t.is_chargeable?"":"Not "," Chargeable"]})]}),Object(a.jsx)(Hv.a,{name:"location",label:"Location",component:xO,options:n,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},validate:Dv}),Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,autoFocus:!0,validate:Dv,itemProp:{autoFocus:!0}}),Object(a.jsx)(Hv.a,{name:"identifier",label:"Identifier",component:yg,validate:Dv})]})}}]),n}(p.PureComponent),mCe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:bCe,initialValues:{is_chargeable:!1}}))(fCe),jCe=n(148),vCe=n.n(jCe),OCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.toggleZoom=function(t){t.preventDefault(),t.stopPropagation();var n=e.state.zoomIn;e.setState({zoomIn:!n})},e.onOutsideClick=function(t){var n;(null===(n=e.wrapper.current)||void 0===n?void 0:n.contains(t.target))||e.state.zoomIn&&e.setState({zoomIn:!1})},e.wrapper=h.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){document.body.addEventListener("click",this.onOutsideClick,!0)}},{key:"componentWillUnmount",value:function(){document.body.removeEventListener("click",this.onOutsideClick,!0)}},{key:"render",value:function(){var e,t=this.props,n=t.zoom,r=t.dir,o=(t.ref,Object(rj.a)(t,["zoom","dir","ref"])),i=this.state.zoomIn;return i&&n&&(o.size=n),Object(a.jsx)("div",{className:"position-relative",ref:this.wrapper,children:Object(a.jsx)("div",{onClick:n?this.toggleZoom:void 0,style:i?(e={position:"absolute",top:0},Object(k.a)(e,"right"===r?"left":"right",0),Object(k.a)(e,"zIndex",1),Object(k.a)(e,"boxShadow","0 0 5px"),Object(k.a)(e,"background","#fff"),Object(k.a)(e,"padding","10px"),Object(k.a)(e,"borderTop","2px solid blue"),Object(k.a)(e,"width",n+20),Object(k.a)(e,"height",n+20),e):void 0,children:Object(a.jsx)(vCe.a,Object(c.a)({},o))})})}}]),n}(p.Component);function gCe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return gCe=function(){return e},e}var xCe=y.default.div(gCe(),_.black0),yCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingStorageSpaceAdded,(function(){return e.loadSpaces()})),Gy.listen(Ix.WarehousingStorageSpaceRemoved,(function(){return e.loadSpaces()}))],e.componentDidMount=function(){var t=e.props,n=t.storageType,r=t.match.params.type_id;n.fetch(r),e.loadSpaces()},e.loadSpaces=function(t){var n=e.props,r=n.spaces,a=n.match.params.type_id;r.fetch(Object(c.a)({inventory_storage_space_type_id:a},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Storage Space",body:Object(a.jsx)(mCe,Object(c.a)(Object(c.a)({},r),{},{storageType:e.props.storageType.data,afterSubmit:e.hideModal})),id:bCe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,u3.updateStorageSpace(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadSpaces({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.storageType,r=t.spaces,o=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(t){var i,c,s,l;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex-grow-1 mb-5 print-hide",children:[e.renderModal(),(r.loading||o)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Spaces"})}),Object(a.jsx)("div",{children:n.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Space Type: ",n.data.name," ",Object(a.jsxs)("span",{className:"badge badge-warning",children:[n.data.is_chargeable?"":"Not "," Chargeable"]}),"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.OPERATIONS_STORAGE_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item",{initialValues:{inventory_storage_space_type:n.data}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"\xa0"}),Object(a.jsx)(CF,{children:"Location"}),Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Identifier"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(i=r.data)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.map((function(n){return Object(a.jsx)(SCe,{form:"".concat(bCe,"_").concat(n.id),initialValues:n,item:n,onSubmit:e.onSubmit(n),context:t},n.id)}))})]}),r.data&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:r.data.pagination,onChange:e.handlePagination})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(xCe,{className:"d-flex flex-wrap",children:null===(s=r.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.name})}),Object(a.jsx)(vCe.a,{value:btoa(JSON.stringify({t:J7.space,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}})}}]),n}(p.PureComponent),_Ce=Object(sg.compose)(oj({storageType:{fetch:u3.getStorageSpaceType},spaces:{fetch:u3.getStorageSpaces}}))(yCe),wCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete storage space ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&u3.deleteStorageSpace(t.id).then((function(){Gy.emit(Ix.WarehousingStorageSpaceRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.locations),n=e.item,r=e.context,o=r.has(vx.OPERATIONS_STORAGE_UPDATE),i=!!t.find((function(e){return!n.location||e.id===n.location.id}));return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{children:Object(a.jsx)(OCe,{value:btoa(JSON.stringify({t:J7.space,id:n.id})),size:30,zoom:150,dir:"right",level:"Q"})}),Object(a.jsx)(EF,{className:"w-25",children:i||!o?Object(a.jsx)(Hv.a,{name:"location",component:xO,options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},className:"m-0",validate:Dv,onChange:this.onFieldChange}):n.location.name}),Object(a.jsx)(EF,{className:"w-25",children:i||!o?Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange}):n.name}),Object(a.jsx)(EF,{children:i||!o?Object(a.jsx)(Hv.a,{name:"identifier",component:yg,className:"m-0",autoFocus:!0,validate:Dv,onChange:this.onFieldChange}):n.identifier}),Object(a.jsx)(EF,{children:r.has(vx.OPERATIONS_STORAGE_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(n)})})]})})}}]),n}(p.PureComponent),SCe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:bCe}))(wCe),kCe="SETTINGS_WH_STORAGE_CONTAINER_TYPE",CCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateStorageContainerType(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingStorageContainerTypeUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createStorageContainerType(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingStorageContainerTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:kCe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,itemProp:{autoFocus:!0},validate:Dv})]})}}]),n}(p.PureComponent),NCe=Object(sg.compose)(Object(jv.a)({form:kCe}))(CCe),ECe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingStorageContainerTypeAdded,(function(){return e.props.containerTypes.fetch()})),Gy.listen(Ix.WarehousingStorageContainerTypeRemoved,(function(){return e.props.containerTypes.fetch()}))],e.componentDidMount=function(){e.props.containerTypes.fetch()},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Storage Container Type",body:Object(a.jsx)(NCe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:kCe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,u3.updateStorageContainerType(t.id,r);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 9:return n.prev=9,e.setState({working:!1}),n.finish(9);case 12:return n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}()},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props.containerTypes,n=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(r){var o;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||n)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Container Types"})}),Object(a.jsx)("div",{className:"print-hide",children:r.has(vx.OPERATIONS_STORAGE_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{children:Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(o=t.data)||void 0===o?void 0:o.map((function(t){return Object(a.jsx)(TCe,{form:"".concat(kCe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:r},t.id)}))})]})})]})}})}}]),n}(p.PureComponent),ACe=Object(sg.compose)(oj({containerTypes:{fetch:u3.getStorageContainerTypes}}))(ECe),ICe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete container type ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&u3.deleteStorageContainerType(t.id).then((function(){Gy.emit(Ix.WarehousingStorageContainerTypeRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item),n=e.context,r=!n.has(vx.OPERATIONS_STORAGE_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",autoFocus:!0,validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsxs)(EF,{className:"text-right",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),Object(a.jsx)(v.c,{to:"/manage/warehousing/container/".concat(t.id),children:Object(a.jsx)(cm,{"data-tip":"View storage containers","data-for":"grid_cell_tooltip",name:Xf.BulletList,size:18})}),n.has(vx.OPERATIONS_STORAGE_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(p.PureComponent),TCe=Object(sg.compose)(Object(jv.a)({form:kCe}))(ICe),RCe="SETTINGS_WH_STORAGE_CONTAINER",DCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateStorageContainer(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingStorageContainerUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createStorageContainer(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingStorageContainerAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.containerType,n=(e.locations,e.submitting),r=e.handleSubmit;return Object(a.jsxs)("form",{id:RCe,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsxs)("strong",{children:["Container Type: ",t.name]})}),Object(a.jsx)(Hv.a,{name:"label",label:"Label",component:yg,autoFocus:!0,validate:Dv,itemProp:{autoFocus:!0}}),Object(a.jsx)(Hv.a,{name:"is_default",label:"Default",direction:"horizontal",component:rI})]})}}]),n}(p.PureComponent),MCe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:RCe,initialValues:{is_default:!1}}))(DCe);function LCe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return LCe=function(){return e},e}var PCe=y.default.div(LCe(),_.black0),FCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingStorageContainerAdded,(function(){return e.loadData()})),Gy.listen(Ix.WarehousingStorageContainerRemoved,(function(){return e.loadData()}))],e.componentDidMount=function(){var t=e.props,n=t.containerType,r=t.match.params.type_id;n.fetch(r),e.loadData()},e.loadData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.containers,o=r.match.params.type_id,a.fetch(Object(c.a)({inventory_storage_container_type_id:o},n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Storage Container",body:Object(a.jsx)(MCe,Object(c.a)(Object(c.a)({},r),{},{containerType:e.props.containerType.data,afterSubmit:e.hideModal})),id:RCe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){var a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,u3.updateStorageContainer(t.id,r);case 4:if(a=n.sent,t.is_default||!a.is_default){n.next=10;break}return n.next=8,e.loadData();case 8:n.next=11;break;case 10:j.a.merge(t,a);case 11:n.next=16;break;case 13:return n.prev=13,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 16:return n.prev=16,e.setState({working:!1}),n.finish(16);case 19:return n.abrupt("return",Promise.resolve());case 20:case"end":return n.stop()}}),n,null,[[1,13,16,19]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.containerType,r=t.containers,o=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(t){var i,c,s,l;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex-grow-1 mb-5 print-hide",children:[e.renderModal(),(r.loading||o)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Storage Containers"})}),Object(a.jsx)("div",{children:n.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Container Type: ",n.data.name,"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.OPERATIONS_STORAGE_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item",{initialValues:{inventory_storage_container_type:n.data,is_default:!1}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"\xa0"}),Object(a.jsx)(CF,{children:"Label"}),Object(a.jsx)(CF,{children:"Default"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(i=r.data)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.map((function(n){return Object(a.jsx)(VCe,{form:"".concat(RCe,"_").concat(n.id),initialValues:n,item:n,onSubmit:e.onSubmit(n),context:t},n.id)}))})]}),r.data&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:r.data.pagination,onChange:e.handlePagination})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(PCe,{className:"d-flex flex-wrap",children:null===(s=r.data)||void 0===s||null===(l=s.data)||void 0===l?void 0:l.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.label})}),Object(a.jsx)(vCe.a,{value:btoa(JSON.stringify({t:J7.container,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}})}}]),n}(p.PureComponent),UCe=Object(sg.compose)(oj({containerType:{fetch:u3.getStorageContainerType},containers:{fetch:u3.getStorageContainers}}))(FCe),BCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete container ",Object(a.jsx)("strong",{children:t.label}),"?"]})})));case 3:n.sent&&u3.deleteStorageContainer(t.id).then((function(){Gy.emit(Ix.WarehousingStorageContainerRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.locations,e.item),n=e.context,r=!n.has(vx.OPERATIONS_STORAGE_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{children:Object(a.jsx)(OCe,{value:btoa(JSON.stringify({t:J7.container,id:t.id})),size:30,zoom:150,dir:"right",level:"Q"})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"label",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"is_default",direction:"horizontal",component:rI,wrapperClassName:"m-0",onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{children:n.has(vx.OPERATIONS_STORAGE_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),VCe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:RCe}))(BCe),JCe="SETTINGS_WH_STANDARD_ITEM",qCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateStandardItem(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingStandardItemUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createStandardItem(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingStandardItemAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.loadGroups=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u3.searchStandardItemGroups({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadGroups=Qv()(e.loadGroups,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:JCe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"inventory_standard_item_group",label:"Group",component:NO,loadOptions:this.debouncedLoadGroups,isClearable:!0})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"restoration_cost",label:"Restoration Cost",component:yg,type:"number",currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"restoration_hours",label:"Restoration Hours",component:yg,type:"number",min:0,step:1,validate:Fv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"assessment_fee",label:"Assessment Fee",component:yg,type:"number",currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"estimated_replacement_cost",label:"Estimated Replacement Cost",component:yg,type:"number",currency:!0})})]})]})}}]),n}(p.PureComponent),zCe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:JCe}))(qCe),GCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingStandardItemAdded,(function(){return e.loadStandardItems()})),Gy.listen(Ix.WarehousingStandardItemRemoved,(function(){return e.loadStandardItems()}))],e.componentDidMount=function(){e.loadStandardItems()},e.loadStandardItems=function(t){var n=e.props,r=n.standardItems,a=n.match.params.type_id;r.fetch(Object(c.a)({inventory_storage_standardItem_type_id:a},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Standard Item",body:Object(a.jsx)(zCe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:JCe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,u3.updateStandardItem(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadStandardItems({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props.standardItems,n=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(r){var o,i,c;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||n)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Standard Items"})})}),Object(a.jsx)("div",{className:"print-hide",children:r.has(vx.OPERATIONS_STORAGE_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Group"}),Object(a.jsx)(CF,{children:"Restoration Cost"}),Object(a.jsx)(CF,{children:"Restoration Hours"}),Object(a.jsx)(CF,{children:"Assessment Fee"}),Object(a.jsx)(CF,{children:"Replacement Cost"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(o=t.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((function(t){return Object(a.jsx)(YCe,{form:"".concat(JCe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:r},t.id)}))})]}),(null===(c=t.data)||void 0===c?void 0:c.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:t.data.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(p.PureComponent),WCe=Object(sg.compose)(oj({standardItems:{fetch:u3.getStandardItems}}))(GCe),HCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete standard item ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&u3.deleteStandardItem(t.id).then((function(){Gy.emit(Ix.WarehousingStandardItemRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e.loadGroups=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u3.searchStandardItemGroups({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadGroups=Qv()(e.loadGroups,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.locations,e.item),n=e.context,r=!n.has(vx.OPERATIONS_STORAGE_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"inventory_standard_item_group",component:NO,loadOptions:this.debouncedLoadGroups,className:"m-0",onChange:this.onFieldChange,isClearable:!0,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"restoration_cost",component:yg,type:"number",min:0,currency:!0,className:"m-0",onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"restoration_hours",component:yg,type:"number",min:0,step:1,validate:Fv,className:"m-0",onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"assessment_fee",component:yg,type:"number",min:0,currency:!0,className:"m-0",onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"estimated_replacement_cost",component:yg,type:"number",min:0,currency:!0,className:"m-0",onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{children:n.has(vx.OPERATIONS_STORAGE_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),YCe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:JCe}))(HCe),QCe="SETTINGS_WH_STANDARD_ITEM_GROUP",KCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,u3.updateStandardItemGroup(i,n);case 5:c=t.sent,Gy.emit(Ix.WarehousingStandardItemGroupUpdated,c),t.next=13;break;case 9:return t.next=11,u3.createStandardItemGroup(n);case 11:c=t.sent,Gy.emit(Ix.WarehousingStandardItemGroupAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:QCe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv,itemProp:{autoFocus:!0}})})})]})}}]),n}(p.PureComponent),ZCe=Object(sg.compose)(Object(jv.a)({form:QCe}))(KCe),XCe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.WarehousingStandardItemGroupAdded,(function(){return e.loadStandardItemGroups()})),Gy.listen(Ix.WarehousingStandardItemGroupRemoved,(function(){return e.loadStandardItemGroups()}))],e.componentDidMount=function(){e.loadStandardItemGroups()},e.loadStandardItemGroups=function(t){e.props.standardItemGroups.fetch(t)},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Standard Item Group",body:Object(a.jsx)(ZCe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:QCe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,u3.updateStandardItemGroup(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadStandardItemGroups({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props.standardItemGroups,n=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(r){var o,i,c;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||n)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Standard Item Groups"})})}),Object(a.jsx)("div",{className:"print-hide",children:r.has(vx.OPERATIONS_STORAGE_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(o=t.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((function(t){return Object(a.jsx)(tNe,{form:"".concat(QCe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:r},t.id)}))})]}),(null===(c=t.data)||void 0===c?void 0:c.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:t.data.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(p.PureComponent),$Ce=Object(sg.compose)(oj({standardItemGroups:{fetch:u3.getStandardItemGroups}}))(XCe),eNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete standard item group ",Object(a.jsx)("strong",{children:t.name}),"?"]})})));case 3:n.sent&&u3.deleteStandardItemGroup(t.id).then((function(){Gy.emit(Ix.WarehousingStandardItemGroupRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.context,r=!n.has(vx.OPERATIONS_STORAGE_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{children:n.has(vx.OPERATIONS_STORAGE_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),tNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:QCe}))(eNe),nNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match.url;return Object(a.jsxs)(O.d,{children:[Object(a.jsx)(xR,{path:"".concat(e,"/space-type"),component:dCe,permission:vx.MANAGEMENT_SYSTEM_SETTINGS}),Object(a.jsx)(xR,{path:"".concat(e,"/spaces/:type_id"),component:_Ce,permission:vx.MANAGEMENT_SYSTEM_SETTINGS}),Object(a.jsx)(xR,{path:"".concat(e,"/charges/:type_id"),component:G9,permission:vx.MANAGEMENT_SYSTEM_SETTINGS}),Object(a.jsx)(xR,{path:"".concat(e,"/container-type"),component:ACe,permission:vx.MANAGEMENT_SYSTEM_SETTINGS}),Object(a.jsx)(xR,{path:"".concat(e,"/container/:type_id"),component:UCe,permission:vx.MANAGEMENT_SYSTEM_SETTINGS}),Object(a.jsx)(xR,{path:"".concat(e,"/standard-item-group"),component:$Ce,permission:vx.OPERATIONS_INVENTORY_MANAGE}),Object(a.jsx)(xR,{path:"".concat(e,"/standard-item"),component:WCe,permission:vx.OPERATIONS_INVENTORY_MANAGE}),Object(a.jsx)(O.a,{to:"".concat(e,"/space-type")})]})}}]),n}(p.PureComponent),rNe="SETTINGS_LME_CHARGING_INTERVAL",aNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},i=o.id,c=e.props.equipmentCategory,!i){t.next=10;break}return t.next=6,ZW.updateEquipmentChargingInterval(c.id,i,n);case 6:s=t.sent,Gy.emit(Ix.LME_ChargingIntervalUpdated,s),t.next=14;break;case 10:return t.next=12,ZW.createEquipmentChargingInterval(c.id,n);case 12:s=t.sent,Gy.emit(Ix.LME_ChargingIntervalAdded,s);case 14:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,s),t.abrupt("return",s);case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.equipmentCategory,n=e.submitting,r=e.handleSubmit;return Object(a.jsxs)("form",{id:rNe,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"mb-2",children:Object(a.jsxs)("strong",{children:["Equipment Category: ",t.name]})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charging_interval",label:"Interval",component:xO,options:Object.keys(A9).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charging_rate_per_interval",label:"Rate Per Interval",component:yg,type:"number",currency:!0,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval",component:yg,type:"number",step:1,validate:Dv})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{className:"mb-3",children:"\xa0"}),Object(a.jsx)(Hv.a,{name:"is_default",label:"Default",direction:"horizontal",component:rI})]})]})]})}}]),n}(p.PureComponent),oNe=Object(sg.compose)(Object(jv.a)({form:rNe,initialValues:{is_default:!1}}))(aNe),iNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.LME_ChargingIntervalAdded,(function(){return e.loadIntervals()})),Gy.listen(Ix.LME_ChargingIntervalDeleted,(function(){return e.loadIntervals()}))],e.componentDidMount=function(){var t=e.props,n=t.equipmentCategory,r=t.match.params.category_id;n.fetch(r),e.loadIntervals()},e.loadIntervals=function(t){var n=e.props,r=n.chargingIntervals,a=n.match.params.category_id;r.fetch(a,Object(c.a)({},t))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"chargingInterval":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Charging Interval",body:Object(a.jsx)(oNe,Object(c.a)(Object(c.a)({},r),{},{equipmentCategory:e.props.equipmentCategory.data,afterSubmit:e.hideModal})),id:rNe,onClose:e.hideModal})}return null},e.resetAndGetChargingIntervals=function(){var t=e.props,n=t.chargingIntervals,r=t.match.params.category_id;n.reset(),n.fetch(r)},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,ZW.updateEquipmentChargingInterval(t.equipment_category_id,t.id,r);case 5:e.resetAndGetChargingIntervals(),n.next=11;break;case 8:return n.prev=8,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 11:return n.prev=11,e.setState({working:!1}),n.finish(11);case 14:return n.abrupt("return",Promise.resolve());case 15:case"end":return n.stop()}}),n,null,[[1,8,11,14]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadIntervals({page:t})},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.equipmentCategory,r=t.chargingIntervals,o=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(t){var i,c,s;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(r.loading||o)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Charging Intervals"})}),Object(a.jsx)("div",{children:n.data&&Object(a.jsxs)("strong",{className:"ml-3 text-md",children:["[Equipment Category: ",n.data.name,"]"]})})]}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.MANAGEMENT_EQUIPMENT)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("chargingInterval",{initialValues:{inventory_storage_space_type:n.data,is_default:!1}}),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Interval"}),Object(a.jsx)(CF,{children:"Rate / Interval"}),Object(a.jsx)(CF,{children:"Max Count to Next Interval"}),Object(a.jsx)(CF,{children:"Default"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(i=r.data)||void 0===i||null===(c=i.data)||void 0===c?void 0:c.map((function(n){return Object(a.jsx)(lNe,{form:"".concat(rNe,"_").concat(n.id),initialValues:n,item:n,onSubmit:e.onSubmit(n),context:t},n.id)}))})]}),(null===(s=r.data)||void 0===s?void 0:s.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:r.data.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(p.PureComponent),cNe=Object(sg.compose)(oj({equipmentCategory:{fetch:ZW.getEquipmentCategory},chargingIntervals:{fetch:ZW.getEquipmentChargingIntervals}}))(iNe),sNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this charging interval?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&ZW.deleteEquipmentChargingInterval(t.equipment_category_id,t.id).then((function(){Gy.emit(Ix.LME_ChargingIntervalDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=!e.context.has(vx.MANAGEMENT_EQUIPMENT);return j.a.isObject(t.charging_interval)||(t.charging_interval={value:t.charging_interval,label:t.charging_interval}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"charging_interval",component:xO,options:Object.keys(A9).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv,onChange:this.onFieldChange,className:"m-0",disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"charging_rate_per_interval",component:yg,type:"number",step:"any",validate:Dv,onChange:this.onFieldChange,className:"m-0",currency:!0,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"max_count_to_the_next_interval",component:yg,type:"number",step:1,validate:Dv,onChange:this.onFieldChange,className:"m-0",disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"is_default",component:rI,onChange:this.onFieldChange,wrapperClassName:"m-0",disabled:n})}),Object(a.jsx)(EF,{children:!n&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),lNe=Object(sg.compose)(Object(jv.a)({form:rNe}))(sNe),uNe="SETTINGS_LME_EQUIPMENT",dNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,ZW.updateEquipment(i,n);case 5:c=t.sent,Gy.emit(Ix.LME_EquipmentUpdated,c),t.next=13;break;case 9:return t.next=11,ZW.createEquipment(n);case 11:c=t.sent,Gy.emit(Ix.LME_EquipmentAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.searchEquipmentCategory=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.searchEquipmentCategories({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedSearchEquipmentCategory=Qv()(e.searchEquipmentCategory,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.submitting,r=e.handleSubmit;return Object(a.jsxs)("form",{id:uNe,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"location",label:"Location",component:xO,options:t,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},isClearable:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"equipment_category",label:"Equipment Type",component:NO,loadOptions:this.debouncedSearchEquipmentCategory,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"barcode",label:"Barcode",component:yg,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"make",label:"Make",component:yg,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"model",label:"Model Number",component:yg,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"serial_number",label:"Serial Number",component:yg,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"reference_id",label:"Reference Id",component:yg})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"status",label:"Asset Status",component:xO,options:Object.keys(R9).map((function(e,t){return{value:R9[e],label:R9[e]}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"last_test_tag_at",label:"Test & Tag Date",component:s_})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"next_test_tag_at",label:"Due Date",component:s_,futureEnabled:!0})})]}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"note",label:"Notes",component:gq})})})]})}}]),n}(p.PureComponent),pNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:uNe}))(dNe);function hNe(){var e=Object(f.a)(["\n.item{\n  padding: 20px;\n  page-break-inside:avoid;\n  border: 1px dotted ",";\n}\n"]);return hNe=function(){return e},e}var bNe=y.default.div(hNe(),_.black0),fNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.LME_EquipmentAdded,(function(){return e.loadData()})),Gy.listen(Ix.LME_EquipmentUpdated,(function(){return e.loadData()})),Gy.listen(Ix.LME_EquipmentDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData()},e.loadData=function(t){var n=e.props.equipments;e.setState({working:!0}),n.fetch(Object(c.a)(Object(c.a)({},t),{},{sortby:"asc"})).then((function(t){e.setState({data:t,working:!1})}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Equipment",body:Object(a.jsx)(pNe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:uNe,onClose:e.hideModal});case"edit_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Edit Equipment",body:Object(a.jsx)(pNe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:uNe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,ZW.updateEquipment(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.editItem=function(t){return Object(lj.a)(sj.a.mark((function n(){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:e.showModal("edit_item",{initialValues:t})();case 1:case"end":return n.stop()}}),n)})))},e.handlePagination=function(t){return e.loadData({page:t})},e.searchEquipments=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n)try{e.setState({working:!0,data:void 0},Object(lj.a)(sj.a.mark((function t(){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.equipmentSearch.fetch({term:n,per_page:15,page:1,sortby:"asc"});case 2:r=t.sent,e.setState({data:r});case 4:case"end":return t.stop()}}),t)}))))}catch(r){Oj(uj.Danger,"Server Error")}finally{e.setState({working:!1})}else e.loadData();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedFetch=Qv()(e.searchEquipments,500),e.handleSearch=function(t){e.setState({search:t}),e.debouncedFetch(t)},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.equipments,t.equipmentSearch),r=this.state,o=r.working,i=r.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var r,c;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"flex-grow-1 mb-5 print-hide",children:[e.renderModal(),(!i||o)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Equipments"})})}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.MANAGEMENT_EQUIPMENT)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4 mb-2",children:Object(a.jsx)(aC,{value:e.state.search,loading:n.loading,onSearchValueChange:e.handleSearch,placeholder:"Search Equipment Type, Barcode, Serial..."})})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"\xa0"}),Object(a.jsx)(CF,{children:"Location"}),Object(a.jsx)(CF,{children:"Equipment Type"}),Object(a.jsx)(CF,{children:"Barcode"}),Object(a.jsx)(CF,{children:"Make"}),Object(a.jsx)(CF,{children:"Model Number"}),Object(a.jsx)(CF,{children:"Serial Number"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.map((function(n){var r,o;return Object(a.jsx)(vNe,{form:"".concat(uNe,"_").concat(n.id,"_").concat(null===(r=n.updated_at)||void 0===r?void 0:r.toString()),initialValues:n,item:n,onSubmit:e.onSubmit(n),editItem:e.editItem(n),context:t},n.id+(null===(o=n.updated_at)||void 0===o?void 0:o.toString()))}))})]}),(null===i||void 0===i?void 0:i.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:i.pagination,onChange:e.handlePagination})})]})]}),Object(a.jsx)("div",{className:"print-only",children:Object(a.jsx)(bNe,{className:"d-flex flex-wrap",children:null===i||void 0===i||null===(c=i.data)||void 0===c?void 0:c.map((function(e){return Object(a.jsxs)("div",{className:"item",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:e.serial_number})}),Object(a.jsx)(vCe.a,{value:btoa(JSON.stringify({t:J7.equipment,id:e.id})),size:150,level:"Q"}),Object(a.jsx)("div",{className:"text-center mt-1",children:j.a.padStart(e.id+"",10,"0")})]})}))})})]})}})}}]),n}(p.PureComponent),mNe=Object(sg.compose)(oj({equipments:{fetch:ZW.getAllEquipments},equipmentSearch:{fetch:ZW.searchEquipment}}))(fNe),jNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this equipment?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&ZW.deleteEquipment(t.id).then((function(){Gy.emit(Ix.LME_EquipmentDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e.searchEquipmentCategory=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ZW.searchEquipmentCategories({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedSearchEquipmentCategory=Qv()(e.searchEquipmentCategory,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=(t.submitting,t.locations),r=t.item,o=!t.context.has(vx.MANAGEMENT_EQUIPMENT);n.find((function(e){return!r.location||e.id===r.location.id}));return j.a.isObject(r.status)||(r.status={value:r.status,label:r.status}),r.last_test_tag_at&&j.a.isString(r.last_test_tag_at)&&(r.last_test_tag_at=pm()(r.last_test_tag_at)),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{children:Object(a.jsx)(OCe,{value:btoa(JSON.stringify({t:J7.equipment,id:r.id})),size:30,zoom:150,dir:"right",level:"Q"})}),Object(a.jsx)(EF,{style:{width:"200px"},children:Object(a.jsx)(Hv.a,{name:"location",component:xO,options:n,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},className:"m-0",isClearable:!0,onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{style:{width:"200px"},children:Object(a.jsx)(Hv.a,{name:"equipment_category",component:NO,loadOptions:this.debouncedSearchEquipmentCategory,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"barcode",component:yg,validate:Dv,className:"m-0",onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"make",component:yg,validate:Dv,className:"m-0",onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"model",component:yg,validate:Dv,className:"m-0",onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"serial_number",component:yg,validate:Dv,className:"m-0",onChange:this.onFieldChange,disabled:o})}),Object(a.jsxs)(EF,{children:[!o&&Object(a.jsx)(cm,{name:Xf.Pencil,onClick:null===(e=this.props)||void 0===e?void 0:e.editItem,className:"mr-3"}),!o&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(r)})]})]})})}}]),n}(p.PureComponent),vNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:uNe}))(jNe),ONe="SETTINGS_LME_EQUIPMENT_TYPE",gNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,ZW.updateEquipmentCategory(i,n);case 5:c=t.sent,Gy.emit(Ix.LME_EquipmentTypeUpdated,c),t.next=13;break;case 9:return t.next=11,ZW.createEquipmentCategory(n);case 11:c=t.sent,Gy.emit(Ix.LME_EquipmentTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props,n=t.submitting,r=t.handleSubmit,o=t.formData,i=(null===o||void 0===o||null===(e=o.charging_interval)||void 0===e?void 0:e.value)||(null===o||void 0===o?void 0:o.charging_interval)||"";return Object(a.jsxs)("form",{id:ONe,onSubmit:r(this.onSubmit),children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv,itemProp:{autoFocus:!0}})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"type",label:"Type",component:xO,options:Object.keys(I9).map((function(e){return{value:I9[e],label:I9[e]}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv})})]}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"charging_interval",label:"Charging Interval",component:xO,options:Object.keys(A9).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"default_buy_cost_per_interval",label:"Default Buy Cost Per Interval",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charging_rate_per_interval",label:"Charging Rate Per Interval",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})})]}),"hour"===i&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"max_count_to_day_next_interval",label:"Max Count to Next Interval (Day)",component:yg,type:"number",step:1,min:0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charge_rate_per_day",label:"Charge Rate Per Day",component:yg,type:"number",step:"any",min:0,currency:!0})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval (Week)",component:yg,type:"number",step:1,min:0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charge_rate_per_week",label:"Charge Rate Per Week",component:yg,type:"number",step:"any",min:0,currency:!0})})]})]})}}]),n}(p.PureComponent),xNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations,formData:Object(GM.a)(ONe)(e)}})),Object(jv.a)({form:ONe,initialValues:{is_airmover:!1,is_dehum:!1}}))(gNe),yNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.LME_EquipmentTypeAdded,(function(){return e.loadData()})),Gy.listen(Ix.LME_EquipmentTypeDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData()},e.loadData=function(t){var n=e.props.equipmentTypes;e.setState({working:!0}),n.fetch(Object(c.a)(Object(c.a)({},t),{},{sortby:"asc"})).then((function(t){e.setState({data:t,working:!1})}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Equipment Category",body:Object(a.jsx)(xNe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:ONe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,ZW.updateEquipmentCategory(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e.SearchEquipmentCategory=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=17;break}return t.prev=1,e.setState({working:!0}),t.next=5,e.props.equipmentCategorySearch.fetch({term:n,per_page:15,page:1,sortby:"asc"});case 5:(r=t.sent)&&e.setState({data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:return t.prev=12,e.setState({working:!1}),t.finish(12);case 15:t.next=18;break;case 17:e.loadData();case 18:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearchEquipmentCategory=Qv()(e.SearchEquipmentCategory,500),e.handleSearch=function(t){e.setState({search:t}),e.debouncedSearchEquipmentCategory(t)},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.equipmentTypes,t.equipmentCategorySearch),r=this.state,o=r.working,i=r.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var r;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(!i||o)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Equipment Categories"})})}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.MANAGEMENT_EQUIPMENT)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4 mb-2",children:Object(a.jsx)(aC,{value:e.state.search,loading:n.loading,onSearchValueChange:e.handleSearch,placeholder:"Search Equipment Category Name..."})})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Type"}),Object(a.jsx)(CF,{children:"Default Buy Cost Per Interval"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===i||void 0===i||null===(r=i.data)||void 0===r?void 0:r.map((function(n){return Object(a.jsx)(SNe,{form:"".concat(ONe,"_").concat(n.id),initialValues:n,item:n,onSubmit:e.onSubmit(n),context:t},n.id)}))})]}),(null===i||void 0===i?void 0:i.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:i.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(p.PureComponent),_Ne=Object(sg.compose)(oj({equipmentTypes:{fetch:ZW.getEquipmentCategories},equipmentCategorySearch:{fetch:ZW.searchEquipmentCategories}}))(yNe),wNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this equipment category?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&ZW.deleteEquipmentCategory(t.id).then((function(){Gy.emit(Ix.LME_EquipmentTypeDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=!e.context.has(vx.MANAGEMENT_EQUIPMENT);return j.a.isObject(t.type)||(t.type={value:t.type,label:t.type}),Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"type",component:xO,options:Object.keys(I9).map((function(e){return{value:I9[e],label:I9[e]}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv,onChange:this.onFieldChange,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"default_buy_cost_per_interval",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:n})}),Object(a.jsxs)(EF,{children:[Object(a.jsx)(um.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),!n&&Object(a.jsx)(v.c,{className:"mr-3",to:"/manage/lme/equipment-type/".concat(t.id,"/charges"),children:Object(a.jsx)(cm,{"data-tip":"View charging intervals","data-for":"grid_cell_tooltip",name:Xf.Costing,size:18})}),!n&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})]})]})})}}]),n}(p.PureComponent),SNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:ONe}))(wNe),kNe="SETTINGS_LME_LABOUR_TYPE",CNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,ZW.updateLabourType(i,n);case 5:c=t.sent,Gy.emit(Ix.LME_LabourTypeUpdated,c),t.next=13;break;case 9:return t.next=11,ZW.createLabourType(n);case 11:c=t.sent,Gy.emit(Ix.LME_LabourTypeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:kNe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv,itemProp:{autoFocus:!0}})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"first_tier_hourly_rate",label:"Normal",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"second_tier_hourly_rate",label:"Time and Half",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"third_tier_hourly_rate",label:"Double Time",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"fourth_tier_hourly_rate",label:"Double Time and Half",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})})]})]})}}]),n}(p.PureComponent),NNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:kNe}))(CNe),ENe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.LME_LabourTypeAdded,(function(){return e.loadData()})),Gy.listen(Ix.LME_LabourTypeDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData()},e.loadData=function(t){var n=e.props.labourTypes;e.setState({working:!0}),n.fetch(Object(c.a)(Object(c.a)({},t),{},{sortby:"asc"})).then((function(t){e.setState({data:t,working:!1})}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Labour Type",body:Object(a.jsx)(NNe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:kNe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,ZW.updateLabourType(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e.searchLabourType=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n)try{e.loadData({term:n,per_page:15,page:1})}catch(r){Oj(uj.Danger,"Server Error")}finally{e.setState({working:!1})}else e.loadData();case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearchLabourType=Qv()(e.searchLabourType,500),e.handleSearch=function(t){e.setState({search:t}),e.debouncedSearchLabourType(t)},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props.labourTypes,n=this.state,r=n.working,o=n.data;return Object(a.jsx)(Cx.Consumer,{children:function(n){var i;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||r)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Labour Types"})})}),Object(a.jsx)("div",{className:"print-hide",children:n.has(vx.MANAGEMENT_JOBS_LABOUR)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4 mb-2",children:Object(a.jsx)(aC,{value:e.state.search,loading:t.loading,onSearchValueChange:e.handleSearch,placeholder:"Search Labour Type Name..."})})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Normal"}),Object(a.jsx)(CF,{children:"Time and Half"}),Object(a.jsx)(CF,{children:"Double Time"}),Object(a.jsx)(CF,{children:"Double Time and Half"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===o||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((function(t){return Object(a.jsx)(TNe,{form:"".concat(kNe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:n},t.id)}))})]}),(null===o||void 0===o?void 0:o.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:o.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(p.PureComponent),ANe=Object(sg.compose)(oj({labourTypes:{fetch:ZW.getLabourTypes}}))(ENe),INe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this labour type?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&ZW.deleteLabourType(t.id).then((function(){Gy.emit(Ix.LME_LabourTypeDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=!e.context.has(vx.JOBS_USAGE_LABOUR_MANAGE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"first_tier_hourly_rate",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"second_tier_hourly_rate",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"third_tier_hourly_rate",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"fourth_tier_hourly_rate",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:n})}),Object(a.jsx)(EF,{children:!n&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),TNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:kNe}))(INe),RNe="SETTINGS_LME_MATERIAL",DNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,ZW.updateMaterial(i,n);case 5:c=t.sent,Gy.emit(Ix.LME_MaterialUpdated,c),t.next=13;break;case 9:return t.next=11,ZW.createMaterial(n);case 11:c=t.sent,Gy.emit(Ix.LME_MaterialAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.units;e.data||e.fetch()}},{key:"render",value:function(){var e,t=this.props,n=t.submitting,r=t.units,o=t.handleSubmit;return Object(a.jsxs)("form",{id:RNe,onSubmit:o(this.onSubmit),children:[(n||r.loading)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,itemProp:{autoFocus:!0},validate:Dv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"measure_unit",label:"Measure Unit",component:xO,options:(null===(e=r.data)||void 0===e?void 0:e.data)||[],getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},validate:Dv})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"default_buy_cost_per_unit",label:"Default Buy Cost Per Unit",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"default_sell_cost_per_unit",label:"Default Sell Cost Per Unit",component:yg,type:"number",step:"any",min:0,currency:!0,validate:Dv})})]})]})}}]),n}(p.PureComponent),MNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:RNe}),oj({units:{fetch:ZW.getAllMeasureUnits}}))(DNe),LNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.LME_MaterialAdded,(function(){return e.loadData()})),Gy.listen(Ix.LME_MaterialDeleted,(function(){return e.loadData()}))],e.componentDidMount=function(){e.loadData(),e.props.units.fetch()},e.loadData=function(t){var n=e.props.materials;e.setState({working:!0}),n.fetch(Object(c.a)(Object(c.a)({},t),{},{sortby:"asc"})).then((function(t){e.setState({data:t,working:!1})}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"new_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Add New Material",body:Object(a.jsx)(MNe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal,units:e.props.units})),id:RNe,onClose:e.hideModal})}return null},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,j.a.merge(t,r),n.next=5,ZW.updateMaterial(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[1,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadData({page:t})},e.searchMaterials=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=17;break}return t.prev=1,e.setState({working:!0}),t.next=5,e.props.materialSearch.fetch({name:n,per_page:15,page:1,sortby:"asc"});case 5:(r=t.sent)&&e.setState({data:r}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),Oj(uj.Danger,"Server Error");case 12:return t.prev=12,e.setState({working:!1}),t.finish(12);case 15:t.next=18;break;case 17:e.loadData();case 18:case"end":return t.stop()}}),t,null,[[1,9,12,15]])})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearchMaterial=Qv()(e.searchMaterials,500),e.handleSearch=function(t){e.setState({search:t}),e.debouncedSearchMaterial(t)},e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this,t=this.props,n=(t.materials,t.units),r=t.materialSearch,o=this.state,i=o.working,c=o.data;return Object(a.jsx)(Cx.Consumer,{children:function(t){var o;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(!c||i)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Materials"})})}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.MANAGEMENT_MATERIALS)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("new_item"),children:"Add New"})})]}),Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-4 mb-2",children:Object(a.jsx)(aC,{value:e.state.search,loading:r.loading,onSearchValueChange:e.handleSearch,placeholder:"Search Material Name..."})})}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Measure Unit"}),Object(a.jsx)(CF,{children:"Default Buy Cost Per Unit"}),Object(a.jsx)(CF,{children:"Default Sell Cost Per Unit"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===c||void 0===c||null===(o=c.data)||void 0===o?void 0:o.map((function(r){var o;return Object(a.jsx)(UNe,{form:"".concat(RNe,"_").concat(r.id),initialValues:r,item:r,units:(null===(o=n.data)||void 0===o?void 0:o.data)||[],onSubmit:e.onSubmit(r),context:t},r.id)}))})]}),(null===c||void 0===c?void 0:c.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:c.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(p.PureComponent),PNe=Object(sg.compose)(oj({materials:{fetch:ZW.getAllMaterials},units:{fetch:ZW.getAllMeasureUnits},materialSearch:{fetch:ZW.searchMaterials}}))(LNe),FNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this material?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&ZW.deleteMaterial(t.id).then((function(){Gy.emit(Ix.LME_MaterialDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.units,r=!e.context.has(vx.MANAGEMENT_MATERIALS);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-25",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"measure_unit",component:xO,options:n,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:r})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"default_buy_cost_per_unit",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:r})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"default_sell_cost_per_unit",component:yg,type:"number",step:"any",min:0,className:"m-0",validate:Dv,onChange:this.onFieldChange,currency:!0,disabled:r})}),Object(a.jsx)(EF,{children:!r&&Object(a.jsx)(cm,{name:Xf.Delete,onClick:this.deleteItem(t)})})]})})}}]),n}(p.PureComponent),UNe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),Object(jv.a)({form:RNe}))(FNe),BNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match.url;return Object(a.jsxs)(O.d,{children:[Object(a.jsx)(xR,{path:"".concat(e,"/labour-type"),component:ANe,permission:vx.MANAGEMENT_JOBS_LABOUR}),Object(a.jsx)(xR,{path:"".concat(e,"/equipment-type/:category_id/charges"),component:cNe,permission:vx.MANAGEMENT_EQUIPMENT}),Object(a.jsx)(xR,{path:"".concat(e,"/equipment-type"),component:_Ne,permission:vx.MANAGEMENT_EQUIPMENT}),Object(a.jsx)(xR,{path:"".concat(e,"/equipment"),component:mNe,permission:vx.MANAGEMENT_EQUIPMENT}),Object(a.jsx)(xR,{path:"".concat(e,"/material"),component:PNe,permission:vx.MANAGEMENT_MATERIALS})]})}}]),n}(p.PureComponent),VNe="SETTINGS_LOCATIONS",JNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=10;break}return t.next=5,a7.updateLocation(i,n);case 5:c=t.sent.data,Gy.emit(Ix.LocationUpdated,c),Oj(uj.Success,"Location updated successfully"),t.next=15;break;case 10:return t.next=12,a7.createLocation(n);case 12:c=t.sent.data,Oj(uj.Success,"Location created successfully"),Gy.emit(Ix.LocationAdded,c);case 15:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 19:return t.prev=19,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 22:case"end":return t.stop()}}),t,null,[[0,19]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:VNe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"code",label:"Code",component:yg,validate:Dv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"tz_offset",label:"Tz Offset",component:yg,validate:Fv})})})]})}}]),n}(p.PureComponent),qNe=Object(sg.compose)(Object(jv.a)({form:VNe}))(JNe),zNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,a7.updateLocation(t.id,r);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 9:return n.prev=9,e.setState({working:!1}),n.finish(9);case 12:return n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}()},e.loadLocations=function(t){e.props.locations.fetch(Object(c.a)({},t))},e.handlePagination=function(t){return e.loadLocations({per_page:15,page:t})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"location":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Location",body:Object(a.jsx)(qNe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:VNe,onClose:e.hideModal})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLocations({per_page:15}),Gy.listen(Ix.LocationAdded,this.loadLocations),Gy.listen(Ix.LocationRemoved,this.loadLocations)}},{key:"render",value:function(){var e=this,t=this.props.locations,n=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(r){var o,i,c;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||n)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Locations"})}),Object(a.jsx)("div",{className:"print-hide",children:r.has(vx.LOCATIONS_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("location"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Code"}),Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Tz Offset"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(o=t.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((function(t){return Object(a.jsx)(HNe,{form:"".concat(VNe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:r},t.id)}))})]}),(null===(c=t.data)||void 0===c?void 0:c.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:t.data.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(h.a.PureComponent),GNe=Object(sg.compose)(oj({locations:{fetch:a7.getAllLocations}}))(zNe),WNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete location ",Object(a.jsx)("strong",{children:t.name}),"? This action cannot be undone!"]})})));case 3:n.sent&&a7.deleteLocation(t.id).then((function(){Gy.emit(Ix.LocationRemoved,t),Oj(uj.Success,"Location deleted successfully")})).catch((function(e){Oj(uj.Danger,"Server Error")}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item),n=e.context,r=!n.has(vx.LOCATIONS_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"code",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"tz_offset",component:yg,className:"m-0",validate:Fv,onChange:this.onFieldChange,disabled:r})}),Object(a.jsxs)(EF,{className:"text-right",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),n.has(vx.LOCATIONS_MODIFY_SUBURBS)&&Object(a.jsx)(v.c,{to:"/manage/location/".concat(t.id,"/suburb"),children:Object(a.jsx)(cm,{"data-tip":"View location suburbs","data-for":"grid_cell_tooltip",name:Xf.BulletList,size:18})}),r&&Object(a.jsx)(cm,{name:Xf.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(h.a.PureComponent),HNe=Object(sg.compose)(Object(jv.a)({form:VNe}))(WNe),YNe=function(e){return{state_id:e.state?e.state.id:e.state_id,name:e.name,postcode:e.postcode}},QNe={getLocationAllSuburb:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/locations/".concat(t.locationId,"/suburbs"),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getAllSuburb:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/suburbs",t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getSuburb:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/suburbs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createSuburb:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/suburbs",YNe(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateSuburb:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("/v1/suburbs/".concat(t),YNe(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteSuburb:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/suburbs/".concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),suburbMapToLocation:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("/v1/locations/".concat(t,"/suburbs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),suburbDeleteToLocation:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("/v1/locations/".concat(t,"/suburbs/").concat(n));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()},KNe="SETTINGS_LOCATIONS_SUBURB",ZNe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=10;break}return t.next=5,QNe.updateSuburb(i,n);case 5:c=t.sent.data,Oj(uj.Success,"Suburb updated successfully"),Gy.emit(Ix.SuburbUpdated,c),t.next=18;break;case 10:return t.next=12,QNe.createSuburb(n);case 12:if(!(c=t.sent.data)){t.next=17;break}return t.next=16,QNe.suburbMapToLocation(e.props.location_id,c.id);case 16:Oj(uj.Success,"Suburb created successfully");case 17:Gy.emit(Ix.SuburbAdded,c);case 18:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 22:return t.prev=22,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 25:case"end":return t.stop()}}),t,null,[[0,22]])})));return function(e){return t.apply(this,arguments)}}(),e.loadState=function(e){var t={se:e};return Rg.searchStates(t).then((function(e){return e.data}))},e.debouncedSearchState=Qv()(e.loadState,1e3),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:KNe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"postcode",label:"Post Code",component:yg,validate:Dv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"state",label:"State",placeholder:"Start typing to search...",component:NO,loadOptions:this.debouncedSearchState,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},validate:Dv})})})]})}}]),n}(p.PureComponent),XNe=Object(sg.compose)(Object(jv.a)({form:KNe}))(ZNe),$Ne=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.loadLocationSuburbs=function(t){var n=e.props,r=n.suburbs,a=n.match.params.location_id;r.fetch(Object(c.a)({locationId:a},t))},e.getLocationDetail=function(){var t=e.props.match.params.location_id;a7.getLocation(t).then((function(t){e.setState({location:null===t||void 0===t?void 0:t.data})}))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(t){e.setState({modal:void 0})},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),e.props.match.params.location_id,n.prev=2,n.next=5,QNe.updateSuburb(t.id,r);case 5:n.next=10;break;case 7:return n.prev=7,n.t0=n.catch(2),n.abrupt("return",ix(n.t0));case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:return n.abrupt("return",Promise.resolve());case 14:case"end":return n.stop()}}),n,null,[[2,7,10,13]])})));return function(e){return n.apply(this,arguments)}}()},e.handlePagination=function(t){return e.loadLocationSuburbs({per_page:15,page:t})},e.renderModal=function(){var t,n=e.state,r=n.modal,o=n.modalData,i=e.props.match.params.location_id;switch(r){case"location_suburb":return Object(a.jsx)(B9,{isOpen:!0,title:"Add Suburb [Location:".concat(null===(t=e.state.location)||void 0===t?void 0:t.name,"]"),body:Object(a.jsx)(XNe,Object(c.a)(Object(c.a)({},o),{},{afterSubmit:e.hideModal,location_id:i})),id:KNe,onClose:e.hideModal})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadLocationSuburbs({per_page:15}),this.getLocationDetail(),Gy.listen(Ix.SuburbAdded,this.loadLocationSuburbs),Gy.listen(Ix.SuburbRemoved,this.loadLocationSuburbs)}},{key:"render",value:function(){var e=this,t=this.props,n=t.suburbs,r=t.match.params.location_id,o=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(t){var i,c,s,l;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(n.loading||o)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"Suburbs"})}),Object(a.jsx)("strong",{className:"ml-3 text-md",children:"[Location:".concat(null===(i=e.state.location)||void 0===i?void 0:i.name,"]")})]}),Object(a.jsx)("div",{className:"print-hide",children:t.has(vx.SUBURBS_CREATE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("location_suburb"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Post Code"}),Object(a.jsx)(CF,{children:"State"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(c=n.data)||void 0===c||null===(s=c.data)||void 0===s?void 0:s.map((function(n){return Object(a.jsx)(nEe,{form:"".concat(KNe,"_").concat(n.id),initialValues:n,item:n,location_id:r,onSubmit:e.onSubmit(n),context:t},n.id)}))})]}),(null===(l=n.data)||void 0===l?void 0:l.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:n.data.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(h.a.PureComponent),eEe=Object(sg.compose)(oj({suburbs:{fetch:QNe.getLocationAllSuburb}}))($Ne),tEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.deleteSuburb=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.dispatch,i=r.location_id,n.next=3,o(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete suburb ",Object(a.jsx)("strong",{children:t.name}),"? This action cannot be undone!"]})})));case 3:n.sent&&QNe.deleteSuburb(t.id).then((function(e){QNe.suburbDeleteToLocation(i,t.id),Gy.emit(Ix.SuburbRemoved,t),Oj(uj.Success,"Suburb deleted successfully")})).catch((function(e){return ix(e)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.states,r=e.context,o=!r.has(vx.SUBURBS_UPDATE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"postcode",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:o})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"state",component:xO,options:n,getOptionValue:function(e){return e.id},getOptionLabel:function(e){return e.name},className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:o})}),Object(a.jsxs)(EF,{className:"text-right",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),r.has(vx.SUBURBS_DELETE)&&Object(a.jsx)(cm,{name:Xf.Delete,className:"ml-3",onClick:this.deleteSuburb(t)})]})]})})}}]),n}(h.a.PureComponent),nEe=Object(sg.compose)(Object(b.b)((function(e){var t;return{states:null===(t=e.allStates.data)||void 0===t?void 0:t.data}})),Object(jv.a)({form:KNe}))(tEe),rEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){this.props.match.url;return Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/manage/location",component:GNe}),Object(a.jsx)(O.b,{exact:!0,path:"/manage/location/:location_id/suburb",component:eEe}),Object(a.jsx)(O.a,{to:"/manage/location"})]})}}]),n}(p.PureComponent),aEe="/v1/finance/gs-codes",oEe={getAllGSCode:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(aEe),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getGSCode:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("".concat(aEe,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),createGSCode:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.post("".concat(aEe),t);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),updateGSCode:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.put("".concat(aEe,"/").concat(t),n);case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),deleteGSCode:function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.remove("".concat(aEe,"/").concat(t));case 2:return e.abrupt("return",e.sent);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},iEe="SETTINGS_GS_CODE",cEe=[{label:"Buy",value:"buy"},{label:"Sell",value:"sell"}],sEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},!(i=o.id)){t.next=9;break}return t.next=5,oEe.updateGSCode(i,n);case 5:c=t.sent.data,Gy.emit(Ix.GSCodeUpdated,c),t.next=13;break;case 9:return t.next=11,oEe.createGSCode(n);case 11:c=t.sent.data,Gy.emit(Ix.GSCodeAdded,c);case 13:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,c),t.abrupt("return",c);case 17:return t.prev=17,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 20:case"end":return t.stop()}}),t,null,[[0,17]])})));return function(e){return t.apply(this,arguments)}}(),e.OnChangeBuySell=function(t){"sell"===t.value?(e.props.change("is_buy",!1),e.props.change("is_sell",!0)):(e.props.change("is_buy",!0),e.props.change("is_sell",!1))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.handleSubmit;return Object(a.jsxs)("form",{id:iEe,onSubmit:n(this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Name",component:yg,validate:Dv,itemProp:{autoFocus:!0}})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"description",label:"Description",component:yg,validate:Dv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"item_type",label:"Buy/Sell",placeholder:"Select...",component:xO,validate:Dv,options:cEe,getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},onChange:this.OnChangeBuySell})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"amount",label:"Amount",component:yg,validate:Dv})})})]})}}]),n}(p.PureComponent),lEe=Object(sg.compose)(Object(jv.a)({form:iEe,initialValues:{is_buy:!1,is_sell:!1}}))(sEe),uEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(t){e.setState({modal:void 0})},e.onSubmit=function(t){return function(){var n=Object(lj.a)(sj.a.mark((function n(r){return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,n.next=4,oEe.updateGSCode(t.id,r);case 4:n.next=9;break;case 6:return n.prev=6,n.t0=n.catch(1),n.abrupt("return",ix(n.t0));case 9:return n.prev=9,e.setState({working:!1}),n.finish(9);case 12:return n.abrupt("return",Promise.resolve());case 13:case"end":return n.stop()}}),n,null,[[1,6,9,12]])})));return function(e){return n.apply(this,arguments)}}()},e.loadGstCodes=function(t){e.props.gscodes.fetch(Object(c.a)({},t))},e.handlePagination=function(t){return e.loadGstCodes({page:t})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"gs_code":return Object(a.jsx)(B9,{isOpen:!0,title:"Add GS Code",body:Object(a.jsx)(lEe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:iEe,onClose:e.hideModal})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadGstCodes(),Gy.listen(Ix.GSCodeAdded,this.loadGstCodes),Gy.listen(Ix.GSCodeRemoved,this.loadGstCodes)}},{key:"render",value:function(){var e=this,t=this.props.gscodes,n=this.state.working;return Object(a.jsx)(Cx.Consumer,{children:function(r){var o,i,c;return Object(a.jsxs)("div",{className:"flex-grow-1 mb-5",children:[e.renderModal(),(t.loading||n)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center mb-3",children:[Object(a.jsx)("h4",{className:"m-0",children:Object(a.jsx)("strong",{children:"GS Code"})}),Object(a.jsx)("div",{className:"print-hide",children:r.has(vx.GS_CODE_MANAGE)&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:e.showModal("gs_code"),children:"Add New"})})]}),Object(a.jsxs)("div",{children:[Object(a.jsxs)(q9,{className:"table m-t30",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Name"}),Object(a.jsx)(CF,{children:"Description"}),Object(a.jsx)(CF,{children:"Buy/Sell"}),Object(a.jsx)(CF,{children:"Amount"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:null===(o=t.data)||void 0===o||null===(i=o.data)||void 0===i?void 0:i.map((function(t){return t.item_type=!0===t.is_buy?cEe.find((function(e){return"buy"===e.value})):cEe.find((function(e){return"sell"===e.value})),Object(a.jsx)(hEe,{form:"".concat(iEe,"_").concat(t.id),initialValues:t,item:t,onSubmit:e.onSubmit(t),context:r},t.id)}))})]}),(null===(c=t.data)||void 0===c?void 0:c.pagination)&&Object(a.jsx)("div",{className:"d-flex justify-content-center",children:Object(a.jsx)(oC,{pagination:t.data.pagination,onChange:e.handlePagination})})]})]})}})}}]),n}(h.a.PureComponent),dEe=Object(sg.compose)(oj({gscodes:{fetch:oEe.getAllGSCode}}))(uEe),pEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).triggerSubmit=function(){e.props.handleSubmit(e.props.onSubmit)()},e.debouncedTriggerSubmit=Qv()(e.triggerSubmit,500),e.onFieldChange=function(t){e.debouncedTriggerSubmit()},e.OnChangeBuySell=function(t){"sell"===t.value?(e.props.change("is_buy",!1),e.props.change("is_sell",!0)):(e.props.change("is_buy",!0),e.props.change("is_sell",!1)),e.debouncedTriggerSubmit()},e.deleteItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("p",{children:["Are you sure you want to delete gs code ",Object(a.jsx)("strong",{children:t.name}),"? This action cannot be undone!"]})})));case 3:n.sent&&oEe.deleteGSCode(t.id).then((function(){Oj(uj.Success,"GS Code deleted successfully"),Gy.emit(Ix.GSCodeRemoved,t)}));case 5:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=(e.submitting,e.item),n=!e.context.has(vx.GS_CODE_MANAGE);return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(EF,{className:"w-33",children:Object(a.jsx)(Hv.a,{name:"name",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"description",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"item_type",placeholder:"Select...",component:xO,validate:Dv,options:cEe,getOptionValue:function(e){return e.value},getOptionLabel:function(e){return e.label},onChange:this.OnChangeBuySell,disabled:n})}),Object(a.jsx)(EF,{children:Object(a.jsx)(Hv.a,{name:"amount",component:yg,className:"m-0",validate:Dv,onChange:this.onFieldChange,disabled:n})}),Object(a.jsxs)(EF,{className:"text-right",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"grid_cell_tooltip",place:"left",effect:"solid",html:!0}),!n&&Object(a.jsx)(cm,{name:Xf.Delete,className:"ml-3",onClick:this.deleteItem(t)})]})]})})}}]),n}(h.a.PureComponent),hEe=Object(sg.compose)(Object(jv.a)({form:iEe}))(pEe);function bEe(){var e=Object(f.a)(["\n  padding: 30px;\n  position: relative;\n  min-height: 100%;\n"]);return bEe=function(){return e},e}function fEe(){var e=Object(f.a)(["\n  overflow-y: auto;\n  min-height: 100%;\n"]);return fEe=function(){return e},e}function mEe(){var e=Object(f.a)(["\n  border-bottom: 1px solid ",";\n  padding: 10px 20px;\n  font-weight: ",";\n  font-size: ",";\n  color: ",";\n"]);return mEe=function(){return e},e}var jEe=y.default.div(mEe(),_.gray2,lm.bold,sm.medium,_.blue6),vEe=y.default.div(fEe()),OEe=y.default.div(bEe()),gEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).isAllowAccess=function(e){return function(t){return e.some((function(e){return t(e)}))}},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Rm.status("Manage")}},{key:"componentWillUnmount",value:function(){Rm.reset()}},{key:"render",value:function(){var e=this.props.match.path,t=this.props.location.pathname.split("/")[2];return Object(a.jsxs)("div",{className:"h-100 d-flex flex-column",children:[Object(a.jsx)(jEe,{className:"print-hide",children:"Manage"}),Object(a.jsxs)("div",{className:"d-flex h-100",children:[Object(a.jsx)(Lwe,{activeSection:t}),Object(a.jsx)("div",{className:"flex-grow-1 position-relative",children:Object(a.jsx)(vEe,{className:"h-100 w-100",children:Object(a.jsx)(OEe,{className:"d-flex position-static",children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(xR,{exact:!0,path:"".concat(e,"/user"),permission:this.isAllowAccess([vx.USERS_VIEW]),component:JSe}),Object(a.jsx)(xR,{path:"".concat(e,"/user/:id"),permission:this.isAllowAccess(dx),component:Pke}),Object(a.jsx)(xR,{path:"".concat(e,"/addUser"),permission:this.isAllowAccess([vx.USERS_CREATE]),component:eCe}),Object(a.jsx)(xR,{path:"".concat(e,"/tag"),permission:this.isAllowAccess([vx.TAGS_CREATE]),component:jSe}),Object(a.jsx)(xR,{path:"".concat(e,"/location"),permission:this.isAllowAccess([vx.LOCATIONS_CREATE]),component:rEe}),Object(a.jsx)(xR,{path:"".concat(e,"/gscode"),permission:this.isAllowAccess([vx.GS_CODE_MANAGE]),component:dEe}),Object(a.jsx)(xR,{path:"".concat(e,"/contract"),permission:this.isAllowAccess([vx.MANAGEMENT_CONTRACTS]),component:rke}),Object(a.jsx)(xR,{path:"".concat(e,"/vehicle"),permission:this.isAllowAccess([vx.OPERATIONS_VEHICLES_MANAGE]),component:iCe}),Object(a.jsx)(xR,{path:"".concat(e,"/warehousing"),permission:this.isAllowAccess([vx.MANAGEMENT_SYSTEM_SETTINGS]),component:nNe}),Object(a.jsx)(xR,{path:"".concat(e,"/lme"),permission:this.isAllowAccess(mx),component:BNe}),Object(a.jsx)(O.a,{to:"".concat(e,"/user")})]})})})})]})]})}}]),n}(h.a.PureComponent),xEe=Object(O.g)(gEe),yEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={dateSelected:pm()(),locationSelected:null},e.onLocationChange=function(t){e.setState({locationSelected:t})},e.dateTriggerRender=function(){var t=e.state.dateSelected;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[t.format(iv),Object(a.jsx)(z7,{style:{marginLeft:"10px"},color:_.white,name:Xf.Calendar})]})},e.timePickerRender=function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Qy.a,{input:!1,timeFormat:!0,onChange:e.onDateChange})})},e.onDateChange=function(t){e.setState({dateSelected:t})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state,t={dateTo:e.dateSelected,location:e.locationSelected};this.props.onSubmit(t)}},{key:"locationNameRender",value:function(e){return e.name}},{key:"render",value:function(){var e=this,t=this.props.locations,n=t.find((function(e){return e.primary}));return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(AR,{children:Object(a.jsx)(nw,{trigger:function(){return e.dateTriggerRender()},renderInternal:this.timePickerRender})}),Object(a.jsx)(AR,{children:!t||t&&0===t.length?Object(a.jsx)("div",{children:"No Locations"}):Object(a.jsx)(Kne,{items:t,onChange:this.onLocationChange,placeHolder:"Select Location...",nameRender:this.locationNameRender,defaultValueById:n&&n.id})})]})}}]),n}(h.a.PureComponent),_Ee=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})))(yEe),wEe="Trial Balance",SEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsvData=function(){var t=e.props.trialBalance.data.data;if(!e.hasTrialBalances)return[];var n=[];return t.Revenue&&(n=n.concat(t.Revenue)),t.Assets&&(n=n.concat(t.Assets)),t.Liabilities&&(n=n.concat(t.Liabilities)),t.TOTAL&&(n=n.concat(t.TOTAL)),{reportName:wEe,data:n.map((function(e){return{group_name:e.group_name,gl_account_name:e.gl_account_name,debit_amount:e.debit_amount,credit_amount:e.credit_amount,debit_amount_ytd:e.debit_amount_ytd,credit_amount_ytd:e.credit_amount_ytd}}))}},e.getTrialBalance=function(t,n){var r=t.dateTo,a=t.location;if(a){var o=bv(r),i=a&&a.id;return e.getData(i,n,o)}},e.filterReport=Object(m.debounce)(e.getTrialBalance),e.columnsPaymentDef=[{id:"gl_account_name",header:"Account",type:Are.Text,cell:function(e){return Object(a.jsx)("span",{children:e.gl_account_name})}},{id:"debit_amount",header:"Debit",width:"15%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:km(e.debit_amount,Tre)})}},{id:"credit_amount",header:"Credit",width:"15%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:km(e.credit_amount,Tre)})}},{id:"debit_amount_ytd",header:"YTD Debit",width:"15%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:km(e.debit_amount_ytd,Tre)})}},{id:"credit_amount_ytd",header:"YTD Credit",width:"15%",type:Are.Numeric,cell:function(e){return Object(a.jsx)("span",{children:km(e.credit_amount_ytd,Tre)})}}],e}return Object(l.a)(n,[{key:"getData",value:function(e,t,n){var r;this.props.dispatch((r={date_to:n,location_id:e,page:t},Dk(J2,q2,z2,(function(){return V2.getITrialBalance(r)}))))}},{key:"renderReportRows",value:function(){var e=this.props.trialBalance.data.data;return e?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,style:{padding:"0"},children:this.renderTrialBalance(e.Revenue,"Revenue",!1)})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,style:{padding:"0"},children:this.renderTrialBalance(e.Assets,"Assets",!1)})}),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,style:{padding:"0"},children:this.renderTrialBalance(e.Liabilities,"Liabilities",!0,e.TOTAL)})})]}):null}},{key:"renderTrialBalance",value:function(e,t,n,r){return Object(a.jsxs)(Lre,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:Object(a.jsx)(k9,{colSpan:this.columnsPaymentDef.length,children:Object(a.jsx)(Fre,{children:t})})})}),Object(a.jsxs)("tbody",{children:[e&&e.length>0&&e[0].gl_account_name?this.renderBalances(e):this.renderNodata(),n&&r&&this.renderBalances(r,!0),Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:this.columnsPaymentDef.length,children:"\xa0"})})]})]})}},{key:"renderBalances",value:function(e,t){var n=this;return e?e.map((function(e){return Object(a.jsx)("tr",{children:n.columnsPaymentDef.map((function(n){return Object(a.jsx)(O9,{width:n.width,hidden:n.hidden,align:n.type,children:t?Object(a.jsx)(Fre,{children:n.cell(e)}):n.cell(e)},n.id)}))},e.gl_account_name)})):null}},{key:"renderNodata",value:function(){return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{className:"no-items",colSpan:this.columnsPaymentDef.length,children:"No items found"})})}},{key:"render",value:function(){var e=this.props.trialBalance.loading,t=this.hasTrialBalances;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(ire,{reportName:wEe,toCsvFn:this.getCsvData,children:Object(a.jsx)(_Ee,{onSubmit:this.filterReport})}),e?Object(a.jsx)(Nv,{size:40,color:_.white}):Object(a.jsx)(Nre,{children:Object(a.jsxs)(Ire,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsx)("tr",{children:this.columnsPaymentDef.map((function(e){return Object(a.jsx)(S9,{width:e.width,hidden:e.hidden,align:e.type,children:e.header},e.id)}))})}),Object(a.jsx)("tbody",{children:t?this.renderReportRows():this.renderNodata()})]})})]})}},{key:"hasTrialBalances",get:function(){var e=this.props.trialBalance,t=e.ready,n=e.data;return!!(t&&n&&n.data)}}]),n}(p.PureComponent),kEe=Object(sg.compose)(Object(b.b)((function(e){return{trialBalance:e.trialBalance}})))(SEe);function CEe(){var e=Object(f.a)(["\n  display: flex;\n  line-height: 50px;\n  width: 180px;\n  cursor: pointer;\n  color: ",";\n"]);return CEe=function(){return e},e}function NEe(){var e=Object(f.a)(["\n  width: 400px;\n  padding: 3px;\n  .dash {\n    padding: 0 10px;\n  }\n  label {\n    margin-bottom: 0;\n  }\n"]);return NEe=function(){return e},e}var EEe=y.default.div(NEe()),AEe=y.default.div(CEe(),_.white),IEe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).periods=e.props.defaultPeriods,e.onChangeDate=function(t,n,r){e.periods=Object(c.a)(Object(c.a)({},e.periods),{},Object(k.a)({},n,Object(c.a)(Object(c.a)({},e.periods[n]),{},Object(k.a)({},r,t)))),e.isPeriodValid(e.periods.current)&&e.isPeriodValid(e.periods.previous)&&e.props.onChange(e.periods)},e.startTriggerRender=function(){return Object(a.jsxs)(AEe,{children:[e.periods.current.start.format(iv)," - ",e.periods.current.end.format(iv)]})},e.renderControl=function(t){return Object(a.jsxs)(EEe,{children:[Object(a.jsxs)("div",{className:"d-flex align-items-baseline",children:[Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)("label",{children:"Current:"})}),Object(a.jsxs)("div",{className:"col-8 pl-0  d-flex align-items-baseline",children:[Object(a.jsx)(Qy.a,{input:!0,timeFormat:!1,dateFormat:iv,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"current","start")},initialValue:e.props.defaultPeriods.current.start}),Object(a.jsx)("span",{className:"dash",children:"\u2013"}),Object(a.jsx)(Qy.a,{input:!0,timeFormat:!1,dateFormat:iv,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"current","end")},initialValue:e.props.defaultPeriods.current.end})]})]}),Object(a.jsxs)("div",{className:"d-flex align-items-baseline pt-3",children:[Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)("label",{children:"Previous period:"})}),Object(a.jsxs)("div",{className:"col-8 pl-0 d-flex align-items-baseline",children:[Object(a.jsx)(Qy.a,{input:!0,timeFormat:!1,dateFormat:iv,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"previous","start")},initialValue:e.props.defaultPeriods.previous.start}),Object(a.jsx)("span",{className:"dash",children:"\u2013"}),Object(a.jsx)(Qy.a,{input:!0,timeFormat:!1,dateFormat:iv,closeOnSelect:!0,onChange:function(t){return e.onChangeDate(t,"previous","end")},initialValue:e.props.defaultPeriods.previous.end})]})]})]})},e}return Object(l.a)(n,[{key:"isPeriodValid",value:function(e){return pm()(e.end).diff(e.start,"d")>0}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)(nw,{renderInternal:this.renderControl,trigger:this.startTriggerRender,direction:"right"}),Object(a.jsx)(z7,{style:{marginTop:"13px",marginRight:"15px"},color:_.white,name:Xf.Calendar})]})})}}]),n}(p.PureComponent);function TEe(){var e=Object(f.a)(["\n  display: flex;\n  line-height: 50px;\n  width: 60px;\n  cursor: pointer;\n  color: ",";\n  border-right: 1px solid ",";\n  border-left: 1px solid ",";\n  margin: 0 10px;\n  svg {\n    margin: 15px 20px;\n  }\n"]);return TEe=function(){return e},e}function REe(){var e=Object(f.a)(["\n  width: 400px;\n  padding: 3px;\n  label.label__no-margin {\n    margin-bottom: 0;\n  }\n"]);return REe=function(){return e},e}var DEe=y.default.div(REe()),MEe=y.default.div(TEe(),_.white,_.white,_.white),LEe={multiValue:function(e,t){return Object(c.a)(Object(c.a)({},e),{},{backgroundColor:t.data&&t.data.color?_m(t.data.color):_.gray1,color:_.white,borderRadius:"4px"})},multiValueLabel:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:_.white})},multiValueRemove:function(e){return Object(c.a)(Object(c.a)({},e),{},{cursor:"pointer",":hover":{backgroundColor:"inherit",color:"inherit"}})}},PEe={selectedTags:[],selectedGlAccount:null},FEe=h.a.memo((function(e){var t=e.glAccounts,n=e.tags,r=e.onChange,o=Object(p.useState)(PEe),i=Object(w.a)(o,2),s=i[0],l=i[1];function u(e){return e.id.toString()}function d(e){return e.name.toString()}Object(p.useEffect)((function(){r(s)}),[s]);var h=function(e){l(Object(c.a)(Object(c.a)({},s),{},{selectedTags:e}))},b=function(e){l(Object(c.a)(Object(c.a)({},s),{},{selectedGlAccount:e}))};return Object(a.jsx)("div",{className:"d-flex",children:Object(a.jsx)(nw,{trigger:function(){var e=!Object(m.isEqual)(s,PEe);return Object(a.jsx)(MEe,{children:Object(a.jsx)(z7,{name:Xf.Filter,color:_.white,fill:e,"data-tip":"Filter"})})},renderInternal:function(e){var r=n?n.data:[];return Object(a.jsxs)(DEe,{children:[t&&Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)("label",{className:"label__no-margin",children:"Select Account:"})}),Object(a.jsx)("div",{className:"col-8 pl-0",children:Object(a.jsx)(n9,{options:t.sort((function(e,t){return e.name.localeCompare(t.name)})),getOptionLabel:k0.getGLAccountLabel,getOptionValue:u,onChange:b,isClearable:!0})})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center mt-2",children:[Object(a.jsx)("div",{className:"col-2",children:Object(a.jsx)("label",{children:"Tags:"})}),Object(a.jsx)("div",{className:"col-10",children:Object(a.jsx)(n9,{placeholder:"Select tags...",options:r,getOptionLabel:d,getOptionValue:u,onChange:h,additionalStyles:LEe,isMulti:!0})})]})]})}})})}));function UEe(){var e=Object(f.a)(["\n  border: 1px solid ","\n  padding: 0 30px;\n  \n  tr {\n    border: 1px solid ","\n  }\n  \n  thead th {\n    height: 35px;\n    font-weight: ","\n    color: ","\n  }\n  \n  tbody tr {\n    height: 45px;\n    text-align: left;\n  }\n  \n  td, th {\n    padding: 15px;\n  }\n  \n  td.fin-report__fixed-width {\n    text-overflow: ellipsis;\n    overflow: hidden;\n  }\n  \n  tbody {\n    ","\n    \n    tr td:not(:last-of-type) {\n      font-weight: ","\n    }\n  }\n"]);return UEe=function(){return e},e}function BEe(){var e=Object(f.a)(["\n  margin: 10px 0px;\n  padding: 10px 10px;\n"]);return BEe=function(){return e},e}function VEe(){var e=Object(f.a)(["\n  ","\n"]);return VEe=function(){return e},e}function JEe(){var e=Object(f.a)(["\n  ","\n  width: 8%;\n  white-space: nowrap;\n  max-width: 140px;\n  text-overflow: ellipsis;\n  overflow: hidden;\n"]);return JEe=function(){return e},e}function qEe(){var e=Object(f.a)(["\n  text-align: right;\n"]);return qEe=function(){return e},e}function zEe(){var e=Object(f.a)(["\n  padding: 5px 15px;\n"]);return zEe=function(){return e},e}function GEe(){var e=Object(f.a)(["\n  width: calc(100% - ","px);\n  @media print {\n    width: 100%;\n  }\n  @media screen and (max-width: 768px) {\n    width: 100%;\n  }\n"]);return GEe=function(){return e},e}function WEe(){var e=Object(f.a)(["\n  display: flex;\n  width: ","px;\n"]);return WEe=function(){return e},e}function HEe(){var e=Object(f.a)(["\n  height: calc(100% - 100px);\n"]);return HEe=function(){return e},e}function YEe(){var e=Object(f.a)(["\n  padding-top: 20px;\n  min-height: 470px;\n  position: relative;\n  display: flex;\n  width: auto;\n"]);return YEe=function(){return e},e}var QEe=Object(y.default)(Fte)(YEe()),KEe=Object(y.default)(UC)(HEe()),ZEe=h.a.memo((function(e){var t=e.colspan;return Object(a.jsx)("tr",{children:Object(a.jsx)("td",{colSpan:t,style:{textAlign:"center"},children:"No data"})})})),XEe=y.default.div(WEe(),440),$Ee=y.default.div(GEe(),480),eAe=y.default.div(zEe()),tAe=Object(y.css)(qEe()),nAe=y.default.td(JEe(),tAe),rAe=y.default.th(VEe(),tAe),aAe=y.default.div(BEe()),oAe=y.default.table(UEe(),_.gray2,_.gray2,lm.normal,_.gray3,(function(e){return e.noStripped?null:"tr: nth-of-type(2n-1) {\n        background: ".concat(_.gray0,"\n      }")}),lm.medium),iAe=n(601);function cAe(){var e=Object(f.a)(["\n  display: inline-block;\n  position: absolute;\n  margin-top: 20px;\n  color: ",";\n"]);return cAe=function(){return e},e}function sAe(){var e=Object(f.a)(["\n  height: 460px;\n  width: 100%;\n  margin: 12px 30px 0 5px;\n  padding: 0 30px 30px;\n  position: relative;\n  background: ",";\n  border: 1px solid ",";\n"]);return sAe=function(){return e},e}var lAe=_.black0,uAe=_.orange1,dAe=_.orange0,pAe=_.gray4,hAe=y.default.div(sAe(),_.white,_.gray4),bAe=y.default.div(cAe(),_.gray5),fAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getDataSet",value:function(e){return e.map((function(e){return e.value}))}},{key:"getLabels",value:function(e){return e.map((function(e){return pm()(e.date).format("MMM DD")}))}},{key:"getPlotLabel",value:function(e){if(!e.length)return"";var t=e[0].date,n=e[e.length-1].date;return"".concat(pm()(t).format(iv)," - ").concat(pm()(n).format(iv))}},{key:"composeDataset",value:function(e,t){return Object(c.a)(Object(c.a)({},t),{},{borderWidth:2,lineTension:0,pointRadius:0,data:this.getDataSet(e),label:this.getPlotLabel(e)})}},{key:"render",value:function(){return Object(a.jsxs)(hAe,{children:[Object(a.jsx)(bAe,{children:this.props.name}),Object(a.jsx)(iAe.Line,Object(c.a)(Object(c.a)({},n.chartProps),{},{data:{labels:this.getLabels(this.props.primaryChart),datasets:this.datasets}}))]})}},{key:"datasets",get:function(){var e=this.props,t=e.primaryChart,n=e.secondaryChart,r=[this.composeDataset(t,{fill:!0,borderColor:uAe,backgroundColor:dAe})];return n&&r.push(this.composeDataset(n,{fill:!1,borderColor:pAe})),r}}]),n}(p.PureComponent);fAe.chartOptions={maintainAspectRatio:!1,animation:null,hover:{animationDuration:1},responsiveAnimationDuration:0,scales:{xAxes:[{gridLines:{display:!1},ticks:{fontColor:lAe,maxTicksLimit:10,maxRotation:0,labelOffset:8}}],yAxes:[{gridLines:{drawTicks:!1},ticks:{fontColor:lAe,maxTicksLimit:8,padding:10,callback:function(e){return 0===+e?e:vm(e)}}}]}},fAe.chartLegendParams={position:"top",labels:{fontColor:lAe,boxWidth:8,fontSize:12,padding:45,usePointStyle:!0}},fAe.adjustLegendPositionPlugin={beforeInit:function(e,t){e.legend.afterFit=function(){this.height=this.height+30}}},fAe.chartProps={options:fAe.chartOptions,legend:fAe.chartLegendParams,plugins:[fAe.adjustLegendPositionPlugin]};var mAe,jAe=fAe,vAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).finTables=void 0,e.bindEvents=function(){e.props.receiveCsvData(e.getCsv)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.bindEvents(),this.getData()}},{key:"componentDidUpdate",value:function(e){Object(m.isEqual)(e.currentFilterParams,this.props.currentFilterParams)||this.getData()}},{key:"getData",value:function(e){this.allowRequest&&this.request(e)}},{key:"createStatColumn",value:function(e,t){return Object(a.jsx)("div",{className:"d-flex",children:e.map((function(e,t){var n=e.delta,r=e.hasDelimiter,o=e.label,i=e.toolTip,c=e.value;return Object(a.jsx)(ene,{delta:n,hasDelimiter:r,label:o,reactTipProps:{"data-tip":i},value:c},"".concat(o," - ").concat(t))}))},t)}},{key:"renderStatistics",value:function(){var e=this,t=this.statConfig,n=t&&t.data;if(!n||!n.length)return null;var r=t,a=r.perCol,o=r.perRow;return Array(a).fill(0).map((function(t,r){return e.createStatColumn(n.slice(o*r,o*(r+1)),r)}))}},{key:"renderTables",value:function(){var e=this.finTables;return e&&e.length?1===e.length?Object(a.jsx)(aAe,{className:"w-100",children:e[0]()}):e.map((function(e,t){return Object(a.jsx)(aAe,{className:"col-md-6",children:e()},t)})):null}},{key:"renderChart",value:function(){var e=this.chartData;if(!e)return null;var t=e,n=t.name,r=t.primaryChart,o=t.secondaryChart;return Object(a.jsx)(jAe,{name:n,primaryChart:r,secondaryChart:o})}},{key:"render",value:function(){var e=this.data;return Object(a.jsxs)(h.a.Fragment,{children:[this.isLoading&&Object(a.jsx)(Nv,{size:40,color:_.white}),e&&Object(a.jsxs)(h.a.Fragment,{children:[Object(a.jsxs)(QEe,{className:"d-flex flex-wrap",children:[Object(a.jsx)(XEe,{className:"d-flex flex-column",children:this.renderStatistics()}),Object(a.jsx)($Ee,{className:"temp",children:this.renderChart()})]}),Object(a.jsx)(eAe,{className:"d-flex flex-wrap",children:this.renderTables()})]})]})}},{key:"allowRequest",get:function(){var e=this;return!["current_date_from","current_date_to","previous_date_from","previous_date_to","location_id"].find((function(t){return!e.props.currentFilterParams[t]}))}}]),n}(h.a.PureComponent);function OAe(e,t){var n=Math.max(e.length,t.length);return Array(n).fill(0).map((function(n,r){var a=t[r]||{},o=e[r]||{};return Object(c.a)(Object(c.a)({},a),o)}))}!function(e){e.TotalRevenue="Total Revenue",e.Invoices="Invoices",e.CreditNotes="Credit Notes",e.AccountsReceivable="Accounts Receivable",e.FromJobs="From Jobs",e.PurchaseOrders="Purchase Orders",e.TotalGrossProfit="Total Gross Profit"}(mAe||(mAe={}));var gAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).finTables=[],e.getCsv=function(){var t=e.props.financialVolume.data;if(!t)return null;var n=[e.chartCsv];return(t.chart&&t.chart.length||t.previous_interval_chart&&t.previous_interval_chart.length)&&n.push(e.statCsv),n},e}return Object(l.a)(n,[{key:"request",value:function(e){var t,n=this.props,r=n.dispatch,a=n.currentFilterParams;r((t=a,Dk(O2[h1.load],O2[h1.loadComplete],O2[h1.error],(function(){return b2.getVolume(t)})))).then(e)}},{key:"data",get:function(){return this.props.financialVolume.data}},{key:"chartCsv",get:function(){var e=this.props.financialVolume.data;return{reportName:"Report volume",data:OAe(e.chart&&e.chart.map((function(e,t){return{current_period_date:e.date,current_period_value:e.value}})),e.previous_interval_chart&&e.previous_interval_chart.map((function(e){return{previous_period_date:e.date,previous_period_value:e.value}})))}}},{key:"statCsv",get:function(){var e=this.props.financialVolume.data;return{columns:["statistic_element","value","delta"],reportName:"Volume statistic",data:[{statistic_element:mAe.TotalRevenue,value:e.total_revenue,delta:e.total_revenue_change},{statistic_element:mAe.FromJobs,value:e.from_jobs,delta:e.from_jobs_change},{statistic_element:mAe.Invoices,value:e.invoices,delta:e.invoices_change},{statistic_element:mAe.PurchaseOrders,value:e.purchase_orders,delta:e.purchase_orders_change},{statistic_element:mAe.CreditNotes,value:e.credit_notes,delta:e.credit_notes_change},{statistic_element:mAe.TotalGrossProfit,value:e.total_gross_profit,delta:e.total_gross_profit_change},{statistic_element:mAe.AccountsReceivable,value:e.accounts_receivable,delta:e.accounts_receivable_change}]}}},{key:"isLoading",get:function(){return this.props.financialVolume.loading}},{key:"statConfig",get:function(){var e=this.props.financialVolume.data;return e?{data:[{label:mAe.TotalRevenue,value:vm(e.total_revenue),delta:e.total_revenue_change,hasDelimiter:!0,toolTip:"Total revenue for the current period."},{label:mAe.FromJobs,value:e.from_jobs,delta:e.from_jobs_change,hasDelimiter:!0,toolTip:"The total count of jobs<br />within the current period."},{label:mAe.Invoices,value:e.invoices,delta:e.invoices_change,hasDelimiter:!0,toolTip:"Total number of invoices<br />written in the current period."},{label:mAe.PurchaseOrders,value:e.purchase_orders,delta:e.purchase_orders_change,hasDelimiter:!0,toolTip:"Total number of purchase orders<br />written in the current period."},{label:mAe.CreditNotes,value:e.credit_notes,delta:e.credit_notes_change,hasDelimiter:!0,toolTip:"Total number of credit notes<br />written in the current period."},{label:mAe.TotalGrossProfit,value:"".concat(e.total_gross_profit.toFixed(2),"%"),delta:e.from_jobs_change,hasDelimiter:!0,toolTip:"Total gross profit<br />for the current period."},{label:mAe.AccountsReceivable,value:vm(e.accounts_receivable),delta:e.invoices_change,toolTip:"Accounts receivable in the current period."}],perCol:4,perRow:2}:null}},{key:"chartData",get:function(){var e=this.props.financialVolume.data;if(!e)return null;var t=e;return{name:"Volume",primaryChart:t.chart,secondaryChart:t.previous_interval_chart}}}]),n}(vAe);var xAe,yAe,_Ae,wAe=Object(b.b)((function(e){return{financialVolume:S2(e)}}))(gAe);!function(e){e.InvoicesPaid="Invoices Paid",e.AverageJobCost="Average Job Cost",e.CreditNotes="Credit Notes",e.InvoicesWritten="Invoices Written",e.AvgJobCost="Avg. Over Job Cost",e.TotalGrossProfit="Total Gross Profit"}(xAe||(xAe={})),function(e){e.TaggedInvoices="Tagged Invoices",e.Number="No.",e.Diff="Diff.",e.Percent="%"}(yAe||(yAe={})),function(e){e.RevenueAccount="Revenue Account",e.Amount="Amount"}(_Ae||(_Ae={}));var SAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsv=function(){var t=e.props.financialRevenue.data;if(!t)return null;var n=[e.statCsv];t.tagged_invoices&&t.tagged_invoices.length&&n.push(e.taggedInvoiceCsv),t.revenue_accounts&&t.revenue_accounts.length&&n.push(e.revenueAccountCsv);var r=e.chartCsv;return r&&n.push(r),n},e.request=function(t){var n=e.props,r=n.dispatch,a=n.currentFilterParams;r(x2(a)).then(t)},e.getDiffColor=function(e){return 0>e?_.red1:e>0?_.green2:"inherit"},e.renderRevenueAccountTable=function(){var t=e.props.financialRevenue.data,n=t&&t.revenue_accounts,r=Object(a.jsx)(ZEe,{colspan:2});return n&&n.length&&(r=Object(a.jsx)(p.Fragment,{children:n.map((function(t,n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.getRevenueAccountName(t)}),Object(a.jsx)(nAe,{children:"$ ".concat(t.amount)})]},n)}))})),Object(a.jsxs)(oAe,{className:"w-100",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:_Ae.RevenueAccount}),Object(a.jsx)(rAe,{children:_Ae.Amount})]})}),Object(a.jsx)("tbody",{children:r})]})},e.renderRevenueTaggedInvTable=function(){var t=e.props.financialRevenue.data,n=t&&t.tagged_invoices,r=Object(a.jsx)(ZEe,{colspan:4});return n&&n.length&&(r=Object(a.jsx)(p.Fragment,{children:n.map((function(t,n){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:t.name}),Object(a.jsx)(nAe,{children:t.count}),Object(a.jsx)(nAe,{children:"".concat(t.percent,"%")}),Object(a.jsx)(nAe,{style:{color:e.getDiffColor(t.change)},children:"".concat(t.change,"%")})]},n)}))})),Object(a.jsxs)(oAe,{className:"w-100",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:"Tagged Invoices"}),Object(a.jsx)(rAe,{children:"No."}),Object(a.jsx)(rAe,{children:"%"}),Object(a.jsx)(rAe,{children:"Diff."})]})}),Object(a.jsx)("tbody",{children:r})]})},e.finTables=[e.renderRevenueTaggedInvTable,e.renderRevenueAccountTable],e}return Object(l.a)(n,[{key:"getRevenueAccountName",value:function(e){return"".concat(e.name,": ").concat(e.code)}},{key:"isLoading",get:function(){return this.props.financialRevenue.loading}},{key:"statCsv",get:function(){var e=this.props.financialRevenue.data;return{columns:["statistic_element","value","delta"],reportName:"Revenue Statistics",data:[{statistic_element:xAe.InvoicesPaid,value:e.invoices_paid,delta:e.invoices_paid_change},{statistic_element:xAe.InvoicesWritten,value:e.invoices_written,delta:e.invoices_written_change},{statistic_element:xAe.AverageJobCost,value:e.avg_job_cost,delta:e.avg_job_cost_change},{statistic_element:xAe.AvgJobCost,value:e.avg_over_job_cost,delta:e.avg_over_job_cost_change},{statistic_element:xAe.CreditNotes,value:e.credit_notes,delta:e.credit_notes_change},{statistic_element:xAe.TotalGrossProfit,value:e.total_gross_profit,delta:e.total_gross_profit_change}]}}},{key:"revenueAccountCsv",get:function(){var e=this;return{reportName:"Revenue Accounts",data:this.props.financialRevenue.data.revenue_accounts.map((function(t){var n;return n={},Object(k.a)(n,_Ae.RevenueAccount,e.getRevenueAccountName(t)),Object(k.a)(n,_Ae.Amount,t.amount),n}))}}},{key:"chartCsv",get:function(){var e=this.props.financialRevenue.data,t=e.chart,n=e.previous_interval_chart;return{reportName:"Revenue report",data:OAe(t&&t.map((function(e,t){return{current_period_date:e.date,current_period_value:e.value}})),n&&n.map((function(e){return{previous_period_date:e.date,previous_period_value:e.value}})))}}},{key:"taggedInvoiceCsv",get:function(){return{data:this.props.financialRevenue.data.tagged_invoices.map((function(e){var t;return t={},Object(k.a)(t,yAe.TaggedInvoices,e.name),Object(k.a)(t,yAe.Number,e.count),Object(k.a)(t,yAe.Percent,e.percent),Object(k.a)(t,yAe.Diff,e.change),t})),reportName:"Tagged Invoices"}}},{key:"data",get:function(){return this.props.financialRevenue.data}},{key:"chartData",get:function(){var e=this.props.financialRevenue.data;return{name:"Revenue",primaryChart:e.chart,secondaryChart:e.previous_interval_chart}}},{key:"statConfig",get:function(){var e=this.props.financialRevenue.data;return e?{data:[{label:xAe.InvoicesPaid,value:vm(e.invoices_paid),delta:e.invoices_paid_change,hasDelimiter:!0,toolTip:xAe.InvoicesPaid},{label:xAe.InvoicesWritten,value:vm(e.invoices_written),delta:e.invoices_written_change,hasDelimiter:!0,toolTip:xAe.InvoicesWritten},{label:xAe.AverageJobCost,value:vm(e.avg_job_cost),delta:e.avg_job_cost_change,hasDelimiter:!0,toolTip:xAe.AverageJobCost},{label:xAe.AvgJobCost,value:vm(e.avg_over_job_cost),delta:e.avg_over_job_cost_change,hasDelimiter:!0,toolTip:xAe.AvgJobCost},{label:xAe.CreditNotes,value:vm(e.credit_notes),delta:e.credit_notes_change,toolTip:xAe.CreditNotes},{label:xAe.TotalGrossProfit,value:"".concat(e.total_gross_profit.toFixed(2),"%"),delta:e.total_gross_profit_change,toolTip:xAe.TotalGrossProfit}],perRow:2,perCol:3}:null}}]),n}(vAe);var kAe,CAe,NAe=Object(b.b)((function(e){return{financialRevenue:k2(e)}}))(SAe);!function(e){e.TotalReceivables="Total Receivables",e.Current="Current",e.Month="30 days",e.TwoMonths="60 days",e.ThreeMonths="90+ days"}(kAe||(kAe={})),function(e){e.Contact="Contact",e.Current="Current",e.Month="30 days",e.TwoMonths="60 days",e.ThreeMonths="90+ days",e.Total="Total"}(CAe||(CAe={}));var EAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCsv=function(){if(!e.props.financialAccReceivable.data)return null;var t=[e.statCsv],n=e.chartCsv;return n&&t.push(n),t},e.request=function(){var t=e.props,n=t.dispatch,r=t.currentFilterParams;n(_2(r))},e.renderContactTable=function(){var t=e.props.financialAccReceivable.data,n=t&&t.contacts,r=Object(a.jsx)(ZEe,{colspan:6});return n&&n.length&&(r=Object(a.jsx)(p.Fragment,{children:n.map((function(e,t){return Object(a.jsxs)("tr",{children:[Object(a.jsx)("td",{children:e.name}),Object(a.jsx)(nAe,{children:e.current}),Object(a.jsx)(nAe,{children:e.more_30_days}),Object(a.jsx)(nAe,{children:e.more_60_days}),Object(a.jsx)(nAe,{children:e.more_90_days}),Object(a.jsx)(nAe,{children:e.total})]},t)}))})),Object(a.jsxs)(oAe,{className:"w-100",noStripped:!0,children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)("th",{children:CAe.Contact}),Object(a.jsx)(rAe,{children:CAe.Current}),Object(a.jsx)(rAe,{children:CAe.Month}),Object(a.jsx)(rAe,{children:CAe.TwoMonths}),Object(a.jsx)(rAe,{children:CAe.ThreeMonths}),Object(a.jsx)(rAe,{children:CAe.Total})]})}),Object(a.jsx)("tbody",{children:r})]})},e.finTables=[e.renderContactTable],e}return Object(l.a)(n,[{key:"isLoading",get:function(){return this.props.financialAccReceivable.loading}},{key:"statCsv",get:function(){var e=this.props.financialAccReceivable.data;return{columns:["statistic_element","value","delta"],reportName:"Accounts receivables statistics",data:[{statistic_element:kAe.TotalReceivables,value:e.total,delta:e.total_change},{statistic_element:kAe.Current,value:e.current,delta:e.current_change},{statistic_element:kAe.Month,value:e.more_30_days,delta:e.more_30_days_change},{statistic_element:kAe.TwoMonths,value:e.more_60_days,delta:e.more_60_days_change},{statistic_element:kAe.ThreeMonths,value:e.more_90_days,delta:e.more_90_days_change}]}}},{key:"chartCsv",get:function(){var e=this.props.financialAccReceivable.data.chart;return{reportName:"Accounts Receivables",data:e&&e.map((function(e,t){return{current_period_date:e.date,current_period_value:e.value}}))}}},{key:"data",get:function(){return this.props.financialAccReceivable.data}},{key:"chartData",get:function(){var e=this.props.financialAccReceivable.data;return{name:"Accounts Receivables",primaryChart:e.chart,secondaryChart:e.previous_interval_chart}}},{key:"statConfig",get:function(){var e=this.props.financialAccReceivable.data;return e?{data:[{label:kAe.TotalReceivables,value:vm(e.total),delta:e.total_change,hasDelimiter:!0,toolTip:kAe.TotalReceivables},{label:kAe.Current,value:vm(e.current),delta:e.current_change,hasDelimiter:!0,toolTip:kAe.Current},{label:kAe.Month,value:vm(e.more_30_days),delta:e.more_30_days_change,hasDelimiter:!0,toolTip:kAe.Month},{label:kAe.TwoMonths,value:vm(e.more_60_days),delta:e.more_60_days_change,hasDelimiter:!0,toolTip:kAe.TwoMonths},{label:kAe.ThreeMonths,value:vm(e.more_90_days),delta:e.more_90_days_change,toolTip:kAe.ThreeMonths}],perRow:2,perCol:3}:null}}]),n}(vAe);var AAe=Object(b.b)((function(e){return{financialAccReceivable:C2(e)}}))(EAe),IAe=[{name:"Volume",id:"volume"},{name:"Revenue",id:"revenue"},{name:"Accounts Receivables",id:"acc-receivables-report"}],TAe=pm()().startOf("month"),RAe=pm()().endOf("month"),DAe=pm()(RAe).diff(TAe,"d"),MAe=pm()(TAe).subtract(1,"d"),LAe={current_date_from:TAe,current_date_to:RAe,previous_date_from:pm()(MAe).subtract(DAe,"d"),previous_date_to:MAe,location_id:void 0,gl_account_id:void 0,interval:1,tag_ids:[]},PAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={filter:LAe,buildCsv:function(){return null}},e.onChangeLocation=function(t){var n=t.id;e.setState({filter:Object(c.a)(Object(c.a)({},e.state.filter),{},{location_id:n})}),e.debounceGetGl(n)},e.debounceGetGl=Object(m.debounce)(e.getGlAccountByLocation,700),e.onChangePeriods=function(t){e.setState({filter:Object(c.a)(Object(c.a)({},e.state.filter),{},{current_date_from:t.current.start,current_date_to:t.current.end,previous_date_from:t.previous.start,previous_date_to:t.previous.end})})},e.chainCsvReceiveFunc=function(t){e.setState({buildCsv:t})},e.handleChangeFilter=function(t){var n=t.selectedGlAccount,r=t.selectedTags;e.setState({filter:Object(c.a)(Object(c.a)({},e.state.filter),{},{gl_account_id:n&&n.id||void 0,tag_ids:r.map((function(e){return e.id}))})})},e.renderContent=function(){var t,n={primaryLocation:e.props.primary_location,receiveCsvData:e.chainCsvReceiveFunc,currentFilterParams:Object(c.a)(Object(c.a)({},e.state.filter),{},{location_id:e.selectedLocation})};switch(e.activeTabs){case"volume":t=wAe;break;case"revenue":t=NAe;break;case"acc-receivables-report":t=AAe;break;default:return null}return Object(a.jsx)(t,Object(c.a)({},n))},e.locationToValue=function(e){return e.id.toString()},e.locationToLabel=function(e){return e.name},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getGlAccountByLocation(),this.getTags()}},{key:"componentDidUpdate",value:function(e){um.a.rebuild()}},{key:"getTags",value:function(){this.props.dispatch(t5())}},{key:"getGlAccountByLocation",value:function(e){var t=e||this.props.primary_location.id;this.props.dispatch(L0([t]))}},{key:"render",value:function(){var e=this.props,t=e.locations,n=e.glAccounts,r=e.jobTags.data,o=this.state,i=o.filter,c=i.previous_date_from,s=i.previous_date_to,l=i.current_date_from,u=i.current_date_to,d=o.buildCsv;return Object(a.jsxs)("div",{className:"h-100",children:[Object(a.jsx)(gne,{children:Object(a.jsxs)(Ute,{children:[Object(a.jsx)(Vte,{children:Object(a.jsx)(wne,{transformToTable:d})}),Object(a.jsx)(mne,{options:t,value:this.selectedLocation,getOptionValue:this.locationToValue,getOptionLabel:this.locationToLabel,onChange:this.onChangeLocation,placeholder:"Select location...",transformValueById:!0,withBorder:!0}),Object(a.jsx)(IEe,{onChange:this.onChangePeriods,defaultPeriods:{current:{start:l,end:u},previous:{start:c,end:s}}}),Object(a.jsx)(FEe,{glAccounts:n,tags:r,onChange:this.handleChangeFilter}),Object(a.jsx)(Bte,{children:"Financial Report"})]})}),Object(a.jsx)(Pte,{children:Object(a.jsx)(iz,{items:this.getTabsConfig,selectedTabId:this.activeTabs})}),Object(a.jsx)(KEe,{className:"w-100",children:this.renderContent()})]})}},{key:"getTabsConfig",get:function(){var e=this;return IAe.map((function(t){return Object(c.a)(Object(c.a)({},t),{},{onClick:function(){e.props.history.push("/reports/financial-report/".concat(t.id))}})}))}},{key:"activeTabs",get:function(){return this.props.match.params.type}},{key:"selectedLocation",get:function(){return this.state.filter.location_id||this.props.primary_location.id}}]),n}(p.PureComponent);var FAe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{jobTags:e.jobTags,locations:xP(e),primary_location:gP(e),glAccounts:P0(e)}})))(PAe);function UAe(){var e=Object(f.a)(["\n  label {\n    margin-top: 5px;\n  }\n"]);return UAe=function(){return e},e}function BAe(){var e=Object(f.a)(["\n  label {\n    margin-top: 5px;\n  }\n"]);return BAe=function(){return e},e}function VAe(){var e=Object(f.a)(["\n  div {\n    color: ",";\n    font-weight: ",";\n  }\n"]);return VAe=function(){return e},e}function JAe(){var e=Object(f.a)(["\n  th {\n    font-weight: ",";\n  }\n"]);return JAe=function(){return e},e}function qAe(){var e=Object(f.a)(["\n  margin-top: 40px;\n"]);return qAe=function(){return e},e}function zAe(){var e=Object(f.a)(["\n  table:not(:first-child) {\n    margin-top: 40px;\n  }\n"]);return zAe=function(){return e},e}var GAe=y.default.div(zAe()),WAe=y.default.div(qAe()),HAe=Object(y.default)(tU)(JAe(),lm.medium),YAe=Object(y.default)(k9)(VAe(),_.black0,lm.bold),QAe=(Object(y.default)(k9)(BAe()),Object(y.default)(g9)(UAe()),"WH_PLACEMENT_CHARGES"),KAe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,i=e.props.update,s=Object(c.a)(Object(c.a)({},n),{},{charging_interval:(null===(r=n.charging_interval)||void 0===r?void 0:r.value)||n.charging_interval||null}),!i){t.next=10;break}return t.next=6,eQ.updateChargingIntervalToPlacement(n.inventory_item_placement_id,n.inventory_storage_space_type_charging_interval_id,s);case 6:l=t.sent,Gy.emit(Ix.WarehousingChargingIntervalUpdated,l),t.next=14;break;case 10:return t.next=12,eQ.assignChargingIntervalToPlacement(s);case 12:l=t.sent,Gy.emit(Ix.WarehousingChargingIntervalAdded,l);case 14:return null===(a=(o=e.props).afterSubmit)||void 0===a||a.call(o,l),t.abrupt("return",l);case 18:return t.prev=18,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 21:case"end":return t.stop()}}),t,null,[[0,18]])})));return function(e){return t.apply(this,arguments)}}(),e.onIntervalChange=function(t){var n=e.props.change;(null===t||void 0===t?void 0:t.id)&&(n("charging_interval",t.charging_interval),n("cost_per_interval",t.cost_per_interval),n("charging_rate_per_interval",t.charging_rate_per_interval),n("max_count_to_the_next_interval",t.max_count_to_the_next_interval))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.submitting,n=e.onSubmit,r=e.handleSubmit,o=e.chargingIntervals;return Object(a.jsxs)("form",{id:QAe,onSubmit:r(n||this.onSubmit),children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:(null===o||void 0===o?void 0:o.length)?Object(a.jsx)(Hv.a,{name:"inventory_storage_space_type_charging_interval",label:"Charging Interval",component:xO,options:o||[],getOptionLabel:function(e){return e.charging_interval},getOptionValue:function(e){return e.id},validate:Dv,onChange:this.onIntervalChange}):Object(a.jsx)(Hv.a,{name:"charging_interval",label:"Charging Interval",component:xO,options:Object.keys(A9).map((function(e){return{value:e,label:e}})),getOptionValue:function(e){return(null===e||void 0===e?void 0:e.value)||e},validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"cost_per_interval",label:"Unit Cost To Me",component:yg,type:"number",currency:!0,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"charging_rate_per_interval",label:"Rate Per Interval",component:yg,type:"number",currency:!0,validate:Dv})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"max_count_to_the_next_interval",label:"Max Count to Next Interval",component:yg,type:"number",validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"up_to_amount",label:"Up To Amount",component:yg,type:"number",currency:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"up_to_interval_count",label:"Up To Interval Count",component:yg,type:"number"})})]})]})}}]),n}(p.PureComponent),ZAe=Object(sg.compose)(oj({jobs:{fetch:zy.getAllJobs},spaces:{fetch:u3.getStorageSpaces},containers:{fetch:u3.getStorageContainers},standardItems:{fetch:u3.getStandardItems}}),Object(jv.a)({form:QAe}))(KAe),XAe="WH_STORAGE_ITEMS_FILTERS",$Ae=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=(a=e.props).onSubmit)||void 0===r?void 0:r.call(a,Object(c.a)(Object(c.a)({},n),{},{from_date:fv(null===(o=n.from_date)||void 0===o?void 0:o.startOf("day"),!0),to_date:fv(null===(i=n.to_date)||void 0===i?void 0:i.endOf("day"),!0)})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.reset=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.reset();case 2:e.props.handleSubmit(e.onSubmit)();case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.handleSubmit;return Object(a.jsx)("form",{id:XAe,onSubmit:e(this.onSubmit),children:Object(a.jsxs)("div",{className:"row m-0 align-items-center",children:[Object(a.jsx)("div",{className:"mr-3",style:{width:"150px"},children:Object(a.jsx)(Hv.a,{name:"from_date",label:"From Date",component:s_})}),Object(a.jsx)("div",{className:"mr-3",style:{width:"150px"},children:Object(a.jsx)(Hv.a,{name:"to_date",label:"To Date",component:s_})}),Object(a.jsx)("div",{className:"mr-3 flex-grow-1",children:Object(a.jsx)(Hv.a,{name:"term",label:"Term",placeholder:"Search by job id, inventory id, customer name, and address",component:yg})}),Object(a.jsx)("div",{className:"mr-3",children:Object(a.jsx)(Hv.a,{name:"show_all",label:"Show All",component:rI,size:25})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Apply"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",onClick:this.reset,children:"Reset"})]})})]})})}}]),n}(p.PureComponent),eIe=Object(sg.compose)(Object(jv.a)({form:XAe}))($Ae),tIe="WH_INVENTORY_ITEM",nIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).componentDidMount=function(){var t,n=e.props,r=n.jobs,a=n.spaces,o=n.containers,i=(n.standardItems,n.initialValues),c=n.change;r.fetch(),a.fetch(),o.fetch(),c("standard_type_group",null===i||void 0===i||null===(t=i.standard_type)||void 0===t?void 0:t.group)},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p,h;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(t.prev=0,o=e.props.initialValues||{},i=o.id,c=o.space,s=o.container,!i){t.next=19;break}return t.next=5,eQ.updateInventoryItem(i,n);case 5:if(l=t.sent,!(n.space&&n.space.id!==(null===c||void 0===c?void 0:c.id)||n.container&&n.container.id!==(null===s||void 0===s?void 0:s.id))){t.next=16;break}return t.prev=7,t.next=10,eQ.stopPlacement(l.id);case 10:return t.next=12,eQ.startPlacement({inventory_item_id:l.id,inventory_storage_container_id:(null===(u=n.container)||void 0===u?void 0:u.id)||null,inventory_storage_space_id:(null===(d=n.space)||void 0===d?void 0:d.id)||null,is_used_on_ar:!0});case 12:t.next=16;break;case 14:t.prev=14,t.t0=t.catch(7);case 16:Gy.emit(Ix.WarehousingInventoryItemUpdated,l),t.next=31;break;case 19:return t.next=21,eQ.createInventoryItem(n);case 21:if(l=t.sent,!n.space&&!n.container){t.next=30;break}return t.prev=23,t.next=26,eQ.startPlacement({inventory_item_id:l.id,inventory_storage_container_id:(null===(p=n.container)||void 0===p?void 0:p.id)||null,inventory_storage_space_id:(null===(h=n.space)||void 0===h?void 0:h.id)||null,is_used_on_ar:!0});case 26:t.next=30;break;case 28:t.prev=28,t.t1=t.catch(23);case 30:Gy.emit(Ix.WarehousingInventoryItemAdded,l);case 31:return null===(r=(a=e.props).afterSubmit)||void 0===r||r.call(a,l),t.abrupt("return",l);case 35:return t.prev=35,t.t2=t.catch(0),t.t2.status_code===ox&&j.a.forEach({inventory_item_standard_type_id:"standard_type"},(function(e,n){t.t2.fields[e]=t.t2.fields[n]})),t.abrupt("return",ix(t.t2));case 39:case"end":return t.stop()}}),t,null,[[0,35],[7,14],[23,28]])})));return function(e){return t.apply(this,arguments)}}(),e.loadStandardItems=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.formData,o=null===a||void 0===a||null===(r=a.standard_type_group)||void 0===r?void 0:r.id,t.next=4,e.props.standardItems.fetch({term:n,inventory_standard_item_group_id:o});case 4:return t.abrupt("return",t.sent.data);case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedLoadStandardItems=Qv()(e.loadStandardItems,500),e.loadGroups=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,u3.searchStandardItemGroups({term:t});case 2:return e.abrupt("return",e.sent.data);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.debouncedLoadGroups=Qv()(e.loadGroups,500),e.onChangeStandardTypeGroup=function(t){var n=e.props.change;n("standard_type",null),n("inventory_item_standard_type_id",null),n("assessment_fee",null),n("estimated_replacement_cost",null),n("restoration_hours",null),n("restoration_cost",null)},e.onChangeStandardType=function(t){var n=e.props.change;(null===t||void 0===t?void 0:t.id)&&(n("assessment_fee",t.assessment_fee),n("estimated_replacement_cost",t.estimated_replacement_cost),n("restoration_hours",t.restoration_hours+""),n("restoration_cost",t.restoration_cost))},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r=this.props,o=r.formData,i=r.submitting,c=r.handleSubmit,s=r.jobs,l=r.spaces,u=r.containers,d=(r.standardItems,s.loading||l.loading||u.loading);return Object(a.jsxs)("form",{id:tIe,onSubmit:c(this.onSubmit),children:[(i||d)&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"name",label:"Description",component:yg,validate:Dv,itemProp:{autoFocus:!0}})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"quantity",label:"Quantity",component:yg,type:"number",min:1,step:1,validate:Dv})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"serial_number",label:"Serial No.",component:yg})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"model",label:"Model",component:yg})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"current_status",label:"Status",component:xO,getOptionLabel:function(e){return e.status},getOptionValue:function(e){return e.id},options:Object.keys(wY).map((function(e){return{id:wY[e],status:wY[e]}}))})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"condition",label:"Condition",component:xO,getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},options:Object.keys(SY).map((function(e){return{value:SY[e],label:SY[e]}})),validate:Dv})})]}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(Hv.a,{name:"pre_existing_damage",label:"Pre existing damage?",component:rI,direction:FA.horizontal})})}),(null===o||void 0===o?void 0:o.pre_existing_damage)&&Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"pre_existing_damage_comment",component:gq,placeholder:"List pre-existing damages, any accessories, sentimental value, etc.",validate:Dv})})}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"customer_location",label:"Customer Location",component:yg,disabled:!0})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"job",label:"Job Number",component:xO,options:(null===(e=s.data)||void 0===e?void 0:e.data)||[],getOptionLabel:function(e){return zy.getJobName(e)},getOptionValue:function(e){return e.id},disabled:!0})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"space",label:"Storage Location",component:xO,options:(null===(t=l.data)||void 0===t?void 0:t.data)||[],getOptionLabel:function(e){return e.name+" ("+e.location.code+")"},getOptionValue:function(e){return e.id}})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"container",label:"Box/Pallet",component:xO,options:(null===(n=u.data)||void 0===n?void 0:n.data)||[],getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.id}})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"item_location",label:"Item Location On Site",component:yg})}),Object(a.jsx)("div",{className:"col"})]}),Object(a.jsx)("hr",{}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"standard_type_group",label:"Standard Item Group",component:NO,loadOptions:this.debouncedLoadGroups,onChange:this.onChangeStandardTypeGroup,isClearable:!0})})}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"standard_type",label:"Standard Item",component:NO,loadOptions:this.debouncedLoadStandardItems,getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},onChange:this.onChangeStandardType})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"restoration_hours",label:"Restoration Hour",component:yg})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"restoration_cost",label:"Restoration Cost",currency:!0,component:yg,type:"number",min:1,step:"any"})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"assessment_fee",label:"Assessment Fee",currency:!0,component:yg,type:"number",min:1,step:"any"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"estimated_replacement_cost",label:"Estimated Replacement Cost",currency:!0,component:yg,type:"number",min:1,step:"any"})})]})]})}}]),n}(p.PureComponent),rIe=Object(sg.compose)(Object(b.b)((function(e){return{formData:Object(GM.a)(tIe)(e)}})),oj({jobs:{fetch:zy.getAllJobs},spaces:{fetch:u3.getStorageSpaces},containers:{fetch:u3.getStorageContainers},standardItems:{fetch:u3.getStandardItems}}),Object(jv.a)({form:tIe,initialValues:{current_status:{value:wY.NEW,label:wY.NEW}}}))(nIe),aIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobId:null,status:"",showFilter:!1,filters:{show_all:!1}},e.eventListeners=[Gy.listen(Ix.WarehousingChargingIntervalUpdated,(function(){e.getStorageItems()})),Gy.listen(Ix.WarehousingChargingIntervalDeleted,(function(){e.getStorageItems()})),Gy.listen(Ix.WarehousingInventoryItemUpdated,(function(){e.getStorageItems()}))],e.togglePlacement=function(t){e.props.dispatch(q3(t))},e.toggleGroup=function(t){var n=e.props,r=n.dispatch,a=n.selectedPlacements,o=n.selectedGroup;r(V3(t)),t.placements.map((function(t){(e.containsObject({itemId:t.inventory_item.id,containerId:t.container.id},a)||o.includes(t.inventory_storage_container_id))&&a&&0!==a.length||r(q3(t))}))},e.groupIsSelected=function(t){var n=e.props.selectedGroup;return!!(n&&n.length>0)&&n.includes(t)},e.placementIsSelected=function(t,n){var r=e.props.selectedPlacements;return!!(r&&r.length>0)&&e.containsObject({itemId:t,containerId:n},r)},e.containsObject=function(e,t){var n;for(n=0;n<t.length;n++)if(t[n].itemId===e.itemId&&t[n].containerId===e.containerId)return!0;return!1},e.getStorageItems=function(t,n){var r=e.props,a=r.dispatch,o=r.warehousingOptions.selectedLocation,i=e.state.filters;o&&a(A3(o,Object(c.a)(Object(c.a)({placement:i.show_all?0:1,charging_interval:1},i),t),n))},e.removeInventoryItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Are you sure you want to delete inventory item ",Object(a.jsxs)("strong",{children:["#",t.inventory_item.id," ",t.inventory_item.name]})," from the list?"]}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:if(!n.sent){n.next=8;break}return n.next=7,eQ.removeInventoryItem(t.inventory_item.id);case 7:e.getStorageItems();case 8:case"end":return n.stop()}}),n)})))},e.removeStorageCharge=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to remove storage charge from this item?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:if(!n.sent||!t.charging_interval){n.next=8;break}return n.next=7,eQ.removeChargingIntervalFromPlacement(t.id,t.charging_interval.inventory_storage_space_type_charging_interval_id);case 7:e.getStorageItems();case 8:case"end":return n.stop()}}),n)})))},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData;switch(n){case"edit_charge":return Object(a.jsx)(B9,{isOpen:!0,title:"Edit Charging Interval",body:Object(a.jsx)(ZAe,Object(c.a)(Object(c.a)({update:!0},r),{},{afterSubmit:e.hideModal})),id:QAe,onClose:e.hideModal});case"edit_item":return Object(a.jsx)(B9,{isOpen:!0,title:"Edit Inventory Item",body:Object(a.jsx)(rIe,Object(c.a)(Object(c.a)({},r),{},{afterSubmit:e.hideModal})),id:tIe,onClose:e.hideModal})}return null},e.getRestMenuItems=function(t,n){var r=[];return t.has(vx.OPERATIONS_STORAGE_UPDATE)&&(r.push({name:"Edit inventory item",onClick:e.showModal("edit_item",{initialValues:Object(c.a)(Object(c.a)({},n.inventory_item),{},{space:n.space,container:n.container,condition:n.inventory_item.condition?{value:n.inventory_item.condition,label:n.inventory_item.condition}:void 0})})}),t.has(vx.OPERATIONS_STORAGE_DELETE)&&r.push({name:"Delete storage charge",onClick:e.removeStorageCharge(n)})),r},e.handlePagination=function(t){return e.getStorageItems({job_id:e.state.jobId,status:e.state.status},t)},e.toggleFilters=function(){e.setState({showFilter:!e.state.showFilter})},e.applyFilters=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({filters:n},(function(){e.getStorageItems()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"componentDidMount",value:function(){this.getStorageItems(),Rm.status("Warehousing - Items in Storage")}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getStorageItems({job_id:this.state.jobId,status:this.state.status})}},{key:"renderInventoryTable",value:function(e){var t,n=null===(t=this.props.storageItems.data)||void 0===t?void 0:t.data;return(null===n||void 0===n?void 0:n.length)?Object(a.jsxs)(HAe,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(k9,{scope:"col",children:"Job"}),Object(a.jsx)(k9,{scope:"col",children:"Inventory #"}),Object(a.jsx)(k9,{scope:"col",children:"Item Name"}),Object(a.jsx)(k9,{scope:"col",children:"Storage Location"}),Object(a.jsx)(k9,{scope:"col",children:"Date Started"}),Object(a.jsx)(k9,{scope:"col",children:"Days in Location"}),Object(a.jsx)(k9,{scope:"col",children:"Total Cost"}),Object(a.jsx)(C9,{scope:"col",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:this.renderInventoryItems(n,e)})]}):null}},{key:"renderInventoryItems",value:function(e,t){var n=this;return e?e.map((function(e,r){var o=n.getRestMenuItems(t,e);return e.inventory_item?Object(a.jsxs)(AF,{children:[Object(a.jsx)(g9,{children:zy.getJobName(e.inventory_item.job)}),Object(a.jsx)(g9,{children:e.inventory_item.inventory_id}),Object(a.jsx)(g9,{children:e.inventory_item.name}),Object(a.jsxs)(g9,{children:[e.space.name," (",e.space.location.code,")"]}),Object(a.jsx)(g9,{children:Object(a.jsx)(kS.a,{format:iv,children:e.started_at})}),Object(a.jsx)(g9,{children:Object(a.jsx)(kS.a,{fromNow:!0,ago:!0,children:e.started_at})}),Object(a.jsx)(g9,{children:vm(z9.getPlacementCost(e))}),Object(a.jsx)("td",{children:o.length>0&&Object(a.jsx)(FF,{children:Object(a.jsx)(nw,{items:o,noMargin:!0,direction:"right",iconName:Xf.MenuVertical})})})]},r):null})):null}},{key:"render",value:function(){var e=this,t=this.props.storageItems.loading,n=this.props.storageItems.data,r=n&&n.data.length>0,o=this.state,i=o.filters,s=o.showFilter;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cx.Consumer,{children:function(o){return Object(a.jsxs)(JC,{className:"p-4",children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("p",{children:Object(a.jsx)("span",{onClick:e.toggleFilters,className:"text-primary cursor-pointer",children:s?"Hide Filters":"Show Filter"})}),s&&Object(a.jsx)(eIe,{initialValues:Object(c.a)(Object(c.a)({},i),{},{from_date:i.from_date?pm()(i.from_date):null,to_date:i.from_date?pm()(i.to_date):null}),onSubmit:e.applyFilters}),Object(a.jsx)(GAe,{className:"d-flex flex-column",children:r?e.renderInventoryTable(o):"No items"}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(a.jsx)(oC,{pagination:n.pagination,onChange:e.handlePagination})})]})}})]})}}]),n}(p.Component),oIe=Object(sg.compose)(Object(b.b)((function(e){return{storageItems:e.warehousing.itemsInStorage,selectedGroup:e.warehousing.selectedGroup,selectedPlacements:e.warehousing.selectedPlacements,warehousingOptions:U3(e),locations:e.user.locations}})),O.g)(aIe);var iIe=function(e){var t=e.loading,n=e.children;return Object(a.jsxs)(nj,{width:350,children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"finance-sidebar-tooltip"}),Object(a.jsxs)("div",{className:"position-relative",children:[t&&Object(a.jsx)(Nv,{size:40,color:_.gray1}),n]})]})};function cIe(){var e=Object(f.a)(["\n  border-width: 1px 1px 0 1px;\n  border-style: solid;\n  border-color: ",";\n  padding: 0px 10px;\n  min-height: 50px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center;\n  background: ",";\n\n  &:last-child {\n    border-width: 1px 1px 1px 1px;\n  }\n"]);return cIe=function(){return e},e}function sIe(){var e=Object(f.a)(["\n  margin-top: 30px;\n"]);return sIe=function(){return e},e}var lIe=y.default.div(sIe()),uIe=Object(y.default)(gv(["selected"])("div"))(cIe(),_.gray2,(function(e){return e.selected?_.blue0:_.white})),dIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,searchedJobs:[],selectedJob:null,jobs:[]},e.onSearchValueChange=function(t){var n=t.toLowerCase(),r=e.state.jobs,a=[];""!==n?(r.forEach((function(e){var t=e.insurer&&e.insurer.contact_name&&-1!==e.insurer.contact_name.toLowerCase().indexOf(n),r=e.site_address&&e.site_address.full_address&&-1!==e.site_address.full_address.toLowerCase().indexOf(n),o=e.assigned_location&&(-1!==e.assigned_location.name.toLowerCase().indexOf(n)||-1!==e.assigned_location.code.toLowerCase().indexOf(n)),i=-1!==e.id.toString().indexOf(n);(t||r||i||o)&&a.push(e)})),e.setState({searchedJobs:a})):e.setState({searchedJobs:a})},e.onSubmit=function(){e.setState({loading:!0});var t=e.state.selectedJob;eQ.createNewInventory(t.id).then((function(t){var n,r,a,o;null===(n=(r=e.props).onSave)||void 0===n||n.call(r,t.data),null===(a=(o=e.props).onClose)||void 0===a||a.call(o),Gy.emit(Ix.WarehousingInventoryAdded,t.data)})).catch((function(){e.setState({loading:!1})}))},e.selectJob=function(t){return function(){e.setState({selectedJob:t})}},e.renderJobs=function(){var t=e.state,n=t.searchedJobs,r=t.selectedJob,o=r?r.id:"";return Object(a.jsx)(lIe,{children:n.map((function(t){return Object(a.jsxs)(uIe,{selected:t.id===o,onClick:e.selectJob(t),children:[Object(a.jsx)("div",{children:"".concat(t.insurer?t.insurer.contact_name:"Unknown",", ").concat(t.site_address?t.site_address.full_address:"Unknown")}),Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)(hC,{children:"#".concat(t.id,"-").concat(t.assigned_location?t.assigned_location.code:"Unknown")})})]})}))})},e.renderBody=function(){var t=e.state,n=t.loading,r=t.jobsLoading;return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"row",children:Object(a.jsx)("div",{className:"col-12",children:Object(a.jsx)(aC,{loading:n,placeholder:"Search...",searchIcon:!0,mode:"typeGray",onSearchValueChange:e.onSearchValueChange})})}),r?Object(a.jsx)(Nv,{size:40,color:_.white}):e.renderJobs()]})})},e.renderFooter=function(){return Object(a.jsx)(Xg,{className:"btn",disabled:!1,onClick:e.onSubmit,children:"OK"})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({jobsLoading:!0}),zy.getAllJobs({}).then((function(t){e.setState({jobs:t.data,jobsLoading:!1})}))}},{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.onClose;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:n,title:"New Inventory",body:this.renderBody(),footer:this.renderFooter(),loading:this.state.loading})})}}]),n}(p.PureComponent);function pIe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return pIe=function(){return e},e}function hIe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n  cursor: pointer;\n  :last-child {\n    border-right: 0;\n  }\n"]);return hIe=function(){return e},e}function bIe(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return bIe=function(){return e},e}var fIe=y.default.div(bIe()),mIe=y.default.div(hIe(),_.white),jIe=(Object(y.default)(z7)(pIe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={location:e.props.activeLocation},e.initLocation=function(){var t=e.props.locations;t.length&&e.onLocationChange(e.state.location||e.findPrimaryLocation()||t[0])},e.findPrimaryLocation=function(){return e.props.locations.find((function(e){return e.primary}))},e.locationsTriggerRender=function(){var t=e.state.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(z7,{style:{marginLeft:"20px"},color:_.white,name:Xf.ArrowDown})]})},e.locationsItems=function(){var t=e.props.locations,n=e.state.location;return t.map((function(t){return{name:t.name,classNames:t.id===(n||{}).id?"active":"",onClick:function(){return e.onLocationChange(t)}}}))},e.onLocationChange=function(t){var n,r;e.setState({location:t}),null===(n=(r=e.props).onLocationChange)||void 0===n||n.call(r,t)},e.showTemplatesSettings=function(){e.props.history.push("/operations/schedule/config/runs")},e.toggleView=function(){var t,n,r="map"===e.props.view?"list":"map";null===(t=(n=e.props).onViewChange)||void 0===t||t.call(n,r)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initLocation()}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;0===e.locations.length&&t.length&&this.initLocation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.locations,o=t.match,i=t.location,c=t.view;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(xce,{title:n,children:Object(a.jsxs)(fIe,{children:[i.pathname===o.url+"/equipment/deployed"&&Object(a.jsx)(mIe,{children:"map"===c?Object(a.jsx)(z7,{name:Xf.LayoutBullets,title:"Show List View",color:_.white,onClick:e.toggleView}):Object(a.jsx)(z7,{name:Xf.LocationPin,title:"Show Map View",color:_.white,onClick:e.toggleView})}),Object(a.jsxs)(mIe,{children:[0===r.length&&Object(a.jsx)(Nv,{size:30,color:_.blue6}),!r||r&&0===r.length?Object(a.jsx)("div",{children:"No locations"}):Object(a.jsx)(nw,{direction:"right",trigger:function(){return e.locationsTriggerRender()},items:e.locationsItems()})]})]})})}})}}]),n}(h.a.PureComponent)),vIe=Object(O.g)(jIe),OIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).eventListeners=[Gy.listen(Ix.LME_EquipmentUpdated,(function(){e.loadData()}))],e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=e.props,r=n.equipment,a=n.placements,o=n.deployments,a.fetch(r.id),o.fetch(r.id);case 3:case"end":return t.stop()}}),t)}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){var t=this.props.equipment,n=e.equipment;t.id!==n.id&&this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"renderHistory",value:function(){var e,t,n,r=this.props,o=r.equipment,i=r.placements,s=r.deployments,l=[];j.a.forEach({deployment:null===(e=((null===(t=s.data)||void 0===t?void 0:t.data)||{}).job_equipment)||void 0===e?void 0:e.map((function(e){var t;return Object(c.a)(Object(c.a)({},null===(t=s.data)||void 0===t?void 0:t.data),{},{job_equipment:e,created_at:e.created_at})})),placement:(null===(n=i.data)||void 0===n?void 0:n.data)||[]},(function(e,t){j.a.forEach(e,(function(e){l.push(Object(c.a)(Object(c.a)({},e),{},{type:t}))}))})),l.sort((function(e,t){return pm()(t.created_at||"").diff(e.created_at||"")}));var u=[];return l.forEach((function(e,t){var n,r,o,i,c,s,l,d,p,h;switch(e.type){case"placement":if(e.space){var b,f;if(e.ended_at)u.push(Object(a.jsxs)(hwe,{color:_.blue2,children:[Object(a.jsxs)("div",{children:["Equipment checked out from location ",Object(a.jsxs)("span",{children:["`",e.space.name,"`"]})," by ",null===(f=e.stop_by)||void 0===f?void 0:f.full_name]}),Object(a.jsx)("div",{className:"date",children:pm()(e.ended_at).format(lv)})]},e.type+"end"+e.id));u.push(Object(a.jsxs)(hwe,{color:_.blue5,children:[Object(a.jsxs)("div",{children:["Equipment checked in to location ",Object(a.jsxs)("span",{children:["`",e.space.name,"`"]})," by ",null===(b=e.start_by)||void 0===b?void 0:b.full_name]}),Object(a.jsx)("div",{className:"date",children:pm()(e.started_at).format(lv)})]},e.type+"start"+e.id))}break;case"deployment":var m,j,v,O,g,x,y,w,S,k;if(e.job_equipment.ended_at)u.push(Object(a.jsxs)(hwe,{color:_.red1,children:[Object(a.jsxs)("div",{children:[null===e||void 0===e||null===(j=e.job_equipment)||void 0===j||null===(v=j.ended_by)||void 0===v?void 0:v.full_name," has removed the equipment from job"," ",Object(a.jsxs)("a",{href:"/job/".concat(null===e||void 0===e||null===(O=e.job_equipment)||void 0===O||null===(g=O.job)||void 0===g?void 0:g.id,"/details"),target:"_blank",rel:"noreferrer",children:[Object(a.jsx)("span",{children:(null===e||void 0===e||null===(x=e.job_equipment)||void 0===x?void 0:x.job)&&zy.getJobName(e.job_equipment.job)})," ",null===e||void 0===e||null===(y=e.job_equipment)||void 0===y||null===(w=y.job)||void 0===w||null===(S=w.site_address)||void 0===S?void 0:S.full_address]})]}),Object(a.jsx)("div",{className:"date",children:pm()(null===e||void 0===e||null===(k=e.job_equipment)||void 0===k?void 0:k.ended_at).format(lv)})]},e.type+"end"+(null===e||void 0===e||null===(m=e.job_equipment)||void 0===m?void 0:m.id)||""));u.push(Object(a.jsxs)(hwe,{color:_.green4,children:[Object(a.jsxs)("div",{children:[null===e||void 0===e||null===(r=e.job_equipment)||void 0===r||null===(o=r.creator)||void 0===o?void 0:o.full_name," has deployed the equipment to job ",Object(a.jsxs)("a",{href:"/job/".concat(null===e||void 0===e||null===(i=e.job_equipment)||void 0===i||null===(c=i.job)||void 0===c?void 0:c.id,"/details"),target:"_blank",rel:"noreferrer",children:[" ",Object(a.jsx)("span",{children:(null===e||void 0===e||null===(s=e.job_equipment)||void 0===s?void 0:s.job)&&zy.getJobName(e.job_equipment.job)})," ",null===e||void 0===e||null===(l=e.job_equipment)||void 0===l||null===(d=l.job)||void 0===d||null===(p=d.site_address)||void 0===p?void 0:p.full_address]})]}),Object(a.jsx)("div",{className:"date",children:pm()(null===e||void 0===e||null===(h=e.job_equipment)||void 0===h?void 0:h.started_at).format(lv)})]},e.type+"start"+(null===e||void 0===e||null===(n=e.job_equipment)||void 0===n?void 0:n.id)||""))}})),u.push(Object(a.jsxs)(hwe,{children:[Object(a.jsx)("div",{children:"Equipment added"}),Object(a.jsx)("div",{className:"date",children:pm()(o.created_at).format(lv)})]},o.id)),u}},{key:"render",value:function(){var e=this.props.placements;return Object(a.jsxs)("div",{children:[e.loading&&Object(a.jsx)(Nv,{size:40,color:_.white}),this.renderHistory()]})}}]),n}(p.PureComponent),gIe=Object(sg.compose)(oj({placements:{fetch:ZW.getEquipmentPlacements},deployments:{fetch:ZW.getEquipmentDeployemntHistory}}))(OIe),xIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.processing=!1,e.handleScan=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing){t.next=19;break}if(e.processing=!0,!n){t.next=18;break}if(e.setState({result:n}),t.prev=4,r=JSON.parse(atob(n)),[J7.space].includes(r.t)){t.next=10;break}e.setState({error:"Invalid type '".concat(r.t,"'")}),t.next=12;break;case 10:return t.next=12,e.assign(H7[r.t],r.id);case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(4),console.log(t.t0),e.setState({error:"Invalid qr code"});case 18:e.processing=!1;case 19:case"end":return t.stop()}}),t,null,[[4,14]])})));return function(e){return t.apply(this,arguments)}}(),e.handleError=function(t){e.setState({error:t.message}),console.error(t.message)},e.assign=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({submitting:!0}),a=[],o=[],e.props.equipments.forEach((function(e){var t=e.placement||{};t[n]||(t[n]={}),t[n].id=r,a.push(ZW.stopEquipmentPlacement(e.id))})),t.next=6,Promise.all(a);case 6:return e.props.equipments.forEach((function(e){var t,a=e.placement||{};a[n]||(a[n]={}),a[n].id=r,o.push(ZW.startEquipmentPlacement(e.id,{inventory_storage_space_id:null===(t=a.space)||void 0===t?void 0:t.id,is_used_on_ar:!0}))})),t.next=9,Promise.all(o);case 9:e.props.onClose(),Gy.emit(Ix.LME_EquipmentUpdated);case 11:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.state,n=t.error,r=t.result;return Object(a.jsxs)("div",{className:"qr-reader-wrapper",children:[n&&Object(a.jsx)("p",{className:"p-3 text-danger",children:n}),r&&Object(a.jsx)("p",{className:"p-3 text-success",children:r}),Object(a.jsx)(W7.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:"100%"}})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=(e.title,e.onClose),r=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{bodyClass:"p-0",onClose:n,loading:r,title:"Scan to Location",body:this.renderModalBody()})})}}]),n}(p.PureComponent),yIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.equipment;switch(n){case"scan-qr":return Object(a.jsx)(xIe,Object(c.a)({isOpen:!0,onClose:e.hideModal,equipments:[o]},r));case"deploy":return Object(a.jsx)(B9,{title:"Deploy Equipment On Site",id:sse,body:Object(a.jsx)(use,{initialValues:{unit_cost_to_me:o.equipment_category.default_buy_cost_per_interval},onSubmit:e.deployOnSite}),isOpen:!0,onClose:e.hideModal})}return null},e.jobEquipmentDateValidation=function(t){var n,r,a=e.props.equipment,o=void 0;t.job&&pm()(null===(n=t.job)||void 0===n?void 0:n.created_at).isAfter(a.created_at)?o=pm()(null===(r=t.job)||void 0===r?void 0:r.created_at):o=pm()(a.created_at);return!!t.started_at.isAfter(o)},e.deployOnSite=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props.equipment,e.setState({working:!0}),t.prev=2,!n.job){t.next=13;break}if(e.jobEquipmentDateValidation(n)){t.next=8;break}return Oj(uj.Danger,"Deployment date time should be equal to or greater than the equipment and job creation date/time"),t.abrupt("return",null);case 8:return a=n.job.id,t.next=11,zy.addEquipmentToJob(a,{equipment_id:r.id,started_at:n.started_at&&n.started_at.utc().format(ov),ended_at:n.ended_at&&n.ended_at.utc().format(ov)});case 11:Gy.emit(Ix.LME_EquipmentUpdated),e.hideModal();case 13:return t.prev=13,e.setState({working:!1}),t.finish(13);case 16:return t.abrupt("return",Promise.resolve());case 17:case"end":return t.stop()}}),t,null,[[2,,13,16]])})));return function(e){return t.apply(this,arguments)}}(),e.removeFromSite=Object(lj.a)(sj.a.mark((function t(){var n,r,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.dispatch,!(o=n.equipment).job_equipment){t.next=14;break}return t.next=4,r(iw("Confirm","Confirm!",Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("p",{children:"Are you sure you want to remove this equipment from site?"})})));case 4:if(!t.sent){t.next=14;break}return e.setState({working:!0}),t.prev=7,t.next=10,zy.updateJobEquipmentFinishUsing(o.job_equipment.job_id,o.job_equipment.id,pm()().utc().format(ov));case 10:Gy.emit(Ix.LME_EquipmentUpdated);case 11:return t.prev=11,e.setState({working:!1}),t.finish(11);case 14:case"end":return t.stop()}}),t,null,[[7,,11,14]])}))),e.checkOut=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.equipment,t.next=5,ZW.stopEquipmentPlacement(n.id);case 5:Gy.emit(Ix.LME_EquipmentUpdated,n);case 6:return t.prev=6,e.setState({working:!1}),t.finish(6);case 9:case"end":return t.stop()}}),t,null,[[1,,6,9]])}))),e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r,o,i,c=this.props.equipment,s=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),s&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"row my-0",children:Object(a.jsx)("div",{className:"col text-right",children:Object(a.jsx)("span",{className:"badge badge-primary",children:null===(e=c.placement_status)||void 0===e?void 0:e.replaceAll("_"," ")})})}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Equipment Type"})}),Object(a.jsx)("div",{className:"col",children:c.equipment_category.name})]}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Model Number"})}),Object(a.jsx)("div",{className:"col",children:c.model})]}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Serial Number"})}),Object(a.jsx)("div",{className:"col",children:c.serial_number})]}),c.placement&&Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Storage Location"})}),Object(a.jsx)("div",{className:"col",children:(null===(t=c.placement)||void 0===t?void 0:t.space)&&c.placement.space.name+" ("+(null===(n=c.placement.space.location)||void 0===n?void 0:n.code)+")"})]}),c.placement_status===T9.DEPLOYED_ON_SITE&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Job"})}),Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{children:zy.getJobName(c.job_equipment.job)}),Object(a.jsx)("div",{className:"text-sm",children:null===(r=c.job_equipment)||void 0===r||null===(o=r.job.site_address)||void 0===o?void 0:o.full_address})]})]}),Object(a.jsxs)("div",{className:"row my-0 mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)("strong",{children:"Deployment Date"})}),Object(a.jsx)("div",{className:"col",children:pm()(null===(i=c.job_equipment)||void 0===i?void 0:i.started_at).format(lv)})]})]}),Object(a.jsx)("div",{children:c.placement_status===T9.CHECKED_OUT?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("button",{className:"btn btn-outline-primary",onClick:this.showModal("scan-qr"),children:"Check In"}),Object(a.jsx)("button",{className:"btn btn-outline-success ml-3",onClick:this.showModal("deploy"),children:"Deploy to Site"})]}):c.placement_status===T9.DEPLOYED_ON_SITE?Object(a.jsx)("button",{className:"btn btn-outline-danger",onClick:this.removeFromSite,children:"Remove from Site"}):Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.checkOut,children:"Check Out"})})]})]})}}]),n}(p.PureComponent),_Ie=Object(sg.compose)(Object(b.b)())(yIe),wIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={center:null},e.defaultCenter=[-34.397,150.644],e.setCenter=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Dm();case 3:n=t.sent,e.setState({center:[n.coords.latitude,n.coords.longitude]}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),e.setState({center:e.defaultCenter});case 10:case"end":return t.stop()}}),t,null,[[0,7]])}))),e.renderIcon=function(e){var t=60;return new dae.a.DivIcon({html:hae.a.renderToStaticMarkup(Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(fae,{color:e||_.blue4}),Object(a.jsx)(z7,{size:t,style:{position:"relative"},color:e||_.blue4,name:Xf.PinMapFilled,fill:!0})]})),iconSize:[t,t],iconAnchor:[30,t],popupAnchor:[0,-50]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setCenter()}},{key:"render",value:function(){var e=this,t=this.state.center;if(t){var n=this.props.equipments;return Object(a.jsxs)(oae.a,{center:t,zoom:11,maxZoom:17,children:[Object(a.jsx)(iae.a,{url:"https://mt1.google.com/vt/lyrs=m&x={x}&y={y}&z={z}",attribution:""}),n.filter((function(e){return e.equipment_qr_history})).map((function(t){var n,r,o;return Object(a.jsx)(lae.a,{position:[t.equipment_qr_history.location_lat,t.equipment_qr_history.location_lng],icon:e.renderIcon(),children:Object(a.jsxs)(jae.a,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Equipment Type:"})," ",t.equipment_category.name]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Model Number: "})," ",t.model]}),t.placement_status===T9.DEPLOYED_ON_SITE&&(null===(n=t.job_equipment)||void 0===n?void 0:n.job)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Job:"})," ",Object(a.jsx)("a",{href:"/job/".concat(t.job_equipment.job.id,"/details"),target:"_blank",rel:"noreferrer",children:zy.getJobName(t.job_equipment.job)})," ",null===(r=t.job_equipment.job.site_address)||void 0===r?void 0:r.full_address]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Deployment Date: "}),pm()(null===(o=t.job_equipment)||void 0===o?void 0:o.started_at).format(lv)]})]})]})},t.id)}))]})}return null}}]),n}(p.PureComponent),SIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.eventListeners=[Gy.listen(Ix.LME_EquipmentUpdated,(function(){e.loadData()}))],e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),n=e.props,r=n.equipment,a=n.equipmentLocation,o=n.match.params.id,t.prev=2,t.next=5,r.fetch(o);case 5:return t.next=7,a.fetch(o,{per_page:1});case 7:return t.prev=7,e.setState({loading:!1}),t.finish(7);case 10:case"end":return t.stop()}}),t,null,[[2,,7,10]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){this.props.match.params.id!==e.match.params.id&&this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e,t=this.props,n=t.equipment,r=t.equipmentLocation,o=this.state.loading;return Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[(o||n.loading)&&Object(a.jsx)(Nv,{size:40,color:_.white}),n.data&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"border p-3",children:Object(a.jsx)(_Ie,{equipment:n.data})}),Object(a.jsx)("div",{className:"border p-3 my-3 position-relative",style:{maxHeight:300,overflow:"auto"},children:Object(a.jsx)(gIe,{equipment:n.data})}),Object(a.jsxs)("div",{className:"border p-3 position-relative d-flex flex-column",style:{height:400},children:[Object(a.jsx)("h5",{children:Object(a.jsx)("strong",{children:"Last Known Location"})}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(wIe,{equipments:(null===(e=r.data)||void 0===e?void 0:e.data)||[]})})]})]})]})}}]),n}(p.PureComponent),kIe=Object(sg.compose)(O.g,oj({equipment:{fetch:ZW.getEquipmentInfo},equipmentLocation:{fetch:ZW.getEquipmentScannedLocation}}))(SIe),CIe="WH_EQUIPMENT_FILTERS",NIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log(t);case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.submit=function(){return e.props.handleSubmit(e.props.onSubmit||e.onSubmit)()},e.debouncedSubmit=Qv()(e.submit,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.handleSubmit,n=e.onSubmit;return Object(a.jsx)("form",{id:CIe,onSubmit:t(n||this.onSubmit),children:Object(a.jsx)(Hv.a,{name:"terms",component:yg,placeholder:"Search by equipment, model number, barcode ...",onChange:this.debouncedSubmit})})}}]),n}(p.PureComponent),EIe=Object(sg.compose)(Object(jv.a)({form:CIe}))(NIe),AIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.equipments,o=r.equipmentsLocations,i=r.view,s=r.locationId,l=e.state.filters,"map"===i?(o.fetch(Object(c.a)(Object(c.a)({placement_status:T9.DEPLOYED_ON_SITE,location_id:s},n),l)),a.reset()):(o.reset(),a.fetch(Object(c.a)(Object(c.a)({placement_status:T9.DEPLOYED_ON_SITE,location_id:s},n),l)));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.onFiltersSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({filters:n},(function(){e.loadData()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){e.locationId===this.props.locationId&&e.view===this.props.view||this.loadData()}},{key:"render",value:function(){var e,t,n=this.props,r=n.equipments,o=n.equipmentsLocations,i=n.view,c=r.loading||o.loading;return Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100 d-flex flex-column",children:[c&&Object(a.jsx)(Nv,{size:40,color:_.white,zIndex:9999}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(EIe,{onSubmit:this.onFiltersSubmit})}),Object(a.jsx)("div",{className:"flex-grow-1",children:"map"===i?Object(a.jsx)(wIe,{equipments:(null===(e=o.data)||void 0===e?void 0:e.data)||[]}):Object(a.jsxs)(eU,{children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Equipment Type"}),Object(a.jsx)(CF,{children:"Model Number"}),Object(a.jsx)(CF,{children:"Deployment Date"}),Object(a.jsx)(CF,{children:"Job"}),Object(a.jsx)(CF,{children:"Equipment Location"})]})}),Object(a.jsx)(NF,{children:null===(t=r.data)||void 0===t?void 0:t.data.map((function(e){var t,n,r,o,i;return Object(a.jsxs)(IF,{to:"/operations/warehousing/equipment/".concat(e.id,"/details"),children:[Object(a.jsx)(EF,{children:e.equipment_category.name}),Object(a.jsx)(EF,{children:e.model}),Object(a.jsx)(EF,{children:pm()(null===e||void 0===e||null===(t=e.job_equipment)||void 0===t?void 0:t.started_at).format(lv)}),Object(a.jsxs)(EF,{children:[Object(a.jsx)("div",{children:(null===e||void 0===e||null===(n=e.job_equipment)||void 0===n?void 0:n.job)&&zy.getJobName(e.job_equipment.job)}),Object(a.jsx)("div",{className:"text-sm",children:null===e||void 0===e||null===(r=e.job_equipment)||void 0===r||null===(o=r.job.site_address)||void 0===o?void 0:o.full_address})]}),Object(a.jsx)(EF,{children:null===(i=e.location)||void 0===i?void 0:i.code})]},e.id)}))})]})})]})}}]),n}(p.PureComponent),IIe=Object(sg.compose)(oj({equipments:{fetch:ZW.getAllEquipments},equipmentsLocations:{fetch:ZW.getEquipmentsScannedLocations}}))(AIe),TIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=e.props,a=r.equipments,o=r.locationId,a.fetch(Object(c.a)({placement_status:T9.IN_STORAGE,location_id:o},n));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentDidUpdate",value:function(e){e.locationId!==this.props.locationId&&this.loadData()}},{key:"render",value:function(){var e,t=this.props.equipments,n=t.loading;return Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("div",{className:"mb-3",children:Object(a.jsx)(EIe,{onSubmit:this.loadData})}),Object(a.jsxs)(eU,{children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:"Equipment Type"}),Object(a.jsx)(CF,{children:"Model Number"}),Object(a.jsx)(CF,{children:"Storage Location"}),Object(a.jsx)(CF,{children:"Status"})]})}),Object(a.jsx)(NF,{children:null===(e=t.data)||void 0===e?void 0:e.data.map((function(e){var t,n,r;return Object(a.jsxs)(IF,{to:"/operations/warehousing/equipment/".concat(e.id,"/details"),children:[Object(a.jsx)(EF,{children:e.equipment_category.name}),Object(a.jsx)(EF,{children:e.model}),Object(a.jsx)(EF,{children:(null===(t=e.placement)||void 0===t?void 0:t.space)&&e.placement.space.name+" ("+(null===(n=e.placement.space.location)||void 0===n?void 0:n.code)+")"}),Object(a.jsx)(EF,{children:null===(r=e.placement_status)||void 0===r?void 0:r.replaceAll("_"," ")})]},e.id)}))})]})]})}}]),n}(p.PureComponent),RIe=Object(sg.compose)(oj({equipments:{fetch:ZW.getAllEquipments}}))(TIe),DIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).setPageTitle=function(){var t="";switch(e.props.match.params.type){case"storage":t="In Storage";break;case"deployed":t="Deployed On Site"}Rm.status("Warehousing | Equipment"+(t?" - ":"")+t)},e.renderRoutes=function(){var t=e.props,n=t.warehousingOptions,r=t.match.params.type,o=void 0===r?"":r;if(n.selectedLocation)switch(o.toLowerCase()){case"storage":return Object(a.jsx)(RIe,{locationId:n.selectedLocation});case"deployed":return Object(a.jsx)(IIe,{locationId:n.selectedLocation,view:n.view});default:return Object(a.jsx)(RIe,{locationId:n.selectedLocation})}return null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setPageTitle()}},{key:"componentDidUpdate",value:function(){this.setPageTitle()}},{key:"componentWillUnmount",value:function(){Rm.reset()}},{key:"render",value:function(){return Object(a.jsx)(a.Fragment,{children:this.renderRoutes()})}}]),n}(p.PureComponent),MIe=Object(sg.compose)(Object(b.b)((function(e){return{warehousingOptions:U3(e)}})))(DIe),LIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchLoading:!1,location:e.primaryLocation,view:"list"},e.getWarehouseInfo=function(){var t=e.props.dispatch,n=e.state.location;n&&t(L3(n.id))},e.eventListeners=[Gy.listen(Ix.WarehousingInventoryAdded,(function(){e.getWarehouseInfo()})),Gy.listen(Ix.WarehousingInventoryDeleted,(function(){e.getWarehouseInfo()}))],e.setLocation=function(t){e.setState({location:t})},e.setView=function(t){e.setState({view:t})},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=t.location;switch(n){case"new_item":return Object(a.jsx)(dIe,Object(c.a)({locationId:null===o||void 0===o?void 0:o.id,isOpen:!0,onClose:e.hideModal},r))}return null},e}return Object(l.a)(n,[{key:"isActive",value:function(e,t){return!!Object(O.f)(this.props.location.pathname,{path:e,exact:t})}},{key:"componentDidMount",value:function(){Rm.status("Warehousing");var e=this.props.dispatch,t=this.state,n=t.location,r=t.view;e(P3({selectedLocation:null===n||void 0===n?void 0:n.id,view:r})),this.getWarehouseInfo()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.dispatch,r=this.state,a=r.location,o=r.view,i=t.location,c=t.view;a===i&&o===c||n(P3({selectedLocation:null===a||void 0===a?void 0:a.id,view:o})),a!==i&&this.getWarehouseInfo()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"getWIMenuItems",value:function(e){var t=this.props.warehouseInfo,n=t.data?t.data.data:[];return[{path:"/operations/warehousing/items",icon:Xf.ShipmentUpload,isActive:this.isActive("/operations/warehousing/items"),label:"Items in Storage",value:0,type:"items_in_storage",disabled:!e.has(vx.OPERATIONS_STORAGE_VIEW)},{path:"/operations/warehousing/equipment",icon:Object(a.jsx)(z7,{name:Xf.Trolley,color:_.black0,fill:!0}),isActive:this.isActive("/operations/warehousing/equipment"),label:"Equipment",type:"equipment",disabled:!e.has(vx.EQUIPMENT_VIEW),menu:[{path:"/operations/warehousing/equipment/storage",con:Xf.ShipmentDeliver,isActive:this.isActive("/operations/warehousing/equipment/storage"),label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"In Storage"}),disabled:!e.has(vx.EQUIPMENT_VIEW)},{path:"/operations/warehousing/equipment/deployed",con:Xf.ShipmentDeliver,isActive:this.isActive("/operations/warehousing/equipment/deployed"),label:Object(a.jsx)("div",{className:"pl-4 ml-5",children:"Deployed On Site"}),disabled:!e.has(vx.EQUIPMENT_VIEW)}]}].map((function(e){return e.value=n[e.type],Object.assign({},e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.locations,o=t.loading,i=this.state,c=i.location,s=i.view;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Operations"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/warehousing",children:"Warehousing"}),o&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(vIe,{title:"Warehousing",locations:r,onLocationChange:e.setLocation,view:s,onViewChange:e.setView,activeLocation:c}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch overflow-auto",children:[Object(a.jsxs)(iIe,{children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"operations-sidebar-tooltip"}),e.getWIMenuItems(t).map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Wm,{item:e},e.path),e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),e.isActive&&e.menu&&e.menu.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Wm,{item:e},e.path),e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label})]})}))]})}))]}),c&&Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"".concat(n.path,"/items"),component:oIe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/equipment/:id/details"),component:kIe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/equipment/:type"),component:MIe}),Object(a.jsx)(O.a,{from:"".concat(n.path,"/equipment"),to:"".concat(n.path,"/equipment/storage")}),Object(a.jsx)(O.a,{to:"".concat(n.path,"/items")})]})})]})]})}})]})}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.Component),PIe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations,warehousingOptions:U3(e),warehouseInfo:e.warehousing.warehouseInfo,loading:e.warehousing.inventories.loading}})),O.g)(LIe);function FIe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return FIe=function(){return e},e}function UIe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  height: 100%;\n  position: relative;\n\n  :last-child {\n    border-right: 0;\n  }\n"]);return UIe=function(){return e},e}function BIe(){var e=Object(f.a)(["\n  height: 100%;\n  display: flex;\n"]);return BIe=function(){return e},e}var VIe=y.default.div(BIe()),JIe=y.default.div(UIe(),_.white),qIe=(Object(y.default)(z7)(FIe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={location:e.props.activeLocation},e.initLocation=function(){var t=e.props.locations;t.length&&e.onLocationChange(e.state.location||e.findPrimaryLocation()||t[0])},e.findPrimaryLocation=function(){return e.props.locations.find((function(e){return e.primary}))},e.locationsTriggerRender=function(){var t=e.state.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(z7,{style:{marginLeft:"20px"},color:_.white,name:Xf.ArrowDown})]})},e.locationsItems=function(){var t=e.props.locations,n=e.state.location;return t.map((function(t){return{name:t.name,classNames:t.id===(n||{}).id?"active":"",onClick:function(){return e.onLocationChange(t)}}}))},e.onLocationChange=function(t){var n,r;e.setState({location:t}),null===(n=(r=e.props).onLocationChange)||void 0===n||n.call(r,t)},e.showTemplatesSettings=function(){e.props.history.push("/operations/schedule/config/runs")},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.initLocation()}},{key:"componentDidUpdate",value:function(e){var t=this.props.locations;0===e.locations.length&&t.length&&this.initLocation()}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.locations;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsx)(xce,{title:n,children:Object(a.jsx)(VIe,{children:Object(a.jsxs)(JIe,{children:[0===r.length&&Object(a.jsx)(Nv,{size:30,color:_.blue6}),!r||r&&0===r.length?Object(a.jsx)("div",{children:"No locations"}):Object(a.jsx)(nw,{direction:"right",trigger:function(){return e.locationsTriggerRender()},items:e.locationsItems()})]})})})}})}}]),n}(h.a.PureComponent)),zIe=Object(O.g)(qIe);function GIe(){var e=Object(f.a)(["\n  overflow: auto;\n"]);return GIe=function(){return e},e}var WIe=y.default.div(GIe()),HIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e,r;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(r=t.call.apply(t,[this].concat(o))).state={location:null===(e=r.props.location.state)||void 0===e?void 0:e.location},r.onClose=function(){r.props.history.push("/operations/schedule",{location:r.state.location})},r.setLocation=function(e){r.setState({location:e})},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){Rm.status("Schedule - Settings")}},{key:"componentWillUnmount",value:function(){Rm.reset()}},{key:"renderSection",value:function(e){var t=this.state.location;switch(e){case"runs":return Object(a.jsx)(Yce,{location:t,onClose:this.onClose})}return null}},{key:"render",value:function(){var e=this,t=this.props,n=t.locations,r=t.match.params.section,o=this.state.location;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Operations"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/schedule/jobs",children:"Schedule"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/schedule/config/runs",children:"Configurations"}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(zIe,{title:"Runs Settings",locations:n,onLocationChange:e.setLocation,activeLocation:o}),Object(a.jsx)(WIe,{className:"h-100 d-flex flex-row align-items-stretch flex-grow-1 position-relative",children:Object(a.jsx)("div",{className:"flex-grow-1 position-relative",style:{maxWidth:"100%"},children:e.renderSection(r)})})]})]})}})}}]),n}(p.PureComponent),YIe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{locations:e.user.locations}})))(HIe),QIe=p.createContext(null),KIe="WTAER_FORMS_MOISTURE_READING_FORM",ZIe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,!n.mc){t.next=16;break}return null===a||void 0===a||a(n),t.prev=3,t.next=6,VQ(i.id,Object(c.a)({},n));case 6:s=t.sent,null===o||void 0===o||o(!0,n),Gy.emit(Ix.JobReadingsAdded,[s]),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),null===o||void 0===o||o(!1,n);case 14:t.next=17;break;case 16:null===o||void 0===o||o(!0,n);case 17:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.moistureArea,r=t.handleSubmit,o=t.submitting,i=t.modal,c=t.hasMoistureReadings,s=t.hasAirReadings;return Object(a.jsx)(QIe.Consumer,{children:function(t){var l;return Object(a.jsxs)(a.Fragment,{children:[o&&!i&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{id:KIe,onSubmit:r(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsx)(Hv.a,{label:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:n.name})}),Object(a.jsx)("div",{className:"text-sm",children:(null===(l=n.surface_type)||void 0===l?void 0:l.name)||"Not Set"})]}),className:"d-flex",labelClassName:"col-6",valueClassName:"col",name:"mc",component:yg,type:"number",min:0,validate:c||s?void 0:Dv})]})]})}})}}]),n}(p.PureComponent),XIe=Object(sg.compose)(Object(b.b)((function(e){var t,n;return{hasMoistureReadings:!!j()(e.form).keys().filter((function(e){return e.startsWith(KIe)})).filter((function(t){var n;return null===(n=e.form[t].values)||void 0===n?void 0:n.mc})).value().length,hasAirReadings:(n=null===(t=e.form[$Ie])||void 0===t?void 0:t.values,!(!(null===n||void 0===n?void 0:n.rh)||!(null===n||void 0===n?void 0:n.temp)))}})),Object(jv.a)({form:KIe,enableReinitialize:!0}))(ZIe),$Ie="WTAER_FORMS_AIR_READING_FORM",eTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,null===a||void 0===a||a(n),t.prev=2,t.next=5,VQ(i.id,Object(c.a)({},n));case 5:return s=t.sent,null===o||void 0===o||o(!0,s),Gy.emit(Ix.JobReadingsAdded,[s]),t.abrupt("return",s);case 11:return t.prev=11,t.t0=t.catch(2),null===o||void 0===o||o(!1,n),t.abrupt("return",ix(t.t0));case 15:case"end":return t.stop()}}),t,null,[[2,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.submitting,o=t.modal,i=t.formData,c=t.hasMoistureReadings;t.hasAirReadings;return Object(a.jsx)(QIe.Consumer,{children:function(t){var s,l;return Object(a.jsxs)(a.Fragment,{children:[r&&!o&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{id:$Ie,onSubmit:n(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsx)(Hv.a,{label:"Relative Humidity (R/H) % :",className:"d-flex",labelClassName:"pt-2 col-6",valueClassName:"col",name:"rh",component:yg,type:"number",min:0,max:100,step:.01,validate:c?void 0:Dv}),Object(a.jsx)(Hv.a,{label:"Temperature (\u2103) :",className:"d-flex",labelClassName:"pt-2 col-6",valueClassName:"col",name:"temp",component:yg,type:"number",step:1,validate:c?void 0:Dv}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(JU,{className:"m-0",children:"GPK:"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(JU,{className:"m-0",children:(null===(s=TQ(i))||void 0===s?void 0:s.toFixed(2))||"N/A"})})]})}),Object(a.jsx)("div",{className:"form-group",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(JU,{className:"m-0",children:"GPP:"})}),Object(a.jsx)("div",{className:"col-6",children:Object(a.jsx)(JU,{className:"m-0",children:(null===(l=IQ(i))||void 0===l?void 0:l.toFixed(2))||"N/A"})})]})})]})]})}})}}]),n}(p.PureComponent),tTe=Object(sg.compose)(Object(b.b)((function(e){var t,n;return{formData:Object(GM.a)($Ie)(e),hasMoistureReadings:!!j()(e.form).keys().filter((function(e){return e.startsWith(KIe)})).filter((function(t){var n;return null===(n=e.form[t].values)||void 0===n?void 0:n.mc})).value().length,hasAirReadings:(n=null===(t=e.form[$Ie])||void 0===t?void 0:t.values,!(!(null===n||void 0===n?void 0:n.rh)||!(null===n||void 0===n?void 0:n.temp)))}})),Object(jv.a)({form:$Ie,enableReinitialize:!0}))(eTe),nTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(t,n){e.setState({submitting:!1}),t&&e.props.onClose()},e.initialValues={group_at:pm()()},e.renderModalBody=function(){var t=e.props,n=t.reading,r=t.job,o=t.room;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Air Readings"})}),Object(a.jsx)(tTe,{job:r,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),n),{},{job_room_id:null===o||void 0===o?void 0:o.id}),modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.reading,i=e.room,c=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:c,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add a new")+" reading"+(i?": "+i.name:""),body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:$Ie,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent),rTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.job,r=t.outsideRoom,o=t.locked;return Object(a.jsxs)("div",{className:"print-hide",children:[e&&Object(a.jsx)(nTe,{onClose:this.hideModal,isOpen:!0,job:n,room:r}),Object(a.jsx)("h4",{className:"text-center",children:"We'll also need to add an outside control reading."}),Object(a.jsx)("p",{className:"text-center mt-4",children:!o&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal,children:"Add outside reading"})})]})}}]),n}(p.PureComponent);function aTe(){var e=Object(f.a)(["\n  label {\n    color: ","\n  }\n"]);return aTe=function(){return e},e}var oTe="WTAER_FORMS_CONTROL_ROOM_FORM",iTe=y.default.div(aTe(),_.gray4),cTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,null===a||void 0===a||a(n),console.log(n),t.prev=3,t.next=6,n.id?PQ(i.id,n.id,n):LQ(i.id,n);case 6:c=t.sent,null===o||void 0===o||o(!0,c),Gy.emit(n.id?Ix.JobRoomUpdated:Ix.JobRoomAdded,c),t.next=14;break;case 11:t.prev=11,t.t0=t.catch(3),null===o||void 0===o||o(!1);case 14:case"end":return t.stop()}}),t,null,[[3,11]])})));return function(e){return t.apply(this,arguments)}}(),e.resetFloorSubtype=function(t){var n=e.props,r=n.change,a=n.dispatch;r("flooring_subtype",null),t&&a(FK(t.id))},e.getOptLabel=function(e){return e.name},e.getOptValue=function(e){return e.id},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.initialValues,n=e.dispatch;t.flooring_type&&n(FK(t.flooring_type.id))}},{key:"render",value:function(){var e=this,t=this.props,n=t.handleSubmit,r=t.submitting,o=t.modal,i=t.initialValues,c=void 0===i?{}:i,s=t.floorTypes,l=t.floorSubTypes,u=t.carpetTypes,d=t.carpetAges,p=t.carpetFaceFyber,h=t.underlayTypes,b=t.carpetConstructTypes,f=t.nonRestroableReasons,m=t.formData;return Object(a.jsx)(QIe.Consumer,{children:function(t){var i,j;return Object(a.jsxs)(iTe,{children:[r&&!o&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{id:oTe,onSubmit:n(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:(c.control?"Control ":"")+"Room Name:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"name",placeholder:"Room name",component:yg,type:"text",validate:Dv})})]}),c.control?null:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Total Area (LxWxH):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(Hv.a,{name:"dimensions_length",placeholder:"L",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_width",placeholder:"W",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_height",placeholder:"H",component:yg,type:"number",min:0,step:.01})})]})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Affected Area (LxW):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(Hv.a,{name:"dimensions_affected_length",placeholder:"L",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_affected_width",placeholder:"W",component:yg,type:"number",min:0,step:.01})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Floor Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"flooring_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:s||[],onChange:e.resetFloorSubtype})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Sub-Floor Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"flooring_subtype",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:m.flooring_type&&l[null===(i=m.flooring_type)||void 0===i?void 0:i.id]||[]})})]}),Object(a.jsx)("hr",{}),(null===(j=m.flooring_type)||void 0===j?void 0:j.id)===sRe.FLOOR_TYPE.CARPET?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:u})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Age:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_age",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:d})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Construction Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_construction_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:b})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Carpet Face Fibre:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"carpet_face_fibre",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:p})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"underlay_type",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:h})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Brand and Type:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"underlay_type_note",component:yg})})]})]}):null,Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay Required:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"underlay_required",component:YU,direction:"horizontal",list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],validate:Dv})})]}),"1"===m.underlay_required&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Underlay Measurements (LxW):"})}),Object(a.jsxs)("div",{className:"col p-0 row m-0",children:[Object(a.jsx)("div",{className:"col-4 pl-0",children:Object(a.jsx)(Hv.a,{name:"dimensions_underlay_length",placeholder:"L",component:yg,type:"number",min:0,step:.01})}),Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"dimensions_underlay_width",placeholder:"W",component:yg,type:"number",min:0,step:.01})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Trims Required:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"trims_required",component:YU,direction:"horizontal",list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],validate:Dv})})]}),"1"===m.trims_required&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Type of Trim:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"trim_type",component:yg})})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Restorable:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"restorable",component:YU,direction:"horizontal",list:[{value:"1",label:"Yes"},{value:"0",label:"No"}],validate:Dv})})]}),"0"===m.restorable&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)("label",{className:"pt-2",children:"Non-Restorable Reason:"})}),Object(a.jsx)("div",{className:"col pl-0",children:Object(a.jsx)(Hv.a,{name:"non_restorable_reason",component:xO,isClearable:!0,isSearchable:!0,getOptionLabel:e.getOptLabel,getOptionValue:e.getOptValue,options:f||[]})})]})]})]})]})}})}}]),n}(p.PureComponent),sTe=Object(sg.compose)(Object(b.b)((function(e,t){var n=e.waterForm,r=Object(rj.a)(e,["waterForm"]);return{floorTypes:n.floorTypes,floorSubTypes:n.floorSubTypes,carpetTypes:n.carpetTypes,carpetAges:n.carpetAges,carpetConstructTypes:n.carpetConstructTypes,carpetFaceFyber:n.carpetFaceFyber,underlayTypes:n.underlayTypes,nonRestroableReasons:n.nonRestroableReasons,formData:Object(GM.a)(t.form||oTe)(r)||{}}})),Object(jv.a)({form:oTe,enableReinitialize:!0}))(cTe),lTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!n){t.next=9;break}if(o=e.props,i=o.job,c=o.onClose,s=o.afterSubmit,!r||!r.control||r.outside||(null===(a=e.props.room)||void 0===a?void 0:a.id)){t.next=7;break}return t.next=5,LQ(i.id,{job_id:i.id,job:i,name:"Outside",outside:1,control:1});case 5:l=t.sent,Gy.emit(Ix.JobRoomAdded,l);case 7:null===s||void 0===s||s(r),c();case 9:e.setState({submitting:!1});case 10:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.props,n=t.room,r=t.job;return Object(a.jsx)(sTe,{job:r,initialValues:n||{underlay_required:"0",trims_required:"0",restorable:"1"},modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.room,i=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,onClose:r,loading:i,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add a new")+" "+((null===o||void 0===o?void 0:o.control)?"control":"affected")+" room",body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:oTe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent),uTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props.job;return Object(a.jsxs)("div",{children:[e&&Object(a.jsx)(lTe,{onClose:this.hideModal,isOpen:!0,job:t,room:{control:1}}),Object(a.jsx)("h4",{className:"text-center",children:" First things first..."}),Object(a.jsx)("p",{className:"text-center mt-4",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal,children:"Add control room"})})]})}}]),n}(p.PureComponent),dTe="WTAER_FORMS_MOISTURE_READING_FORM",pTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.job,o=r.beforeSubmit,i=r.afterSubmit,s=r.reset,l=r.modal,null===o||void 0===o||o(n),t.prev=2,t.next=5,n.id?zQ(a.id,n.id,n):qQ(a.id,Object(c.a)(Object(c.a)({},n),{},{job_id:a.id}));case 5:return u=t.sent,null===i||void 0===i||i(!0,u),l||(n.id?Gy.emit(Ix.JobRoomAreaUpdated,u):Gy.emit(Ix.JobRoomAreaAdded,[u])),s(),t.abrupt("return",u);case 12:return t.prev=12,t.t0=t.catch(2),null===i||void 0===i||i(!1,n),t.abrupt("return",ix(t.t0));case 16:case"end":return t.stop()}}),t,null,[[2,12]])})));return function(e){return t.apply(this,arguments)}}(),e.form=h.a.createRef(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props.initialValues;t.surface_type_id&&(null===(e=document.getElementById("surface_type_id_"+t.surface_type_id))||void 0===e||e.scrollIntoView())}},{key:"render",value:function(){var e=this,t=this.props,n=t.surfaceTypes,r=t.handleSubmit,o=t.submitting,i=t.modal;return Object(a.jsx)(QIe.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[o&&!i&&Object(a.jsx)(Nv,{size:40}),(null===n||void 0===n?void 0:n.length)?Object(a.jsxs)("form",{id:dTe,onSubmit:r(e.onSubmit),ref:e.form,children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsx)(Hv.a,{name:"surface_type_id",validate:Dv,component:YU,direction:"vertical",list:(null===n||void 0===n?void 0:n.map((function(e){return{value:e.id+"",label:e.name}})))||[]})]}):Object(a.jsx)("div",{className:"alert alert-primary m-0",children:"Surface types must be added before surface areas can be taken."})]})}})}}]),n}(p.PureComponent),hTe=Object(sg.compose)(Object(b.b)((function(e){return{surfaceTypes:e.waterForm.surfaceTypes}})),Object(jv.a)({form:dTe,enableReinitialize:!0}))(pTe);function bTe(){var e=Object(f.a)(["\n  .invalid-feedback{position:absolute;top:-25px;}\n  .form-group{margin:0;}\n  .radio-list-item-wrapper{width:100%;margin:0;padding:.5rem 1.25em;}\n  .radio-list-item-wrapper:not(:last-child){border-bottom: 1px solid ",";}\n  .radio-list-item-wrapper{cursor: pointer;}\n  .radio-list-item-wrapper:hover{background-color: ",";}\n  .radio-list-item-wrapper.checked{background-color: ",";}\n"]);return bTe=function(){return e},e}var fTe=y.default.div(bTe(),_.gray2,_.gray0,_.green3),mTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).savedAreas=[],e.state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(t,n){if(e.setState({submitting:!1}),t){var r=e.props,a=r.area,o=r.onClose;(null===a||void 0===a?void 0:a.id)?(Gy.emit(Ix.JobRoomAreaUpdated,n),o()):(e.savedAreas.push(n),e.forceUpdate())}},e.renderModalBody=function(t){return Object(a.jsx)("div",{className:"card",children:Object(a.jsx)("div",{className:"card-body p-0",children:Object(a.jsx)(fTe,{children:Object(a.jsx)(hTe,{job:e.props.job,initialValues:t,modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})})})})},e.onClose=function(){var t=e.props.onClose;e.savedAreas.length&&Gy.emit(Ix.JobRoomAreaAdded,e.savedAreas),e.savedAreas=[],t()},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.moistureAreas,n=e.area,r=e.isOpen,o=e.title,i=this.state.submitting,s=null===n||void 0===n?void 0:n.name;if(!n)if((null===t||void 0===t?void 0:t.length)||this.savedAreas.length){var l=j()((t||[]).concat(this.savedAreas)).sortBy("name").last().name;s=String.fromCharCode(l.charCodeAt(0)+1)}else s="A";return Object(a.jsx)(qO,{isOpen:r,children:Object(a.jsx)(cg,{onClose:this.onClose,loading:i,title:o||(n?"Edit":"Add a new")+" surface area: "+s,body:this.renderModalBody(Object(c.a)(Object(c.a)({},n),{},{name:s})),scrollY:!0,closeCaption:"Done",footer:Object(a.jsx)("button",{type:"submit",form:dTe,className:"btn btn-primary",children:(null===n||void 0===n?void 0:n.id)?"Save":"Save & Add New"})})})}}]),n}(p.PureComponent),jTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.showModal=function(){e.setState({showModal:!0})},e.hideModal=function(){e.setState({showModal:!1})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.showModal,t=this.props,n=t.job,r=t.locked;return Object(a.jsxs)("div",{className:"print-hide",children:[e&&Object(a.jsx)(mTe,{onClose:this.hideModal,isOpen:!0,job:n,moistureAreas:[]}),Object(a.jsx)("h4",{className:"text-center",children:"Next, let's setup your control surface areas."}),Object(a.jsx)("p",{className:"text-center mt-4",children:!r&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal,children:"Add areas"})})]})}}]),n}(p.PureComponent),vTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.readings=[],e.submitAllForms=function(){e.setState({submitting:!0}),e.readings=[];var t=[],n=e.props,r=n.job,a=n.dispatch,o=n.moistureAreas,i=n.onClose;t.push(a(Object(Wv.c)($Ie))),null===o||void 0===o||o.forEach((function(e){t.push(a(Object(Wv.c)(KIe+e.id)))})),Promise.all(t).then(Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.content.current.getElementsByClassName("invalid-feedback").length){t.next=13;break}return t.prev=2,t.next=5,Promise.all(e.readings.map((function(e){return VQ(r.id,e)})));case 5:n=t.sent,i(),Gy.emit(Ix.JobReadingsAdded,n),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(2),console.log(t.t0);case 13:e.setState({submitting:!1});case 14:case"end":return t.stop()}}),t,null,[[2,10]])}))))},e.onSubmitReading=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:(n.mc||n.rh&&n.temp)&&e.readings.push(n);case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.content=h.a.createRef(),e.initialValues={group_at:pm()()},e.renderModalBody=function(){var t=e.props,n=t.job,r=t.room,o=t.moistureReading,i=t.airReading,s=t.moistureAreas;return Object(a.jsxs)("div",{ref:e.content,children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Air Readings"})}),Object(a.jsx)(tTe,{job:n,form:$Ie,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),i),{},{job_room_id:null===r||void 0===r?void 0:r.id}),modal:!0,onSubmit:e.onSubmitReading}),Object(a.jsx)("hr",{}),Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Moisture Readings"})}),(null===s||void 0===s?void 0:s.length)?s.map((function(t){return Object(a.jsx)(XIe,{job:n,form:KIe+t.id,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),o),{},{job_moisture_area_id:t.id,job_room_id:null===r||void 0===r?void 0:r.id}),moistureArea:t,modal:!0,onSubmit:e.onSubmitReading})})):Object(a.jsx)("div",{className:"alert alert-primary",children:"Room areas must be added from the control tab before moisture readings can be taken."})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.room,i=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,onClose:r,loading:i,title:n||"Add a new reading"+(o?": "+o.name:""),body:this.renderModalBody(),footer:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.submitAllForms,children:"Save"})})})}}]),n}(p.PureComponent),OTe=Object(sg.compose)(Object(b.b)())(vTe),gTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).timeAgo=function(){return pm()(e.props.date).fromNow()},e.setTimeAgo=function(){e.setState({dateStr:e.timeAgo()})},e.state={dateStr:e.timeAgo()},e.intervalId=null,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.intervalId=setInterval(this.setTimeAgo,2e4)}},{key:"componentWillUnmount",value:function(){clearInterval(this.intervalId)}},{key:"render",value:function(){var e=this.state.dateStr,t=this.props.date;return Object(a.jsx)("span",{title:pm()(t).format(lv),children:e})}}]),n}(p.PureComponent),xTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={gridState:{data:e.props.data||[],scrollable:"none",sortable:!1}},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.data!==this.props.data){var t=this.state.gridState;t.data=this.props.data,this.setState({gridState:Object(c.a)({},t)})}}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.color,r=e.readings;e.locked;return Object(a.jsxs)("div",{className:"card".concat(n?" card-".concat(n):""),children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("strong",{children:t||"Air Reading"})}),Object(a.jsx)("div",{className:"card-body",children:this.state.gridState.data.length?Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{children:[Object(a.jsx)(F_.b,{field:"group_at",title:"Taken",cell:function(e){return Object(a.jsx)("td",{children:Object(a.jsx)(gTe,{date:e.dataItem.group_at})})}}),Object(a.jsx)(F_.b,{field:"rh",title:"R/H %",cell:function(e){var t,n,o,i,c,s,l,u,d;return Object(a.jsxs)("td",{children:[null===(t=+e.dataItem.rh)||void 0===t?void 0:t.toFixed(2),"%",(null===r||void 0===r||null===(n=r.controlRoom)||void 0===n?void 0:n.air)?Object(a.jsxs)("span",{className:"badge badge-primary ml-2",children:[(null===(o=+(null===r||void 0===r||null===(i=r.controlRoom)||void 0===i||null===(c=i.air)||void 0===c?void 0:c.rh))||void 0===o?void 0:o.toFixed(2))||"--","%"]}):null,(null===r||void 0===r||null===(s=r.outsideRoom)||void 0===s?void 0:s.air)?Object(a.jsxs)("span",{className:"badge badge-success ml-2",children:[(null===(l=+(null===r||void 0===r||null===(u=r.outsideRoom)||void 0===u||null===(d=u.air)||void 0===d?void 0:d.rh))||void 0===l?void 0:l.toFixed(2))||"--","%"]}):null]})}}),Object(a.jsx)(F_.b,{field:"temp",title:"Temp.",cell:function(e){var t,n,o,i,c,s,l,u,d;return Object(a.jsxs)("td",{children:[null===(t=+e.dataItem.temp)||void 0===t?void 0:t.toFixed(2),(null===r||void 0===r||null===(n=r.controlRoom)||void 0===n?void 0:n.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(o=+(null===r||void 0===r||null===(i=r.controlRoom)||void 0===i||null===(c=i.air)||void 0===c?void 0:c.temp))||void 0===o?void 0:o.toFixed(2))||"--"}):null,(null===r||void 0===r||null===(s=r.outsideRoom)||void 0===s?void 0:s.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(l=+(null===r||void 0===r||null===(u=r.outsideRoom)||void 0===u||null===(d=u.air)||void 0===d?void 0:d.temp))||void 0===l?void 0:l.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(F_.b,{field:"gpk",title:"GPK",cell:function(e){var t,n,o,i,c;return Object(a.jsxs)("td",{children:[null===(t=TQ(e.dataItem))||void 0===t?void 0:t.toFixed(2),(null===r||void 0===r||null===(n=r.controlRoom)||void 0===n?void 0:n.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(o=TQ(r.controlRoom.air))||void 0===o?void 0:o.toFixed(2))||"--"}):null,(null===r||void 0===r||null===(i=r.outsideRoom)||void 0===i?void 0:i.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(c=TQ(r.outsideRoom.air))||void 0===c?void 0:c.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(F_.b,{field:"user",title:"Taken By",cell:function(e){var t;return Object(a.jsx)("td",{children:(null===(t=e.dataItem.user)||void 0===t?void 0:t.full_name)||"unknown"})}})]})):Object(a.jsx)("div",{className:"text-center",children:"No readings have been taken"})})]})}}]),n}(p.PureComponent),yTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(t,n){e.setState({submitting:!1}),t&&e.props.onClose()},e.initialValues={group_at:pm()()},e.renderModalBody=function(){var t=e.props,n=t.reading,r=t.job,o=t.room,i=t.moistureArea;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Moisture Readings"})}),Object(a.jsx)(XIe,{job:r,moistureArea:i,initialValues:Object(c.a)(Object(c.a)(Object(c.a)({},e.initialValues),n),{},{job_room_id:null===o||void 0===o?void 0:o.id}),modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.reading,i=e.room,c=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{onClose:r,loading:c,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add a new")+" reading"+(i?": "+i.name:""),body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:KIe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function _Te(){var e=Object(f.a)(["\n  cursor: pointer;\n  &:hover {\n    text-decoration: underline;\n    color: ",";\n    path{stroke: ",";}\n  }\n"]);return _Te=function(){return e},e}var wTe,STe=y.default.span(_Te(),_.blue2,_.blue2);!function(e){e[e.MOISTURE_AREA=0]="MOISTURE_AREA",e[e.MOISTURE_READING=1]="MOISTURE_READING"}(wTe||(wTe={}));var kTe,CTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).hydrateData=function(t){if(!t)return e.props.allowBlank?[{}]:[];var n=[];return j.a.forEach(t,(function(e,t){n.push({group_at:t,readings:e})})),n},e.state={gridState:{data:e.hydrateData(e.props.data),scrollable:"scrollable",sortable:!1}},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.moistureAreas,i=e.props,s=i.job,l=i.room;switch(n){case wTe.MOISTURE_READING:return Object(a.jsx)(yTe,Object(c.a)({job:s,room:l,onClose:e.hideModal,isOpen:!0},r));case wTe.MOISTURE_AREA:return Object(a.jsx)(mTe,Object(c.a)({job:s,moistureAreas:o,onClose:e.hideModal,isOpen:!0},r))}return null},e.deleteArea=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.job,i=r.dispatch,n.next=3,i(iw("Confirm","Delete Surface Area!",Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete this reading area?"}),Object(a.jsx)("p",{children:"All readings for this area will also be removed."})]})));case 3:if(!n.sent){n.next=13;break}return e.setState({working:!0}),n.prev=6,n.next=9,GQ(o.id,t.id);case 9:Gy.emit(Ix.JobRoomAreaDeleted,t);case 10:return n.prev=10,e.setState({working:!1}),n.finish(10);case 13:case"end":return n.stop()}}),n,null,[[6,,10,13]])})))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.data!==this.props.data){var t=this.state.gridState;t.data=this.hydrateData(this.props.data),this.setState({gridState:Object(c.a)({},t)})}}},{key:"render",value:function(){var e=this,t=this.props,n=t.title,r=t.color,o=t.moistureAreas,i=t.room,s=t.readings,l=t.locked,u=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{className:"card".concat(r?" card-".concat(r):""),children:[u&&Object(a.jsx)(Nv,{size:40}),Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("strong",{children:n||"Moisture Reading"})}),Object(a.jsx)("div",{className:"card-body",children:(null===o||void 0===o?void 0:o.length)?Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{children:[Object(a.jsx)(F_.d,{children:Object(a.jsx)("div",{className:"text-left pl-5 ml-5",children:"No readings have been taken"})}),Object(a.jsx)(F_.b,{field:"id",title:"Taken",width:"200px",cell:function(e){return Object(a.jsx)("td",{children:e.dataItem.group_at?Object(a.jsx)(gTe,{date:e.dataItem.group_at}):null})}}),o.map((function(t){return Object(a.jsx)(F_.b,{width:"130px",headerCell:function(){var n,r;return Object(a.jsxs)("div",{children:[Object(a.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[Object(a.jsx)("strong",{children:t.name}),!l&&i.control&&Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)(STe,{className:"mr-3",children:Object(a.jsx)(z7,{color:_.black0,hoverColor:_.red1,name:Xf.Trash,size:12,onClick:e.deleteArea(t)})}),Object(a.jsx)(STe,{children:Object(a.jsx)(cm,{name:Xf.Pencil,size:12,onClick:e.showModal(wTe.MOISTURE_AREA,{area:Object(c.a)(Object(c.a)({},t),{},{surface_type_id:(null===(n=t.surface_type)||void 0===n?void 0:n.id)+""})})})})]})]}),Object(a.jsx)("div",{className:"text-sm text-wrap",children:(null===(r=t.surface_type)||void 0===r?void 0:r.name)||"Not Set"})]})},headerClassName:"align-top",cell:function(n){var r,o,i,c;return Object(a.jsx)("td",{children:(null===(r=n.dataItem.readings)||void 0===r?void 0:r[t.id])?Object(a.jsxs)("div",{children:[n.dataItem.readings[t.id].mc||"--","%",(null===s||void 0===s||null===(o=s.controlRoom)||void 0===o?void 0:o.moisture)?Object(a.jsxs)("span",{className:"badge badge-warning ml-2",children:[(null===s||void 0===s||null===(i=s.controlRoom)||void 0===i||null===(c=i.moisture[t.id])||void 0===c?void 0:c.mc)||"--","%"]}):null]}):!l&&Object(a.jsx)(STe,{className:"text-primary print-hide",onClick:e.showModal(wTe.MOISTURE_READING,{moistureArea:t,reading:{job_moisture_area_id:t.id,group_at:n.dataItem.group_at||pm()()}}),children:"Add reading"})})}},t.id)}))]})):Object(a.jsx)("div",{className:"text-center",children:"No surface area id added"})})]})]})}}]),n}(p.PureComponent),NTe=Object(sg.compose)(Object(b.b)())(CTe);!function(e){e[e.CONTROL_ROOM=0]="CONTROL_ROOM",e[e.AIR_READING=1]="AIR_READING",e[e.MOISTURE_AREA=2]="MOISTURE_AREA",e[e.MOISTURE_READING=3]="MOISTURE_READING",e[e.COMBINED_READING=4]="COMBINED_READING"}(kTe||(kTe={}));var ETe,ATe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.controlRoom,l=o.moistureAreas;switch(n){case kTe.CONTROL_ROOM:return Object(a.jsx)(lTe,Object(c.a)({job:i,onClose:e.hideModal,isOpen:!0},r));case kTe.MOISTURE_AREA:return Object(a.jsx)(mTe,Object(c.a)({job:i,moistureAreas:l,onClose:e.hideModal,isOpen:!0},r));case kTe.COMBINED_READING:return Object(a.jsx)(OTe,Object(c.a)({job:i,moistureAreas:l,room:s,onClose:e.hideModal,isOpen:!0},r))}return null},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n=this.props,r=n.job,o=n.readings,i=n.controlRoom,c=n.moistureAreas,s=n.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("div",{className:"mb-2 d-flex justify-content-between align-items-center",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("strong",{className:"text-uppercase",children:[i.name," Control Readings"]})}),!s&&Object(a.jsx)("div",{className:"print-hide",children:Object(a.jsxs)(fQ.e,{children:[Object(a.jsx)(fQ.h,{caret:!0,color:"primary",outline:!0,children:"Options"}),Object(a.jsx)(fQ.g,{basic:!0,right:!0,children:Object(a.jsx)(fQ.f,{onClick:this.showModal(kTe.CONTROL_ROOM,{room:i}),children:"Edit Room Details"})})]})})]}),!s&&Object(a.jsxs)("div",{className:"mb-3 print-hide",children:[!((null===(e=o.controlRoom)||void 0===e?void 0:e.air)||(null===(t=o.controlRoom)||void 0===t?void 0:t.moisture))&&Object(a.jsx)(fQ.a,{color:"primary",className:"mr-3",onClick:this.showModal(kTe.COMBINED_READING),children:"Add Reading"}),Object(a.jsx)(fQ.a,{color:"primary",outline:!0,onClick:this.showModal(kTe.MOISTURE_AREA),children:"Add Moisture Surface Area"})]}),i&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xTe,{color:"primary",data:o.air[i.id],locked:s}),Object(a.jsx)("br",{}),Object(a.jsx)(NTe,{color:"warning",moistureAreas:c,data:o.moisture[i.id],allowBlank:!0,job:r,room:i,locked:s})]})]})})]})}}]),n}(p.PureComponent);!function(e){e[e.AIR_READING=0]="AIR_READING"}(ETe||(ETe={}));var ITe,TTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.outsideRoom;switch(n){case ETe.AIR_READING:return Object(a.jsx)(nTe,Object(c.a)({job:i,room:s,onClose:e.hideModal,isOpen:!0},r))}return null},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.outsideRoom,n=e.readings,r=e.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"card-title",children:Object(a.jsx)("strong",{children:"OUTSIDE CONTROL READINGS"})}),Object(a.jsx)("div",{className:"mb-3 print-hide",children:!r&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(ETe.AIR_READING),children:"Add Reading"})}),Object(a.jsx)(xTe,{color:"success",title:"Outside",data:n.air[null===t||void 0===t?void 0:t.id],locked:r})]})})]})}}]),n}(p.PureComponent),RTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlRoom,n=(e.outsideRoom,e.readings),r=e.moistureAreas;return Object(a.jsxs)(nZ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsx)("strong",{children:"Rooms: Control Readings"})}),Object(a.jsx)(nZ,{children:Object(a.jsxs)("div",{className:"pr-4 pb-4",children:[!t&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(uTe,Object(c.a)({},this.props))}),t&&Object(a.jsxs)(a.Fragment,{children:[(null===r||void 0===r?void 0:r.length)?null:Object(a.jsx)(jTe,Object(c.a)({},this.props)),t&&!(null===r||void 0===r?void 0:r.length)&&!n.outsideRoom&&Object(a.jsx)("hr",{className:"mt-5"}),t&&!n.outsideRoom?Object(a.jsx)(rTe,Object(c.a)({},this.props)):null,(null===r||void 0===r?void 0:r.length)?Object(a.jsx)(ATe,Object(c.a)({},this.props)):null,(null===r||void 0===r?void 0:r.length)&&n.outsideRoom?Object(a.jsx)("br",{}):null,n.outsideRoom?Object(a.jsx)(TTe,Object(c.a)({},this.props)):null]})]})})]})}}]),n}(p.PureComponent),DTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.data,t=e.airMovers,n=e.dehums,r=e.preStartCheckClass;return Object(a.jsxs)("div",{className:"d-flex text-uppercase",children:[Object(a.jsx)("div",{className:"alert alert-primary mb-0",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:"Air-Movers"})}),Object(a.jsxs)("div",{className:"ml-5 text-center",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:t.required}),Object(a.jsx)("span",{className:"ml-3",children:"Required"})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:t.installed}),Object(a.jsx)("span",{className:"ml-3",children:"Installed"})]})]})]})}),Object(a.jsx)("div",{className:"ml-3 alert alert-warning mb-0",children:Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsx)("div",{children:Object(a.jsxs)("strong",{children:["De-HUMS (Class ",r,")"]})}),Object(a.jsxs)("div",{className:"ml-5 text-center",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:n.required}),Object(a.jsx)("span",{className:"ml-3",children:"Required"})]}),Object(a.jsx)("br",{}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:n.installed}),Object(a.jsx)("span",{className:"ml-3",children:"Installed"})]})]})]})})]})}}]),n}(p.PureComponent),MTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.nonControlRooms,scrollable:"none",sortable:!1}},e.onRowClick=function(t){var n=t.dataItem,r=e.props,a=r.job,o=r.history,i=r.match.params.job_task_id;o.push("/jobs/".concat(a.id,"/work-order/").concat(i,"/rooms/").concat(n.id))},e.renderRow=function(t,n){var r=e.props.readings,o=n.dataItem;return r.air[o.id]?t:Object(a.jsxs)("tr",Object(c.a)(Object(c.a)({},t.props),{},{children:[Object(a.jsx)("td",{children:o.name}),Object(a.jsx)("td",{colSpan:4,onClick:function(){return e.onRowClick({dataItem:o})},children:Object(a.jsx)("i",{children:"No readings have been taken"})})]}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e){if(e.nonControlRooms!==this.props.nonControlRooms){var t=this.state.gridState;t.data=this.props.nonControlRooms,this.setState({gridState:Object(c.a)({},t)})}}},{key:"render",value:function(){var e=this,t=this.props.readings;return Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{rowRender:this.renderRow,onRowClick:this.onRowClick,children:[Object(a.jsx)(F_.b,{field:"name",title:"Room"}),Object(a.jsx)(F_.b,{field:"rh",title:"R/H %",cell:function(n){var r,o,i,c,s,l,u,d,p,h,b=n.dataItem;Object(rj.a)(n,["dataItem"]);return Object(a.jsxs)("td",{onClick:function(){return e.onRowClick({dataItem:b})},children:[(null===(r=+(null===(o=j.a.last(t.air[b.id]))||void 0===o?void 0:o.rh))||void 0===r?void 0:r.toFixed(2))||"--","%",(null===t||void 0===t||null===(i=t.controlRoom)||void 0===i?void 0:i.air)?Object(a.jsxs)("span",{className:"badge badge-primary ml-2",children:[(null===(c=+(null===t||void 0===t||null===(s=t.controlRoom)||void 0===s||null===(l=s.air)||void 0===l?void 0:l.rh))||void 0===c?void 0:c.toFixed(2))||"--","%"]}):null,(null===t||void 0===t||null===(u=t.outsideRoom)||void 0===u?void 0:u.air)?Object(a.jsxs)("span",{className:"badge badge-success ml-2",children:[(null===(d=+(null===t||void 0===t||null===(p=t.outsideRoom)||void 0===p||null===(h=p.air)||void 0===h?void 0:h.rh))||void 0===d?void 0:d.toFixed(2))||"--","%"]}):null]})}}),Object(a.jsx)(F_.b,{field:"temp",title:"Temp.",cell:function(n){var r,o,i,c,s,l,u,d,p,h,b=n.dataItem;return Object(a.jsxs)("td",{onClick:function(){return e.onRowClick({dataItem:b})},children:[(null===(r=+(null===(o=j.a.last(t.air[b.id]))||void 0===o?void 0:o.temp))||void 0===r?void 0:r.toFixed(2))||"--",(null===t||void 0===t||null===(i=t.controlRoom)||void 0===i?void 0:i.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(c=+(null===t||void 0===t||null===(s=t.controlRoom)||void 0===s||null===(l=s.air)||void 0===l?void 0:l.temp))||void 0===c?void 0:c.toFixed(2))||"--"}):null,(null===t||void 0===t||null===(u=t.outsideRoom)||void 0===u?void 0:u.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(d=+(null===t||void 0===t||null===(p=t.outsideRoom)||void 0===p||null===(h=p.air)||void 0===h?void 0:h.temp))||void 0===d?void 0:d.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(F_.b,{field:"gpk",title:"GPK",cell:function(n){var r,o,i,c,s,l=n.dataItem;return Object(a.jsxs)("td",{onClick:function(){return e.onRowClick({dataItem:l})},children:[null===(r=TQ(j.a.last(t.air[l.id])))||void 0===r?void 0:r.toFixed(2),(null===t||void 0===t||null===(o=t.controlRoom)||void 0===o?void 0:o.air)?Object(a.jsx)("span",{className:"badge badge-primary ml-2",children:(null===(i=TQ(t.controlRoom.air))||void 0===i?void 0:i.toFixed(2))||"--"}):null,(null===t||void 0===t||null===(c=t.outsideRoom)||void 0===c?void 0:c.air)?Object(a.jsx)("span",{className:"badge badge-success ml-2",children:(null===(s=TQ(t.outsideRoom.air))||void 0===s?void 0:s.toFixed(2))||"--"}):null]})}}),Object(a.jsx)(F_.b,{field:"id",title:"Taken By",cell:function(e){var n,r,o=e.dataItem;return Object(a.jsx)("td",{children:(null===(n=j.a.last(t.air[o.id]))||void 0===n||null===(r=n.user)||void 0===r?void 0:r.full_name)||"unknown"})}})]}))}}]),n}(p.PureComponent),LTe=Object(O.g)(MTe),PTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e,t=this.props.nonControlRooms;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"card-title",children:Object(a.jsx)("strong",{children:"LAST READINGS"})}),Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsx)("strong",{children:"Affected Rooms"})}),Object(a.jsx)("div",{className:"card-body",children:Object(a.jsx)(LTe,Object(c.a)({},this.props))})]})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(DTe,{data:{airMovers:{required:j.a.sumBy(t,"params.airMovers.required"),installed:0},dehums:{required:j.a.sumBy(t,"params.dehums.required"),installed:0},preStartCheckClass:null===(e=t[0].params)||void 0===e?void 0:e.preStartCheckClass}})]})}}]),n}(p.PureComponent);!function(e){e[e.ROOM=0]="ROOM",e[e.COMBINED_READING=1]="COMBINED_READING",e[e.AIR_READING=2]="AIR_READING"}(ITe||(ITe={}));var FTe,UTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.history,l=o.controlRoom,u=o.outsideRoom,d=o.moistureAreas,p=o.match.params.job_task_id;switch(n){case ITe.ROOM:return Object(a.jsx)(lTe,Object(c.a)({job:i,onClose:e.hideModal,isOpen:!0,afterSubmit:function(e){s.push("/jobs/".concat(i.id,"/work-order/").concat(p,"/rooms/").concat(e.id))}},r));case ITe.COMBINED_READING:return Object(a.jsx)(OTe,Object(c.a)({job:i,moistureAreas:d,room:l,onClose:e.hideModal,isOpen:!0},r));case ITe.AIR_READING:return Object(a.jsx)(nTe,Object(c.a)({job:i,room:u,onClose:e.hideModal,isOpen:!0},r))}return null},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.moistureAreas,n=e.nonControlRooms,r=e.readings,o=e.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{children:[!(null===t||void 0===t?void 0:t.length)&&Object(a.jsx)(jTe,Object(c.a)({},this.props)),(null===t||void 0===t?void 0:t.length)>0&&(!r.controlRoom||!r.outsideRoom)&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("h4",{className:"text-center",children:["Well done! Now you can add your",!r.controlRoom&&Object(a.jsx)(a.Fragment,{children:" air, moisture"}),!(r.controlRoom||r.outsideRoom)&&Object(a.jsx)(a.Fragment,{children:" and"}),!r.outsideRoom&&Object(a.jsx)(a.Fragment,{children:" outside"}),Object(a.jsx)(a.Fragment,{children:" control readings."})]}),!o&&Object(a.jsxs)("p",{className:"text-center mt-4",children:[!r.controlRoom&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(ITe.COMBINED_READING),children:"Add air/moisture reading"}),!(r.controlRoom||r.outsideRoom)&&Object(a.jsx)("span",{className:"mx-5"}),!r.outsideRoom&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(ITe.AIR_READING),children:"Add outside reading"})]})]}),!(null===n||void 0===n?void 0:n.length)&&r.controlRoom&&r.outsideRoom&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("h4",{className:"text-center",children:"Awesome! You're on a roll, let's add your first affected room."}),!o&&Object(a.jsx)("p",{className:"text-center mt-4",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(ITe.ROOM),children:"Add New Room"})})]}),(null===n||void 0===n?void 0:n.length)>0&&Object(a.jsx)(PTe,Object(c.a)({},this.props))]})]})}}]),n}(p.PureComponent),BTe=Object(O.g)(UTe),VTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.pad=null,e.clearAll=function(){var t;null===(t=e.pad)||void 0===t||t.clear()},e.revert=function(){var t;e.clearAll(),null===(t=e.pad)||void 0===t||t.fromDataURL(e.props.room.floor_plan||"")},e.savePlan=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,r=e.props,a=r.job,o=r.room,i=null===(n=e.pad)||void 0===n?void 0:n._toDataURL(),t.next=6,dK(a.id,o.id,{floor_plan:i,job_task_id:e.taskId});case 6:c=t.sent,o.floor_plan=i||c.floor_plan,Gy.emit(Ix.JobRoomUpdated,o);case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[1,,9,12]])}))),e.taskId=void 0,e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.room,r=t.locked,o=this.state.working;return Object(a.jsx)(QIe.Consumer,{children:function(t){return e.taskId=t.taskId,Object(a.jsxs)("div",{className:"h-100 w-100 d-flex flex-column",children:[o&&Object(a.jsx)(Nv,{size:40}),!r&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(xY,{toolbar:!1,onRender:function(t){e.pad=t,setTimeout(e.revert,1)}})}),Object(a.jsxs)("div",{className:"py-3",children:[Object(a.jsx)("button",{className:"btn btn-primary mr-3",onClick:e.savePlan,children:"Save"}),Object(a.jsx)("button",{className:"btn btn-outline-dark mr-3",onClick:e.revert,disabled:!n.floor_plan,children:"Revert to Last Saved"}),Object(a.jsx)("button",{className:"btn btn-dark",onClick:e.clearAll,children:"Clear All"})]})]}),r&&n.floor_plan&&Object(a.jsx)(a.Fragment,{children:Object(a.jsx)("img",{src:n.floor_plan,alt:"Floor plan",style:{maxHeight:"100%",maxWidth:"100%"}})})]})}})}}]),n}(p.PureComponent),JTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(VTe,Object(c.a)({},this.props))}}]),n}(p.PureComponent),qTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlRoom,n=e.url,r=e.match.params.tab;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto",children:[Object(a.jsxs)(fQ.i,{className:"nav-tabs mr-4",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{exact:!0,className:"nav-link",to:"".concat(n,"/summary"),role:"tab",children:"Overview"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(n,"/floor-plan"),role:"tab",children:"Building Floor Plan"})})]}),Object(a.jsxs)(fQ.k,{activeItem:r,className:"position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:[Object(a.jsx)(fQ.l,{tabId:"summary",role:"tabpanel",children:Object(a.jsx)(BTe,Object(c.a)({},this.props))}),"floor-plan"===r&&Object(a.jsx)(fQ.l,{tabId:"floor-plan",role:"tabpanel",className:"h-100 w-100",children:Object(a.jsx)(JTe,Object(c.a)(Object(c.a)({},this.props),{},{room:t}))})]})]})}}]),n}(p.PureComponent),zTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).RoomsOverviewTabs=function(t){return Object(a.jsx)(qTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),{},{url:e.props.match.url}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.controlRoom,n=e.match.url;return Object(a.jsxs)(nZ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsx)("strong",{children:"Rooms: Overview and Floor Plan"})}),!t&&Object(a.jsx)("div",{className:"mt-4",children:Object(a.jsx)(uTe,Object(c.a)({},this.props))}),t&&Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(n,"/:tab"),component:this.RoomsOverviewTabs}),Object(a.jsx)(O.a,{to:"".concat(n,"/summary")})]})]})}}]),n}(p.PureComponent);!function(e){e[e.ROOM=0]="ROOM",e[e.COMBINED_READING=1]="COMBINED_READING"}(FTe||(FTe={}));var GTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.room,l=o.moistureAreas;switch(n){case FTe.COMBINED_READING:return Object(a.jsx)(OTe,Object(c.a)({job:i,room:s,moistureAreas:l,onClose:e.hideModal,isOpen:!0},r));case FTe.ROOM:return Object(a.jsx)(lTe,Object(c.a)({job:i,room:s,onClose:e.hideModal,isOpen:!0},r))}return null},e.deleteRoom=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,o=n.room,i=n.dispatch,c=n.history,s=n.match.params.job_task_id,t.next=3,i(iw("Confirm","Delete Room!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to delete this room?"})));case 3:if(!t.sent){t.next=16;break}return e.setState({working:!0}),t.prev=6,t.next=9,UQ(r.id,o.id);case 9:c.replace("/jobs/".concat(r.id,"/work-order/rooms/").concat(s)),Gy.emit(Ix.JobRoomDeleted,o),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(6),e.setState({working:!1});case 16:case"end":return t.stop()}}),t,null,[[6,13]])}))),e.onFileInputChange=function(t){var n;(null===(n=t.target.files)||void 0===n?void 0:n.length)>0&&(e.setState({working:!0}),e.uploadPhotos(t.target.files),t.target.value="")},e.uploadPhotos=function(t){var n=[],r=["png","jpeg","jpg"],o=e.props,i=o.job,c=o.room;j.a.forEach(t,(function(e){var t=(e.name.split(".").pop()||"").toLowerCase();if(r.includes(t)){var o=new FormData;o.append("file",e),n.push(RV.uploadPhoto(o).then((function(e){return zy.attachPhoto(i.id,e.data.id,{description:c.name})})))}else Oj(uj.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",t]})," is not supported!"]}))})),0===n.length?e.setState({working:!1}):Promise.all(n).then((function(){Oj(uj.Success,Object(a.jsx)(a.Fragment,{children:"Photos uploaded successfully"}))})).finally((function(){e.setState({working:!1})}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e,t,n,r,o=this.props,i=o.readings,s=o.room,l=o.job,u=o.moistureAreas,d=o.locked,p=this.state.working;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)("div",{children:[p&&Object(a.jsx)(Nv,{size:40}),i.air[s.id]||i.moisture[s.id]?null:Object(a.jsxs)("div",{className:"print-hide",children:[Object(a.jsx)("h4",{className:"text-center",children:"We haven't got any readings for this room yet."}),Object(a.jsx)("p",{className:"text-center mt-3",children:!d&&Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(FTe.COMBINED_READING),children:"Add reading"})}),Object(a.jsx)("hr",{})]}),!d&&Object(a.jsx)("div",{className:"d-flex justify-content-between mb-4 print-hide",children:Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsxs)("div",{className:"d-flex justify-content-end",children:[Object(a.jsxs)("label",{className:"btn btn-outline-primary mb-0",children:["Upload Photos",Object(a.jsx)("input",{type:"file",multiple:!0,className:"d-none",onChange:this.onFileInputChange})]}),Object(a.jsx)("button",{className:"btn btn-primary ml-2",onClick:this.showModal(FTe.ROOM,{room:(r=s,Object(c.a)(Object(c.a)({},r),{},{trims_required:r.trims_required?"1":"0",underlay_required:r.underlay_required?"1":"0",restorable:r.restorable?"1":"0"}))}),children:"Edit Room Details"}),Object(a.jsx)("button",{className:"btn btn-danger ml-2",onClick:this.deleteRoom,children:"Delete Room"})]})})}),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Dimensions (L x W x H):"}),Object(a.jsx)("div",{className:"col",children:s.dimensions_length&&s.dimensions_width&&s.dimensions_height?Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s.dimensions_length.toFixed(1),"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_width.toFixed(1),"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_height.toFixed(1),"m"]})]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Affected Area (L x W):"}),Object(a.jsx)("div",{className:"col",children:s.dimensions_affected_length&&s.dimensions_affected_width?Object(a.jsxs)("div",{children:[Object(a.jsxs)("span",{children:[s.dimensions_affected_length.toFixed(1),"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_affected_width.toFixed(1),"m"]})]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Restorable:"}),Object(a.jsx)("div",{className:"col",children:s.restorable?Object(a.jsx)("span",{children:"Yes"}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"No"}),s.non_restorable_reason&&Object(a.jsxs)("span",{className:"ml-3",children:["( ",s.non_restorable_reason.name," )"]})]})})]})]}),Object(a.jsx)("hr",{}),Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Floor Type:"}),Object(a.jsx)("div",{className:"col",children:s.flooring_type?Object(a.jsx)("span",{children:s.flooring_type.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Sub-Floor Type:"}),Object(a.jsx)("div",{className:"col",children:s.flooring_subtype?Object(a.jsx)("span",{children:s.flooring_subtype.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]})]}),Object(a.jsx)("hr",{}),(null===(e=s.flooring_type)||void 0===e?void 0:e.id)===sRe.FLOOR_TYPE.CARPET?Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Carpet Type:"}),Object(a.jsx)("div",{className:"col",children:s.carpet_type?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:s.carpet_type.name})," ( Age: ",(null===(t=s.carpet_age)||void 0===t?void 0:t.name)||"N/A"," )"]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Carpet Construction Type:"}),Object(a.jsx)("div",{className:"col",children:s.carpet_construction_type?Object(a.jsx)(a.Fragment,{children:s.carpet_construction_type.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-3",children:"Carpet Face Type:"}),Object(a.jsx)("div",{className:"col",children:s.carpet_face_fibre?Object(a.jsx)(a.Fragment,{children:s.carpet_face_fibre.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}),Object(a.jsx)("hr",{})]}):null,Object(a.jsxs)("section",{children:[(null===(n=s.flooring_type)||void 0===n?void 0:n.id)===sRe.FLOOR_TYPE.CARPET?Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Underlay Type:"}),Object(a.jsx)("div",{className:"col",children:s.underlay_type?Object(a.jsx)(a.Fragment,{children:s.underlay_type.name}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}):null,Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Underlay Required (L x W):"}),Object(a.jsx)("div",{className:"col",children:s.underlay_required?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Yes"}),Object(a.jsx)("span",{className:"ml-3",children:s.dimensions_underlay_length&&s.dimensions_underlay_width?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[s.dimensions_underlay_length,"m"]}),Object(a.jsx)("span",{className:"mx-2",children:"x"}),Object(a.jsxs)("span",{children:[s.dimensions_underlay_width,"m"]})]}):Object(a.jsx)(a.Fragment,{children:"N/A"})})]}):Object(a.jsx)(a.Fragment,{children:"No"})})]}),Object(a.jsxs)("div",{className:"row mb-3",children:[Object(a.jsx)("div",{className:"col-3",children:"Trims Required:"}),Object(a.jsx)("div",{className:"col",children:s.trims_required?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("span",{children:"Yes"}),Object(a.jsx)("span",{className:"ml-3",children:s.trim_type||"N/A"})]}):Object(a.jsx)(a.Fragment,{children:"No"})})]})]})]})}),Object(a.jsx)("br",{}),Object(a.jsx)(DTe,{data:s.params}),i.air[s.id]||i.moisture[s.id]?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)("div",{className:"card",children:Object(a.jsxs)("div",{className:"card-body",children:[Object(a.jsx)("div",{className:"card-title",children:Object(a.jsx)("strong",{children:"AFFECTED READINGS"})}),!d&&Object(a.jsx)("div",{className:"d-flex mb-3",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal(FTe.COMBINED_READING),children:"Add Reading"})}),Object(a.jsx)(xTe,{locked:d,data:i.air[s.id]||[],readings:i,title:"Air Readings"}),u.length?Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("br",{}),Object(a.jsx)(NTe,{locked:d,data:i.moisture[s.id],readings:i,title:"Moisture Readings",job:l,room:s,moistureAreas:u})]}):null]})})]}):null]})]})}}]),n}(p.PureComponent),WTe=Object(sg.compose)(Object(b.b)())(GTe);function HTe(){var e=Object(f.a)(["\n  .checkbox-list-wrapper{max-height:unset; overflow:unset;}\n  .card .invalid-feedback{position:absolute;top:-20px;}\n  .card:not(.idx-0) .invalid-feedback{display:none !important;}\n  .form-group{margin:0;}\n  .checkbox-item{width:100%;margin:0;padding: .5rem 1.25em;}\n  .checkbox-item:not(:last-child){border-bottom: 1px solid ",";}\n  .checkbox-item{cursor: pointer;}\n  .checkbox-item:hover{background-color: ",";}\n  .checkbox-item.checked{background-color: ",";}\n  textarea{height: calc(1.5em + .75rem + 2px); resize: none;}\n"]);return HTe=function(){return e},e}var YTe,QTe="WTAER_FORMS_ROOM_WORKS_FORM",KTe=y.default.form(HTe(),_.gray2,_.gray0,_.green3),ZTe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={types:[],works:{},worksFiltered:{},selected:[]},e.loadWorks=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,t.next=4,lK(r,n);case 4:a=t.sent.data,o=j()(a).uniqBy("work_type_id").map("work_type").sortBy("position").value(),i=j()(a).sortBy(["other","work_category.position","position"]).groupBy("work_type_id").value(),(c=j.a.find(o,{name:"General"}))&&0===j.a.reject(i[c.id],"other").length&&(o=j.a.reject(o,c),delete i[c.id]),e.setState({types:o,works:i,worksFiltered:i});case 10:return t.prev=10,e.setState({working:!1}),t.finish(10);case 13:case"end":return t.stop()}}),t,null,[[1,,10,13]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p,h,b,f;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.props,a=r.beforeSubmit,o=r.afterSubmit,i=r.job,c=r.room,s=r.category,l=e.state,u=l.selected,d=l.works,null===a||void 0===a||a(n),t.prev=3,!u.length){t.next=16;break}return p=j()(d).flatMap().flatten().keyBy((function(e){return e._id||e.id})).value(),h=[],b=null,j.a.forEach(u,(function(e){!(b=p[e])||b.other&&!b.custom||h.push({id:b.id,custom:b.custom})})),t.next=11,rK(i.id,null===c||void 0===c?void 0:c.id,{job_task_id:n.job_task_id,work_category_id:s.id,works:h});case 11:f=t.sent,null===o||void 0===o||o(!0,f),Gy.emit(Ix.JobWorkAdded,[c,f]),t.next=22;break;case 16:if(null===o||void 0===o||o(!1),!j.a.isEmpty(d)){t.next=21;break}return t.abrupt("return",Promise.reject(new ax.a({service:"No work found for this service"})));case 21:return t.abrupt("return",Promise.reject(new ax.a({work_id:"This field is required"})));case 22:t.next=27;break;case 24:t.prev=24,t.t0=t.catch(3),null===o||void 0===o||o(!1);case 27:return t.abrupt("return",!0);case 28:case"end":return t.stop()}}),t,null,[[3,24]])})));return function(e){return t.apply(this,arguments)}}(),e.cards={},e.onCustomWorkUpdate=function(t){return function(n){var r,a=n.currentTarget.value;t.custom=a;var o=e.state,i=o.works,s=o.selected,l=j.a.find(i[(null===(r=t.work_type)||void 0===r?void 0:r.id)||t.work_type],(function(e){return e.other&&e.work_category_id===t.work_category_id&&!e.custom&&e!==t}));if(a.trim()){if(!l){var u,d,p=j.a.cloneDeep(t);p.custom="",p._id=Date.now(),i[(null===(u=t.work_type)||void 0===u?void 0:u.id)||t.work_type].splice(j.a.indexOf(i[(null===(d=t.work_type)||void 0===d?void 0:d.id)||t.work_type],t)+1,0,p)}-1===j.a.indexOf(s,t._id||t.id)&&s.push(t._id||t.id)}else{if(l){var h,b;i[(null===(h=t.work_type)||void 0===h?void 0:h.id)||t.work_type].splice(j.a.indexOf(i[(null===(b=t.work_type)||void 0===b?void 0:b.id)||t.work_type],l),1);var f=j.a.indexOf(s,l._id||l.id);f>-1&&s.splice(f,1)}var m=j.a.indexOf(s,t._id||t.id);m>-1&&s.splice(m,1)}e.setState({works:Object(c.a)({},i),selected:s}),e.props.change("work_id",s)}},e.workLabel=function(t){var n=e.props.category;return t.other?Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("strong",{className:"mr-3",children:[t.name,t.work_category.id!==n.id&&Object(a.jsxs)(a.Fragment,{children:[" (",t.work_category.name,")"]}),":"]}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)("textarea",{className:"form-control",value:t.custom||"",onChange:e.onCustomWorkUpdate(t)})})]}):Object(a.jsxs)(a.Fragment,{children:[t.name,t.work_category.id!==n.id&&Object(a.jsxs)(a.Fragment,{children:[" (",t.work_category.name,")"]})]})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e,t=this.props,n=t.special,r=(t.job,t.category),a=t.services,o=t.initialValues,i=t.change;(this.loadWorks(void 0,r.id),n)||(null===o||void 0===o||null===(e=o.service)||void 0===e?void 0:e.id)&&!o.service.name&&a.length&&i("service",j.a.find(a,{id:o.service.id}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.special,r=t.handleSubmit,o=t.change,i=t.submitting,c=t.modal,s=t.services,l=this.state,u=l.working,d=l.types,p=l.works,h=l.worksFiltered;return Object(a.jsx)(QIe.Consumer,{children:function(t){return Object(a.jsxs)(a.Fragment,{children:[(i&&!c||u)&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)(KTe,{id:QTe,onSubmit:r(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsxs)("div",{className:"d-flex mb-4",children:[Object(a.jsx)(Hv.a,{name:"search",component:yg,className:"flex-grow-1",placeholder:"Search by item",onChange:function(t){var n=t.target.value;if(n){var r=new RegExp(n.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&"),"i"),a={};j.a.forEach(p,(function(e,t){a[t]=e.filter((function(e){return e.name.match(r)}))})),e.setState({worksFiltered:a})}else e.setState({worksFiltered:p})}}),!n&&Object(a.jsx)("div",{className:"col-4 pr-0",children:Object(a.jsx)(Hv.a,{name:"service",component:xO,placeholder:"Service",options:s||[],getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return e.name},onChange:function(t){o("search",""),o("work_id",null),e.loadWorks(null===t||void 0===t?void 0:t.id)}})})]}),d.length>1&&Object(a.jsx)("div",{className:"d-flex",children:d.map((function(t,n){return t&&h[t.id].length?Object(a.jsx)("div",{className:"mr-3 mb-3 text-primary cursor-pointer",onClick:function(){var n;return null===(n=e.cards[t.id])||void 0===n?void 0:n.scrollIntoView()},children:t.name},t.id):null}))}),d.map((function(t,n){var r;return(null===(r=h[(null===t||void 0===t?void 0:t.id)||t])||void 0===r?void 0:r.length)?Object(a.jsxs)("div",{className:"card mb-3 idx-".concat(n),ref:function(n){return e.cards[null===t||void 0===t?void 0:t.id]=n},children:[t&&Object(a.jsx)("div",{className:"card-header",children:t.name}),Object(a.jsx)("div",{className:"card-body p-0",children:Object(a.jsx)(Hv.a,{name:"work_id",component:vke,list:h[(null===t||void 0===t?void 0:t.id)||t].map((function(t){return{label:e.workLabel(t),id:t._id||t.id}})),validate:Dv,onChange:function(t){return e.setState({selected:Object(aj.a)(t)})}})})]},(null===t||void 0===t?void 0:t.id)||n):null})),!u&&j.a.isEmpty(h)&&Object(a.jsx)("div",{className:"text-center text-gray",children:"There are no works in the chosen service. Please select another service."})]})]})}})}}]),n}(p.PureComponent),XTe=Object(sg.compose)(Object(b.b)((function(e){return{services:e.waterForm.services}})),Object(jv.a)({form:QTe,enableReinitialize:!0}))(ZTe),$Te=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&(a=e.props,o=a.afterSubmit,(0,a.onClose)(),null===o||void 0===o||o(r)),e.setState({submitting:!1});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t,n=e.props,r=n.special,o=n.job,i=n.room,c=n.category;return Object(a.jsx)(XTe,{job:o,room:i,special:r,category:c,initialValues:{service:{id:null===(t=o.service)||void 0===t?void 0:t.service_id,name:""}},modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.room,i=e.category,c=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,style:{minHeight:"300px"},onClose:r,loading:c,title:n||Object(a.jsxs)(a.Fragment,{children:["Add ",Object(a.jsx)("em",{children:i.name})," Works",o&&Object(a.jsxs)(a.Fragment,{children:["to ",o.name]})]}),body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:QTe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function eRe(){var e=Object(f.a)(["\n  cursor: pointer;\n  :not(:last-child){\n    margin-right: .5rem\n  }\n"]);return eRe=function(){return e},e}function tRe(){var e=Object(f.a)(["\n  width:100%;margin:0;padding: .5rem 1.25em;\n  &:not(:last-child){border-bottom: 1px solid ",";}\n  &.completed{background-color: ",";}\n"]);return tRe=function(){return e},e}!function(e){e[e.ROOM_WORK=0]="ROOM_WORK"}(YTe||(YTe={}));var nRe=y.default.div(tRe(),_.gray2,_.green3),rRe=y.default.span(eRe()),aRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={groups:[],categories:[],works:{},showCompleted:{}},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.special,s=o.job,l=o.room;switch(n){case YTe.ROOM_WORK:return Object(a.jsx)($Te,Object(c.a)(Object(c.a)({job:s,room:l,onClose:e.hideModal,isOpen:!0},r),{},{special:i,afterSubmit:function(){return e.loadWorks(e.state.categories)}}))}return null},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props,r=n.special,a=n.service,o=n.job,i=n.works,!r){t.next=12;break}return e.setState({working:!0}),i&&e.setState({works:i}),t.next=6,e.loadCategories(a.id,{job_id:o.id});case 6:return c=t.sent,t.next=9,Promise.all([i?Promise.resolve():e.loadWorks(c),e.loadWorkGroups(a.id)]);case 9:e.setState({working:!1}),t.next=15;break;case 12:e.loadCategories(o.service.service_id),e.loadWorks(),e.loadWorkGroups(o.service.service_id);case 15:case"end":return t.stop()}}),t)}))),e.loadCategories=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,nK(n,r);case 2:return a=t.sent,e.setState({categories:j.a.sortBy(a,"position")}),t.abrupt("return",a);case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.loadWorks=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.room,o=r.exclusion,e.setState({working:!0}),t.prev=2,i=e.props.job,t.next=6,oK(i.id,(null===a||void 0===a?void 0:a.id)||null,{work_category_id:j.a.map(n,"id")});case 6:c=t.sent.data,e.setState({works:j.a.groupBy(c,(function(e){var t;return e.work_category_id||(null===(t=e.work)||void 0===t?void 0:t.work_category_id)}))}),o&&Gy.emit(Ix.JobWorkLoaded,{exclusion:c});case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:case"end":return t.stop()}}),t,null,[[2,,9,12]])})));return function(e){return t.apply(this,arguments)}}(),e.loadWorkGroups=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props.room,t.next=3,uK(n,null===a||void 0===a||null===(r=a.flooring_type)||void 0===r?void 0:r.id,{check_work_empty:1});case 3:return o=t.sent.data,e.setState({groups:o}),t.abrupt("return",o);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.deleteWorks=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,o,i,c,s,l;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.dispatch,i=r.job,c=r.room,s=r.exclusion,n.next=3,o(iw("Confirm","Delete All Works!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete all works from ",Object(a.jsx)("strong",{children:t.name}),"?"]})));case 3:if(!n.sent){n.next=17;break}return e.setState({working:!0}),n.prev=6,l=e.state.works,n.next=10,cK(i.id,j.a.map(l[t.id],"id"),null===c||void 0===c?void 0:c.id);case 10:delete l[t.id],e.setState({works:l}),Gy.emit(Ix.JobWorkDeleted,c),s&&Gy.emit(Ix.JobWorkLoaded,{exclusion:[]});case 14:return n.prev=14,e.setState({working:!1}),n.finish(14);case 17:case"end":return n.stop()}}),n,null,[[6,,14,17]])})))},e.deleteWork=function(t,n){return Object(lj.a)(sj.a.mark((function r(){var o,i,c,s,l,u,d;return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return o=e.props,i=o.dispatch,c=o.job,s=o.room,l=o.exclusion,r.next=3,i(iw("Confirm","Delete Work!",Object(a.jsxs)(a.Fragment,{children:["Are you sure you want to delete this work from ",Object(a.jsx)("strong",{children:t.name}),"?"]})));case 3:if(!r.sent){r.next=16;break}return e.setState({working:!0}),r.prev=6,r.next=9,iK(c.id,n.id,null===s||void 0===s?void 0:s.id);case 9:u=e.state.works,(d=j.a.findIndex(u[t.id],{id:n.id}))>-1&&(u[t.id].splice(d,1),u[t.id].length||delete u[t.id],e.setState({works:u}),l&&Gy.emit(Ix.JobWorkLoaded,{exclusion:u[t.id]})),Gy.emit(Ix.JobWorkDeleted,s);case 13:return r.prev=13,e.setState({working:!1}),r.finish(13);case 16:case"end":return r.stop()}}),r,null,[[6,,13,16]])})))},e.cloneWorkToRoom=function(t,n,r){return Object(lj.a)(sj.a.mark((function a(){var o,i;return sj.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return e.setState({working:!0}),a.prev=1,o=e.props.job,a.next=5,rK(o.id,r.id,{job_task_id:e.taskId,work_category_id:t.id,works:[{id:n.work.id,custom:n.work_custom}]});case 5:i=a.sent,Gy.emit(Ix.JobWorkAdded,[r,i]);case 7:return a.prev=7,e.setState({working:!1}),a.finish(7);case 10:case"end":return a.stop()}}),a,null,[[1,,7,10]])})))},e.cloneWorksToRoom=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),n.prev=1,r=e.props,a=r.room,o=r.job,n.next=5,sK(o.id,a.id,t.id,{job_task_id:e.taskId});case 5:Gy.emit(Ix.JobWorkAdded,[t]);case 6:return n.prev=6,e.setState({working:!1}),n.finish(6);case 9:case"end":return n.stop()}}),n,null,[[1,,6,9]])})))},e.addWorksGroup=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(!(null===(r=t.works)||void 0===r?void 0:r.length)){n.next=11;break}return e.setState({working:!0}),n.prev=2,a=e.props,o=a.job,i=a.room,n.next=6,Promise.all(j()(t.works).groupBy("work_category_id").mapValues((function(t,n){return rK(o.id,null===i||void 0===i?void 0:i.id,{job_task_id:e.taskId,work_category_id:n,works:j.a.map(t,(function(e){return{id:e.id}}))})})).values().value());case 6:e.loadWorks(),Gy.emit(Ix.JobWorkAdded,[i]);case 8:return n.prev=8,e.setState({working:!1}),n.finish(8);case 11:case"end":return n.stop()}}),n,null,[[2,,8,11]])})))},e.markWorkAsComplete=function(t,n){return Object(lj.a)(sj.a.mark((function r(){var a,o,i,s;return sj.a.wrap((function(r){for(;;)switch(r.prev=r.next){case 0:return e.setState({working:!0}),a=e.state.works,o=j.a.findIndex(a[t.id],{id:n.id}),r.prev=3,i=e.props.job,r.next=7,aK(i.id,n.id,{completed:!0,completed_at:pm()().format(ov)});case 7:s=r.sent,o>-1&&(n.completed=s.completed,n.completed_at=s.completed_at,n.completed_now=!0,a[t.id][o]=n,e.setState({works:a})),Gy.emit(Ix.JobWorkUpdated,n.job_room_id?{id:n.job_room_id}:null);case 10:return r.prev=10,e.setState({working:!1}),setTimeout((function(){delete n.completed_now,a[t.id][o]=n,e.setState({works:Object(c.a)({},a)})}),1500),r.finish(10);case 14:case"end":return r.stop()}}),r,null,[[3,,10,14]])})))},e.toggleCompleted=function(t){return function(){var n=e.state.showCompleted;n[t.id]=!n[t.id],e.setState({showCompleted:Object(c.a)({},n)})}},e.onCategoryEdit=function(t){return function(n){var r=n.target.value.trim();r&&(t.job_work_category?e.debouncedUpdateCategory(e.props.job.id,t.job_work_category.id,{name:r,work_category_id:t.id}):e.debouncedCreateCategory(e.props.job.id,{name:r,work_category_id:t.id}))}},e.debouncedCreateCategory=Qv()(zy.createWorkCategory,500),e.debouncedUpdateCategory=Qv()(zy.updateWorkCategory,500),e.taskId=void 0,e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"render",value:function(){var e=this,t=this.state,n=t.working,r=t.categories,o=t.works,i=t.groups,c=t.showCompleted,s=this.props,l=s.special,u=s.exclusion,d=s.room,p=s.nonControlRooms,h=s.locked,b=s.editable;return Object(a.jsx)(QIe.Consumer,{children:function(t){return e.taskId=t.taskId,Object(a.jsxs)(a.Fragment,{children:[e.renderModal(),Object(a.jsxs)("div",{children:[n&&Object(a.jsx)(Nv,{size:40}),!h&&Object(a.jsxs)("div",{className:"print-hide pt-1",children:[!n&&j.a.isEmpty(r)&&j.a.isEmpty(i)&&Object(a.jsx)("p",{className:"text-center",children:"No data available"}),i.map((function(t){return Object(a.jsx)("button",{className:"btn btn-outline-dark mr-2 mb-2",onClick:e.addWorksGroup(t),children:t.name},t.id)})),!l&&p.length>1&&!j.a.isEmpty(o)&&!j.a.isEmpty(r)&&Object(a.jsx)("div",{className:"btn-group mb-2",children:Object(a.jsxs)(fQ.e,{children:[Object(a.jsx)(fQ.h,{caret:!0,color:"primary",outline:!0,className:"position-relative",children:"Copy to"}),Object(a.jsx)(fQ.g,{basic:!0,right:!0,children:p.filter((function(e){return e.id!==d.id})).map((function(t){return Object(a.jsx)(fQ.f,{onClick:e.cloneWorksToRoom(t),children:t.name},t.id)}))})]})})]}),r.map((function(t){var n,r,i,s,f;return Object(a.jsx)("section",{className:"mt-3",children:Object(a.jsxs)("div",{className:"card",children:[Object(a.jsx)("div",{className:"card-header",children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[h||!(null===b||void 0===b?void 0:b.category)?Object(a.jsx)("div",{className:"flex-grow-1",children:(null===(n=t.job_work_category)||void 0===n?void 0:n.name)||t.name}):Object(a.jsx)("div",{className:"flex-grow-1 mr-3",children:Object(a.jsx)("input",{type:"text",className:"form-control editable-label",defaultValue:(null===(i=t.job_work_category)||void 0===i?void 0:i.name)||t.name,onChange:e.onCategoryEdit(t)},(null===(r=t.job_work_category)||void 0===r?void 0:r.name)||t.name)}),Object(a.jsxs)("div",{children:[!u&&(null===(s=o[t.id])||void 0===s?void 0:s.length)?Object(a.jsxs)(rRe,{className:"mr-5 text-primary",onClick:e.toggleCompleted(t),children:[c[t.id]?"Hide":"Show"," Completed"]}):null,!h&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(rRe,{onClick:e.showModal(YTe.ROOM_WORK,{category:t}),children:Object(a.jsx)(z7,{color:_.black0,hoverColor:_.blue4,name:Xf.Add,size:14})}),(null===(f=o[t.id])||void 0===f?void 0:f.length)?Object(a.jsx)(rRe,{onClick:e.deleteWorks(t),children:Object(a.jsx)(z7,{color:_.black0,hoverColor:_.red1,name:Xf.Trash,size:14})}):null]})]})]})}),o[t.id]?Object(a.jsx)("div",{className:"card-body p-0",children:o[t.id].filter((function(e){return c[t.id]||e.completed_now||!e.completed})).map((function(n){var r;return Object(a.jsxs)(nRe,{className:"d-flex".concat(n.completed?" completed":"").concat(!c[t.id]&&n.completed_now?" fade slower":""),children:[!h&&Object(a.jsx)("div",{className:"mr-3",children:n.completed?Object(a.jsx)(z7,{name:Xf.Check,size:14,color:_.green4,title:"Completed"}):!u&&Object(a.jsx)(rRe,{title:"Mark completed",onClick:e.markWorkAsComplete(t,n),children:Object(a.jsx)(z7,{name:Xf.Check,size:14,color:_.black0,hoverColor:_.green0})})}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsxs)("div",{children:[n.work_custom||n.work.name," ",n.work.work_type&&Object(a.jsxs)(a.Fragment,{children:["(",null===(r=n.work.work_type)||void 0===r?void 0:r.name,")"]})," ",n.completed&&Object(a.jsx)("span",{className:"badge badge-info ml-2 text-uppercase",children:"Completed"})]}),Object(a.jsxs)("div",{className:"text-sm text-gray",children:[Object(a.jsxs)("span",{children:["Added: ",pm()(n.created_at).format(iv)]}),",",Object(a.jsx)("span",{className:"ml-2",children:n.user.full_name}),n.completed&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("span",{children:[". Completed: ",pm()(n.completed_at).format(iv)]}),",",Object(a.jsx)("span",{className:"ml-2",children:(n.completed_by_user||n.user).full_name})]})]})]}),Object(a.jsx)("div",{children:!h&&Object(a.jsxs)("div",{className:"d-flex",children:[!l&&p.length>1&&Object(a.jsx)(rRe,{title:"Copy this work to another room",children:Object(a.jsxs)(fQ.e,{children:[Object(a.jsx)(fQ.h,{className:"position-relative",tag:"div",children:Object(a.jsx)(z7,{name:Xf.Duplicate,color:_.black0,hoverColor:_.blue4,fill:!0,size:13})}),Object(a.jsx)(fQ.g,{basic:!0,right:!0,children:p.filter((function(e){return e.id!==d.id})).map((function(r){return Object(a.jsx)(fQ.f,{onClick:e.cloneWorkToRoom(t,n,r),children:r.name},r.id)}))})]})}),Object(a.jsx)(rRe,{onClick:e.deleteWork(t,n),children:Object(a.jsx)(z7,{name:Xf.Trash,color:_.black0,hoverColor:_.red1,size:13})})]})})]},n.id)}))}):null]})},t.id)}))]})]})}})}}]),n}(p.PureComponent),oRe=Object(sg.compose)(Object(b.b)())(aRe),iRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.match.params.tab;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto",children:[Object(a.jsxs)(fQ.i,{className:"nav-tabs mr-4",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/details"),role:"tab",children:"Details & Readings"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/floor-plan"),role:"tab",children:"Floor Plan"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/works"),role:"tab",children:"Scope of Works"})})]}),Object(a.jsxs)(fQ.k,{activeItem:n,className:"position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:[Object(a.jsx)(fQ.l,{tabId:"details",role:"tabpanel",children:Object(a.jsx)(WTe,Object(c.a)({},this.props))}),"floor-plan"===n&&Object(a.jsx)(fQ.l,{tabId:"floor-plan",role:"tabpanel",className:"h-100 w-100",children:Object(a.jsx)(VTe,Object(c.a)({},this.props))}),"works"===n&&Object(a.jsx)(fQ.l,{tabId:"works",role:"tabpanel",children:Object(a.jsx)(oRe,Object(c.a)({},this.props))})]})]})}}]),n}(p.PureComponent),cRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).AffectedRoomTabs=function(t){var n=e.props,r=n.nonControlRooms,o=n.match,i=o.url,s=o.params.room_id,l=j.a.find(r,{id:+s});return Object(a.jsx)(iRe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),{},{room:l,url:i}))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.nonControlRooms,n=e.match,r=n.url,o=n.params.room_id,i=j.a.find(t,{id:+o});return i?Object(a.jsxs)(nZ,{children:[Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsxs)("strong",{children:["Rooms: ",i.name]})}),Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(r,"/:tab"),component:this.AffectedRoomTabs}),Object(a.jsx)(O.a,{to:"".concat(r,"/details")})]})]}):Object(a.jsx)("h3",{children:"Room not found"})}}]),n}(p.PureComponent),sRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).splitReadings=function(t){var n=e.props,r=n.controlRoom,a=n.outsideRoom,o={air:j()(t).filter({job_moisture_area:null}).groupBy("job_room_id").mapValues((function(e){return j()(e).orderBy("created_at",["desc"]).value()})).value(),moisture:j()(t).reject({job_moisture_area:null}).groupBy("job_room_id").mapValues((function(e){return j()(e).orderBy("created_at",["desc"]).groupBy("group_at").mapValues((function(e){return j.a.keyBy(e,"job_moisture_area.id")})).value()})).value()};if(r&&(o.air[r.id]||o.moisture[r.id])){var i=j()(o.moisture[r.id]).reduce((function(e,t){return e[0].group_at>t[0].group_at?e:t}));o.controlRoom={air:j.a.last(o.air[r.id]),moisture:i}}return a&&o.air[a.id]&&(o.outsideRoom={air:j.a.last(o.air[a.id])}),o},e.state={},e.eventListeners=[Gy.listen(Ix.JobReadingsAdded,(function(t){j.a.forEach(t,(function(e){n.readings[e.job.id]||(n.readings[e.job.id]=[]),n.readings[e.job.id].push(e)})),e.setState({readings:e.splitReadings(n.readings[e.props.job.id])})})),Gy.listen(Ix.JobRoomAreaAdded,(function(t){t.forEach((function(e){n.moistureAreas[e.job.id]||(n.moistureAreas[e.job.id]=[]),n.moistureAreas[e.job.id].push(e)})),e.setState({moistureAreas:Object(aj.a)(n.moistureAreas[e.props.job.id])})})),Gy.listen(Ix.JobRoomAreaUpdated,(function(t){var r=j.a.findIndex(n.moistureAreas[t.job.id],{id:t.id});r>-1&&(n.moistureAreas[t.job.id][r]=t,e.setState({moistureAreas:Object(aj.a)(n.moistureAreas[e.props.job.id])}))})),Gy.listen(Ix.JobRoomAreaDeleted,(function(t){var r=j.a.findIndex(n.moistureAreas[t.job.id],{id:t.id});r>-1&&(n.moistureAreas[t.job.id].splice(r,1),e.setState({moistureAreas:Object(aj.a)(n.moistureAreas[e.props.job.id])}))}))],e.loadReadings=function(){var t=Object(lj.a)(sj.a.mark((function t(r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props.job,void 0!==n.readings[a.id]&&!r){t.next=12;break}return n.readings[a.id]=null,t.next=5,Promise.all([JQ(a.id),WQ(a.id)]);case 5:o=t.sent,i=Object(w.a)(o,2),c=i[0].data,s=i[1].data,n.readings[a.id]=c,n.moistureAreas[a.id]=s,e.setState({readings:e.splitReadings(n.readings[a.id]),moistureAreas:s});case 12:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.RoomsOverviewLayout=function(t){return Object(a.jsx)(zTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state))},e.ControlRoom=function(t){return Object(a.jsx)(RTe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state))},e.AffectedRoomLayout=function(t){return Object(a.jsx)(cRe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.job;n.readings[e.id]?this.setState({readings:this.splitReadings(n.readings[e.id]),moistureAreas:n.moistureAreas[e.id]}):this.loadReadings()}},{key:"componentDidUpdate",value:function(){var e,t=this.props.floorTypes;t.length&&void 0===n.FLOOR_TYPE.CARPET&&(n.FLOOR_TYPE.CARPET=(null===(e=t.find((function(e){return/^carpet$/i.test(e.name)})))||void 0===e?void 0:e.id)||null)}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.match,r=n.path,o=n.url,i=n.params.job_task_id;return Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs/".concat(t.id,"/work-order/").concat(i,"/rooms"),children:"Room Details & Scope of Works"}),this.state.readings?Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(r,"/overview"),component:this.RoomsOverviewLayout}),Object(a.jsx)(O.b,{path:"".concat(r,"/control-room"),component:this.ControlRoom}),Object(a.jsx)(O.b,{path:"".concat(r,"/:room_id"),component:this.AffectedRoomLayout}),Object(a.jsx)(O.a,{to:"".concat(o,"/overview")})]}):Object(a.jsx)(Nv,{size:40})]})}}]),n}(p.PureComponent);sRe.FLOOR_TYPE={},sRe.readings={},sRe.moistureAreas={};var lRe=Object(sg.compose)(Object(b.b)((function(e){return{floorTypes:e.waterForm.floorTypes||[]}})))(sRe),uRe="FORM_JOB_WORKS_ADDITIONAL_WORKS",dRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.saveWorks(n);case 4:t.next=9;break;case 6:return t.prev=6,t.t0=t.catch(0),t.abrupt("return",ix(t.t0));case 9:return t.prev=9,e.setState({working:!1}),t.finish(9);case 12:return t.abrupt("return",!0);case 13:case"end":return t.stop()}}),t,null,[[0,6,9,12]])})));return function(e){return t.apply(this,arguments)}}(),e.saveWorks=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.job,o=r.afterSave,i=r.match.params.job_task_id,t.prev=1,t.next=4,vK(a.id,Object(c.a)(Object(c.a)({},n),{},{link:window.location.origin+"/jobs/".concat(a.id,"/").concat(i,"/contractors/works")}));case 4:s=t.sent,null===o||void 0===o||o(s),t.next=11;break;case 8:throw t.prev=8,t.t0=t.catch(1),t.t0;case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}(),e.searchUsers=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.users.fetch({name:n});case 2:return t.abrupt("return",t.sent.data);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.debouncedSearchUsers=Qv()(e.searchUsers,500),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.locked,r=t.handleSubmit,o=t.formData,i=void 0===o?{}:o,c=t.change,s=this.state.working;return Object(a.jsx)(QIe.Consumer,{children:function(t){var o;return Object(a.jsx)(nZ,{children:Object(a.jsxs)("div",{className:"pr-4 py-4",children:[s&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{id:uRe,onSubmit:r(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsxs)("section",{children:[Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Secondary Damage Identified:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"secondary_damage",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:n})})]}),"1"===i.secondary_damage&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Description:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"secondary_damage_comments",component:gq,disabled:n,placeholder:"Description of any secondary damage..."})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Office Contacted - Assessment Manager to scope further works:"})}),Object(a.jsx)("div",{className:"col p-0",children:Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-4",children:Object(a.jsx)(Hv.a,{name:"area_manager_contacted",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],onChange:function(e){c("area_manager",null)},disabled:n})}),"1"===i.area_manager_contacted&&Object(a.jsx)("div",{className:"col-6",children:Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(Hv.a,{name:"area_manager",placeholder:"Choose an assessment manager",component:NO,loadOptions:e.debouncedSearchUsers,getOptionLabel:function(e){return e.full_name},getOptionValue:function(e){return e.id},isClearable:!0,validate:Dv,disabled:n})}),i.area_manager&&!i.area_manager.email&&Object(a.jsxs)("div",{className:"form-group ml-2",children:[Object(a.jsx)(um.a,{className:"overlapping",id:"am_search",effect:"solid"}),Object(a.jsx)("div",{"data-tip":"No email address found for ".concat(i.area_manager.full_name),"data-for":"am_search",children:Object(a.jsx)("i",{className:"fa fa-exclamation-triangle text-warning","aria-hidden":"true"})})]})]})})]})})]}),"1"===i.area_manager_contacted&&Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Notes:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"area_manager_notification_comments",component:gq,disabled:n,placeholder:"Additional notes to send to ".concat((null===(o=i.area_manager)||void 0===o?void 0:o.full_name)||"assessment manager","...")})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Heavy Furniture (2 people required):"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"heavy_furniture",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:n})})]}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsx)("label",{className:"",children:"Truck Required:"})}),Object(a.jsx)("div",{className:"col",children:Object(a.jsx)(Hv.a,{name:"truck_required",component:YU,direction:"horizontal",size:16,validate:Dv,list:[{value:"0",label:"No"},{value:"1",label:"Yes"}],disabled:n})})]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsxs)("div",{className:"row m-0",children:[Object(a.jsx)("div",{className:"col-3 text-right text-break",children:Object(a.jsxs)("label",{className:"",children:["Contents & Structure Disposal (m",Object(a.jsx)("sup",{children:"3"}),"):"]})}),Object(a.jsx)("div",{className:"col-3",children:Object(a.jsx)(Hv.a,{name:"disposal",component:yg,disabled:n,type:"number",step:.1})})]})]}),!n&&Object(a.jsx)("section",{children:Object(a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(a.jsx)("button",{type:"submit",form:uRe,className:"btn btn-primary",children:"Save"})})})]})]})})}})}}]),n}(p.PureComponent);dRe.defaultValues={secondary_damage:"0",area_manager_contacted:"0",heavy_furniture:"0",truck_required:"0"};var pRe=Object(sg.compose)(Object(b.b)((function(e){return{formData:Object(GM.a)(uRe)(e)}})),Object(jv.a)({form:uRe,enableReinitialize:!0,initialValues:dRe.defaultValues}),oj({users:{fetch:zE.searchUsers}}),O.g)(dRe),hRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.job,t.next=5,OK(n.id);case 5:r=t.sent,a=(null===r||void 0===r?void 0:r.length)?MQ(j.a.last(r)):null,e.setState({works:a});case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props.active,t=this.state,n=t.works,r=t.working;e&&void 0===n&&!r&&this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.locked,r=this.state,o=r.working,i=r.works;return Object(a.jsxs)(nZ,{children:[o&&Object(a.jsx)(Nv,{size:40}),Object(a.jsx)("div",{className:"pr-4 py-4",children:void 0!==i&&Object(a.jsx)(pRe,{job:t,locked:n,initialValues:i||dRe.defaultValues})})]})}}]),n}(p.PureComponent);function bRe(){var e=Object(f.a)(["\n  padding: 5px;\n  cursor: pointer;\n  opacity: 0.7;\n  :hover{\n    opacity: 1;\n  }\n"]);return bRe=function(){return e},e}var fRe=y.default.div(bRe()),mRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={gridState:{data:e.props.data,scrollable:"none"}},e.deleteContractor=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,o,i,c;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,o=r.job,i=r.dispatch,c=r.afterDelete,n.next=3,i(iw("Confirm","Delete  Contract!",Object(a.jsx)(a.Fragment,{children:"Are you sure you want to delete this sub-contractor trade?"})));case 3:if(!n.sent){n.next=10;break}return e.setState({working:!0}),n.next=8,mK(o.id,t.id);case 8:null===c||void 0===c||c(t),e.setState({working:!1});case 10:case"end":return n.stop()}}),n)})))},e.markCompleted=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props,a=r.job,o=r.user,i=r.afterUpdate,e.setState({working:!0}),n.next=4,fK(a.id,t.id,Object(c.a)(Object(c.a)({},t),{},{completed_at:pm()().format(ov),completed_by_user_id:o.id}));case 4:null===i||void 0===i||i(t),e.setState({working:!1});case 6:case"end":return n.stop()}}),n)})))},e.Trade=function(e){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsxs)("div",{children:[j.a.get(t,"trade.name"),t.completed_at&&Object(a.jsx)("span",{className:"badge badge-info ml-2 text-uppercase",children:"Completed"})]})}}))},e.Description=function(e){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{className:"text-truncate",children:j.a.get(t,"description")})}}))},e.AddedBy=function(e){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({},e),{},{Component:function(e){var t=e.data;return Object(a.jsx)("div",{children:j.a.get(t,"created_by.full_name")})}}))},e.Status=function(t){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({},t),{},{Component:function(t){var n=t.data,r=e.props.locked;return Object(a.jsx)("div",{children:n.completed_at?pm()(n.completed_at).format(iv):!r&&Object(a.jsx)("button",{className:"btn btn-sm btn-outline-success",onClick:e.markCompleted(n),children:"Mark Done"})})}}))},e.Actions=function(t){return Object(a.jsx)(xQ,Object(c.a)(Object(c.a)({},t),{},{cellProps:{className:"k-command-cell"},Component:function(t){var n=t.data;return Object(a.jsx)("div",{className:"d-flex align-items-center justify-content-center",children:Object(a.jsx)(fRe,{onClick:e.deleteContractor(n),children:Object(a.jsx)(z7,{color:_.black0,hoverColor:_.red1,name:Xf.Trash,size:14})})})}}))},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){var e=this.state.gridState,t=this.props.data;t!==e.data&&(e.data=t,this.setState({gridState:Object(c.a)({},e)}))}},{key:"render",value:function(){var e=this.state.working,t=this.props.locked;return Object(a.jsxs)(nZ,{children:[e&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)(F_.a,Object(c.a)(Object(c.a)({},this.state.gridState),{},{className:"d-flex flex-column",children:[Object(a.jsx)(F_.b,{field:"trade",title:"Contractor",width:"200px",cell:this.Trade}),Object(a.jsx)(F_.b,{field:"description",title:"Job Description",width:"250px",cell:this.Description}),Object(a.jsx)(F_.b,{field:"created_by",title:"Added By",width:"150px",cell:this.AddedBy}),Object(a.jsx)(F_.b,{field:"completed_at",title:"Completed",width:"150px",cell:this.Status}),!t&&Object(a.jsx)(F_.b,{width:"110px",cell:this.Actions,sortable:!1})]}))]})}}]),n}(p.PureComponent),jRe=Object(sg.compose)(Object(b.b)((function(e){return{user:e.user.me}})),oj({contractors:{fetch:function(){var e=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",[]);case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()}}))(mRe),vRe="FORM_THIRD_PARTY_TRADE",ORe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props,a=r.afterSubmit,o=r.job,console.log(n),t.prev=2,t.next=5,n.id?fK(o.id,n.id,n):bK(o.id,n);case 5:i=t.sent,null===a||void 0===a||a(!0,i),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),null===a||void 0===a||a(!1);case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.submitting,r=t.modal,o=t.trades,i=t.handleSubmit;return Object(a.jsx)(QIe.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"position-relative",children:[n&&!r&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{id:vRe,onSubmit:i(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsxs)("div",{className:"row",children:[Object(a.jsx)("div",{className:"col-5",children:Object(a.jsx)(Hv.a,{name:"trade",component:xO,options:o||[],getOptionLabel:function(e){return e.name},getOptionValue:function(e){return e.id},label:"Trade:",validate:Dv})}),Object(a.jsx)("div",{className:"col-7",children:Object(a.jsx)(Hv.a,{name:"description",component:yg,label:"Descripton of Works:",validate:Dv})})]})]})]})}})}}]),n}(p.PureComponent),gRe=Object(sg.compose)(Object(b.b)((function(e){return{trades:e.waterForm.trades}})),Object(jv.a)({form:vRe,enableReinitialize:!0}))(ORe),xRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={submitting:!1},e.beforeSubmit=function(t){e.setState({submitting:!0})},e.afterSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n&&(a=e.props,o=a.onClose,null===(i=a.afterSubmit)||void 0===i||i(r),o()),e.setState({submitting:!1});case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.props,n=t.trade,r=t.job;return Object(a.jsx)(gRe,{job:r,initialValues:n,modal:!0,beforeSubmit:e.beforeSubmit,afterSubmit:e.afterSubmit})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=e.title,r=e.onClose,o=e.trade,i=this.state.submitting;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{scrollY:!0,onClose:r,loading:i,title:n||((null===o||void 0===o?void 0:o.id)?"Edit":"Add")+" Sub-Contractor",body:this.renderModalBody(),footer:Object(a.jsx)("button",{type:"submit",form:vRe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent),yRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.job,a=n.contractors,e.setState({working:!0}),t.prev=2,t.next=5,a.fetch(r.id);case 5:return t.prev=5,e.setState({working:!1}),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[2,,5,8]])}))),e.onDelete=function(t){e.loadData()},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0,modalData:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props.job;return"contractor"===n?Object(a.jsx)(xRe,Object(c.a)(Object(c.a)({job:o,isOpen:!0,onClose:e.hideModal},r),{},{afterSubmit:e.loadData})):null},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.active,n=e.contractors;!t||n.data||n.loading||this.loadData()}},{key:"render",value:function(){var e=this.state.working,t=this.props,n=t.job,r=t.contractors.data,o=t.locked;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsxs)(nZ,{children:[e&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("div",{className:"pr-4 py-4",children:[!o&&Object(a.jsx)("div",{className:"print-hide mb-3",children:Object(a.jsx)("button",{className:"btn btn-primary",onClick:this.showModal("contractor"),children:"Add"})}),Object(a.jsx)(jRe,{locked:o,job:n,data:r||[],afterDelete:this.loadData,afterUpdate:this.loadData})]})]})]})}}]),n}(p.PureComponent),_Re=Object(sg.compose)(Object(b.b)(),oj({contractors:{fetch:jK}}))(yRe);function wRe(){var e=Object(f.a)(["\n  input[type='radio']{\n    position: relative; top: 2px; margin-right: 5px;\n  }\n"]);return wRe=function(){return e},e}var SRe=y.default.div(wRe()),kRe="CONTENTS_INVENTORY_FORM",CRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobContract:e.props.jobContract},e.signaturePad={},e.validateSignature=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(e,t){if(e.isEmpty())throw e.setInvalid(),n=!1,Oj(uj.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.lockSignature=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:return t.next=6,e.uploadSignature(n);case 6:r=t.sent,n.signatures=n.signatures.concat(r);case 8:return t.prev=8,setTimeout((function(){e.setState({working:!1})}),100),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e.uploadSignature=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=[],j.a.forEach(e.signaturePad,(function(t,a){var o,i={field_data:JSON.stringify(j.a.get(n.meta,"signature.".concat(a,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:hO.getContactName(e.customer),customer_email:null===(o=e.customer)||void 0===o?void 0:o.email};r.push(aY(a,t.toDataURL(),n.id,i,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(r));case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(a=e.customer)||void 0===a?void 0:a.email)){t.next=13;break}return t.next=4,e._sendEmail(o,n);case 4:return t.t0=r,t.next=7,YH(n.id);case 7:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),t.abrupt("return",i);case 13:return Oj(uj.Danger,"Customer email address is not set"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:hO.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.abrupt("return",nY(r.id,s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.saveContract=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,o=a.user,i=a.job,c=a.afterSave,a.dispatch,t.prev=1,s=null,!o){t.next=16;break}return t.next=6,WH(e.props.job.id,n.template.contract.id,{field_data:JSON.stringify(r),contract_date:pm()().format(av)});case 6:return s=t.sent,t.prev=7,t.next=10,e.sendEmail(s);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(7);case 14:t.next=17;break;case 16:s=n;case 17:s&&(o&&(s=PH(s,i)),e.setState({jobContract:s}),null===c||void 0===c||c(s)),t.next=23;break;case 20:t.prev=20,t.t1=t.catch(1),console.log(t.t1);case 23:case"end":return t.stop()}}),t,null,[[1,20],[7,12]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0}),t.next=4,e.validateSignature();case 4:if(!e.state.jobContract){t.next=9;break}return t.next=7,e.saveContract(e.state.jobContract,n);case 7:t.next=14;break;case 9:return t.next=11,e.getJobContract();case 11:return r=t.sent,t.next=14,e.saveContract(r,n);case 14:return t.prev=14,e.setState({working:!1}),t.finish(14);case 17:case"end":return t.stop()}}),t,null,[[0,,14,17]])})));return function(e){return t.apply(this,arguments)}}(),e.getJobContract=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FH(AH.CONTENTS_INVENTORY);case 2:return n=t.sent[0],t.next=5,BH(n.id);case 5:return r=t.sent,t.abrupt("return",{job:e.props.job,type:AH.CONTENTS_INVENTORY,template:r});case 7:case"end":return t.stop()}}),t)}))),e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e}return Object(l.a)(n,[{key:"extractContact",value:function(e){var t=this.props.jobContacts;return zy.extractContact(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=(t.formData,t.user),o=t.submitting,i=t.locked,c=this.state,s=c.working,l=c.jobContract,u=j.a.find(null===l||void 0===l?void 0:l.signatures,{type:"customer"});return Object(a.jsx)(QIe.Consumer,{children:function(t){return Object(a.jsxs)(SRe,{children:[(o||s)&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{onSubmit:e.props.handleSubmit(e.onSubmit),children:[Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsxs)("section",{children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Customer Signature:"})}),Object(a.jsx)("p",{children:"I have checked the inventory in the Packout app and confirm it is a true and accurate description of goods (and condition thereof) removed by Steamatic."}),(!r||u)&&Object(a.jsxs)("div",{style:{maxWidth:"400px",margin:"auto"},children:[Object(a.jsx)(NY,{job:n,jobContract:l,bindings:{},type:"customer",onSignatureRender:e.onSignatureRender}),u&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Signed At: "}),pm()(u.created_at).format(lv)]})]})]}),r&&!u?!i&&Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("p",{className:"d-flex justify-content-center",children:[l&&Object(a.jsx)("a",{href:"/external/job/contract/".concat(l.hash),target:"_blank",className:"btn btn-outline-primary",children:"Get Customer Signature"}),!l&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:o||s,children:["Send to Customer ",(o||s)&&Object(a.jsx)(Nv,{size:20})]})]})]}):u?null:Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("p",{className:"d-flex justify-content-center",children:l&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"button",disabled:o||s,onClick:function(){return e.lockSignature(l)},children:["I Agree & Save ",(o||s)&&Object(a.jsx)(Nv,{size:20})]})})]})]})]})}})}},{key:"customer",get:function(){return this.extractContact(tv.CUSTOMER)}}]),n}(p.PureComponent),NRe=Object(sg.compose)(Object(jv.a)({form:kRe,enableReinitialize:!0}),O.g,Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me,formData:Object(GM.a)(kRe)(e)}})))(CRe),ERe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.job,t.next=5,zH(n.id,AH.CONTENTS_INVENTORY);case 5:r=t.sent,a=r?PH(r,n):null,e.setState({contract:a});case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[1,,8,11]])}))),e.afterSave=function(t){e.setState({contract:t})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props.active,t=this.state,n=t.contract,r=t.working;e&&void 0===n&&!r&&this.loadData()}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.contacts,r=e.locked,o=this.state,i=o.contract,c=o.working;return Object(a.jsx)(nZ,{children:c?Object(a.jsx)(Nv,{size:40}):Object(a.jsx)("div",{className:"pr-4 py-4",children:Object(a.jsx)(NRe,{job:t,jobContract:i,jobContacts:n.data||[],initialValues:(null===i||void 0===i?void 0:i.meta)||{},afterSave:this.afterSave,locked:r})})})}}]),n}(p.PureComponent),ARe=Object(sg.compose)(Object(b.b)((function(e){return{contacts:e.currentJobContacts}})))(ERe),IRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props,r=n.job,a=n.notes,t.next=5,a.fetch(r.id,{type:jw.FIELD});case 5:return t.prev=5,e.setState({working:!1}),t.finish(5);case 8:case"end":return t.stop()}}),t,null,[[1,,5,8]])}))),e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,e.setState({working:!0,latestNote:n}),r=e.props.dispatch,a=e.props.job,t.next=6,r(yM(a.id,n.id,{job_id:a.id,type:jw.FIELD},!1));case 6:return t.next=8,e.loadData();case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[0,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.props.active&&this.loadData()}},{key:"componentDidUpdate",value:function(){var e=this.props,t=e.active,n=e.notes,r=this.state.working;t&&void 0===n.data&&!r&&this.loadData()}},{key:"render",value:function(){var e,t=this,n=this.state,r=n.working,o=n.latestNote,i=this.props,c=i.notes.data,s=i.job,l=i.locked;return Object(a.jsx)(nZ,{children:Object(a.jsxs)("div",{className:"pr-4 py-4",children:[!l&&Object(a.jsx)("div",{className:"mb-5",children:Object(a.jsx)(WA,{afterSave:this.saveNoteDraft,color:_.orange0,disableTemplatesControl:!0,disableAttachments:!0,disableMentionControl:!0},(null===o||void 0===o?void 0:o.id)||"")}),Object(a.jsxs)("div",{className:"pr-5",children:[r&&Object(a.jsx)(Nv,{size:40}),(null===c||void 0===c||null===(e=c.data)||void 0===e?void 0:e.length)>0&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("hr",{className:"mb-0"}),c.data.map((function(e){return Object(a.jsx)(lT,{noteOrReply:e,afterEditSuccess:t.loadData,saveWith:{job_id:s.id,type:jw.FIELD}},"note-".concat(e.id))}))]})]})]})})}}]),n}(p.PureComponent),TRe=Object(sg.compose)(Object(b.b)((function(e){return{}})),oj({notes:{fetch:RA.getJobNotes}}))(IRe),RRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.url,n=e.match.params.tab;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto",children:[Object(a.jsxs)(fQ.i,{className:"nav-tabs mr-4",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/works"),role:"tab",children:"Additional Works"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/trades"),role:"tab",children:"Sub-Contractors"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/inventory"),role:"tab",children:"Contents Inventory"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"".concat(t,"/notes"),role:"tab",children:"Notes"})})]}),Object(a.jsxs)(fQ.k,{activeItem:n,className:"position-relative flex-grow-1 scroll-auto",children:[Object(a.jsx)(fQ.l,{tabId:"works",role:"tabpanel",className:"h-100",children:Object(a.jsx)(hRe,Object(c.a)(Object(c.a)({},this.props),{},{active:"works"===n}))}),Object(a.jsx)(fQ.l,{tabId:"trades",role:"tabpanel",className:"h-100",children:Object(a.jsx)(_Re,Object(c.a)(Object(c.a)({},this.props),{},{active:"trades"===n}))}),Object(a.jsx)(fQ.l,{tabId:"inventory",role:"tabpanel",className:"h-100",children:Object(a.jsx)(ARe,Object(c.a)(Object(c.a)({},this.props),{},{active:"inventory"===n}))}),Object(a.jsx)(fQ.l,{tabId:"notes",role:"tabpanel",className:"h-100",children:Object(a.jsx)(TRe,Object(c.a)(Object(c.a)({},this.props),{},{active:"notes"===n}))})]})]})}}]),n}(p.PureComponent),DRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).Tabs=function(t){var n=e.props.match.url;return Object(a.jsx)(RRe,Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),{},{url:n}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e;(0,this.props.dispatch)(function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r().waterForm.trades.length&&!e){t.next=6;break}return t.next=4,hK();case 4:a=t.sent,n({type:RK,payload:a});case 6:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}())}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.generalAuthority,r=e.match,o=r.url,i=r.params.job_task_id;return Object(a.jsxs)(nZ,{children:[t&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs/".concat(t.id,"/work-order/").concat(i,"/contractors"),children:"Sub-Contractors & Notes"}),Object(a.jsx)("h3",{className:"pr-4 mb-4",children:Object(a.jsx)("strong",{children:"Sub-Contractors & Notes"})}),n?Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(o,"/:tab"),component:this.Tabs}),Object(a.jsx)(O.a,{to:"".concat(o,"/works")})]})}):Object(a.jsx)(a.Fragment,{children:Object(a.jsx)(Nv,{size:40})})]})}}]),n}(p.PureComponent),MRe=Object(sg.compose)(Object(b.b)((function(e){return{generalAuthority:e.waterForm.generalAuthority}})))(DRe);function LRe(){var e=Object(f.a)(["\n  input[type='radio']{\n    position: relative; top: 2px; margin-right: 5px;\n  }\n"]);return LRe=function(){return e},e}var PRe=y.default.div(LRe()),FRe="WORK_COMPLETION_FORM",URe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobContract:e.props.jobContract},e.signaturePad={},e.validateSignature=Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=!0,j.a.forEach(e.signaturePad,(function(e,t){if(e.isEmpty())throw e.setInvalid(),n=!1,Oj(uj.Danger,"Signature is required"),Error})),t.abrupt("return",n?Promise.resolve():Promise.reject());case 3:case"end":return t.stop()}}),t)}))),e.uploadSignature=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=[],j.a.forEach(e.signaturePad,(function(t,o){var i,c={field_data:JSON.stringify(r||j.a.get(n.meta,"signature.".concat(o,".meta"))),link:window.location.origin+"/external/job/contract/".concat(n.hash),full_name:hO.getContactName(e.customer),customer_email:null===(i=e.customer)||void 0===i?void 0:i.email};a.push(aY(o,t.toDataURL(),n.id,c,!!e.props.user,n.hash))})),t.abrupt("return",Promise.all(a));case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var a,o,i;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(o=null===(a=e.customer)||void 0===a?void 0:a.email)){t.next=13;break}return t.next=4,e._sendEmail(o,n);case 4:return t.t0=r,t.next=7,YH(n.id);case 7:return t.t1=t.sent,t.t2=e.props.job,i=t.t0.hydrateJobContract.call(t.t0,t.t1,t.t2),t.abrupt("return",i);case 13:return Oj(uj.Danger,"Customer email address is not set"),t.abrupt("return",Promise.reject());case 15:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e._sendEmail=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i=r.meta,c=r.hash,s={link:window.location.origin+"/external/job/contract/".concat(c),name:hO.getContactName(e.customer),email:n},(null===i||void 0===i||null===(a=i.email)||void 0===a||null===(o=a.cc)||void 0===o?void 0:o.requested)&&(s.cc=i.email.cc.requested.to),t.abrupt("return",nY(r.id,s));case 4:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.saveContract=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(a=e.props,o=a.user,i=a.job,c=a.afterSave,t.prev=1,s=null,!o){t.next=16;break}return t.next=6,WH(e.props.job.id,n.template.contract.id,{field_data:JSON.stringify(r),contract_date:pm()().format(av)});case 6:return s=t.sent,t.prev=7,t.next=10,e.sendEmail(s);case 10:t.next=14;break;case 12:t.prev=12,t.t0=t.catch(7);case 14:t.next=17;break;case 16:s=n;case 17:s&&(o&&(s=PH(s,i)),e.setState({jobContract:s}),null===c||void 0===c||c(s)),t.next=22;break;case 20:t.prev=20,t.t1=t.catch(1);case 22:case"end":return t.stop()}}),t,null,[[1,20],[7,12]])})));return function(e,n){return t.apply(this,arguments)}}(),e.onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,r=e.props.user,e.setState({working:!0}),t.next=5,e.validateSignature();case 5:if(a=e.state.jobContract,!r){t.next=19;break}if(!a){t.next=12;break}return t.next=10,e.saveContract(a,n);case 10:t.next=17;break;case 12:return t.next=14,e.getJobContract();case 14:return o=t.sent,t.next=17,e.saveContract(o,n);case 17:t.next=24;break;case 19:if(!a){t.next=24;break}return t.next=22,e.uploadSignature(a,n);case 22:a.signatures=t.sent,e.setState({jobContract:a});case 24:return t.prev=24,e.setState({working:!1}),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[0,,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.getJobContract=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,FH(AH.WORK_COMPLETION);case 2:return n=t.sent[0],t.next=5,BH(n.id);case 5:return r=t.sent,t.abrupt("return",{job:e.props.job,type:AH.WORK_COMPLETION,template:r});case 7:case"end":return t.stop()}}),t)}))),e.onSignatureRender=function(t,n){e.signaturePad[t]=n},e}return Object(l.a)(n,[{key:"extractContact",value:function(e){var t=this.props.jobContacts;return zy.extractContact(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.formData,o=void 0===r?{}:r,i=t.user,c=t.submitting,s=this.state,l=s.working,u=s.jobContract,d=j.a.find(null===u||void 0===u?void 0:u.signatures,{type:"customer"});return Object(a.jsx)(QIe.Consumer,{children:function(t){var r;return Object(a.jsxs)(PRe,{children:[(c||l)&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("form",{onSubmit:e.props.handleSubmit(e.onSubmit),className:"p-1",children:[t&&Object(a.jsx)(Hv.a,{component:yg,type:"hidden",name:"job_task_id",defaultValue:t.taskId}),Object(a.jsxs)("section",{children:[Object(a.jsx)("p",{children:"I, the undersigned, have personally and thoroughly inspected all mitigation and restoration work undertaken by Steamatic in relation to the damage of which I have submitted a claim to my insurer."}),Object(a.jsx)("p",{children:"I agree that it is my responsibility to thoroughly inspect all work undertaken by Steamatic and that failure to do so may mean that I forfeit my right to make any future claims against Steamatic."}),Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Property: "})," ",null===(r=n.site_address)||void 0===r?void 0:r.full_address]})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsx)(Hv.a,{name:"satisfied",component:rI,direction:"horizontal",label:"All work has been undertaken by Steamatic to my satisfaction.",disabled:d,validate:i?void 0:Dv}),Object(a.jsx)(Hv.a,{name:"acknowledged",component:rI,direction:"horizontal",label:"I am aware further work may be required by other contractors/parties to complete the job.",disabled:d,validate:i?void 0:Dv})]}),Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{}),Object(a.jsx)("p",{children:"I hereby authorise full payment to be made directly to Steamatic."}),Object(a.jsx)(Hv.a,{name:"responsible_party",component:YU,direction:"horizontal",size:16,list:[{value:"owner",label:"I am the owner"},{value:"agent",label:"I am an authorised agent of the owner:"}],disabled:d,validate:i?void 0:Dv}),"agent"===o.responsible_party&&Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6 p-0",children:Object(a.jsx)(Hv.a,{name:"agent_owner_relationship",component:yg,placeholder:"Relationship with the owner",disabled:d,validate:i?void 0:Dv})})}),Object(a.jsx)("div",{className:"row m-0",children:Object(a.jsx)("div",{className:"col-6 p-0",children:Object(a.jsx)(Hv.a,{name:"contact_name",component:yg,placeholder:"Full name of owner or authorised agent",disabled:d,validate:i?void 0:Dv})})}),(!i||d)&&Object(a.jsxs)("div",{style:{maxWidth:"400px",margin:"auto"},children:[Object(a.jsx)(NY,{job:n,jobContract:u,bindings:{},type:"customer",onSignatureRender:e.onSignatureRender}),d&&Object(a.jsxs)("div",{children:[Object(a.jsx)("strong",{children:"Signed At: "}),pm()(d.created_at).format(lv)]})]})]}),i&&!d?Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsxs)("p",{className:"d-flex justify-content-center",children:[u&&Object(a.jsx)("a",{href:"/external/job/contract/".concat(u.hash),target:"_blank",className:"btn btn-outline-primary",children:"Get Customer Signature"}),!u&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:c||l,children:["Send to Customer ",(c||l)&&Object(a.jsx)(Nv,{size:20})]})]})]}):d?null:Object(a.jsxs)("section",{children:[Object(a.jsx)("hr",{className:""}),Object(a.jsx)("p",{className:"d-flex justify-content-center",children:u&&Object(a.jsxs)("button",{className:"btn btn-primary position-relative",type:"submit",disabled:c||l,children:["Submit ",(c||l)&&Object(a.jsx)(Nv,{size:20})]})})]})]})]})}})}},{key:"customer",get:function(){return this.extractContact(tv.CUSTOMER)}}]),n}(p.PureComponent),BRe=Object(sg.compose)(Object(jv.a)({form:FRe,enableReinitialize:!0}),O.g,Object(b.b)((function(e,t){var n;return{user:t&&"user"in t?t.user:null===(n=e.user)||void 0===n?void 0:n.me,formData:Object(GM.a)(FRe)(e)}})))(URe),VRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,n=e.props.job,t.next=5,zH(n.id,AH.WORK_COMPLETION);case 5:r=t.sent,a=r?PH(r,n):null,e.setState({contract:a}),t.next=13;break;case 10:t.prev=10,t.t0=t.catch(1),console.error(t.t0);case 13:return t.prev=13,e.setState({working:!1}),t.finish(13);case 16:case"end":return t.stop()}}),t,null,[[1,10,13,16]])}))),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){!this.context.jobTask||this.context.jobTask.work_completed_date?this.loadData():this.setState({contract:null})}},{key:"render",value:function(){var e,t,n=this,r=this.props,o=r.job,i=r.contacts,c=r.match.params.job_task_id,s=this.state,l=s.working,u=s.contract;return Object(a.jsxs)(nZ,{children:[o&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs/".concat(o.id,"/work-order/").concat(c,"/work-completion"),children:"Work Complete"}),l||void 0===u?Object(a.jsx)(Nv,{size:40}):Object(a.jsxs)("div",{className:"pr-4 pb-4",children:[Object(a.jsx)("h3",{className:"mb-5",children:Object(a.jsx)("strong",{children:"Statement of Work Complete"})}),Object(a.jsx)(BRe,{job:o,jobContacts:i.data,jobContract:u,initialValues:(null===u||void 0===u||null===(e=u.signatures)||void 0===e||null===(t=e[0])||void 0===t?void 0:t.meta)||(null===u||void 0===u?void 0:u.meta)||{},afterSave:function(){var e;(null===(e=n.context)||void 0===e?void 0:e.jobTask)&&iq.updateJobTask(o.id,n.context.jobTask.id,{work_completed_date:fv(pm()(),!0)}).then((function(e){n.context.onComplete(e.data)}))}})]})]})}}]),n}(p.PureComponent);VRe.contextType=QIe;var JRe=Object(sg.compose)(Object(b.b)((function(e){return{contacts:e.currentJobContacts}})),O.g)(VRe),qRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.service,n=e.works;return t&&n?Object(a.jsx)("div",{className:"pr-4 pb-4",children:Object(a.jsx)(oRe,Object(c.a)(Object(c.a)({},this.props),{},{special:!0,exclusion:!0,service:t}))}):null}}]),n}(p.Component),zRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.service;return e?Object(a.jsx)("div",{className:"pr-4 pb-4",children:Object(a.jsx)(oRe,Object(c.a)(Object(c.a)({},this.props),{},{special:!0,service:e,editable:{category:!0}}))}):null}}]),n}(p.Component),GRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.eventListeners=[Gy.listen(Ix.JobWorkAdded,(function(){}))],e.loadData=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c,s,l,u,d,p,h,b,f,m,v;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),t.prev=1,r=e.props,a=r.job,o=r.services,i=r.categories,c=r.works,t.next=5,o.fetch({special:1});case 5:if(!(null===(s=t.sent)||void 0===s?void 0:s.length)){t.next=24;break}return l=j.a.find(s,{name:"Special"}),u=j.a.find(s,{name:"Exclusions"}),t.next=11,Promise.all([Promise.resolve([]),u?i.fetch(u.id,{job_id:a.id}):Promise.resolve([])]);case 11:return d=t.sent,p=Object(w.a)(d,2),h=p[0],b=p[1],e.setState({services:{special:l,exclusion:u},categories:{special:h,exclusion:b}}),t.next=18,Promise.all([Promise.resolve({data:[]}),c.fetch(a.id,void 0,{work_category_id:j.a.map(b,"id")})]);case 18:f=t.sent,m=Object(w.a)(f,2),m[0],v=m[1],e.setState({works:{exclusion:j.a.groupBy(v.data,(function(e){var t;return e.work_category_id||(null===(t=e.work)||void 0===t?void 0:t.work_category_id)}))}}),Gy.emit(Ix.JobWorkLoaded,{exclusion:v.data});case 24:return t.prev=24,e.setState({working:!1}),t.finish(24);case 27:case"end":return t.stop()}}),t,null,[[1,,24,27]])})));return function(e){return t.apply(this,arguments)}}(),e.SpecialisWorks=function(t){var n,r,o;return Object(a.jsx)(zRe,Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state),{},{service:(null===(n=e.state.services)||void 0===n?void 0:n.special)||{},work:null===(r=e.state.works)||void 0===r?void 0:r.special,works:null===(o=e.state.works)||void 0===o?void 0:o.special}))},e.WorkExclusions=function(t){var n,r;return Object(a.jsx)(qRe,Object(c.a)(Object(c.a)(Object(c.a)(Object(c.a)({},e.props),t),e.state),{},{service:(null===(n=e.state.services)||void 0===n?void 0:n.exclusion)||{},works:null===(r=e.state.works)||void 0===r?void 0:r.exclusion}))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.loadData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()}))}},{key:"render",value:function(){var e=this.props,t=e.job,n=e.match,r=n.path,o=n.url,i=n.params.job_task_id,c=this.state.services;return Object(a.jsxs)(a.Fragment,{children:[t&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs/".concat(t.id,"/work-order/").concat(i,"/swe"),children:"Specialist Works and Exclusions"}),this.state.working||!c?Object(a.jsx)(Nv,{size:40}):Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(r,"/works"),component:this.SpecialisWorks}),Object(a.jsx)(O.b,{path:"".concat(r,"/exclusions"),component:this.WorkExclusions}),Object(a.jsx)(O.a,{to:"".concat(o,"/works")})]})]})}}]),n}(p.PureComponent),WRe=Object(sg.compose)(oj({services:{fetch:pK},categories:{fetch:nK},works:{fetch:oK}}))(GRe),HRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).RoomsLayout=function(t){return Object(a.jsx)(lRe,Object(c.a)(Object(c.a)({},e.props),t))},e.WorksAndExclusionsLayout=function(t){return Object(a.jsx)(WRe,Object(c.a)(Object(c.a)({},e.props),t))},e.SubContractorsLayout=function(t){return Object(a.jsx)(MRe,Object(c.a)(Object(c.a)({},e.props),t))},e.WorkCompletion=function(t){return Object(a.jsx)(JRe,Object(c.a)(Object(c.a)({},e.props),t))},e.PreStartCheckPage=function(t){return Object(a.jsx)(aZ,Object(c.a)(Object(c.a)({},e.props),t))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props.match,t=e.path,n=e.url;return Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(t,"/pre-start-check"),component:this.PreStartCheckPage}),Object(a.jsx)(O.b,{path:"".concat(t,"/rooms"),component:this.RoomsLayout}),Object(a.jsx)(O.b,{path:"".concat(t,"/swe"),component:this.WorksAndExclusionsLayout}),Object(a.jsx)(O.b,{path:"".concat(t,"/contractors"),component:this.SubContractorsLayout}),Object(a.jsx)(O.b,{path:"".concat(t,"/work-completion"),component:this.WorkCompletion}),Object(a.jsx)(O.a,{to:"".concat(n,"/pre-start-check")})]})}}]),n}(p.PureComponent);function YRe(){var e=Object(f.a)(["\n  background: ",";\n  border: 1px "," solid;\n"]);return YRe=function(){return e},e}var QRe,KRe={1:6,2:3,3:2.8},ZRe=y.default.div(YRe(),_.white,_.gray2);!function(e){e[e.ROOM=0]="ROOM"}(QRe||(QRe={}));var XRe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobTask:null,allWorks:{}},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=e.props,i=o.job,s=o.history,l=o.match.url;switch(n){case QRe.ROOM:return Object(a.jsx)(lTe,Object(c.a)({job:i,afterSubmit:function(e){s.push("".concat(l,"/rooms/").concat(e.id,"/details"))},onClose:e.hideModal,isOpen:!0},r))}return null},e.eventListeners=[Gy.listen(Ix.JobRoomAdded,(function(t){if(t.job.id===e.props.job.id){var n=e.state.rooms,r=void 0===n?[]:n;r.push(t),e.setState(e.splitRooms(r))}})),Gy.listen(Ix.JobRoomUpdated,(function(t){if(t.job.id===e.props.job.id){var n=e.state.rooms,r=void 0===n?[]:n,a=j.a.findIndex(r,{id:t.id});a>-1&&(r[a]=t,e.setState(e.splitRooms(r)))}})),Gy.listen(Ix.JobRoomDeleted,(function(t){if(t.job.id===e.props.job.id){var n=e.state.rooms,r=void 0===n?[]:n,a=j.a.findIndex(r,{id:t.id});a>-1&&(r.splice(a,1),e.setState(e.splitRooms(r)))}})),Gy.listen(Ix.JobWorkAdded,(function(t){Object(w.a)(t,1)[0]&&e.loadRooms()})),Gy.listen(Ix.JobWorkUpdated,(function(t){t&&e.loadRooms()})),Gy.listen(Ix.JobWorkDeleted,(function(t){t&&e.loadRooms()})),Gy.listen(Ix.JobWorkLoaded,(function(t){e.setState({allWorks:Object(c.a)(Object(c.a)({},e.state.allWorks),t)})}))],e.loadTask=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params,r=n.job_id,a=n.job_task_id,t.next=3,iq.getJobTask(r,a);case 3:(o=t.sent).work_start_date||iq.updateJobTask(r,o.id,{work_start_date:fv(pm()(),!0)}),e.setState({jobTask:o});case 6:case"end":return t.stop()}}),t)}))),e.loadLookups=Object(lj.a)(sj.a.mark((function t(){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=e.props.dispatch,n.roomsLookupsLoaded=!0,t.next=4,Promise.all([r(LK()),r(PK()),r(UK()),r(BK()),r(VK()),r(JK()),r(qK()),r(zK()),r(GK({no_works:0,special:0}))]);case 4:return t.abrupt("return",t.sent);case 5:case"end":return t.stop()}}),t)}))),e.loadRooms=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(n=e.props.job)){t.next=8;break}return e.setState({working:!0}),t.next=5,BQ(n.id);case 5:r=t.sent,a=r.data,e.setState(Object(c.a)({working:!1},e.splitRooms(a)));case 8:case"end":return t.stop()}}),t)}))),e.splitRooms=function(t){return{rooms:j.a.each(t,e.calcRoomParameters),controlRoom:j.a.find(t,(function(e){return e.control&&!e.outside})),outsideRoom:j.a.find(t,(function(e){return e.outside})),nonControlRooms:j.a.filter(t,(function(e){return!e.control&&!e.outside}))}},e.calcRoomParameters=function(t){var n=e.props.preStartCheck;if(t.params={airMovers:{required:0,installed:0},dehums:{required:0,installed:0},preStartCheckClass:1},void 0!==n){var r,a=(null===n||void 0===n||null===(r=n.meta)||void 0===r?void 0:r.class_id)||t.params.preStartCheckClass,o=j.a.get(KRe,a,3);t.params.preStartCheckClass=a;var i=(t.dimensions_affected_length||0)*(t.dimensions_affected_width||0);t.params.airMovers.required=Math.ceil(i/5.5);var c=(t.dimensions_length||0)*(t.dimensions_width||0)*(t.dimensions_height||0);t.params.dehums.required=Math.ceil(c/o/55)}},e.duplicateRoom=function(t){return function(n){n.preventDefault(),e._duplicateRoom(t)}},e._duplicateRoom=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({working:!0}),r=e.props,a=r.job,o=r.history,i=r.match.params.job_task_id,t.prev=2,t.next=5,FQ(a.id,n.id,{job_task_id:+i});case 5:c=t.sent,Gy.emit(Ix.JobRoomAdded,c),o.push("/jobs/".concat(a.id,"/work-order/").concat(i,"/rooms/").concat(c.id));case 8:return t.prev=8,e.setState({working:!1}),t.finish(8);case 11:case"end":return t.stop()}}),t,null,[[2,,8,11]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.dispatch,n=e.match.params.job_id,r=e.job;this.loadTask(),t(BD(n)),t(DP(n)),r&&(t(WK(r)),t(HK(r)),t(YK(r))),this.isActive("/rooms")&&(this.loadRooms(),this.loadLookups()),Rm.status("Work Order - Job# ".concat(n))}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"componentDidUpdate",value:function(e){var t=this.props,r=t.dispatch,a=t.match.params,o=a.job_id,i=a.job_task_id,s=t.job,l=t.preStartCheck,u=e.match.params,d=u.job_id,p=u.job_task_id,h=e.job,b=e.preStartCheck;if(!n.roomsLookupsLoaded&&this.isActive("/rooms")&&this.loadLookups(),s&&!h||i!==p||s&&(+o!==+d||void 0===l&&l!==b)?(r(WK(s)),r(HK(s)),r(YK(s))):void 0!==l&&l!==b&&this.state.rooms&&this.setState(Object(c.a)({},this.splitRooms(this.state.rooms))),+o!==+d)r(BD(o)),this.isActive("/rooms")&&this.loadRooms();else{var f=this.state,m=f.rooms;f.working||m||this.isActive("/rooms")&&this.loadRooms()}}},{key:"isActive",value:function(e){var t=this.props,n=t.location.pathname,r=t.match.url;return!!Object(O.f)(n,{path:r+e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.job,r=t.match.params.job_task_id,o=t.workCompletion,i=this.state,s=i.working,l=i.rooms,u=i.nonControlRooms,d=i.controlRoom,p=i.outsideRoom,h=i.jobTask,b=!(!(null===h||void 0===h?void 0:h.work_completed_date)||!j.a.find(null===o||void 0===o?void 0:o.signatures,{type:"customer"}));return Object(a.jsxs)(QIe.Provider,{value:{taskId:+r,jobTask:h,onComplete:function(t){h.work_completed_date=t,e.setState({jobTask:Object(c.a)({},h)})}},children:[this.renderModal(),Object(a.jsxs)(nZ,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs",children:"Jobs"}),n&&h?Object(a.jsxs)(a.Fragment,{children:[n&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/job/".concat(n.id),children:zy.getJobName(n)}),n&&Object(a.jsxs)(xk.BreadcrumbsItem,{to:"/job/".concat(n.id,"/schedule-and-tasks"),children:["Job Task #",r]}),n&&Object(a.jsx)(xk.BreadcrumbsItem,{to:"/jobs/".concat(n.id,"/work-order/").concat(r),children:"Work Order"}),Object(a.jsx)(ZRe,{className:"print-hide",children:Object(a.jsxs)("div",{className:"p-3 d-flex justify-content-between align-items-center",children:[Object(a.jsx)("div",{children:Object(a.jsx)("strong",{children:"Work Order"})}),Object(a.jsx)("div",{children:Object(a.jsx)(v.c,{className:"btn btn-outline-primary",to:"/job/".concat(n.id,"/details"),children:"View Job"})})]})}),Object(a.jsxs)(nZ,{children:[s&&!(null===l||void 0===l?void 0:l.length)&&Object(a.jsx)(Nv,{size:40}),Object(a.jsxs)("div",{className:"d-flex h-100",children:[Object(a.jsxs)("div",{className:"position-relative",children:[s&&(null===l||void 0===l?void 0:l.length)>0&&Object(a.jsx)(Nv,{size:30}),Object(a.jsxs)(nj,{width:350,children:[this.sidebarRoomsMenu.map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)})),!b&&Object(a.jsx)(S.Consumer,{children:function(t){return t.isOpen&&e.isActive("/rooms")&&Object(a.jsx)($m,{children:Object(a.jsxs)("span",{className:"ml-3",onClick:e.showModal(QRe.ROOM),children:[Object(a.jsx)(cm,{name:Xf.Add,size:14})," ",Object(a.jsx)("span",{className:"ml-2",children:"Add New Room"})]})})}}),this.sidebarMenu.map((function(e){return Object(a.jsx)(Wm,{item:e},e.path)}))]})]}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)("div",{className:"pl-4 py-4 flex-grow-1 h-100 position-relative",children:Object(a.jsx)(nZ,{children:(!this.isActive("/rooms")||l)&&Object(a.jsx)(HRe,Object(c.a)(Object(c.a)({},this.props),{},{rooms:l,nonControlRooms:u,controlRoom:d,outsideRoom:p,locked:b}))})})})]})]})]}):Object(a.jsx)(Nv,{size:40})]})]})}},{key:"sidebarRoomsMenu",get:function(){var e=this,t=this.props.match.url,n=this.state,r=n.controlRoom,o=n.nonControlRooms,i=n.jobTask,c=!!(null===i||void 0===i?void 0:i.work_completed_date),s=[{path:"".concat(t,"/pre-start-check"),label:"Pre-Start Check",isActive:this.isActive("/pre-start-check")},{path:"".concat(t,"/rooms"),label:"Room Details & Scope of Works",isActive:this.isActive("/rooms")}];return this.isActive("/rooms")&&(s.push({path:"".concat(t,"/rooms/overview"),label:Object(a.jsx)("div",{className:"ml-3",children:"Overview & Floor Plan"}),isActive:this.isActive("/rooms/overview")}),s.push({path:"".concat(t,"/rooms/control-room"),label:Object(a.jsxs)("div",{className:"ml-3 text-truncate",children:["Control Readings: ",r&&Object(a.jsx)("span",{title:null===r||void 0===r?void 0:r.name,children:null===r||void 0===r?void 0:r.name})]}),isActive:this.isActive("/rooms/control-room")}),null===o||void 0===o||o.forEach((function(n){s.push({path:"".concat(t,"/rooms/").concat(n.id),label:Object(a.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(a.jsx)("div",{className:"flex-grow-1 text-truncate",children:n.name}),Object(a.jsx)("div",{onClick:function(e){return e.preventDefault()},children:Object(a.jsxs)("div",{className:"d-flex",children:[n.incomplete_works_count>0&&Object(a.jsx)("span",{className:"badge badge-info mr-2",title:"".concat(n.incomplete_works_count," work(s) are incomplete"),children:n.incomplete_works_count}),!c&&Object(a.jsx)(z7,{name:Xf.Duplicate,size:16,color:_.black0,fill:!0,hoverColor:_.blue1,onClick:e.duplicateRoom(n),title:"Create a copy of ".concat(n.name)})]})})]}),isActive:e.isActive("/rooms/".concat(n.id,"/:tab"))})}))),s}},{key:"sidebarMenu",get:function(){var e=this.props,t=e.generalAuthority,n=e.match.url,r=this.state.allWorks.exclusion,o=[];return o.push({path:"".concat(n,"/swe"),label:"Specialist Works and Exclusions",isActive:this.isActive("/swe")}),this.isActive("/swe")&&(o.push({path:"".concat(n,"/swe/works"),label:Object(a.jsx)("div",{className:"ml-3 text-truncate",children:"Specialist Works"}),isActive:this.isActive("/swe/works")}),o.push({path:"".concat(n,"/swe/exclusions"),label:Object(a.jsxs)("div",{className:"ml-3 d-flex justify-content-between",children:[Object(a.jsx)("div",{className:"flex-grow-1 text-truncate",children:"Exclusions"}),Object(a.jsx)("div",{onClick:function(e){return e.preventDefault()},children:Object(a.jsx)("div",{className:"d-flex",children:(null===r||void 0===r?void 0:r.length)>0&&Object(a.jsx)("span",{className:"badge badge-info mr-2",children:r.length})})})]}),isActive:this.isActive("/swe/exclusions")})),o.push({path:"".concat(n,"/contractors"),label:"Sub-Contractors & Notes",isActive:this.isActive("/contractors"),disabled:!t||!j.a.find(t.signatures,{type:"customer"})}),o.push({path:"".concat(n,"/work-completion"),label:"Work Complete",isActive:this.isActive("/work-completion"),disabled:!t||!j.a.find(t.signatures,{type:"customer"})}),o}}]),n}(p.PureComponent);XRe.roomsLookupsLoaded=!1;var $Re=Object(sg.compose)(Object(b.b)((function(e){return{job:e.currentJob.data,jobContacts:e.currentJobContacts.data,preStartCheck:e.waterForm.preStartCheck,generalAuthority:e.waterForm.generalAuthority,workCompletion:e.waterForm.workCompletion}})))(XRe),eDe="WH_STORAGE_ITEMS_FILTERS",tDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).onSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",null===(r=(a=e.props).onSubmit)||void 0===r?void 0:r.call(a,Object(c.a)(Object(c.a)({},n),{},{job_id:null===(o=n.job)||void 0===o?void 0:o.id,filter_by_status:null===(i=n.status)||void 0===i?void 0:i.value,from_date:fv(null===(s=n.from_date)||void 0===s?void 0:s.startOf("day"),!0),to_date:fv(null===(l=n.to_date)||void 0===l?void 0:l.endOf("day"),!0),job:void 0,status:void 0})));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.reset=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.props.reset();case 2:e.props.handleSubmit(e.onSubmit)();case 3:case"end":return t.stop()}}),t)}))),e.searchJobsById=function(e){return e?zy.searchJobs(e):Promise.resolve([])},e.debouncedSearchJobs=Qv()(e.searchJobsById,100),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.statuses,n=e.handleSubmit;return Object(a.jsx)("form",{id:eDe,onSubmit:n(this.onSubmit),children:Object(a.jsxs)("div",{className:"row m-0 align-items-center",children:[Object(a.jsx)("div",{className:"mr-3",style:{width:"150px"},children:Object(a.jsx)(Hv.a,{name:"job",label:"Job Number",component:NO,loadOptions:this.debouncedSearchJobs,getOptionValue:function(e){return e.id.toString()},getOptionLabel:function(e){return zy.getJobName(e)},isClearable:!0})}),t&&Object(a.jsx)("div",{className:"mr-3",style:{width:"150px"},children:Object(a.jsx)(Hv.a,{name:"status",label:"Status",component:xO,options:t,isClearable:!0})}),Object(a.jsx)("div",{className:"mr-3",style:{width:"150px"},children:Object(a.jsx)(Hv.a,{name:"from_date",label:"From Date",component:s_,isClearable:!0})}),Object(a.jsx)("div",{className:"mr-3",style:{width:"150px"},children:Object(a.jsx)(Hv.a,{name:"to_date",label:"To Date",component:s_,isClearable:!0})}),Object(a.jsx)("div",{className:"mr-3 flex-grow-1",children:Object(a.jsx)(Hv.a,{name:"term",label:"Term",placeholder:"Search by customer name, address",component:yg,isClearable:!0})}),Object(a.jsx)("div",{className:"col pt-3",children:Object(a.jsxs)("div",{className:"btn-group",role:"group",children:[Object(a.jsx)("button",{type:"submit",className:"btn btn-primary",children:"Apply"}),Object(a.jsx)("button",{type:"reset",className:"btn btn-dark",onClick:this.reset,children:"Reset"})]})})]})})}}]),n}(p.PureComponent),nDe=Object(sg.compose)(Object(jv.a)({form:eDe}))(tDe);function rDe(){var e=Object(f.a)(["\n  text-transform: uppercase;\n  color: ",";\n  font-weight: ",";\n  margin-bottom: 10px;\n  :not(:first-child){\n    margin-top: 50px;\n  }\n"]);return rDe=function(){return e},e}var aDe,oDe,iDe=y.default.div(rDe(),_.gray4,lm.medium);(oDe=aDe||(aDe={}))[oDe.new=_Y.NEW]="new",oDe[oDe.continued=_Y.IN_PROGRESS]="continued",oDe[oDe.processed=_Y.PROCESSED]="processed",oDe[oDe.completed=_Y.COMPLETED]="completed";var cDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={showFilter:!1,filters:{},data:[]},e.setPageTitle=function(){var t="";switch(e.props.match.params.type){case"new":t="Incoming";break;case"continued":t="Inventories";break;case"processed":t="Ready to Return / Dispose";break;case"completed":t="Returned / Disposed"}Rm.status("Inventories"+(t?" - ":"")+t)},e.eventListeners=[Gy.listen(Ix.WarehousingInventoryAdded,(function(){e.getInventories()})),Gy.listen(Ix.WarehousingInventoryDeleted,(function(){e.getInventories()}))],e.getInventories=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o,i,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=e.state.filters,a=e.props,o=a.dispatch,i=a.warehousingOptions,s=a.match.params.type,!(l=i.selectedLocation)){t.next=8;break}return t.next=6,o(E3(l,Object(c.a)(Object(c.a)({},r),{},{status:aDe[s]}),n));case 6:u=t.sent,n&&n>1?e.setState({data:[].concat(Object(aj.a)(e.state.data),Object(aj.a)(u.data))}):e.setState({data:u.data});case 8:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.dataCondition=function(e,t){var n=pm()().startOf("day"),r=pm()().startOf("month"),a=pm()(t.created_at).unix();switch(e){case"today":return a>n.unix();case"yesterday":return a>n.subtract(1,"day").unix()&&a<n.unix();case"thisWeek":return a>pm()().startOf("week").unix();case"thisMonth":return a>r.unix();case"earlier":return a<r.unix()&&a<=pm()().startOf("week").unix();default:return!0}},e.getTodayItems=function(t){return t.filter((function(t){return e.dataCondition("today",t)}))},e.getThisWeekItems=function(t){return t.filter((function(t){return e.dataCondition("thisWeek",t)&&!e.dataCondition("today",t)}))},e.getThisMonthItems=function(t){return t.filter((function(t){return e.dataCondition("thisMonth",t)&&!e.dataCondition("thisWeek",t)&&!e.dataCondition("today",t)}))},e.getEarlierItems=function(t){return t.filter((function(t){return e.dataCondition("earlier",t)}))},e.getRestMenuItems=function(t,n){var r=[],a=t.has(vx.OPERATIONS_INVENTORY_MANAGE),o=t.has(vx.OPERATIONS_INVENTORY_DELETE);return a&&r.push({name:"Items",onClick:e.goToItems(n.id)}),o&&r.push({name:"Delete",onClick:e.removeInventory(n)}),a&&r.push({type:"divider"}),a&&r.push({name:"Property Return Form",onClick:e.goToForm("inventory-return",n)}),a&&r.push({name:"Disposal Notice",onClick:e.goToForm("inventory-dispose",n)}),2===r.length&&r.splice(1,0,{type:"divider"}),r},e.goToItems=function(t){return function(){var n=e.props.match.params.type;e.props.history.push("/operations/inventories/".concat(n,"/").concat(t,"/items"))}},e.goToForm=function(t,n){return function(){var r=e.props.match.params.type;e.props.history.push({pathname:"/operations/inventories/".concat(n.id,"/forms/").concat(t),state:{type:r}})}},e.removeInventory=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(hC,{children:[Object(a.jsx)("p",{children:"All the inventory items associated with this inventory will also be deleted. Are you sure you want to delete this inventory?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&eQ.deleteInventory(t.id).then((function(){Gy.emit(Ix.WarehousingInventoryDeleted,t)}));case 5:case"end":return n.stop()}}),n)})))},e.loadMore=function(){var t=e.props.inventories.data;return e.getInventories(t.pagination.current_page+1)},e.applyFilters=function(){var t=Object(lj.a)(sj.a.mark((function t(n){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:e.setState({filters:n},(function(){e.getInventories()}));case 1:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.toggleFilters=function(){e.setState({showFilter:!e.state.showFilter})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.setPageTitle(),this.getInventories()}},{key:"componentDidUpdate",value:function(e,t){var n=this;this.setPageTitle();var r=this.props,a=r.warehousingOptions,o=r.match.params.type;(a&&e.warehousingOptions&&null!==a.selectedLocation&&a.selectedLocation!==e.warehousingOptions.selectedLocation||o!==e.match.params.type)&&(o!==e.match.params.type?this.setState({filters:{}},(function(){n.getInventories()})):this.getInventories())}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"renderItemsGroup",value:function(e,t,n){var r=this.props.match.params.type;return 0===t.length?null:Object(a.jsxs)(a.Fragment,{children:[n&&Object(a.jsx)(iDe,{children:n}),Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsxs)(kF,{children:[Object(a.jsx)(CF,{children:"Job No."}),Object(a.jsx)(CF,{children:"Inventory No."}),Object(a.jsxs)(CF,{children:["Total ","processed"===r?"Processed":""," Items"]}),Object(a.jsx)(CF,{children:"Remaining To Check-In"}),Object(a.jsx)(CF,{children:"Status"}),Object(a.jsx)(CF,{children:"QR Code"}),Object(a.jsx)(CF,{children:"\xa0"})]}),Object(a.jsx)(NF,{children:this.renderInventoriesRows(e,t)})]})]})}},{key:"renderNoInventories",value:function(e){return Object(a.jsx)(AF,{children:Object(a.jsx)(EF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Inventories..."})})})}},{key:"renderInventoriesRows",value:function(e,t){var n=this;if(!t||0===t.length)return this.renderNoInventories(e);var r=this.props.match.params.type;return t.map((function(t){var o=n.getRestMenuItems(e,t);return Object(a.jsxs)(IF,{to:"/operations/inventories/".concat(r,"/").concat(t.id,"/items"),children:[Object(a.jsxs)(EF,{children:[Object(a.jsxs)("strong",{children:["#",t.job_number]}),Object(a.jsx)("br",{}),Object(a.jsx)(PF,{className:"text-sm",children:t.address||"Unknown"})]}),Object(a.jsx)(EF,{children:t.id}),Object(a.jsxs)(EF,{children:[t.items_count," items"]}),Object(a.jsxs)(EF,{children:[t.remaining_items_count," items"]}),Object(a.jsx)(EF,{children:t.status}),Object(a.jsx)(EF,{children:Object(a.jsx)(OCe,{value:btoa(JSON.stringify({t:J7.inventory,id:t.id})),size:30,zoom:150,level:"Q"})}),Object(a.jsx)(EF,{children:o.length>0&&Object(a.jsxs)(FF,{children:[Object(a.jsx)(z7,{name:Xf.Trolley,color:_.black0,fill:!0,size:24,className:"mr-3",title:""}),Object(a.jsx)(nw,{items:o,noMargin:!0,direction:"right",iconName:Xf.MenuVertical})]})})]},t.id)}))}},{key:"getJobNumberOptions",value:function(){if(this.props.inventories.data){var e=this.props.inventories.data.data,t=[{value:"",label:"All"}];return e.forEach((function(e){t.push({value:e.job_id.toString(),label:e.job_number})})),j.a.uniqBy(t,"value")}return[]}},{key:"render",value:function(){var e=this,t=this.props.inventories.loading,n=this.state.data,r=this.props.inventories.data,o=this.props.match.params.type,i=this.state.showFilter;return Object(a.jsx)(Cx.Consumer,{children:function(c){return Object(a.jsx)(a.Fragment,{children:Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[Object(a.jsx)("p",{children:Object(a.jsx)("span",{onClick:e.toggleFilters,className:"text-primary cursor-pointer",children:i?"Hide Filters":"Show Filter"})}),Object(a.jsx)("div",{className:i?"":"d-none",children:Object(a.jsx)(nDe,{statuses:"processed"===o?[{label:_Y.PROCESSED,value:_Y.PROCESSED},{label:_Y.IN_PROGRESS,value:_Y.IN_PROGRESS}]:void 0,onSubmit:e.applyFilters})},o),e.renderItemsGroup(c,e.getTodayItems(n),"Today"),e.renderItemsGroup(c,e.getThisWeekItems(n),"This week"),e.renderItemsGroup(c,e.getThisMonthItems(n),"This month"),e.renderItemsGroup(c,e.getEarlierItems(n),"Earlier"),!t&&n&&!n.length&&Object(a.jsx)("div",{className:"mt-4",children:"No items"}),!!n.length&&n.length<r.pagination.total_items&&Object(a.jsx)("div",{className:"text-center print-hide",children:Object(a.jsx)("button",{className:"btn btn-outline-primary btn-sm",onClick:e.loadMore,children:"Load More"})})]})})}})}}]),n}(p.Component),sDe=Object(sg.compose)(Object(b.b)((function(e){return{inventories:e.warehousing.inventories,warehousingOptions:U3(e),locations:e.user.locations}})),O.g,oj({jobs:{fetch:zy.searchJobs,initialData:null}}))(cDe),lDe=(p.PureComponent,function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={jobId:null,status:""},e.getReturnedItems=function(t,n){var r=e.props,a=r.dispatch,o=r.warehousingOptions.selectedLocation||e.primaryLocation();o&&(a(T3(o,t||{},n)),a(M3(o)))},e.primaryLocation=function(){var t=e.props.locations.find((function(e){return!!e.primary}));return t?t.id:null},e.goToItems=function(t){return function(){e.props.history.push("/operations/inventories/".concat(t,"/items"))}},e.removeInventory=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"All the inventory items associated with this inventory will also be deleted. Are you sure you want to delete this inventory?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:n.sent&&eQ.deleteInventory(t.id).then((function(){e.getReturnedItems()}));case 5:case"end":return n.stop()}}),n)})))},e.getRestMenuItems=function(t,n){var r=[];return t.has(vx.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Edit",onClick:e.goToItems(n.id)}),t.has(vx.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Delete",onClick:e.removeInventory(n)}),2===r.length&&r.splice(1,0,{type:"divider"}),r},e.getFilters=function(){var t={value:"",label:"All"},n={value:"",label:"All Jobs"},r={value:"",label:"All"},a=Object.keys(kY).map((function(e){return{value:kY[e],label:kY[e]}}));a.unshift(t);var o=[],i=e.props.returnedDisposedJobs.data;return i&&i.data.length>0&&(o=i.data.map((function(e){return{value:e.job_id,label:e.job_number}}))),o.unshift(n),[{label:"Item name",filterKey:"itemName",options:[],defaultValue:r,type:"text"},{label:"Job Number",filterKey:"jobNumber",options:o,defaultValue:n},{label:"Storage Location",filterKey:"storageLocation",options:[],defaultValue:r},{label:"Status",filterKey:"status",options:a,defaultValue:t}]},e.handleFilter=function(t,n){switch(t){case"status":e.setState({status:n.value},(function(){e.getReturnedItems({job_id:e.state.jobId,status:e.state.status})}));break;case"jobNumber":e.setState({jobId:n.value},(function(){e.getReturnedItems({job_id:e.state.jobId,status:e.state.status})}))}},e.handlePagination=function(t){return e.getReturnedItems({job_id:e.state.jobId,status:e.state.status},t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getReturnedItems()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getReturnedItems({job_id:this.state.jobId,status:this.state.status})}},{key:"renderReturnedItemsRows",value:function(e){var t=this,n=this.props.returnedItems.data.data;return n?n.map((function(n,r){var o=t.getRestMenuItems(e,n);return Object(a.jsxs)(IF,{to:"/operations/inventories/".concat(n.id,"/items"),children:[Object(a.jsx)(EF,{children:n.name}),Object(a.jsxs)(EF,{children:["#",n.inventory.job_number," | ",n.inventory.address]}),Object(a.jsx)(EF,{children:n.quantity}),Object(a.jsx)(EF,{children:n.status}),Object(a.jsx)(EF,{children:n.current_status&&Object(a.jsx)(kS.a,{format:iv,children:n.current_status.created_at})}),Object(a.jsx)(EF,{children:o.length>0&&Object(a.jsx)(FF,{children:Object(a.jsx)(nw,{items:o,noMargin:!0,direction:"right",iconName:Xf.MenuVertical})})})]},r)})):null}},{key:"render",value:function(){var e=this,t=this.props.returnedItems.loading,n=this.props.returnedItems.data,r=n&&n.data.length>0;return Object(a.jsx)(Cx.Consumer,{children:function(o){return Object(a.jsxs)(JC,{children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(E6,{filters:e.getFilters(),handleChange:e.handleFilter}),Object(a.jsxs)(bZ,{className:"table",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:Object(a.jsx)(UF,{children:"Item"})}),Object(a.jsx)(CF,{children:"Job"}),Object(a.jsx)(CF,{children:"Qty"}),Object(a.jsx)(CF,{children:"Status"}),Object(a.jsx)(CF,{children:"Status changed"}),Object(a.jsx)(CF,{})]})}),Object(a.jsx)(NF,{children:r?e.renderReturnedItemsRows(o):null})]}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)(oC,{pagination:n.pagination,onChange:e.handlePagination})]})}})}}]),n}(p.Component)),uDe=Object(sg.compose)(Object(b.b)((function(e){return{returnedItems:e.warehousing.returnedItems,warehousingOptions:U3(e),locations:e.user.locations,returnedDisposedJobs:e.warehousing.returnedDisposedJobs}})),O.g)(lDe),dDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).getStorageUsage=function(t){var n=e.props,r=n.dispatch,a=n.warehousingOptions.selectedLocation||e.primaryLocation();a&&r(R3(a,t))},e.primaryLocation=function(){var t=e.props.locations.find((function(e){return!!e.primary}));return t?t.id:null},e.getFilters=function(){var e={value:"",label:"All items"},t={value:"",label:"All"},n=[],r=[];return n.unshift(e),r.unshift(t),[{label:"Storage Location",filterKey:"storageLocation",options:n,defaultValue:e},{label:"Occupied Status",filterKey:"occupiedStatus",options:r,defaultValue:t}]},e.handleFilter=function(e,t){e},e.handlePagination=function(t){return e.getStorageUsage(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getStorageUsage()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&n.selectedLocation&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getStorageUsage()}},{key:"renderStorageUsageTable",value:function(e){var t=this,n=this.props.storageUsage.data.data;return n?n.map((function(n){return Object(a.jsxs)(HAe,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(YAe,{scope:"col",children:Object(a.jsx)("div",{children:n.name})}),Object(a.jsx)(k9,{scope:"col",width:"10%",children:"Days Used"}),Object(a.jsx)(k9,{scope:"col",width:"15%",children:"Occupied Status"})]})}),Object(a.jsx)("tbody",{children:t.renderTableItems(n.spaces,e)})]})})):null}},{key:"renderTableItems",value:function(e,t){return e?e.map((function(e){return Object(a.jsxs)("tr",{children:[Object(a.jsx)(g9,{children:e.name}),Object(a.jsx)(g9,{children:Object(a.jsx)(kS.a,{fromNow:!0,ago:!0,children:e.created_at})}),Object(a.jsx)(g9,{children:e.status})]},e.id)})):null}},{key:"render",value:function(){var e=this,t=this.props.storageUsage.loading,n=this.props.storageUsage.data,r=n&&n.data.length>0;return Object(a.jsx)(Cx.Consumer,{children:function(o){return Object(a.jsxs)(JC,{children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(E6,{filters:e.getFilters(),handleChange:e.handleFilter}),Object(a.jsx)(GAe,{className:"d-flex flex-column",children:r?e.renderStorageUsageTable(o):null}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)(WAe,{children:Object(a.jsx)(oC,{pagination:n.pagination,onChange:e.handlePagination})})]})}})}}]),n}(p.Component),pDe=Object(sg.compose)(Object(b.b)((function(e){return{storageUsage:e.warehousing.storageUsage,warehousingOptions:U3(e),locations:e.user.locations}})),O.g)(dDe),hDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={jobId:null,status:""},e.getInventories=function(t){var n=e.props,r=n.dispatch,a=n.warehousingOptions.selectedLocation||e.primaryLocation();a&&(r(I3(a,t,e.state.jobId)),r(D3(a,t)))},e.primaryLocation=function(){var t=e.props.locations.find((function(e){return!!e.primary}));return t?t.id:null},e.goToEdit=function(t){return function(){e.props.history.push("/operations/inventories/item/".concat(t,"/details"))}},e.removeInventoryItem=function(t){return Object(lj.a)(sj.a.mark((function n(){var r;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.dispatch,n.next=3,r(iw("Confirm","Delete inventory item ".concat(t.id,"?")));case 3:if(!n.sent){n.next=9;break}return eQ.removeInventoryItem(t.id).then((function(){e.getInventories()})),n.abrupt("return",null);case 9:return n.abrupt("return",Promise.reject(!0));case 10:case"end":return n.stop()}}),n)})))},e.getRestMenuItems=function(t,n){var r=[];return t.has(vx.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Edit",onClick:e.goToEdit(n.id)}),t.has(vx.OPERATIONS_INVENTORY_MANAGE)&&r.push({name:"Delete",onClick:e.removeInventoryItem(n)}),2===r.length&&r.splice(1,0,{type:"divider"}),r},e.getFilters=function(){var t={value:"",label:"All"},n={value:"",label:"All Jobs"},r=Object.keys(_Y).map((function(e){return{value:_Y[e],label:_Y[e]}})),a=[],o=e.props.toReturnDisposeJobs.data;return o&&o.data.length>0&&(a=o.data.map((function(e){return{value:e.job_id,label:e.job_number}}))),r.unshift(t),a.unshift(n),[{label:"Job Number",filterKey:"jobNumber",options:a,defaultValue:n},{label:"Status",filterKey:"status",options:r,defaultValue:t}]},e.handleFilter=function(t,n){switch(t){case"status":e.setState({status:n.value});break;case"jobNumber":e.setState({jobId:n.value},(function(){e.getInventories(1)}))}},e.filterByState=function(t){return e.state.status&&(t=t.filter((function(t){return t.status===e.state.status}))),t},e.handlePagination=function(t){return e.getInventories(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getInventories()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.warehousingOptions;n&&e.warehousingOptions&&null!==n.selectedLocation&&n.selectedLocation!==e.warehousingOptions.selectedLocation&&this.getInventories()}},{key:"renderInventoryTable",value:function(e){var t=this,n=this.filterByState(this.props.inventories.data.data);return n?n.map((function(n){return Object(a.jsxs)(HAe,{className:"table",children:[Object(a.jsx)("thead",{children:Object(a.jsxs)("tr",{children:[Object(a.jsx)(YAe,{scope:"col",children:Object(a.jsxs)("div",{children:["#",n.job_number]})}),Object(a.jsx)(k9,{scope:"col",children:n.address}),Object(a.jsx)(k9,{scope:"col",width:"10%",children:"Qty"}),Object(a.jsx)(k9,{scope:"col",width:"15%",children:"Current Location"}),Object(a.jsx)(k9,{scope:"col",width:"15%",children:"Status"}),Object(a.jsx)(k9,{scope:"col",width:"15%",children:"Status Changed"}),Object(a.jsx)(C9,{scope:"col",width:"5%",children:"\xa0"})]})}),Object(a.jsx)("tbody",{children:t.renderInventoryItems(n.items,e)})]})})):null}},{key:"renderInventoryItems",value:function(e,t){var n=this;return e?e.map((function(e){var r=n.getRestMenuItems(t,e);return Object(a.jsxs)(IF,{to:"/operations/inventories/item/".concat(e.id,"/details"),children:[Object(a.jsx)(g9,{colSpan:2,children:e.name}),Object(a.jsx)(g9,{children:e.quantity}),Object(a.jsx)(g9,{children:e.customer_location}),Object(a.jsx)(g9,{children:e.current_status.status}),Object(a.jsx)(g9,{children:Object(a.jsx)(kS.a,{format:iv,children:e.updated_at})}),Object(a.jsx)("td",{children:r.length>0&&Object(a.jsx)(FF,{children:Object(a.jsx)(nw,{items:r,noMargin:!0,direction:"right",iconName:Xf.MenuVertical})})})]},e.id)})):null}},{key:"render",value:function(){var e=this,t=this.props.inventories.loading,n=this.props.inventories.data,r=n&&n.data.length>0;return Object(a.jsx)(Cx.Consumer,{children:function(o){return Object(a.jsxs)(JC,{children:[t&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(E6,{filters:e.getFilters(),handleChange:e.handleFilter}),Object(a.jsx)(GAe,{className:"d-flex flex-column",children:r?e.renderInventoryTable(o):null}),n&&n.pagination&&n.pagination.last_page>1&&Object(a.jsx)(WAe,{children:Object(a.jsx)(oC,{pagination:n.pagination,onChange:e.handlePagination})})]})}})}}]),n}(p.Component),bDe=Object(sg.compose)(Object(b.b)((function(e){return{inventories:e.warehousing.readyToReturn,toReturnDisposeJobs:e.warehousing.toReturnDisposeJobs,warehousingOptions:U3(e),locations:e.user.locations}})),O.g)(hDe),fDe=n(327);function mDe(){var e=Object(f.a)(["\n  display: flex;\n"]);return mDe=function(){return e},e}function jDe(){var e=Object(f.a)(["\n  border: 1px solid ",";\n  border-radius: 4px;\n  margin-left: 20px;\n  cursor: pointer;\n"]);return jDe=function(){return e},e}var vDe=y.default.button(jDe(),_.gray2),ODe=y.default.div(mDe()),gDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).renderBody=function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)("p",{children:"Your link has been copied to the clipboard. Use this link to send the report to customers or insurers and allow them to approve the costings. This link will allow them to see each inventory item, the restoration status and related photos."}),Object(a.jsxs)(ODe,{children:[Object(a.jsx)(xte,{className:"form-control",type:"text",disabled:!0,value:e.props.link}),Object(a.jsx)(fDe.CopyToClipboard,{text:e.props.link,children:Object(a.jsx)(vDe,{children:"Copy"})})]})]})},e.renderFooter=function(){},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.closeModal,n=e.modalIsOpen;return Object(a.jsx)(qO,{isOpen:n,children:Object(a.jsx)(cg,{onClose:function(){return t("newInventoryModal")},footer:this.renderFooter(),body:this.renderBody(),loading:!1,title:"Get Link"})})}}]),n}(p.Component),xDe=Object(sg.compose)()(gDe),yDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={},e.processing=!1,e.handleScan=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.processing){t.next=20;break}if(e.processing=!0,!n){t.next=19;break}if(e.setState({result:n}),t.prev=4,r=JSON.parse(atob(n)),(o=[J7.space,J7.container]).includes(r.t)){t.next=11;break}e.setState({error:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Unsupported type ",H7[r.t]||r.t," in storage location scan. Please try another QR Code."]}),Object(a.jsx)("p",{className:"text-info",children:"Only following types can be scanned using storage location scan option"}),Object(a.jsx)("ul",{className:"text-info pl-0",children:o.map((function(e){return Object(a.jsx)("ol",{children:H7[e]},e)}))})]})}),t.next=13;break;case 11:return t.next=13,e.assign(H7[r.t],r.id);case 13:t.next=19;break;case 15:t.prev=15,t.t0=t.catch(4),console.log(t.t0),e.setState({error:"Invalid qr code"});case 19:e.processing=!1;case 20:case"end":return t.stop()}}),t,null,[[4,15]])})));return function(e){return t.apply(this,arguments)}}(),e.handleError=function(t){e.setState({error:t.message}),console.error(t.message)},e.assign=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){var a,o,i,c,s,l,u;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({submitting:!0}),o=[],i=[],c=null,"space"!==n){t.next=9;break}return t.next=7,u3.getStorageSpace(r);case 7:s=t.sent,c=s.inventory_storage_space_type;case 9:return e.props.selectedInventoryItems.forEach((function(e){var t=e.placement||{};t[n]||(t[n]={}),t[n].id=r,o.push(eQ.stopPlacement(e.id))})),t.next=12,Promise.all(o);case 12:return e.props.selectedInventoryItems.forEach((function(e){var t,a,o=e.placement||{};o[n]||(o[n]={}),o[n].id=r,i.push(eQ.startPlacement({inventory_item_id:e.id,inventory_storage_container_id:null===(t=o.container)||void 0===t?void 0:t.id,inventory_storage_space_id:null===(a=o.space)||void 0===a?void 0:a.id,is_used_on_ar:!0}))})),t.next=15,Promise.all(i);case 15:if(l=t.sent.map((function(e){return e.data})),!(null===(a=c)||void 0===a?void 0:a.is_chargeable)){t.next=23;break}return t.next=19,u3.getChargingIntervals({inventory_storage_space_type_id:c.id,per_page:500});case 19:(u=t.sent.data).length?e.setState({chargingIntervals:u,placements:l,submitting:!1}):e.props.onClose(),t.next=24;break;case 23:e.props.onClose();case 24:Gy.emit(Ix.WarehousingInventoryItemUpdated);case 25:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.onChargingIntervalSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.inventory_storage_space_type_charging_interval,a=Object(rj.a)(n,["inventory_storage_space_type_charging_interval"]),o=e.state.placements,t.next=4,Promise.all(o.map((function(e){return eQ.assignChargingIntervalToPlacement(Object(c.a)(Object(c.a)({},a),{},{inventory_item_placement_id:e.id,inventory_storage_space_type_charging_interval_id:r.id}))})));case 4:e.props.onClose();case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.renderModalBody=function(){var t=e.state,n=t.error,r=t.result,o=t.chargingIntervals,i=t.placements;if(o){var c=o.find((function(e){return e.is_default}));return Object(a.jsxs)("div",{className:"p-3",children:[Object(a.jsx)("p",{children:"Assign charging interval to scanned location."}),Object(a.jsx)(ZAe,{chargingIntervals:o,placements:i,initialValues:{inventory_storage_space_type_charging_interval:c,charging_interval:null===c||void 0===c?void 0:c.charging_interval,cost_per_interval:null===c||void 0===c?void 0:c.cost_per_interval,charging_rate_per_interval:null===c||void 0===c?void 0:c.charging_rate_per_interval,max_count_to_the_next_interval:null===c||void 0===c?void 0:c.max_count_to_the_next_interval},onSubmit:e.onChargingIntervalSubmit})]})}return Object(a.jsxs)("div",{className:"qr-reader-wrapper",children:[n&&Object(a.jsx)("p",{className:"p-3 text-danger",children:n}),r&&Object(a.jsx)("p",{className:"p-3 text-success",children:r}),Object(a.jsx)(W7.a,{delay:300,onError:e.handleError,onScan:e.handleScan,style:{width:"100%"}})]})},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.isOpen,n=(e.title,e.onClose),r=this.state,o=r.submitting,i=r.chargingIntervals;return Object(a.jsx)(qO,{isOpen:t,children:Object(a.jsx)(cg,{bodyClass:"p-0",onClose:n,loading:o,title:"Scan to Location/Pallet",body:this.renderModalBody(),footer:i&&Object(a.jsx)("button",{type:"submit",form:QAe,className:"btn btn-primary",children:"Save"})})})}}]),n}(p.PureComponent);function _De(){var e=Object(f.a)(["\n  font-weight: bold;\n"]);return _De=function(){return e},e}function wDe(){var e=Object(f.a)(["\n  display: flex;\n  margin-top: 32px;\n  font-size: 15px;\n"]);return wDe=function(){return e},e}function SDe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  input {\n    // max-width: 590px;\n    // margin-right: 10px;\n  }\n"]);return SDe=function(){return e},e}function kDe(){var e=Object(f.a)(["\n  margin-top: 10px;\n"]);return kDe=function(){return e},e}var CDe=y.default.div(kDe()),NDe=y.default.div(SDe()),EDe=(y.default.div(wDe()),y.default.div(_De()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,data:[],filteredData:[]},e.componentDidMount=function(){e.loadData()},e.loadData=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e.setState({loading:!0}),n=e.props.type,r=[],"space"!==n){t.next=9;break}return t.next=6,u3.getStorageSpaces({per_page:500});case 6:r=t.sent.data,t.next=12;break;case 9:return t.next=11,u3.getStorageContainers({per_page:500});case 11:r=t.sent.data;case 12:e.setState({data:r,filteredData:r,loading:!1});case 13:case"end":return t.stop()}}),t)}))),e.filterData=function(t){var n=t.target.value.trim(),r=e.state.data,a=n?r.filter((function(e){return-1!==(e.name||e.label).toLowerCase().indexOf(n)})):r;e.setState({filteredData:a})},e.assign=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({loading:!0}),r=[],a=[],o=e.props.type,e.props.selectedInventoryItems.forEach((function(e){var n=e.placement||{};n[o]||(n[o]={}),n[o].id=t.id,r.push(eQ.stopPlacement(e.id))})),n.next=7,Promise.all(r);case 7:return e.props.selectedInventoryItems.forEach((function(e){var n,r,i=e.placement||{};i[o]||(i[o]={}),i[o].id=t.id,a.push(eQ.startPlacement({inventory_item_id:e.id,inventory_storage_container_id:null===(n=i.container)||void 0===n?void 0:n.id,inventory_storage_space_id:null===(r=i.space)||void 0===r?void 0:r.id,is_used_on_ar:!0}))})),n.next=10,Promise.all(a);case 10:e.props.closeModal(),Gy.emit(Ix.WarehousingInventoryItemUpdated);case 12:case"end":return n.stop()}}),n)})))},e.renderBody=function(){var t=e.state.filteredData;return Object(a.jsxs)("div",{children:[Object(a.jsx)(NDe,{children:Object(a.jsx)(xte,{className:"form-control",type:"text",placeholder:"Search...",onChange:e.filterData})}),t.length>0&&Object(a.jsx)(CDe,{children:Object(a.jsx)(eU,{children:Object(a.jsx)(NF,{children:t.map((function(t){return Object(a.jsx)(AF,{onClick:e.assign(t),children:Object(a.jsxs)(EF,{children:[t.name||t.label,t.location?" (".concat(t.location.code,")"):""]})})}))})})})]})},e.renderFooter=function(){},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.closeModal,n=e.modalIsOpen,r=e.type,o=this.state.loading;return Object(a.jsx)(qO,{isOpen:n,children:Object(a.jsx)(cg,{onClose:t,footer:this.renderFooter(),body:this.renderBody(),loading:o,title:"Assign To ".concat("space"===r?"Location":"Pallet"),scrollY:!0})})}}]),n}(p.Component)),ADe=Object(sg.compose)(Object(b.b)((function(e){return{selectedItems:e.warehousing.selectedPlacements}})))(EDe);function IDe(){var e=Object(f.a)(["\n  margin: 0 5px;\n  font-size: ",";\n"]);return IDe=function(){return e},e}function TDe(){var e=Object(f.a)(["\n  height: 20px;\n  min-width: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  overflow: hidden;\n  border-radius: 100px;\n  background: ",";\n  z-index: 5;\n  color: ",";\n\n  path,\n  circle,\n  line {\n    stroke: ",";\n  }\n\n  * {\n    stroke-width: 2.5px !important;\n  }\n"]);return TDe=function(){return e},e}function RDe(){var e=Object(f.a)(["\n  position: absolute;\n  top: 10px;\n  right: 10px;\n  display: flex;\n  align-items: center;\n  visibility: hidden;\n\n  > * {\n    margin-left: 5px;\n  }\n"]);return RDe=function(){return e},e}function DDe(){var e=Object(f.a)(["\n  padding: 10px;\n  border: 0;\n  width: 100%;\n  font-weight: ",";\n  font-size: ",";\n  outline: none;\n  background: ",";\n  color: ",";\n"]);return DDe=function(){return e},e}function MDe(){var e=Object(f.a)(["\n  background-size: contain;\n  background-repeat: no-repeat;\n  background-position: center;\n  background-color: ",";\n  background-image: url(",");\n  width: 100%;\n  height: 150px;\n"]);return MDe=function(){return e},e}function LDe(){var e=Object(f.a)(["\n  width: 230px;\n  margin: 0 20px 20px 0;\n  overflow: hidden;\n  border-radius: 4px;\n  position: relative;\n  box-shadow: 0 0 0 1px ",";\n  cursor: pointer;\n\n  :hover {\n    background: ",";\n\n    & .tools {\n      visibility: visible !important;\n    }\n  }\n"]);return LDe=function(){return e},e}var PDe=y.default.div(LDe(),_.gray2,_.blue0),FDe=y.default.div(MDe(),_.gray0,(function(e){return e.backgroundImage||"***"})),UDe=Object(y.default)(gv(["selected"])("input"))(DDe(),lm.medium,sm.smaller,(function(e){return e.selected?_.blue0:"transparent"}),(function(e){return e.selected?_.black1:_.gray5})),BDe=y.default.div(RDe()),VDe=Object(y.default)(gv(["br","color"])("div"))(TDe(),(function(e){return e.bg}),(function(e){return e.color?e.color:_.white}),(function(e){return e.color?e.color:_.white})),JDe=y.default.span(IDe(),sm.smaller),qDe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={description:e.props.photo.description,thumbnailUrl:"",loading:!1,url:e.props.photo.photo.url},e.counter=0,e.startUpdate=Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),e.onDescriptionChangeInternal=function(t){e.setState({description:t.target.value}),e.debouncedDescriptionChange(t.target.value)},e.debouncedDescriptionChange=Object(m.debounce)((function(t){var n=e.props,r=n.onDescriptionChange,a=n.photo.photo.id;e.setState({loading:!0}),r(t,a).finally((function(){e.setState({loading:!1})}))}),1500),e.uploadPhoto=function(t){var n=e.props,r=n.photo.photo.id,a=n.onPhotoUpdate,o=new FormData;o.append("file",t),a(o,r).finally((function(){e.setState({loading:!1})}))},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhoto(t.target.files[0]))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props.photo.photo.thumbnails;(null===e||void 0===e?void 0:e.length)?this.setState({thumbnailUrl:e[0].url,url:e[0].url}):e&&e[0]&&e[0].url||this.startUpdate()}},{key:"render",value:function(){var e=this.props,t=e.photo.photo,n=(t.thumbnails,t.id),r=e.onExpand,o=e.photo,i=e.selected,c=e.noUpdate,s=e.setSelectedPhotos,l=e.onlyView,u=this.state,d=u.description,p=u.loading,h=u.thumbnailUrl,b=u.url;return Object(a.jsxs)(PDe,{children:[Object(a.jsxs)(BDe,{className:"tools",children:[Object(a.jsx)(VDe,{bg:_.gray1,color:_.black0,onClick:function(){return r(n)},children:Object(a.jsx)(cm,{name:Xf.Expand,size:10})}),!c&&!l&&Object(a.jsx)(VDe,{bg:_.blue5,color:_.white,onClick:this.onUploadLinkClick,children:Object(a.jsx)(JDe,{children:"Update"})})]}),Object(a.jsx)(FDe,{backgroundImage:""!==b||void 0!==b?"".concat(b):h,onClick:c?void 0:function(){return null===s||void 0===s?void 0:s(o)}}),Object(a.jsx)(UDe,{type:"text",onChange:this.onDescriptionChangeInternal,value:d,selected:i,disabled:c,placeholder:c?"Editing is disabled":"Enter a short description..."}),p&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("input",{type:"file",accept:OMe,hidden:!0,disabled:c,onChange:this.onFileInputChange,ref:this.inputRef})]})}}]),n}(p.PureComponent),zDe=Object(b.b)()(qDe);function GDe(){var e=Object(f.a)(["\n  transform: rotate(","deg);\n  cursor: pointer;\n  path,\n  circle,\n  line,\n  polyline,\n  polygon,\n  rect {\n    stroke: ",";\n  }\n\n  :hover path,\n  :hover line,\n  :hover circle,\n  :hover polygon,\n  :hover rect,\n  :hover polyline {\n    stroke: ",";\n  }\n"]);return GDe=function(){return e},e}function WDe(){var e=Object(f.a)(["\n  height: 50px;\n  padding: 20px;\n  background: ",";\n  color: ",";\n  border-radius: 6px;\n  display: flex;\n  align-items: center;\n  bottom: 20px;\n  position: absolute;\n  overflow: hidden;\n"]);return WDe=function(){return e},e}function HDe(){var e=Object(f.a)(["\n  position: fixed;\n  bottom: 0;\n  width: 100%;\n  height: 0;\n  display: flex;\n  justify-content: center;\n  z-index: 100;\n"]);return HDe=function(){return e},e}function YDe(){var e=Object(f.a)(["\n  position: relative;\n  z-index: 2;\n  margin: auto;\n  transition: 0.3s;\n  width: ","px;\n  height: ","px;\n\n  > img {\n    width: 100%;\n    height: 100%;\n  }\n"]);return YDe=function(){return e},e}function QDe(){var e=Object(f.a)(["\n  position: absolute;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n"]);return QDe=function(){return e},e}function KDe(){var e=Object(f.a)(["\n  display: flex;\n  min-height: 100%;\n  width: 100%;\n  position: relative;\n  padding: 20px 0 90px 0;\n"]);return KDe=function(){return e},e}function ZDe(){var e=Object(f.a)(["\n  height: 100%;\n  overflow: auto;\n  position: relative;\n"]);return ZDe=function(){return e},e}function XDe(){var e=Object(f.a)(["\n  color: ",";\n"]);return XDe=function(){return e},e}function $De(){var e=Object(f.a)(["\n  position: relative;\n  top: 0px;\n  display: flex;\n  justify-content: space-between;\n  width: 100%;\n  height: ","px;\n  padding: 0 30px;\n  background: ",";\n  text-align: right;\n  z-index: 100;\n  border-bottom: 1px solid ",";\n"]);return $De=function(){return e},e}function eMe(){var e=Object(f.a)(["\n  position: fixed;\n  width: 100%;\n  height: 100%;\n  top: 0;\n  left: 0;\n  display: flex;\n  flex-direction: column;\n"]);return eMe=function(){return e},e}var tMe=y.default.div(eMe()),nMe=y.default.div($De(),WO,_.white,_.gray2),rMe=y.default.div(XDe(),_.gray5),aMe=y.default.div(ZDe()),oMe=y.default.div(KDe()),iMe=y.default.div(QDe()),cMe=y.default.div(YDe(),(function(e){return e.width?e.width:0}),(function(e){return e.height?e.height:0})),sMe=y.default.div(HDe()),lMe=y.default.div(WDe(),_.menu,_.white),uMe=Object(y.default)(gv(["color","rotate"])(cm))(GDe(),(function(e){return e.rotate}),(function(e){return e.color?e.color:_.black1}),_.blue4),dMe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).getCurrentPhotoIndex=function(){var t=e.props,n=t.photos,r=t.currentPhotoId,a=n.map((function(e){return e.photo.id})).indexOf(r);return a>-1?a:0},e.state={currentIndex:e.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1},e.zoomDelta=.2,e.setZoom=function(t){"+"===t&&e.setState({zoom:e.state.zoom+e.zoomDelta}),"-"===t&&e.state.zoom>1.1*e.zoomDelta&&e.setState({zoom:e.state.zoom-e.zoomDelta})},e.setPhoto=function(t){var n=e.props.photos;"+"===t&&e.state.currentIndex<n.length-1&&e.setState({currentIndex:e.state.currentIndex+1}),"-"===t&&e.state.currentIndex>0&&e.setState({currentIndex:e.state.currentIndex-1})},e.rotateImage=function(){e.setState({rotateDegrees:e.state.rotateDegrees+1})},e.downloadPhoto=function(){var t=e.props,n=t.inventoryItem,r=t.photos[e.state.currentIndex],a=r.photo,o=r.description,i=r.updated_at;e.setState({bottomToolsLoading:!0}),RV.downloadPhoto(a.id,"".concat(n.id,"_").concat(o?o.split(" ").join("_"):"","_").concat(pm()(i).format("YYYYMMDD"),".").concat(a.mime_type.split("/")[1])).then((function(){e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.printPhoto=function(){var t=e.props.photos[e.state.currentIndex].photo;e.setState({bottomToolsLoading:!0}),RV.getPhotoData(t.id).then((function(t){MV()({printable:window.URL.createObjectURL(t),type:"image"}),e.setState({bottomToolsLoading:!1})})).catch((function(){e.setState({bottomToolsLoading:!1})}))},e.deletePhoto=Object(lj.a)(sj.a.mark((function t(){var n,r,o,i,c,s;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.inventoryItem,o=n.photos,i=n.updateParentPhotos,c=n.dispatch,s=o[e.state.currentIndex].photo,t.next=4,c(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete the image from this item?"}),Object(a.jsx)("p",{children:"This action cannot be undone."})]})));case 4:if(!t.sent){t.next=18;break}return e.setState({bottomToolsLoading:!0}),t.prev=7,t.next=10,eQ.detachPhoto(r.id,s.id);case 10:return t.next=12,i();case 12:e.setState({bottomToolsLoading:!1}),t.next=18;break;case 15:t.prev=15,t.t0=t.catch(7),e.setState({bottomToolsLoading:!1});case 18:case"end":return t.stop()}}),t,null,[[7,15]])}))),e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(e,t){var n=this.props,r=n.currentPhotoId,a=n.photos,o=n.onClose;r===e.currentPhotoId&&a.length===e.photos.length||this.setState({currentIndex:this.getCurrentPhotoIndex(),zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),this.state.currentIndex!==t.currentIndex&&this.setState({zoom:1,rotateDegrees:0,bottomToolsLoading:!1}),a.length<1&&o()}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOpen,r=t.onClose,o=t.customModal,i=t.inventoryItem,c=t.photos,s=t.noUpdate,l=t.onlyView,u=this.state,d=u.currentIndex,p=u.zoom,h=u.rotateDegrees,b=u.bottomToolsLoading,f=c[d]||{},m=f.photo,j=f.description,v=f.created_at,O=f.updated_at,g=f.creator,x=f.modified_by;return Object(a.jsx)(qO,{isOpen:n,children:Object(a.jsx)(cg,{onClose:r,customModal:o,children:Object(a.jsx)(tMe,{children:m&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("div",{children:Object(a.jsxs)(nMe,{className:"align-items-center",children:[Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(uMe,{name:Xf.Chevron,size:20,rotate:45,color:_.black1,onClick:r}),Object(a.jsx)("span",{style:{marginLeft:"10px"},children:j})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{children:i.name}),Object(a.jsx)(rMe,{children:v===O?"Created ".concat(pm()(v).format(lv)," by ").concat(mm(g).name):"Modified ".concat(pm()(O).format(lv)," ").concat(x?"by "+mm(x).name:"")})]})]})}),Object(a.jsx)(aMe,{children:Object(a.jsxs)(oMe,{children:[Object(a.jsx)(iMe,{onClick:r}),Object(a.jsxs)(cMe,{width:h%2>0?m.height*p:m.width*p,className:"d-flex align-items-center justify-content-center",height:h%2>0?m.width*p:m.height*p,children:[Object(a.jsx)("div",{style:{width:"".concat(h%2>0?m.height*p:m.width*p,"px"),height:"".concat(h%2>0?m.width*p:m.height*p,"px")}}),Object(a.jsx)(cMe,{width:m.width*p,height:m.height*p,style:{transform:"rotateZ(".concat(-90*h,"deg)"),position:"absolute"},children:Object(a.jsx)("img",{src:m.url},m.id)},m.id)]},m.id)]})}),Object(a.jsx)(sMe,{children:Object(a.jsxs)(lMe,{children:[b&&Object(a.jsx)(Nv,{size:40,color:_.menu}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsx)(uMe,{name:Xf.Chevron,size:20,rotate:45,color:_.white,onClick:function(){return e.setPhoto("-")}}),Object(a.jsxs)("div",{style:{margin:"0 10px"},children:[d+1," of ",c.length]}),Object(a.jsx)(uMe,{name:Xf.Chevron,size:20,rotate:-135,color:_.white,onClick:function(){return e.setPhoto("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center",style:{margin:"0 50px"},children:[Object(a.jsx)(uMe,{name:Xf.SubtractCircle,size:20,rotate:0,color:_.white,onClick:function(){return e.setZoom("-")}}),Object(a.jsxs)("div",{style:{margin:"0 15px"},children:[(100*p).toFixed(0),"%"]}),Object(a.jsx)(uMe,{name:Xf.AddCircle,size:20,rotate:0,color:_.white,onClick:function(){return e.setZoom("+")}})]}),Object(a.jsxs)("div",{className:"d-flex align-items-center justify-content-between",style:{width:"150px"},children:[Object(a.jsx)(uMe,{name:Xf.Rotate,size:20,rotate:0,color:_.white,onClick:this.rotateImage}),Object(a.jsx)(uMe,{name:Xf.Download,size:20,rotate:0,color:_.white,onClick:this.downloadPhoto}),Object(a.jsx)(uMe,{name:Xf.Printer,size:20,rotate:0,color:_.white,onClick:this.printPhoto}),!s&&!l&&Object(a.jsx)(uMe,{name:Xf.Trash,size:20,rotate:0,color:_.white,onClick:this.deletePhoto})]})]})})]})})})})}}]),n}(p.PureComponent),pMe=Object(b.b)()(dMe);function hMe(){var e=Object(f.a)(["\n  position: absolute;\n  top: 20px;\n  right: 30px;\n  display: inline-block;\n  color: ",";\n  cursor: pointer;\n  font-size: ",";\n\n  :hover {\n    color: ",";\n    text-decoration: underline;\n  }\n"]);return hMe=function(){return e},e}function bMe(){var e=Object(f.a)(["\n  color: transparent;\n  filter: grayscale(1);\n"]);return bMe=function(){return e},e}function fMe(){var e=Object(f.a)(["\n  color: ",";\n  cursor: pointer;\n\n  :hover {\n    text-decoration: underline;\n    color: ",";\n  }\n"]);return fMe=function(){return e},e}function mMe(){var e=Object(f.a)(["\n  font-weight: ",";\n"]);return mMe=function(){return e},e}function jMe(){var e=Object(f.a)(["\n  display: flex;\n  width: 100%;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n  margin: 10px 0 40px 0;\n"]);return jMe=function(){return e},e}function vMe(){var e=Object(f.a)(["\n  padding: 0px 30px 30px 30px;\n  display: flex;\n  flex-grow: 1;\n  position: relative;\n  flex-wrap: wrap;\n  align-items: flex-start;\n  align-content: flex-start;\n"]);return vMe=function(){return e},e}var OMe="image/jpeg,image/png",gMe=y.default.div(vMe()),xMe=y.default.div(jMe()),yMe=mC.SortedGroupTitle,_Me=y.default.div(mMe(),lm.bold),wMe=y.default.span(fMe(),_.blue4,_.blue5),SMe=y.default.div(bMe()),kMe=y.default.div(hMe(),_.blue4,sm.smaller,_.blue5),CMe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!1,filmstrip:!1,currentPhotoId:void 0,blockLoading:!1},e.handleDrop=function(t){t.preventDefault(),t.dataTransfer.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.dataTransfer.files))},e.uploadPhotos=function(t){var n,r=[],o=["png","jpeg","jpg"],i=Object(oV.a)(t);try{for(i.s();!(n=i.n()).done;){var c=n.value,s=(c.name.split(".").pop()||"").toLowerCase();if(o.includes(s)){var l=new FormData;l.append("file",c),r.push(RV.uploadPhoto(l).then((function(t){return e.props.inventoryItem?eQ.attachPhoto(e.props.inventoryItem.id,t.data.id,{description:""}):t.data})))}else Oj(uj.Warning,Object(a.jsxs)(a.Fragment,{children:["Type ",Object(a.jsxs)("strong",{children:[".",s]})," is not supported!"]}))}}catch(u){i.e(u)}finally{i.f()}0===r.length?e.setState({loading:!1}):Promise.all(r).then((function(t){setTimeout((function(){var n,r;null===(n=(r=e.props).loadPhotos)||void 0===n||n.call(r,void 0,t),e.setState({loading:!1})}),500)})).catch((function(){e.setState({loading:!1})}))},e.onDragOver=function(e){e.preventDefault()},e.changeDescription=function(t,n){var r=e.props.inventoryItem;return eQ.updateAttachedPhoto(r.id,n,{description:t})},e.onPhotoUpdate=function(){var t=Object(lj.a)(sj.a.mark((function t(n,r){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",RV.updatePhoto(r,n).then((function(){return e.props.loadPhotos()})));case 1:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.openFilmstrip=function(t){e.setState({currentPhotoId:t,filmstrip:!0})},e.closeFilmstrip=function(){e.setState({filmstrip:!1})},e.inputRef=p.createRef(),e.onUploadLinkClick=function(){e.inputRef.current&&e.inputRef.current.click()},e.onFileInputChange=function(t){t.target.files.length>0&&(e.setState({loading:!0}),e.uploadPhotos(t.target.files))},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this,t=this.props,n=t.photos,r=t.selectedPhotos,o=t.inventoryItem,i=t.onlyView,c=this.state,s=c.loading,l=c.blockLoading,u=c.filmstrip,d=c.currentPhotoId,p=this.groupedPhotos;return Object(a.jsxs)(gMe,{onDragOver:this.onDragOver,onDrop:this.handleDrop,children:[n&&Object(a.jsxs)(a.Fragment,{children:[p.length>0?Object(a.jsxs)(a.Fragment,{children:[!i&&Object(a.jsx)(kMe,{onClick:this.onUploadLinkClick,children:"Add photos"}),p.map((function(t,n){return Object(a.jsxs)("div",{style:{width:"100%"},children:[!i&&Object(a.jsx)(yMe,{children:pm()(1e3*t.unix).format("ddd, D MMM YYYY")}),Object(a.jsx)(xMe,{children:t.items.map((function(t){return Object(a.jsx)(zDe,{photo:t,selected:!!(null===r||void 0===r?void 0:r.find((function(e){return e.id===t.photo.id}))),noUpdate:!1,onExpand:e.openFilmstrip,onDescriptionChange:e.changeDescription,onPhotoUpdate:e.onPhotoUpdate,setSelectedPhotos:e.props.setSelectedPhotos,onlyView:!0},t.photo.id)}))})]},n)}))]}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(SMe,{className:"w-100 d-flex justify-content-center empty-icon",children:Object(a.jsx)(cm,{name:Xf.Barista,size:200})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center empty-msg",children:Object(a.jsx)(_Me,{children:"No photos have been uploaded"})}),Object(a.jsx)("div",{className:"w-100 d-flex justify-content-center",children:Object(a.jsxs)("div",{style:{textAlign:"center"},children:["Drag and drop to add photos or ",Object(a.jsx)(wMe,{onClick:this.onUploadLinkClick,children:"click here"})," to ",Object(a.jsx)("br",{})," ","upload the old fashioned way."]})})]}),d&&Object(a.jsx)(pMe,{isOpen:u,inventoryItem:o,customModal:!0,noUpdate:!1,photos:this.sortedPhotos,currentPhotoId:d,updateParentPhotos:this.props.loadPhotos,onClose:this.closeFilmstrip,onlyView:i})]}),s&&!l&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)("input",{type:"file",id:"file-input",accept:OMe,multiple:!0,hidden:!0,onChange:this.onFileInputChange,ref:this.inputRef})]})}},{key:"groupedPhotos",get:function(){var e=this.props.photos;return(null===e||void 0===e?void 0:e.length)?jm(e,"photo.created_at"):[]}},{key:"sortedPhotos",get:function(){var e=this.props.photos;return e?e.sort((function(e,t){return pm()(e.created_at)>pm()(t.created_at)?-1:1})):[]}}]),n}(p.PureComponent);function NMe(){var e=Object(f.a)(["\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  border-radius: 5px;\n  margin-bottom: 1px;\n"]);return NMe=function(){return e},e}function EMe(){var e=Object(f.a)(["\n  .empty-icon,.empty-msg{display:none !important;}\n"]);return EMe=function(){return e},e}function AMe(){var e=Object(f.a)(["\n  &:not(:last-child){\n    margin-right: 1rem;\n  }\n  cursor: pointer;\n"]);return AMe=function(){return e},e}function IMe(){var e=Object(f.a)(["\n  background: ",";\n  color: ",";\n  border-radius: 4px;\n"]);return IMe=function(){return e},e}function TMe(){var e=Object(f.a)(["\n  position: sticky;\n  width: 100%;\n  z-index: 1;\n  top: 0px;\n"]);return TMe=function(){return e},e}function RMe(){var e=Object(f.a)(["\n  margin-bottom: 50px;\n  "," {\n    font-weight: ",";\n    color: black !important;\n  }\n  ",", "," {\n    "," {\n      // width: 40%;\n    }\n    "," {\n      .more-menu {\n        float: right;\n      }\n    }\n  }\n"]);return RMe=function(){return e},e}function DMe(){var e=Object(f.a)(["\n  label{margin: 0 .5rem 0 0;}\n"]);return DMe=function(){return e},e}function MMe(){var e=Object(f.a)(["\n  font-size: 18px;\n  margin: 0px 0 30px 0px;\n  font-weight: bold;\n"]);return MMe=function(){return e},e}function LMe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return LMe=function(){return e},e}function PMe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  border-color: #42a6e6;\n  box-shadow: 0 0 0 !important;\n\n  padding: 5px 12px;\n  color: #3498db;\n  cursor: pointer;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  margin: 0 10px;\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]);return PMe=function(){return e},e}function FMe(){var e=Object(f.a)(["\n  // background-color: #3498db;\n  // padding: 3px 12px 8px 12px;\n  // border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return FMe=function(){return e},e}function UMe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return UMe=function(){return e},e}function BMe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return BMe=function(){return e},e}function VMe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return VMe=function(){return e},e}var JMe=y.default.div(VMe()),qMe=y.default.div(BMe()),zMe=y.default.div(UMe()),GMe=Object(y.default)(nw)(FMe()),WMe=(y.default.button(PMe()),y.default.div(LMe())),HMe=(y.default.div(MMe()),Object(y.default)(EF)(DMe())),YMe=Object(y.default)(eU)(RMe(),CF,lm.bold,AF,IF,HMe,EF),QMe=y.default.div(TMe()),KMe=y.default.div(IMe(),_.menu,_.white1),ZMe=y.default.div(AMe()),XMe=y.default.div(EMe()),$Me=y.default.div(NMe(),_.gray1,_.gray2),eLe=Object.keys(wY).map((function(e){return{value:wY[e],label:wY[e]}})),tLe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).clipboardRef=void 0,r.state={loading:!0,inventory:{},expanded:!1,selectedStatus:{value:"",label:"All"},selectedLocation:{value:"",label:"All"},selectedDate:{value:"",label:"All"},selectedItem:"",showReportModal:!1,linkReport:"",spaces:[],showCompleted:"new"!==r.props.match.params.type,jobContacts:[]},r.eventListeners=[Gy.listen(Ix.WarehousingInventoryItemAdded,(function(){return r.makeVisiableData()})),Gy.listen(Ix.WarehousingInventoryItemUpdated,(function(){return r.makeVisiableData()})),Gy.listen(Ix.WarehousingInventoryItemRemoved,(function(){return r.makeVisiableData()}))],r.makeVisiableData=function(){var e=Number(r.props.match.params.inventory_id);r.setState({loading:!0}),r.getData(e).then((function(e){var t=e[1];r.setState({loading:!1,inventory:e[0].data,inventoryItems:t,spaces:e[2].data,jobContacts:e[3]})}))},r.getData=function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n,a,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=[eQ.getInventoryInfo(t),r.loadItems(t),eQ.getSpaces()],e.next=3,Promise.all(n);case 3:return a=e.sent,e.next=6,zy.getContacts(a[0].data.job.id);case 6:return o=e.sent,e.abrupt("return",[].concat(Object(aj.a)(a),[o]));case 8:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r.handlePagination=function(e){return r.loadItems(void 0,e)},r.loadItems=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var a,o,i;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({loading:!0}),t=t||r.state.inventory.id,a={page:n,per_page:30,placement:r.state.showCompleted?"all":"without-placement"},o=r.props.match.params.type,e.t0=o,e.next="processed"===e.t0?7:"completed"===e.t0?9:11;break;case 7:return a.statuses=[wY.READY_FOR_RETURN,wY.READY_TO_DISPOSE],e.abrupt("break",11);case 9:return a.statuses=[wY.RETURNED,wY.DISPOSED,wY.CLIENT_PICKED_UP,wY.LEFT_ON_SITE],e.abrupt("break",11);case 11:return e.next=13,eQ.getInventoryItems(t,a);case 13:return i=e.sent,r.setState({loading:!1,inventoryItems:i}),e.abrupt("return",i);case 16:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),r.toggleSelection=function(e){return function(){var t=r.state.inventoryItems;null===t||void 0===t||t.data.forEach((function(t){t.id===e.id&&(t.selected=!t.selected)})),r.setState({inventoryItems:Object(c.a)({},t)})}},r.toggleBulkSelection=function(e){var t=r.state.inventoryItems;null===t||void 0===t||t.data.forEach((function(t){t.selected=e})),r.setState({inventoryItems:Object(c.a)({},t)})},r.goToEdit=function(e){return function(){var t=Number(r.props.match.params.inventory_id),n=r.props.match.params.type;r.props.history.push("/operations/inventories/".concat(n,"/").concat(t,"/item/").concat(e,"/details"))}},r.getMoreMenuItems=function(e){return[{name:"Edit",onClick:r.goToEdit(e.id)},{name:"Delete",onClick:r.removeInventoryItem(e)}]},r.removeInventoryItem=function(e){return Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=r.props.dispatch,t.next=3,n(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("p",{children:["Are you sure you want to delete inventory item ",Object(a.jsxs)("strong",{children:["#",e.id," ",e.name]})," from the list?"]}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:t.sent&&eQ.removeInventoryItem(e.id).then((function(){r.makeVisiableData()}));case 5:case"end":return t.stop()}}),t)})))},r.removeSelectedInventoryItem=Object(lj.a)(sj.a.mark((function e(){var t,n,o;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=r.props.dispatch,e.next=3,t(iw("Confirm","Confirm!",Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)("p",{children:"Are you sure you want to delete selected inventory items from the list?"}),Object(a.jsx)("p",{children:"This action cannot be undone!"})]})));case 3:e.sent&&(n=r.state.inventoryItems,o=[],null===n||void 0===n||n.data.forEach((function(e){if(e.selected){var t=e.id;o.push(eQ.removeInventoryItem(t))}})),Promise.all(o).then((function(){r.makeVisiableData()})));case 5:case"end":return e.stop()}}),e)}))),r.renderTrigger=function(){return Object(a.jsx)(cm,{name:Xf.MenuVertical,size:20})},r.getTopHeaderMenuItems=function(){var e=r.state.showCompleted;return[].concat([{name:"".concat(e?"Hide":"Show"," complete inventory"),key:"completed",onClick:function(){r.setState({showCompleted:!e},r.makeVisiableData)}}])},r.markStatus=function(e){return function(){var t=r.state.inventoryItems;if(0!==r.getSelecetedCount()){var n=[];null===t||void 0===t||t.data.forEach((function(t){if(t.selected){var r=t.current_status;n.push(eQ.markInventoryItemStatus(r.inventory_item_id,r.user_id,e))}})),r.setState({loading:!0}),Promise.all(n).then((function(){r.makeVisiableData()})).finally((function(){}))}}},r.getSelecetedCount=function(){var e=r.state.inventoryItems;if(null===e||void 0===e?void 0:e.data.length){var t=0;return e.data.forEach((function(e){e.selected&&t++})),t}return 0},r.getSelectedItems=function(){var e=r.state.inventoryItems;if(null===e||void 0===e?void 0:e.data.length){var t=[];return e.data.forEach((function(e){e.selected&&t.push(e)})),t}return[]},r.showModal=function(e,t){return function(){r.setState({modal:e,modalData:t})}},r.hideModal=function(){r.setState({modal:void 0})},r.renderModal=function(){var e=r.state,t=e.modal,n=e.modalData;switch(t){case"assign":return Object(a.jsx)(ADe,Object(c.a)({closeModal:r.hideModal,modalIsOpen:!0,selectedInventoryItems:r.getSelectedItems()},n));case"scan":return Object(a.jsx)(yDe,Object(c.a)({onClose:r.hideModal,isOpen:!0,selectedInventoryItems:r.getSelectedItems()},n));case"report":return Object(a.jsx)(xDe,{closeModal:function(){return r.setState({showReportModal:!1})},modalIsOpen:!0,link:r.state.linkReport});case"new_item":var o=n||{},i=o.photos,s=void 0===i?[]:i,l=Object(rj.a)(o,["photos"]);return Object(a.jsx)(B9,{isOpen:!0,title:"Add Inventory Item",body:Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(rIe,Object(c.a)(Object(c.a)({},l),{},{afterSubmit:function(e){null===s||void 0===s||s.map((function(t){eQ.attachPhoto(e.id,t.id,{description:""})})),r.hideModal()}})),Object(a.jsx)("hr",{}),Object(a.jsxs)(XMe,{className:"",children:[Object(a.jsx)("p",{children:Object(a.jsx)("strong",{children:"Photos"})}),Object(a.jsx)(CMe,{photos:[],loadPhotos:function(){var e=Object(lj.a)(sj.a.mark((function e(t,a){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:r.setState({modalData:Object(c.a)(Object(c.a)({},n),{},{photos:[].concat(Object(aj.a)(n.photos||[]),Object(aj.a)(a||[]))})});case 1:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}()}),null===s||void 0===s?void 0:s.map((function(e){return Object(a.jsxs)($Me,{className:"p-2 d-flex align-items-center",children:[Object(a.jsx)("div",{className:"flex-grow-1",children:e.file_name}),Object(a.jsx)("div",{className:"cursor-pointer",children:Object(a.jsx)(cm,{name:Xf.Delete,size:14,title:"Remove photo",onClick:function(){r.setState({modalData:Object(c.a)(Object(c.a)({},n),{},{photos:s.filter((function(t){return t.id!==e.id}))})})}})})]})}))]})]}),id:tIe,onClose:r.hideModal})}return null},r.renderToolbar=function(){return Object(a.jsxs)(QMe,{className:"d-flex justify-content-center mb-3",children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"bottom",id:"toolbar_item_tooltip"}),Object(a.jsxs)(KMe,{className:"px-3 py-2 d-flex align-items0center",children:[Object(a.jsx)(ZMe,{"data-tip":"Scan QR code","data-for":"toolbar_item_tooltip",onClick:r.showModal("scan"),children:Object(a.jsx)(z7,{color:_.white,fill:!0,name:Xf.QRCode,size:16})}),Object(a.jsx)("div",{className:"mr-3",children:"OR"}),Object(a.jsx)(ZMe,{"data-tip":"Change status","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(GMe,{items:eLe.map((function(e){return{key:e.value,name:"".concat(e.label),onClick:r.markStatus(e.label)}})),noMargin:!0,direction:"right",trigger:function(){return Object(a.jsx)(z7,{color:_.white,name:Xf.Flag,size:16})}})}),Object(a.jsx)(ZMe,{"data-tip":"Assign to location","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(z7,{color:_.white,name:Xf.PinMap,size:16,onClick:r.showModal("assign",{type:"space"})})}),Object(a.jsx)(ZMe,{"data-tip":"Assign to pallet","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(z7,{color:_.white,name:Xf.ShipmentUpload,size:16,onClick:r.showModal("assign",{type:"container"})})}),Object(a.jsx)(ZMe,{"data-tip":"Delete","data-for":"toolbar_item_tooltip",children:Object(a.jsx)(z7,{color:_.white,fill:!0,name:Xf.Delete,size:16,onClick:r.removeSelectedInventoryItem})})]})]})},r.clipboardRef=h.a.createRef(),r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.makeVisiableData(),Rm.status("Inventory Items")}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=e.match.params,o=a.type,i=a.inventory_id;n===o&&r===i||this.makeVisiableData()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"renderItems",value:function(){var e,t=this.state.inventoryItems;if(!(null===t||void 0===t||null===(e=t.data)||void 0===e?void 0:e.length))return null;var n=t.data.filter((function(e){return e.selected})),r=[];return r.push(Object(a.jsxs)(YMe,{className:"table m-0",children:[Object(a.jsx)(kF,{children:Object(a.jsxs)(AF,{children:[Object(a.jsx)(CF,{children:Object(a.jsx)("div",{className:"p-2",children:Object(a.jsx)(nI,{value:n.length===t.data.length,size:15,onChange:this.toggleBulkSelection})})}),Object(a.jsx)(CF,{children:"Item No."}),Object(a.jsx)(CF,{children:"Description"}),Object(a.jsx)(CF,{children:"Qty."}),Object(a.jsx)(CF,{children:"Storage Location"}),Object(a.jsx)(CF,{children:"Condition"}),Object(a.jsx)(CF,{children:"Status"}),Object(a.jsx)(CF,{children:"QR Code"}),Object(a.jsx)(CF,{children:"\xa0"})]})}),Object(a.jsx)(NF,{children:this.renderItemRows(t.data)})]})),r}},{key:"renderItemRows",value:function(e){var t=this,n=Number(this.props.match.params.inventory_id),r=this.props.match.params.type;return e.map((function(e){var o=t.state,i=o.selectedStatus,c=o.selectedItem,s=o.selectedLocation,l=""===i.value||e.current_status.status===i.value,u=""===s.value||e.placement&&e.placement.space.id===s.value;return-1!==e.name.toLowerCase().indexOf(c.toLowerCase())&&l&&u?Object(a.jsxs)(IF,{to:{pathname:"/operations/inventories/".concat(r,"/").concat(n,"/item/").concat(e.id,"/details"),state:{inventoryId:n}},children:[Object(a.jsx)(HMe,{children:Object(a.jsx)("div",{className:"d-flex align-items-center",children:Object(a.jsx)("div",{className:"p-2",onClick:function(e){e.stopPropagation(),e.preventDefault()},children:Object(a.jsx)(nI,{value:e.selected,onClick:function(e){e.stopPropagation()},onChange:t.toggleSelection(e),size:15,inversedColors:!1,direction:FA.horizontal})})})}),Object(a.jsx)(EF,{children:e.id}),Object(a.jsx)(EF,{children:e.name}),Object(a.jsx)(EF,{children:e.quantity}),Object(a.jsx)(EF,{children:"Not set"===e.current_location?"":e.current_location}),Object(a.jsx)(EF,{children:e.condition}),Object(a.jsx)(EF,{children:e.current_status.status||"Undefined"}),Object(a.jsx)(EF,{children:Object(a.jsx)(OCe,{value:btoa(JSON.stringify({t:J7.inventory_item,id:e.id})),size:30,zoom:150,level:"Q"})}),Object(a.jsx)(EF,{children:Object(a.jsx)(nw,{items:t.getMoreMenuItems(e),noMargin:!0,direction:"right",iconName:Xf.MenuVertical,className:"more-menu"})})]},e.id):null}))}},{key:"renderNoItems",value:function(){return Object(a.jsx)(AF,{children:Object(a.jsx)("div",{className:"no-items",children:"No Items..."})})}},{key:"render",value:function(){var e=this,t=this.state,n=t.inventory,r=t.inventoryItems,o=t.loading,i=t.linkReport,c=t.jobContacts,s=this.getSelectedItems(),l=this.props.match,u=l.url,d=l.params.inventory_id,p=Number(d),h=n?n.address:"",b=n?n.job_number:"",f=this.getTopHeaderMenuItems();return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cx.Consumer,{children:function(t){var l,m,j;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)(xk.BreadcrumbsItem,{to:u,children:["#",d]}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch pt-2",children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"bottom",id:"page_tooltip"}),Object(a.jsxs)(JMe,{className:"d-flex flex-row justify-content-between",children:[Object(a.jsxs)(zMe,{children:[p&&Object(a.jsx)(qMe,{children:"Inventory #".concat(p||"")}),!o&&Object(a.jsx)(WMe,{children:"".concat(h||"Unknown"," | ").concat(b)})]}),Object(a.jsxs)(zMe,{className:"print-hide",children:[t.has(vx.OPERATIONS_INVENTORY_MANAGE)&&Object(a.jsx)("span",{className:"mr-3 cursor-pointer","data-tip":"Add new inventory item","data-for":"page_tooltip",onClick:e.showModal("new_item",{initialValues:{inventory:n,job:n.job,customer_location:null===(l=c.find((function(e){return e.assignment_type.name===tv.CUSTOMER})))||void 0===l||null===(m=l.addresses)||void 0===m||null===(j=m[0])||void 0===j?void 0:j.full_address}}),children:Object(a.jsx)(z7,{name:Xf.Add,size:16,color:_.black1})}),f.length>0&&Object(a.jsx)(GMe,{items:f,noMargin:!0,direction:"right",trigger:e.renderTrigger})]})]}),Object(a.jsxs)("div",{className:"p-4 overflow-auto h-100",children:[s.length>0&&e.renderToolbar(),o&&Object(a.jsx)(Nv,{size:40,color:_.white}),(null===r||void 0===r?void 0:r.data.length)?e.renderItems():!o&&e.renderNoItems(),(null===r||void 0===r?void 0:r.data.length)>0&&Object(a.jsx)("div",{className:"d-flex justify-content-center mt-3",children:Object(a.jsx)(oC,{pagination:r.pagination,onChange:e.handlePagination})}),Object(a.jsx)(fDe.CopyToClipboard,{text:i,children:Object(a.jsx)("input",{type:"hidden",ref:e.clipboardRef})})]})]})]})}})]})}}]),n}(h.a.PureComponent),nLe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),O.g)(tLe);function rLe(){var e=Object(f.a)(["\n  background-color: #f5aa00;\n  border-radius: 3px;\n  padding: 2px 10px;\n  color: white;\n  margin-right: 10px;\n  font-size: 16px;\n"]);return rLe=function(){return e},e}function aLe(){var e=Object(f.a)(["\n  cursor: pointer;\n"]);return aLe=function(){return e},e}function oLe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return oLe=function(){return e},e}function iLe(){var e=Object(f.a)(["\n  background-color: #3498db;\n  padding: 3px 12px 8px 12px;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return iLe=function(){return e},e}function cLe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return cLe=function(){return e},e}function sLe(){var e=Object(f.a)(["\n  font-weight: lighter;\n  border-color: #42a6e6;\n  box-shadow: 0 0 0 !important;\n\n  padding: 5px 12px;\n  color: #3498db;\n  cursor: pointer;\n  border-radius: 0.25rem;\n  font-size: 1rem;\n  margin: 0 10px;\n  &:disabled {\n    cursor: not-allowed;\n    opacity: 0.5;\n  }\n"]);return sLe=function(){return e},e}function lLe(){var e=Object(f.a)(["\n  width: 48%;\n  &.des-container {\n    width: 68%;\n  }\n  &.quality-container {\n    width: 28%;\n  }\n  &.location-container {\n    width: 100%;\n  }\n  margin-bottom: 30px;\n"]);return lLe=function(){return e},e}function uLe(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return uLe=function(){return e},e}function dLe(){var e=Object(f.a)(["\n  background-color: #f7f7f7;\n  border-radius: 4px;\n  border: none;\n  width: 100%;\n  padding: 0.375rem 0.75rem;\n  min-height: 33.5px;\n"]);return dLe=function(){return e},e}function pLe(){var e=Object(f.a)(["\n  font-size: 14px;\n  color: #95989a;\n  margin-bottom: 7px;\n"]);return pLe=function(){return e},e}function hLe(){var e=Object(f.a)(["\n  font-size: 20px;\n  color: #1d1d1d;\n  margin-bottom: 30px;\n"]);return hLe=function(){return e},e}function bLe(){var e=Object(f.a)(["\n  display: flex;\n  width: 30%;\n  margin: 40px;\n  flex-direction: column;\n"]);return bLe=function(){return e},e}function fLe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-between;\n  &.customer-location {\n    padding-top: 30px;\n    border-top: 1px solid #d3dbde;\n  }\n"]);return fLe=function(){return e},e}function mLe(){var e=Object(f.a)(["\n  display: flex;\n  width: 60%;\n  margin: 40px;\n  flex-direction: column;\n"]);return mLe=function(){return e},e}function jLe(){var e=Object(f.a)(["\n  margin: 0 40px;\n  border-top: 2px solid #d3dbde;\n  padding-top: 30px;\n"]);return jLe=function(){return e},e}function vLe(){var e=Object(f.a)(["\n  display: flex;\n  justify-content: space-around;\n"]);return vLe=function(){return e},e}function OLe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return OLe=function(){return e},e}function gLe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return gLe=function(){return e},e}var xLe=Object.keys(wY).map((function(e){return{value:wY[e],label:wY[e]}})),yLe=(Object.keys(SY).map((function(e){return{value:SY[e],label:SY[e]}})),{container:function(e){return Object(c.a)(Object(c.a)({},e),{},{flexBasis:"150px",height:"33.5px",border:"none",fontWeight:"lighter",fontSize:"1rem",borderRadius:"0.25rem",boxShadow:"0 0 0 !important",lineHeight:"1.5rem",paddingTop:0})},singleValue:function(e){return Object(c.a)(Object(c.a)({},e),{},{background:"#F7F7F7",color:_.black0})},control:function(e){return Object(c.a)(Object(c.a)({},e),{},{border:"none",boxShadow:"none",background:"#F7F7F7",color:_.black0,minHeight:"auto",maxHeight:"33.5px !important"})},placeholder:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:_.gray2})},dropdownIndicator:function(e){return Object(c.a)(Object(c.a)({},e),{},{color:"#A3A3A3",padding:"6px"})}}),_Le=(y.default.div(gLe()),y.default.div(OLe()),y.default.div(vLe())),wLe=y.default.div(jLe()),SLe=y.default.div(mLe()),kLe=y.default.div(fLe()),CLe=y.default.div(bLe()),NLe=y.default.div(hLe()),ELe=y.default.div(pLe()),ALe=y.default.input(dLe()),ILe=y.default.textarea(uLe()),TLe=y.default.div(lLe()),RLe=(y.default.button(sLe()),y.default.div(cLe()),Object(y.default)(nw)(iLe()),y.default.div(oLe()),Object(y.default)(hC)(aLe())),DLe=(y.default.div(rLe()),function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={loading:!0,data:{},inventory:{},jobs:[],locations:[],locationEdit:!0,photos:[],selectedPhotos:[],containers:[]},e.eventListeners=[],e.getData=Object(lj.a)(sj.a.mark((function t(){var n,r,a;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e.getItem();case 2:return n=t.sent,t.next=5,eQ.getInventoryInfo(n.inventory_id);case 5:return r=t.sent,t.next=8,Promise.all([zy.getAllJobs({}),eQ.getContainers(),eQ.getSpaces(),e.getPhotos(n.id)]);case 8:a=t.sent,e.setState({data:n,inventory:r.data,jobs:a[0].data,containers:a[1].data,locations:a[2].data,photos:a[3],loading:!1});case 10:case"end":return t.stop()}}),t)}))),e.getItem=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=Number(e.props.match.params.item_id),t.next=3,eQ.getInventoryItem(n);case 3:return r=t.sent.data,e.setState({data:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),e.getPhotos=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=n||e.state.data.id,t.next=3,eQ.getAttachedPhotos(n);case 3:return r=t.sent.data,e.setState({photos:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.removeInventoryItem=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o,i,c;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.dispatch,e.state.inventory,r=e.props.match.params,a=r.type,o=r.inventory_id,i=r.item_id,t.next=5,n(iw("Confirm","Delete inventory item?"));case 5:if(!t.sent){t.next=12;break}return c=Number(i),eQ.removeInventoryItem(c).then((function(){e.props.history.push("/operations/inventories/".concat(a,"/").concat(o,"/items"))})),t.abrupt("return",null);case 12:return t.abrupt("return",Promise.reject(!0));case 13:case"end":return t.stop()}}),t)}))),e.markStatus=function(t){return function(){var n=e.state.data,r=n?n.current_status:"";eQ.markInventoryItemStatus(r.inventory_item_id,r.user_id,t).then((function(t){var r=Object.assign({},n),a=n&&n.current_status;a=t.data.inventory_item.current_status,r.current_status=a,e.setState({data:r})}))}},e.getItems=function(){var t=[];xLe.forEach((function(n){t.push({name:n.label,onClick:e.markStatus(n.label)})})),t.push({type:"divider"}),t=t.concat([{name:"Delete",onClick:e.removeInventoryItem}]);var n=[{name:"Manually select location",onClick:e.enableLocationEdit},{name:"Upload a photo",onClick:e.fileClick},{name:"Print",onClick:function(){}}];return n.push({type:"divider"}),n.concat(t)},e.fileClick=function(){document.getElementById("file-input").click()},e.enableLocationEdit=function(){e.setState({locationEdit:!0})},e.renderTrigger=function(){return Object(a.jsxs)(RLe,{className:"d-flex align-items-center",margin:"5px 0 0 0",children:[Object(a.jsx)(hC,{color:_.white,margin:"0 5px 0 0",children:"Options"}),Object(a.jsx)(z7,{name:Xf.ArrowDown,color:_.white,size:16})]})},e.updateInfo=function(t){return function(n){var r=e.state,a=r.data,o=r.inventory;if(a){var i=Object.assign({},a);if("job_number"===t)i.job_id=n.value,e.state.jobs.forEach((function(e){n.value===e.id&&(i.job_number="".concat(e.id,"-").concat(e.assigned_location.code))}));else i[t]=n.target?n.target.value:n.value?n.value:n;e.setState({data:i});var c=i?i.id:"",s=o?o.id:"",l=i?i.job_id:"",u=i?i.identifier:"",d=i?i.name:"",p=i?i.quantity:"",h=i?i.condition:"",b=i?i.serial_number:"",f=i?i.model:"",m=!!i&&i.pre_existing_damage,j=i?i.pre_existing_damage_comment:"",v=i?i.customer_location:"",O=i?i.item_location:"",g=i?i.assessment_fee:"",x=i?i.estimated_replacement_cost:"",y=i?i.restoration_cost:"",_=i?i.restoration_hours:"",w=i?i.inventory_item_standard_type_id:"";m&&!j||e.debouncedUpdateInfo(c,{inventory_id:s,job_id:l,identifier:u,name:d,quantity:p,condition:h,serial_number:b,model:f,customer_location:v,item_location:O,assessment_fee:g,estimated_replacement_cost:x,restoration_cost:y,restoration_hours:_,inventory_item_standard_type_id:w,pre_existing_damage:m,pre_existing_damage_comment:m?j:void 0})}}},e.__updateInfo=function(){var e=Object(lj.a)(sj.a.mark((function e(t,n){var r;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,eQ.updateInventoryItem(t,n);case 3:r=e.sent,Gy.emit(Ix.WarehousingInventoryItemUpdated,r),e.next=9;break;case 7:e.prev=7,e.t0=e.catch(0);case 9:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t,n){return e.apply(this,arguments)}}(),e.debouncedUpdateInfo=Qv()(e.__updateInfo,500),e.setSelectedPhotos=function(t){return function(){var n=e.state.selectedPhotos;n.push(t),e.setState({selectedPhotos:n})}},e.startPlacement=function(t){return function(n){var r=Number(e.props.match.params.item_id),a=e.state.data,o=Object.assign({},a);o.placement||(o.placement={}),o.placement[t]||(o.placement[t]={});var i=o.placement;i[t].id=n.value,o.placement=i,e.setState({data:o}),eQ.stopPlacement(r).then((function(){var e,t;eQ.startPlacement({inventory_item_id:r,inventory_storage_container_id:null===(e=o.placement.container)||void 0===e?void 0:e.id,inventory_storage_space_id:null===(t=o.placement.space)||void 0===t?void 0:t.id,is_used_on_ar:!0})}))}},e.changeLocation=function(t){var n=e.state.data,r=Object.assign({},n);r.placement.space=t,e.setState({data:r})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getData()}},{key:"componentWillUnmount",value:function(){}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=t.item_id,o=e.match.params,i=o.type,c=o.inventory_id,s=o.item_id;n===i&&r===c&&a===s||this.getData()}},{key:"isActive",value:function(e){return!!Object(O.f)(this.props.location.pathname,{path:e})}},{key:"getJobNumberOptions",value:function(){var e=this.state.jobs,t=[];return e.forEach((function(e){t.push({value:e.id,label:"".concat(e.id,"-").concat(e.assigned_location.code)})})),t}},{key:"getLocationOptions",value:function(){var e=this.state.locations,t=[];return e.forEach((function(e){t.push({value:e.id,label:e.name+" ("+e.location.code+")"})})),t}},{key:"getContainerOptions",value:function(){var e=this.state.containers,t=[];return e.forEach((function(e){t.push({value:e.id,label:e.label})})),t}},{key:"render",value:function(){var e,t,n=this,r=this.state,o=r.loading,i=r.data,c=r.inventory,s=r.locations,l=r.locationEdit,u=r.photos,d=r.selectedPhotos,p=r.containers,h=i?i.name:"",b=i?i.quantity:"",f=i?i.job_id:"",m=i?i.customer_location:"",j=i?i.item_location:"",v=i?i.serial_number:"",O=i?i.model:"",g=!!i&&i.pre_existing_damage,x=i?i.pre_existing_damage_comment:"",y=i?i.condition:"",w=i?i.current_status:null,S=(w&&w.status,i&&i.id,i?i.name:""),k=(c&&c.address,c&&c.job_number,i?i.job_number:""),C=i?i.placement:"",N=C?null===(e=C.space)||void 0===e?void 0:e.id:"",E="";s.forEach((function(e){e.id===N&&(E=e.name+" ("+e.location.code+")")}));var A={value:N,label:E},I=C?null===(t=C.container)||void 0===t?void 0:t.id:"",T="";p.forEach((function(e){e.id===I&&(T=e.label)}));var R={value:I,label:T},D={value:f,label:k};return Object(a.jsx)(Cx.Consumer,{children:function(e){return Object(a.jsx)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:Object(a.jsx)("div",{className:"d-flex flex-row align-items-stretch",children:Object(a.jsxs)("div",{className:"flex-grow-1 position-relative",children:[o&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsxs)(UC,{className:"h-100",children:[Object(a.jsxs)(_Le,{children:[Object(a.jsxs)(SLe,{children:[Object(a.jsx)(NLe,{children:"Item"}),Object(a.jsxs)(kLe,{children:[Object(a.jsxs)(TLe,{className:"des-container",children:[Object(a.jsx)(ELe,{children:"Description"}),Object(a.jsx)(ALe,{value:h,onChange:n.updateInfo("name")})]}),Object(a.jsxs)(TLe,{className:"quality-container",children:[Object(a.jsx)(ELe,{children:"Quantity"}),Object(a.jsx)(ALe,{value:b,onChange:n.updateInfo("quantity")})]})]}),Object(a.jsxs)(kLe,{children:[Object(a.jsxs)(TLe,{children:[Object(a.jsx)(ELe,{children:"Serial No."}),Object(a.jsx)(ALe,{value:v,onChange:n.updateInfo("serial_number")})]}),Object(a.jsxs)(TLe,{children:[Object(a.jsx)(ELe,{children:"Model"}),Object(a.jsx)(ALe,{value:O,onChange:n.updateInfo("model")})]})]}),Object(a.jsx)(kLe,{children:Object(a.jsxs)(TLe,{children:[Object(a.jsx)(ELe,{children:"Condition"}),Object(a.jsx)(n9,{value:y?{value:y,label:y}:void 0,options:Object.keys(SY).map((function(e){return{value:SY[e],label:SY[e]}})),onChange:n.updateInfo("condition"),customStyles:yLe})]})}),Object(a.jsx)(kLe,{children:Object(a.jsx)(TLe,{children:Object(a.jsx)(nI,{label:"Pre existing damage?",direction:FA.horizontal,value:g,onChange:n.updateInfo("pre_existing_damage")})})}),g&&Object(a.jsx)(kLe,{children:Object(a.jsx)(TLe,{className:"w-100",children:Object(a.jsx)(ILe,{value:x,onChange:n.updateInfo("pre_existing_damage_comment"),placeholder:"List pre-existing damages, any accessories, sentimental value, etc."})})}),Object(a.jsxs)(kLe,{className:"customer-location",children:[Object(a.jsxs)(TLe,{children:[Object(a.jsx)(ELe,{children:"Customer Location"}),Object(a.jsx)(ALe,{value:m,onChange:n.updateInfo("customer_location"),disabled:!0})]}),Object(a.jsxs)(TLe,{children:[Object(a.jsx)(ELe,{children:"Job Number"}),Object(a.jsx)(n9,{value:D,options:n.getJobNumberOptions(),onChange:n.updateInfo("job_number"),customStyles:yLe,isDisabled:!0})]})]})]}),Object(a.jsxs)(CLe,{children:[Object(a.jsx)(NLe,{children:"Location"}),Object(a.jsxs)(TLe,{className:"location-container",children:[Object(a.jsx)(ELe,{children:"Storage Location"}),Object(a.jsx)(n9,{value:A,options:n.getLocationOptions(),onChange:n.startPlacement("space"),customStyles:yLe,isDisabled:!l})]}),Object(a.jsxs)(TLe,{className:"location-container",children:[Object(a.jsx)(ELe,{children:"Box/Pallet"}),Object(a.jsx)(n9,{value:R,options:n.getContainerOptions(),onChange:n.startPlacement("container"),customStyles:yLe,isDisabled:!l})]}),Object(a.jsxs)(TLe,{className:"location-container",children:[Object(a.jsx)(ELe,{children:"Item Location On Site"}),Object(a.jsx)(ALe,{value:j,onChange:n.updateInfo("item_location")})]})]})]}),Object(a.jsxs)(wLe,{children:[Object(a.jsx)(NLe,{children:"Photos"}),Object(a.jsx)(CMe,{photos:u,selectedPhotos:d,setSelectedPhotos:n.setSelectedPhotos,inventoryItem:i,loadPhotos:n.getPhotos,itemName:S})]})]})]})})})}})}}]),n}(h.a.PureComponent)),MLe=Object(sg.compose)(Object(b.b)(),O.g)(DLe);function LLe(){var e=Object(f.a)(["\n  // background-color: #3498db;\n  // padding: 3px 12px 8px 12px;\n  // border-radius: 0.25rem;\n  font-size: 1rem;\n  font-weight: lighter;\n"]);return LLe=function(){return e},e}function PLe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  font-weight: 500;\n  font-size: 1.15rem;\n  color: #959595;\n"]);return PLe=function(){return e},e}function FLe(){var e=Object(f.a)(["\n  font-weight: 700;\n  font-size: 1.15rem;\n  color: #1d1d1d;\n"]);return FLe=function(){return e},e}function ULe(){var e=Object(f.a)(["\n  padding: 9px 25px 9px 26px;\n  border-bottom: 1px solid #d3dbde;\n"]);return ULe=function(){return e},e}var BLe=y.default.div(ULe()),VLe=y.default.div(FLe()),JLe=y.default.div(PLe()),qLe=Object(y.default)(nw)(LLe()),zLe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={item:null},e.eventListeners=[Gy.listen(Ix.WarehousingInventoryItemUpdated,(function(t){(null===t||void 0===t?void 0:t.condition)!==e.state.item.condition&&e.getItem()}))],e.getItem=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.item_id,e.setState({working:!0}),t.next=4,eQ.getInventoryItem(n);case 4:r=t.sent.data,e.setState({working:!1,item:r});case 6:case"end":return t.stop()}}),t)}))),e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=t.item;switch(n){case"note":return Object(a.jsx)(PI,{isOpen:!0,onClose:e.hideModal,afterSuccess:e.saveNoteDraft,disableTemplatesControl:!0,disableAttachments:!0,disableMentionControl:!0});case"scan":return Object(a.jsx)(yDe,Object(c.a)({onClose:e.hideModal,isOpen:!0,selectedInventoryItems:[o]},r))}return null},e.saveNoteDraft=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=Number(e.props.match.params.item_id),eQ.addNoteToInventoryItem(n.id,r).then((function(e){Gy.emit(Ix.WarehousingInventoryItemNoteAdded,e.data.note)}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),e.markStatus=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.setState({working:!0}),r=e.state.item,a=r.current_status,n.next=5,eQ.markInventoryItemStatus(r.id,a.user_id,t);case 5:e.setState({working:!1}),Gy.emit(Ix.WarehousingInventoryItemUpdated,r),e.getItem();case 8:case"end":return n.stop()}}),n)})))},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.getItem(),Rm.status("Inventry Item")}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"componentDidUpdate",value:function(e){var t=this.props.match.params,n=t.type,r=t.inventory_id,a=t.item_id,o=e.match.params,i=o.type,c=o.inventory_id,s=o.item_id;n===i&&r===c&&a===s||this.getItem()}},{key:"render",value:function(){var e,t=this,n=this.props.match.params,r=n.tab,o=n.type,i=n.inventory_id,s=n.item_id,l=this.state,u=l.item,d=l.working;return Object(a.jsxs)("div",{className:"d-flex flex-column flex-grow-1 scroll-auto pt-3",children:[Object(a.jsxs)(xk.BreadcrumbsItem,{to:"/operations/inventories/".concat(o,"/").concat(i,"/items"),children:["#",i," ",Object(a.jsx)("b",{children:"/"})," Items"]}),Object(a.jsxs)(xk.BreadcrumbsItem,{to:"/operations/inventories/".concat(o,"/").concat(i,"/item/").concat(s,"/details"),children:["#",s]}),!u||d&&Object(a.jsx)(Nv,{size:40,color:_.white}),this.renderModal(),Object(a.jsx)(BLe,{className:"px-4 d-flex flex-row justify-content-between mb-3 pt-0",children:Object(a.jsxs)(JLe,{children:[Object(a.jsx)(VLe,{children:"Inventory Item #".concat(s||"")}),u&&Object(a.jsx)("div",{className:"badge badge-warning ml-3",children:null===(e=u.current_status)||void 0===e?void 0:e.status}),u&&Object(a.jsx)("div",{className:"badge badge-info ml-3",children:u.condition})]})}),Object(a.jsxs)(fQ.i,{className:"mx-4 nav-tabs mr-4 print-hide",style:{position:"sticky",top:0,zIndex:1,backgroundColor:"#fff"},children:[Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"/operations/inventories/".concat(o,"/").concat(i,"/item/").concat(s,"/details"),role:"tab",children:"Details"})}),Object(a.jsx)(fQ.j,{children:Object(a.jsx)(v.c,{className:"nav-link",to:"/operations/inventories/".concat(o,"/").concat(i,"/item/").concat(s,"/notes"),role:"tab",children:"Notes & Work"})}),u&&Object(a.jsxs)("div",{className:"flex-grow-1",children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"bottom",id:"toolbar_tooltip"}),Object(a.jsxs)("div",{className:"h-100 d-flex align-items-center justify-content-end",children:[Object(a.jsx)(z7,{name:Xf.AddNote,color:_.black1,className:"cursor-pointer","data-tip":"Add note","data-for":"toolbar_tooltip",onClick:this.showModal("note")}),Object(a.jsx)(z7,{name:Xf.QRCode,color:_.black1,className:"cursor-pointer ml-3","data-tip":"Scan QR code","data-for":"toolbar_tooltip",onClick:this.showModal("scan")}),Object(a.jsx)(qLe,{items:eLe.map((function(e){return{key:e.value,name:"".concat(e.label),onClick:t.markStatus(e.label)}})),noMargin:!0,direction:"right",trigger:function(){return Object(a.jsx)(z7,{color:_.black1,className:"ml-3",name:Xf.Flag,"data-tip":"Change status","data-for":"toolbar_tooltip"})}})]})]})]}),Object(a.jsxs)(fQ.k,{activeItem:r,className:" px-4 position-relative flex-grow-1 py-4 pr-4 scroll-auto",children:["details"===r&&Object(a.jsx)(fQ.l,{tabId:"details",role:"tabpanel",children:Object(a.jsx)(MLe,Object(c.a)({},this.props))}),"notes"===r&&Object(a.jsx)(fQ.l,{tabId:"notes",role:"tabpanel",className:"h-100 w-100",children:Object(a.jsx)(jwe,Object(c.a)({},this.props))})]})]})}}]),n}(p.PureComponent);function GLe(){var e=Object(f.a)(["\n  position: relative;\n  overflow: auto;\n"]);return GLe=function(){return e},e}var WLe,HLe,YLe=y.default.div(GLe());!function(e){e[e["inventory-return"]=AH.INVENTORY_FORM_RETURNED]="inventory-return",e[e["inventory-dispose"]=AH.INVENTORY_FORM_DISPOSED]="inventory-dispose"}(WLe||(WLe={})),function(e){e["inventory-return"]="Property Return Form",e["inventory-dispose"]="Disposal Notice"}(HLe||(HLe={}));var QLe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e.addContract=function(t){return Object(lj.a)(sj.a.mark((function n(){var r,a,o,i,c;return sj.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r=e.props.match,a=r.url,o=r.params,i=o.inventory_id,o.form_type,e.setState({loading:!0,creating:!0}),n.prev=2,n.next=5,WH(+i,t.id,{model:"inventory",contract_date:pm()().format(av),field_data:JSON.stringify({contract:{date:new Date}})});case 5:c=n.sent,e.props.history.push({pathname:"".concat(a,"/").concat(c.id),state:e.props.location.state});case 7:return n.prev=7,e.setState({loading:!1,creating:!1}),n.finish(7);case 10:case"end":return n.stop()}}),n,null,[[2,,7,10]])})))},e.loadInventory=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props,r=n.dispatch,a=n.match.params.inventory_id,t.next=3,eQ.getInventoryInfo(a);case 3:return o=t.sent.data,e.setState({inventory:o}),r(BD(o.job_id)),r(DP(o.job_id)),t.abrupt("return",o);case 8:case"end":return t.stop()}}),t)}))),e.loadContractsList=Object(lj.a)(sj.a.mark((function t(){var n,r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=e.props.match.params.form_type,t.next=3,FH(WLe[n],{model:"inventory"});case 3:return r=t.sent,e.setState({contracts:r}),t.abrupt("return",r);case 6:case"end":return t.stop()}}),t)}))),e.loadJobContracts=Object(lj.a)(sj.a.mark((function t(){var n,r,a,o;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(n=e.props.match.params,r=n.form_type,!(a=n.inventory_id)){t.next=7;break}return t.next=4,JH(+a,WLe[r],{model:"inventory",inventory_id:a});case 4:return o=t.sent,e.setState({jobContracts:o}),t.abrupt("return",o);case 7:return t.abrupt("return",null);case 8:case"end":return t.stop()}}),t)}))),e._loadJobContracts=Object(lj.a)(sj.a.mark((function t(){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,e.loadJobContracts();case 4:return t.prev=4,e.setState({loading:!1}),t.finish(4);case 7:case"end":return t.stop()}}),t,null,[[1,,4,7]])}))),e.debouncedLoadJobContracts=Qv()(e._loadJobContracts,100),e.onContractDelete=function(t){var n=e.state.jobContracts;e.setState({jobContracts:null===n||void 0===n?void 0:n.filter((function(e){return e.id!==t.id}))})},e.beforeContractSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(r,a,o){return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",n.validate(r,a,o,e.props.user));case 1:case"end":return t.stop()}}),t)})));return function(e,n,r){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({loading:!0}),Promise.all([this.loadInventory(),this.loadContractsList(),this.loadJobContracts()]).finally((function(){e.setState({loading:!1})}))}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.match.params,r=n.contract_id,a=n.form_type,o=e.match.params,i=o.contract_id;a!==o.form_type?(this.setState({loading:!0}),Promise.all([this.loadContractsList(),this.loadJobContracts()]).finally((function(){t.setState({loading:!1})}))):i&&!r&&this.debouncedLoadJobContracts()}},{key:"renderContentPage",value:function(){var e=this.props,t=e.match.params,r=t.contract_id,o=t.form_type,i=(t.inventory_id,e.job),c=e.contacts,s=this.state,l=s.loading,u=s.creating,d=s.contracts,p=s.jobContracts,h=s.inventory,b=WLe[o],f=HLe[o];return i.data?Object(a.jsxs)(YLe,{className:"h-100 d-flex flex-column",children:[l&&Object(a.jsx)(Nv,{size:40}),r?Object(a.jsx)(YLe,{className:"h-100",children:Object(a.jsx)(pQ,{type:b,job:i.data,jobContacts:c.data,beforeSubmit:this.beforeContractSubmit,beforeSign:n.validateSignatureMeta,defaultTemplate:'\n<h3 class="mb-5"><strong>{{jobContract.template.contract.name}}</strong></h3>\n<p><strong>Customer: </strong> {{CUSTOMER_NAME}}</p>\n<p><strong>Address: </strong> {{CUSTOMER_ADDRESS}}</p>\n<p><strong>Claim #: </strong> {{job.claim_number}}</p>\n<p><strong>Reference #: </strong> {{job.reference_number}}</p>\n<p><strong>Job #: </strong> #{{job.id}}<C if="job.assigned_location">-{{job.assigned_location.code}}</C></p>\n<p>Steamatic has assessed non-restorable item(s) in relation to the above mentioned loss.</p>\n<p>These item(s) will require disposal, please confirm via email <strong>{{CONTACT_EMAIL}}</strong>.</p>\n</p><strong>Please refer to our terms and conditions overleaf</strong></p>\n<div class="row">\n  <div class="col-6">\n    <div class="mb-3">\n      <strong>Options</strong>\n    </div>\n    <div class="mb-3">\n      <p>Dispose of all the item(s) listed overleaf or on the attached inventory immediately.</p>\n    </div>\n  </div>\n  <div class="col-6">\n    <div class="mb-3">\n      <strong>Customer/Authorised Person</strong>\n    </div>\n    <div class="mb-3">\n      <C if="jobContract.status=new">\n        <C if="IS_STAFF">\n          <Field name="customer.full_name"><input type="text" class="form-control" placeholder="Full name" /></Field>\n        </C>\n      </C>\n      <C not="jobContract.status=new">\n        {{meta.customer.full_name}}\n      </C>\n    </div>\n  </div>\n</div>\n<hr/>\n<p><strong><span>Customer Signature:</span></strong></p>\n<C not="CUSTOMER_SIGNED_AT">\n  <C if="jobContract.id">\n    <C if="jobContract.status=awaiting_signature">\n      <C if="IS_CUSTOMER">\n        <div class="py-3 px-5 d-flex justify-content-center">\n          <Signature type="customer" />\n        </div>\n        <div class="mt-3 d-flex justify-content-center print-hide">\n          <button class="btn btn-primary" onClick={{lockSignature}}>Submit</button>\n        </div>\n      </C>\n      <C if="IS_STAFF">\n        <p class="text-center"><a href={{CONTRACT_URL}} target="_blank" class="btn btn-outline-primary">Get Customer Signature</a></p>\n      </C>\n    </C>\n  </C>\n</C>\n<C if="CUSTOMER_SIGNED_AT">\n  <Signature type="customer" />\n  <div><strong>Signed At:</strong> {{CUSTOMER_SIGNED_AT}}</div>\n</C>\n<hr/>\n<div class="my-3">\n  <p><strong>Item(s) Requiring Disposal</strong></p>\n  <InventoryItems />\n</div>\n<div class="mt-3">\n  <p class=\'text-center text-danger\'><strong>Disposal Terms and Conditions</strong></p>\n  <ol class=\'text-danger\'>\n    <li class=\'mb-2\'>If your item(s) have been deemed as non restorable, you will be notified that they require disposal. You must provide us written confirmation authorising us to dispose of your non restorable item(s).</li>\n    <li class=\'mb-2\'>If a written authority of disposal is not received by us within 6 months of receiving notice of disposal, then by default You agree to authorise the disposal of the item(s) by Us in any manner deemed feasible. Storage charges will continue to be incurred up to and including the date of the disposal of item(s).</li>\n    <li>Applicable storage charges will be invoiced every 30 days and such invoice(s) shall be payable within 30 days of the date of the invoice(s) and thereafter interest may be charged at the Cash Rate Target specified by the Reserve Bank of Australia as at the date our account was issued plus 2% from the period beginning 30 days after the date of our account until payment is received.</li>\n  </ol>\n  <p class=\'mt-3\'><strong>Removed as per coverage in General Authority</strong></p>\n  <p>From General Authority Below:</p>\n  <p>Right of sale/disposal of uncollected goods</p>\n  <p>I hereby acknowledge that goods accepted by Steamatic for repair or other treatment under the customer service agreement is subject to the Disposal of Uncollected Goods Act (1967) QLD which covers inspection, custody, storage, repair and other treatment of goods. Under this Act, uncollected goods may be sold six months after the date on which they were ready for collection.</p>\n</div>\n',defaultMeta:this.defaultMeta,contractId:+r,Sidebar:NQ,model:"inventory"})}):Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"px-5 my-4 d-flex align-items-center",children:[Object(a.jsx)("h3",{children:Object(a.jsx)("strong",{children:f})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-end print-hide",children:Object(a.jsxs)("button",{className:"btn btn-primary position-relative",disabled:!(null===d||void 0===d?void 0:d.length),onClick:this.addContract(null===d||void 0===d?void 0:d[0]),children:[(!d||u)&&Object(a.jsx)(Nv,{size:30}),"Add New"]})})]}),Object(a.jsx)(YLe,{className:"flex-grow-1 h-100 px-3 pb-3",children:Object(a.jsx)(yQ,{inventory:h,job:i.data,data:p||[],onDelete:this.onContractDelete,state:this.props.location.state,model:"inventory"})})]})]}):Object(a.jsx)(Nv,{size:40})}},{key:"render",value:function(){var e=this.props,t=e.location.state,n=e.match.params,r=n.form_type,o=n.inventory_id;return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/inventories/".concat((null===t||void 0===t?void 0:t.type)||"all"),children:"Inventories List"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:{pathname:"/operations/inventories/".concat(o,"/forms/").concat(r),state:this.props.location.state},children:HLe[r]}),this.renderContentPage()]})}},{key:"defaultMeta",get:function(){var e=this.props.match.params.form_type;switch(WLe[e]){case AH.INVENTORY_FORM_DISPOSED:return{options:"",customer:{full_name:""}};case AH.INVENTORY_FORM_RETURNED:return{customer:{full_name:""},witness:{full_name:""}}}}}]),n}(p.PureComponent);QLe.validate=function(e,t,n,r){var a={email_send_to:"email.send.to",customer_name:"customer.full_name",witness_name:"witness.full_name"},o={};j.a.forEach(a,(function(e,n){o[n]=j.a.get(t,e),j.a.isString(o[n])&&(o[n]=o[n].trim())}));var i={};return r&&(o.email_send_to?Jv(o.email_send_to)&&j.a.set(i,a.email_send_to,"Email format is not correct"):j.a.set(i,a.email_send_to,"This field is required"),o.customer_name||j.a.set(i,a.customer_name,"Customer name is required"),e.type===AH.INVENTORY_FORM_RETURNED&&(o.witness_name||j.a.set(i,a.witness_name,"Witness name is required"))),!!j.a.isEmpty(i)||i},QLe.validateSignatureMeta=function(e,t,n,r){if(r.type===AH.JOB_FORM_WORK_COMPLETION){var a={satisfied:"signature."+e+".meta.satisfied",acknowledged:"signature."+e+".meta.acknowledged",responsible_party:"signature."+e+".meta.responsible_party",agent_relation:"signature."+e+".meta.agent_relation",agent_name:"signature."+e+".meta.agent_name"},o={};j.a.forEach(a,(function(e,n){o[n]=j.a.get(t,e),j.a.isString(o[n])&&(o[n]=o[n].trim())}));var i={};return o.satisfied||j.a.set(i,a.satisfied,"This field is required"),o.acknowledged||j.a.set(i,a.acknowledged,"This field is required"),o.responsible_party||j.a.set(i,a.responsible_party,"This field is required"),o.agent_name||j.a.set(i,a.agent_name,"This field is required"),"agent"!==o.responsible_party||o.agent_relation||j.a.set(i,a.agent_relation,"This field is required"),!!j.a.isEmpty(i)||i}return!0};var KLe=Object(sg.compose)(O.g,Object(b.b)((function(e){var t;return{job:e.currentJob,contacts:e.currentJobContacts,user:null===(t=e.user)||void 0===t?void 0:t.me}})))(QLe),ZLe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).state={searchLoading:!1,location:e.primaryLocation,view:"list"},e.getWarehouseInfo=function(){var t=e.props.dispatch,n=e.state.location;n&&t(L3(n.id))},e.eventListeners=[Gy.listen(Ix.WarehousingInventoryAdded,(function(){e.getWarehouseInfo()})),Gy.listen(Ix.WarehousingInventoryDeleted,(function(){e.getWarehouseInfo()}))],e.setLocation=function(t){e.setState({location:t})},e.setView=function(t){e.setState({view:t})},e.showModal=function(t,n){return function(){e.setState({modal:t,modalData:n})}},e.hideModal=function(){e.setState({modal:void 0})},e.renderModal=function(){var t=e.state,n=t.modal,r=t.modalData,o=t.location;switch(n){case"new_item":return Object(a.jsx)(dIe,Object(c.a)({locationId:null===o||void 0===o?void 0:o.id,isOpen:!0,onClose:e.hideModal},r))}return null},e}return Object(l.a)(n,[{key:"isActive",value:function(e,t){return!!Object(O.f)(this.props.location.pathname,{path:e,exact:t})}},{key:"componentDidMount",value:function(){Rm.status("Warehousing");var e=this.props.dispatch,t=this.state,n=t.location,r=t.view;e(P3({selectedLocation:null===n||void 0===n?void 0:n.id,view:r})),this.getWarehouseInfo()}},{key:"componentDidUpdate",value:function(e,t){var n=this.props.dispatch,r=this.state,a=r.location,o=r.view,i=t.location,c=t.view;a===i&&o===c||n(P3({selectedLocation:null===a||void 0===a?void 0:a.id,view:o})),a!==i&&this.getWarehouseInfo()}},{key:"componentWillUnmount",value:function(){this.eventListeners.forEach((function(e){return e.stopListening()})),Rm.reset()}},{key:"getWIMenuItems",value:function(){var e=this.props.warehouseInfo,t=e.data?e.data.data:[];return[{path:"/operations/inventories/new",icon:Xf.ArrowThickCircleRight,isActive:this.isActive("/operations/inventories/new"),label:"Incoming",value:0,type:"incoming"},{path:"/operations/inventories/continued",icon:Xf.BulletList,isActive:this.isActive("/operations/inventories/continued"),label:"Inventories",value:0,type:"inventories"},{path:"/operations/inventories/processed",icon:Xf.Truck,isActive:this.isActive("/operations/inventories/processed"),label:"Ready to Return / Dispose",value:0,type:"ready_to_return_dispose"},{path:"/operations/inventories/completed",icon:Xf.ShipmentDeliver,isActive:this.isActive("/operations/inventories/completed"),label:"Completed Inventories",value:0,type:"returned_disposed"}].map((function(e){return e.value=t[e.type],Object.assign({},e)}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.match,r=t.locations,o=t.loading,i=this.state,c=i.location,s=i.view;return Object(a.jsxs)(a.Fragment,{children:[this.renderModal(),Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(xk.BreadcrumbsItem,{to:"#",children:"Operations"}),Object(a.jsx)(xk.BreadcrumbsItem,{to:"/operations/inventories",children:"Inventories"}),o&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(vIe,{title:"Inventories",locations:r,onLocationChange:e.setLocation,view:s,onViewChange:e.setView,activeLocation:c}),Object(a.jsxs)("div",{className:"d-flex h-100 flex-row align-items-stretch overflow-auto",children:[Object(a.jsxs)(iIe,{children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right",id:"operations-sidebar-tooltip"}),e.getWIMenuItems().map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Wm,{item:e},e.path),e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label}),e.isActive&&e.menu&&e.menu.map((function(e){return Object(a.jsxs)(a.Fragment,{children:[Object(a.jsx)(Wm,{item:e},e.path),e.isActive&&Object(a.jsx)(xk.BreadcrumbsItem,{to:e.path,children:e.label})]})}))]})})),Object(a.jsx)(gk,{className:"d-flex flex-row align-items-center",children:t.has(vx.OPERATIONS_INVENTORY_MANAGE)&&Object(a.jsx)(vk,{name:Xf.Add,"data-tip":"Create new inventory","data-for":"operations-sidebar-tooltip",onClick:e.showModal("new_item")})})]}),c&&Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{path:"".concat(n.path,"/locations"),component:pDe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/to-return"),component:bDe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/returned"),component:uDe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/:inventory_id/forms/:form_type/:contract_id?"),component:KLe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/:type/:inventory_id/item/:item_id/:tab"),component:zLe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/:type/:inventory_id/items"),component:nLe}),Object(a.jsx)(O.b,{path:"".concat(n.path,"/:type"),component:sDe}),Object(a.jsx)(O.a,{to:"".concat(n.path,"/new")})]})})]})]})}})]})}},{key:"primaryLocation",get:function(){return this.props.locations.find((function(e){return!!e.primary}))}}]),n}(p.Component),XLe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations,warehousingOptions:U3(e),warehouseInfo:e.warehousing.warehouseInfo,loading:e.warehousing.inventories.loading}})),O.g)(ZLe);function $Le(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n  padding: 0 25px;\n  border-right: 1px solid ",";\n  // height: 100%;\n  position: relative;\n  :last-child {\n    border-right: 0;\n  }\n"]);return $Le=function(){return e},e}var ePe=y.default.div($Le(),_.white),tPe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,o=new Array(r),i=0;i<r;i++)o[i]=arguments[i];return(e=t.call.apply(t,[this].concat(o))).dateTriggerRender=function(){var t=e.props.filters,n=t.date_from,r=t.date_to;return Object(a.jsxs)("div",{className:"d-flex",style:{cursor:"pointer"},children:[(n||pm()()).format(iv),r&&Object(a.jsxs)(a.Fragment,{children:[" - ",r.format(iv)]}),Object(a.jsx)(z7,{style:{marginLeft:"10px"},color:_.white,name:Xf.Calendar})]})},e.timePickerRender=function(){var t=e.props.filters,n=t.date_from,r=t.date_to,o=pm()().subtract(1,"year"),i=pm()();return Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("strong",{children:"From Date"})}),Object(a.jsx)(Qy.a,{input:!1,initialValue:n,timeFormat:!1,onChange:e.onFilterChange("date_from"),isValidDate:function(e){return e.isSameOrAfter(o)}})]}),Object(a.jsxs)("div",{children:[Object(a.jsx)("div",{className:"text-center",children:Object(a.jsx)("strong",{children:"To Date"})}),Object(a.jsx)(Qy.a,{input:!1,initialValue:r,timeFormat:!1,onChange:e.onFilterChange("date_to"),isValidDate:function(e){return e.isSameOrBefore(i)}})]})]})},e.onDateChange=function(t){var n=e.props.onFilterChange;null===n||void 0===n||n("date_from",t)},e.locationsTriggerRender=function(){var t=e.props.filters.location;return Object(a.jsxs)("div",{style:{cursor:"pointer"},children:[(t||{}).name,Object(a.jsx)(z7,{style:{marginLeft:"20px"},color:_.white,name:Xf.ArrowDown})]})},e.locationsItems=function(){var t=e.props,n=t.locations,r=t.filters.location;return n.map((function(t){return{data:t,name:t.name,classNames:t.id===(r||{}).id?"active":"",onClick:e.onFilterChange("location")}}))},e.onFilterChange=function(t){return function(n){var r=e.props.onFilterChange;null===r||void 0===r||r(t,n)}},e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.props,t=e.locations,n=e.filters;n.date_from,n.date_to,n.location;return Object(a.jsxs)("div",{className:"flex-grow-1 d-flex justify-content-end",children:[Object(a.jsx)(ePe,{children:Object(a.jsx)(nw,{direction:"right",trigger:this.dateTriggerRender,renderInternal:this.timePickerRender})}),Object(a.jsx)(ePe,{children:t&&0!==t.length?Object(a.jsx)(nw,{direction:"right",trigger:this.locationsTriggerRender,items:this.locationsItems()}):Object(a.jsx)("div",{children:"No locations"})})]})}}]),n}(p.PureComponent),nPe=function(e){var t;return Object(c.a)(Object(c.a)({},e),{},{date_from:bv(e.date_from),date_to:bv(e.date_to||e.date_from),location_id:null===(t=e.location)||void 0===t?void 0:t.id,location:void 0})},rPe={getVolumeReport:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/reports/volume",nPe(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getLeadsReport:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/reports/leads",nPe(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),getManagedAccountsReport:function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,ev.get("/v1/contacts/reports/managed-accounts",nPe(t));case 2:return n=e.sent,e.abrupt("return",n.data);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},aPe={new_leads_chart:"New Leads",total_leads_chart:"Total Leads",touched_chart:"Leads Touched"};var oPe=function(e){var t=e.data,n=Object(p.useState)({key:"new_leads_chart",label:aPe.new_leads_chart}),r=Object(w.a)(n,2),o=r[0],i=r[1],c=Object(p.useState)("current"),s=Object(w.a)(c,2),l=s[0],u=s[1],d=Object(p.useState)([]),h=Object(w.a)(d,2),b=h[0],f=h[1],m=Object(p.useState)([]),j=Object(w.a)(m,2),v=j[0],O=j[1];return Object(p.useEffect)((function(){["current","previous"].forEach((function(e){Object.keys(aPe).forEach((function(n){t[e][n].forEach((function(e){e.x=new Date(e.x)}))}))}))}),[t]),Object(p.useEffect)((function(){f(t.current[o.key]),O(t.previous[o.key])}),[o,f,O,t]),Object(a.jsxs)("div",{className:"flex-grow-1 py-3",style:{background:"#fff"},children:[Object(a.jsxs)("div",{className:"d-flex align-items-center px-3 py-1",children:[Object(a.jsx)("div",{style:{width:250},children:Object(a.jsx)(n9,{value:o,options:Object.keys(aPe).map((function(e){return{key:e,label:aPe[e]}})),onChange:function(e){return i(e)},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.key}})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center",children:Object(a.jsx)("h4",{children:Object(a.jsx)("strong",{children:aPe[o.key]})})}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("label",{className:"mr-5 mb-0 d-flex align-items-center",children:[Object(a.jsx)("input",{className:"mr-2",type:"radio",name:"view",value:"current",defaultChecked:"current"===l,onChange:function(e){return u(e.target.value)}}),"Current"]}),Object(a.jsxs)("label",{className:"mb-0 d-flex align-items-center",children:[Object(a.jsx)("input",{className:"mr-2",type:"radio",name:"view",value:"previous",defaultChecked:"previous"===l,onChange:function(e){return u(e.target.value)}}),"Previous"]})]})]}),Object(a.jsx)("div",{className:"pl-md-5",children:Object(a.jsx)(ple.a,{className:"pl-md-5 ml-md-5 pr-md-3",children:Object(a.jsx)(ple.c,{children:Object(a.jsx)(ple.d,{type:"line",field:"y",categoryField:"x",data:"current"===l?b:v})})})})]})};var iPe=function(e){var t=e.data;return Object(a.jsx)("div",{children:Object(a.jsxs)(F_.a,{data:t,scrollable:"none",children:[Object(a.jsx)(F_.b,{field:"contact",title:"Lead"}),Object(a.jsx)(F_.b,{field:"staff",title:"Staff"}),Object(a.jsx)(F_.b,{field:"meetings",title:"Meetings & Follow-ups",width:160}),Object(a.jsx)(F_.b,{field:"age",title:"Aged",width:100})]})})};function cPe(){var e=Object(f.a)(["\n  padding: 20px;\n  .title{color: ",";}\n  .value{font-size: 20px; font-weight: ",";}\n\n"]);return cPe=function(){return e},e}function sPe(){var e=Object(f.a)(["\n  border: 5px solid",";\n  background-color: ",";\n  width: 200px\n"]);return sPe=function(){return e},e}var lPe=y.default.div(sPe(),_.gray0,_.gray1),uPe=y.default.div(cPe(),_.gray5,lm.bold);var dPe=function(e){var t=e.title,n=e.description,r=e.value,o=e.valuePrefix,i=e.valuePostfix,c=e.percentage;return Object(a.jsx)(lPe,{children:Object(a.jsxs)(uPe,{children:[n&&Object(a.jsx)(um.a,{className:"overlapping",id:"card-title-description",effect:"solid"}),n?Object(a.jsx)("div",{className:"title","data-tipe":n,"data-for":"card-title-description",children:t}):Object(a.jsx)("div",{className:"title",children:t}),Object(a.jsxs)("div",{className:"d-flex align-items-center",children:[Object(a.jsxs)("div",{className:"value",children:[o,r,i]}),void 0!==c&&Object(a.jsxs)("div",{className:"percentage d-flex flex-column align-items-center ml-3",children:[Object(a.jsx)("div",{children:c<0?Object(a.jsx)(z7,{name:Xf.ArrowDown,color:_.red1,fill:!0,size:10}):Object(a.jsx)(z7,{name:Xf.ArrowUp,color:_.green4,fill:!0,size:10})}),Object(a.jsxs)("div",{children:[Math.abs(c),"%"]})]})]})]})})};var pPe=function(e){var t=e.data;return Object(a.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(a.jsx)(dPe,{title:"New Leads",description:"",value:t.count.newLeads,percentage:t.percentages.new_leads}),Object(a.jsx)(dPe,{title:"Total Leads",description:"",value:t.count.totalLeads,percentage:t.percentages.total_leads}),Object(a.jsx)(dPe,{title:"Avg. Conversion Time",description:"",value:t.count.avgConversionTime,valuePostfix:" days",percentage:t.percentages.avg_conversion_time}),Object(a.jsx)(dPe,{title:"Converted",description:"",value:t.count.converted,percentage:t.percentages.converted}),Object(a.jsx)(dPe,{title:"Meetings",description:"",value:t.count.meetings,percentage:t.percentages.meetings}),Object(a.jsx)(dPe,{title:"Follow-ups",description:"",value:t.count.followUps,percentage:t.percentages.followUps})]})};var hPe=function(e){var t=e.data;return Object(a.jsx)("div",{children:Object(a.jsxs)(F_.a,{data:t,scrollable:"none",children:[Object(a.jsx)(F_.b,{field:"name",title:"Tags"}),Object(a.jsx)(F_.b,{field:"count",title:"No.",width:120}),Object(a.jsx)(F_.b,{field:"percent",title:"%",width:120,cell:function(e){var t=e.dataItem;return Object(a.jsxs)("td",{children:[t.percent,"%"]})}}),Object(a.jsx)(F_.b,{field:"diff",title:"Diff.",width:120,cell:function(e){var t=e.dataItem.diff;return Object(a.jsxs)("td",{className:t<0?"text-danger":"text-success",children:[Math.abs(t),"%"]})}})]})})};var bPe=function(){var e=Object(p.useContext)(EPe).filters,t=Object(p.useCallback)(Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,rPe.getLeadsReport(Object(c.a)({},e));case 3:n=t.sent,d(n),i(!1);case 6:case"end":return t.stop()}}),t)}))),[e]);Object(p.useEffect)((function(){return t(),function(){}}),[e,t]);var n=Object(p.useState)(!1),r=Object(w.a)(n,2),o=r[0],i=r[1],s=Object(p.useState)(),l=Object(w.a)(s,2),u=l[0],d=l[1];return Object(a.jsxs)("div",{className:"d-flex flex-column",children:[o&&Object(a.jsx)(Nv,{color:_.white,size:40}),u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex py-5 px-4",style:{backgroundColor:_.gray0},children:[Object(a.jsx)("div",{className:"mr-5",children:Object(a.jsx)("div",{style:{maxWidth:"400px"},children:Object(a.jsx)(pPe,{data:u.stats})})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center",children:Object(a.jsx)(oPe,{data:u.chart})})]}),Object(a.jsx)("hr",{className:"m-0"}),Object(a.jsxs)("div",{className:"d-flex py-3 px-4",children:[Object(a.jsx)("div",{className:"mr-3 flex-grow-1",children:Object(a.jsx)(hPe,{data:u.tags})}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(iPe,{data:u.staff})})]})]})]})},fPe={new_jobs_from_referrals:"New Jobs From Referrals",revenue_from_managed_customers:"Revenue From Managed Customers",revenue_from_managed_referrals:"Revenue From Managed Referrals"};var mPe=function(e){var t=e.data,n=Object(p.useState)({key:"new_jobs_from_referrals",label:fPe.new_jobs_from_referrals}),r=Object(w.a)(n,2),o=r[0],i=r[1],c=Object(p.useState)("current"),s=Object(w.a)(c,2),l=s[0],u=s[1],d=Object(p.useState)([]),h=Object(w.a)(d,2),b=h[0],f=h[1],m=Object(p.useState)([]),j=Object(w.a)(m,2),v=j[0],O=j[1];return Object(p.useEffect)((function(){["current","previous"].forEach((function(e){Object.keys(fPe).forEach((function(n){t[e][n].forEach((function(e){e.x=new Date(e.x)}))}))}))}),[t]),Object(p.useEffect)((function(){f(t.current[o.key]),O(t.previous[o.key])}),[o,f,O,t]),Object(a.jsxs)("div",{className:"flex-grow-1 py-3",style:{background:"#fff"},children:[Object(a.jsxs)("div",{className:"d-flex align-items-center px-3 py-1",children:[Object(a.jsx)("div",{style:{width:250},children:Object(a.jsx)(n9,{value:o,options:Object.keys(fPe).map((function(e){return{key:e,label:fPe[e]}})),onChange:function(e){return i(e)},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.key}})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center",children:Object(a.jsx)("h4",{children:Object(a.jsx)("strong",{children:fPe[o.key]})})}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("label",{className:"mr-5 mb-0 d-flex align-items-center",children:[Object(a.jsx)("input",{className:"mr-2",type:"radio",name:"view",value:"current",defaultChecked:"current"===l,onChange:function(e){return u(e.target.value)}}),"Current"]}),Object(a.jsxs)("label",{className:"mb-0 d-flex align-items-center",children:[Object(a.jsx)("input",{className:"mr-2",type:"radio",name:"view",value:"previous",defaultChecked:"previous"===l,onChange:function(e){return u(e.target.value)}}),"Previous"]})]})]}),Object(a.jsx)("div",{className:"pl-md-5",children:Object(a.jsx)(ple.a,{className:"pl-md-5 ml-md-5 pr-md-3",children:Object(a.jsx)(ple.c,{children:Object(a.jsx)(ple.d,{type:"line",field:"y",categoryField:"x",data:"current"===l?b:v})})})})]})};var jPe=function(e){var t=e.data;return Object(a.jsx)("div",{children:Object(a.jsxs)(F_.a,{data:t,scrollable:"none",children:[Object(a.jsx)(F_.b,{field:"job_id",title:"Job No.",width:100,cell:function(e){var t=e.dataItem,n=t.job_id,r=t.job_assigned_location;return Object(a.jsxs)("td",{children:["#",n,"-",r]})}}),Object(a.jsx)(F_.b,{field:"job_customer",title:"Customer"}),Object(a.jsx)(F_.b,{field:"job_referrer",title:"Referrer"}),Object(a.jsx)(F_.b,{field:"job_status",title:"Status",width:120,format:"{0:c}"})]})})};var vPe=function(e){var t=e.data;return Object(a.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(a.jsx)(dPe,{title:"Managed Accounts",description:"Number of active contacts that are managed by a person",value:t.count.managed,percentage:t.percentages.managed}),Object(a.jsx)(dPe,{title:"Touched",description:"",value:t.count.touched,percentage:t.percentages.touched}),Object(a.jsx)(dPe,{title:"Meetings",description:"",value:t.count.meetings,percentage:t.percentages.meetings}),Object(a.jsx)(dPe,{title:"Follow-ups",description:"",value:t.count.followUps,percentage:t.percentages.followUps}),Object(a.jsx)(dPe,{title:"Referral Jobs",description:"",value:t.count.referral_jobs,percentage:t.percentages.referral_jobs}),Object(a.jsx)(dPe,{title:"Revenue",description:"",valuePrefix:"$",value:t.count.revenue.toFixed(2),percentage:t.percentages.revenue})]})};var OPe=function(e){var t=e.data;return Object(a.jsx)("div",{children:Object(a.jsxs)(F_.a,{data:t,scrollable:"none",children:[Object(a.jsx)(F_.b,{field:"name",title:"Tags"}),Object(a.jsx)(F_.b,{field:"count",title:"No.",width:120}),Object(a.jsx)(F_.b,{field:"percent",title:"%",width:120,cell:function(e){var t=e.dataItem;return Object(a.jsxs)("td",{children:[t.percent,"%"]})}}),Object(a.jsx)(F_.b,{field:"diff",title:"Diff.",width:120,cell:function(e){var t=e.dataItem.diff;return Object(a.jsxs)("td",{className:t<0?"text-danger":"text-success",children:[Math.abs(t),"%"]})}})]})})};var gPe=function(){var e=Object(p.useContext)(EPe).filters,t=Object(p.useCallback)(Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,rPe.getManagedAccountsReport(Object(c.a)({},e));case 3:n=t.sent,d(n),i(!1);case 6:case"end":return t.stop()}}),t)}))),[e]);Object(p.useEffect)((function(){return t(),function(){}}),[e,t]);var n=Object(p.useState)(!1),r=Object(w.a)(n,2),o=r[0],i=r[1],s=Object(p.useState)(),l=Object(w.a)(s,2),u=l[0],d=l[1];return Object(a.jsxs)("div",{className:"d-flex flex-column",children:[o&&Object(a.jsx)(Nv,{color:_.white,size:40}),u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex py-5 px-4",style:{backgroundColor:_.gray0},children:[Object(a.jsx)("div",{className:"mr-5",children:Object(a.jsx)("div",{style:{maxWidth:"400px"},children:Object(a.jsx)(vPe,{data:u.stats})})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center",children:Object(a.jsx)(mPe,{data:u.chart})})]}),Object(a.jsx)("hr",{className:"m-0"}),Object(a.jsxs)("div",{className:"d-flex py-3 px-4",children:[Object(a.jsx)("div",{className:"mr-3 flex-grow-1",children:Object(a.jsx)(OPe,{data:u.tags})}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(jPe,{data:u.jobs})})]})]})]})},xPe={revenue_from_accounts:"Revenue From Accounts"};var yPe=function(e){var t=e.data,n=Object(p.useState)({key:"revenue_from_accounts",label:xPe.revenue_from_accounts}),r=Object(w.a)(n,2),o=r[0],i=(r[1],Object(p.useState)("current")),c=Object(w.a)(i,2),s=c[0],l=c[1],u=Object(p.useState)([]),d=Object(w.a)(u,2),h=d[0],b=d[1],f=Object(p.useState)([]),m=Object(w.a)(f,2),j=m[0],v=m[1];return Object(p.useEffect)((function(){["current","previous"].forEach((function(e){Object.keys(xPe).forEach((function(n){t[e][n].forEach((function(e){e.x=new Date(e.x)}))}))}))}),[t]),Object(p.useEffect)((function(){b(t.current[o.key]),v(t.previous[o.key])}),[o,b,v,t]),Object(a.jsxs)("div",{className:"flex-grow-1 py-3",style:{background:"#fff"},children:[Object(a.jsxs)("div",{className:"d-flex align-items-center px-3 py-1",children:[Object(a.jsx)("div",{style:{width:250}}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center",children:Object(a.jsx)("h4",{children:Object(a.jsx)("strong",{children:xPe[o.key]})})}),Object(a.jsxs)("div",{className:"d-flex",children:[Object(a.jsxs)("label",{className:"mr-5 mb-0 d-flex align-items-center",children:[Object(a.jsx)("input",{className:"mr-2",type:"radio",name:"view",value:"current",defaultChecked:"current"===s,onChange:function(e){return l(e.target.value)}}),"Current"]}),Object(a.jsxs)("label",{className:"mb-0 d-flex align-items-center",children:[Object(a.jsx)("input",{className:"mr-2",type:"radio",name:"view",value:"previous",defaultChecked:"previous"===s,onChange:function(e){return l(e.target.value)}}),"Previous"]})]})]}),Object(a.jsx)("div",{className:"pl-md-5",children:Object(a.jsx)(ple.a,{className:"pl-md-5 ml-md-5 pr-md-3",children:Object(a.jsx)(ple.c,{children:Object(a.jsx)(ple.d,{type:"line",field:"y",categoryField:"x",data:"current"===s?h:j})})})})]})};var _Pe=function(e){var t=e.data;return Object(a.jsx)("div",{children:Object(a.jsxs)(F_.a,{data:t,scrollable:"none",children:[Object(a.jsx)(F_.b,{field:"staff",title:"Staff"}),Object(a.jsx)(F_.b,{field:"leads",title:"Volume",width:120}),Object(a.jsx)(F_.b,{field:"managed",title:"Managed Accounts",width:170}),Object(a.jsx)(F_.b,{field:"revenue",title:"Revenue",width:120,format:"{0:c}"})]})})};var wPe=function(e){var t=e.data;return Object(a.jsxs)("div",{className:"d-flex flex-wrap",children:[Object(a.jsx)(dPe,{title:"Managed Accounts",description:"Number of active contacts that are managed by a person",value:t.count.managed,percentage:t.percentages.managed}),Object(a.jsx)(dPe,{title:"New Leads",description:"",value:t.count.newLeads,percentage:t.percentages.new_leads}),Object(a.jsx)(dPe,{title:"Accounts Touched",description:"",value:t.count.touched,percentage:t.percentages.touched}),Object(a.jsx)(dPe,{title:"Leads Converted",description:"",value:t.count.converted,percentage:t.percentages.converted}),Object(a.jsx)(dPe,{title:"Meetings",description:"",value:t.count.meetings,percentage:t.percentages.meetings}),Object(a.jsx)(dPe,{title:"Follow-ups",description:"",value:t.count.followUps,percentage:t.percentages.followUps}),Object(a.jsx)(dPe,{title:"Revenue",description:"",valuePrefix:"$",value:t.count.revenue.toFixed(2),percentage:t.percentages.revenue})]})};var SPe=function(e){var t=e.data;return Object(a.jsx)("div",{children:Object(a.jsxs)(F_.a,{data:t,scrollable:"none",children:[Object(a.jsx)(F_.b,{field:"name",title:"Tags"}),Object(a.jsx)(F_.b,{field:"count",title:"No.",width:120}),Object(a.jsx)(F_.b,{field:"percent",title:"%",width:120,cell:function(e){var t=e.dataItem;return Object(a.jsxs)("td",{children:[t.percent,"%"]})}}),Object(a.jsx)(F_.b,{field:"diff",title:"Diff.",width:120,cell:function(e){var t=e.dataItem.diff;return Object(a.jsxs)("td",{className:t<0?"text-danger":"text-success",children:[Math.abs(t),"%"]})}})]})})};var kPe=function(){var e=Object(p.useContext)(EPe).filters,t=Object(p.useCallback)(Object(lj.a)(sj.a.mark((function t(){var n;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return i(!0),t.next=3,rPe.getVolumeReport(Object(c.a)({},e));case 3:n=t.sent,d(n),i(!1);case 6:case"end":return t.stop()}}),t)}))),[e]);Object(p.useEffect)((function(){return t(),function(){}}),[e,t]);var n=Object(p.useState)(!1),r=Object(w.a)(n,2),o=r[0],i=r[1],s=Object(p.useState)(),l=Object(w.a)(s,2),u=l[0],d=l[1];return Object(a.jsxs)("div",{className:"d-flex flex-column",children:[o&&Object(a.jsx)(Nv,{color:_.white,size:40}),u&&Object(a.jsxs)(a.Fragment,{children:[Object(a.jsxs)("div",{className:"d-flex py-5 px-4",style:{backgroundColor:_.gray0},children:[Object(a.jsx)("div",{className:"mr-5",children:Object(a.jsx)("div",{style:{maxWidth:"400px"},children:Object(a.jsx)(wPe,{data:u.stats})})}),Object(a.jsx)("div",{className:"flex-grow-1 d-flex justify-content-center",children:Object(a.jsx)(yPe,{data:u.chart})})]}),Object(a.jsx)("hr",{className:"m-0"}),Object(a.jsxs)("div",{className:"d-flex py-3 px-4",children:[Object(a.jsx)("div",{className:"mr-3 flex-grow-1",children:Object(a.jsx)(SPe,{data:u.tags})}),Object(a.jsx)("div",{className:"flex-grow-1",children:Object(a.jsx)(_Pe,{data:u.staff})})]})]})]})};function CPe(){var e=Object(f.a)(["\n  a.active{\n    border-bottom: 3px solid ",";\n    font-weight: bold;\n  }\n  a{\n    color: ",";\n  }\n  a:hover{\n    text-decoration: none;\n  }\n"]);return CPe=function(){return e},e}var NPe=y.default.div(CPe(),_.blue2,_.black0),EPe=h.a.createContext({filters:{}}),APe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={filters:{date_from:pm()().subtract(1,"month"),date_to:pm()()}},e.setPrimaryLocation=function(){var t=e.state.filters;t.location=e.props.locations.find((function(e){return e.primary}))||e.props.locations[0],e.setState({filters:Object(c.a)({},t)})},e.onFilterChange=function(t,n){var r=e.state.filters;r[t]=n,e.setState({filters:Object(c.a)({},r)})},e}return Object(l.a)(n,[{key:"componentDidUpdate",value:function(){!("location"in this.state.filters)&&this.props.locations.length&&this.setPrimaryLocation()}},{key:"render",value:function(){var e=this.props,t=e.match.url,n=e.locations,r=this.state.filters;return Object(a.jsx)(EPe.Provider,{value:{filters:r},children:Object(a.jsxs)("div",{className:"h-100 overflow-auto pb-3 d-flex flex-column",children:[Object(a.jsxs)("div",{className:"position-sticky",style:{top:0,zIndex:1},children:[Object(a.jsx)(xce,{title:"Reports",style:{background:_.yellow},children:Object(a.jsx)("div",{className:"flex-grow-1 d-flex h-100",children:Object(a.jsx)(tPe,{locations:n,filters:r,onFilterChange:this.onFilterChange})})}),Object(a.jsx)("div",{className:"d-flex px-4",style:{backgroundColor:_.white},children:Object(a.jsxs)(NPe,{className:"h-100 py-3",children:[Object(a.jsx)(v.c,{className:"p-3",to:"".concat(t,"/volume"),children:"Volume"}),Object(a.jsx)(v.c,{className:"p-3",to:"".concat(t,"/lead"),children:"Leads"}),Object(a.jsx)(v.c,{className:"p-3",to:"".concat(t,"/managed-account"),children:"Managed Accounts"})]})}),Object(a.jsx)("hr",{className:"m-0"}),Object(a.jsx)("hr",{className:"m-0"})]}),Object(a.jsxs)("div",{className:"flex-grow-1",children:[!n.length&&Object(a.jsx)(Nv,{size:40,color:_.white}),n.length>0&&Object(a.jsxs)(O.d,{children:[Object(a.jsx)(xR,{path:"".concat(t,"/volume"),component:kPe,permission:vx.CONTACTS_VIEW}),Object(a.jsx)(xR,{path:"".concat(t,"/lead"),component:bPe,permission:vx.CONTACTS_VIEW}),Object(a.jsx)(xR,{path:"".concat(t,"/managed-account"),component:gPe,permission:vx.CONTACTS_VIEW}),Object(a.jsx)(O.a,{to:"".concat(t,"/volume")})]})]})]})})}}]),n}(p.Component),IPe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),O.g)(APe);function TPe(){var e=Object(f.a)(["\n  padding: 0.5rem 1rem;\n  background-color: ",";\n  border-bottom: 1px solid ",";\n  :empty{display: none;}\n  div{padding: 0px !important;margin: 0px !important;display:inline;}\n"]);return TPe=function(){return e},e}function RPe(){var e=Object(f.a)(["\n  padding-top: 55px;\n  height: 100%;\n  width: 100%;\n"]);return RPe=function(){return e},e}var DPe=y.default.div(RPe()),MPe=y.default.div(TPe(),_.gray1,_.gray2),LPe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(e){var r;return Object(s.a)(this,n),(r=t.call(this,e)).userContext=void 0,r.has=function(e){var t=r.props.user;return!(!t.me||!t.me.permissions.has(e))},r.computeManagePermission=function(e){return jx.some((function(t){return e(t)}))},r.userContext={has:r.has,user:r.props.user.me},r}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this.props,t=e.user,n=e.dispatch,r=e.history;n(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",Promise.all([zy.getAssignmentTypes()]).then((function(e){var n=Object(w.a)(e,1)[0];t({type:J1,payload:{jobAssignmentTypes:n}})})));case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(function(){var e=Object(lj.a)(sj.a.mark((function e(t){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:D0(t,vX.accountingOrganizations,k0.getAccountingOrganizations),D0(t,vX.taxRates,k0.getTaxRates),D0(t,vX.gsCodes,k0.getGSCodes);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),n(vP()),n(function(){var e=Object(lj.a)(sj.a.mark((function e(t){var n;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:$1}),e.prev=1,e.next=4,hO.getContactStatuses();case 4:n=e.sent,t({type:e2,payload:n}),e.next=12;break;case 8:throw e.prev=8,e.t0=e.catch(1),t({type:t2,payload:null}),e.t0;case 12:case"end":return e.stop()}}),e,null,[[1,8]])})));return function(t){return e.apply(this,arguments)}}()),n(Dk(R2,D2,M2,Rg.searchCountries)),n(Dk(P2,F2,U2,Rg.searchStates)),n(t5()),t&&t.me&&_7(t.me.id,r)}},{key:"getRoutes",value:function(){var e=[[{path:"/finance/invoices/draft",name:"Invoices",disabled:!this.has(vx.FINANCE_INVOICES_MANAGE)},{path:"/finance/purchase-orders/draft",name:"Purchase Orders",disabled:!this.has(vx.FINANCE_PURCHASE_ORDERS_MANAGE)},{path:"/finance/credit-notes/draft",name:"Credit Notes",disabled:!this.has(vx.FINANCE_CREDIT_NOTES_MANAGE)}].filter((function(e){return!e.disabled})),[{path:"/finance/receive-payment",name:"Receive a Payment",disabled:!this.has(vx.FINANCE_PAYMENTS_RECEIVE)},{path:"/finance/forward-invoice-payments/new",name:"Forward Invoice Payments",disabled:!this.has(vx.FINANCE_PAYMENTS_FORWARD)}].filter((function(e){return!e.disabled})),[{path:"/finance/reimbursements",name:"Reimbursements",disabled:!this.has(vx.FINANCE_INVOICES_VIEW)},{path:"/finance/timesheet-payroll",name:"Timesheet Payroll",disabled:!this.has(vx.FINANCE_INVOICES_VIEW)}].filter((function(e){return!e.disabled}))],t=[[{path:"/operations/schedule",name:"Schedule",disabled:!this.has(vx.OPERATIONS_RUNS_VIEW)}].filter((function(e){return!e.disabled})),[{path:"/operations/inventories",name:"Inventories",disabled:!this.has(vx.OPERATIONS_INVENTORY_VIEW)},{path:"/operations/warehousing",name:"Warehousing",disabled:!this.has(vx.OPERATIONS_STORAGE_VIEW)}].filter((function(e){return!e.disabled}))];return Object(m.compact)([this.has(vx.JOBS_VIEW)&&{path:"/jobs",name:"Jobs"},this.has(vx.CONTACTS_VIEW)&&{path:"/contacts",name:"Contacts"},{path:e[0][0].path,name:"Finance",items:e},{path:t[0][0].path,name:"Operations",items:t},{path:"/reports",name:"Reports",items:[[{path:"/reports/contacts",name:"Contacts Report"}]]}])}},{key:"render",value:function(){var e=this.props,t=e.modal.confirm,n=t.active,r=t.hash,o=t.title,i=t.body,c=t.width,s=e.dispatch;return Object(a.jsx)(Cx.Provider,{value:this.userContext,children:Object(a.jsxs)("div",{className:"h-100",children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",html:!0}),n&&Object(a.jsx)(d8,{isOpen:n,hash:r,title:o,body:i,width:c,onClose:function(){var e;s((e="Confirm",function(t){t({type:"Steamatic/Modal/".concat(e,"/CLOSE")})}))}}),Object(a.jsx)(jj.b,{closeButton:Object(a.jsx)(cm,{name:Xf.ToastClose,size:18}),newestOnTop:!0,transition:jj.a}),Object(a.jsx)(u8,{routes:this.getRoutes()}),Object(a.jsxs)(DPe,{className:"d-flex flex-column",children:[Object(a.jsx)(xk.Breadcrumbs,{separator:Object(a.jsx)("b",{children:" / "}),item:v.c,finalItem:"b",finalProps:{style:{color:_.gray3}},container:MPe,containerProps:{className:"print-hide"},compare:function(){return 0}}),Object(a.jsx)("div",{className:"flex-grow-1 overflow-auto",children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(xR,{path:"/jobs/:job_id/work-order/:job_task_id",component:$Re,permission:vx.JOBS_VIEW}),Object(a.jsx)(xR,{path:"/job/:id",component:sX,permission:vx.JOBS_VIEW}),Object(a.jsx)(xR,{path:"/jobs",component:_k,permission:vx.JOBS_VIEW}),Object(a.jsx)(xR,{path:"/usage-and-actuals/:id",component:Rwe,permission:vx.JOBS_USAGE_VIEW}),Object(a.jsx)(xR,{path:"/contacts",component:qR,permission:vx.CONTACTS_VIEW}),Object(a.jsx)(xR,{path:"/finance/invoices/create/:tempId?",component:Yee,permission:vx.FINANCE_INVOICES_MANAGE}),Object(a.jsx)(xR,{path:"/finance/invoices/details/:id",component:Yee,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/finance/invoices/:type",component:F6,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(O.a,{exact:!0,from:"/finance/invoices",to:"/finance/invoices/draft"}),Object(a.jsx)(O.a,{exact:!0,from:"/finance/purchase-orders",to:"/finance/purchase-orders/draft"}),Object(a.jsx)(O.a,{exact:!0,from:"/finance/credit-notes",to:"/finance/credit-notes/draft"}),Object(a.jsx)(xR,{path:"/finance/purchase-orders/create",component:ote,permission:vx.FINANCE_PURCHASE_ORDERS_MANAGE}),Object(a.jsx)(xR,{path:"/finance/purchase-orders/details/:id",component:ote,permission:vx.FINANCE_PURCHASE_ORDERS_VIEW}),Object(a.jsx)(xR,{path:"/finance/purchase-orders/:type",component:$ee,permission:vx.FINANCE_PURCHASE_ORDERS_VIEW}),Object(a.jsx)(xR,{path:"/finance/credit-notes/create",component:jte,permission:vx.FINANCE_CREDIT_NOTES_MANAGE}),Object(a.jsx)(xR,{path:"/finance/credit-notes/details/:id",component:jte,permission:vx.FINANCE_CREDIT_NOTES_MANAGE}),Object(a.jsx)(xR,{path:"/finance/credit-notes/:type",component:ute,permission:vx.FINANCE_CREDIT_NOTES_VIEW}),Object(a.jsx)(xR,{path:"/finance/receive-payment",component:fne,permission:vx.FINANCE_PAYMENTS_VIEW}),Object(a.jsx)(xR,{path:"/finance/forward-invoice-payments/new",component:Tne,permission:vx.FINANCE_PAYMENTS_FORWARD}),Object(a.jsx)(xR,{path:"/finance/forward-invoice-payments/received",component:Jne,permission:vx.FINANCE_PAYMENTS_FORWARD}),Object(a.jsx)(xR,{path:"/finance/reimbursements",component:qne,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/finance/timesheet-payroll",component:zne,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/operations/schedule/config/:section",component:YIe,permission:vx.OPERATIONS_RUNS_TEMPLATES_MANAGE}),Object(a.jsx)(xR,{path:"/operations/schedule/:section?",component:Xce,permission:vx.OPERATIONS_RUNS_VIEW}),Object(a.jsx)(xR,{path:"/operations/inventories",component:XLe,permission:vx.OPERATIONS_INVENTORY_VIEW}),Object(a.jsx)(xR,{path:"/operations/warehousing",component:PIe,permission:vx.OPERATIONS_INVENTORY_VIEW}),Object(a.jsx)(xR,{path:"/reports/account-transactions",component:fre,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/aged-receivables-summary",component:mre,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/aged-receivables-detailed",component:jre,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/income-by-account-summary",component:vre,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/income-by-account-detailed",component:Ore,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/gst-summary",component:qre,permission:vx.FINANCE_FINANCIAL_REPORTS_VIEW}),Object(a.jsx)(xR,{path:"/reports/statement-by-contact-summary",component:zre,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/invoice-payments",component:tae,permission:vx.FINANCE_INVOICES_VIEW}),Object(a.jsx)(xR,{path:"/reports/financial-report/:type",component:FAe,permission:vx.FINANCE_FINANCIAL_REPORTS_VIEW}),Object(a.jsx)(xR,{path:"/reports/trial-balance",component:kEe,permission:vx.FINANCE_FINANCIAL_REPORTS_VIEW}),Object(a.jsx)(xR,{path:"/reports/contacts",component:IPe,permission:vx.CONTACTS_VIEW}),Object(a.jsx)(xR,{path:"/manage",permission:this.computeManagePermission,component:xEe}),Object(a.jsx)(O.b,{path:"/not-found",component:HR}),Object(a.jsx)(O.b,{path:"/unauthorized",component:b8}),Object(a.jsx)(O.a,{to:"/jobs"})]})})]})]})})}}]),n}(p.PureComponent),PPe=Object(sg.compose)(O.g,Object(b.b)((function(e){return{modal:e.modal,user:e.user}})),Object(nae.DragDropContext)(aae.a),(function(e){return h.a.memo((function(t){var n=Object(p.useState)(!0),r=Object(w.a)(n,2),o=r[0],i=r[1];return Object(a.jsx)(S.Provider,{value:{isOpen:o,toggleSidebar:function(){return i(!o)}},children:Object(a.jsx)(e,Object(c.a)({},t))})}))}))(LPe),FPe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"render",value:function(){return Object(a.jsx)(yg,Object(c.a)(Object(c.a)({},this.props),{},{type:"password"}))}}]),n}(p.PureComponent);function UPe(){var e=Object(f.a)(["\n  border-color: ",";\n  color: ",";\n\n  :hover {\n    border-color: ",";\n    background: ",";\n  }\n"]);return UPe=function(){return e},e}function BPe(){var e=Object(f.a)(["\n  margin: 30px 0 20px;\n  text-align: center;\n  color: ",";\n"]);return BPe=function(){return e},e}function VPe(){var e=Object(f.a)(["\n  font-size: ",";\n"]);return VPe=function(){return e},e}var JPe=y.default.div(VPe(),sm.medium),qPe=y.default.div(BPe(),_.gray3),zPe=y.default.a(UPe(),_.blue2,_.blue2,_.blue3,_.blue3),GPe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"getOffice365Link",value:function(){var e={client_id:Object({NODE_ENV:"production",PUBLIC_URL:"",WDS_SOCKET_HOST:void 0,WDS_SOCKET_PATH:void 0,WDS_SOCKET_PORT:void 0,FAST_REFRESH:!0,REACT_APP_API_BASE_URL:"https://apiverify.steamaticnis.com.au",REACT_APP_PUSHER_KEY:"ff23978957767713ca4a",REACT_APP_PUSHER_CLUSTER:"ap2",REACT_APP_HELPSCOUT_BEACON_ID:"70d78cd7-3591-42af-9dc2-cfaac0d4c64e",REACT_APP_PASSWORD_CLIENT_ID:"2",REACT_APP_PASSWORD_CLIENT_SECRET:"Psy44lQldHK23HFLruNBqPUTnOwMQ1FDDV1MBcPI"}).REACT_APP_OFFICE_365_CLIENT_ID,response_type:"token",redirect_uri:encodeURI(window.location.href.replace("login","office365-success")),scope:"user.read",response_mode:"fragment"};return"https://login.microsoftonline.com/common/oauth2/v2.0/authorize?".concat(bj.stringify(e))}},{key:"render",value:function(){var e=this.props.submitting;return Object(a.jsx)("div",{className:"row login-form-wrapper mb-5",children:Object(a.jsxs)("div",{className:"col",children:[Object(a.jsx)("div",{className:"row mb-3",children:Object(a.jsx)(JPe,{className:"col",children:"Log in"})}),Object(a.jsxs)("form",{onSubmit:this.props.handleSubmit,children:[Object(a.jsxs)("div",{children:[Object(a.jsx)(Hv.a,{name:"login",placeholder:"Email address",component:yg,disabled:e,validate:Dv}),Object(a.jsx)(Hv.a,{name:"password",placeholder:"Password",component:FPe,disabled:e,validate:Dv})]}),Object(a.jsxs)("div",{className:"row d-flex h-100",children:[Object(a.jsx)("div",{className:"col-lg-3 justify-content-center align-self-center",children:Object(a.jsx)(Xg,{type:"submit",className:"btn py-2 px-3",disabled:e,children:"Log in"})}),Object(a.jsx)("div",{className:"col-lg-9 justify-content-center align-self-center",children:Object(a.jsx)("a",{href:"#",children:"Forgot your password?"})})]}),Object(a.jsxs)("div",{className:"text-center",children:[Object(a.jsx)(qPe,{children:"OR"}),Object(a.jsx)(zPe,{className:"btn btn-outline-primary",href:this.getOffice365Link(),children:"Sign-in with Office 365"})]})]})]})})}}]),n}(p.PureComponent),WPe=Object(jv.a)({form:"LoginForm"})(GPe);function HPe(){var e=Object(f.a)(["\n  color: ",";\n  font-weight: ",";\n  height: 1rem;\n"]);return HPe=function(){return e},e}function YPe(){var e=Object(f.a)(["\n  font-size: 22px;\n  text-align: center;\n  padding: 55px;\n  font-weight: normal;\n"]);return YPe=function(){return e},e}function QPe(){var e=Object(f.a)(["\n  background: ",";\n  border: 1px solid ",";\n  border-radius: 4px;\n  padding: 33px 0;\n"]);return QPe=function(){return e},e}function KPe(){var e=Object(f.a)(["\n  background: ",";\n  height: 100%;\n"]);return KPe=function(){return e},e}var ZPe,XPe=y.default.div(KPe(),_.gray1),$Pe=y.default.div(QPe(),_.white,_.gray2),eFe=y.default.h1(YPe()),tFe=y.default.div(HPe(),_.red1,lm.bold),nFe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={error:!1,loading:!1},e.handleSubmit=function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e.setState({loading:!0}),t.prev=1,t.next=4,Jj.login(n.login,n.password);case 4:if(!(r=t.sent).access_token){t.next=10;break}return t.next=8,e.props.dispatch(mP());case 8:t.next=12;break;case 10:throw e.setState({loading:!1}),r;case 12:t.next=18;break;case 14:t.prev=14,t.t0=t.catch(1),console.warn(t.t0),e.setState({error:!0,loading:!1});case 18:return t.abrupt("return",r);case 19:case"end":return t.stop()}}),t,null,[[1,14]])})));return function(e){return t.apply(this,arguments)}}(),e}return Object(l.a)(n,[{key:"render",value:function(){var e=this.state.loading;return Object(a.jsx)(XPe,{children:Object(a.jsx)("div",{className:"container h-100",children:Object(a.jsx)("div",{className:"row justify-content-center h-100",children:Object(a.jsxs)("div",{className:"col col-lg-8",children:[Object(a.jsxs)(eFe,{children:[Object(a.jsx)("strong",{children:"Steamatic"})," NIS"]}),Object(a.jsxs)($Pe,{className:"row",children:[Object(a.jsx)("div",{className:"col border-right p-4"}),Object(a.jsxs)("div",{className:"col p-4",children:[e&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(WPe,{onSubmit:this.handleSubmit}),Object(a.jsx)(tFe,{children:this.state.error?"Invalid login or password":""})]})]})]})})})})}}]),n}(p.PureComponent),rFe=Object(sg.compose)(Object(b.b)(),O.g)(nFe),aFe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){return Object(s.a)(this,n),t.apply(this,arguments)}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=Object(lj.a)(sj.a.mark((function e(){var t,n=this;return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=bj.parse(this.props.location.hash.slice(1)),e.prev=1,e.next=4,Jj.loginWithOffice365(t.access_token);case 4:this.props.dispatch(mP()),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),setTimeout((function(){return n.props.history.push("/login")}),1e3);case 10:case"end":return e.stop()}}),e,this,[[1,7]])})));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return Object(a.jsxs)("div",{children:[Object(a.jsx)(jj.b,{}),"Wait..."]})}}]),n}(p.PureComponent),oFe=Object(sg.compose)(Object(b.b)(),O.g)(aFe);!function(e){e.getSessionStorage="getSessionStorage",e.setSessionStorage="setSessionStorage"}(ZPe||(ZPe={}));function iFe(){var e=Object(f.a)(["\n  font-size: 14px;\n"]);return iFe=function(){return e},e}function cFe(){var e=Object(f.a)(["\n  font-size: 14px;\n  padding: 10px;\n  border: 1px solid #d3dbde;\n"]);return cFe=function(){return e},e}function sFe(){var e=Object(f.a)(["\n  border: 1px solid #d3dbde;\n  padding: 10px;\n  background-color: #f9fafa;\n  display: flex;\n  justify-content: space-between;\n  .status1 {\n    background-color: #23b376;\n    border-radius: 3px;\n    padding: 3px;\n    color: white;\n  }\n\n  .status2 {\n    background-color: #909698;\n    border-radius: 3px;\n    padding: 3px;\n    color: white;\n  }\n"]);return sFe=function(){return e},e}function lFe(){var e=Object(f.a)(["\n  margin: 20px 0;\n"]);return lFe=function(){return e},e}function uFe(){var e=Object(f.a)(["\n  border: 1px solid #d3dbde;\n  padding: 10px;\n"]);return uFe=function(){return e},e}function dFe(){var e=Object(f.a)(["\n  width: 60%;\n"]);return dFe=function(){return e},e}function pFe(){var e=Object(f.a)(["\n  font-size: 18px;\n  margin: 30px 0 0 30px;\n  font-weight: bold;\n"]);return pFe=function(){return e},e}function hFe(){var e=Object(f.a)(["\n  font-size: 16px;\n  color: #909698;\n  margin-left: 31px;\n"]);return hFe=function(){return e},e}function bFe(){var e=Object(f.a)(["\n  padding: 8px 12px;\n  color: #3498db;\n  font-weight: lighter;\n  border-color: #3498db;\n  box-shadow: 0 0 0 !important;\n  cursor: pointer;\n  border-radius: 5px;\n  font-size: 13px;\n  margin: 0 10px;\n"]);return bFe=function(){return e},e}function fFe(){var e=Object(f.a)(["\n  display: flex;\n  align-items: center;\n"]);return fFe=function(){return e},e}function mFe(){var e=Object(f.a)(["\n  font-size: 18px;\n  color: #1d1d1d;\n"]);return mFe=function(){return e},e}function jFe(){var e=Object(f.a)(["\n  padding: 14px 28px 14px 20px;\n  border-bottom: 1px solid #d3dbde;\n"]);return jFe=function(){return e},e}var vFe=y.default.div(jFe()),OFe=y.default.div(mFe()),gFe=y.default.div(fFe()),xFe=y.default.button(bFe()),yFe=y.default.div(hFe()),_Fe=y.default.div(pFe()),wFe=y.default.div(dFe()),SFe=y.default.div(uFe()),kFe=y.default.div(lFe()),CFe=y.default.div(sFe()),NFe=y.default.div(cFe()),EFe=y.default.div(iFe()),AFe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={loading:!0,report:null},e.makeVisiableData=function(){var t=e.props.match.params.id;e.getData(t).then((function(t){e.setState({loading:!1,report:t[0].data})}))},e.getData=function(e){var t=[eQ.getInventoryReport(e)];return Promise.all(t)},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){this.makeVisiableData()}},{key:"renderItems",value:function(){var e=[],t=[],n=this.state.report;return(n?n.items:[]).forEach((function(n){var r=n.statuses;r.length>0&&("Restorable"===r[r.length-1].status?e.push(Object(a.jsxs)(kFe,{children:[Object(a.jsxs)(CFe,{children:[Object(a.jsx)("div",{children:n.name}),Object(a.jsx)("div",{className:"status1",children:"RESTORABLE"})]}),Object(a.jsxs)(NFe,{children:[Object(a.jsx)(EFe,{children:"Estimated Restorable Cost: ".concat(n.restoration_cost)}),Object(a.jsx)(EFe,{children:"Estimated Replacement Cost: ".concat(n.estimated_replacement_cost)}),n.photos.length>0&&Object(a.jsx)(CMe,{photos:n.photos,selectedPhotos:[],setSelectedPhotos:function(){},inventoryItem:n,loadPhotos:Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),itemName:n.name,onlyView:!0})]})]})):t.push(Object(a.jsxs)(kFe,{children:[Object(a.jsxs)(CFe,{children:[Object(a.jsx)("div",{children:n.name}),Object(a.jsx)("div",{className:"status2",children:"NON-RESTORABLE"})]}),Object(a.jsxs)(NFe,{children:[Object(a.jsx)(EFe,{children:"Estimated Restorable Cost: ".concat(n.restoration_cost)}),Object(a.jsx)(EFe,{children:"Estimated Replacement Cost: ".concat(n.estimated_replacement_cost)}),n.photos.length>0&&Object(a.jsx)(CMe,{photos:n.photos,selectedPhotos:[],setSelectedPhotos:function(){},inventoryItem:n,loadPhotos:Object(lj.a)(sj.a.mark((function e(){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:case"end":return e.stop()}}),e)}))),itemName:n.name,onlyView:!0})]})]})))})),e.concat(t)}},{key:"render",value:function(){var e=this,t=this.state,n=t.loading,r=t.report,o=r?r.address:"",i=r?r.job_number:"",c=r?r.restorable_items_count:0,s=r?r.non_restorable_items_count:0;return Object(a.jsx)(Cx.Consumer,{children:function(t){return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(um.a,{className:"overlapping",effect:"solid",place:"right"}),Object(a.jsxs)(vFe,{className:"d-flex flex-row justify-content-between",children:[Object(a.jsxs)(gFe,{children:[Object(a.jsx)(OFe,{children:"Steamatic"}),!n&&Object(a.jsx)(yFe,{children:"".concat(o||"Unknown"," | ").concat(i)})]}),Object(a.jsx)(gFe,{children:Object(a.jsx)(xFe,{children:"Print"})})]}),Object(a.jsx)("div",{className:"h-100",children:Object(a.jsx)(UC,{className:"h-100",style:{paddingBottom:"20px"},children:Object(a.jsxs)(wFe,{className:"flex-grow-1 position-relative mx-auto",children:[n&&Object(a.jsx)(Nv,{size:40,color:_.white}),Object(a.jsx)(_Fe,{children:"Inventory Report"}),Object(a.jsxs)(JC,{children:[Object(a.jsx)(SFe,{children:"".concat(c," Restorable Items")}),Object(a.jsx)(SFe,{children:"".concat(s," Non-Restorable Items")}),e.renderItems()]})]})})})]})}})}}]),n}(h.a.PureComponent),IFe=Object(sg.compose)(Object(b.b)((function(e){return{locations:e.user.locations}})),O.g)(AFe);function TFe(){var e=Object(f.a)(["\n  font-size: 18px;\n  color: #1d1d1d;\n"]);return TFe=function(){return e},e}function RFe(){var e=Object(f.a)(["\n  padding: 14px 28px 14px 20px;\n  border-bottom: 1px solid #d3dbde;\n"]);return RFe=function(){return e},e}var DFe=y.default.div(RFe()),MFe=y.default.div(TFe()),LFe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=this.props.match.params,n=t.uid,r=t.model;this.setState({working:!0}),Promise.all([KH(n,{model:r}).then(function(){var t=Object(lj.a)(sj.a.mark((function t(n){var r;return sj.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:r=PH(n,n.job?Vx(n.job):null),e.setState({contract:r});case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).catch((function(){e.setState({notFound:!0})})),zy.getContactsByContractUid(n,{model:r}).then((function(t){e.setState({contacts:t})}))]).catch((function(e){console.log(e)})).finally((function(){e.setState({working:!1})}))}},{key:"render",value:function(){var e=this.props.match.params.model,t=this.state,n=t.contract,r=t.contacts,o=t.working,i=t.notFound;return Object(a.jsxs)("div",{className:"d-flex h-100 flex-column align-items-stretch",children:[Object(a.jsx)(jj.b,{}),Object(a.jsx)("div",{children:Object(a.jsx)(DFe,{className:"d-flex flex-row justify-content-between",children:Object(a.jsxs)(MFe,{children:[Object(a.jsx)("strong",{children:"Steamatic"})," NIS"]})})}),Object(a.jsxs)(UC,{className:"h-100",style:{backgroundColor:_.gray0},children:[o&&Object(a.jsx)(Nv,{size:40}),i?Object(a.jsx)("div",{className:"h-100 d-flex align-items-center justify-content-center",children:Object(a.jsx)("h1",{children:"The contract number you've specified does not exist or has been cancelled."})}):n&&r?[AH.PRE_START_CHECK,AH.CONTENTS_INVENTORY,AH.WORK_COMPLETION].includes(n.type)?Object(a.jsx)(JC,{children:Object(a.jsx)("div",{className:"py-4 px-5",style:{maxWidth:"250mm",margin:"auto",backgroundColor:"#fff",border:"1px solid ".concat(_.gray2)},children:function(e){var t=Object(w.a)(e,3),o=t[0],i=t[1],c=t[2];return i?Object(a.jsxs)(a.Fragment,{children:[o&&Object(a.jsx)("h3",{className:"mb-5",children:Object(a.jsx)("strong",{children:o})}),Object(a.jsx)(i,{job:n.job,jobContacts:r||[],jobContract:n,initialValues:c||n.meta,user:null})]}):null}(function(){var e;switch(n.type){case AH.PRE_START_CHECK:return["Pre-Start Check",$K];case AH.CONTENTS_INVENTORY:return["Contents Inventory",NRe];case AH.WORK_COMPLETION:return["Statement of Work Complete",BRe,null===(e=n.signatures[0])||void 0===e?void 0:e.meta]}return[null,null]}())})}):Object(a.jsx)(uQ,{user:null,a4:!0,job:n.job,jobContacts:r,jobContract:n,defaultMeta:{},beforeSubmit:function(){var e=Object(lj.a)(sj.a.mark((function e(t,n,r){return sj.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(e.prev=0,t.type!==AH.GENERAL_AUTHORITY){e.next=5;break}return e.abrupt("return",hQ.validate(n,r));case 5:if(t.type!==AH.JOB_CONTRACT){e.next=7;break}return e.abrupt("return",kQ.validate(n,r));case 7:e.next=12;break;case 9:throw e.prev=9,e.t0=e.catch(0),e.t0;case 12:return e.abrupt("return",!0);case 13:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t,n,r){return e.apply(this,arguments)}}(),beforeSign:function(e,t,r){try{if(n.type===AH.JOB_CONTRACT)return kQ.validateSignatureMeta(e,t,r,n);if(n.type===AH.JOB_FORM_WORK_COMPLETION)return uZ.validateSignatureMeta(e,t,r,n)}catch(a){throw a}return!0},model:e}):null]})]})}}]),n}(p.Component),PFe=Object(O.g)(LFe),FFe=function(e){Object(u.a)(n,e);var t=Object(d.a)(n);function n(){var e;Object(s.a)(this,n);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return(e=t.call.apply(t,[this].concat(a))).state={isLoading:!0},e.handleUserLoad=function(){e.setState({isLoading:!1})},e}return Object(l.a)(n,[{key:"componentDidMount",value:function(){var e=this;this.setState({isLoading:!0}),(_j.addMessageHandler({type:ZPe.getSessionStorage,handler:function(){sessionStorage.length&&_j.messageBroadcast(Object(c.a)({type:ZPe.setSessionStorage},sessionStorage))}}),new Promise((function(e){sessionStorage.length>0?e(void 0):(_j.messageBroadcast({type:ZPe.getSessionStorage}),setTimeout(e,1e3)),_j.addMessageHandler({type:ZPe.setSessionStorage,handler:function(e){if(!sessionStorage.length)return Object.keys(e).forEach((function(t){window.sessionStorage.setItem(t,e[t])})),Promise.resolve()}})}))).then((function(){if(!pj(ij.access_token))return e.handleUserLoad();kj(),e.props.dispatch(mP()).then(e.handleUserLoad).catch(e.handleUserLoad)}))}},{key:"render",value:function(){var e=this.props.user;return this.state.isLoading?"Loading...":Object(a.jsx)(v.a,{children:Object(a.jsxs)(O.d,{children:[Object(a.jsx)(O.b,{exact:!0,path:"/operations/inventories/:id/report",component:function(e){return Object(a.jsx)(IFe,Object(c.a)({},e))}}),Object(a.jsx)(O.b,{exact:!0,path:"/external/job/contract/:uid/:model?",component:PFe}),e?Object(a.jsx)(O.b,{path:"/",component:PPe}):Object(a.jsx)(O.b,{exact:!0,path:"/login",component:function(e){return Object(a.jsx)(rFe,Object(c.a)({},e))}}),Object(a.jsx)(O.b,{path:"/office365-success",component:function(e){return Object(a.jsx)(oFe,Object(c.a)({},e))}}),Object(a.jsx)(O.a,{to:"/login"})]})})}}]),n}(p.Component),UFe=Object(b.b)((function(e){return{user:e.user.me}}))(FFe),BFe=n(395);n(1079),n(1080),n(1081),n(1082);o.render(Object(a.jsx)(BFe.ThroughProvider,{children:Object(a.jsx)(b.a,{store:f7,children:Object(a.jsx)(UFe,{})})}),document.getElementById("root"))},62:function(e,t,n){e.exports={xs:"FinanceItems_xs__aCaE5",sm:"FinanceItems_sm__1u5c-",md:"FinanceItems_md__K-SlW",remove:"FinanceItems_remove__3Lmu4",total:"FinanceItems_total__3zDYY"}},975:function(e,t,n){}},[[1083,1,2]]]);